<!DOCTYPE html>
<!-- Version 2.1 - Schema-compliant Property & Unit Management -->
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <script> window.FontAwesomeConfig = { autoReplaceSvg: 'nest'};</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/heatmap.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'haltung': ['Inter', 'sans-serif'],
                    },
                    colors: {
                        stone: '#F0F0F0',
                        slate: '#252525',
                        concrete: '#8E8E8E',
                        success: '#10B981',
                        warning: '#F59E0B',
                        danger: '#EF4444',
                        info: '#3B82F6'
                    },
                    spacing: {
                        '25': '25px'
                    }
                }
            }
        }
    </script>
    <style>
        ::-webkit-scrollbar { display: none; }
        
        /* Hide Manus watermark elements */
        footer-watermark,
        make-with-manus,
        manus-content-root {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            pointer-events: none !important;
        }
    </style>
</head>
<body class="bg-stone font-haltung">
    <!-- COMPONENT: Top Navigation Header -->
    <header id="header" class="sticky top-0 z-50 bg-white border-b border-stone">
        <div class="flex items-center justify-between px-25 py-4">
            <!-- Logo and Brand -->
            <div class="flex items-center space-x-6">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-slate rounded-lg flex items-center justify-center">
                        <i class="fa-solid fa-cube text-white text-lg"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-semibold text-slate tracking-tight">UNION Core Plus</h1>
                        <p class="text-xs text-concrete">Built for the Best</p>
                    </div>
                </div>
            </div>

            <!-- Global Search -->
            <div class="flex-1 max-w-2xl mx-25">
                <div class="relative">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                        <i class="fa-solid fa-search text-concrete"></i>
                    </div>
                    <input type="text" class="w-full pl-12 pr-4 py-3 bg-stone border-0 rounded-lg text-slate placeholder-concrete focus:outline-none focus:ring-2 focus:ring-slate" placeholder="Search deals, properties, documents, tasks, vendors..." data-search-target="[data-searchable]" data-search-fields="text">
                </div>
            </div>

            <!-- User Actions -->
            <div class="flex items-center space-x-4">
                <!-- Quick Actions -->
                <div class="flex items-center space-x-2">
                    <button class="p-2 text-concrete hover:text-slate transition-colors" title="Add Property">
                        <i class="fa-solid fa-plus"></i>
                    </button>
                    <button class="p-2 text-concrete hover:text-slate transition-colors" title="Create Proposal">
                        <i class="fa-solid fa-file-contract"></i>
                    </button>
                </div>

                <!-- Notifications -->
                <div class="relative">
                    <button class="p-2 text-concrete hover:text-slate transition-colors" id="notifications-btn">
                        <i class="fa-regular fa-bell"></i>
                        <span class="absolute -top-1 -right-1 w-3 h-3 bg-danger rounded-full"></span>
                    </button>
                </div>

                <!-- User Profile -->
                <div class="flex items-center space-x-3">
                    <div class="text-right">
                        <p class="text-sm font-medium text-slate">Executive View</p>
                        <p class="text-xs text-concrete">Portfolio Navigator</p>
                    </div>
                    <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="User" class="w-10 h-10 rounded-full">
                </div>
            </div>
        </div>
    </header>

    <!-- OPTION 1: EXPANDED DESKTOP NAVIGATION -->
    <div id="nav-option-1" class="flex h-screen">
        <!-- Left Navigation - Expanded -->
        <aside id="sidebar-expanded" class="w-66 bg-white border-r border-stone flex flex-col">
            <!-- Header -->
            <div class="p-6 border-b border-stone">

                
                <!-- Role Context -->
                <div class="bg-stone rounded-lg p-4">
                    <div class="flex items-center space-x-3">
                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="Executive" class="w-8 h-8 rounded-full">
                        <div>
                            <p class="text-sm font-semibold text-slate">Executive</p>
                            <p class="text-xs text-concrete">Portfolio Navigator</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation Menu -->
            <nav class="flex-1 p-6 space-y-6 overflow-y-auto">
                <!-- Dashboard -->
                <div>
                    <span class="flex items-center px-4 py-3 text-slate bg-stone rounded-lg font-medium cursor-pointer" id="nav-dashboard">
                        <i class="fa-solid fa-chart-line mr-3 w-5"></i>
                        <span>Dashboard</span>
                        <span class="ml-auto text-xs bg-info bg-opacity-20 text-info px-2 py-1 rounded-full">Live</span>
                    </span>
                </div>

                <!-- Global -->
                <div>
                    <h3 class="text-xs font-semibold text-concrete uppercase tracking-wide mb-3 px-4">Global</h3>
                    <div class="space-y-1">
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-search">
                            <i class="fa-solid fa-search mr-3 w-5"></i>
                            <span>Search</span>
                            <kbd class="ml-auto text-xs bg-stone px-2 py-1 rounded">⌘K</kbd>
                        </span>
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-notifications">
                            <i class="fa-regular fa-bell mr-3 w-5"></i>
                            <span>Notifications</span>
                            <span class="ml-auto w-2 h-2 bg-danger rounded-full"></span>
                        </span>
                    </div>
                </div>

                <!-- Origination -->
                <div>
                    <h3 class="text-xs font-semibold text-concrete uppercase tracking-wide mb-3 px-4">Origination</h3>
                    <div class="space-y-1">
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-pipeline">
                            <i class="fa-solid fa-building mr-3 w-5"></i>
                            <span>Pipeline</span>
                            <span class="ml-auto text-xs bg-slate bg-opacity-10 text-slate px-2 py-1 rounded-full">247</span>
                        </span>
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-property-index">
                            <i class="fa-solid fa-database mr-3 w-5"></i>
                            <span>Property Index</span>
                        </span>
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-viewing-scheduler">
                            <i class="fa-solid fa-calendar-alt mr-3 w-5"></i>
                            <span>Viewing Scheduler</span>
                            <span class="ml-auto text-xs bg-warning bg-opacity-20 text-warning px-2 py-1 rounded-full">12</span>
                        </span>
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-research">
                            <i class="fa-solid fa-chart-bar mr-3 w-5"></i>
                            <span>Research & Comps</span>
                        </span>
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-brokers">
                            <i class="fa-solid fa-handshake mr-3 w-5"></i>
                            <span>Brokers</span>
                            <span class="ml-auto text-xs bg-success bg-opacity-20 text-success px-2 py-1 rounded-full">NEW</span>
                        </span>
                    </div>
                </div>

                <!-- Negotiation -->
                <div>
                    <h3 class="text-xs font-semibold text-concrete uppercase tracking-wide mb-3 px-4">Negotiation</h3>
                    <div class="space-y-1">
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-deals-overview">
                            <i class="fa-solid fa-chart-pie mr-3 w-5"></i>
                            <span>Deals Overview</span>
                        </span>
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-commercials">
                            <i class="fa-solid fa-calculator mr-3 w-5"></i>
                            <span>Commercials</span>
                        </span>
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-approval-requests">
                            <i class="fa-solid fa-check-circle mr-3 w-5"></i>
                            <span>Pending Approvals</span>
                        </span>
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-hots">
                            <i class="fa-solid fa-file-signature mr-3 w-5"></i>
                            <span>HoTs & Redlines</span>
                        </span>
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-fitout">
                            <i class="fa-solid fa-hammer mr-3 w-5"></i>
                            <span>Fit-Out & Milestones</span>
                            <span class="ml-auto text-xs bg-success bg-opacity-20 text-success px-2 py-1 rounded-full">NEW</span>
                        </span>
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-contracts">
                            <i class="fa-solid fa-money-bill mr-3 w-5"></i>
                            <span>Contracts & Fees</span>
                            <span class="ml-auto text-xs bg-success bg-opacity-20 text-success px-2 py-1 rounded-full">NEW</span>
                        </span>

                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-heads-of-terms">
                            <i class="fa-solid fa-file-signature mr-3 w-5"></i>
                            <span>Heads of Terms</span>
                        </span>

                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-document-management">
                            <i class="fa-solid fa-folder-open mr-3 w-5"></i>
                            <span>Document Management</span>
                        </span>

                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-task-management">
                            <i class="fa-solid fa-tasks mr-3 w-5"></i>
                            <span>Task Management</span>
                        </span>

                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-risk-assessment">
                            <i class="fa-solid fa-shield-alt mr-3 w-5"></i>
                            <span>Risk Assessment</span>
                        </span>
                    </div>
                </div>

                <!-- Delivery / Operations -->
                <div>
                    <h3 class="text-xs font-semibold text-concrete uppercase tracking-wide mb-3 px-4">Delivery / Operations</h3>
                    <div class="space-y-1">
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-onboarding">
                            <i class="fa-solid fa-clipboard-check mr-3 w-5"></i>
                            <span>Onboarding Board</span>
                        </span>
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-projects">
                            <i class="fa-solid fa-project-diagram mr-3 w-5"></i>
                            <span>Projects (PM)</span>
                        </span>
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-service-catalogue">
                            <i class="fa-solid fa-list-alt mr-3 w-5"></i>
                            <span>Service Catalogue</span>
                        </span>
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-ticket-desk">
                            <i class="fa-solid fa-ticket-alt mr-3 w-5"></i>
                            <span>Ticket Desk</span>
                            <span class="ml-auto text-xs bg-danger bg-opacity-20 text-danger px-2 py-1 rounded-full">8</span>
                        </span>
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-vendors">
                            <i class="fa-solid fa-truck mr-3 w-5"></i>
                            <span>Vendors</span>
                        </span>
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-servicing">
                            <i class="fa-solid fa-cogs mr-3 w-5"></i>
                            <span>Servicing Hub</span>
                        </span>
                    </div>
                </div>

                <!-- Analytics / Oversight -->
                <div>
                    <h3 class="text-xs font-semibold text-concrete uppercase tracking-wide mb-3 px-4">Analytics / Oversight</h3>
                    <div class="space-y-1">
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-portfolio">
                            <i class="fa-solid fa-chart-pie mr-3 w-5"></i>
                            <span>Portfolio / BI</span>
                        </span>
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-bottleneck">
                            <i class="fa-solid fa-funnel-dollar mr-3 w-5"></i>
                            <span>Bottleneck Analysis</span>
                        </span>
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-sla">
                            <i class="fa-solid fa-shield-alt mr-3 w-5"></i>
                            <span>SLA Governance</span>
                            <span class="ml-auto text-xs bg-success bg-opacity-20 text-success px-2 py-1 rounded-full">NEW</span>
                        </span>
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-economics">
                            <i class="fa-solid fa-coins mr-3 w-5"></i>
                            <span>Unit Economics</span>
                            <span class="ml-auto text-xs bg-success bg-opacity-20 text-success px-2 py-1 rounded-full">NEW</span>
                        </span>
                    </div>
                </div>

                <!-- Admin -->
                <div>
                    <h3 class="text-xs font-semibold text-concrete uppercase tracking-wide mb-3 px-4">Admin</h3>
                    <div class="space-y-1">
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-interventions">
                            <i class="fa-solid fa-exclamation-triangle mr-3 w-5"></i>
                            <span>Interventions</span>
                        </span>
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-activity-log">
                            <i class="fa-solid fa-history mr-3 w-5"></i>
                            <span>Audit & Activity Log</span>
                        </span>
                        <span class="flex items-center px-4 py-3 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-settings">
                            <i class="fa-solid fa-cog mr-3 w-5"></i>
                            <span>Settings & Roles</span>
                        </span>
                    </div>
                </div>
            </nav>

            <!-- Footer -->
            <div class="p-6 border-t border-stone">
                <div class="flex items-center justify-between">
                    <button class="p-2 text-concrete hover:text-slate transition-colors" title="Collapse Sidebar" id="collapse-btn-1">
                        <i class="fa-solid fa-chevron-left"></i>
                    </button>
                    <div class="flex items-center space-x-2">
                        <button class="p-2 text-concrete hover:text-slate transition-colors" title="Help">
                            <i class="fa-solid fa-question-circle"></i>
                        </button>
                        <button class="p-2 text-concrete hover:text-slate transition-colors" title="Settings">
                            <i class="fa-solid fa-cog"></i>
                        </button>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main id="main-content-expanded" class="flex-1 bg-stone p-25 overflow-y-auto">
            <!-- DASHBOARD PAGE -->
            <div id="dashboard-page" class="page-content">
            <!-- SECTION: Executive Dashboard Header -->
            <section id="dashboard-header" class="mb-8">
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h1 class="text-3xl font-semibold text-slate mb-2">Executive Dashboard</h1>
                        <p class="text-concrete">Portfolio overview and operational insights</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="flex items-center space-x-2 bg-white rounded-lg px-4 py-2 border border-stone">
                            <i class="fa-solid fa-calendar text-concrete"></i>
                            <span class="text-sm text-slate">Last 30 days</span>
                            <i class="fa-solid fa-chevron-down text-concrete text-xs"></i>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION: KPI Overview Tiles -->
            <section id="kpi-tiles" class="mb-8">
                <div class="grid grid-cols-4 gap-25">
                    <!-- Pipeline Value KPI -->
                    <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-success bg-opacity-10 rounded-lg flex items-center justify-center">
                                <i class="fa-solid fa-chart-line text-success"></i>
                            </div>
                            <span class="text-xs bg-success bg-opacity-10 text-success px-2 py-1 rounded-full">+12.5%</span>
                        </div>
                        <h3 class="text-2xl font-semibold text-slate mb-1">£47.2M</h3>
                        <p class="text-sm text-concrete">Pipeline Value</p>
                        <div class="mt-4 h-2 bg-stone rounded-full">
                            <div class="h-2 bg-success rounded-full" style="width: 72%"></div>
                        </div>
                    </div>

                    <!-- Win Rate KPI -->
                    <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-info bg-opacity-10 rounded-lg flex items-center justify-center">
                                <i class="fa-solid fa-target text-info"></i>
                            </div>
                            <span class="text-xs bg-success bg-opacity-10 text-success px-2 py-1 rounded-full">+3.2%</span>
                        </div>
                        <h3 class="text-2xl font-semibold text-slate mb-1">68.4%</h3>
                        <p class="text-sm text-concrete">Win Rate</p>
                        <div class="mt-4 h-2 bg-stone rounded-full">
                            <div class="h-2 bg-info rounded-full" style="width: 68%"></div>
                        </div>
                    </div>

                    <!-- Average Cycle Time KPI -->
                    <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-warning bg-opacity-10 rounded-lg flex items-center justify-center">
                                <i class="fa-solid fa-clock text-warning"></i>
                            </div>
                            <span class="text-xs bg-danger bg-opacity-10 text-danger px-2 py-1 rounded-full">+2.1d</span>
                        </div>
                        <h3 class="text-2xl font-semibold text-slate mb-1">42.3d</h3>
                        <p class="text-sm text-concrete">Avg Cycle Time</p>
                        <div class="mt-4 h-2 bg-stone rounded-full">
                            <div class="h-2 bg-warning rounded-full" style="width: 45%"></div>
                        </div>
                    </div>

                    <!-- SLA Compliance KPI -->
                    <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                        <div class="flex items-center justify-between mb-4">
                            <div class="w-12 h-12 bg-danger bg-opacity-10 rounded-lg flex items-center justify-center">
                                <i class="fa-solid fa-shield-halved text-danger"></i>
                            </div>
                            <span class="text-xs bg-danger bg-opacity-10 text-danger px-2 py-1 rounded-full">-5.8%</span>
                        </div>
                        <h3 class="text-2xl font-semibold text-slate mb-1">89.2%</h3>
                        <p class="text-sm text-concrete">SLA Compliance</p>
                        <div class="mt-4 h-2 bg-stone rounded-full">
                            <div class="h-2 bg-danger rounded-full" style="width: 89%"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION: Quick Actions Panel -->
            <section id="quick-actions" class="mb-8">
                <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                    <h2 class="text-lg font-semibold text-slate mb-4">Quick Actions</h2>
                    <div class="grid grid-cols-4 gap-4">
                        <button class="flex flex-col items-center p-4 bg-stone rounded-lg hover:bg-opacity-80 transition-colors">
                            <i class="fa-solid fa-plus-circle text-2xl text-slate mb-2"></i>
                            <span class="text-sm font-medium text-slate">Add Property</span>
                        </button>
                        <button class="flex flex-col items-center p-4 bg-stone rounded-lg hover:bg-opacity-80 transition-colors">
                            <i class="fa-solid fa-file-contract text-2xl text-slate mb-2"></i>
                            <span class="text-sm font-medium text-slate">Create Proposal</span>
                        </button>
                        <button class="flex flex-col items-center p-4 bg-stone rounded-lg hover:bg-opacity-80 transition-colors">
                            <i class="fa-solid fa-clipboard-list text-2xl text-slate mb-2"></i>
                            <span class="text-sm font-medium text-slate">Generate Onboarding</span>
                        </button>
                        <button class="flex flex-col items-center p-4 bg-stone rounded-lg hover:bg-opacity-80 transition-colors">
                            <i class="fa-solid fa-exclamation-triangle text-2xl text-slate mb-2"></i>
                            <span class="text-sm font-medium text-slate">Create Intervention</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- SECTION: Deal Flow Funnel -->
            <section id="deal-funnel" class="mb-8">
                <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-lg font-semibold text-slate">Deal Flow Funnel</h2>
                        <div class="flex items-center space-x-2">
                            <button class="text-xs text-concrete hover:text-slate">View Details</button>
                            <i class="fa-solid fa-external-link-alt text-xs text-concrete"></i>
                        </div>
                    </div>
                    <div class="space-y-4">
                        <!-- Lead Stage -->
                        <div class="flex items-center">
                            <div class="w-24 text-sm font-medium text-slate">Lead</div>
                            <div class="flex-1 mx-4">
                                <div class="h-8 bg-stone rounded-lg overflow-hidden">
                                    <div class="h-full bg-slate rounded-lg flex items-center px-3" style="width: 100%">
                                        <span class="text-xs text-white font-medium">247 deals • £52.8M</span>
                                    </div>
                                </div>
                            </div>
                            <div class="w-16 text-right text-sm text-concrete">100%</div>
                        </div>

                        <!-- Viewing Stage -->
                        <div class="flex items-center">
                            <div class="w-24 text-sm font-medium text-slate">Viewing</div>
                            <div class="flex-1 mx-4">
                                <div class="h-8 bg-stone rounded-lg overflow-hidden">
                                    <div class="h-full bg-info rounded-lg flex items-center px-3" style="width: 78%">
                                        <span class="text-xs text-white font-medium">193 deals • £41.2M</span>
                                    </div>
                                </div>
                            </div>
                            <div class="w-16 text-right text-sm text-concrete">78.1%</div>
                        </div>

                        <!-- Proposal Stage -->
                        <div class="flex items-center">
                            <div class="w-24 text-sm font-medium text-slate">Proposal</div>
                            <div class="flex-1 mx-4">
                                <div class="h-8 bg-stone rounded-lg overflow-hidden">
                                    <div class="h-full bg-success rounded-lg flex items-center px-3" style="width: 65%">
                                        <span class="text-xs text-white font-medium">161 deals • £35.7M</span>
                                    </div>
                                </div>
                            </div>
                            <div class="w-16 text-right text-sm text-concrete">65.2%</div>
                        </div>

                        <!-- HoT Stage -->
                        <div class="flex items-center">
                            <div class="w-24 text-sm font-medium text-slate">HoT</div>
                            <div class="flex-1 mx-4">
                                <div class="h-8 bg-stone rounded-lg overflow-hidden">
                                    <div class="h-full bg-warning rounded-lg flex items-center px-3" style="width: 52%">
                                        <span class="text-xs text-white font-medium">128 deals • £28.9M</span>
                                    </div>
                                </div>
                            </div>
                            <div class="w-16 text-right text-sm text-concrete">51.8%</div>
                        </div>

                        <!-- Signed Stage -->
                        <div class="flex items-center">
                            <div class="w-24 text-sm font-medium text-slate">Signed</div>
                            <div class="flex-1 mx-4">
                                <div class="h-8 bg-stone rounded-lg overflow-hidden">
                                    <div class="h-full bg-success rounded-lg flex items-center px-3" style="width: 42%">
                                        <span class="text-xs text-white font-medium">104 deals • £23.1M</span>
                                    </div>
                                </div>
                            </div>
                            <div class="w-16 text-right text-sm text-concrete">42.1%</div>
                        </div>

                        <!-- Live Stage -->
                        <div class="flex items-center">
                            <div class="w-24 text-sm font-medium text-slate">Live</div>
                            <div class="flex-1 mx-4">
                                <div class="h-8 bg-stone rounded-lg overflow-hidden">
                                    <div class="h-full bg-slate rounded-lg flex items-center px-3" style="width: 38%">
                                        <span class="text-xs text-white font-medium">94 deals • £21.4M</span>
                                    </div>
                                </div>
                            </div>
                            <div class="w-16 text-right text-sm text-concrete">38.1%</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION: Cycle Time Trends & Stage Bottleneck Matrix -->
            <section id="cycle-time-and-bottlenecks" class="mb-8">
                <div class="grid grid-cols-2 gap-25">
                    <!-- Cycle Time Trends - Stage Velocity -->
                    <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h2 class="text-lg font-semibold text-slate">Cycle Time Trends - Stage Velocity</h2>
                                <p class="text-sm text-concrete">Track how quickly deals move between stages</p>
                            </div>
                            <div class="flex items-center space-x-2">
                                <div class="text-xs bg-success bg-opacity-10 text-success px-2 py-1 rounded-full">Fastest: Viewing</div>
                                <div class="text-xs bg-danger bg-opacity-10 text-danger px-2 py-1 rounded-full">Slowest: HoTs</div>
                            </div>
                        </div>
                        <div id="cycle-time-chart" class="h-64 mb-4"></div>
                        <div class="grid grid-cols-3 gap-4 text-center">
                            <div class="p-3 bg-stone bg-opacity-30 rounded-lg">
                                <div class="text-lg font-semibold text-slate">3.2d</div>
                                <div class="text-xs text-concrete">Lead → Viewing</div>
                                <div class="text-xs text-success">vs 4d target</div>
                            </div>
                            <div class="p-3 bg-stone bg-opacity-30 rounded-lg">
                                <div class="text-lg font-semibold text-slate">22d</div>
                                <div class="text-xs text-concrete">Proposal → HoTs</div>
                                <div class="text-xs text-danger">vs 18d target</div>
                            </div>
                            <div class="p-3 bg-stone bg-opacity-30 rounded-lg">
                                <div class="text-lg font-semibold text-slate">12d</div>
                                <div class="text-xs text-concrete">HoTs → Signed</div>
                                <div class="text-xs text-warning">vs 10d target</div>
                            </div>
                        </div>
                    </div>

                    <!-- Stage Bottleneck Matrix -->
                    <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h2 class="text-lg font-semibold text-slate">Stage Bottleneck Matrix</h2>
                                <p class="text-sm text-concrete">See where delays are accumulating</p>
                            </div>
                            <button class="text-sm text-info hover:underline" onclick="openDealRoomFiltered()">View Affected Deals</button>
                        </div>
                        <div id="bottleneck-heatmap" class="h-64 mb-4"></div>
                        <div class="flex items-center justify-between text-xs text-concrete">
                            <span>Low Delay</span>
                            <div class="flex items-center space-x-1">
                                <div class="w-3 h-3 bg-success bg-opacity-20 rounded"></div>
                                <div class="w-3 h-3 bg-warning bg-opacity-40 rounded"></div>
                                <div class="w-3 h-3 bg-danger bg-opacity-60 rounded"></div>
                                <div class="w-3 h-3 bg-danger bg-opacity-90 rounded"></div>
                            </div>
                            <span>High Delay</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION: At-Risk Deals & Last 10 Interventions -->
            <section id="risk-and-interventions" class="mb-8">
                <div class="grid grid-cols-2 gap-25">
                    <!-- At-Risk Deals -->
                    <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-lg font-semibold text-slate">At-Risk Deals</h2>
                            <span class="text-xs bg-danger bg-opacity-10 text-danger px-2 py-1 rounded-full">12 Critical</span>
                        </div>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-4 bg-danger bg-opacity-5 rounded-lg border-l-4 border-danger">
                                <div class="flex-1">
                                    <div class="flex items-center space-x-2 mb-1">
                                        <h3 class="font-medium text-slate">Canary Wharf Tower 42</h3>
                                        <span class="text-xs bg-danger text-white px-2 py-1 rounded">SLA Breach</span>
                                    </div>
                                    <p class="text-sm text-concrete">HoT approval overdue by 3 days</p>
                                    <div class="flex items-center space-x-4 mt-2 text-xs text-concrete">
                                        <span>£2.1M value</span>
                                        <span>Legal review pending</span>
                                        <span>Max assigned</span>
                                    </div>
                                </div>
                                <button class="text-sm bg-slate text-white px-3 py-1 rounded hover:bg-opacity-90" data-action="intervene" data-item-type="deal">
                                    Intervene
                                </button>
                            </div>

                            <div class="flex items-center justify-between p-4 bg-warning bg-opacity-5 rounded-lg border-l-4 border-warning">
                                <div class="flex-1">
                                    <div class="flex items-center space-x-2 mb-1">
                                        <h3 class="font-medium text-slate">The Shard Office Suite</h3>
                                        <span class="text-xs bg-warning text-white px-2 py-1 rounded">At Risk</span>
                                    </div>
                                    <p class="text-sm text-concrete">Onboarding 80% complete, go-live in 2 days</p>
                                    <div class="flex items-center space-x-4 mt-2 text-xs text-concrete">
                                        <span>£1.8M value</span>
                                        <span>Vendor delays</span>
                                        <span>Dani assigned</span>
                                    </div>
                                </div>
                                <button class="text-sm bg-slate text-white px-3 py-1 rounded hover:bg-opacity-90" data-action="escalate" data-item-type="deal">
                                    Escalate
                                </button>
                            </div>

                            <div class="flex items-center justify-between p-4 bg-info bg-opacity-5 rounded-lg border-l-4 border-info">
                                <div class="flex-1">
                                    <div class="flex items-center space-x-2 mb-1">
                                        <h3 class="font-medium text-slate">King's Cross Central</h3>
                                        <span class="text-xs bg-info text-white px-2 py-1 rounded">Monitor</span>
                                    </div>
                                    <p class="text-sm text-concrete">Proposal stage, 5 days remaining</p>
                                    <div class="flex items-center space-x-4 mt-2 text-xs text-concrete">
                                        <span>£3.2M value</span>
                                        <span>On track</span>
                                        <span>Tom assigned</span>
                                    </div>
                                </div>
                                <button class="text-sm bg-stone text-slate px-3 py-1 rounded hover:bg-opacity-80">
                                    View
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Last 10 Interventions -->
                    <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-lg font-semibold text-slate">Last 10 Interventions</h2>
                            <button class="text-sm text-info hover:underline" data-view-all="deals-overview">View All</button>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-3 bg-success bg-opacity-5 rounded-lg border-l-4 border-success">
                                <div class="flex-1">
                                    <div class="flex items-center space-x-2 mb-1">
                                        <span class="text-xs bg-success text-white px-2 py-1 rounded">Resolved</span>
                                        <h3 class="text-sm font-medium text-slate">Legal Review Expedite</h3>
                                    </div>
                                    <p class="text-xs text-concrete">Reduced HoT approval time by 4.2 days avg</p>
                                    <p class="text-xs text-concrete mt-1">Impact: +8% SLA compliance • 2 days ago</p>
                                </div>
                            </div>

                            <div class="flex items-center justify-between p-3 bg-warning bg-opacity-5 rounded-lg border-l-4 border-warning">
                                <div class="flex-1">
                                    <div class="flex items-center space-x-2 mb-1">
                                        <span class="text-xs bg-warning text-white px-2 py-1 rounded">In Progress</span>
                                        <h3 class="text-sm font-medium text-slate">Vendor Response SLA</h3>
                                    </div>
                                    <p class="text-xs text-concrete">Enforcing 24h response time for critical onboarding tasks</p>
                                    <p class="text-xs text-concrete mt-1">Expected: +15% delivery speed • 1 week ago</p>
                                </div>
                            </div>

                            <div class="flex items-center justify-between p-3 bg-success bg-opacity-5 rounded-lg border-l-4 border-success">
                                <div class="flex-1">
                                    <div class="flex items-center space-x-2 mb-1">
                                        <span class="text-xs bg-success text-white px-2 py-1 rounded">Resolved</span>
                                        <h3 class="text-sm font-medium text-slate">Proposal Template Update</h3>
                                    </div>
                                    <p class="text-xs text-concrete">Standardized pricing scenarios reduced prep time</p>
                                    <p class="text-xs text-concrete mt-1">Impact: -2.3d cycle time • 2 weeks ago</p>
                                </div>
                            </div>

                            <div class="flex items-center justify-between p-3 bg-danger bg-opacity-5 rounded-lg border-l-4 border-danger">
                                <div class="flex-1">
                                    <div class="flex items-center space-x-2 mb-1">
                                        <span class="text-xs bg-danger text-white px-2 py-1 rounded">Failed</span>
                                        <h3 class="text-sm font-medium text-slate">Auto-Viewing Scheduler</h3>
                                    </div>
                                    <p class="text-xs text-concrete">Technical issues prevented rollout</p>
                                    <p class="text-xs text-concrete mt-1">Impact: 0% improvement • 3 weeks ago</p>
                                </div>
                            </div>

                            <div class="text-center pt-2">
                                <button class="text-xs text-concrete hover:text-slate">Show 6 more interventions</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION: Performance Analytics -->
            <section id="performance-analytics" class="mb-8">
                <div class="grid grid-cols-2 gap-25">
                    <!-- SLA Compliance -->
                    <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                        <h2 class="text-lg font-semibold text-slate mb-4">SLA Compliance</h2>
                        <div class="relative h-48 flex items-center justify-center">
                            <svg class="w-32 h-32 transform -rotate-90">
                                <circle cx="64" cy="64" r="56" stroke="#F0F0F0" stroke-width="8" fill="none"/>
                                <circle cx="64" cy="64" r="56" stroke="#EF4444" stroke-width="8" fill="none"
                                        stroke-dasharray="351.86" stroke-dashoffset="38.4" stroke-linecap="round"/>
                            </svg>
                            <div class="absolute text-center">
                                <div class="text-2xl font-semibold text-slate">89.2%</div>
                                <div class="text-xs text-concrete">Compliance</div>
                            </div>
                        </div>
                        <div class="space-y-2 mt-4">
                            <div class="flex justify-between text-sm">
                                <span class="text-concrete">On Time</span>
                                <span class="text-slate">89.2%</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-concrete">Minor Delays</span>
                                <span class="text-slate">7.3%</span>
                            </div>
                            <div class="flex justify-between text-sm">
                                <span class="text-concrete">Major Breaches</span>
                                <span class="text-slate">3.5%</span>
                            </div>
                        </div>
                    </div>

                    <!-- Forecast vs Actual Variance -->
                    <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-lg font-semibold text-slate">Forecast vs Actual</h2>
                            <div class="flex items-center space-x-4">
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-slate rounded-full"></div>
                                    <span class="text-sm text-concrete">Forecast</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div class="w-3 h-3 bg-info rounded-full"></div>
                                    <span class="text-sm text-concrete">Actual</span>
                                </div>
                            </div>
                        </div>
                        <div class="space-y-6">
                            <div>
                                <h3 class="font-medium text-slate mb-3">Pipeline Value</h3>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-concrete">Forecast</span>
                                        <span class="text-slate">£52.0M</span>
                                    </div>
                                    <div class="h-2 bg-stone rounded-full">
                                        <div class="h-2 bg-slate rounded-full" style="width: 100%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-concrete">Actual</span>
                                        <span class="text-info">£47.2M</span>
                                    </div>
                                    <div class="h-2 bg-stone rounded-full">
                                        <div class="h-2 bg-info rounded-full" style="width: 91%"></div>
                                    </div>
                                    <div class="text-xs text-danger">-9.2% variance</div>
                                </div>
                            </div>

                            <div>
                                <h3 class="font-medium text-slate mb-3">Win Rate</h3>
                                <div class="space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-concrete">Forecast</span>
                                        <span class="text-slate">65.0%</span>
                                    </div>
                                    <div class="h-2 bg-stone rounded-full">
                                        <div class="h-2 bg-slate rounded-full" style="width: 65%"></div>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-concrete">Actual</span>
                                        <span class="text-info">68.4%</span>
                                    </div>
                                    <div class="h-2 bg-stone rounded-full">
                                        <div class="h-2 bg-info rounded-full" style="width: 68%"></div>
                                    </div>
                                    <div class="text-xs text-success">+3.4% variance</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION: Recent Activity Feed -->
            <section id="activity-feed" class="mb-8">
                <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-lg font-semibold text-slate">Recent Activity</h2>
                        <button class="text-sm text-info hover:underline" data-view-all="deals-overview">View All</button>
                    </div>
                    <div class="space-y-4">
                        <div class="flex items-start space-x-4 pb-4 border-b border-stone">
                            <div class="w-2 h-2 bg-success rounded-full mt-2"></div>
                            <div class="flex-1">
                                <p class="text-sm text-slate">
                                    <span class="font-medium">Max</span> approved HoT for 
                                    <span class="font-medium">Canary Wharf Tower 42</span>
                                </p>
                                <p class="text-xs text-concrete mt-1">2 minutes ago</p>
                            </div>
                            <span class="text-xs bg-success bg-opacity-10 text-success px-2 py-1 rounded">Deal Progress</span>
                        </div>

                        <div class="flex items-start space-x-4 pb-4 border-b border-stone">
                            <div class="w-2 h-2 bg-warning rounded-full mt-2"></div>
                            <div class="flex-1">
                                <p class="text-sm text-slate">
                                    <span class="font-medium">Dani</span> marked onboarding task as blocked for 
                                    <span class="font-medium">The Shard Office Suite</span>
                                </p>
                                <p class="text-xs text-concrete mt-1">15 minutes ago</p>
                            </div>
                            <span class="text-xs bg-warning bg-opacity-10 text-warning px-2 py-1 rounded">Blocker</span>
                        </div>

                        <div class="flex items-start space-x-4 pb-4 border-b border-stone">
                            <div class="w-2 h-2 bg-info rounded-full mt-2"></div>
                            <div class="flex-1">
                                <p class="text-sm text-slate">
                                    <span class="font-medium">Tom</span> scheduled viewing for 
                                    <span class="font-medium">King's Cross Central</span>
                                </p>
                                <p class="text-xs text-concrete mt-1">1 hour ago</p>
                            </div>
                            <span class="text-xs bg-info bg-opacity-10 text-info px-2 py-1 rounded">Viewing</span>
                        </div>

                        <div class="flex items-start space-x-4 pb-4 border-b border-stone">
                            <div class="w-2 h-2 bg-danger rounded-full mt-2"></div>
                            <div class="flex-1">
                                <p class="text-sm text-slate">
                                    SLA breach detected for 
                                    <span class="font-medium">Bishopsgate Plaza</span> - Legal approval overdue
                                </p>
                                <p class="text-xs text-concrete mt-1">3 hours ago</p>
                            </div>
                            <span class="text-xs bg-danger bg-opacity-10 text-danger px-2 py-1 rounded">SLA Breach</span>
                        </div>

                        <div class="flex items-start space-x-4">
                            <div class="w-2 h-2 bg-success rounded-full mt-2"></div>
                            <div class="flex-1">
                                <p class="text-sm text-slate">
                                    <span class="font-medium">Executive</span> created intervention for 
                                    <span class="font-medium">Proposal bottleneck</span>
                                </p>
                                <p class="text-xs text-concrete mt-1">4 hours ago</p>
                            </div>
                            <span class="text-xs bg-slate bg-opacity-10 text-slate px-2 py-1 rounded">Intervention</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION: Announcements -->
            <section id="announcements" class="mb-8">
                <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-lg font-semibold text-slate">Announcements</h2>
                        <button class="text-sm text-slate hover:underline" data-action="manage-team">Manage</button>
                    </div>
                    <div class="space-y-4">
                        <div class="bg-info bg-opacity-5 border-l-4 border-info p-4 rounded-r-lg">
                            <div class="flex items-start justify-between">
                                <div class="flex-1">
                                    <h3 class="font-medium text-slate mb-1">System Maintenance Scheduled</h3>
                                    <p class="text-sm text-concrete">
                                        UNION Core will undergo maintenance on Sunday, 15th October from 2:00 AM to 4:00 AM GMT. 
                                        All services will be temporarily unavailable during this period.
                                    </p>
                                    <p class="text-xs text-concrete mt-2">Posted 2 days ago by IT Operations</p>
                                </div>
                                <button class="text-xs text-concrete hover:text-slate ml-4">
                                    <i class="fa-solid fa-times"></i>
                                </button>
                            </div>
                        </div>

                        <div class="bg-success bg-opacity-5 border-l-4 border-success p-4 rounded-r-lg">
                            <div class="flex items-start justify-between">
                                <div class="flex-1">
                                    <h3 class="font-medium text-slate mb-1">New Feature: Automated SLA Monitoring</h3>
                                    <p class="text-sm text-concrete">
                                        We've enhanced our SLA monitoring system with real-time alerts and predictive analytics. 
                                        All team members will receive notifications 24 hours before potential breaches.
                                    </p>
                                    <p class="text-xs text-concrete mt-2">Posted 1 week ago by Product Team</p>
                                </div>
                                <button class="text-xs text-concrete hover:text-slate ml-4">
                                    <i class="fa-solid fa-times"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            </div>
            <!-- END DASHBOARD PAGE -->

            <!-- INTERVENTIONS PAGE -->
            <div id="interventions-page" class="page-content hidden">
                <!-- Page Header -->
                <section class="mb-8">
                    <div class="flex justify-between items-start mb-8">
                        <div>
                            <h1 class="text-3xl font-semibold text-slate mb-2">Interventions</h1>
                            <p class="text-concrete">Central accountability hub for all active and historical interventions</p>
                        </div>
                        <button id="new-intervention-btn" class="bg-slate text-white px-6 py-3 rounded-lg font-medium hover:bg-opacity-90 flex items-center">
                            <i class="fa-solid fa-plus mr-2"></i>
                            New Intervention
                        </button>
                    </div>
                    
                    <!-- Quick Stats Tiles -->
                    <div class="grid grid-cols-5 gap-6">
                        <div class="bg-white p-6 rounded-lg border border-stone">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-concrete text-sm font-medium">Open</span>
                                <i class="fa-solid fa-exclamation-circle text-warning"></i>
                            </div>
                            <div class="text-2xl font-semibold text-slate" id="stat-open">0</div>
                            <div class="text-xs text-concrete mt-1">Active interventions</div>
                        </div>
                        <div class="bg-white p-6 rounded-lg border border-stone">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-concrete text-sm font-medium">In Progress</span>
                                <i class="fa-solid fa-clock text-info"></i>
                            </div>
                            <div class="text-2xl font-semibold text-slate" id="stat-in-progress">0</div>
                            <div class="text-xs text-concrete mt-1">Being worked on</div>
                        </div>
                        <div class="bg-white p-6 rounded-lg border border-stone">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-concrete text-sm font-medium">Closed</span>
                                <i class="fa-solid fa-check-circle text-success"></i>
                            </div>
                            <div class="text-2xl font-semibold text-slate" id="stat-closed">0</div>
                            <div class="text-xs text-concrete mt-1">Completed</div>
                        </div>
                        <div class="bg-white p-6 rounded-lg border border-stone">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-concrete text-sm font-medium">Avg Days to Close</span>
                                <i class="fa-solid fa-calendar-days text-concrete"></i>
                            </div>
                            <div class="text-2xl font-semibold text-slate" id="stat-avg-days">-</div>
                            <div class="text-xs text-concrete mt-1">Resolution time</div>
                        </div>
                        <div class="bg-white p-6 rounded-lg border border-stone">
                            <div class="flex items-center justify-between mb-2">
                                <span class="text-concrete text-sm font-medium">On-Time Rate</span>
                                <i class="fa-solid fa-target text-concrete"></i>
                            </div>
                            <div class="text-2xl font-semibold text-slate" id="stat-on-time">-</div>
                            <div class="text-xs text-concrete mt-1">Within due date</div>
                        </div>
                    </div>
                </section>

                <!-- Filters & Search -->
                <section class="bg-white rounded-lg border border-stone p-6 mb-8">
                    <div class="flex justify-between items-center">
                        <div class="flex items-center space-x-4 flex-1">
                            <div class="relative flex-1 max-w-md">
                                <i class="fa-solid fa-search absolute left-3 top-3 text-concrete"></i>
                                <input type="text" id="interventions-search" placeholder="Search interventions..." class="pl-10 pr-4 py-2 w-full border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" data-search-target="[data-searchable]" data-search-fields="text">
                            </div>
                            <select id="filter-stage" class="px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate text-slate">
                                <option value="">All Stages</option>
                                <option value="Dashboard">Dashboard</option>
                                <option value="At-Risk Deal">At-Risk Deal</option>
                                <option value="Quick Action">Quick Action</option>
                                <option value="General">General</option>
                            </select>
                            <select id="filter-owner" class="px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate text-slate">
                                <option value="">All Owners</option>
                                <option value="Tom">Tom</option>
                                <option value="Max">Max</option>
                                <option value="Dani">Dani</option>
                                <option value="Executive">Executive</option>
                            </select>
                            <select id="filter-status" class="px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate text-slate">
                                <option value="">All Status</option>
                                <option value="Open">Open</option>
                                <option value="In Progress">In Progress</option>
                                <option value="Closed">Closed</option>
                            </select>
                            <select id="filter-priority" class="px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate text-slate">
                                <option value="">All Priority</option>
                                <option value="High">High</option>
                                <option value="Medium">Medium</option>
                                <option value="Low">Low</option>
                            </select>
                        </div>
                        <button data-export="data"  id="export-interventions" class="px-4 py-2 border border-stone rounded-lg text-slate hover:bg-stone flex items-center ml-4"></i>Export</button>
                    </div>
                </section>

                <!-- Interventions Table -->
                <section class="bg-white rounded-lg border border-stone shadow-sm mb-8">
                    <div class="px-6 py-4 border-b border-stone">
                        <div class="flex justify-between items-center">
                            <span class="text-sm text-concrete"><span id="filtered-count">0</span> interventions</span>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-stone border-b border-stone">
                                <tr>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-concrete uppercase tracking-wider cursor-pointer" data-sort="id">
                                        ID <i class="fa-solid fa-sort ml-1"></i>
                                    </th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-concrete uppercase tracking-wider cursor-pointer" data-sort="owner">
                                        Owner <i class="fa-solid fa-sort ml-1"></i>
                                    </th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-concrete uppercase tracking-wider cursor-pointer" data-sort="stage">
                                        Stage <i class="fa-solid fa-sort ml-1"></i>
                                    </th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-concrete uppercase tracking-wider">
                                        Context
                                    </th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-concrete uppercase tracking-wider cursor-pointer" data-sort="priority">
                                        Priority <i class="fa-solid fa-sort ml-1"></i>
                                    </th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-concrete uppercase tracking-wider cursor-pointer" data-sort="status">
                                        Status <i class="fa-solid fa-sort ml-1"></i>
                                    </th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-concrete uppercase tracking-wider cursor-pointer" data-sort="dueDate">
                                        Due Date <i class="fa-solid fa-sort ml-1"></i>
                                    </th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-concrete uppercase tracking-wider">
                                        Expected Impact
                                    </th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold text-concrete uppercase tracking-wider">
                                        Actions
                                    </th>
                                </tr>
                            </thead>
                            <tbody id="interventions-table-body" class="bg-white divide-y divide-stone">
                                <!-- Rows will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div id="empty-state" class="px-6 py-12 text-center hidden">
                        <i class="fa-solid fa-inbox text-4xl text-concrete mb-4"></i>
                        <p class="text-slate font-medium mb-2">No interventions found</p>
                        <p class="text-concrete text-sm">Create your first intervention to get started</p>
                    </div>
                </section>

                <!-- Analytics Section -->
                <section class="grid grid-cols-2 gap-6 mb-8">
                    <div class="bg-white rounded-lg border border-stone p-6">
                        <h3 class="text-lg font-semibold text-slate mb-4">Status Distribution</h3>
                        <div id="status-chart" class="h-64"></div>
                    </div>
                    <div class="bg-white rounded-lg border border-stone p-6">
                        <h3 class="text-lg font-semibold text-slate mb-4">Priority Breakdown</h3>
                        <div id="priority-chart" class="h-64"></div>
                    </div>
                </section>

                <!-- Performance Metrics Section -->
                <section class="mb-8">
                    <h2 class="text-2xl font-bold text-slate mb-6">Performance Metrics</h2>
                    <div class="grid grid-cols-2 gap-6">
                        <!-- Resolution Time by Priority -->
                        <div class="bg-white rounded-lg border border-stone p-6">
                            <h3 class="text-lg font-semibold text-slate mb-6">Resolution Time by Priority</h3>
                            <div class="space-y-4" id="resolution-time-metrics">
                                <!-- Populated by JavaScript -->
                            </div>
                        </div>

                        <!-- Owner Performance -->
                        <div class="bg-white rounded-lg border border-stone p-6">
                            <h3 class="text-lg font-semibold text-slate mb-6">Owner Performance</h3>
                            <div class="space-y-4" id="owner-performance-metrics">
                                <!-- Populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Recent Activity Section -->
                <section class="mb-8">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-slate">Recent Activity</h2>
                        <button class="text-info hover:text-opacity-80 text-sm font-medium" data-view-all="deals-overview">View All</button>
                    </div>
                    <div class="bg-white rounded-lg border border-stone">
                        <div class="divide-y divide-stone" id="recent-activity-feed">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>
                </section>
            </div>
            <!-- END INTERVENTIONS PAGE -->

            <!-- SEARCH PAGE -->
            <div id="search-page" class="page-content hidden">
                <!-- Search Header -->
                <section class="mb-8">
                    <div class="bg-white rounded-lg border border-stone p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h1 class="text-2xl font-semibold text-slate mb-2">Search Results</h1>
                                <p class="text-concrete" id="search-results-summary">Found 0 results</p>
                            </div>
                            <div class="flex items-center space-x-3">
                                <div class="text-right">
                                    <div class="text-sm font-medium text-slate">Search completed in</div>
                                    <div class="text-xs text-concrete" id="search-duration">0.00s</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Search Filters -->
                        <div class="flex items-center justify-between pt-4 border-t border-stone">
                            <div class="flex items-center space-x-2 flex-wrap gap-2">
                                <span class="text-sm text-concrete">Filter by type:</span>
                                <button class="search-filter-btn px-3 py-1 bg-slate text-white text-xs font-medium rounded-full" data-filter="all">All (<span id="count-all">0</span>)</button>
                                <button class="search-filter-btn px-3 py-1 bg-gray-100 text-concrete hover:bg-gray-200 text-xs font-medium rounded-full" data-filter="deals">Deals (<span id="count-deals">0</span>)</button>
                                <button class="search-filter-btn px-3 py-1 bg-gray-100 text-concrete hover:bg-gray-200 text-xs font-medium rounded-full" data-filter="properties">Properties (<span id="count-properties">0</span>)</button>
                                <button class="search-filter-btn px-3 py-1 bg-gray-100 text-concrete hover:bg-gray-200 text-xs font-medium rounded-full" data-filter="documents">Documents (<span id="count-documents">0</span>)</button>
                                <button class="search-filter-btn px-3 py-1 bg-gray-100 text-concrete hover:bg-gray-200 text-xs font-medium rounded-full" data-filter="tasks">Tasks (<span id="count-tasks">0</span>)</button>
                                <button class="search-filter-btn px-3 py-1 bg-gray-100 text-concrete hover:bg-gray-200 text-xs font-medium rounded-full" data-filter="vendors">Vendors (<span id="count-vendors">0</span>)</button>
                                <button class="search-filter-btn px-3 py-1 bg-gray-100 text-concrete hover:bg-gray-200 text-xs font-medium rounded-full" data-filter="interventions">Interventions (<span id="count-interventions">0</span>)</button>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="text-sm text-concrete">Sort by:</span>
                                <select id="search-sort" class="text-sm border border-concrete rounded-lg px-3 py-1 bg-white text-slate focus:outline-none focus:ring-2 focus:ring-slate">
                                    <option value="relevance">Relevance</option>
                                    <option value="date">Date Modified</option>
                                    <option value="alphabetical">Alphabetical</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Search Results Categories -->
                <section class="mb-8">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                        <div class="bg-white rounded-lg border border-stone p-4 cursor-pointer hover:border-info transition-colors" data-category-filter="deals">
                            <div class="flex items-center justify-between mb-2">
                                <div class="w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center">
                                    <i class="fa-solid fa-handshake text-info"></i>
                                </div>
                                <span class="text-2xl font-semibold text-slate" id="category-count-deals">0</span>
                            </div>
                            <h3 class="font-medium text-slate mb-1">Deals</h3>
                            <p class="text-xs text-concrete">Active negotiations & contracts</p>
                        </div>
                        
                        <div class="bg-white rounded-lg border border-stone p-4 cursor-pointer hover:border-success transition-colors" data-category-filter="properties">
                            <div class="flex items-center justify-between mb-2">
                                <div class="w-10 h-10 bg-green-50 rounded-lg flex items-center justify-center">
                                    <i class="fa-solid fa-building text-success"></i>
                                </div>
                                <span class="text-2xl font-semibold text-slate" id="category-count-properties">0</span>
                            </div>
                            <h3 class="font-medium text-slate mb-1">Properties</h3>
                            <p class="text-xs text-concrete">Listings & property details</p>
                        </div>
                        
                        <div class="bg-white rounded-lg border border-stone p-4 cursor-pointer hover:border-warning transition-colors" data-category-filter="documents">
                            <div class="flex items-center justify-between mb-2">
                                <div class="w-10 h-10 bg-purple-50 rounded-lg flex items-center justify-center">
                                    <i class="fa-solid fa-file-alt text-purple-600"></i>
                                </div>
                                <span class="text-2xl font-semibold text-slate" id="category-count-documents">0</span>
                            </div>
                            <h3 class="font-medium text-slate mb-1">Documents</h3>
                            <p class="text-xs text-concrete">Contracts, proposals & reports</p>
                        </div>
                        
                        <div class="bg-white rounded-lg border border-stone p-4 cursor-pointer hover:border-warning transition-colors" data-category-filter="tasks">
                            <div class="flex items-center justify-between mb-2">
                                <div class="w-10 h-10 bg-orange-50 rounded-lg flex items-center justify-center">
                                    <i class="fa-solid fa-tasks text-warning"></i>
                                </div>
                                <span class="text-2xl font-semibold text-slate" id="category-count-tasks">0</span>
                            </div>
                            <h3 class="font-medium text-slate mb-1">Tasks</h3>
                            <p class="text-xs text-concrete">Onboarding & delivery items</p>
                        </div>
                    </div>
                </section>

                <!-- Search Results Container -->
                <div id="search-results-container">
                    <!-- Results will be populated by JavaScript -->
                </div>

                <!-- No Results State -->
                <div id="no-results-state" class="hidden bg-white rounded-lg border border-stone p-12 text-center">
                    <i class="fa-solid fa-magnifying-glass text-4xl text-concrete mb-4"></i>
                    <h3 class="text-lg font-semibold text-slate mb-2">No results found</h3>
                    <p class="text-concrete">Try adjusting your search terms or filters</p>
                </div>
            </div>
            <!-- END SEARCH PAGE -->

            <!-- NOTIFICATIONS PAGE -->
            <div id="notifications-page" class="page-content hidden">
                <!-- Notifications Header -->
                <section class="mb-8">
                    <div class="flex items-center justify-between mb-6">
                        <div>
                            <h1 class="text-3xl font-semibold text-slate mb-2">Notifications Center</h1>
                            <p class="text-concrete">Severity-based alerts and system notifications</p>
                        </div>
                        <div class="flex items-center space-x-4">
                            <button id="mark-all-read-btn" class="flex items-center space-x-2 bg-white rounded-lg px-4 py-2 border border-stone hover:bg-stone transition-colors">
                                <i class="fa-solid fa-check-double text-concrete"></i>
                                <span class="text-sm text-slate">Mark All Read</span>
                            </button>
                            <button id="notification-settings-btn" class="bg-slate text-white px-6 py-2 rounded-lg font-medium hover:bg-opacity-90 transition-colors">
                                <i class="fa-solid fa-cog mr-2"></i>
                                Settings
                            </button>
                        </div>
                    </div>
                </section>

                <!-- Notification Statistics -->
                <section id="notification-stats" class="mb-8">
                    <div class="grid grid-cols-4 gap-25">
                        <!-- Critical -->
                        <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-danger bg-opacity-10 rounded-lg flex items-center justify-center">
                                    <i class="fa-solid fa-exclamation-triangle text-danger"></i>
                                </div>
                                <span class="text-xs bg-danger bg-opacity-10 text-danger px-2 py-1 rounded-full">Urgent</span>
                            </div>
                            <h3 class="text-2xl font-semibold text-slate mb-1" id="stat-critical">4</h3>
                            <p class="text-sm text-concrete">Critical Alerts</p>
                            <div class="mt-4 text-xs text-concrete">SLA breaches, system failures</div>
                        </div>

                        <!-- High Priority -->
                        <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-warning bg-opacity-10 rounded-lg flex items-center justify-center">
                                    <i class="fa-solid fa-exclamation-circle text-warning"></i>
                                </div>
                                <span class="text-xs bg-warning bg-opacity-10 text-warning px-2 py-1 rounded-full">High</span>
                            </div>
                            <h3 class="text-2xl font-semibold text-slate mb-1" id="stat-high">12</h3>
                            <p class="text-sm text-concrete">High Priority</p>
                            <div class="mt-4 text-xs text-concrete">Deal delays, approval pending</div>
                        </div>

                        <!-- Medium Priority -->
                        <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-info bg-opacity-10 rounded-lg flex items-center justify-center">
                                    <i class="fa-solid fa-info-circle text-info"></i>
                                </div>
                                <span class="text-xs bg-info bg-opacity-10 text-info px-2 py-1 rounded-full">Medium</span>
                            </div>
                            <h3 class="text-2xl font-semibold text-slate mb-1" id="stat-medium">28</h3>
                            <p class="text-sm text-concrete">Medium Priority</p>
                            <div class="mt-4 text-xs text-concrete">Updates, reminders</div>
                        </div>

                        <!-- Low Priority -->
                        <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-success bg-opacity-10 rounded-lg flex items-center justify-center">
                                    <i class="fa-solid fa-check-circle text-success"></i>
                                </div>
                                <span class="text-xs bg-success bg-opacity-10 text-success px-2 py-1 rounded-full">Low</span>
                            </div>
                            <h3 class="text-2xl font-semibold text-slate mb-1" id="stat-low">47</h3>
                            <p class="text-sm text-concrete">Low Priority</p>
                            <div class="mt-4 text-xs text-concrete">System updates, announcements</div>
                        </div>
                    </div>
                </section>

                <!-- Filter Controls -->
                <section class="mb-8">
                    <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                        <div class="flex items-center justify-between mb-4">
                            <h2 class="text-lg font-semibold text-slate">Filter Notifications</h2>
                            <button id="clear-filters-btn" class="text-sm text-concrete hover:text-slate">Clear All Filters</button>
                        </div>
                        <div class="grid grid-cols-6 gap-4 mb-4">
                            <!-- Severity Filter -->
                            <div>
                                <label class="block text-xs font-medium text-concrete mb-2">Severity</label>
                                <select id="filter-severity" class="w-full bg-stone border-0 rounded-md px-3 py-2 text-slate text-sm focus:outline-none focus:ring-2 focus:ring-slate">
                                    <option value="">All Severities</option>
                                    <option value="critical">Critical</option>
                                    <option value="high">High</option>
                                    <option value="medium">Medium</option>
                                    <option value="low">Low</option>
                                </select>
                            </div>

                            <!-- Category Filter -->
                            <div>
                                <label class="block text-xs font-medium text-concrete mb-2">Category</label>
                                <select id="filter-category" class="w-full bg-stone border-0 rounded-md px-3 py-2 text-slate text-sm focus:outline-none focus:ring-2 focus:ring-slate">
                                    <option value="">All Categories</option>
                                    <option value="legal">Legal</option>
                                    <option value="system">System</option>
                                    <option value="delivery">Delivery</option>
                                    <option value="negotiation">Negotiation</option>
                                    <option value="executive">Executive</option>
                                </select>
                            </div>

                            <!-- Source Filter -->
                            <div>
                                <label class="block text-xs font-medium text-concrete mb-2">Source</label>
                                <select id="filter-source" class="w-full bg-stone border-0 rounded-md px-3 py-2 text-slate text-sm focus:outline-none focus:ring-2 focus:ring-slate">
                                    <option value="">All Sources</option>
                                    <option value="system">System</option>
                                    <option value="user">User</option>
                                    <option value="integration">Integration</option>
                                </select>
                            </div>

                            <!-- Status Filter -->
                            <div>
                                <label class="block text-xs font-medium text-concrete mb-2">Status</label>
                                <select id="filter-status" class="w-full bg-stone border-0 rounded-md px-3 py-2 text-slate text-sm focus:outline-none focus:ring-2 focus:ring-slate">
                                    <option value="">All Status</option>
                                    <option value="unread">Unread</option>
                                    <option value="read">Read</option>
                                </select>
                            </div>

                            <!-- Time Range Filter -->
                            <div>
                                <label class="block text-xs font-medium text-concrete mb-2">Time Range</label>
                                <select id="filter-time" class="w-full bg-stone border-0 rounded-md px-3 py-2 text-slate text-sm focus:outline-none focus:ring-2 focus:ring-slate">
                                    <option value="">All Time</option>
                                    <option value="today">Today</option>
                                    <option value="week">Last 7 Days</option>
                                    <option value="month">Last 30 Days</option>
                                </select>
                            </div>

                            <!-- Search -->
                            <div>
                                <label class="block text-xs font-medium text-concrete mb-2">Search</label>
                                <input type="text" id="filter-search" placeholder="Search..." class="w-full bg-stone border-0 rounded-md px-3 py-2 text-slate text-sm focus:outline-none focus:ring-2 focus:ring-slate" data-search-target="[data-searchable]" data-search-fields="text">
                            </div>
                        </div>

                        <!-- Active Filters -->
                        <div id="active-filters" class="flex items-center space-x-2 hidden">
                            <span class="text-xs text-concrete">Active filters:</span>
                            <div id="active-filters-chips" class="flex items-center space-x-2"></div>
                        </div>
                    </div>
                </section>

                <!-- Notification Feed -->
                <section>
                    <div class="bg-white rounded-lg shadow-sm border border-stone">
                        <div class="p-6 border-b border-stone flex items-center justify-between">
                            <h2 class="text-lg font-semibold text-slate">Notification Feed</h2>
                            <div class="flex items-center space-x-4 text-sm text-concrete">
                                <span id="notifications-count">Showing 0 of 0 notifications</span>
                                <div class="flex items-center space-x-2">
                                    <button id="view-list-btn" class="p-2 text-slate bg-stone rounded">
                                        <i class="fa-solid fa-list"></i>
                                    </button>
                                    <button id="view-grid-btn" class="p-2 text-concrete hover:text-slate">
                                        <i class="fa-solid fa-grid"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Notifications List -->
                        <div id="notifications-feed">
                            <!-- Will be populated by JavaScript -->
                        </div>

                        <!-- Load More Button -->
                        <div class="p-6 border-t border-stone text-center">
                            <button id="load-more-btn" class="text-sm text-info hover:text-opacity-80 font-medium hidden">
                                Load More Notifications
                            </button>
                            <div id="no-more-notifications" class="text-sm text-concrete hidden">
                                Showing all notifications
                            </div>
                        </div>
                    </div>
                </section>
            </div>
            <!-- END NOTIFICATIONS PAGE -->

            <!-- PIPELINE MANAGEMENT PAGE -->
            <div id="pipeline-page" class="page-content hidden">
                <!-- Pipeline Header -->
                <section class="mb-8">
                    <div class="flex items-center justify-between mb-6">
                        <div>
                            <h1 class="text-3xl font-semibold text-slate mb-2">Pipeline Management</h1>
                            <p class="text-concrete">Track and manage all deals from lead to contract signing</p>
                        </div>
                        <div class="flex items-center space-x-4">
                            <button data-export="data"  id="export-pipeline-btn" class="bg-white border border-stone px-4 py-2 rounded-lg text-slate hover:bg-stone transition-colors"></i>Export</button>
                            <button id="add-deal-btn" class="bg-slate text-white px-6 py-2 rounded-lg font-medium hover:bg-opacity-90 transition-colors">
                                <i class="fa-solid fa-plus mr-2"></i>
                                Add Deal
                            </button>
                        </div>
                    </div>
                </section>

                <!-- Pipeline KPIs -->
                <section class="mb-8">
                    <div class="grid grid-cols-4 gap-6">
                        <!-- Total Listings -->
                        <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-slate bg-opacity-10 rounded-lg flex items-center justify-center">
                                    <i class="fa-solid fa-building text-slate"></i>
                                </div>
                                <span class="text-xs bg-success bg-opacity-10 text-success px-2 py-1 rounded-full" id="kpi-total-change">+8</span>
                            </div>
                            <h3 class="text-2xl font-semibold text-slate mb-1" id="kpi-total">247</h3>
                            <p class="text-sm text-concrete">Total Listings</p>
                            <div class="mt-3 text-xs text-concrete">Active pipeline deals</div>
                        </div>

                        <!-- New Leads (7d) -->
                        <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-info bg-opacity-10 rounded-lg flex items-center justify-center">
                                    <i class="fa-solid fa-user-plus text-info"></i>
                                </div>
                                <span class="text-xs bg-success bg-opacity-10 text-success px-2 py-1 rounded-full" id="kpi-leads-change">+12</span>
                            </div>
                            <h3 class="text-2xl font-semibold text-slate mb-1" id="kpi-leads">34</h3>
                            <p class="text-sm text-concrete">New Leads (7d)</p>
                            <div class="mt-3 text-xs text-concrete">This week's intake</div>
                        </div>

                        <!-- Stalled Deals -->
                        <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-warning bg-opacity-10 rounded-lg flex items-center justify-center">
                                    <i class="fa-solid fa-pause text-warning"></i>
                                </div>
                                <span class="text-xs bg-warning bg-opacity-10 text-warning px-2 py-1 rounded-full" id="kpi-stalled-change">+3</span>
                            </div>
                            <h3 class="text-2xl font-semibold text-slate mb-1" id="kpi-stalled">18</h3>
                            <p class="text-sm text-concrete">Stalled (>10d)</p>
                            <div class="mt-3 text-xs text-concrete">Require attention</div>
                        </div>

                        <!-- Viewings Booked -->
                        <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 bg-success bg-opacity-10 rounded-lg flex items-center justify-center">
                                    <i class="fa-solid fa-calendar-check text-success"></i>
                                </div>
                                <span class="text-xs bg-success bg-opacity-10 text-success px-2 py-1 rounded-full" id="kpi-viewings-change">+7</span>
                            </div>
                            <h3 class="text-2xl font-semibold text-slate mb-1" id="kpi-viewings">42</h3>
                            <p class="text-sm text-concrete">Viewings Booked (7d)</p>
                            <div class="mt-3 text-xs text-concrete">Scheduled this week</div>
                        </div>
                    </div>
                </section>

                <!-- Advanced Filter Bar -->
                <section class="mb-6">
                    <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                        <div class="flex items-center justify-between mb-4">
                            <h2 class="text-lg font-semibold text-slate">Filter & Search</h2>
                            <button class="text-sm text-info hover:underline" id="clear-pipeline-filters">Clear All</button>
                        </div>
                        <div class="grid grid-cols-6 gap-4 mb-4">
                            <!-- Stage Filter -->
                            <div>
                                <select id="filter-pipeline-stage" class="w-full bg-stone border-0 rounded-lg px-4 py-3 text-slate focus:outline-none focus:ring-2 focus:ring-slate">
                                    <option value="">All Stages</option>
                                    <option value="lead">Lead</option>
                                    <option value="viewing">Viewing</option>
                                    <option value="proposal">Proposal</option>
                                    <option value="hot">Heads of Terms</option>
                                    <option value="signed">Contract Signed</option>
                                </select>
                            </div>

                            <!-- Broker Filter -->
                            <div>
                                <select id="filter-pipeline-broker" class="w-full bg-stone border-0 rounded-lg px-4 py-3 text-slate focus:outline-none focus:ring-2 focus:ring-slate">
                                    <option value="">All Brokers</option>
                                    <option value="savills">Savills</option>
                                    <option value="cbre">CBRE</option>
                                    <option value="jll">JLL</option>
                                    <option value="knight-frank">Knight Frank</option>
                                    <option value="cushman">Cushman & Wakefield</option>
                                </select>
                            </div>

                            <!-- Sector Filter -->
                            <div>
                                <select id="filter-pipeline-sector" class="w-full bg-stone border-0 rounded-lg px-4 py-3 text-slate focus:outline-none focus:ring-2 focus:ring-slate">
                                    <option value="">All Sectors</option>
                                    <option value="office">Office</option>
                                    <option value="retail">Retail</option>
                                    <option value="industrial">Industrial</option>
                                    <option value="mixed">Mixed Use</option>
                                </select>
                            </div>

                            <!-- Location Filter -->
                            <div>
                                <select id="filter-pipeline-location" class="w-full bg-stone border-0 rounded-lg px-4 py-3 text-slate focus:outline-none focus:ring-2 focus:ring-slate">
                                    <option value="">All Locations</option>
                                    <option value="london">London</option>
                                    <option value="manchester">Manchester</option>
                                    <option value="birmingham">Birmingham</option>
                                    <option value="edinburgh">Edinburgh</option>
                                    <option value="glasgow">Glasgow</option>
                                </select>
                            </div>

                            <!-- Size Filter -->
                            <div>
                                <select id="filter-pipeline-size" class="w-full bg-stone border-0 rounded-lg px-4 py-3 text-slate focus:outline-none focus:ring-2 focus:ring-slate">
                                    <option value="">All Sizes</option>
                                    <option value="small">< 5,000 sq ft</option>
                                    <option value="medium">5,000 - 20,000 sq ft</option>
                                    <option value="large">> 20,000 sq ft</option>
                                </select>
                            </div>

                            <!-- Price Filter -->
                            <div>
                                <select id="filter-pipeline-price" class="w-full bg-stone border-0 rounded-lg px-4 py-3 text-slate focus:outline-none focus:ring-2 focus:ring-slate">
                                    <option value="">All Prices</option>
                                    <option value="low">< £1M</option>
                                    <option value="medium">£1M - £5M</option>
                                    <option value="high">> £5M</option>
                                </select>
                            </div>
                        </div>

                        <!-- Quick Filters -->
                        <div class="flex items-center space-x-2 mb-4">
                            <span class="text-sm text-concrete">Quick Filters:</span>
                            <button class="px-3 py-1 bg-slate text-white rounded-lg text-sm hover:bg-opacity-90 transition-colors" data-quick-filter="my-deals">My Deals</button>
                            <button class="px-3 py-1 bg-stone text-slate rounded-lg text-sm hover:bg-opacity-80 transition-colors" data-quick-filter="sla-risk">SLA Risk</button>
                            <button class="px-3 py-1 bg-stone text-slate rounded-lg text-sm hover:bg-opacity-80 transition-colors" data-quick-filter="high-value">High Value</button>
                            <button class="px-3 py-1 bg-stone text-slate rounded-lg text-sm hover:bg-opacity-80 transition-colors" data-quick-filter="urgent">Urgent</button>
                        </div>

                        <!-- Search -->
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                <i class="fa-solid fa-search text-concrete"></i>
                            </div>
                            <input type="text" id="search-pipeline" class="w-full pl-12 pr-4 py-3 bg-stone border-0 rounded-lg text-slate placeholder-concrete focus:outline-none focus:ring-2 focus:ring-slate" placeholder="Search deals, properties, brokers..." data-search-target="[data-searchable]" data-search-fields="text">
                        </div>

                        <!-- Advanced Options -->
                        <div class="flex items-center justify-between mt-4">
                            <div class="text-sm text-concrete">
                                <span id="pipeline-results-count">Showing 25 of 247 deals</span> • <span id="pipeline-total-value">£53.8M total value</span>
                            </div>
                            <div class="flex items-center space-x-4">
                                <button class="text-sm text-slate hover:text-info transition-colors">
                                    <i class="fa-solid fa-filter mr-1"></i>
                                    Advanced
                                </button>
                                <button class="text-sm text-slate hover:text-info transition-colors" id="sort-pipeline">
                                    <i class="fa-solid fa-sort mr-1"></i>
                                    Sort
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Active Deals Table -->
                <section class="mb-8">
                    <div class="bg-white rounded-lg shadow-sm border border-stone">
                        <div class="p-6 border-b border-stone flex items-center justify-between">
                            <h2 class="text-lg font-semibold text-slate">Active Deals</h2>
                            <div class="flex items-center space-x-2">
                                <button class="p-2 text-concrete hover:text-slate transition-colors" title="Table View">
                                    <i class="fa-solid fa-table"></i>
                                </button>
                                <button class="p-2 text-concrete hover:text-slate transition-colors" title="Grid View">
                                    <i class="fa-solid fa-th"></i>
                                </button>
                            </div>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-stone bg-opacity-30">
                                    <tr>
                                        <th class="py-3 px-6 text-left">
                                            <input type="checkbox" id="select-all-deals" class="w-4 h-4 text-slate bg-stone border-stone rounded focus:ring-slate">
                                        </th>
                                        <th class="py-3 px-6 text-left text-xs font-semibold text-concrete uppercase tracking-wider cursor-pointer hover:text-slate" data-sort="id">
                                            Deal ID <i class="fa-solid fa-sort ml-1"></i>
                                        </th>
                                        <th class="py-3 px-6 text-left text-xs font-semibold text-concrete uppercase tracking-wider cursor-pointer hover:text-slate" data-sort="property">
                                            Property <i class="fa-solid fa-sort ml-1"></i>
                                        </th>
                                        <th class="py-3 px-6 text-left text-xs font-semibold text-concrete uppercase tracking-wider cursor-pointer hover:text-slate" data-sort="stage">
                                            Stage <i class="fa-solid fa-sort ml-1"></i>
                                        </th>
                                        <th class="py-3 px-6 text-left text-xs font-semibold text-concrete uppercase tracking-wider">
                                            Next Action
                                        </th>
                                        <th class="py-3 px-6 text-left text-xs font-semibold text-concrete uppercase tracking-wider cursor-pointer hover:text-slate" data-sort="owner">
                                            Owner <i class="fa-solid fa-sort ml-1"></i>
                                        </th>
                                        <th class="py-3 px-6 text-left text-xs font-semibold text-concrete uppercase tracking-wider">
                                            Last Touch
                                        </th>
                                        <th class="py-3 px-6 text-left text-xs font-semibold text-concrete uppercase tracking-wider">
                                            Broker
                                        </th>
                                        <th class="py-3 px-6 text-left text-xs font-semibold text-concrete uppercase tracking-wider cursor-pointer hover:text-slate" data-sort="value">
                                            Value <i class="fa-solid fa-sort ml-1"></i>
                                        </th>
                                        <th class="py-3 px-6 text-center text-xs font-semibold text-concrete uppercase tracking-wider">
                                            Actions
                                        </th>
                                    </tr>
                                </thead>
                                <tbody id="pipeline-table-body" class="divide-y divide-stone">
                                    <!-- Deals will be populated by JavaScript -->
                                </tbody>
                            </table>
                        </div>

                        <!-- Pagination -->
                        <div class="p-6 border-t border-stone flex items-center justify-between">
                            <div class="text-sm text-concrete">
                                Showing <span id="pipeline-page-start">1</span> to <span id="pipeline-page-end">25</span> of <span id="pipeline-page-total">247</span> deals
                            </div>
                            <div class="flex items-center space-x-2">
                                <select id="pipeline-per-page" class="bg-stone border-0 rounded-lg px-3 py-2 text-sm text-slate focus:outline-none focus:ring-2 focus:ring-slate">
                                    <option value="25">25 per page</option>
                                    <option value="50">50 per page</option>
                                    <option value="100">100 per page</option>
                                </select>
                                <button id="pipeline-prev-page" class="px-3 py-2 border border-stone rounded-lg text-sm text-slate hover:bg-stone transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                                    <i class="fa-solid fa-chevron-left"></i>
                                    Previous
                                </button>
                                <div class="flex items-center space-x-1" id="pipeline-page-numbers">
                                    <!-- Page numbers will be populated by JavaScript -->
                                </div>
                                <button id="pipeline-next-page" class="px-3 py-2 border border-stone rounded-lg text-sm text-slate hover:bg-stone transition-colors">
                                    Next
                                    <i class="fa-solid fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Analytics Grid -->
                <div class="grid grid-cols-2 gap-6 mb-8">
                    <!-- Stage Distribution -->
                    <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-slate">Stage Distribution</h3>
                            <button class="text-sm text-info hover:underline">View Details</button>
                        </div>
                        <div id="stage-distribution-chart" style="height: 300px;"></div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-slate">Recent Activity</h3>
                            <button class="text-sm text-info hover:underline" data-view-all="deals-overview">View All</button>
                        </div>
                        <div id="recent-activity-list" class="space-y-3">
                            <!-- Activity items will be populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Broker Performance -->
                <section class="mb-8">
                    <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-slate">Broker Performance</h3>
                            <select class="bg-stone border-0 rounded-lg px-3 py-2 text-sm text-slate focus:outline-none focus:ring-2 focus:ring-slate">
                                <option>This Month</option>
                                <option>Last Month</option>
                                <option>This Quarter</option>
                            </select>
                        </div>
                        <div id="broker-performance-grid" class="grid grid-cols-5 gap-6">
                            <!-- Broker cards will be populated by JavaScript -->
                        </div>
                    </div>
                </section>

                <!-- Pipeline Health -->
                <section class="mb-8">
                    <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                        <div class="flex items-center justify-between mb-6">
                            <div>
                                <h3 class="text-lg font-semibold text-slate">Pipeline Health</h3>
                                <p class="text-sm text-concrete">Key metrics and indicators</p>
                            </div>
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-success bg-opacity-10 text-success">
                                <i class="fa-solid fa-check-circle mr-2"></i>
                                Healthy
                            </span>
                        </div>
                        <div class="grid grid-cols-4 gap-6">
                            <!-- Velocity -->
                            <div class="text-center p-6 bg-success bg-opacity-5 rounded-lg">
                                <div class="w-12 h-12 bg-success bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3">
                                    <i class="fa-solid fa-bolt text-success text-lg"></i>
                                </div>
                                <div class="text-sm text-concrete mb-1">Velocity</div>
                                <div class="text-2xl font-semibold text-slate mb-1" id="health-velocity">8.2</div>
                                <div class="text-xs text-concrete">deals/week</div>
                                <div class="text-xs text-success mt-2">+18% vs target</div>
                            </div>

                            <!-- Conversion -->
                            <div class="text-center p-6 bg-info bg-opacity-5 rounded-lg">
                                <div class="w-12 h-12 bg-info bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3">
                                    <i class="fa-solid fa-chart-line text-info text-lg"></i>
                                </div>
                                <div class="text-sm text-concrete mb-1">Conversion</div>
                                <div class="text-2xl font-semibold text-slate mb-1" id="health-conversion">38.1%</div>
                                <div class="text-xs text-concrete">lead to signed</div>
                                <div class="text-xs text-success mt-2">+8.5% vs target</div>
                            </div>

                            <!-- Quality -->
                            <div class="text-center p-6 bg-warning bg-opacity-5 rounded-lg">
                                <div class="w-12 h-12 bg-warning bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3">
                                    <i class="fa-solid fa-star text-warning text-lg"></i>
                                </div>
                                <div class="text-sm text-concrete mb-1">Quality</div>
                                <div class="text-2xl font-semibold text-slate mb-1" id="health-quality">7.8</div>
                                <div class="text-xs text-concrete">out of 10</div>
                                <div class="text-xs text-warning mt-2">-0.8 vs target</div>
                            </div>

                            <!-- Risk -->
                            <div class="text-center p-6 bg-danger bg-opacity-5 rounded-lg">
                                <div class="w-12 h-12 bg-danger bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3">
                                    <i class="fa-solid fa-exclamation-triangle text-danger text-lg"></i>
                                </div>
                                <div class="text-sm text-concrete mb-1">Risk</div>
                                <div class="text-2xl font-semibold text-slate mb-1" id="health-risk">18</div>
                                <div class="text-xs text-concrete">at-risk deals</div>
                                <div class="text-xs text-danger mt-2">+4 since last week</div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
            <!-- END PIPELINE PAGE -->

            <!-- PROPERTY INDEX PAGE -->
            <div id="property-index-page" class="page-content hidden">
                <!-- Header -->
                <header class="bg-white border-b border-stone px-8 py-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <h1 class="text-2xl font-semibold text-slate mb-1">Property Index</h1>
                            <p class="text-sm text-concrete">Browse and manage available properties</p>
                        </div>
                        <div class="flex items-center space-x-3">
                            <button id="property-index-add-btn" class="px-4 py-2 border border-stone rounded-lg text-sm text-slate hover:bg-stone transition-colors" data-action="add-property">
                                <i class="fa-solid fa-plus mr-2"></i>Add Property
                            </button>
                            <button class="px-4 py-2 border border-stone rounded-lg text-sm text-slate hover:bg-stone transition-colors">
                                <i class="fa-solid fa-file-import mr-2"></i>Import List
                            </button>
                            <button data-export="data"  id="export-properties-btn" class="px-4 py-2 bg-slate text-white rounded-lg text-sm hover:bg-opacity-90 transition-colors"></i>ExportCSV
                            </button>
                        </div>
                    </div>
                </header>

                <!-- Content -->
                <section class="p-8">
                    <div class="max-w-7xl mx-auto space-y-6">
                        <!-- Filters -->
                        <div class="bg-white border border-stone rounded-lg p-6">
                            <div class="grid grid-cols-4 gap-4 mb-4">
                                <input type="text" id="property-search" placeholder="Search properties..." class="col-span-4 px-4 py-2 border border-stone rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-slate" data-search-target="[data-searchable]" data-search-fields="text">
                                
                                <select id="filter-location" class="px-4 py-2 border border-stone rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-slate">
                                    <option value="">All Locations</option>
                                    <option value="London">London</option>
                                    <option value="Manchester">Manchester</option>
                                    <option value="Birmingham">Birmingham</option>
                                    <option value="Edinburgh">Edinburgh</option>
                                    <option value="Glasgow">Glasgow</option>
                                </select>
                                
                                <select id="filter-size" class="px-4 py-2 border border-stone rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-slate">
                                    <option value="">All Sizes</option>
                                    <option value="small">Small (&lt;5k sq ft)</option>
                                    <option value="medium">Medium (5-20k sq ft)</option>
                                    <option value="large">Large (&gt;20k sq ft)</option>
                                </select>
                                
                                <select id="filter-availability" class="px-4 py-2 border border-stone rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-slate">
                                    <option value="">All Availability</option>
                                    <option value="Available">Available</option>
                                    <option value="Under Offer">Under Offer</option>
                                    <option value="Let">Let</option>
                                </select>
                                
                                <select id="filter-sector" class="px-4 py-2 border border-stone rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-slate">
                                    <option value="">All Sectors</option>
                                    <option value="Office">Office</option>
                                    <option value="Retail">Retail</option>
                                    <option value="Industrial">Industrial</option>
                                    <option value="Mixed Use">Mixed Use</option>
                                </select>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-2">
                                    <button class="px-3 py-1.5 bg-slate text-white rounded-lg text-xs hover:bg-opacity-90 transition-colors">Priority Stock</button>
                                    <button class="px-3 py-1.5 bg-gray-100 text-concrete rounded-lg text-xs hover:bg-gray-200 transition-colors">Available This Month</button>
                                    <button class="px-3 py-1.5 bg-gray-100 text-concrete rounded-lg text-xs hover:bg-gray-200 transition-colors">My Deals</button>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <span class="text-sm text-concrete">View:</span>
                                    <button id="view-grid-btn" class="p-2 bg-slate text-white rounded-lg">
                                        <i class="fa-solid fa-grid-2"></i>
                                    </button>
                                    <button id="view-table-btn" class="p-2 text-concrete hover:bg-stone rounded-lg">
                                        <i class="fa-solid fa-list"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Properties Grid -->
                        <div id="properties-grid" class="grid grid-cols-3 gap-6">
                            <!-- Properties will be rendered here -->
                        </div>

                        <!-- Properties Table -->
                        <div id="properties-table" class="hidden bg-white border border-stone rounded-lg overflow-hidden">
                            <table class="w-full">
                                <thead class="bg-stone">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-slate">Property</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-slate">Location</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-slate">Size</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-slate">Rent</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-slate">Sector</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-slate">Availability</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-slate">Broker</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-slate">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="properties-table-body">
                                    <!-- Table rows will be rendered here -->
                                </tbody>
                            </table>
                        </div>

                        <!-- Pagination -->
                        <div class="flex items-center justify-between">
                            <div class="text-sm text-concrete">
                                Showing <span id="properties-showing">0</span> of <span id="properties-total">0</span> properties
                            </div>
                            <div class="flex items-center space-x-2">
                                <button id="properties-prev-page" class="px-3 py-2 border border-stone rounded-lg text-sm text-slate hover:bg-stone transition-colors disabled:opacity-50">
                                    Previous
                                </button>
                                <button id="properties-next-page" class="px-3 py-2 border border-stone rounded-lg text-sm text-slate hover:bg-stone transition-colors">
                                    Next
                                </button>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
            <!-- END PROPERTY INDEX PAGE -->
            
            <!-- ADD PROPERTY PAGE -->
            <div id="add-property-page" class="page-content hidden">
                <!-- Breadcrumb -->
                <div class="mb-6">
                    <div class="flex items-center text-sm text-concrete">
                        <span class="cursor-pointer hover:text-slate" onclick="navigateToPage('dashboard')">Origination</span>
                        <i class="fa-solid fa-chevron-right mx-2 text-xs"></i>
                        <span class="cursor-pointer hover:text-slate" onclick="navigateToPage('property-index')">Property Index</span>
                        <i class="fa-solid fa-chevron-right mx-2 text-xs"></i>
                        <span class="text-slate font-medium">Add Property</span>
                    </div>
                </div>

                <!-- Header -->
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h1 class="text-2xl font-semibold text-slate mb-1">Add Property</h1>
                        <p class="text-sm text-concrete">Create a new property record. You can add units after saving the property.</p>
                    </div>
                    <div class="flex items-center space-x-3">
                        <button id="cancel-property-btn" class="px-4 py-2 border border-stone text-concrete rounded-lg hover:bg-stone transition-colors">
                            Cancel
                        </button>
                        <button id="save-property-btn" class="px-4 py-2 bg-slate text-white rounded-lg hover:bg-opacity-90 transition-colors">
                            <i class="fa-solid fa-save mr-2"></i>Save Property
                        </button>
                    </div>
                </div>

                <!-- Form Container -->
                <div class="space-y-6">
                    <form id="add-property-form" class="space-y-6">
                        <!-- Section 1: Property Basics -->
                        <div class="bg-white border-2 border-stone rounded-lg p-6 shadow-sm">
                            <div class="flex items-center mb-6">
                                <div class="w-10 h-10 bg-slate rounded-lg flex items-center justify-center mr-3">
                                    <i class="fa-solid fa-building text-white"></i>
                                </div>
                                <div>
                                    <h2 class="text-lg font-semibold text-slate">Property Basics</h2>
                                    <p class="text-xs text-concrete">Core property information and location</p>
                                </div>
                            </div>
                            <div class="grid grid-cols-2 gap-6">
                                <div class="col-span-2">
                                    <label class="block text-sm font-medium text-slate mb-2">Property Name <span class="text-danger">*</span></label>
                                    <input type="text" id="property-name" required class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="e.g., Canary Wharf Tower 42">
                                </div>
                                
                                <div class="col-span-2">
                                    <label class="block text-sm font-medium text-slate mb-2">Address <span class="text-danger">*</span></label>
                                    <textarea id="property-address" required rows="2" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="e.g., 25 Cabot Square, Canary Wharf"></textarea>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-slate mb-2">Postcode</label>
                                    <input type="text" id="property-postcode" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="e.g., E14 5HS">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-slate mb-2">EPC Rating</label>
                                    <select id="property-epc" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate">
                                        <option value="">Select EPC rating</option>
                                        <option value="A">A</option>
                                        <option value="B">B</option>
                                        <option value="C">C</option>
                                        <option value="D">D</option>
                                        <option value="E">E</option>
                                        <option value="F">F</option>
                                        <option value="G">G</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-slate mb-2">Latitude</label>
                                    <input type="number" step="any" id="property-latitude" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="e.g., 51.505">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-slate mb-2">Longitude</label>
                                    <input type="number" step="any" id="property-longitude" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="e.g., -0.09">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-slate mb-2">Availability Date</label>
                                    <input type="date" id="property-availability-date" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-slate mb-2">Valve Visibility</label>
                                    <select id="property-valve-visibility" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate">
                                        <option value="">Select visibility</option>
                                        <option value="Public">Public</option>
                                        <option value="Private">Private</option>
                                    </select>
                                </div>
                                
                                <div class="col-span-2">
                                    <label class="block text-sm font-medium text-slate mb-2">Property Notes</label>
                                    <textarea id="property-notes" rows="3" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="Add any additional property notes..."></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Section 2: Management & Relationships -->
                        <div class="bg-white border-2 border-stone rounded-lg p-6 shadow-sm">
                            <div class="flex items-center mb-6">
                                <div class="w-10 h-10 bg-slate rounded-lg flex items-center justify-center mr-3">
                                    <i class="fa-solid fa-handshake text-white"></i>
                                </div>
                                <div>
                                    <h2 class="text-lg font-semibold text-slate">Management & Relationships</h2>
                                    <p class="text-xs text-concrete">Landlord, disposal agent, and servicing details</p>
                                </div>
                            </div>
                            <div class="grid grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-slate mb-2">Landlord Company</label>
                                    <div class="flex space-x-2">
                                        <select id="property-landlord" class="flex-1 px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate">
                                            <option value="">Select landlord</option>
                                            <option value="british-land">British Land</option>
                                            <option value="canary-wharf-group">Canary Wharf Group</option>
                                            <option value="land-securities">Land Securities</option>
                                            <option value="great-portland">Great Portland Estates</option>
                                        </select>
                                        <button type="button" id="add-landlord-btn" class="px-4 py-2 bg-slate text-white rounded-lg hover:bg-opacity-90 transition-colors" title="Add new company">
                                            <i class="fa-solid fa-plus"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-slate mb-2">Disposal Agent Company</label>
                                    <div class="flex space-x-2">
                                        <select id="property-disposal-agent" class="flex-1 px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate">
                                            <option value="">Select disposal agent</option>
                                            <option value="savills">Savills</option>
                                            <option value="cbre">CBRE</option>
                                            <option value="jll">JLL</option>
                                            <option value="knight-frank">Knight Frank</option>
                                            <option value="cushman">Cushman & Wakefield</option>
                                        </select>
                                        <button type="button" id="add-disposal-agent-btn" class="px-4 py-2 bg-slate text-white rounded-lg hover:bg-opacity-90 transition-colors" title="Add new company">
                                            <i class="fa-solid fa-plus"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="col-span-2">
                                    <label class="block text-sm font-medium text-slate mb-2">Property HVAC Servicing</label>
                                    <select id="property-hvac-servicing" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate">
                                        <option value="">Select servicing type</option>
                                        <option value="Landlord">Landlord</option>
                                        <option value="Tenant">Tenant</option>
                                        <option value="Shared">Shared</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Section 3: Media & Documents -->
                        <div class="bg-white border-2 border-stone rounded-lg p-6 shadow-sm">
                            <div class="flex items-center mb-6">
                                <div class="w-10 h-10 bg-slate rounded-lg flex items-center justify-center mr-3">
                                    <i class="fa-solid fa-images text-white"></i>
                                </div>
                                <div>
                                    <h2 class="text-lg font-semibold text-slate">Media & Documents</h2>
                                    <p class="text-xs text-concrete">Upload photos and property documents</p>
                                </div>
                            </div>
                            
                            <!-- Property Photos -->
                            <div class="mb-6">
                                <label class="block text-sm font-medium text-slate mb-3">Property Photos</label>
                                <div id="photo-upload-area" class="border-2 border-dashed border-stone rounded-lg p-8 text-center hover:border-slate transition-colors cursor-pointer">
                                    <i class="fa-solid fa-cloud-arrow-up text-4xl text-concrete mb-3"></i>
                                    <p class="text-sm text-slate mb-1">Drag & drop photos here or click to browse</p>
                                    <p class="text-xs text-concrete">JPG, PNG • Max 5MB per file</p>
                                    <input type="file" id="photo-upload-input" accept="image/jpeg,image/png" multiple class="hidden">
                                </div>
                                <div id="photo-preview-grid" class="grid grid-cols-4 gap-4 mt-4"></div>
                            </div>
                            
                            <!-- Documents -->
                            <div>
                                <label class="block text-sm font-medium text-slate mb-3">Documents</label>
                                <div id="document-upload-area" class="border-2 border-dashed border-stone rounded-lg p-8 text-center hover:border-slate transition-colors cursor-pointer">
                                    <i class="fa-solid fa-file-arrow-up text-4xl text-concrete mb-3"></i>
                                    <p class="text-sm text-slate mb-1">Drag & drop documents here or click to browse</p>
                                    <p class="text-xs text-concrete">PDF, DOC, XLS • Max 10MB per file</p>
                                    <input type="file" id="document-upload-input" accept=".pdf,.doc,.docx,.xls,.xlsx" multiple class="hidden">
                                </div>
                                <div id="document-list" class="mt-4 space-y-2"></div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <!-- END ADD PROPERTY PAGE -->


            <!-- PROPERTY DETAIL PAGE -->
            <div id="property-detail-page" class="page-content hidden">
                <!-- Breadcrumb -->
                <div class="mb-6">
                    <div class="flex items-center text-sm text-concrete">
                        <span class="cursor-pointer hover:text-slate" onclick="navigateToPage('dashboard')">Origination</span>
                        <i class="fa-solid fa-chevron-right mx-2 text-xs"></i>
                        <span class="cursor-pointer hover:text-slate" onclick="navigateToPage('property-index')">Property Index</span>
                        <i class="fa-solid fa-chevron-right mx-2 text-xs"></i>
                        <span class="text-slate font-medium" id="property-detail-breadcrumb">Property Details</span>
                    </div>
                </div>

                <!-- Header -->
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h1 class="text-2xl font-semibold text-slate mb-1" id="property-detail-name">Loading...</h1>
                        <p class="text-sm text-concrete" id="property-detail-address">Loading address...</p>
                    </div>
                    <div class="flex items-center space-x-3">
                        <button id="edit-property-btn" class="px-4 py-2 border border-stone text-concrete rounded-lg hover:bg-stone transition-colors">
                            <i class="fa-solid fa-edit mr-2"></i>Edit Property
                        </button>
                        <button id="add-unit-btn" class="px-4 py-2 bg-slate text-white rounded-lg hover:bg-opacity-90 transition-colors">
                            <i class="fa-solid fa-plus mr-2"></i>Add Unit
                        </button>
                    </div>
                </div>

                <!-- Property Info Cards -->
                <div class="grid grid-cols-3 gap-6 mb-6">
                    <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm text-concrete">Property ID</span>
                            <i class="fa-solid fa-hashtag text-concrete"></i>
                        </div>
                        <p class="text-xl font-semibold text-slate" id="property-detail-id">-</p>
                    </div>
                    
                    <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm text-concrete">Total Units</span>
                            <i class="fa-solid fa-door-open text-concrete"></i>
                        </div>
                        <p class="text-xl font-semibold text-slate" id="property-detail-units-count">0</p>
                    </div>
                    
                    <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm text-concrete">Created</span>
                            <i class="fa-solid fa-calendar text-concrete"></i>
                        </div>
                        <p class="text-xl font-semibold text-slate" id="property-detail-created">-</p>
                    </div>
                </div>

                <!-- Property Details Section -->
                <div class="bg-white rounded-lg p-6 shadow-sm border border-stone mb-6">
                    <h2 class="text-lg font-semibold text-slate mb-4">Property Information</h2>
                    <div class="grid grid-cols-2 gap-6">
                        <div>
                            <label class="text-sm text-concrete">Postcode</label>
                            <p class="text-slate font-medium" id="property-detail-postcode">-</p>
                        </div>
                        <div>
                            <label class="text-sm text-concrete">EPC Rating</label>
                            <p class="text-slate font-medium" id="property-detail-epc">-</p>
                        </div>
                        <div>
                            <label class="text-sm text-concrete">Valve Visibility</label>
                            <p class="text-slate font-medium" id="property-detail-visibility">-</p>
                        </div>
                        <div>
                            <label class="text-sm text-concrete">Availability Date</label>
                            <p class="text-slate font-medium" id="property-detail-availability">-</p>
                        </div>
                        <div>
                            <label class="text-sm text-concrete">Landlord</label>
                            <p class="text-slate font-medium" id="property-detail-landlord">-</p>
                        </div>
                        <div>
                            <label class="text-sm text-concrete">Disposal Agent</label>
                            <p class="text-slate font-medium" id="property-detail-disposal">-</p>
                        </div>
                        <div>
                            <label class="text-sm text-concrete">HVAC Servicing</label>
                            <p class="text-slate font-medium" id="property-detail-hvac">-</p>
                        </div>
                        <div>
                            <label class="text-sm text-concrete">Location</label>
                            <p class="text-slate font-medium" id="property-detail-location">-</p>
                        </div>
                        <div class="col-span-2">
                            <label class="text-sm text-concrete">Notes</label>
                            <p class="text-slate" id="property-detail-notes">-</p>
                        </div>
                    </div>
                </div>

                <!-- Units Section -->
                <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-lg font-semibold text-slate">Units</h2>
                        <button class="text-sm text-slate hover:underline" onclick="document.getElementById('add-unit-btn').click()">
                            <i class="fa-solid fa-plus mr-1"></i>Add Unit
                        </button>
                    </div>
                    
                    <!-- Units List -->
                    <div id="property-units-list">
                        <!-- Empty state -->
                        <div id="units-empty-state" class="text-center py-12">
                            <i class="fa-solid fa-door-open text-5xl text-concrete mb-4"></i>
                            <p class="text-slate font-medium mb-2">No units added yet</p>
                            <p class="text-sm text-concrete mb-4">Add units to this property to start managing lettable spaces</p>
                            <button onclick="document.getElementById('add-unit-btn').click()" class="px-4 py-2 bg-slate text-white rounded-lg hover:bg-opacity-90 transition-colors">
                                <i class="fa-solid fa-plus mr-2"></i>Add First Unit
                            </button>
                        </div>
                        
                        <!-- Units table (hidden by default) -->
                        <div id="units-table-container" class="hidden">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b border-stone">
                                        <th class="text-left py-3 px-4 text-sm font-medium text-concrete">Unit Name</th>
                                        <th class="text-left py-3 px-4 text-sm font-medium text-concrete">Floor</th>
                                        <th class="text-left py-3 px-4 text-sm font-medium text-concrete">Area (sq ft)</th>
                                        <th class="text-left py-3 px-4 text-sm font-medium text-concrete">Desks</th>
                                        <th class="text-left py-3 px-4 text-sm font-medium text-concrete">Status</th>
                                        <th class="text-left py-3 px-4 text-sm font-medium text-concrete">Visibility</th>
                                        <th class="text-right py-3 px-4 text-sm font-medium text-concrete">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="units-table-body">
                                    <!-- Units will be inserted here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END PROPERTY DETAIL PAGE -->


            <!-- NEGOTIATION DASHBOARD PAGE -->
<div id="negotiation-dashboard-page" class="page-content hidden">
<!-- COMPONENT: Key Metrics Section -->
            <section class="mb-8" id="key-metrics-section">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Active Deals</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">24</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-green-600 text-sm font-medium">+12%</span>
                                    <span class="text-gray-500 text-sm ml-2">vs last month</span>
                                </div>
                            </div>
                            <div class="bg-blue-100 p-3 rounded-full">
                                <i class="fa-solid fa-handshake text-blue-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Total Value</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">£8.4M</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-green-600 text-sm font-medium">+18%</span>
                                    <span class="text-gray-500 text-sm ml-2">vs last month</span>
                                </div>
                            </div>
                            <div class="bg-green-100 p-3 rounded-full">
                                <i class="fa-solid fa-pound-sign text-green-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Pending Approvals</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">7</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-red-600 text-sm font-medium">+3</span>
                                    <span class="text-gray-500 text-sm ml-2">this week</span>
                                </div>
                            </div>
                            <div class="bg-orange-100 p-3 rounded-full">
                                <i class="fa-solid fa-clock text-orange-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Win Rate</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">73%</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-green-600 text-sm font-medium">+5%</span>
                                    <span class="text-gray-500 text-sm ml-2">vs last quarter</span>
                                </div>
                            </div>
                            <div class="bg-purple-100 p-3 rounded-full">
                                <i class="fa-solid fa-trophy text-purple-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Deal Pipeline Overview -->
            <section class="mb-8" id="pipeline-overview-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Deal Pipeline Overview</h3>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Month</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Quarter</button>
                            <button class="px-3 py-1 text-sm bg-blue-600 text-white rounded-lg">This Year</button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-7 gap-4">
                        <div class="text-center p-4 bg-blue-50 rounded-lg border-2 border-blue-200">
                            <div class="text-2xl font-bold text-blue-600">8</div>
                            <div class="text-sm text-blue-700 font-medium mt-1">Lead</div>
                            <div class="text-xs text-blue-600 mt-1">£1.2M</div>
                        </div>
                        
                        <div class="text-center p-4 bg-indigo-50 rounded-lg border">
                            <div class="text-2xl font-bold text-indigo-600">6</div>
                            <div class="text-sm text-indigo-700 font-medium mt-1">Viewing</div>
                            <div class="text-xs text-indigo-600 mt-1">£980K</div>
                        </div>
                        
                        <div class="text-center p-4 bg-purple-50 rounded-lg border">
                            <div class="text-2xl font-bold text-purple-600">4</div>
                            <div class="text-sm text-purple-700 font-medium mt-1">Proposal</div>
                            <div class="text-xs text-purple-600 mt-1">£1.8M</div>
                        </div>
                        
                        <div class="text-center p-4 bg-pink-50 rounded-lg border">
                            <div class="text-2xl font-bold text-pink-600">3</div>
                            <div class="text-sm text-pink-700 font-medium mt-1">HoTs</div>
                            <div class="text-xs text-pink-600 mt-1">£2.1M</div>
                        </div>
                        
                        <div class="text-center p-4 bg-red-50 rounded-lg border">
                            <div class="text-2xl font-bold text-red-600">2</div>
                            <div class="text-sm text-red-700 font-medium mt-1">Contract</div>
                            <div class="text-xs text-red-600 mt-1">£1.5M</div>
                        </div>
                        
                        <div class="text-center p-4 bg-orange-50 rounded-lg border">
                            <div class="text-2xl font-bold text-orange-600">1</div>
                            <div class="text-sm text-orange-700 font-medium mt-1">Onboarding</div>
                            <div class="text-xs text-orange-600 mt-1">£800K</div>
                        </div>
                        
                        <div class="text-center p-4 bg-green-50 rounded-lg border">
                            <div class="text-2xl font-bold text-green-600">12</div>
                            <div class="text-sm text-green-700 font-medium mt-1">Live</div>
                            <div class="text-xs text-green-600 mt-1">£5.2M</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Charts Section -->
            <section class="mb-8" id="charts-section">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Deal Value Trend</h3>
                        <div id="deal-value-chart" class="h-80"></div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Deal Stage Distribution</h3>
                        <div id="stage-distribution-chart" class="h-80"></div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Critical Notifications -->
            <section class="mb-8" id="notifications-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Critical Notifications</h3>
                        <button class="text-sm text-blue-600 hover:text-blue-700" data-view-all="deals-overview">View All</button>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="flex items-start space-x-4 p-4 bg-red-50 border border-red-200 rounded-lg">
                            <div class="bg-red-100 p-2 rounded-full">
                                <i class="fa-solid fa-exclamation-triangle text-red-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-red-900">SLA Breach Alert</h4>
                                <p class="text-sm text-red-700 mt-1">Canary Wharf Office Deal - Legal approval overdue by 2 days</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-red-600">2 hours ago</span>
                                    <button class="text-xs text-red-700 hover:text-red-900 font-medium" data-action="quick-action" data-item-type="deal">Take Action</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                            <div class="bg-yellow-100 p-2 rounded-full">
                                <i class="fa-solid fa-clock text-yellow-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-yellow-900">Approval Pending</h4>
                                <p class="text-sm text-yellow-700 mt-1">Shoreditch Retail Space - Executive approval needed for contract terms</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-yellow-600">4 hours ago</span>
                                    <button class="text-xs text-yellow-700 hover:text-yellow-900 font-medium" data-action="add-comment" data-item-type="deal">Review</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                            <div class="bg-blue-100 p-2 rounded-full">
                                <i class="fa-solid fa-file-upload text-blue-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-blue-900">Document Uploaded</h4>
                                <p class="text-sm text-blue-700 mt-1">New HoT version uploaded for Kings Cross Development</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-blue-600">6 hours ago</span>
                                    <button class="text-xs text-blue-700 hover:text-blue-900 font-medium" data-action="view-document" data-item-type="document">View Document</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Active Deals Table -->
            <section class="mb-8" id="active-deals-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Active Deals</h3>
                        <div class="flex items-center space-x-3">
                            <div class="relative">
                                <input type="text" placeholder="Filter deals..." class="pl-8 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <i class="fa-solid fa-search absolute left-2.5 top-2.5 text-gray-400 text-sm"></i>
                            </div>
                            <button class="px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50" data-filter-toggle="filter-panel">
                                <i class="fa-solid fa-filter mr-2"></i>Filter
                            </button>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="border-b border-gray-200">
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Deal Name</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Property</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Stage</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Value</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Probability</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Risk</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Next Milestone</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Owner</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                                <tr class="hover:bg-gray-50">
                                    <td class="py-4 px-4">
                                        <div class="font-medium text-gray-900 cursor-pointer hover:text-blue-600" onclick="window.location.hash = '/deal-room'">Canary Wharf Office</div>
                                        <div class="text-sm text-gray-500">DL_CW_2024_001</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">25 Canada Square</div>
                                        <div class="text-sm text-gray-500">Office • 15,000 sq ft</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-pink-100 text-pink-800">
                                            HoTs
                                        </span>
                                    </td>
                                    <td class="py-4 px-4 font-medium text-gray-900">£2,100,000</td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <span class="text-gray-900">85%</span>
                                            <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                                <div class="bg-green-500 h-2 rounded-full" style="width: 85%"></div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                            Medium
                                        </span>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">Contract Review</div>
                                        <div class="text-sm text-gray-500">Due: Nov 15</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="Owner" class="w-8 h-8 rounded-full mr-2">
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Sarah Chen</div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                
                                <tr class="hover:bg-gray-50">
                                    <td class="py-4 px-4">
                                        <div class="font-medium text-gray-900 cursor-pointer hover:text-blue-600" onclick="window.location.hash = '/deal-room'">Shoreditch Retail Space</div>
                                        <div class="text-sm text-gray-500">DL_SH_2024_002</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">156 Brick Lane</div>
                                        <div class="text-sm text-gray-500">Retail • 3,500 sq ft</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                            Contract
                                        </span>
                                    </td>
                                    <td class="py-4 px-4 font-medium text-gray-900">£850,000</td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <span class="text-gray-900">92%</span>
                                            <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                                <div class="bg-green-500 h-2 rounded-full" style="width: 92%"></div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                            Low
                                        </span>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">Final Signatures</div>
                                        <div class="text-sm text-gray-500">Due: Nov 20</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg" alt="Owner" class="w-8 h-8 rounded-full mr-2">
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Mike Rodriguez</div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                
                                <tr class="hover:bg-gray-50">
                                    <td class="py-4 px-4">
                                        <div class="font-medium text-gray-900">Kings Cross Development</div>
                                        <div class="text-sm text-gray-500">DL_KC_2024_003</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">2 King's Boulevard</div>
                                        <div class="text-sm text-gray-500">Mixed Use • 45,000 sq ft</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                                            Proposal
                                        </span>
                                    </td>
                                    <td class="py-4 px-4 font-medium text-gray-900">£4,200,000</td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <span class="text-gray-900">68%</span>
                                            <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                                <div class="bg-yellow-500 h-2 rounded-full" style="width: 68%"></div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                            High
                                        </span>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">Proposal Submission</div>
                                        <div class="text-sm text-gray-500">Due: Nov 25</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg" alt="Owner" class="w-8 h-8 rounded-full mr-2">
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">David Kim</div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Task Management -->
            <section class="mb-8" id="task-management-section">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Urgent Tasks</h3>
                            <button data-view-all="task-management" class="text-sm text-blue-600 hover:text-blue-700">View All Tasks</button>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-start space-x-4 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg">
                                <div class="flex-shrink-0 mt-1">
                                    <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Review Legal Documentation</h4>
                                    <p class="text-sm text-gray-600 mt-1">Canary Wharf Office Deal</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <span class="text-xs text-red-600 font-medium">OVERDUE</span>
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="Assignee" class="w-6 h-6 rounded-full">
                                            <span class="text-xs text-gray-500 ml-2">Sarah Chen</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-4 p-4 bg-orange-50 border-l-4 border-orange-500 rounded-lg">
                                <div class="flex-shrink-0 mt-1">
                                    <div class="w-3 h-3 bg-orange-500 rounded-full"></div>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Property Valuation Report</h4>
                                    <p class="text-sm text-gray-600 mt-1">Shoreditch Retail Space</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <span class="text-xs text-orange-600 font-medium">DUE TODAY</span>
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg" alt="Assignee" class="w-6 h-6 rounded-full">
                                            <span class="text-xs text-gray-500 ml-2">Mike Rodriguez</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-4 p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg">
                                <div class="flex-shrink-0 mt-1">
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Client Presentation Prep</h4>
                                    <p class="text-sm text-gray-600 mt-1">Kings Cross Development</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <span class="text-xs text-yellow-600 font-medium">DUE TOMORROW</span>
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg" alt="Assignee" class="w-6 h-6 rounded-full">
                                            <span class="text-xs text-gray-500 ml-2">David Kim</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Pending Approvals</h3>
                            <button data-view-all="pending-approvals" class="text-sm text-blue-600 hover:text-blue-700">View All Approvals</button>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-start space-x-4 p-4 border border-gray-200 rounded-lg">
                                <div class="bg-blue-100 p-2 rounded-full">
                                    <i class="fa-solid fa-file-contract text-blue-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">HoT Version 2.1</h4>
                                    <p class="text-sm text-gray-600 mt-1">Canary Wharf Office Deal</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <div class="flex items-center space-x-2">
                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                                Legal Review
                                            </span>
                                        </div>
                                        <span class="text-xs text-gray-500">Due: Nov 16</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-4 p-4 border border-gray-200 rounded-lg">
                                <div class="bg-green-100 p-2 rounded-full">
                                    <i class="fa-solid fa-check-circle text-green-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Budget Approval</h4>
                                    <p class="text-sm text-gray-600 mt-1">Kings Cross Development</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <div class="flex items-center space-x-2">
                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                                                Executive
                                            </span>
                                        </div>
                                        <span class="text-xs text-gray-500">Due: Nov 18</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-4 p-4 border border-gray-200 rounded-lg">
                                <div class="bg-yellow-100 p-2 rounded-full">
                                    <i class="fa-solid fa-exclamation-triangle text-yellow-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Risk Assessment</h4>
                                    <p class="text-sm text-gray-600 mt-1">Shoreditch Retail Space</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <div class="flex items-center space-x-2">
                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                                Finance
                                            </span>
                                        </div>
                                        <span class="text-xs text-gray-500">Due: Nov 20</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Recent Activity -->
            <section class="mb-8" id="activity-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Recent Activity</h3>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">All</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Deals</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Documents</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Tasks</button>
                        </div>
                    </div>
                    
                    <div class="space-y-6">
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="User" class="w-10 h-10 rounded-full">
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-medium text-gray-900">Sarah Chen</span>
                                    <span class="text-gray-500">uploaded a new document</span>
                                    <span class="text-blue-600 font-medium">HoT_v2.1_CanaryWharf.pdf</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Canary Wharf Office Deal • 2 hours ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg" alt="User" class="w-10 h-10 rounded-full">
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-medium text-gray-900">Mike Rodriguez</span>
                                    <span class="text-gray-500">moved deal to</span>
                                    <span class="text-green-600 font-medium">Contract stage</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Shoreditch Retail Space • 4 hours ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg" alt="User" class="w-10 h-10 rounded-full">
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-medium text-gray-900">David Kim</span>
                                    <span class="text-gray-500">requested approval for</span>
                                    <span class="text-purple-600 font-medium">Budget Amendment</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Kings Cross Development • 6 hours ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg" alt="User" class="w-10 h-10 rounded-full">
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-medium text-gray-900">Emma Thompson</span>
                                    <span class="text-gray-500">completed task</span>
                                    <span class="text-blue-600 font-medium">Property Survey</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Bermondsey Industrial Unit • 8 hours ago</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Risk Management Dashboard -->
            <section class="mb-8" id="risk-management-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Risk Management Overview</h3>
                        <button class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">
                            <i class="fa-solid fa-exclamation-triangle mr-2"></i>
                            Risk Report
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <div class="text-center p-4 bg-red-50 rounded-lg border border-red-200">
                            <div class="text-3xl font-bold text-red-600">3</div>
                            <div class="text-sm text-red-700 font-medium mt-1">High Risk</div>
                            <div class="text-xs text-red-600 mt-1">Immediate attention required</div>
                        </div>
                        
                        <div class="text-center p-4 bg-yellow-50 rounded-lg border border-yellow-200">
                            <div class="text-3xl font-bold text-yellow-600">8</div>
                            <div class="text-sm text-yellow-700 font-medium mt-1">Medium Risk</div>
                            <div class="text-xs text-yellow-600 mt-1">Monitor closely</div>
                        </div>
                        
                        <div class="text-center p-4 bg-green-50 rounded-lg border border-green-200">
                            <div class="text-3xl font-bold text-green-600">13</div>
                            <div class="text-sm text-green-700 font-medium mt-1">Low Risk</div>
                            <div class="text-xs text-green-600 mt-1">Routine monitoring</div>
                        </div>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="flex items-start space-x-4 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg">
                            <div class="bg-red-100 p-2 rounded-full">
                                <i class="fa-solid fa-exclamation-triangle text-red-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-red-900">Regulatory Compliance Risk</h4>
                                <p class="text-sm text-red-700 mt-1">Kings Cross Development - Planning permission delays may impact timeline</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-red-600 font-medium">HIGH RISK</span>
                                    <button class="text-xs text-red-700 hover:text-red-900 font-medium">View Details</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4 p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg">
                            <div class="bg-yellow-100 p-2 rounded-full">
                                <i class="fa-solid fa-clock text-yellow-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-yellow-900">Timeline Risk</h4>
                                <p class="text-sm text-yellow-700 mt-1">Canary Wharf Office - Legal review taking longer than expected</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-yellow-600 font-medium">MEDIUM RISK</span>
                                    <button class="text-xs text-yellow-700 hover:text-yellow-900 font-medium">View Details</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Document Management -->
            <section class="mb-8" id="document-management-section">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Recent Documents</h3>
                            <button data-view-all="document-management" class="text-sm text-blue-600 hover:text-blue-700">View All Documents</button>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-center space-x-4 p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                                <div class="bg-red-100 p-2 rounded">
                                    <i class="fa-solid fa-file-pdf text-red-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">HoT_v2.1_CanaryWharf.pdf</h4>
                                    <p class="text-sm text-gray-500">Uploaded 2 hours ago • Sarah Chen</p>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                        Pending Review
                                    </span>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-4 p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                                <div class="bg-blue-100 p-2 rounded">
                                    <i class="fa-solid fa-file-word text-blue-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Contract_Shoreditch_v1.2.docx</h4>
                                    <p class="text-sm text-gray-500">Uploaded 4 hours ago • Mike Rodriguez</p>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Approved
                                    </span>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-4 p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                                <div class="bg-green-100 p-2 rounded">
                                    <i class="fa-solid fa-file-excel text-green-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Financial_Model_KingsCross.xlsx</h4>
                                    <p class="text-sm text-gray-500">Uploaded 6 hours ago • David Kim</p>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                        Under Review
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Signature Status</h3>
                            <button data-view-all="document-management" class="text-sm text-blue-600 hover:text-blue-700">View All Signatures</button>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="p-4 border border-gray-200 rounded-lg">
                                <div class="flex items-center justify-between mb-3">
                                    <h4 class="font-medium text-gray-900">Shoreditch Retail Contract</h4>
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                        Pending
                                    </span>
                                </div>
                                <div class="space-y-2">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">Landlord</span>
                                        <i class="fa-solid fa-check-circle text-green-500"></i>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">Tenant Representative</span>
                                        <i class="fa-solid fa-clock text-yellow-500"></i>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">Legal Counsel</span>
                                        <i class="fa-solid fa-clock text-yellow-500"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="p-4 border border-gray-200 rounded-lg">
                                <div class="flex items-center justify-between mb-3">
                                    <h4 class="font-medium text-gray-900">Canary Wharf HoT</h4>
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Complete
                                    </span>
                                </div>
                                <div class="space-y-2">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">All Parties</span>
                                        <i class="fa-solid fa-check-circle text-green-500"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Performance Analytics -->
            <section class="mb-8" id="performance-analytics-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Performance Analytics</h3>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Week</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Month</button>
                            <button class="px-3 py-1 text-sm bg-blue-600 text-white rounded-lg">This Quarter</button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="text-center p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border">
                            <div class="text-2xl font-bold text-blue-600">94%</div>
                            <div class="text-sm text-blue-700 font-medium mt-1">SLA Compliance</div>
                            <div class="text-xs text-blue-600 mt-1">↑ 3% from last quarter</div>
                        </div>
                        
                        <div class="text-center p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border">
                            <div class="text-2xl font-bold text-green-600">6.2</div>
                            <div class="text-sm text-green-700 font-medium mt-1">Avg Deal Cycle (days)</div>
                            <div class="text-xs text-green-600 mt-1">↓ 1.3 days improvement</div>
                        </div>
                        
                        <div class="text-center p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border">
                            <div class="text-2xl font-bold text-purple-600">£2.1M</div>
                            <div class="text-sm text-purple-700 font-medium mt-1">Avg Deal Value</div>
                            <div class="text-xs text-purple-600 mt-1">↑ 15% from last quarter</div>
                        </div>
                        
                        <div class="text-center p-4 bg-gradient-to-r from-orange-50 to-red-50 rounded-lg border">
                            <div class="text-2xl font-bold text-orange-600">87%</div>
                            <div class="text-sm text-orange-700 font-medium mt-1">Client Satisfaction</div>
                            <div class="text-xs text-orange-600 mt-1">↑ 4% from last quarter</div>
                        </div>
                    </div>
                    
                    <div class="h-80" id="performance-chart"></div>
                </div>
            </section>
</div>
<!-- END NEGOTIATION DASHBOARD PAGE -->


            <!-- DEALS OVERVIEW PAGE -->
<div id="deals-overview-page" class="page-content hidden">
<!-- COMPONENT: Key Metrics Section -->
            <section class="mb-8" id="key-metrics-section">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Active Deals</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">24</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-green-600 text-sm font-medium">+12%</span>
                                    <span class="text-gray-500 text-sm ml-2">vs last month</span>
                                </div>
                            </div>
                            <div class="bg-blue-100 p-3 rounded-full">
                                <i class="fa-solid fa-handshake text-blue-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Total Value</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">£8.4M</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-green-600 text-sm font-medium">+18%</span>
                                    <span class="text-gray-500 text-sm ml-2">vs last month</span>
                                </div>
                            </div>
                            <div class="bg-green-100 p-3 rounded-full">
                                <i class="fa-solid fa-pound-sign text-green-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Pending Approvals</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">7</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-red-600 text-sm font-medium">+3</span>
                                    <span class="text-gray-500 text-sm ml-2">this week</span>
                                </div>
                            </div>
                            <div class="bg-orange-100 p-3 rounded-full">
                                <i class="fa-solid fa-clock text-orange-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Win Rate</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">73%</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-green-600 text-sm font-medium">+5%</span>
                                    <span class="text-gray-500 text-sm ml-2">vs last quarter</span>
                                </div>
                            </div>
                            <div class="bg-purple-100 p-3 rounded-full">
                                <i class="fa-solid fa-trophy text-purple-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Deal Pipeline Overview -->
            <section class="mb-8" id="pipeline-overview-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Deal Pipeline Overview</h3>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Month</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Quarter</button>
                            <button class="px-3 py-1 text-sm bg-blue-600 text-white rounded-lg">This Year</button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-7 gap-4">
                        <div class="text-center p-4 bg-blue-50 rounded-lg border-2 border-blue-200">
                            <div class="text-2xl font-bold text-blue-600">8</div>
                            <div class="text-sm text-blue-700 font-medium mt-1">Lead</div>
                            <div class="text-xs text-blue-600 mt-1">£1.2M</div>
                        </div>
                        
                        <div class="text-center p-4 bg-indigo-50 rounded-lg border">
                            <div class="text-2xl font-bold text-indigo-600">6</div>
                            <div class="text-sm text-indigo-700 font-medium mt-1">Viewing</div>
                            <div class="text-xs text-indigo-600 mt-1">£980K</div>
                        </div>
                        
                        <div class="text-center p-4 bg-purple-50 rounded-lg border">
                            <div class="text-2xl font-bold text-purple-600">4</div>
                            <div class="text-sm text-purple-700 font-medium mt-1">Proposal</div>
                            <div class="text-xs text-purple-600 mt-1">£1.8M</div>
                        </div>
                        
                        <div class="text-center p-4 bg-pink-50 rounded-lg border">
                            <div class="text-2xl font-bold text-pink-600">3</div>
                            <div class="text-sm text-pink-700 font-medium mt-1">HoTs</div>
                            <div class="text-xs text-pink-600 mt-1">£2.1M</div>
                        </div>
                        
                        <div class="text-center p-4 bg-red-50 rounded-lg border">
                            <div class="text-2xl font-bold text-red-600">2</div>
                            <div class="text-sm text-red-700 font-medium mt-1">Contract</div>
                            <div class="text-xs text-red-600 mt-1">£1.5M</div>
                        </div>
                        
                        <div class="text-center p-4 bg-orange-50 rounded-lg border">
                            <div class="text-2xl font-bold text-orange-600">1</div>
                            <div class="text-sm text-orange-700 font-medium mt-1">Onboarding</div>
                            <div class="text-xs text-orange-600 mt-1">£800K</div>
                        </div>
                        
                        <div class="text-center p-4 bg-green-50 rounded-lg border">
                            <div class="text-2xl font-bold text-green-600">12</div>
                            <div class="text-sm text-green-700 font-medium mt-1">Live</div>
                            <div class="text-xs text-green-600 mt-1">£5.2M</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Charts Section -->
            <section class="mb-8" id="charts-section">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Deal Value Trend</h3>
                        <div id="deal-value-chart" class="h-80"></div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Deal Stage Distribution</h3>
                        <div id="stage-distribution-chart" class="h-80"></div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Critical Notifications -->
            <section class="mb-8" id="notifications-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Critical Notifications</h3>
                        <button class="text-sm text-blue-600 hover:text-blue-700" data-view-all="deals-overview">View All</button>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="flex items-start space-x-4 p-4 bg-red-50 border border-red-200 rounded-lg">
                            <div class="bg-red-100 p-2 rounded-full">
                                <i class="fa-solid fa-exclamation-triangle text-red-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-red-900">SLA Breach Alert</h4>
                                <p class="text-sm text-red-700 mt-1">Canary Wharf Office Deal - Legal approval overdue by 2 days</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-red-600">2 hours ago</span>
                                    <button class="text-xs text-red-700 hover:text-red-900 font-medium" data-action="quick-action" data-item-type="deal">Take Action</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                            <div class="bg-yellow-100 p-2 rounded-full">
                                <i class="fa-solid fa-clock text-yellow-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-yellow-900">Approval Pending</h4>
                                <p class="text-sm text-yellow-700 mt-1">Shoreditch Retail Space - Executive approval needed for contract terms</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-yellow-600">4 hours ago</span>
                                    <button class="text-xs text-yellow-700 hover:text-yellow-900 font-medium" data-action="add-comment" data-item-type="deal">Review</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                            <div class="bg-blue-100 p-2 rounded-full">
                                <i class="fa-solid fa-file-upload text-blue-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-blue-900">Document Uploaded</h4>
                                <p class="text-sm text-blue-700 mt-1">New HoT version uploaded for Kings Cross Development</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-blue-600">6 hours ago</span>
                                    <button class="text-xs text-blue-700 hover:text-blue-900 font-medium" data-action="view-document" data-item-type="document">View Document</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Active Deals Table -->
            <section class="mb-8" id="active-deals-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Active Deals</h3>
                        <div class="flex items-center space-x-3">
                            <div class="relative">
                                <input type="text" placeholder="Filter deals..." class="pl-8 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <i class="fa-solid fa-search absolute left-2.5 top-2.5 text-gray-400 text-sm"></i>
                            </div>
                            <button class="px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50" data-filter-toggle="filter-panel">
                                <i class="fa-solid fa-filter mr-2"></i>Filter
                            </button>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="border-b border-gray-200">
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Deal Name</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Property</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Stage</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Value</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Probability</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Risk</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Next Milestone</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Owner</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                                <tr class="hover:bg-gray-50">
                                    <td class="py-4 px-4">
                                        <div class="font-medium text-gray-900 cursor-pointer hover:text-blue-600" onclick="window.location.hash = '/deal-room'">Canary Wharf Office</div>
                                        <div class="text-sm text-gray-500">DL_CW_2024_001</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">25 Canada Square</div>
                                        <div class="text-sm text-gray-500">Office • 15,000 sq ft</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-pink-100 text-pink-800">
                                            HoTs
                                        </span>
                                    </td>
                                    <td class="py-4 px-4 font-medium text-gray-900">£2,100,000</td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <span class="text-gray-900">85%</span>
                                            <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                                <div class="bg-green-500 h-2 rounded-full" style="width: 85%"></div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                            Medium
                                        </span>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">Contract Review</div>
                                        <div class="text-sm text-gray-500">Due: Nov 15</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="Owner" class="w-8 h-8 rounded-full mr-2">
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Sarah Chen</div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                
                                <tr class="hover:bg-gray-50">
                                    <td class="py-4 px-4">
                                        <div class="font-medium text-gray-900 cursor-pointer hover:text-blue-600" onclick="window.location.hash = '/deal-room'">Shoreditch Retail Space</div>
                                        <div class="text-sm text-gray-500">DL_SH_2024_002</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">156 Brick Lane</div>
                                        <div class="text-sm text-gray-500">Retail • 3,500 sq ft</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                            Contract
                                        </span>
                                    </td>
                                    <td class="py-4 px-4 font-medium text-gray-900">£850,000</td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <span class="text-gray-900">92%</span>
                                            <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                                <div class="bg-green-500 h-2 rounded-full" style="width: 92%"></div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                            Low
                                        </span>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">Final Signatures</div>
                                        <div class="text-sm text-gray-500">Due: Nov 20</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg" alt="Owner" class="w-8 h-8 rounded-full mr-2">
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Mike Rodriguez</div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                
                                <tr class="hover:bg-gray-50">
                                    <td class="py-4 px-4">
                                        <div class="font-medium text-gray-900">Kings Cross Development</div>
                                        <div class="text-sm text-gray-500">DL_KC_2024_003</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">2 King's Boulevard</div>
                                        <div class="text-sm text-gray-500">Mixed Use • 45,000 sq ft</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                                            Proposal
                                        </span>
                                    </td>
                                    <td class="py-4 px-4 font-medium text-gray-900">£4,200,000</td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <span class="text-gray-900">68%</span>
                                            <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                                <div class="bg-yellow-500 h-2 rounded-full" style="width: 68%"></div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                            High
                                        </span>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">Proposal Submission</div>
                                        <div class="text-sm text-gray-500">Due: Nov 25</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg" alt="Owner" class="w-8 h-8 rounded-full mr-2">
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">David Kim</div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Task Management -->
            <section class="mb-8" id="task-management-section">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Urgent Tasks</h3>
                            <button data-view-all="task-management" class="text-sm text-blue-600 hover:text-blue-700">View All Tasks</button>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-start space-x-4 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg">
                                <div class="flex-shrink-0 mt-1">
                                    <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Review Legal Documentation</h4>
                                    <p class="text-sm text-gray-600 mt-1">Canary Wharf Office Deal</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <span class="text-xs text-red-600 font-medium">OVERDUE</span>
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="Assignee" class="w-6 h-6 rounded-full">
                                            <span class="text-xs text-gray-500 ml-2">Sarah Chen</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-4 p-4 bg-orange-50 border-l-4 border-orange-500 rounded-lg">
                                <div class="flex-shrink-0 mt-1">
                                    <div class="w-3 h-3 bg-orange-500 rounded-full"></div>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Property Valuation Report</h4>
                                    <p class="text-sm text-gray-600 mt-1">Shoreditch Retail Space</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <span class="text-xs text-orange-600 font-medium">DUE TODAY</span>
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg" alt="Assignee" class="w-6 h-6 rounded-full">
                                            <span class="text-xs text-gray-500 ml-2">Mike Rodriguez</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-4 p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg">
                                <div class="flex-shrink-0 mt-1">
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Client Presentation Prep</h4>
                                    <p class="text-sm text-gray-600 mt-1">Kings Cross Development</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <span class="text-xs text-yellow-600 font-medium">DUE TOMORROW</span>
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg" alt="Assignee" class="w-6 h-6 rounded-full">
                                            <span class="text-xs text-gray-500 ml-2">David Kim</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Pending Approvals</h3>
                            <button data-view-all="pending-approvals" class="text-sm text-blue-600 hover:text-blue-700">View All Approvals</button>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-start space-x-4 p-4 border border-gray-200 rounded-lg">
                                <div class="bg-blue-100 p-2 rounded-full">
                                    <i class="fa-solid fa-file-contract text-blue-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">HoT Version 2.1</h4>
                                    <p class="text-sm text-gray-600 mt-1">Canary Wharf Office Deal</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <div class="flex items-center space-x-2">
                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                                Legal Review
                                            </span>
                                        </div>
                                        <span class="text-xs text-gray-500">Due: Nov 16</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-4 p-4 border border-gray-200 rounded-lg">
                                <div class="bg-green-100 p-2 rounded-full">
                                    <i class="fa-solid fa-check-circle text-green-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Budget Approval</h4>
                                    <p class="text-sm text-gray-600 mt-1">Kings Cross Development</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <div class="flex items-center space-x-2">
                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                                                Executive
                                            </span>
                                        </div>
                                        <span class="text-xs text-gray-500">Due: Nov 18</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-4 p-4 border border-gray-200 rounded-lg">
                                <div class="bg-yellow-100 p-2 rounded-full">
                                    <i class="fa-solid fa-exclamation-triangle text-yellow-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Risk Assessment</h4>
                                    <p class="text-sm text-gray-600 mt-1">Shoreditch Retail Space</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <div class="flex items-center space-x-2">
                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                                Finance
                                            </span>
                                        </div>
                                        <span class="text-xs text-gray-500">Due: Nov 20</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Recent Activity -->
            <section class="mb-8" id="activity-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Recent Activity</h3>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">All</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Deals</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Documents</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Tasks</button>
                        </div>
                    </div>
                    
                    <div class="space-y-6">
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="User" class="w-10 h-10 rounded-full">
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-medium text-gray-900">Sarah Chen</span>
                                    <span class="text-gray-500">uploaded a new document</span>
                                    <span class="text-blue-600 font-medium">HoT_v2.1_CanaryWharf.pdf</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Canary Wharf Office Deal • 2 hours ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg" alt="User" class="w-10 h-10 rounded-full">
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-medium text-gray-900">Mike Rodriguez</span>
                                    <span class="text-gray-500">moved deal to</span>
                                    <span class="text-green-600 font-medium">Contract stage</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Shoreditch Retail Space • 4 hours ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg" alt="User" class="w-10 h-10 rounded-full">
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-medium text-gray-900">David Kim</span>
                                    <span class="text-gray-500">requested approval for</span>
                                    <span class="text-purple-600 font-medium">Budget Amendment</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Kings Cross Development • 6 hours ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg" alt="User" class="w-10 h-10 rounded-full">
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-medium text-gray-900">Emma Thompson</span>
                                    <span class="text-gray-500">completed task</span>
                                    <span class="text-blue-600 font-medium">Property Survey</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Bermondsey Industrial Unit • 8 hours ago</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Risk Management Dashboard -->
            <section class="mb-8" id="risk-management-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Risk Management Overview</h3>
                        <button class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">
                            <i class="fa-solid fa-exclamation-triangle mr-2"></i>
                            Risk Report
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <div class="text-center p-4 bg-red-50 rounded-lg border border-red-200">
                            <div class="text-3xl font-bold text-red-600">3</div>
                            <div class="text-sm text-red-700 font-medium mt-1">High Risk</div>
                            <div class="text-xs text-red-600 mt-1">Immediate attention required</div>
                        </div>
                        
                        <div class="text-center p-4 bg-yellow-50 rounded-lg border border-yellow-200">
                            <div class="text-3xl font-bold text-yellow-600">8</div>
                            <div class="text-sm text-yellow-700 font-medium mt-1">Medium Risk</div>
                            <div class="text-xs text-yellow-600 mt-1">Monitor closely</div>
                        </div>
                        
                        <div class="text-center p-4 bg-green-50 rounded-lg border border-green-200">
                            <div class="text-3xl font-bold text-green-600">13</div>
                            <div class="text-sm text-green-700 font-medium mt-1">Low Risk</div>
                            <div class="text-xs text-green-600 mt-1">Routine monitoring</div>
                        </div>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="flex items-start space-x-4 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg">
                            <div class="bg-red-100 p-2 rounded-full">
                                <i class="fa-solid fa-exclamation-triangle text-red-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-red-900">Regulatory Compliance Risk</h4>
                                <p class="text-sm text-red-700 mt-1">Kings Cross Development - Planning permission delays may impact timeline</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-red-600 font-medium">HIGH RISK</span>
                                    <button class="text-xs text-red-700 hover:text-red-900 font-medium">View Details</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4 p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg">
                            <div class="bg-yellow-100 p-2 rounded-full">
                                <i class="fa-solid fa-clock text-yellow-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-yellow-900">Timeline Risk</h4>
                                <p class="text-sm text-yellow-700 mt-1">Canary Wharf Office - Legal review taking longer than expected</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-yellow-600 font-medium">MEDIUM RISK</span>
                                    <button class="text-xs text-yellow-700 hover:text-yellow-900 font-medium">View Details</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Document Management -->
            <section class="mb-8" id="document-management-section">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Recent Documents</h3>
                            <button data-view-all="document-management" class="text-sm text-blue-600 hover:text-blue-700">View All Documents</button>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-center space-x-4 p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                                <div class="bg-red-100 p-2 rounded">
                                    <i class="fa-solid fa-file-pdf text-red-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">HoT_v2.1_CanaryWharf.pdf</h4>
                                    <p class="text-sm text-gray-500">Uploaded 2 hours ago • Sarah Chen</p>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                        Pending Review
                                    </span>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-4 p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                                <div class="bg-blue-100 p-2 rounded">
                                    <i class="fa-solid fa-file-word text-blue-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Contract_Shoreditch_v1.2.docx</h4>
                                    <p class="text-sm text-gray-500">Uploaded 4 hours ago • Mike Rodriguez</p>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Approved
                                    </span>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-4 p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                                <div class="bg-green-100 p-2 rounded">
                                    <i class="fa-solid fa-file-excel text-green-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Financial_Model_KingsCross.xlsx</h4>
                                    <p class="text-sm text-gray-500">Uploaded 6 hours ago • David Kim</p>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                        Under Review
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Signature Status</h3>
                            <button data-view-all="document-management" class="text-sm text-blue-600 hover:text-blue-700">View All Signatures</button>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="p-4 border border-gray-200 rounded-lg">
                                <div class="flex items-center justify-between mb-3">
                                    <h4 class="font-medium text-gray-900">Shoreditch Retail Contract</h4>
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                        Pending
                                    </span>
                                </div>
                                <div class="space-y-2">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">Landlord</span>
                                        <i class="fa-solid fa-check-circle text-green-500"></i>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">Tenant Representative</span>
                                        <i class="fa-solid fa-clock text-yellow-500"></i>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">Legal Counsel</span>
                                        <i class="fa-solid fa-clock text-yellow-500"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="p-4 border border-gray-200 rounded-lg">
                                <div class="flex items-center justify-between mb-3">
                                    <h4 class="font-medium text-gray-900">Canary Wharf HoT</h4>
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Complete
                                    </span>
                                </div>
                                <div class="space-y-2">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">All Parties</span>
                                        <i class="fa-solid fa-check-circle text-green-500"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Performance Analytics -->
            <section class="mb-8" id="performance-analytics-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Performance Analytics</h3>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Week</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Month</button>
                            <button class="px-3 py-1 text-sm bg-blue-600 text-white rounded-lg">This Quarter</button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="text-center p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border">
                            <div class="text-2xl font-bold text-blue-600">94%</div>
                            <div class="text-sm text-blue-700 font-medium mt-1">SLA Compliance</div>
                            <div class="text-xs text-blue-600 mt-1">↑ 3% from last quarter</div>
                        </div>
                        
                        <div class="text-center p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border">
                            <div class="text-2xl font-bold text-green-600">6.2</div>
                            <div class="text-sm text-green-700 font-medium mt-1">Avg Deal Cycle (days)</div>
                            <div class="text-xs text-green-600 mt-1">↓ 1.3 days improvement</div>
                        </div>
                        
                        <div class="text-center p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border">
                            <div class="text-2xl font-bold text-purple-600">£2.1M</div>
                            <div class="text-sm text-purple-700 font-medium mt-1">Avg Deal Value</div>
                            <div class="text-xs text-purple-600 mt-1">↑ 15% from last quarter</div>
                        </div>
                        
                        <div class="text-center p-4 bg-gradient-to-r from-orange-50 to-red-50 rounded-lg border">
                            <div class="text-2xl font-bold text-orange-600">87%</div>
                            <div class="text-sm text-orange-700 font-medium mt-1">Client Satisfaction</div>
                            <div class="text-xs text-orange-600 mt-1">↑ 4% from last quarter</div>
                        </div>
                    </div>
                    
                    <div class="h-80" id="performance-chart"></div>
                </div>
            </section>
</div>
<!-- END DEALS OVERVIEW PAGE -->


            <!-- HEADS OF TERMS PAGE -->
<div id="heads-of-terms-page" class="page-content hidden">
<section class="mb-8" id="hot-overview-section">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Total HoTs</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">18</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-green-600 text-sm font-medium">+2</span>
                                    <span class="text-gray-500 text-sm ml-2">this week</span>
                                </div>
                            </div>
                            <div class="bg-blue-100 p-3 rounded-full">
                                <i class="fa-solid fa-file-contract text-blue-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Pending Review</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">5</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-yellow-600 text-sm font-medium">+1</span>
                                    <span class="text-gray-500 text-sm ml-2">since yesterday</span>
                                </div>
                            </div>
                            <div class="bg-yellow-100 p-3 rounded-full">
                                <i class="fa-solid fa-clock text-yellow-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Approved</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">11</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-green-600 text-sm font-medium">+3</span>
                                    <span class="text-gray-500 text-sm ml-2">this week</span>
                                </div>
                            </div>
                            <div class="bg-green-100 p-3 rounded-full">
                                <i class="fa-solid fa-check-circle text-green-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Avg Review Time</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">2.4</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-green-600 text-sm font-medium">-0.3</span>
                                    <span class="text-gray-500 text-sm ml-2">days improvement</span>
                                </div>
                            </div>
                            <div class="bg-purple-100 p-3 rounded-full">
                                <i class="fa-solid fa-stopwatch text-purple-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8" id="hot-quick-actions-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-6">Quick Actions</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <button class="flex items-center justify-center p-6 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg hover:from-blue-100 hover:to-indigo-100 transition-all">
                            <div class="text-center">
                                <div class="bg-blue-100 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3">
                                    <i class="fa-solid fa-plus text-blue-600 text-xl"></i>
                                </div>
                                <h4 class="font-medium text-gray-900">Create New HoT</h4>
                                <p class="text-sm text-gray-500 mt-1">Start from template or blank</p>
                            </div>
                        </button>
                        
                        <button class="flex items-center justify-center p-6 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg hover:from-green-100 hover:to-emerald-100 transition-all">
                            <div class="text-center">
                                <div class="bg-green-100 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3">
                                    <i class="fa-solid fa-copy text-green-600 text-xl"></i>
                                </div>
                                <h4 class="font-medium text-gray-900">Duplicate HoT</h4>
                                <p class="text-sm text-gray-500 mt-1">Copy from existing HoT</p>
                            </div>
                        </button>
                        
                        <button class="flex items-center justify-center p-6 bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg hover:from-purple-100 hover:to-pink-100 transition-all">
                            <div class="text-center">
                                <div class="bg-purple-100 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3">
                                    <i class="fa-solid fa-file-import text-purple-600 text-xl"></i>
                                </div>
                                <h4 class="font-medium text-gray-900">Import HoT</h4>
                                <p class="text-sm text-gray-500 mt-1">Upload existing document</p>
                            </div>
                        </button>
                    </div>
                </div>
            </section>

            <section class="mb-8" id="hot-filters-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex flex-wrap items-center justify-between gap-4">
                        <div class="flex items-center space-x-4">
                            <div class="relative">
                                <button class="flex items-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                                    <i class="fa-solid fa-filter mr-2"></i>
                                    <span>Status</span>
                                    <i class="fa-solid fa-chevron-down ml-2 text-sm"></i>
                                </button>
                            </div>
                            
                            <div class="relative">
                                <button class="flex items-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                                    <i class="fa-solid fa-building mr-2"></i>
                                    <span>Deal Stage</span>
                                    <i class="fa-solid fa-chevron-down ml-2 text-sm"></i>
                                </button>
                            </div>
                            
                            <div class="relative">
                                <button class="flex items-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                                    <i class="fa-solid fa-user mr-2"></i>
                                    <span>Assignee</span>
                                    <i class="fa-solid fa-chevron-down ml-2 text-sm"></i>
                                </button>
                            </div>
                            
                            <div class="relative">
                                <button class="flex items-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                                    <i class="fa-solid fa-calendar mr-2"></i>
                                    <span>Date Range</span>
                                    <i class="fa-solid fa-chevron-down ml-2 text-sm"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-2" data-view-toggle-group="hot-list-container">
                            <button data-view="list" class="px-3 py-2 text-sm text-gray-600 hover:text-gray-900">
                                <i class="fa-solid fa-list mr-2"></i>
                                List View
                            </button>
                            <button data-view="grid" class="px-3 py-2 text-sm bg-blue-100 text-blue-700 rounded-lg">
                                <i class="fa-solid fa-th-large mr-2"></i>
                                Grid View
                            </button>
                            <button data-export="data"  class="px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50"></i>Export</button>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8" id="hot-grid-section">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow" id="hot-card-1">
                        <div class="p-6">
                            <div class="flex items-start justify-between mb-4">
                                <div class="flex-1">
                                    <h4 class="font-semibold text-gray-900 mb-1">Canary Wharf Office</h4>
                                    <p class="text-sm text-gray-500">DL_CW_2024_001</p>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                        Under Review
                                    </span>
                                    <button class="text-gray-400 hover:text-gray-600">
                                        <i class="fa-solid fa-ellipsis-v"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="space-y-3 mb-4">
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Version:</span>
                                    <span class="font-medium text-gray-900">v2.1</span>
                                </div>
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Deal Value:</span>
                                    <span class="font-medium text-gray-900">£2,100,000</span>
                                </div>
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Property Type:</span>
                                    <span class="font-medium text-gray-900">Office</span>
                                </div>
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Last Updated:</span>
                                    <span class="font-medium text-gray-900">2 hours ago</span>
                                </div>
                            </div>
                            
                            <div class="border-t border-gray-200 pt-4">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-sm font-medium text-gray-700">Section Completeness</span>
                                    <span class="text-sm text-gray-500">7/8</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: 87.5%"></div>
                                </div>
                                <div class="flex items-center justify-between mt-3">
                                    <div class="flex -space-x-1">
                                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="User" class="w-6 h-6 rounded-full border-2 border-white">
                                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg" alt="User" class="w-6 h-6 rounded-full border-2 border-white">
                                    </div>
                                    <button class="text-blue-600 hover:text-blue-700 text-sm font-medium">
                                        View Details
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow" id="hot-card-2">
                        <div class="p-6">
                            <div class="flex items-start justify-between mb-4">
                                <div class="flex-1">
                                    <h4 class="font-semibold text-gray-900 mb-1">Shoreditch Retail Space</h4>
                                    <p class="text-sm text-gray-500">DL_SH_2024_002</p>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Approved
                                    </span>
                                    <button class="text-gray-400 hover:text-gray-600">
                                        <i class="fa-solid fa-ellipsis-v"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="space-y-3 mb-4">
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Version:</span>
                                    <span class="font-medium text-gray-900">v1.3</span>
                                </div>
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Deal Value:</span>
                                    <span class="font-medium text-gray-900">£850,000</span>
                                </div>
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Property Type:</span>
                                    <span class="font-medium text-gray-900">Retail</span>
                                </div>
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Last Updated:</span>
                                    <span class="font-medium text-gray-900">1 day ago</span>
                                </div>
                            </div>
                            
                            <div class="border-t border-gray-200 pt-4">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-sm font-medium text-gray-700">Section Completeness</span>
                                    <span class="text-sm text-gray-500">8/8</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: 100%"></div>
                                </div>
                                <div class="flex items-center justify-between mt-3">
                                    <div class="flex -space-x-1">
                                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg" alt="User" class="w-6 h-6 rounded-full border-2 border-white">
                                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg" alt="User" class="w-6 h-6 rounded-full border-2 border-white">
                                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg" alt="User" class="w-6 h-6 rounded-full border-2 border-white">
                                    </div>
                                    <button class="text-blue-600 hover:text-blue-700 text-sm font-medium">
                                        View Details
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow" id="hot-card-3">
                        <div class="p-6">
                            <div class="flex items-start justify-between mb-4">
                                <div class="flex-1">
                                    <h4 class="font-semibold text-gray-900 mb-1">Kings Cross Development</h4>
                                    <p class="text-sm text-gray-500">DL_KC_2024_003</p>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                        Draft
                                    </span>
                                    <button class="text-gray-400 hover:text-gray-600">
                                        <i class="fa-solid fa-ellipsis-v"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="space-y-3 mb-4">
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Version:</span>
                                    <span class="font-medium text-gray-900">v1.0</span>
                                </div>
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Deal Value:</span>
                                    <span class="font-medium text-gray-900">£4,200,000</span>
                                </div>
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Property Type:</span>
                                    <span class="font-medium text-gray-900">Mixed Use</span>
                                </div>
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Last Updated:</span>
                                    <span class="font-medium text-gray-900">3 days ago</span>
                                </div>
                            </div>
                            
                            <div class="border-t border-gray-200 pt-4">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-sm font-medium text-gray-700">Section Completeness</span>
                                    <span class="text-sm text-gray-500">4/8</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-yellow-500 h-2 rounded-full" style="width: 50%"></div>
                                </div>
                                <div class="flex items-center justify-between mt-3">
                                    <div class="flex -space-x-1">
                                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg" alt="User" class="w-6 h-6 rounded-full border-2 border-white">
                                    </div>
                                    <button class="text-blue-600 hover:text-blue-700 text-sm font-medium" data-action="edit" data-item-type="hot">
                                        Continue Editing
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow" id="hot-card-4">
                        <div class="p-6">
                            <div class="flex items-start justify-between mb-4">
                                <div class="flex-1">
                                    <h4 class="font-semibold text-gray-900 mb-1">Bermondsey Industrial</h4>
                                    <p class="text-sm text-gray-500">DL_BI_2024_004</p>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                        Rejected
                                    </span>
                                    <button class="text-gray-400 hover:text-gray-600">
                                        <i class="fa-solid fa-ellipsis-v"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="space-y-3 mb-4">
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Version:</span>
                                    <span class="font-medium text-gray-900">v2.0</span>
                                </div>
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Deal Value:</span>
                                    <span class="font-medium text-gray-900">£1,750,000</span>
                                </div>
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Property Type:</span>
                                    <span class="font-medium text-gray-900">Industrial</span>
                                </div>
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Last Updated:</span>
                                    <span class="font-medium text-gray-900">5 days ago</span>
                                </div>
                            </div>
                            
                            <div class="border-t border-gray-200 pt-4">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-sm font-medium text-gray-700">Section Completeness</span>
                                    <span class="text-sm text-gray-500">6/8</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-orange-500 h-2 rounded-full" style="width: 75%"></div>
                                </div>
                                <div class="flex items-center justify-between mt-3">
                                    <div class="flex -space-x-1">
                                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-6.jpg" alt="User" class="w-6 h-6 rounded-full border-2 border-white">
                                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-7.jpg" alt="User" class="w-6 h-6 rounded-full border-2 border-white">
                                    </div>
                                    <button class="text-red-600 hover:text-red-700 text-sm font-medium" data-action="add-comment" data-item-type="hot">
                                        Review Feedback
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow" id="hot-card-5">
                        <div class="p-6">
                            <div class="flex items-start justify-between mb-4">
                                <div class="flex-1">
                                    <h4 class="font-semibold text-gray-900 mb-1">Greenwich Peninsula</h4>
                                    <p class="text-sm text-gray-500">DL_GP_2024_005</p>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                        Locked
                                    </span>
                                    <button class="text-gray-400 hover:text-gray-600">
                                        <i class="fa-solid fa-ellipsis-v"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="space-y-3 mb-4">
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Version:</span>
                                    <span class="font-medium text-gray-900">v3.1</span>
                                </div>
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Deal Value:</span>
                                    <span class="font-medium text-gray-900">£3,400,000</span>
                                </div>
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Property Type:</span>
                                    <span class="font-medium text-gray-900">Office</span>
                                </div>
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Last Updated:</span>
                                    <span class="font-medium text-gray-900">1 week ago</span>
                                </div>
                            </div>
                            
                            <div class="border-t border-gray-200 pt-4">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-sm font-medium text-gray-700">Section Completeness</span>
                                    <span class="text-sm text-gray-500">8/8</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: 100%"></div>
                                </div>
                                <div class="flex items-center justify-between mt-3">
                                    <div class="flex -space-x-1">
                                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-8.jpg" alt="User" class="w-6 h-6 rounded-full border-2 border-white">
                                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-9.jpg" alt="User" class="w-6 h-6 rounded-full border-2 border-white">
                                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="User" class="w-6 h-6 rounded-full border-2 border-white">
                                    </div>
                                    <button class="text-blue-600 hover:text-blue-700 text-sm font-medium" data-action="view-document" data-item-type="hot">
                                        View Final
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow" id="hot-card-6">
                        <div class="p-6">
                            <div class="flex items-start justify-between mb-4">
                                <div class="flex-1">
                                    <h4 class="font-semibold text-gray-900 mb-1">Stratford City Mall</h4>
                                    <p class="text-sm text-gray-500">DL_SC_2024_006</p>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                        Under Review
                                    </span>
                                    <button class="text-gray-400 hover:text-gray-600">
                                        <i class="fa-solid fa-ellipsis-v"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="space-y-3 mb-4">
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Version:</span>
                                    <span class="font-medium text-gray-900">v1.4</span>
                                </div>
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Deal Value:</span>
                                    <span class="font-medium text-gray-900">£2,850,000</span>
                                </div>
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Property Type:</span>
                                    <span class="font-medium text-gray-900">Retail</span>
                                </div>
                                <div class="flex items-center justify-between text-sm">
                                    <span class="text-gray-600">Last Updated:</span>
                                    <span class="font-medium text-gray-900">6 hours ago</span>
                                </div>
                            </div>
                            
                            <div class="border-t border-gray-200 pt-4">
                                <div class="flex items-center justify-between mb-3">
                                    <span class="text-sm font-medium text-gray-700">Section Completeness</span>
                                    <span class="text-sm text-gray-500">7/8</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: 87.5%"></div>
                                </div>
                                <div class="flex items-center justify-between mt-3">
                                    <div class="flex -space-x-1">
                                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-2.jpg" alt="User" class="w-6 h-6 rounded-full border-2 border-white">
                                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg" alt="User" class="w-6 h-6 rounded-full border-2 border-white">
                                    </div>
                                    <button class="text-blue-600 hover:text-blue-700 text-sm font-medium">
                                        View Details
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8" id="hot-templates-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">HoT Templates</h3>
                        <button class="text-blue-600 hover:text-blue-700 text-sm font-medium">
                            <i class="fa-solid fa-plus mr-2"></i>
                            Create Template
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:shadow-sm transition-all cursor-pointer">
                            <div class="flex items-center justify-between mb-3">
                                <div class="bg-blue-100 p-2 rounded">
                                    <i class="fa-solid fa-building text-blue-600"></i>
                                </div>
                                <span class="text-xs text-gray-500">12 uses</span>
                            </div>
                            <h4 class="font-medium text-gray-900 mb-2">Standard Office Lease</h4>
                            <p class="text-sm text-gray-500 mb-3">Commercial office space template with standard terms</p>
                            <button class="w-full py-2 px-3 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-100">
                                Use Template
                            </button>
                        </div>
                        
                        <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:shadow-sm transition-all cursor-pointer">
                            <div class="flex items-center justify-between mb-3">
                                <div class="bg-green-100 p-2 rounded">
                                    <i class="fa-solid fa-store text-green-600"></i>
                                </div>
                                <span class="text-xs text-gray-500">8 uses</span>
                            </div>
                            <h4 class="font-medium text-gray-900 mb-2">Retail Space Agreement</h4>
                            <p class="text-sm text-gray-500 mb-3">Template for retail and commercial spaces</p>
                            <button class="w-full py-2 px-3 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-100">
                                Use Template
                            </button>
                        </div>
                        
                        <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:shadow-sm transition-all cursor-pointer">
                            <div class="flex items-center justify-between mb-3">
                                <div class="bg-purple-100 p-2 rounded">
                                    <i class="fa-solid fa-industry text-purple-600"></i>
                                </div>
                                <span class="text-xs text-gray-500">5 uses</span>
                            </div>
                            <h4 class="font-medium text-gray-900 mb-2">Industrial Property</h4>
                            <p class="text-sm text-gray-500 mb-3">Warehouse and industrial property terms</p>
                            <button class="w-full py-2 px-3 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-100">
                                Use Template
                            </button>
                        </div>
                        
                        <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:shadow-sm transition-all cursor-pointer">
                            <div class="flex items-center justify-between mb-3">
                                <div class="bg-orange-100 p-2 rounded">
                                    <i class="fa-solid fa-home text-orange-600"></i>
                                </div>
                                <span class="text-xs text-gray-500">3 uses</span>
                            </div>
                            <h4 class="font-medium text-gray-900 mb-2">Mixed Use Development</h4>
                            <p class="text-sm text-gray-500 mb-3">Complex mixed-use property agreements</p>
                            <button class="w-full py-2 px-3 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-100">
                                Use Template
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8" id="hot-workflow-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-6">HoT Workflow Status</h3>
                    
                    <div class="space-y-6">
                        <div class="flex items-start space-x-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                            <div class="bg-yellow-100 p-2 rounded-full">
                                <i class="fa-solid fa-clock text-yellow-600"></i>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center justify-between mb-2">
                                    <h4 class="font-medium text-gray-900">Legal Review Required</h4>
                                    <span class="text-sm text-yellow-600 font-medium">2 HoTs pending</span>
                                </div>
                                <p class="text-sm text-gray-600 mb-3">Canary Wharf Office and Stratford City Mall require legal review before approval</p>
                                <div class="flex items-center space-x-4">
                                    <button class="px-4 py-2 bg-yellow-100 text-yellow-800 rounded-lg text-sm font-medium hover:bg-yellow-200" data-action="assign" data-item-type="review">
                                        Assign Reviewer
                                    </button>
                                    <span class="text-xs text-gray-500">SLA: 2 days remaining</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4 p-4 bg-green-50 border border-green-200 rounded-lg">
                            <div class="bg-green-100 p-2 rounded-full">
                                <i class="fa-solid fa-check-circle text-green-600"></i>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center justify-between mb-2">
                                    <h4 class="font-medium text-gray-900">Recently Approved</h4>
                                    <span class="text-sm text-green-600 font-medium">3 HoTs this week</span>
                                </div>
                                <p class="text-sm text-gray-600 mb-3">Shoreditch Retail Space, Greenwich Peninsula, and Bermondsey Warehouse approved</p>
                                <div class="flex items-center space-x-4">
                                    <button class="px-4 py-2 bg-green-100 text-green-800 rounded-lg text-sm font-medium hover:bg-green-200" data-action="view-document" data-item-type="hot">
                                        View Approved
                                    </button>
                                    <span class="text-xs text-gray-500">Average approval time: 1.8 days</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4 p-4 bg-red-50 border border-red-200 rounded-lg">
                            <div class="bg-red-100 p-2 rounded-full">
                                <i class="fa-solid fa-exclamation-triangle text-red-600"></i>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center justify-between mb-2">
                                    <h4 class="font-medium text-gray-900">Revision Required</h4>
                                    <span class="text-sm text-red-600 font-medium">1 HoT rejected</span>
                                </div>
                                <p class="text-sm text-gray-600 mb-3">Bermondsey Industrial requires significant revisions to commercial terms</p>
                                <div class="flex items-center space-x-4">
                                    <button class="px-4 py-2 bg-red-100 text-red-800 rounded-lg text-sm font-medium hover:bg-red-200" data-action="add-comment" data-item-type="hot">
                                        Review Feedback
                                    </button>
                                    <span class="text-xs text-gray-500">Rejected 2 days ago</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8" id="hot-analytics-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">HoT Analytics</h3>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Last 30 days</button>
                            <button class="px-3 py-1 text-sm bg-blue-600 text-white rounded-lg">This Quarter</button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="text-center p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border">
                            <div class="text-2xl font-bold text-blue-600">87%</div>
                            <div class="text-sm text-blue-700 font-medium mt-1">Approval Rate</div>
                            <div class="text-xs text-blue-600 mt-1">↑ 5% from last quarter</div>
                        </div>
                        
                        <div class="text-center p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border">
                            <div class="text-2xl font-bold text-green-600">2.1</div>
                            <div class="text-sm text-green-700 font-medium mt-1">Avg Review Days</div>
                            <div class="text-xs text-green-600 mt-1">↓ 0.4 days improvement</div>
                        </div>
                        
                        <div class="text-center p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border">
                            <div class="text-2xl font-bold text-purple-600">1.8</div>
                            <div class="text-sm text-purple-700 font-medium mt-1">Avg Revisions</div>
                            <div class="text-xs text-purple-600 mt-1">↓ 0.2 from last quarter</div>
                        </div>
                        
                        <div class="text-center p-4 bg-gradient-to-r from-orange-50 to-red-50 rounded-lg border">
                            <div class="text-2xl font-bold text-orange-600">94%</div>
                            <div class="text-sm text-orange-700 font-medium mt-1">Template Usage</div>
                            <div class="text-xs text-orange-600 mt-1">↑ 12% from last quarter</div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-medium text-gray-900 mb-4">HoT Creation Timeline</h4>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                    <span class="text-sm font-medium text-gray-700">Draft Creation</span>
                                    <span class="text-sm text-gray-900">0.5 days avg</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                    <span class="text-sm font-medium text-gray-700">Internal Review</span>
                                    <span class="text-sm text-gray-900">1.2 days avg</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                    <span class="text-sm font-medium text-gray-700">Legal Review</span>
                                    <span class="text-sm text-gray-900">2.8 days avg</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                    <span class="text-sm font-medium text-gray-700">Final Approval</span>
                                    <span class="text-sm text-gray-900">0.8 days avg</span>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="font-medium text-gray-900 mb-4">Most Common Revision Reasons</h4>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                    <span class="text-sm font-medium text-gray-700">Commercial Terms</span>
                                    <span class="text-sm text-gray-900">42%</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                    <span class="text-sm font-medium text-gray-700">Legal Clauses</span>
                                    <span class="text-sm text-gray-900">28%</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                    <span class="text-sm font-medium text-gray-700">Property Details</span>
                                    <span class="text-sm text-gray-900">18%</span>
                                </div>
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                                    <span class="text-sm font-medium text-gray-700">Timeline Issues</span>
                                    <span class="text-sm text-gray-900">12%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8" id="hot-version-control-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Version Control & Change Tracking</h3>
                        <button class="text-blue-600 hover:text-blue-700 text-sm font-medium">
                            <i class="fa-solid fa-history mr-2"></i>
                            View All Changes
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-medium text-gray-900 mb-4">Recent Version Updates</h4>
                            <div class="space-y-4">
                                <div class="flex items-start space-x-4 p-4 border border-gray-200 rounded-lg">
                                    <div class="bg-blue-100 p-2 rounded-full">
                                        <i class="fa-solid fa-code-branch text-blue-600"></i>
                                    </div>
                                    <div class="flex-1">
                                        <div class="flex items-center justify-between mb-2">
                                            <h5 class="font-medium text-gray-900">Canary Wharf Office v2.1</h5>
                                            <span class="text-xs text-gray-500">2 hours ago</span>
                                        </div>
                                        <p class="text-sm text-gray-600 mb-2">Updated commercial terms and lease duration</p>
                                        <div class="flex items-center space-x-4 text-xs text-gray-500">
                                            <span class="flex items-center">
                                                <i class="fa-solid fa-plus text-green-500 mr-1"></i>
                                                3 additions
                                            </span>
                                            <span class="flex items-center">
                                                <i class="fa-solid fa-minus text-red-500 mr-1"></i>
                                                1 deletion
                                            </span>
                                            <span class="flex items-center">
                                                <i class="fa-solid fa-edit text-blue-500 mr-1"></i>
                                                2 modifications
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-4 p-4 border border-gray-200 rounded-lg">
                                    <div class="bg-green-100 p-2 rounded-full">
                                        <i class="fa-solid fa-code-branch text-green-600"></i>
                                    </div>
                                    <div class="flex-1">
                                        <div class="flex items-center justify-between mb-2">
                                            <h5 class="font-medium text-gray-900">Stratford City Mall v1.4</h5>
                                            <span class="text-xs text-gray-500">6 hours ago</span>
                                        </div>
                                        <p class="text-sm text-gray-600 mb-2">Added new conditions and responsibilities section</p>
                                        <div class="flex items-center space-x-4 text-xs text-gray-500">
                                            <span class="flex items-center">
                                                <i class="fa-solid fa-plus text-green-500 mr-1"></i>
                                                5 additions
                                            </span>
                                            <span class="flex items-center">
                                                <i class="fa-solid fa-edit text-blue-500 mr-1"></i>
                                                1 modification
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="flex items-start space-x-4 p-4 border border-gray-200 rounded-lg">
                                    <div class="bg-purple-100 p-2 rounded-full">
                                        <i class="fa-solid fa-code-branch text-purple-600"></i>
                                    </div>
                                    <div class="flex-1">
                                        <div class="flex items-center justify-between mb-2">
                                            <h5 class="font-medium text-gray-900">Greenwich Peninsula v3.1</h5>
                                            <span class="text-xs text-gray-500">1 day ago</span>
                                        </div>
                                        <p class="text-sm text-gray-600 mb-2">Final version locked after all approvals</p>
                                        <div class="flex items-center space-x-4 text-xs text-gray-500">
                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                                Locked
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="font-medium text-gray-900 mb-4">Change Impact Analysis</h4>
                            <div class="space-y-4">
                                <div class="p-4 bg-red-50 border border-red-200 rounded-lg">
                                    <div class="flex items-center justify-between mb-3">
                                        <h5 class="font-medium text-red-900">High Impact Changes</h5>
                                        <span class="text-sm text-red-600">2 this week</span>
                                    </div>
                                    <div class="space-y-2">
                                        <div class="text-sm text-red-800">
                                            <strong>Canary Wharf:</strong> Rent increase by 15% - Financial impact: +£315k
                                        </div>
                                        <div class="text-sm text-red-800">
                                            <strong>Bermondsey:</strong> Extended lease term by 2 years - Risk level increased
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                                    <div class="flex items-center justify-between mb-3">
                                        <h5 class="font-medium text-yellow-900">Medium Impact Changes</h5>
                                        <span class="text-sm text-yellow-600">5 this week</span>
                                    </div>
                                    <div class="space-y-2">
                                        <div class="text-sm text-yellow-800">
                                            <strong>Stratford:</strong> Modified break clauses
                                        </div>
                                        <div class="text-sm text-yellow-800">
                                            <strong>Greenwich:</strong> Updated maintenance responsibilities
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="p-4 bg-green-50 border border-green-200 rounded-lg">
                                    <div class="flex items-center justify-between mb-3">
                                        <h5 class="font-medium text-green-900">Low Impact Changes</h5>
                                        <span class="text-sm text-green-600">12 this week</span>
                                    </div>
                                    <div class="text-sm text-green-800">
                                        Minor wording adjustments, formatting updates, and administrative corrections
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8" id="hot-collaboration-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Team Collaboration</h3>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">
                                <i class="fa-solid fa-users mr-2"></i>
                                Manage Team
                            </button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-medium text-gray-900 mb-4">Active Collaborators</h4>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between p-3 border border-gray-200 rounded-lg">
                                    <div class="flex items-center space-x-3">
                                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="User" class="w-10 h-10 rounded-full">
                                        <div>
                                            <p class="font-medium text-gray-900">Sarah Chen</p>
                                            <p class="text-sm text-gray-500">Legal Counsel</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-sm font-medium text-gray-900">3 HoTs</div>
                                        <div class="text-xs text-green-600">Online</div>
                                    </div>
                                </div>
                                
                                <div class="flex items-center justify-between p-3 border border-gray-200 rounded-lg">
                                    <div class="flex items-center space-x-3">
                                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg" alt="User" class="w-10 h-10 rounded-full">
                                        <div>
                                            <p class="font-medium text-gray-900">Mike Rodriguez</p>
                                            <p class="text-sm text-gray-500">Deal Architect</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-sm font-medium text-gray-900">2 HoTs</div>
                                        <div class="text-xs text-green-600">Online</div>
                                    </div>
                                </div>
                                
                                <div class="flex items-center justify-between p-3 border border-gray-200 rounded-lg">
                                    <div class="flex items-center space-x-3">
                                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg" alt="User" class="w-10 h-10 rounded-full">
                                        <div>
                                            <p class="font-medium text-gray-900">David Kim</p>
                                            <p class="text-sm text-gray-500">Executive Approver</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-sm font-medium text-gray-900">1 HoT</div>
                                        <div class="text-xs text-gray-400">Away</div>
                                    </div>
                                </div>
                                
                                <div class="flex items-center justify-between p-3 border border-gray-200 rounded-lg">
                                    <div class="flex items-center space-x-3">
                                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg" alt="User" class="w-10 h-10 rounded-full">
                                        <div>
                                            <p class="font-medium text-gray-900">Emma Thompson</p>
                                            <p class="text-sm text-gray-500">Finance Reviewer</p>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-sm font-medium text-gray-900">4 HoTs</div>
                                        <div class="text-xs text-green-600">Online</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="font-medium text-gray-900 mb-4">Recent Comments & Feedback</h4>
                            <div class="space-y-4">
                                <div class="p-4 bg-gray-50 rounded-lg">
                                    <div class="flex items-start space-x-3">
                                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="User" class="w-8 h-8 rounded-full">
                                        <div class="flex-1">
                                            <div class="flex items-center space-x-2 mb-1">
                                                <span class="font-medium text-gray-900">Sarah Chen</span>
                                                <span class="text-xs text-gray-500">2 hours ago</span>
                                            </div>
                                            <p class="text-sm text-gray-600">The commercial terms in section 3.2 need revision. The rent escalation clause should be capped at 3% annually.</p>
                                            <div class="text-xs text-blue-600 mt-1">Canary Wharf Office - v2.1</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="p-4 bg-gray-50 rounded-lg">
                                    <div class="flex items-start space-x-3">
                                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg" alt="User" class="w-8 h-8 rounded-full">
                                        <div class="flex-1">
                                            <div class="flex items-center space-x-2 mb-1">
                                                <span class="font-medium text-gray-900">Emma Thompson</span>
                                                <span class="text-xs text-gray-500">4 hours ago</span>
                                            </div>
                                            <p class="text-sm text-gray-600">Financial projections look good. Approved from finance perspective. Ready for final executive review.</p>
                                            <div class="text-xs text-blue-600 mt-1">Stratford City Mall - v1.4</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="p-4 bg-gray-50 rounded-lg">
                                    <div class="flex items-start space-x-3">
                                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg" alt="User" class="w-8 h-8 rounded-full">
                                        <div class="flex-1">
                                            <div class="flex items-center space-x-2 mb-1">
                                                <span class="font-medium text-gray-900">Mike Rodriguez</span>
                                                <span class="text-xs text-gray-500">6 hours ago</span>
                                            </div>
                                            <p class="text-sm text-gray-600">Updated the property specifications based on the latest survey. Please review the new floor plans attachment.</p>
                                            <div class="text-xs text-blue-600 mt-1">Kings Cross Development - v1.0</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8" id="hot-risk-assessment-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Risk Assessment & Compliance</h3>
                        <button class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-medium">
                            <i class="fa-solid fa-shield-alt mr-2"></i>
                            Risk Report
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <div class="text-center p-4 bg-red-50 rounded-lg border border-red-200">
                            <div class="text-3xl font-bold text-red-600">2</div>
                            <div class="text-sm text-red-700 font-medium mt-1">High Risk HoTs</div>
                            <div class="text-xs text-red-600 mt-1">Require immediate attention</div>
                        </div>
                        
                        <div class="text-center p-4 bg-yellow-50 rounded-lg border border-yellow-200">
                            <div class="text-3xl font-bold text-yellow-600">5</div>
                            <div class="text-sm text-yellow-700 font-medium mt-1">Medium Risk</div>
                            <div class="text-xs text-yellow-600 mt-1">Monitor closely</div>
                        </div>
                        
                        <div class="text-center p-4 bg-green-50 rounded-lg border border-green-200">
                            <div class="text-3xl font-bold text-green-600">11</div>
                            <div class="text-sm text-green-700 font-medium mt-1">Low Risk</div>
                            <div class="text-xs text-green-600 mt-1">Standard compliance</div>
                        </div>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="flex items-start space-x-4 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg">
                            <div class="bg-red-100 p-2 rounded-full">
                                <i class="fa-solid fa-exclamation-triangle text-red-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-red-900">Critical Risk - Bermondsey Industrial</h4>
                                <p class="text-sm text-red-700 mt-1">Extended lease term without break clauses may impact portfolio flexibility</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-red-600 font-medium">FINANCIAL IMPACT: £280K</span>
                                    <button class="text-xs text-red-700 hover:text-red-900 font-medium" data-action="mitigate-risk" data-item-type="risk">Mitigate Risk</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg">
                            <div class="bg-red-100 p-2 rounded-full">
                                <i class="fa-solid fa-exclamation-triangle text-red-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-red-900">Regulatory Risk - Kings Cross Development</h4>
                                <p class="text-sm text-red-700 mt-1">Planning permission conditions not fully addressed in HoT terms</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-red-600 font-medium">COMPLIANCE RISK</span>
                                    <button class="text-xs text-red-700 hover:text-red-900 font-medium" data-action="add-comment" data-item-type="risk">Address Issues</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4 p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg">
                            <div class="bg-yellow-100 p-2 rounded-full">
                                <i class="fa-solid fa-clock text-yellow-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-yellow-900">Timeline Risk - Canary Wharf Office</h4>
                                <p class="text-sm text-yellow-700 mt-1">Aggressive completion timeline may require additional resources</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-yellow-600 font-medium">MEDIUM RISK</span>
                                    <button class="text-xs text-yellow-700 hover:text-yellow-900 font-medium" data-action="review-timeline" data-item-id="hot-001" data-item-name="HoT">Review Timeline</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8" id="hot-recent-activity-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Recent HoT Activity</h3>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">All</button>
                            <button class="px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded-lg">Today</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Week</button>
                        </div>
                    </div>
                    
                    <div class="space-y-6">
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="User" class="w-10 h-10 rounded-full">
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-medium text-gray-900">Sarah Chen</span>
                                    <span class="text-gray-500">created new version</span>
                                    <span class="text-blue-600 font-medium">v2.1</span>
                                    <span class="text-gray-500">for</span>
                                    <span class="text-blue-600 font-medium">Canary Wharf Office</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Updated commercial terms and added new conditions • 2 hours ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg" alt="User" class="w-10 h-10 rounded-full">
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-medium text-gray-900">Emma Thompson</span>
                                    <span class="text-gray-500">approved</span>
                                    <span class="text-green-600 font-medium">Stratford City Mall HoT</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Finance review completed successfully • 4 hours ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg" alt="User" class="w-10 h-10 rounded-full">
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-medium text-gray-900">Mike Rodriguez</span>
                                    <span class="text-gray-500">requested review for</span>
                                    <span class="text-blue-600 font-medium">Greenwich Peninsula HoT</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Ready for executive approval • 6 hours ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg" alt="User" class="w-10 h-10 rounded-full">
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-medium text-gray-900">David Kim</span>
                                    <span class="text-gray-500">rejected</span>
                                    <span class="text-red-600 font-medium">Bermondsey Industrial HoT</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Requires revision to lease terms and conditions • 1 day ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-2.jpg" alt="User" class="w-10 h-10 rounded-full">
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-medium text-gray-900">Alex Johnson</span>
                                    <span class="text-gray-500">started new HoT from template</span>
                                    <span class="text-purple-600 font-medium">Standard Office Lease</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">New deal: Tower Bridge Commercial Space • 1 day ago</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
</div>
<!-- END HEADS OF TERMS PAGE -->


            <!-- DOCUMENT MANAGEMENT PAGE -->
<div id="document-management-page" class="page-content hidden">
<section class="mb-8" id="document-stats-section">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Total Documents</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">847</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-green-600 text-sm font-medium">+23</span>
                                    <span class="text-gray-500 text-sm ml-2">this month</span>
                                </div>
                            </div>
                            <div class="bg-blue-100 p-3 rounded-full">
                                <i class="fa-solid fa-folder text-blue-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Pending Review</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">34</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-red-600 text-sm font-medium">+8</span>
                                    <span class="text-gray-500 text-sm ml-2">this week</span>
                                </div>
                            </div>
                            <div class="bg-orange-100 p-3 rounded-full">
                                <i class="fa-solid fa-clock text-orange-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Awaiting Signature</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">12</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-yellow-600 text-sm font-medium">-3</span>
                                    <span class="text-gray-500 text-sm ml-2">this week</span>
                                </div>
                            </div>
                            <div class="bg-yellow-100 p-3 rounded-full">
                                <i class="fa-solid fa-signature text-yellow-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Completed</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">156</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-green-600 text-sm font-medium">+18</span>
                                    <span class="text-gray-500 text-sm ml-2">this month</span>
                                </div>
                            </div>
                            <div class="bg-green-100 p-3 rounded-full">
                                <i class="fa-solid fa-check-circle text-green-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Storage Used</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">2.4GB</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-blue-600 text-sm font-medium">of 10GB</span>
                                </div>
                            </div>
                            <div class="bg-purple-100 p-3 rounded-full">
                                <i class="fa-solid fa-database text-purple-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8" id="upload-area-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-8">
                    <div class="text-center">
                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-12 hover:border-blue-400 transition-colors">
                            <div class="mx-auto w-24 h-24 bg-blue-50 rounded-full flex items-center justify-center mb-4">
                                <i class="fa-solid fa-cloud-upload-alt text-blue-600 text-3xl"></i>
                            </div>
                            <h3 class="text-lg font-semibold text-gray-900 mb-2">Upload Documents</h3>
                            <p class="text-gray-500 mb-4">Drag and drop files here or click to browse</p>
                            <div class="flex justify-center space-x-4">
                                <button class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-medium">
                                    <i class="fa-solid fa-plus mr-2"></i>
                                    Choose Files
                                </button>
                                <button class="border border-gray-300 hover:bg-gray-50 text-gray-700 px-6 py-2 rounded-lg font-medium">
                                    <i class="fa-solid fa-folder mr-2"></i>
                                    Browse Folders
                                </button>
                            </div>
                            <p class="text-xs text-gray-400 mt-4">Supported formats: PDF, DOC, DOCX, XLS, XLSX, PPT, PPTX (Max 50MB)</p>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8" id="document-filters-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Filter & Search</h3>
                        <button class="text-sm text-blue-600 hover:text-blue-700">Clear All Filters</button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4">
                        <div class="relative">
                            <select class="w-full appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2 pr-8 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option>All Deals</option>
                                <option>Canary Wharf Office</option>
                                <option>Shoreditch Retail</option>
                                <option>Kings Cross Development</option>
                                <option>Bermondsey Industrial</option>
                            </select>
                            <i class="fa-solid fa-chevron-down absolute right-3 top-3 text-gray-400 pointer-events-none"></i>
                        </div>
                        
                        <div class="relative">
                            <select class="w-full appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2 pr-8 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option>All Document Types</option>
                                <option>HoT</option>
                                <option>Contract</option>
                                <option>Side Letter</option>
                                <option>Schedule</option>
                                <option>Evidence</option>
                            </select>
                            <i class="fa-solid fa-chevron-down absolute right-3 top-3 text-gray-400 pointer-events-none"></i>
                        </div>
                        
                        <div class="relative">
                            <select class="w-full appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2 pr-8 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option>All Statuses</option>
                                <option>Draft</option>
                                <option>Under Review</option>
                                <option>Pending Approval</option>
                                <option>Approved</option>
                                <option>Signed</option>
                                <option>Rejected</option>
                            </select>
                            <i class="fa-solid fa-chevron-down absolute right-3 top-3 text-gray-400 pointer-events-none"></i>
                        </div>
                        
                        <div class="relative">
                            <select class="w-full appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2 pr-8 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option>All Owners</option>
                                <option>Sarah Chen</option>
                                <option>Mike Rodriguez</option>
                                <option>David Kim</option>
                                <option>Emma Thompson</option>
                            </select>
                            <i class="fa-solid fa-chevron-down absolute right-3 top-3 text-gray-400 pointer-events-none"></i>
                        </div>
                        
                        <div class="relative">
                            <input type="date" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        
                        <div class="flex space-x-2">
                            <button class="flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium">
                                <i class="fa-solid fa-search mr-2"></i>
                                Search
                            </button>
                            <button class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50">
                                <i class="fa-solid fa-filter"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8" id="document-categories-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Document Categories</h3>
                        <button class="text-sm text-blue-600 hover:text-blue-700" data-action="manage-categories">Manage Categories</button>
                    </div>
                    
                    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
                        <div class="text-center p-4 bg-red-50 rounded-lg border-2 border-red-200 hover:bg-red-100 cursor-pointer transition-colors">
                            <div class="bg-red-100 p-3 rounded-full mx-auto mb-3 w-fit">
                                <i class="fa-solid fa-file-contract text-red-600 text-xl"></i>
                            </div>
                            <div class="text-lg font-bold text-red-600">45</div>
                            <div class="text-sm text-red-700 font-medium">Heads of Terms</div>
                        </div>
                        
                        <div class="text-center p-4 bg-blue-50 rounded-lg border-2 border-blue-200 hover:bg-blue-100 cursor-pointer transition-colors">
                            <div class="bg-blue-100 p-3 rounded-full mx-auto mb-3 w-fit">
                                <i class="fa-solid fa-file-signature text-blue-600 text-xl"></i>
                            </div>
                            <div class="text-lg font-bold text-blue-600">28</div>
                            <div class="text-sm text-blue-700 font-medium">Contracts</div>
                        </div>
                        
                        <div class="text-center p-4 bg-green-50 rounded-lg border-2 border-green-200 hover:bg-green-100 cursor-pointer transition-colors">
                            <div class="bg-green-100 p-3 rounded-full mx-auto mb-3 w-fit">
                                <i class="fa-solid fa-file-alt text-green-600 text-xl"></i>
                            </div>
                            <div class="text-lg font-bold text-green-600">67</div>
                            <div class="text-sm text-green-700 font-medium">Side Letters</div>
                        </div>
                        
                        <div class="text-center p-4 bg-purple-50 rounded-lg border-2 border-purple-200 hover:bg-purple-100 cursor-pointer transition-colors">
                            <div class="bg-purple-100 p-3 rounded-full mx-auto mb-3 w-fit">
                                <i class="fa-solid fa-calendar-alt text-purple-600 text-xl"></i>
                            </div>
                            <div class="text-lg font-bold text-purple-600">89</div>
                            <div class="text-sm text-purple-700 font-medium">Schedules</div>
                        </div>
                        
                        <div class="text-center p-4 bg-orange-50 rounded-lg border-2 border-orange-200 hover:bg-orange-100 cursor-pointer transition-colors">
                            <div class="bg-orange-100 p-3 rounded-full mx-auto mb-3 w-fit">
                                <i class="fa-solid fa-folder-open text-orange-600 text-xl"></i>
                            </div>
                            <div class="text-lg font-bold text-orange-600">234</div>
                            <div class="text-sm text-orange-700 font-medium">Evidence</div>
                        </div>
                        
                        <div class="text-center p-4 bg-gray-50 rounded-lg border-2 border-gray-200 hover:bg-gray-100 cursor-pointer transition-colors">
                            <div class="bg-gray-100 p-3 rounded-full mx-auto mb-3 w-fit">
                                <i class="fa-solid fa-file text-gray-600 text-xl"></i>
                            </div>
                            <div class="text-lg font-bold text-gray-600">384</div>
                            <div class="text-sm text-gray-700 font-medium">Other</div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8" id="recent-documents-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Recent Documents</h3>
                        <div class="flex items-center space-x-3">
                            <div class="flex items-center space-x-1 bg-gray-100 rounded-lg p-1">
                                <button class="px-3 py-1 text-sm bg-white rounded-md shadow-sm">List</button>
                                <button class="px-3 py-1 text-sm text-gray-600 hover:text-gray-900">Grid</button>
                            </div>
                            <button class="text-sm text-blue-600 hover:text-blue-700" data-view-all="deals-overview">View All</button>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="border-b border-gray-200">
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Document</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Deal</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Type</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Version</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Status</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Owner</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Modified</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                                <tr class="hover:bg-gray-50">
                                    <td class="py-4 px-4">
                                        <div class="flex items-center space-x-3">
                                            <div class="bg-red-100 p-2 rounded">
                                                <i class="fa-solid fa-file-pdf text-red-600"></i>
                                            </div>
                                            <div>
                                                <div class="font-medium text-gray-900">HoT_v2.1_CanaryWharf.pdf</div>
                                                <div class="text-sm text-gray-500">2.3 MB</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">Canary Wharf Office</div>
                                        <div class="text-sm text-gray-500">DL_CW_2024_001</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                            HoT
                                        </span>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">v2.1</div>
                                        <div class="text-sm text-gray-500">Latest</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                            Under Review
                                        </span>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="Owner" class="w-8 h-8 rounded-full mr-2">
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Sarah Chen</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">2 hours ago</div>
                                        <div class="text-sm text-gray-500">Nov 12, 2024</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center space-x-2">
                                            <button class="p-1 text-blue-600 hover:bg-blue-50 rounded">
                                                <i class="fa-solid fa-eye"></i>
                                            </button>
                                            <button class="p-1 text-gray-600 hover:bg-gray-50 rounded">
                                                <i class="fa-solid fa-download"></i>
                                            </button>
                                            <button class="p-1 text-gray-600 hover:bg-gray-50 rounded">
                                                <i class="fa-solid fa-share-alt"></i>
                                            </button>
                                            <button class="p-1 text-gray-600 hover:bg-gray-50 rounded">
                                                <i class="fa-solid fa-ellipsis-v"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                
                                <tr class="hover:bg-gray-50">
                                    <td class="py-4 px-4">
                                        <div class="flex items-center space-x-3">
                                            <div class="bg-blue-100 p-2 rounded">
                                                <i class="fa-solid fa-file-word text-blue-600"></i>
                                            </div>
                                            <div>
                                                <div class="font-medium text-gray-900">Contract_Shoreditch_v1.2.docx</div>
                                                <div class="text-sm text-gray-500">1.8 MB</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">Shoreditch Retail Space</div>
                                        <div class="text-sm text-gray-500">DL_SH_2024_002</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                            Contract
                                        </span>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">v1.2</div>
                                        <div class="text-sm text-gray-500">Latest</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                            Approved
                                        </span>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg" alt="Owner" class="w-8 h-8 rounded-full mr-2">
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Mike Rodriguez</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">4 hours ago</div>
                                        <div class="text-sm text-gray-500">Nov 12, 2024</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center space-x-2">
                                            <button class="p-1 text-blue-600 hover:bg-blue-50 rounded">
                                                <i class="fa-solid fa-eye"></i>
                                            </button>
                                            <button class="p-1 text-gray-600 hover:bg-gray-50 rounded">
                                                <i class="fa-solid fa-download"></i>
                                            </button>
                                            <button class="p-1 text-gray-600 hover:bg-gray-50 rounded">
                                                <i class="fa-solid fa-share-alt"></i>
                                            </button>
                                            <button class="p-1 text-gray-600 hover:bg-gray-50 rounded">
                                                <i class="fa-solid fa-ellipsis-v"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                
                                <tr class="hover:bg-gray-50">
                                    <td class="py-4 px-4">
                                        <div class="flex items-center space-x-3">
                                            <div class="bg-green-100 p-2 rounded">
                                                <i class="fa-solid fa-file-excel text-green-600"></i>
                                            </div>
                                            <div>
                                                <div class="font-medium text-gray-900">Financial_Model_KingsCross.xlsx</div>
                                                <div class="text-sm text-gray-500">4.2 MB</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">Kings Cross Development</div>
                                        <div class="text-sm text-gray-500">DL_KC_2024_003</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                                            Schedule
                                        </span>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">v1.0</div>
                                        <div class="text-sm text-gray-500">Latest</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                            Pending Review
                                        </span>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg" alt="Owner" class="w-8 h-8 rounded-full mr-2">
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">David Kim</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">6 hours ago</div>
                                        <div class="text-sm text-gray-500">Nov 12, 2024</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center space-x-2">
                                            <button class="p-1 text-blue-600 hover:bg-blue-50 rounded">
                                                <i class="fa-solid fa-eye"></i>
                                            </button>
                                            <button class="p-1 text-gray-600 hover:bg-gray-50 rounded">
                                                <i class="fa-solid fa-download"></i>
                                            </button>
                                            <button class="p-1 text-gray-600 hover:bg-gray-50 rounded">
                                                <i class="fa-solid fa-share-alt"></i>
                                            </button>
                                            <button class="p-1 text-gray-600 hover:bg-gray-50 rounded">
                                                <i class="fa-solid fa-ellipsis-v"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                
                                <tr class="hover:bg-gray-50">
                                    <td class="py-4 px-4">
                                        <div class="flex items-center space-x-3">
                                            <div class="bg-red-100 p-2 rounded">
                                                <i class="fa-solid fa-file-pdf text-red-600"></i>
                                            </div>
                                            <div>
                                                <div class="font-medium text-gray-900">Property_Survey_Bermondsey.pdf</div>
                                                <div class="text-sm text-gray-500">8.7 MB</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">Bermondsey Industrial Unit</div>
                                        <div class="text-sm text-gray-500">DL_BI_2024_004</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                            Evidence
                                        </span>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">v1.0</div>
                                        <div class="text-sm text-gray-500">Latest</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                            Complete
                                        </span>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg" alt="Owner" class="w-8 h-8 rounded-full mr-2">
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Emma Thompson</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">8 hours ago</div>
                                        <div class="text-sm text-gray-500">Nov 12, 2024</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center space-x-2">
                                            <button class="p-1 text-blue-600 hover:bg-blue-50 rounded">
                                                <i class="fa-solid fa-eye"></i>
                                            </button>
                                            <button class="p-1 text-gray-600 hover:bg-gray-50 rounded">
                                                <i class="fa-solid fa-download"></i>
                                            </button>
                                            <button class="p-1 text-gray-600 hover:bg-gray-50 rounded">
                                                <i class="fa-solid fa-share-alt"></i>
                                            </button>
                                            <button class="p-1 text-gray-600 hover:bg-gray-50 rounded">
                                                <i class="fa-solid fa-ellipsis-v"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <section class="mb-8" id="document-versions-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Version Control & History</h3>
                        <button class="text-sm text-blue-600 hover:text-blue-700">View All Versions</button>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <div class="border border-gray-200 rounded-lg p-4">
                                <div class="flex items-start justify-between mb-3">
                                    <div>
                                        <h4 class="font-medium text-gray-900">HoT_CanaryWharf.pdf</h4>
                                        <p class="text-sm text-gray-500">Canary Wharf Office Deal</p>
                                    </div>
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Active
                                    </span>
                                </div>
                                
                                <div class="space-y-3">
                                    <div class="flex items-center space-x-3 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                                        <div class="w-2 h-2 bg-blue-600 rounded-full"></div>
                                        <div class="flex-1">
                                            <div class="flex items-center justify-between">
                                                <span class="font-medium text-blue-900">v2.1</span>
                                                <span class="text-xs text-blue-600">Current</span>
                                            </div>
                                            <p class="text-sm text-blue-700">Updated by Sarah Chen • 2 hours ago</p>
                                        </div>
                                        <button class="text-blue-600 hover:text-blue-800">
                                            <i class="fa-solid fa-download"></i>
                                        </button>
                                    </div>
                                    
                                    <div class="flex items-center space-x-3 p-3 border border-gray-200 rounded-lg">
                                        <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                                        <div class="flex-1">
                                            <div class="flex items-center justify-between">
                                                <span class="font-medium text-gray-900">v2.0</span>
                                                <span class="text-xs text-gray-500">Previous</span>
                                            </div>
                                            <p class="text-sm text-gray-500">Updated by Mike Rodriguez • 1 day ago</p>
                                        </div>
                                        <button class="text-gray-600 hover:text-gray-800">
                                            <i class="fa-solid fa-download"></i>
                                        </button>
                                    </div>
                                    
                                    <div class="flex items-center space-x-3 p-3 border border-gray-200 rounded-lg">
                                        <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                                        <div class="flex-1">
                                            <div class="flex items-center justify-between">
                                                <span class="font-medium text-gray-900">v1.9</span>
                                                <span class="text-xs text-gray-500">Archived</span>
                                            </div>
                                            <p class="text-sm text-gray-500">Updated by David Kim • 3 days ago</p>
                                        </div>
                                        <button class="text-gray-600 hover:text-gray-800">
                                            <i class="fa-solid fa-download"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="border border-gray-200 rounded-lg p-4">
                                <div class="flex items-start justify-between mb-3">
                                    <div>
                                        <h4 class="font-medium text-gray-900">Contract_Shoreditch.docx</h4>
                                        <p class="text-sm text-gray-500">Shoreditch Retail Space</p>
                                    </div>
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                        Under Review
                                    </span>
                                </div>
                                
                                <div class="space-y-3">
                                    <div class="flex items-center space-x-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
                                        <div class="w-2 h-2 bg-yellow-600 rounded-full"></div>
                                        <div class="flex-1">
                                            <div class="flex items-center justify-between">
                                                <span class="font-medium text-yellow-900">v1.2</span>
                                                <span class="text-xs text-yellow-600">Under Review</span>
                                            </div>
                                            <p class="text-sm text-yellow-700">Updated by Emma Thompson • 4 hours ago</p>
                                        </div>
                                        <button class="text-yellow-600 hover:text-yellow-800">
                                            <i class="fa-solid fa-download"></i>
                                        </button>
                                    </div>
                                    
                                    <div class="flex items-center space-x-3 p-3 border border-gray-200 rounded-lg">
                                        <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                                        <div class="flex-1">
                                            <div class="flex items-center justify-between">
                                                <span class="font-medium text-gray-900">v1.1</span>
                                                <span class="text-xs text-gray-500">Previous</span>
                                            </div>
                                            <p class="text-sm text-gray-500">Updated by Sarah Chen • 2 days ago</p>
                                        </div>
                                        <button class="text-gray-600 hover:text-gray-800">
                                            <i class="fa-solid fa-download"></i>
                                        </button>
                                    </div>
                                    
                                    <div class="flex items-center space-x-3 p-3 border border-gray-200 rounded-lg">
                                        <div class="w-2 h-2 bg-gray-400 rounded-full"></div>
                                        <div class="flex-1">
                                            <div class="flex items-center justify-between">
                                                <span class="font-medium text-gray-900">v1.0</span>
                                                <span class="text-xs text-gray-500">Initial</span>
                                            </div>
                                            <p class="text-sm text-gray-500">Created by Mike Rodriguez • 1 week ago</p>
                                        </div>
                                        <button class="text-gray-600 hover:text-gray-800">
                                            <i class="fa-solid fa-download"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8" id="signature-tracking-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Signature Tracking & Status</h3>
                        <button class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-medium">
                            <i class="fa-solid fa-signature mr-2"></i>
                            Send for Signature
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <div class="border border-gray-200 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-4">
                                    <h4 class="font-medium text-gray-900">Shoreditch Retail Contract</h4>
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                        2/3 Signed
                                    </span>
                                </div>
                                
                                <div class="space-y-3">
                                    <div class="flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg">
                                        <div class="flex items-center space-x-3">
                                            <i class="fa-solid fa-check-circle text-green-600"></i>
                                            <div>
                                                <p class="font-medium text-green-900">Landlord Representative</p>
                                                <p class="text-sm text-green-700">John Smith</p>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <p class="text-xs text-green-600">Signed</p>
                                            <p class="text-xs text-green-500">Nov 10, 2024</p>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg">
                                        <div class="flex items-center space-x-3">
                                            <i class="fa-solid fa-check-circle text-green-600"></i>
                                            <div>
                                                <p class="font-medium text-green-900">Tenant Representative</p>
                                                <p class="text-sm text-green-700">Maria Garcia</p>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <p class="text-xs text-green-600">Signed</p>
                                            <p class="text-xs text-green-500">Nov 11, 2024</p>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center justify-between p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
                                        <div class="flex items-center space-x-3">
                                            <i class="fa-solid fa-clock text-yellow-600"></i>
                                            <div>
                                                <p class="font-medium text-yellow-900">Legal Counsel</p>
                                                <p class="text-sm text-yellow-700">Robert Johnson</p>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <p class="text-xs text-yellow-600">Pending</p>
                                            <p class="text-xs text-yellow-500">Due: Nov 15</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-4 pt-4 border-t border-gray-200">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">Progress</span>
                                        <span class="text-sm font-medium text-gray-900">67%</span>
                                    </div>
                                    <div class="mt-2 w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-yellow-500 h-2 rounded-full" style="width: 67%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="border border-gray-200 rounded-lg p-4">
                                <div class="flex items-center justify-between mb-4">
                                    <h4 class="font-medium text-gray-900">Canary Wharf HoT</h4>
                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Complete
                                    </span>
                                </div>
                                
                                <div class="space-y-3">
                                    <div class="flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg">
                                        <div class="flex items-center space-x-3">
                                            <i class="fa-solid fa-check-circle text-green-600"></i>
                                            <div>
                                                <p class="font-medium text-green-900">Property Owner</p>
                                                <p class="text-sm text-green-700">Canary Wharf Group</p>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <p class="text-xs text-green-600">Signed</p>
                                            <p class="text-xs text-green-500">Nov 8, 2024</p>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg">
                                        <div class="flex items-center space-x-3">
                                            <i class="fa-solid fa-check-circle text-green-600"></i>
                                            <div>
                                                <p class="font-medium text-green-900">Tenant</p>
                                                <p class="text-sm text-green-700">TechCorp Ltd</p>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <p class="text-xs text-green-600">Signed</p>
                                            <p class="text-xs text-green-500">Nov 9, 2024</p>
                                        </div>
                                    </div>
                                    
                                    <div class="flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg">
                                        <div class="flex items-center space-x-3">
                                            <i class="fa-solid fa-check-circle text-green-600"></i>
                                            <div>
                                                <p class="font-medium text-green-900">Legal Advisor</p>
                                                <p class="text-sm text-green-700">Sarah Chen</p>
                                            </div>
                                        </div>
                                        <div class="text-right">
                                            <p class="text-xs text-green-600">Signed</p>
                                            <p class="text-xs text-green-500">Nov 9, 2024</p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mt-4 pt-4 border-t border-gray-200">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">Progress</span>
                                        <span class="text-sm font-medium text-green-600">100%</span>
                                    </div>
                                    <div class="mt-2 w-full bg-gray-200 rounded-full h-2">
                                        <div class="bg-green-500 h-2 rounded-full" style="width: 100%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8" id="document-analytics-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Document Analytics & Insights</h3>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Month</button>
                            <button class="px-3 py-1 text-sm bg-blue-600 text-white rounded-lg">This Quarter</button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-medium text-gray-900 mb-4">Document Activity Trend</h4>
                            <div id="document-activity-chart" class="h-64"></div>
                        </div>
                        
                        <div>
                            <h4 class="font-medium text-gray-900 mb-4">Document Type Distribution</h4>
                            <div id="document-type-chart" class="h-64"></div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8" id="document-permissions-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Document Permissions & Access Control</h3>
                        <button class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-medium">
                            <i class="fa-solid fa-shield-alt mr-2"></i>
                            Manage Permissions
                        </button>
                    </div>
                    
                    <div class="space-y-6">
                        <div class="border border-gray-200 rounded-lg p-4">
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <h4 class="font-medium text-gray-900">HoT_v2.1_CanaryWharf.pdf</h4>
                                    <p class="text-sm text-gray-500">Canary Wharf Office Deal</p>
                                </div>
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                    Restricted
                                </span>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="p-3 bg-green-50 border border-green-200 rounded-lg">
                                    <h5 class="font-medium text-green-900 mb-2">Full Access</h5>
                                    <div class="space-y-1">
                                        <div class="flex items-center space-x-2">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="User" class="w-6 h-6 rounded-full">
                                            <span class="text-sm text-green-700">Sarah Chen</span>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-2.jpg" alt="User" class="w-6 h-6 rounded-full">
                                            <span class="text-sm text-green-700">Alex Johnson</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="p-3 bg-blue-50 border border-blue-200 rounded-lg">
                                    <h5 class="font-medium text-blue-900 mb-2">View & Comment</h5>
                                    <div class="space-y-1">
                                        <div class="flex items-center space-x-2">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg" alt="User" class="w-6 h-6 rounded-full">
                                            <span class="text-sm text-blue-700">Mike Rodriguez</span>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg" alt="User" class="w-6 h-6 rounded-full">
                                            <span class="text-sm text-blue-700">David Kim</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="p-3 bg-gray-50 border border-gray-200 rounded-lg">
                                    <h5 class="font-medium text-gray-900 mb-2">View Only</h5>
                                    <div class="space-y-1">
                                        <div class="flex items-center space-x-2">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg" alt="User" class="w-6 h-6 rounded-full">
                                            <span class="text-sm text-gray-700">Emma Thompson</span>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <div class="w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center">
                                                <span class="text-xs text-gray-600">+3</span>
                                            </div>
                                            <span class="text-sm text-gray-700">3 more users</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="border border-gray-200 rounded-lg p-4">
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <h4 class="font-medium text-gray-900">Contract_Shoreditch_v1.2.docx</h4>
                                    <p class="text-sm text-gray-500">Shoreditch Retail Space</p>
                                </div>
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                    Open Access
                                </span>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="p-3 bg-green-50 border border-green-200 rounded-lg">
                                    <h5 class="font-medium text-green-900 mb-2">Full Access</h5>
                                    <div class="space-y-1">
                                        <div class="flex items-center space-x-2">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg" alt="User" class="w-6 h-6 rounded-full">
                                            <span class="text-sm text-green-700">Mike Rodriguez</span>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg" alt="User" class="w-6 h-6 rounded-full">
                                            <span class="text-sm text-green-700">Emma Thompson</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="p-3 bg-blue-50 border border-blue-200 rounded-lg">
                                    <h5 class="font-medium text-blue-900 mb-2">View & Comment</h5>
                                    <div class="space-y-1">
                                        <div class="flex items-center space-x-2">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="User" class="w-6 h-6 rounded-full">
                                            <span class="text-sm text-blue-700">Sarah Chen</span>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg" alt="User" class="w-6 h-6 rounded-full">
                                            <span class="text-sm text-blue-700">David Kim</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="p-3 bg-gray-50 border border-gray-200 rounded-lg">
                                    <h5 class="font-medium text-gray-900 mb-2">View Only</h5>
                                    <div class="space-y-1">
                                        <div class="flex items-center space-x-2">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-2.jpg" alt="User" class="w-6 h-6 rounded-full">
                                            <span class="text-sm text-gray-700">Alex Johnson</span>
                                        </div>
                                        <div class="flex items-center space-x-2">
                                            <div class="w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center">
                                                <span class="text-xs text-gray-600">+5</span>
                                            </div>
                                            <span class="text-sm text-gray-700">5 more users</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-8" id="document-activity-log-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Document Activity Log</h3>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-1 text-sm bg-blue-600 text-white rounded-lg">All Activity</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Uploads</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Reviews</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Signatures</button>
                        </div>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="flex items-start space-x-4 p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <div class="flex-shrink-0">
                                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                    <i class="fa-solid fa-upload text-blue-600"></i>
                                </div>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="User" class="w-6 h-6 rounded-full">
                                    <span class="font-medium text-gray-900">Sarah Chen</span>
                                    <span class="text-gray-500">uploaded a new version of</span>
                                    <span class="text-blue-600 font-medium">HoT_v2.1_CanaryWharf.pdf</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Canary Wharf Office Deal • 2 hours ago</p>
                                <div class="flex items-center space-x-4 mt-2">
                                    <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full">Version 2.1</span>
                                    <button class="text-xs text-blue-600 hover:text-blue-800" data-view-all="activity-log" data-action="view-details" data-item-type="notification" data-item-id="notif-001" data-item-name="Changes">View Changes</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4 p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <div class="flex-shrink-0">
                                <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                                    <i class="fa-solid fa-check-circle text-green-600"></i>
                                </div>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg" alt="User" class="w-6 h-6 rounded-full">
                                    <span class="font-medium text-gray-900">Mike Rodriguez</span>
                                    <span class="text-gray-500">approved</span>
                                    <span class="text-green-600 font-medium">Contract_Shoreditch_v1.2.docx</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Shoreditch Retail Space • 4 hours ago</p>
                                <div class="flex items-center space-x-4 mt-2">
                                    <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">Approved</span>
                                    <button class="text-xs text-green-600 hover:text-green-800" data-action="view-approval" data-item-id="doc-001" data-item-name="Document">View Approval</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4 p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <div class="flex-shrink-0">
                                <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center">
                                    <i class="fa-solid fa-signature text-purple-600"></i>
                                </div>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg" alt="User" class="w-6 h-6 rounded-full">
                                    <span class="font-medium text-gray-900">David Kim</span>
                                    <span class="text-gray-500">sent for signature</span>
                                    <span class="text-purple-600 font-medium">Financial_Model_KingsCross.xlsx</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Kings Cross Development • 6 hours ago</p>
                                <div class="flex items-center space-x-4 mt-2">
                                    <span class="text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded-full">Awaiting Signature</span>
                                    <button class="text-xs text-purple-600 hover:text-purple-800" data-action="track-status" data-item-type="document">Track Status</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4 p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <div class="flex-shrink-0">
                                <div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center">
                                    <i class="fa-solid fa-comment text-yellow-600"></i>
                                </div>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg" alt="User" class="w-6 h-6 rounded-full">
                                    <span class="font-medium text-gray-900">Emma Thompson</span>
                                    <span class="text-gray-500">left a comment on</span>
                                    <span class="text-yellow-600 font-medium">Property_Survey_Bermondsey.pdf</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Bermondsey Industrial Unit • 8 hours ago</p>
                                <div class="flex items-center space-x-4 mt-2">
                                    <span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full">Comment Added</span>
                                    <button class="text-xs text-yellow-600 hover:text-yellow-800" data-action="add-comment" data-item-type="document">View Comment</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4 p-4 border border-gray-200 rounded-lg hover:bg-gray-50">
                            <div class="flex-shrink-0">
                                <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center">
                                    <i class="fa-solid fa-download text-red-600"></i>
                                </div>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-2.jpg" alt="User" class="w-6 h-6 rounded-full">
                                    <span class="font-medium text-gray-900">Alex Johnson</span>
                                    <span class="text-gray-500">downloaded</span>
                                    <span class="text-red-600 font-medium">HoT_v2.0_CanaryWharf.pdf</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Canary Wharf Office Deal • 10 hours ago</p>
                                <div class="flex items-center space-x-4 mt-2">
                                    <span class="text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full">Downloaded</span>
                                    <button class="text-xs text-red-600 hover:text-red-800">View Details</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-6 text-center">
                        <button class="text-blue-600 hover:text-blue-800 font-medium">Load More Activity</button>
                    </div>
                </div>
            </section>
</div>
<!-- END DOCUMENT MANAGEMENT PAGE -->

            <!-- TASK MANAGEMENT PAGE -->
<div id="task-management-page" class="page-content hidden">
<main class="flex-1 overflow-y-auto p-6" id="task-main">
<section class="mb-8" id="task-overview-section">
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">Total Tasks</p>
<p class="text-3xl font-bold text-gray-900 mt-2">47</p>
<div class="flex items-center mt-2">
<span class="text-blue-600 text-sm font-medium">+5</span>
<span class="text-gray-500 text-sm ml-2">this week</span>
</div>
</div>
<div class="bg-blue-100 p-3 rounded-full">
<i class="fa-solid fa-tasks text-blue-600 text-xl"></i>
</div>
</div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">Overdue</p>
<p class="text-3xl font-bold text-red-600 mt-2">8</p>
<div class="flex items-center mt-2">
<span class="text-red-600 text-sm font-medium">+2</span>
<span class="text-gray-500 text-sm ml-2">vs yesterday</span>
</div>
</div>
<div class="bg-red-100 p-3 rounded-full">
<i class="fa-solid fa-exclamation-triangle text-red-600 text-xl"></i>
</div>
</div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">In Progress</p>
<p class="text-3xl font-bold text-yellow-600 mt-2">15</p>
<div class="flex items-center mt-2">
<span class="text-green-600 text-sm font-medium">-3</span>
<span class="text-gray-500 text-sm ml-2">completed today</span>
</div>
</div>
<div class="bg-yellow-100 p-3 rounded-full">
<i class="fa-solid fa-clock text-yellow-600 text-xl"></i>
</div>
</div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">Completed</p>
<p class="text-3xl font-bold text-green-600 mt-2">24</p>
<div class="flex items-center mt-2">
<span class="text-green-600 text-sm font-medium">+12</span>
<span class="text-gray-500 text-sm ml-2">this week</span>
</div>
</div>
<div class="bg-green-100 p-3 rounded-full">
<i class="fa-solid fa-check-circle text-green-600 text-xl"></i>
</div>
</div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">Avg Completion</p>
<p class="text-3xl font-bold text-purple-600 mt-2">4.2d</p>
<div class="flex items-center mt-2">
<span class="text-green-600 text-sm font-medium">-0.5d</span>
<span class="text-gray-500 text-sm ml-2">improvement</span>
</div>
</div>
<div class="bg-purple-100 p-3 rounded-full">
<i class="fa-solid fa-stopwatch text-purple-600 text-xl"></i>
</div>
</div>
</div>
</div>
</section>
<section class="mb-8" id="critical-tasks-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Critical &amp; Overdue Tasks</h3>
<div class="flex items-center space-x-2">
<button class="px-3 py-1 text-sm bg-red-600 text-white rounded-lg">Overdue</button>
<button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Due Today</button>
<button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Critical</button>
</div>
</div>
<div class="space-y-4">
<div class="flex items-start space-x-4 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg">
<div class="flex-shrink-0 mt-1">
<div class="w-4 h-4 bg-red-500 rounded-full"></div>
</div>
<div class="flex-1">
<div class="flex items-center justify-between mb-2">
<h4 class="font-medium text-gray-900">Legal Documentation Review - Contract Terms</h4>
<div class="flex items-center space-x-2">
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                            OVERDUE
                                        </span>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                            Critical
                                        </span>
</div>
</div>
<p class="text-sm text-gray-600 mb-3">Review and approve contract terms for Canary Wharf Office Deal. Legal compliance check required before proceeding to next stage.</p>
<div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-sm">
<div>
<span class="text-gray-500">Deal:</span>
<span class="font-medium text-gray-900 ml-1">Canary Wharf Office</span>
</div>
<div>
<span class="text-gray-500">Due:</span>
<span class="font-medium text-red-600 ml-1">Nov 12, 2024</span>
</div>
<div>
<span class="text-gray-500">Assigned to:</span>
<div class="flex items-center mt-1">
<img alt="Assignee" class="w-6 h-6 rounded-full mr-2" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg"/>
<span class="font-medium text-gray-900">Sarah Chen</span>
</div>
</div>
<div>
<span class="text-gray-500">Priority:</span>
<span class="font-medium text-red-600 ml-1">Critical</span>
</div>
</div>
<div class="flex items-center justify-between mt-4">
<div class="flex items-center space-x-3">
<button class="px-3 py-1 bg-red-600 text-white text-xs rounded-lg hover:bg-red-700">
                                            Mark Complete
                                        </button>
<button class="px-3 py-1 border border-gray-300 text-gray-700 text-xs rounded-lg hover:bg-gray-50">
                                            Reassign
                                        </button>
<button class="px-3 py-1 border border-gray-300 text-gray-700 text-xs rounded-lg hover:bg-gray-50">
                                            Add Comment
                                        </button>
</div>
<span class="text-xs text-red-600 font-medium">2 days overdue</span>
</div>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-orange-50 border-l-4 border-orange-500 rounded-lg">
<div class="flex-shrink-0 mt-1">
<div class="w-4 h-4 bg-orange-500 rounded-full"></div>
</div>
<div class="flex-1">
<div class="flex items-center justify-between mb-2">
<h4 class="font-medium text-gray-900">Property Valuation Report Submission</h4>
<div class="flex items-center space-x-2">
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                            DUE TODAY
                                        </span>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                            High
                                        </span>
</div>
</div>
<p class="text-sm text-gray-600 mb-3">Complete and submit independent property valuation report for Shoreditch Retail Space. Required for financial approval process.</p>
<div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-sm">
<div>
<span class="text-gray-500">Deal:</span>
<span class="font-medium text-gray-900 ml-1">Shoreditch Retail Space</span>
</div>
<div>
<span class="text-gray-500">Due:</span>
<span class="font-medium text-orange-600 ml-1">Nov 14, 2024</span>
</div>
<div>
<span class="text-gray-500">Assigned to:</span>
<div class="flex items-center mt-1">
<img alt="Assignee" class="w-6 h-6 rounded-full mr-2" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg"/>
<span class="font-medium text-gray-900">Mike Rodriguez</span>
</div>
</div>
<div>
<span class="text-gray-500">Priority:</span>
<span class="font-medium text-orange-600 ml-1">High</span>
</div>
</div>
<div class="flex items-center justify-between mt-4">
<div class="flex items-center space-x-3">
<button class="px-3 py-1 bg-orange-600 text-white text-xs rounded-lg hover:bg-orange-700">
                                            Mark Complete
                                        </button>
<button class="px-3 py-1 border border-gray-300 text-gray-700 text-xs rounded-lg hover:bg-gray-50" data-action="request-extension" data-item-type="task">
                                            Request Extension
                                        </button>
<button class="px-3 py-1 border border-gray-300 text-gray-700 text-xs rounded-lg hover:bg-gray-50">
                                            View Details
                                        </button>
</div>
<span class="text-xs text-orange-600 font-medium">Due in 6 hours</span>
</div>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg">
<div class="flex-shrink-0 mt-1">
<div class="w-4 h-4 bg-yellow-500 rounded-full"></div>
</div>
<div class="flex-1">
<div class="flex items-center justify-between mb-2">
<h4 class="font-medium text-gray-900">Client Presentation Preparation</h4>
<div class="flex items-center space-x-2">
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                            DUE TOMORROW
                                        </span>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                            Medium
                                        </span>
</div>
</div>
<p class="text-sm text-gray-600 mb-3">Prepare comprehensive presentation for Kings Cross Development client meeting. Include financial projections and timeline.</p>
<div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-sm">
<div>
<span class="text-gray-500">Deal:</span>
<span class="font-medium text-gray-900 ml-1">Kings Cross Development</span>
</div>
<div>
<span class="text-gray-500">Due:</span>
<span class="font-medium text-yellow-600 ml-1">Nov 15, 2024</span>
</div>
<div>
<span class="text-gray-500">Assigned to:</span>
<div class="flex items-center mt-1">
<img alt="Assignee" class="w-6 h-6 rounded-full mr-2" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg"/>
<span class="font-medium text-gray-900">David Kim</span>
</div>
</div>
<div>
<span class="text-gray-500">Priority:</span>
<span class="font-medium text-blue-600 ml-1">Medium</span>
</div>
</div>
<div class="flex items-center justify-between mt-4">
<div class="flex items-center space-x-3">
<button class="px-3 py-1 bg-yellow-600 text-white text-xs rounded-lg hover:bg-yellow-700">
                                            Mark Complete
                                        </button>
<button class="px-3 py-1 border border-gray-300 text-gray-700 text-xs rounded-lg hover:bg-gray-50" data-action="edit" data-item-type="task">
                                            Update Progress
                                        </button>
<button class="px-3 py-1 border border-gray-300 text-gray-700 text-xs rounded-lg hover:bg-gray-50" data-action="add-comment" data-item-type="task">
                                            Collaborate
                                        </button>
</div>
<span class="text-xs text-yellow-600 font-medium">Due tomorrow</span>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="mb-8" id="task-analytics-section">
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<h3 class="text-lg font-semibold text-gray-900 mb-4">Task Completion Trend</h3>
<div class="h-80" id="task-completion-chart"></div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<h3 class="text-lg font-semibold text-gray-900 mb-4">Task Distribution by Priority</h3>
<div class="h-80" id="priority-distribution-chart"></div>
</div>
</div>
</section>
<section class="mb-8" id="task-filters-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Task Filters &amp; Views</h3>
<div class="flex items-center space-x-2">
<button class="px-3 py-1 text-sm bg-blue-600 text-white rounded-lg">All Tasks</button>
<button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">My Tasks</button>
<button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Team Tasks</button>
</div>
</div>
<div class="grid grid-cols-1 md:grid-cols-6 gap-4 mb-6">
<div class="relative">
<select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none">
<option>All Statuses</option>
<option>Open</option>
<option>In Progress</option>
<option>Blocked</option>
<option>Done</option>
<option>Overdue</option>
</select>
<i class="fa-solid fa-chevron-down absolute right-3 top-3 text-gray-400"></i>
</div>
<div class="relative">
<select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none">
<option>All Priorities</option>
<option>Critical</option>
<option>High</option>
<option>Medium</option>
<option>Low</option>
</select>
<i class="fa-solid fa-chevron-down absolute right-3 top-3 text-gray-400"></i>
</div>
<div class="relative">
<select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none">
<option>All Deals</option>
<option>Canary Wharf Office</option>
<option>Shoreditch Retail Space</option>
<option>Kings Cross Development</option>
<option>Bermondsey Industrial</option>
</select>
<i class="fa-solid fa-chevron-down absolute right-3 top-3 text-gray-400"></i>
</div>
<div class="relative">
<select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 appearance-none">
<option>All Assignees</option>
<option>Sarah Chen</option>
<option>Mike Rodriguez</option>
<option>David Kim</option>
<option>Emma Thompson</option>
</select>
<i class="fa-solid fa-chevron-down absolute right-3 top-3 text-gray-400"></i>
</div>
<div class="relative">
<input class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" type="date"/>
</div>
<div class="flex items-center space-x-2">
<button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex-1">
<i class="fa-solid fa-filter mr-2"></i>Apply
                            </button>
<button class="px-3 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50">
<i class="fa-solid fa-times"></i>
</button>
</div>
</div>
<div class="flex items-center justify-between">
<div class="flex items-center space-x-4">
<span class="text-sm text-gray-600">View:</span>
<div class="flex border border-gray-300 rounded-lg overflow-hidden">
<button class="px-3 py-1 bg-blue-50 text-blue-600 border-r border-gray-300">
<i class="fa-solid fa-list"></i>
</button>
<button class="px-3 py-1 text-gray-600 hover:bg-gray-50 border-r border-gray-300">
<i class="fa-solid fa-th"></i>
</button>
<button class="px-3 py-1 text-gray-600 hover:bg-gray-50">
<i class="fa-solid fa-calendar"></i>
</button>
</div>
</div>
<div class="flex items-center space-x-2">
<span class="text-sm text-gray-600">Sort by:</span>
<select class="px-3 py-1 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
<option>Due Date</option>
<option>Priority</option>
<option>Status</option>
<option>Assignee</option>
<option>Created Date</option>
</select>
</div>
</div>
</div>
</section>
<section class="mb-8" id="all-tasks-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">All Tasks</h3>
<div class="flex items-center space-x-3">
<div class="relative">
<input class="pl-8 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Search tasks..." type="text"/>
<i class="fa-solid fa-search absolute left-2.5 top-2.5 text-gray-400 text-sm"></i>
</div>
<button data-export="data"  class="px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50"></i>Export</button>
</div>
</div>
<div class="overflow-x-auto">
<table class="w-full">
<thead>
<tr class="border-b border-gray-200">
<th class="text-left py-3 px-4 font-medium text-gray-600">
<input class="rounded border-gray-300" type="checkbox"/>
</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Task</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Deal</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Status</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Priority</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Assignee</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Due Date</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Progress</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Actions</th>
</tr>
</thead>
<tbody class="divide-y divide-gray-100">
<tr class="hover:bg-gray-50">
<td class="py-4 px-4">
<input class="rounded border-gray-300" type="checkbox"/>
</td>
<td class="py-4 px-4">
<div class="font-medium text-gray-900">Legal Documentation Review</div>
<div class="text-sm text-gray-500">Review contract terms and compliance requirements</div>
</td>
<td class="py-4 px-4">
<div class="text-gray-900">Canary Wharf Office</div>
<div class="text-sm text-gray-500">DL_CW_2024_001</div>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                            Overdue
                                        </span>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                            Critical
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<img alt="Assignee" class="w-8 h-8 rounded-full mr-2" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg"/>
<div>
<div class="text-sm font-medium text-gray-900">Sarah Chen</div>
<div class="text-xs text-gray-500">Legal Team</div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="text-red-600 font-medium">Nov 12, 2024</div>
<div class="text-sm text-red-500">2 days overdue</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<span class="text-gray-900 text-sm">75%</span>
<div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
<div class="bg-red-500 h-2 rounded-full" style="width: 75%"></div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<button class="text-blue-600 hover:text-blue-800">
<i class="fa-solid fa-edit"></i>
</button>
<button class="text-green-600 hover:text-green-800">
<i class="fa-solid fa-check"></i>
</button>
<button class="text-gray-600 hover:text-gray-800">
<i class="fa-solid fa-ellipsis-v"></i>
</button>
</div>
</td>
</tr>
<tr class="hover:bg-gray-50">
<td class="py-4 px-4">
<input class="rounded border-gray-300" type="checkbox"/>
</td>
<td class="py-4 px-4">
<div class="font-medium text-gray-900">Property Valuation Report</div>
<div class="text-sm text-gray-500">Complete independent property assessment</div>
</td>
<td class="py-4 px-4">
<div class="text-gray-900">Shoreditch Retail Space</div>
<div class="text-sm text-gray-500">DL_SH_2024_002</div>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                            In Progress
                                        </span>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                            High
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<img alt="Assignee" class="w-8 h-8 rounded-full mr-2" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg"/>
<div>
<div class="text-sm font-medium text-gray-900">Mike Rodriguez</div>
<div class="text-xs text-gray-500">Valuation Team</div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="text-orange-600 font-medium">Nov 14, 2024</div>
<div class="text-sm text-orange-500">Due today</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<span class="text-gray-900 text-sm">60%</span>
<div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
<div class="bg-yellow-500 h-2 rounded-full" style="width: 60%"></div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<button class="text-blue-600 hover:text-blue-800">
<i class="fa-solid fa-edit"></i>
</button>
<button class="text-green-600 hover:text-green-800">
<i class="fa-solid fa-check"></i>
</button>
<button class="text-gray-600 hover:text-gray-800">
<i class="fa-solid fa-ellipsis-v"></i>
</button>
</div>
</td>
</tr>
<tr class="hover:bg-gray-50">
<td class="py-4 px-4">
<input class="rounded border-gray-300" type="checkbox"/>
</td>
<td class="py-4 px-4">
<div class="font-medium text-gray-900">Client Presentation Preparation</div>
<div class="text-sm text-gray-500">Create comprehensive proposal presentation</div>
</td>
<td class="py-4 px-4">
<div class="text-gray-900">Kings Cross Development</div>
<div class="text-sm text-gray-500">DL_KC_2024_003</div>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                            Open
                                        </span>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                            Medium
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<img alt="Assignee" class="w-8 h-8 rounded-full mr-2" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg"/>
<div>
<div class="text-sm font-medium text-gray-900">David Kim</div>
<div class="text-xs text-gray-500">Business Development</div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="text-yellow-600 font-medium">Nov 15, 2024</div>
<div class="text-sm text-yellow-500">Due tomorrow</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<span class="text-gray-900 text-sm">25%</span>
<div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
<div class="bg-blue-500 h-2 rounded-full" style="width: 25%"></div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<button class="text-blue-600 hover:text-blue-800">
<i class="fa-solid fa-edit"></i>
</button>
<button class="text-green-600 hover:text-green-800">
<i class="fa-solid fa-check"></i>
</button>
<button class="text-gray-600 hover:text-gray-800">
<i class="fa-solid fa-ellipsis-v"></i>
</button>
</div>
</td>
</tr>
<tr class="hover:bg-gray-50">
<td class="py-4 px-4">
<input class="rounded border-gray-300" type="checkbox"/>
</td>
<td class="py-4 px-4">
<div class="font-medium text-gray-900">Financial Model Update</div>
<div class="text-sm text-gray-500">Revise financial projections with new parameters</div>
</td>
<td class="py-4 px-4">
<div class="text-gray-900">Bermondsey Industrial</div>
<div class="text-sm text-gray-500">DL_BI_2024_004</div>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                            Done
                                        </span>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                            Low
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<img alt="Assignee" class="w-8 h-8 rounded-full mr-2" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg"/>
<div>
<div class="text-sm font-medium text-gray-900">Emma Thompson</div>
<div class="text-xs text-gray-500">Finance Team</div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="text-green-600 font-medium">Nov 10, 2024</div>
<div class="text-sm text-green-500">Completed</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<span class="text-gray-900 text-sm">100%</span>
<div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
<div class="bg-green-500 h-2 rounded-full" style="width: 100%"></div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<button class="text-blue-600 hover:text-blue-800">
<i class="fa-solid fa-eye"></i>
</button>
<button class="text-gray-600 hover:text-gray-800">
<i class="fa-solid fa-clone"></i>
</button>
<button class="text-gray-600 hover:text-gray-800">
<i class="fa-solid fa-ellipsis-v"></i>
</button>
</div>
</td>
</tr>
<tr class="hover:bg-gray-50">
<td class="py-4 px-4">
<input class="rounded border-gray-300" type="checkbox"/>
</td>
<td class="py-4 px-4">
<div class="font-medium text-gray-900">Risk Assessment Documentation</div>
<div class="text-sm text-gray-500">Comprehensive risk analysis and mitigation strategies</div>
</td>
<td class="py-4 px-4">
<div class="text-gray-900">Greenwich Maritime Quarter</div>
<div class="text-sm text-gray-500">DL_GM_2024_005</div>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                            Blocked
                                        </span>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                            High
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<img alt="Assignee" class="w-8 h-8 rounded-full mr-2" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-6.jpg"/>
<div>
<div class="text-sm font-medium text-gray-900">James Wilson</div>
<div class="text-xs text-gray-500">Risk Management</div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="text-gray-600 font-medium">Nov 18, 2024</div>
<div class="text-sm text-gray-500">Blocked - awaiting data</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<span class="text-gray-900 text-sm">30%</span>
<div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
<div class="bg-red-500 h-2 rounded-full" style="width: 30%"></div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<button class="text-blue-600 hover:text-blue-800">
<i class="fa-solid fa-edit"></i>
</button>
<button class="text-orange-600 hover:text-orange-800">
<i class="fa-solid fa-unlock"></i>
</button>
<button class="text-gray-600 hover:text-gray-800">
<i class="fa-solid fa-ellipsis-v"></i>
</button>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="flex items-center justify-between mt-6">
<div class="text-sm text-gray-500">
                            Showing 1-5 of 47 tasks
                        </div>
<div class="flex items-center space-x-2">
<button class="px-3 py-1 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 disabled:opacity-50" disabled="">
                                Previous
                            </button>
<button class="px-3 py-1 bg-blue-600 text-white rounded-lg text-sm">1</button>
<button class="px-3 py-1 border border-gray-300 rounded-lg text-sm hover:bg-gray-50">2</button>
<button class="px-3 py-1 border border-gray-300 rounded-lg text-sm hover:bg-gray-50">3</button>
<button class="px-3 py-1 border border-gray-300 rounded-lg text-sm hover:bg-gray-50">
                                Next
                            </button>
</div>
</div>
</div>
</section>
<section class="mb-8" id="task-timeline-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Task Timeline &amp; Dependencies</h3>
<div class="flex items-center space-x-2">
<button class="px-3 py-1 text-sm bg-blue-600 text-white rounded-lg">Timeline View</button>
<button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Gantt Chart</button>
<button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Dependencies</button>
</div>
</div>
<div class="space-y-6">
<div class="flex items-start space-x-4">
<div class="flex flex-col items-center">
<div class="w-4 h-4 bg-red-500 rounded-full"></div>
<div class="w-0.5 h-16 bg-red-200 mt-2"></div>
</div>
<div class="flex-1 pb-6">
<div class="flex items-center justify-between mb-2">
<h4 class="font-medium text-gray-900">Legal Documentation Review</h4>
<span class="text-sm text-red-600 font-medium">Overdue</span>
</div>
<p class="text-sm text-gray-600 mb-2">Canary Wharf Office Deal</p>
<div class="flex items-center space-x-4 text-sm text-gray-500">
<span>Due: Nov 12, 2024</span>
<span>•</span>
<span>Sarah Chen</span>
<span>•</span>
<span>Blocks: Contract Execution</span>
</div>
</div>
</div>
<div class="flex items-start space-x-4">
<div class="flex flex-col items-center">
<div class="w-4 h-4 bg-orange-500 rounded-full"></div>
<div class="w-0.5 h-16 bg-orange-200 mt-2"></div>
</div>
<div class="flex-1 pb-6">
<div class="flex items-center justify-between mb-2">
<h4 class="font-medium text-gray-900">Property Valuation Report</h4>
<span class="text-sm text-orange-600 font-medium">Due Today</span>
</div>
<p class="text-sm text-gray-600 mb-2">Shoreditch Retail Space</p>
<div class="flex items-center space-x-4 text-sm text-gray-500">
<span>Due: Nov 14, 2024</span>
<span>•</span>
<span>Mike Rodriguez</span>
<span>•</span>
<span>Enables: Financial Approval</span>
</div>
</div>
</div>
<div class="flex items-start space-x-4">
<div class="flex flex-col items-center">
<div class="w-4 h-4 bg-yellow-500 rounded-full"></div>
<div class="w-0.5 h-16 bg-yellow-200 mt-2"></div>
</div>
<div class="flex-1 pb-6">
<div class="flex items-center justify-between mb-2">
<h4 class="font-medium text-gray-900">Client Presentation Preparation</h4>
<span class="text-sm text-yellow-600 font-medium">Due Tomorrow</span>
</div>
<p class="text-sm text-gray-600 mb-2">Kings Cross Development</p>
<div class="flex items-center space-x-4 text-sm text-gray-500">
<span>Due: Nov 15, 2024</span>
<span>•</span>
<span>David Kim</span>
<span>•</span>
<span>Requires: Financial Model</span>
</div>
</div>
</div>
<div class="flex items-start space-x-4">
<div class="flex flex-col items-center">
<div class="w-4 h-4 bg-green-500 rounded-full"></div>
<div class="w-0.5 h-16 bg-green-200 mt-2"></div>
</div>
<div class="flex-1 pb-6">
<div class="flex items-center justify-between mb-2">
<h4 class="font-medium text-gray-900">Financial Model Update</h4>
<span class="text-sm text-green-600 font-medium">Completed</span>
</div>
<p class="text-sm text-gray-600 mb-2">Bermondsey Industrial</p>
<div class="flex items-center space-x-4 text-sm text-gray-500">
<span>Completed: Nov 10, 2024</span>
<span>•</span>
<span>Emma Thompson</span>
<span>•</span>
<span>Enabled: Presentation Prep</span>
</div>
</div>
</div>
<div class="flex items-start space-x-4">
<div class="flex flex-col items-center">
<div class="w-4 h-4 bg-blue-500 rounded-full"></div>
</div>
<div class="flex-1">
<div class="flex items-center justify-between mb-2">
<h4 class="font-medium text-gray-900">Contract Execution</h4>
<span class="text-sm text-blue-600 font-medium">Scheduled</span>
</div>
<p class="text-sm text-gray-600 mb-2">Multiple Deals</p>
<div class="flex items-center space-x-4 text-sm text-gray-500">
<span>Scheduled: Nov 20, 2024</span>
<span>•</span>
<span>Legal Team</span>
<span>•</span>
<span>Depends on: Legal Reviews</span>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="mb-8" id="team-workload-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Team Workload Distribution</h3>
<div class="flex items-center space-x-2">
<button class="px-3 py-1 text-sm bg-blue-600 text-white rounded-lg">Current Week</button>
<button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Next Week</button>
<button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Month</button>
</div>
</div>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
<div class="p-4 border border-gray-200 rounded-lg">
<div class="flex items-center justify-between mb-4">
<div class="flex items-center space-x-3">
<img alt="Team Member" class="w-10 h-10 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg"/>
<div>
<h4 class="font-medium text-gray-900">Sarah Chen</h4>
<p class="text-sm text-gray-500">Legal Team Lead</p>
</div>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                    Overloaded
                                </span>
</div>
<div class="space-y-2 mb-4">
<div class="flex items-center justify-between text-sm">
<span class="text-gray-600">Active Tasks</span>
<span class="font-medium text-gray-900">8</span>
</div>
<div class="flex items-center justify-between text-sm">
<span class="text-gray-600">Overdue Tasks</span>
<span class="font-medium text-red-600">3</span>
</div>
<div class="flex items-center justify-between text-sm">
<span class="text-gray-600">This Week Due</span>
<span class="font-medium text-orange-600">5</span>
</div>
</div>
<div class="w-full bg-gray-200 rounded-full h-2">
<div class="bg-red-500 h-2 rounded-full" style="width: 95%"></div>
</div>
<p class="text-xs text-gray-500 mt-2">95% capacity utilization</p>
</div>
<div class="p-4 border border-gray-200 rounded-lg">
<div class="flex items-center justify-between mb-4">
<div class="flex items-center space-x-3">
<img alt="Team Member" class="w-10 h-10 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg"/>
<div>
<h4 class="font-medium text-gray-900">Mike Rodriguez</h4>
<p class="text-sm text-gray-500">Senior Valuer</p>
</div>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                    Busy
                                </span>
</div>
<div class="space-y-2 mb-4">
<div class="flex items-center justify-between text-sm">
<span class="text-gray-600">Active Tasks</span>
<span class="font-medium text-gray-900">6</span>
</div>
<div class="flex items-center justify-between text-sm">
<span class="text-gray-600">Overdue Tasks</span>
<span class="font-medium text-gray-600">0</span>
</div>
<div class="flex items-center justify-between text-sm">
<span class="text-gray-600">This Week Due</span>
<span class="font-medium text-yellow-600">3</span>
</div>
</div>
<div class="w-full bg-gray-200 rounded-full h-2">
<div class="bg-yellow-500 h-2 rounded-full" style="width: 80%"></div>
</div>
<p class="text-xs text-gray-500 mt-2">80% capacity utilization</p>
</div>
<div class="p-4 border border-gray-200 rounded-lg">
<div class="flex items-center justify-between mb-4">
<div class="flex items-center space-x-3">
<img alt="Team Member" class="w-10 h-10 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg"/>
<div>
<h4 class="font-medium text-gray-900">David Kim</h4>
<p class="text-sm text-gray-500">Business Development</p>
</div>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                    Available
                                </span>
</div>
<div class="space-y-2 mb-4">
<div class="flex items-center justify-between text-sm">
<span class="text-gray-600">Active Tasks</span>
<span class="font-medium text-gray-900">4</span>
</div>
<div class="flex items-center justify-between text-sm">
<span class="text-gray-600">Overdue Tasks</span>
<span class="font-medium text-gray-600">0</span>
</div>
<div class="flex items-center justify-between text-sm">
<span class="text-gray-600">This Week Due</span>
<span class="font-medium text-blue-600">2</span>
</div>
</div>
<div class="w-full bg-gray-200 rounded-full h-2">
<div class="bg-green-500 h-2 rounded-full" style="width: 60%"></div>
</div>
<p class="text-xs text-gray-500 mt-2">60% capacity utilization</p>
</div>
<div class="p-4 border border-gray-200 rounded-lg">
<div class="flex items-center justify-between mb-4">
<div class="flex items-center space-x-3">
<img alt="Team Member" class="w-10 h-10 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg"/>
<div>
<h4 class="font-medium text-gray-900">Emma Thompson</h4>
<p class="text-sm text-gray-500">Financial Analyst</p>
</div>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                    Available
                                </span>
</div>
<div class="space-y-2 mb-4">
<div class="flex items-center justify-between text-sm">
<span class="text-gray-600">Active Tasks</span>
<span class="font-medium text-gray-900">3</span>
</div>
<div class="flex items-center justify-between text-sm">
<span class="text-gray-600">Overdue Tasks</span>
<span class="font-medium text-gray-600">0</span>
</div>
<div class="flex items-center justify-between text-sm">
<span class="text-gray-600">This Week Due</span>
<span class="font-medium text-blue-600">1</span>
</div>
</div>
<div class="w-full bg-gray-200 rounded-full h-2">
<div class="bg-green-500 h-2 rounded-full" style="width: 45%"></div>
</div>
<p class="text-xs text-gray-500 mt-2">45% capacity utilization</p>
</div>
<div class="p-4 border border-gray-200 rounded-lg">
<div class="flex items-center justify-between mb-4">
<div class="flex items-center space-x-3">
<img alt="Team Member" class="w-10 h-10 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-6.jpg"/>
<div>
<h4 class="font-medium text-gray-900">James Wilson</h4>
<p class="text-sm text-gray-500">Risk Manager</p>
</div>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                    Blocked
                                </span>
</div>
<div class="space-y-2 mb-4">
<div class="flex items-center justify-between text-sm">
<span class="text-gray-600">Active Tasks</span>
<span class="font-medium text-gray-900">5</span>
</div>
<div class="flex items-center justify-between text-sm">
<span class="text-gray-600">Blocked Tasks</span>
<span class="font-medium text-red-600">2</span>
</div>
<div class="flex items-center justify-between text-sm">
<span class="text-gray-600">This Week Due</span>
<span class="font-medium text-gray-600">3</span>
</div>
</div>
<div class="w-full bg-gray-200 rounded-full h-2">
<div class="bg-red-500 h-2 rounded-full" style="width: 70%"></div>
</div>
<p class="text-xs text-gray-500 mt-2">70% capacity (blocked)</p>
</div>
<div class="p-4 border border-gray-200 rounded-lg">
<div class="flex items-center justify-between mb-4">
<div class="flex items-center space-x-3">
<img alt="Team Member" class="w-10 h-10 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-7.jpg"/>
<div>
<h4 class="font-medium text-gray-900">Lisa Anderson</h4>
<p class="text-sm text-gray-500">Project Coordinator</p>
</div>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                    Balanced
                                </span>
</div>
<div class="space-y-2 mb-4">
<div class="flex items-center justify-between text-sm">
<span class="text-gray-600">Active Tasks</span>
<span class="font-medium text-gray-900">7</span>
</div>
<div class="flex items-center justify-between text-sm">
<span class="text-gray-600">Overdue Tasks</span>
<span class="font-medium text-gray-600">0</span>
</div>
<div class="flex items-center justify-between text-sm">
<span class="text-gray-600">This Week Due</span>
<span class="font-medium text-blue-600">4</span>
</div>
</div>
<div class="w-full bg-gray-200 rounded-full h-2">
<div class="bg-blue-500 h-2 rounded-full" style="width: 75%"></div>
</div>
<p class="text-xs text-gray-500 mt-2">75% capacity utilization</p>
</div>
</div>
</div>
</section>
<section class="mb-8" id="task-performance-section">
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<h3 class="text-lg font-semibold text-gray-900 mb-4">Task Performance Metrics</h3>
<div class="h-80" id="task-performance-chart"></div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<h3 class="text-lg font-semibold text-gray-900 mb-4">Completion Rate by Deal Stage</h3>
<div class="h-80" id="completion-by-stage-chart"></div>
</div>
</div>
</section>
<section class="mb-8" id="task-automation-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Task Automation &amp; Templates</h3>
<button class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700">
<i class="fa-solid fa-robot mr-2"></i>
                            Create Automation
                        </button>
</div>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
<div class="p-4 border border-gray-200 rounded-lg hover:border-purple-300 hover:bg-purple-50 cursor-pointer">
<div class="flex items-center justify-between mb-3">
<div class="bg-purple-100 p-2 rounded-lg">
<i class="fa-solid fa-magic text-purple-600"></i>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                    Active
                                </span>
</div>
<h4 class="font-medium text-gray-900 mb-2">Deal Stage Progression</h4>
<p class="text-sm text-gray-600 mb-3">Automatically create tasks when deals move to new stages</p>
<div class="flex items-center text-sm text-gray-500">
<span>Triggered: 23 times</span>
<span class="mx-2">•</span>
<span>Success: 100%</span>
</div>
</div>
<div class="p-4 border border-gray-200 rounded-lg hover:border-purple-300 hover:bg-purple-50 cursor-pointer">
<div class="flex items-center justify-between mb-3">
<div class="bg-purple-100 p-2 rounded-lg">
<i class="fa-solid fa-clock text-purple-600"></i>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                    Active
                                </span>
</div>
<h4 class="font-medium text-gray-900 mb-2">Deadline Reminders</h4>
<p class="text-sm text-gray-600 mb-3">Send notifications 24h before task deadlines</p>
<div class="flex items-center text-sm text-gray-500">
<span>Triggered: 156 times</span>
<span class="mx-2">•</span>
<span>Success: 98%</span>
</div>
</div>
<div class="p-4 border border-gray-200 rounded-lg hover:border-purple-300 hover:bg-purple-50 cursor-pointer">
<div class="flex items-center justify-between mb-3">
<div class="bg-purple-100 p-2 rounded-lg">
<i class="fa-solid fa-users text-purple-600"></i>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                    Draft
                                </span>
</div>
<h4 class="font-medium text-gray-900 mb-2">Team Workload Balancing</h4>
<p class="text-sm text-gray-600 mb-3">Auto-assign tasks based on team member availability</p>
<div class="flex items-center text-sm text-gray-500">
<span>In Development</span>
<span class="mx-2">•</span>
<span>Beta Testing</span>
</div>
</div>
<div class="p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 cursor-pointer">
<div class="flex items-center justify-between mb-3">
<div class="bg-blue-100 p-2 rounded-lg">
<i class="fa-solid fa-file-alt text-blue-600"></i>
</div>
<span class="text-sm text-blue-600 font-medium">Template</span>
</div>
<h4 class="font-medium text-gray-900 mb-2">Legal Review Checklist</h4>
<p class="text-sm text-gray-600 mb-3">Standard tasks for legal document reviews</p>
<div class="flex items-center text-sm text-gray-500">
<span>8 tasks</span>
<span class="mx-2">•</span>
<span>Used 45 times</span>
</div>
</div>
<div class="p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 cursor-pointer">
<div class="flex items-center justify-between mb-3">
<div class="bg-blue-100 p-2 rounded-lg">
<i class="fa-solid fa-calculator text-blue-600"></i>
</div>
<span class="text-sm text-blue-600 font-medium">Template</span>
</div>
<h4 class="font-medium text-gray-900 mb-2">Financial Analysis Workflow</h4>
<p class="text-sm text-gray-600 mb-3">Complete financial assessment task sequence</p>
<div class="flex items-center text-sm text-gray-500">
<span>12 tasks</span>
<span class="mx-2">•</span>
<span>Used 28 times</span>
</div>
</div>
<div class="p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 cursor-pointer">
<div class="flex items-center justify-between mb-3">
<div class="bg-blue-100 p-2 rounded-lg">
<i class="fa-solid fa-handshake text-blue-600"></i>
</div>
<span class="text-sm text-blue-600 font-medium">Template</span>
</div>
<h4 class="font-medium text-gray-900 mb-2">Deal Onboarding Process</h4>
<p class="text-sm text-gray-600 mb-3">New deal setup and initial assessment tasks</p>
<div class="flex items-center text-sm text-gray-500">
<span>15 tasks</span>
<span class="mx-2">•</span>
<span>Used 67 times</span>
</div>
</div>
</div>
</div>
</section>
</main>
</div>
<!-- END TASK MANAGEMENT PAGE -->

            <!-- APPROVAL REQUESTS PAGE -->
<div id="approval-requests-page" class="page-content hidden">
<main class="flex-1 overflow-y-auto p-6" id="approvals-main">
<section class="mb-8" id="approval-overview-section">
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">Total Pending</p>
<p class="text-3xl font-bold text-gray-900 mt-2">17</p>
<div class="flex items-center mt-2">
<span class="text-red-600 text-sm font-medium">+4</span>
<span class="text-gray-500 text-sm ml-2">this week</span>
</div>
</div>
<div class="bg-orange-100 p-3 rounded-full">
<i class="fa-solid fa-clock text-orange-600 text-xl"></i>
</div>
</div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">Overdue</p>
<p class="text-3xl font-bold text-red-600 mt-2">3</p>
<div class="flex items-center mt-2">
<span class="text-red-600 text-sm font-medium">URGENT</span>
</div>
</div>
<div class="bg-red-100 p-3 rounded-full">
<i class="fa-solid fa-exclamation-triangle text-red-600 text-xl"></i>
</div>
</div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">Due Today</p>
<p class="text-3xl font-bold text-yellow-600 mt-2">5</p>
<div class="flex items-center mt-2">
<span class="text-yellow-600 text-sm font-medium">PRIORITY</span>
</div>
</div>
<div class="bg-yellow-100 p-3 rounded-full">
<i class="fa-solid fa-calendar-day text-yellow-600 text-xl"></i>
</div>
</div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">This Week</p>
<p class="text-3xl font-bold text-blue-600 mt-2">9</p>
<div class="flex items-center mt-2">
<span class="text-blue-600 text-sm font-medium">UPCOMING</span>
</div>
</div>
<div class="bg-blue-100 p-3 rounded-full">
<i class="fa-solid fa-calendar-week text-blue-600 text-xl"></i>
</div>
</div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">Avg Response</p>
<p class="text-3xl font-bold text-green-600 mt-2">2.3</p>
<div class="flex items-center mt-2">
<span class="text-gray-500 text-sm">days</span>
</div>
</div>
<div class="bg-green-100 p-3 rounded-full">
<i class="fa-solid fa-stopwatch text-green-600 text-xl"></i>
</div>
</div>
</div>
</div>
</section>
<section class="mb-8" id="approval-filters-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Filter &amp; Sort Approvals</h3>
<button class="text-sm text-blue-600 hover:text-blue-700">Clear All Filters</button>
</div>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4">
<div class="relative">
<select class="w-full border border-gray-300 rounded-lg p-3 appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500">
<option>All Roles</option>
<option>Legal</option>
<option>Executive</option>
<option>Finance</option>
<option>Delivery</option>
<option>External</option>
</select>
<i class="fa-solid fa-chevron-down absolute right-3 top-4 text-gray-400"></i>
</div>
<div class="relative">
<select class="w-full border border-gray-300 rounded-lg p-3 appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500">
<option>All Status</option>
<option>Pending</option>
<option>Approved</option>
<option>Rejected</option>
<option>Escalated</option>
</select>
<i class="fa-solid fa-chevron-down absolute right-3 top-4 text-gray-400"></i>
</div>
<div class="relative">
<select class="w-full border border-gray-300 rounded-lg p-3 appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500">
<option>All Types</option>
<option>HoT Version</option>
<option>Contract</option>
<option>Document</option>
</select>
<i class="fa-solid fa-chevron-down absolute right-3 top-4 text-gray-400"></i>
</div>
<div class="relative">
<select class="w-full border border-gray-300 rounded-lg p-3 appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500">
<option>All Priorities</option>
<option>Critical</option>
<option>High</option>
<option>Medium</option>
<option>Low</option>
</select>
<i class="fa-solid fa-chevron-down absolute right-3 top-4 text-gray-400"></i>
</div>
<div class="relative">
<input class="w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-500" type="date"/>
</div>
<div class="relative">
<select class="w-full border border-gray-300 rounded-lg p-3 appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500">
<option>Sort by Due Date</option>
<option>Sort by Priority</option>
<option>Sort by Deal Value</option>
<option>Sort by Created Date</option>
</select>
<i class="fa-solid fa-chevron-down absolute right-3 top-4 text-gray-400"></i>
</div>
</div>
</div>
</section>
<section class="mb-8" id="critical-approvals-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<div class="flex items-center space-x-3">
<div class="bg-red-100 p-2 rounded-full">
<i class="fa-solid fa-exclamation-triangle text-red-600"></i>
</div>
<div>
<h3 class="text-lg font-semibold text-gray-900">Critical &amp; Overdue Approvals</h3>
<p class="text-sm text-gray-500">These approvals require immediate attention</p>
</div>
</div>
<button class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium">
<i class="fa-solid fa-bell mr-2"></i>
                            Send Reminders
                        </button>
</div>
<div class="space-y-4">
<div class="p-6 bg-red-50 border-2 border-red-200 rounded-lg">
<div class="flex items-start justify-between">
<div class="flex items-start space-x-4">
<div class="bg-red-100 p-3 rounded-full">
<i class="fa-solid fa-file-contract text-red-600 text-lg"></i>
</div>
<div>
<div class="flex items-center space-x-3 mb-2">
<h4 class="text-lg font-semibold text-gray-900">HoT Version 3.2 - Legal Review</h4>
<span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800">
<i class="fa-solid fa-exclamation-triangle mr-1"></i>
                                                OVERDUE
                                            </span>
</div>
<p class="text-gray-700 mb-3">Canary Wharf Office Deal - Major contract amendments require legal approval</p>
<div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
<div>
<span class="text-gray-500">Deal:</span>
<span class="font-medium text-gray-900 ml-2">£2,100,000</span>
</div>
<div>
<span class="text-gray-500">Approver:</span>
<span class="font-medium text-gray-900 ml-2">Sarah Mitchell (Legal)</span>
</div>
<div>
<span class="text-gray-500">Overdue by:</span>
<span class="font-medium text-red-600 ml-2">3 days</span>
</div>
</div>
</div>
</div>
<div class="flex space-x-2">
<button class="px-4 py-2 bg-white border border-red-300 text-red-700 rounded-lg hover:bg-red-50 font-medium" data-action="escalate" data-item-type="deal">
                                        Escalate
                                    </button>
<button class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium">
                                        Review Now
                                    </button>
</div>
</div>
</div>
<div class="p-6 bg-red-50 border-2 border-red-200 rounded-lg">
<div class="flex items-start justify-between">
<div class="flex items-start space-x-4">
<div class="bg-red-100 p-3 rounded-full">
<i class="fa-solid fa-file-signature text-red-600 text-lg"></i>
</div>
<div>
<div class="flex items-center space-x-3 mb-2">
<h4 class="text-lg font-semibold text-gray-900">Contract Final Review - Executive Approval</h4>
<span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800">
<i class="fa-solid fa-clock mr-1"></i>
                                                OVERDUE
                                            </span>
</div>
<p class="text-gray-700 mb-3">Kings Cross Development - Executive sign-off required for £4.2M deal</p>
<div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
<div>
<span class="text-gray-500">Deal:</span>
<span class="font-medium text-gray-900 ml-2">£4,200,000</span>
</div>
<div>
<span class="text-gray-500">Approver:</span>
<span class="font-medium text-gray-900 ml-2">James Patterson (Executive)</span>
</div>
<div>
<span class="text-gray-500">Overdue by:</span>
<span class="font-medium text-red-600 ml-2">1 day</span>
</div>
</div>
</div>
</div>
<div class="flex space-x-2">
<button class="px-4 py-2 bg-white border border-red-300 text-red-700 rounded-lg hover:bg-red-50 font-medium" data-action="escalate" data-item-type="deal">
                                        Escalate
                                    </button>
<button class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium">
                                        Review Now
                                    </button>
</div>
</div>
</div>
<div class="p-6 bg-red-50 border-2 border-red-200 rounded-lg">
<div class="flex items-start justify-between">
<div class="flex items-start space-x-4">
<div class="bg-red-100 p-3 rounded-full">
<i class="fa-solid fa-calculator text-red-600 text-lg"></i>
</div>
<div>
<div class="flex items-center space-x-3 mb-2">
<h4 class="text-lg font-semibold text-gray-900">Financial Model Validation - Finance Review</h4>
<span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800">
<i class="fa-solid fa-exclamation-triangle mr-1"></i>
                                                OVERDUE
                                            </span>
</div>
<p class="text-gray-700 mb-3">Shoreditch Retail Space - Updated financial projections need approval</p>
<div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
<div>
<span class="text-gray-500">Deal:</span>
<span class="font-medium text-gray-900 ml-2">£850,000</span>
</div>
<div>
<span class="text-gray-500">Approver:</span>
<span class="font-medium text-gray-900 ml-2">Rachel Green (Finance)</span>
</div>
<div>
<span class="text-gray-500">Overdue by:</span>
<span class="font-medium text-red-600 ml-2">2 days</span>
</div>
</div>
</div>
</div>
<div class="flex space-x-2">
<button class="px-4 py-2 bg-white border border-red-300 text-red-700 rounded-lg hover:bg-red-50 font-medium" data-action="escalate" data-item-type="deal">
                                        Escalate
                                    </button>
<button class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-medium">
                                        Review Now
                                    </button>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="mb-8" id="due-today-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<div class="flex items-center space-x-3">
<div class="bg-yellow-100 p-2 rounded-full">
<i class="fa-solid fa-calendar-day text-yellow-600"></i>
</div>
<div>
<h3 class="text-lg font-semibold text-gray-900">Due Today</h3>
<p class="text-sm text-gray-500">Approvals that need to be completed today</p>
</div>
</div>
<div class="flex space-x-2">
<button class="px-4 py-2 bg-yellow-100 text-yellow-800 rounded-lg hover:bg-yellow-200 font-medium">
<i class="fa-solid fa-envelope mr-2"></i>
                                Send Reminders
                            </button>
<button class="px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 font-medium">
                                Bulk Actions
                            </button>
</div>
</div>
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<div class="p-5 bg-yellow-50 border border-yellow-200 rounded-lg">
<div class="flex items-start space-x-4">
<div class="bg-yellow-100 p-2 rounded-full">
<i class="fa-solid fa-file-alt text-yellow-600"></i>
</div>
<div class="flex-1">
<div class="flex items-center justify-between mb-2">
<h4 class="font-semibold text-gray-900">Property Valuation Report</h4>
<span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full font-medium">DUE TODAY</span>
</div>
<p class="text-gray-700 mb-3">Bermondsey Industrial Unit - Third-party valuation approval</p>
<div class="grid grid-cols-2 gap-3 text-sm mb-4">
<div>
<span class="text-gray-500">Deal Value:</span>
<span class="font-medium text-gray-900 ml-1">£1,350,000</span>
</div>
<div>
<span class="text-gray-500">Approver:</span>
<span class="font-medium text-gray-900 ml-1">Michael Chen</span>
</div>
</div>
<div class="flex space-x-2">
<button class="px-3 py-1.5 bg-white border border-yellow-300 text-yellow-700 rounded text-sm hover:bg-yellow-50">
                                            View Details
                                        </button>
<button class="px-3 py-1.5 bg-yellow-600 text-white rounded text-sm hover:bg-yellow-700">
                                            Approve
                                        </button>
</div>
</div>
</div>
</div>
<div class="p-5 bg-yellow-50 border border-yellow-200 rounded-lg">
<div class="flex items-start space-x-4">
<div class="bg-yellow-100 p-2 rounded-full">
<i class="fa-solid fa-handshake text-yellow-600"></i>
</div>
<div class="flex-1">
<div class="flex items-center justify-between mb-2">
<h4 class="font-semibold text-gray-900">Tenant Agreement Terms</h4>
<span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full font-medium">DUE TODAY</span>
</div>
<p class="text-gray-700 mb-3">Westminster Office Space - Lease modification approval</p>
<div class="grid grid-cols-2 gap-3 text-sm mb-4">
<div>
<span class="text-gray-500">Deal Value:</span>
<span class="font-medium text-gray-900 ml-1">£980,000</span>
</div>
<div>
<span class="text-gray-500">Approver:</span>
<span class="font-medium text-gray-900 ml-1">Lisa Rodriguez</span>
</div>
</div>
<div class="flex space-x-2">
<button class="px-3 py-1.5 bg-white border border-yellow-300 text-yellow-700 rounded text-sm hover:bg-yellow-50">
                                            View Details
                                        </button>
<button class="px-3 py-1.5 bg-yellow-600 text-white rounded text-sm hover:bg-yellow-700">
                                            Approve
                                        </button>
</div>
</div>
</div>
</div>
<div class="p-5 bg-yellow-50 border border-yellow-200 rounded-lg">
<div class="flex items-start space-x-4">
<div class="bg-yellow-100 p-2 rounded-full">
<i class="fa-solid fa-shield-alt text-yellow-600"></i>
</div>
<div class="flex-1">
<div class="flex items-center justify-between mb-2">
<h4 class="font-semibold text-gray-900">Insurance Policy Review</h4>
<span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full font-medium">DUE TODAY</span>
</div>
<p class="text-gray-700 mb-3">Camden Market Complex - Updated coverage terms</p>
<div class="grid grid-cols-2 gap-3 text-sm mb-4">
<div>
<span class="text-gray-500">Deal Value:</span>
<span class="font-medium text-gray-900 ml-1">£3,200,000</span>
</div>
<div>
<span class="text-gray-500">Approver:</span>
<span class="font-medium text-gray-900 ml-1">David Kim</span>
</div>
</div>
<div class="flex space-x-2">
<button class="px-3 py-1.5 bg-white border border-yellow-300 text-yellow-700 rounded text-sm hover:bg-yellow-50">
                                            View Details
                                        </button>
<button class="px-3 py-1.5 bg-yellow-600 text-white rounded text-sm hover:bg-yellow-700">
                                            Approve
                                        </button>
</div>
</div>
</div>
</div>
<div class="p-5 bg-yellow-50 border border-yellow-200 rounded-lg">
<div class="flex items-start space-x-4">
<div class="bg-yellow-100 p-2 rounded-full">
<i class="fa-solid fa-chart-line text-yellow-600"></i>
</div>
<div class="flex-1">
<div class="flex items-center justify-between mb-2">
<h4 class="font-semibold text-gray-900">Market Analysis Report</h4>
<span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full font-medium">DUE TODAY</span>
</div>
<p class="text-gray-700 mb-3">Hackney Creative Hub - Comparative market study</p>
<div class="grid grid-cols-2 gap-3 text-sm mb-4">
<div>
<span class="text-gray-500">Deal Value:</span>
<span class="font-medium text-gray-900 ml-1">£1,750,000</span>
</div>
<div>
<span class="text-gray-500">Approver:</span>
<span class="font-medium text-gray-900 ml-1">Emma Thompson</span>
</div>
</div>
<div class="flex space-x-2">
<button class="px-3 py-1.5 bg-white border border-yellow-300 text-yellow-700 rounded text-sm hover:bg-yellow-50">
                                            View Details
                                        </button>
<button class="px-3 py-1.5 bg-yellow-600 text-white rounded text-sm hover:bg-yellow-700">
                                            Approve
                                        </button>
</div>
</div>
</div>
</div>
<div class="p-5 bg-yellow-50 border border-yellow-200 rounded-lg">
<div class="flex items-start space-x-4">
<div class="bg-yellow-100 p-2 rounded-full">
<i class="fa-solid fa-wrench text-yellow-600"></i>
</div>
<div class="flex-1">
<div class="flex items-center justify-between mb-2">
<h4 class="font-semibold text-gray-900">Building Survey Results</h4>
<span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full font-medium">DUE TODAY</span>
</div>
<p class="text-gray-700 mb-3">Greenwich Warehouse - Structural assessment approval</p>
<div class="grid grid-cols-2 gap-3 text-sm mb-4">
<div>
<span class="text-gray-500">Deal Value:</span>
<span class="font-medium text-gray-900 ml-1">£2,100,000</span>
</div>
<div>
<span class="text-gray-500">Approver:</span>
<span class="font-medium text-gray-900 ml-1">Tom Wilson</span>
</div>
</div>
<div class="flex space-x-2">
<button class="px-3 py-1.5 bg-white border border-yellow-300 text-yellow-700 rounded text-sm hover:bg-yellow-50">
                                            View Details
                                        </button>
<button class="px-3 py-1.5 bg-yellow-600 text-white rounded text-sm hover:bg-yellow-700">
                                            Approve
                                        </button>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="mb-8" id="all-approvals-table-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">All Pending Approvals</h3>
<div class="flex items-center space-x-3">
<button data-export="data"  class="px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50"></i>Export</button>
<button class="px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50">
<i class="fa-solid fa-cog mr-2"></i>Columns
                            </button>
</div>
</div>
<div class="overflow-x-auto">
<table class="w-full">
<thead>
<tr class="border-b border-gray-200">
<th class="text-left py-4 px-4">
<input class="rounded border-gray-300 focus:ring-blue-500" type="checkbox"/>
</th>
<th class="text-left py-4 px-4 font-medium text-gray-600">Priority</th>
<th class="text-left py-4 px-4 font-medium text-gray-600">Approval Type</th>
<th class="text-left py-4 px-4 font-medium text-gray-600">Deal/Document</th>
<th class="text-left py-4 px-4 font-medium text-gray-600">Role</th>
<th class="text-left py-4 px-4 font-medium text-gray-600">Approver</th>
<th class="text-left py-4 px-4 font-medium text-gray-600">Value</th>
<th class="text-left py-4 px-4 font-medium text-gray-600">Due Date</th>
<th class="text-left py-4 px-4 font-medium text-gray-600">SLA Status</th>
<th class="text-left py-4 px-4 font-medium text-gray-600">Actions</th>
</tr>
</thead>
<tbody class="divide-y divide-gray-100">
<tr class="hover:bg-gray-50 bg-red-50">
<td class="py-4 px-4">
<input class="rounded border-gray-300 focus:ring-blue-500" type="checkbox"/>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
<i class="fa-solid fa-exclamation-triangle mr-1"></i>
                                            Critical
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<i class="fa-solid fa-file-contract text-blue-600"></i>
<span class="font-medium text-gray-900">HoT Version</span>
</div>
</td>
<td class="py-4 px-4">
<div>
<div class="font-medium text-gray-900">Canary Wharf Office</div>
<div class="text-sm text-gray-500">HoT_v3.2_Legal_Review</div>
</div>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                            Legal
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<img alt="Approver" class="w-8 h-8 rounded-full mr-2" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg"/>
<div>
<div class="text-sm font-medium text-gray-900">Sarah Mitchell</div>
<div class="text-xs text-gray-500">Legal Counsel</div>
</div>
</div>
</td>
<td class="py-4 px-4 font-medium text-gray-900">£2,100,000</td>
<td class="py-4 px-4">
<div class="text-red-600 font-medium">Nov 10, 2024</div>
<div class="text-xs text-red-600">3 days overdue</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<div class="w-16 bg-red-200 rounded-full h-2 mr-2">
<div class="bg-red-500 h-2 rounded-full" style="width: 100%"></div>
</div>
<span class="text-xs text-red-600 font-medium">Breached</span>
</div>
</td>
<td class="py-4 px-4">
<div class="flex space-x-2">
<button class="text-blue-600 hover:text-blue-800 text-sm" data-action="add-comment" data-item-type="deal">Review</button>
<button class="text-red-600 hover:text-red-800 text-sm" data-action="escalate" data-item-type="deal">Escalate</button>
</div>
</td>
</tr>
<tr class="hover:bg-gray-50 bg-red-50">
<td class="py-4 px-4">
<input class="rounded border-gray-300 focus:ring-blue-500" type="checkbox"/>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
<i class="fa-solid fa-exclamation-triangle mr-1"></i>
                                            High
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<i class="fa-solid fa-file-signature text-purple-600"></i>
<span class="font-medium text-gray-900">Contract</span>
</div>
</td>
<td class="py-4 px-4">
<div>
<div class="font-medium text-gray-900">Kings Cross Development</div>
<div class="text-sm text-gray-500">Final_Contract_Executive_Review</div>
</div>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                                            Executive
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<img alt="Approver" class="w-8 h-8 rounded-full mr-2" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg"/>
<div>
<div class="text-sm font-medium text-gray-900">James Patterson</div>
<div class="text-xs text-gray-500">Managing Director</div>
</div>
</div>
</td>
<td class="py-4 px-4 font-medium text-gray-900">£4,200,000</td>
<td class="py-4 px-4">
<div class="text-red-600 font-medium">Nov 12, 2024</div>
<div class="text-xs text-red-600">1 day overdue</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<div class="w-16 bg-red-200 rounded-full h-2 mr-2">
<div class="bg-red-500 h-2 rounded-full" style="width: 100%"></div>
</div>
<span class="text-xs text-red-600 font-medium">Breached</span>
</div>
</td>
<td class="py-4 px-4">
<div class="flex space-x-2">
<button class="text-blue-600 hover:text-blue-800 text-sm" data-action="add-comment" data-item-type="deal">Review</button>
<button class="text-red-600 hover:text-red-800 text-sm" data-action="escalate" data-item-type="deal">Escalate</button>
</div>
</td>
</tr>
<tr class="hover:bg-gray-50 bg-red-50">
<td class="py-4 px-4">
<input class="rounded border-gray-300 focus:ring-blue-500" type="checkbox"/>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
<i class="fa-solid fa-exclamation mr-1"></i>
                                            Medium
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<i class="fa-solid fa-calculator text-green-600"></i>
<span class="font-medium text-gray-900">Document</span>
</div>
</td>
<td class="py-4 px-4">
<div>
<div class="font-medium text-gray-900">Shoreditch Retail Space</div>
<div class="text-sm text-gray-500">Financial_Model_v2.1</div>
</div>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                            Finance
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<img alt="Approver" class="w-8 h-8 rounded-full mr-2" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg"/>
<div>
<div class="text-sm font-medium text-gray-900">Rachel Green</div>
<div class="text-xs text-gray-500">Finance Director</div>
</div>
</div>
</td>
<td class="py-4 px-4 font-medium text-gray-900">£850,000</td>
<td class="py-4 px-4">
<div class="text-red-600 font-medium">Nov 11, 2024</div>
<div class="text-xs text-red-600">2 days overdue</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<div class="w-16 bg-red-200 rounded-full h-2 mr-2">
<div class="bg-red-500 h-2 rounded-full" style="width: 100%"></div>
</div>
<span class="text-xs text-red-600 font-medium">Breached</span>
</div>
</td>
<td class="py-4 px-4">
<div class="flex space-x-2">
<button class="text-blue-600 hover:text-blue-800 text-sm" data-action="add-comment" data-item-type="deal">Review</button>
<button class="text-red-600 hover:text-red-800 text-sm" data-action="escalate" data-item-type="deal">Escalate</button>
</div>
</td>
</tr>
<tr class="hover:bg-gray-50 bg-yellow-50">
<td class="py-4 px-4">
<input class="rounded border-gray-300 focus:ring-blue-500" type="checkbox"/>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
<i class="fa-solid fa-clock mr-1"></i>
                                            High
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<i class="fa-solid fa-file-alt text-orange-600"></i>
<span class="font-medium text-gray-900">Document</span>
</div>
</td>
<td class="py-4 px-4">
<div>
<div class="font-medium text-gray-900">Bermondsey Industrial Unit</div>
<div class="text-sm text-gray-500">Property_Valuation_Report</div>
</div>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                            Delivery
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<img alt="Approver" class="w-8 h-8 rounded-full mr-2" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg"/>
<div>
<div class="text-sm font-medium text-gray-900">Michael Chen</div>
<div class="text-xs text-gray-500">Delivery Manager</div>
</div>
</div>
</td>
<td class="py-4 px-4 font-medium text-gray-900">£1,350,000</td>
<td class="py-4 px-4">
<div class="text-yellow-600 font-medium">Nov 13, 2024</div>
<div class="text-xs text-yellow-600">Due today</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<div class="w-16 bg-yellow-200 rounded-full h-2 mr-2">
<div class="bg-yellow-500 h-2 rounded-full" style="width: 85%"></div>
</div>
<span class="text-xs text-yellow-600 font-medium">Due Soon</span>
</div>
</td>
<td class="py-4 px-4">
<div class="flex space-x-2">
<button class="text-blue-600 hover:text-blue-800 text-sm" data-action="add-comment" data-item-type="deal">Review</button>
<button class="text-yellow-600 hover:text-yellow-800 text-sm">Remind</button>
</div>
</td>
</tr>
<tr class="hover:bg-gray-50 bg-yellow-50">
<td class="py-4 px-4">
<input class="rounded border-gray-300 focus:ring-blue-500" type="checkbox"/>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
<i class="fa-solid fa-clock mr-1"></i>
                                            Medium
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<i class="fa-solid fa-handshake text-blue-600"></i>
<span class="font-medium text-gray-900">HoT Version</span>
</div>
</td>
<td class="py-4 px-4">
<div>
<div class="font-medium text-gray-900">Westminster Office Space</div>
<div class="text-sm text-gray-500">Tenant_Agreement_v1.3</div>
</div>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                            Legal
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<img alt="Approver" class="w-8 h-8 rounded-full mr-2" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-6.jpg"/>
<div>
<div class="text-sm font-medium text-gray-900">Lisa Rodriguez</div>
<div class="text-xs text-gray-500">Senior Legal Advisor</div>
</div>
</div>
</td>
<td class="py-4 px-4 font-medium text-gray-900">£980,000</td>
<td class="py-4 px-4">
<div class="text-yellow-600 font-medium">Nov 13, 2024</div>
<div class="text-xs text-yellow-600">Due today</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<div class="w-16 bg-yellow-200 rounded-full h-2 mr-2">
<div class="bg-yellow-500 h-2 rounded-full" style="width: 80%"></div>
</div>
<span class="text-xs text-yellow-600 font-medium">Due Soon</span>
</div>
</td>
<td class="py-4 px-4">
<div class="flex space-x-2">
<button class="text-blue-600 hover:text-blue-800 text-sm" data-action="add-comment" data-item-type="deal">Review</button>
<button class="text-yellow-600 hover:text-yellow-800 text-sm">Remind</button>
</div>
</td>
</tr>
<tr class="hover:bg-gray-50">
<td class="py-4 px-4">
<input class="rounded border-gray-300 focus:ring-blue-500" type="checkbox"/>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
<i class="fa-solid fa-info mr-1"></i>
                                            Medium
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<i class="fa-solid fa-shield-alt text-green-600"></i>
<span class="font-medium text-gray-900">Document</span>
</div>
</td>
<td class="py-4 px-4">
<div>
<div class="font-medium text-gray-900">Camden Market Complex</div>
<div class="text-sm text-gray-500">Insurance_Policy_Review</div>
</div>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                            Finance
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<img alt="Approver" class="w-8 h-8 rounded-full mr-2" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-8.jpg"/>
<div>
<div class="text-sm font-medium text-gray-900">David Kim</div>
<div class="text-xs text-gray-500">Risk Manager</div>
</div>
</div>
</td>
<td class="py-4 px-4 font-medium text-gray-900">£3,200,000</td>
<td class="py-4 px-4">
<div class="text-blue-600 font-medium">Nov 15, 2024</div>
<div class="text-xs text-blue-600">2 days remaining</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<div class="w-16 bg-blue-200 rounded-full h-2 mr-2">
<div class="bg-blue-500 h-2 rounded-full" style="width: 60%"></div>
</div>
<span class="text-xs text-blue-600 font-medium">On Track</span>
</div>
</td>
<td class="py-4 px-4">
<div class="flex space-x-2">
<button class="text-blue-600 hover:text-blue-800 text-sm" data-action="add-comment" data-item-type="deal">Review</button>
<button class="text-gray-600 hover:text-gray-800 text-sm">View</button>
</div>
</td>
</tr>
<tr class="hover:bg-gray-50">
<td class="py-4 px-4">
<input class="rounded border-gray-300 focus:ring-blue-500" type="checkbox"/>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
<i class="fa-solid fa-info mr-1"></i>
                                            Low
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<i class="fa-solid fa-chart-line text-purple-600"></i>
<span class="font-medium text-gray-900">Document</span>
</div>
</td>
<td class="py-4 px-4">
<div>
<div class="font-medium text-gray-900">Hackney Creative Hub</div>
<div class="text-sm text-gray-500">Market_Analysis_Report</div>
</div>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                            Delivery
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<img alt="Approver" class="w-8 h-8 rounded-full mr-2" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-7.jpg"/>
<div>
<div class="text-sm font-medium text-gray-900">Emma Thompson</div>
<div class="text-xs text-gray-500">Market Analyst</div>
</div>
</div>
</td>
<td class="py-4 px-4 font-medium text-gray-900">£1,750,000</td>
<td class="py-4 px-4">
<div class="text-blue-600 font-medium">Nov 16, 2024</div>
<div class="text-xs text-blue-600">3 days remaining</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<div class="w-16 bg-green-200 rounded-full h-2 mr-2">
<div class="bg-green-500 h-2 rounded-full" style="width: 40%"></div>
</div>
<span class="text-xs text-green-600 font-medium">Healthy</span>
</div>
</td>
<td class="py-4 px-4">
<div class="flex space-x-2">
<button class="text-blue-600 hover:text-blue-800 text-sm" data-action="add-comment" data-item-type="deal">Review</button>
<button class="text-gray-600 hover:text-gray-800 text-sm">View</button>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="flex items-center justify-between mt-6 pt-4 border-t border-gray-200">
<div class="text-sm text-gray-500">
                            Showing 1 to 8 of 17 results
                        </div>
<div class="flex items-center space-x-2">
<button class="px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50 disabled:opacity-50" disabled="">
                                Previous
                            </button>
<button class="px-3 py-2 bg-blue-600 text-white rounded-lg text-sm">1</button>
<button class="px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50">2</button>
<button class="px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50">3</button>
<button class="px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50">
                                Next
                            </button>
</div>
</div>
</div>
</section>
<section class="mb-8" id="approval-analytics-section">
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<!-- Card 1: Approval Timeline Trends -->
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-4">
<h3 class="text-lg font-semibold text-gray-900">Approval Timeline Trends</h3>
<div class="flex items-center space-x-2">
<select class="text-sm border border-gray-300 rounded-lg px-3 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500">
<option>Last 7 days</option>
<option selected>Last 30 days</option>
<option>This Quarter</option>
<option>Custom</option>
</select>
</div>
</div>
<div class="h-80" id="approval-timeline-chart"></div>
<!-- Insights Section -->
<div class="mt-6 grid grid-cols-3 gap-4"></div>
</div>
<!-- Card 2: Approval by Role Distribution -->
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-4">
<h3 class="text-lg font-semibold text-gray-900">Approvals by Role Distribution</h3>
<button class="text-sm text-blue-600 hover:text-blue-700 font-medium">
View All Roles
</button>
</div>
<div class="h-80" id="approval-role-chart"></div>
<!-- Top Roles Section -->
<div class="mt-6">
<h4 class="text-sm font-semibold text-gray-700 mb-3">Top Performing Roles</h4>
<div class="space-y-3"></div>
</div>
</div>
</div>
</section>
<section class="mb-8" id="approver-performance-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Approver Performance</h3>
<div class="flex items-center space-x-2">
<button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Week</button>
<button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Month</button>
<button class="px-3 py-1 text-sm bg-blue-600 text-white rounded-lg">This Quarter</button>
</div>
</div>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
<div class="p-5 border border-gray-200 rounded-lg">
<div class="flex items-center space-x-4">
<img alt="Approver" class="w-12 h-12 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg"/>
<div class="flex-1">
<h4 class="font-semibold text-gray-900">Sarah Mitchell</h4>
<p class="text-sm text-gray-500">Legal Counsel</p>
<div class="flex items-center mt-2">
<div class="w-20 bg-red-200 rounded-full h-2 mr-2">
<div class="bg-red-500 h-2 rounded-full" style="width: 65%"></div>
</div>
<span class="text-xs text-red-600">65% SLA</span>
</div>
</div>
</div>
<div class="mt-4 grid grid-cols-2 gap-2 text-sm">
<div>
<span class="text-gray-500">Pending:</span>
<span class="font-medium text-red-600 ml-1">4</span>
</div>
<div>
<span class="text-gray-500">Avg Time:</span>
<span class="font-medium text-gray-900 ml-1">3.2d</span>
</div>
</div>
</div>
<div class="p-5 border border-gray-200 rounded-lg">
<div class="flex items-center space-x-4">
<img alt="Approver" class="w-12 h-12 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg"/>
<div class="flex-1">
<h4 class="font-semibold text-gray-900">James Patterson</h4>
<p class="text-sm text-gray-500">Managing Director</p>
<div class="flex items-center mt-2">
<div class="w-20 bg-yellow-200 rounded-full h-2 mr-2">
<div class="bg-yellow-500 h-2 rounded-full" style="width: 78%"></div>
</div>
<span class="text-xs text-yellow-600">78% SLA</span>
</div>
</div>
</div>
<div class="mt-4 grid grid-cols-2 gap-2 text-sm">
<div>
<span class="text-gray-500">Pending:</span>
<span class="font-medium text-orange-600 ml-1">3</span>
</div>
<div>
<span class="text-gray-500">Avg Time:</span>
<span class="font-medium text-gray-900 ml-1">2.8d</span>
</div>
</div>
</div>
<div class="p-5 border border-gray-200 rounded-lg">
<div class="flex items-center space-x-4">
<img alt="Approver" class="w-12 h-12 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg"/>
<div class="flex-1">
<h4 class="font-semibold text-gray-900">Rachel Green</h4>
<p class="text-sm text-gray-500">Finance Director</p>
<div class="flex items-center mt-2">
<div class="w-20 bg-green-200 rounded-full h-2 mr-2">
<div class="bg-green-500 h-2 rounded-full" style="width: 92%"></div>
</div>
<span class="text-xs text-green-600">92% SLA</span>
</div>
</div>
</div>
<div class="mt-4 grid grid-cols-2 gap-2 text-sm">
<div>
<span class="text-gray-500">Pending:</span>
<span class="font-medium text-blue-600 ml-1">2</span>
</div>
<div>
<span class="text-gray-500">Avg Time:</span>
<span class="font-medium text-gray-900 ml-1">1.8d</span>
</div>
</div>
</div>
<div class="p-5 border border-gray-200 rounded-lg">
<div class="flex items-center space-x-4">
<img alt="Approver" class="w-12 h-12 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg"/>
<div class="flex-1">
<h4 class="font-semibold text-gray-900">Michael Chen</h4>
<p class="text-sm text-gray-500">Delivery Manager</p>
<div class="flex items-center mt-2">
<div class="w-20 bg-green-200 rounded-full h-2 mr-2">
<div class="bg-green-500 h-2 rounded-full" style="width: 88%"></div>
</div>
<span class="text-xs text-green-600">88% SLA</span>
</div>
</div>
</div>
<div class="mt-4 grid grid-cols-2 gap-2 text-sm">
<div>
<span class="text-gray-500">Pending:</span>
<span class="font-medium text-blue-600 ml-1">2</span>
</div>
<div>
<span class="text-gray-500">Avg Time:</span>
<span class="font-medium text-gray-900 ml-1">2.1d</span>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="mb-8" id="approval-workflow-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Approval Workflow Status</h3>
<button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium">
<i class="fa-solid fa-plus mr-2"></i>
                            Create Workflow
                        </button>
</div>
<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
<div class="p-5 bg-blue-50 border border-blue-200 rounded-lg">
<div class="flex items-center space-x-3 mb-4">
<div class="bg-blue-100 p-2 rounded-full">
<i class="fa-solid fa-file-contract text-blue-600"></i>
</div>
<div>
<h4 class="font-semibold text-gray-900">HoT Approval Workflow</h4>
<p class="text-sm text-gray-500">Standard process for Heads of Terms</p>
</div>
</div>
<div class="space-y-3">
<div class="flex items-center justify-between p-3 bg-white rounded border">
<div class="flex items-center space-x-2">
<div class="w-3 h-3 bg-green-500 rounded-full"></div>
<span class="text-sm font-medium">Legal Review</span>
</div>
<span class="text-xs text-green-600">Completed</span>
</div>
<div class="flex items-center justify-between p-3 bg-white rounded border border-yellow-300">
<div class="flex items-center space-x-2">
<div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
<span class="text-sm font-medium">Finance Review</span>
</div>
<span class="text-xs text-yellow-600">In Progress</span>
</div>
<div class="flex items-center justify-between p-3 bg-gray-50 rounded border">
<div class="flex items-center space-x-2">
<div class="w-3 h-3 bg-gray-300 rounded-full"></div>
<span class="text-sm font-medium">Executive Sign-off</span>
</div>
<span class="text-xs text-gray-500">Pending</span>
</div>
</div>
</div>
<div class="p-5 bg-purple-50 border border-purple-200 rounded-lg">
<div class="flex items-center space-x-3 mb-4">
<div class="bg-purple-100 p-2 rounded-full">
<i class="fa-solid fa-file-signature text-purple-600"></i>
</div>
<div>
<h4 class="font-semibold text-gray-900">Contract Approval Workflow</h4>
<p class="text-sm text-gray-500">Multi-stage contract review process</p>
</div>
</div>
<div class="space-y-3">
<div class="flex items-center justify-between p-3 bg-white rounded border">
<div class="flex items-center space-x-2">
<div class="w-3 h-3 bg-green-500 rounded-full"></div>
<span class="text-sm font-medium">Legal Review</span>
</div>
<span class="text-xs text-green-600">Completed</span>
</div>
<div class="flex items-center justify-between p-3 bg-white rounded border">
<div class="flex items-center space-x-2">
<div class="w-3 h-3 bg-green-500 rounded-full"></div>
<span class="text-sm font-medium">Finance Review</span>
</div>
<span class="text-xs text-green-600">Completed</span>
</div>
<div class="flex items-center justify-between p-3 bg-white rounded border border-red-300">
<div class="flex items-center space-x-2">
<div class="w-3 h-3 bg-red-500 rounded-full"></div>
<span class="text-sm font-medium">Executive Sign-off</span>
</div>
<span class="text-xs text-red-600">Overdue</span>
</div>
</div>
</div>
<div class="p-5 bg-green-50 border border-green-200 rounded-lg">
<div class="flex items-center space-x-3 mb-4">
<div class="bg-green-100 p-2 rounded-full">
<i class="fa-solid fa-folder text-green-600"></i>
</div>
<div>
<h4 class="font-semibold text-gray-900">Document Approval Workflow</h4>
<p class="text-sm text-gray-500">General document review process</p>
</div>
</div>
<div class="space-y-3">
<div class="flex items-center justify-between p-3 bg-white rounded border border-yellow-300">
<div class="flex items-center space-x-2">
<div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
<span class="text-sm font-medium">Initial Review</span>
</div>
<span class="text-xs text-yellow-600">In Progress</span>
</div>
<div class="flex items-center justify-between p-3 bg-gray-50 rounded border">
<div class="flex items-center space-x-2">
<div class="w-3 h-3 bg-gray-300 rounded-full"></div>
<span class="text-sm font-medium">Stakeholder Review</span>
</div>
<span class="text-xs text-gray-500">Pending</span>
</div>
<div class="flex items-center justify-between p-3 bg-gray-50 rounded border">
<div class="flex items-center space-x-2">
<div class="w-3 h-3 bg-gray-300 rounded-full"></div>
<span class="text-sm font-medium">Final Approval</span>
</div>
<span class="text-xs text-gray-500">Pending</span>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="mb-8" id="recent-approvals-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Recent Approval Activity</h3>
<button class="text-sm text-blue-600 hover:text-blue-700">View All Activity</button>
</div>
<div class="space-y-6">
<div class="flex items-start space-x-4">
<div class="flex-shrink-0">
<div class="bg-green-100 p-2 rounded-full">
<i class="fa-solid fa-check text-green-600"></i>
</div>
</div>
<div class="flex-1">
<div class="flex items-center space-x-2">
<span class="font-medium text-gray-900">Rachel Green</span>
<span class="text-gray-500">approved</span>
<span class="text-blue-600 font-medium">Financial Model v1.8</span>
</div>
<p class="text-sm text-gray-500 mt-1">Bermondsey Industrial Unit • 1 hour ago</p>
</div>
<div class="text-right">
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                    Approved
                                </span>
</div>
</div>
<div class="flex items-start space-x-4">
<div class="flex-shrink-0">
<div class="bg-red-100 p-2 rounded-full">
<i class="fa-solid fa-times text-red-600"></i>
</div>
</div>
<div class="flex-1">
<div class="flex items-center space-x-2">
<span class="font-medium text-gray-900">James Patterson</span>
<span class="text-gray-500">rejected</span>
<span class="text-red-600 font-medium">Contract Amendment v2.1</span>
</div>
<p class="text-sm text-gray-500 mt-1">Westminster Office Space • 2 hours ago</p>
<p class="text-sm text-red-600 mt-1">Reason: Terms need revision for compliance</p>
</div>
<div class="text-right">
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                    Rejected
                                </span>
</div>
</div>
<div class="flex items-start space-x-4">
<div class="flex-shrink-0">
<div class="bg-blue-100 p-2 rounded-full">
<i class="fa-solid fa-arrow-up text-blue-600"></i>
</div>
</div>
<div class="flex-1">
<div class="flex items-center space-x-2">
<span class="font-medium text-gray-900">Michael Chen</span>
<span class="text-gray-500">escalated</span>
<span class="text-orange-600 font-medium">Property Survey Report</span>
</div>
<p class="text-sm text-gray-500 mt-1">Camden Market Complex • 3 hours ago</p>
</div>
<div class="text-right">
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                    Escalated
                                </span>
</div>
</div>
<div class="flex items-start space-x-4">
<div class="flex-shrink-0">
<div class="bg-green-100 p-2 rounded-full">
<i class="fa-solid fa-check text-green-600"></i>
</div>
</div>
<div class="flex-1">
<div class="flex items-center space-x-2">
<span class="font-medium text-gray-900">Lisa Rodriguez</span>
<span class="text-gray-500">approved</span>
<span class="text-blue-600 font-medium">HoT Version 2.9</span>
</div>
<p class="text-sm text-gray-500 mt-1">Hackney Creative Hub • 4 hours ago</p>
</div>
<div class="text-right">
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                    Approved
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>
    <!-- END APPROVAL REQUESTS PAGE -->

            <!-- RISK ASSESSMENT PAGE -->
<div id="risk-assessment-page" class="page-content hidden">
<main class="flex-1 overflow-y-auto p-6" id="risk-main">
<!-- COMPONENT: Risk Overview Section -->
<section class="mb-8" id="risk-overview-section">
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">Total Risks</p>
<p class="text-3xl font-bold text-gray-900 mt-2">47</p>
<div class="flex items-center mt-2">
<span class="text-red-600 text-sm font-medium">+3</span>
<span class="text-gray-500 text-sm ml-2">this week</span>
</div>
</div>
<div class="bg-gray-100 p-3 rounded-full">
<i class="fa-solid fa-exclamation-triangle text-gray-600 text-xl"></i>
</div>
</div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">High Risk Deals</p>
<p class="text-3xl font-bold text-red-600 mt-2">8</p>
<div class="flex items-center mt-2">
<span class="text-red-600 text-sm font-medium">+2</span>
<span class="text-gray-500 text-sm ml-2">vs last week</span>
</div>
</div>
<div class="bg-red-100 p-3 rounded-full">
<i class="fa-solid fa-exclamation-circle text-red-600 text-xl"></i>
</div>
</div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">Medium Risk Deals</p>
<p class="text-3xl font-bold text-yellow-600 mt-2">15</p>
<div class="flex items-center mt-2">
<span class="text-yellow-600 text-sm font-medium">+1</span>
<span class="text-gray-500 text-sm ml-2">vs last week</span>
</div>
</div>
<div class="bg-yellow-100 p-3 rounded-full">
<i class="fa-solid fa-exclamation-triangle text-yellow-600 text-xl"></i>
</div>
</div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">Low Risk Deals</p>
<p class="text-3xl font-bold text-green-600 mt-2">24</p>
<div class="flex items-center mt-2">
<span class="text-green-600 text-sm font-medium">-1</span>
<span class="text-gray-500 text-sm ml-2">vs last week</span>
</div>
</div>
<div class="bg-green-100 p-3 rounded-full">
<i class="fa-solid fa-check-circle text-green-600 text-xl"></i>
</div>
</div>
</div>
</div>
</section>
<!-- COMPONENT: Risk Distribution Charts -->
<section class="mb-8" id="risk-charts-section">
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<h3 class="text-lg font-semibold text-gray-900 mb-4">Risk Level Distribution</h3>
<div class="h-80" id="risk-distribution-chart"></div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<h3 class="text-lg font-semibold text-gray-900 mb-4">Risk Trends Over Time</h3>
<div class="h-80" id="risk-trends-chart"></div>
</div>
</div>
</section>
<!-- COMPONENT: Risk Assessment Dashboard -->
<section class="mb-8" id="risk-assessment-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Risk Assessment Dashboard</h3>
<div class="flex items-center space-x-3">
<button class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm">
<i class="fa-solid fa-filter mr-2"></i>Filter by Level
                            </button>
<button class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm">
<i class="fa-solid fa-sort mr-2"></i>Sort by Date
                            </button>
<button data-export="data"  class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm"></i>ExportReport
                            </button>
</div>
</div>
<div class="grid grid-cols-1 md:grid-cols-3 gap-6">
<div class="bg-gradient-to-br from-red-50 to-red-100 p-6 rounded-lg border-l-4 border-red-500">
<div class="flex items-center justify-between mb-4">
<h4 class="text-lg font-semibold text-red-900">High Risk</h4>
<div class="bg-red-500 text-white px-3 py-1 rounded-full text-sm font-medium">8</div>
</div>
<p class="text-red-700 text-sm mb-4">Immediate attention required for these deals</p>
<div class="space-y-3">
<div class="bg-white p-3 rounded-lg shadow-sm">
<div class="flex items-center justify-between">
<span class="font-medium text-gray-900">Kings Cross Development</span>
<span class="text-red-600 text-sm">Critical</span>
</div>
<p class="text-sm text-gray-600 mt-1">Planning permission delays</p>
</div>
<div class="bg-white p-3 rounded-lg shadow-sm">
<div class="flex items-center justify-between">
<span class="font-medium text-gray-900">Canary Wharf Office</span>
<span class="text-red-600 text-sm">High</span>
</div>
<p class="text-sm text-gray-600 mt-1">Legal compliance issues</p>
</div>
</div>
</div>
<div class="bg-gradient-to-br from-yellow-50 to-yellow-100 p-6 rounded-lg border-l-4 border-yellow-500">
<div class="flex items-center justify-between mb-4">
<h4 class="text-lg font-semibold text-yellow-900">Medium Risk</h4>
<div class="bg-yellow-500 text-white px-3 py-1 rounded-full text-sm font-medium">15</div>
</div>
<p class="text-yellow-700 text-sm mb-4">Monitor closely for potential escalation</p>
<div class="space-y-3">
<div class="bg-white p-3 rounded-lg shadow-sm">
<div class="flex items-center justify-between">
<span class="font-medium text-gray-900">Bermondsey Warehouse</span>
<span class="text-yellow-600 text-sm">Medium</span>
</div>
<p class="text-sm text-gray-600 mt-1">Market volatility concerns</p>
</div>
<div class="bg-white p-3 rounded-lg shadow-sm">
<div class="flex items-center justify-between">
<span class="font-medium text-gray-900">Greenwich Retail Park</span>
<span class="text-yellow-600 text-sm">Medium</span>
</div>
<p class="text-sm text-gray-600 mt-1">Timeline pressure</p>
</div>
</div>
</div>
<div class="bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-lg border-l-4 border-green-500">
<div class="flex items-center justify-between mb-4">
<h4 class="text-lg font-semibold text-green-900">Low Risk</h4>
<div class="bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium">24</div>
</div>
<p class="text-green-700 text-sm mb-4">Routine monitoring and standard procedures</p>
<div class="space-y-3">
<div class="bg-white p-3 rounded-lg shadow-sm">
<div class="flex items-center justify-between">
<span class="font-medium text-gray-900">Shoreditch Retail Space</span>
<span class="text-green-600 text-sm">Low</span>
</div>
<p class="text-sm text-gray-600 mt-1">Standard contract terms</p>
</div>
<div class="bg-white p-3 rounded-lg shadow-sm">
<div class="flex items-center justify-between">
<span class="font-medium text-gray-900">City Office Complex</span>
<span class="text-green-600 text-sm">Low</span>
</div>
<p class="text-sm text-gray-600 mt-1">Established tenant</p>
</div>
</div>
</div>
</div>
</div>
</section>
<!-- COMPONENT: Detailed Risk Register -->
<section class="mb-8" id="risk-register-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Detailed Risk Register</h3>
<div class="flex items-center space-x-3">
<div class="relative">
<input class="pl-8 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Filter by deal, risk type..." type="text"/>
<i class="fa-solid fa-search absolute left-2.5 top-2.5 text-gray-400 text-sm"></i>
</div>
<select class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
<option>All Risk Levels</option>
<option>High Risk</option>
<option>Medium Risk</option>
<option>Low Risk</option>
</select>
<select class="px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
<option>All Deal Stages</option>
<option>Lead</option>
<option>Proposal</option>
<option>HoTs</option>
<option>Contract</option>
</select>
</div>
</div>
<div class="overflow-x-auto">
<table class="w-full">
<thead>
<tr class="border-b border-gray-200">
<th class="text-left py-3 px-4 font-medium text-gray-600">Deal Name</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Risk Level</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Risk Drivers</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Notes</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Last Updated</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Owner</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Actions</th>
</tr>
</thead>
<tbody class="divide-y divide-gray-100">
<tr class="hover:bg-gray-50">
<td class="py-4 px-4">
<div class="font-medium text-gray-900">Kings Cross Development</div>
<div class="text-sm text-gray-500">DL_KC_2024_003 • Mixed Use</div>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800">
<i class="fa-solid fa-exclamation-triangle mr-2"></i>
                                            High
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex flex-wrap gap-1">
<span class="inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-red-50 text-red-700 border border-red-200">
                                                Planning Delays
                                            </span>
<span class="inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-red-50 text-red-700 border border-red-200">
                                                Regulatory Compliance
                                            </span>
<span class="inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-red-50 text-red-700 border border-red-200">
                                                Budget Overrun
                                            </span>
</div>
</td>
<td class="py-4 px-4 max-w-xs">
<p class="text-sm text-gray-600 truncate">Planning permission delays may impact project timeline significantly. Environmental assessment pending...</p>
</td>
<td class="py-4 px-4">
<div class="text-sm text-gray-900">Nov 10, 2024</div>
<div class="text-xs text-gray-500">2 days ago</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<img alt="Owner" class="w-8 h-8 rounded-full mr-2" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg"/>
<div>
<div class="text-sm font-medium text-gray-900">David Kim</div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<button class="text-blue-600 hover:text-blue-800 text-sm font-medium" data-action="edit" data-item-type="risk" data-item-id="risk-1" data-item-name="Risk Item">Edit</button>
<button class="text-gray-600 hover:text-gray-800 text-sm">View</button>
</div>
</td>
</tr>
<tr class="hover:bg-gray-50">
<td class="py-4 px-4">
<div class="font-medium text-gray-900">Canary Wharf Office</div>
<div class="text-sm text-gray-500">DL_CW_2024_001 • Office</div>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800">
<i class="fa-solid fa-exclamation-triangle mr-2"></i>
                                            High
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex flex-wrap gap-1">
<span class="inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-red-50 text-red-700 border border-red-200">
                                                Legal Compliance
                                            </span>
<span class="inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-red-50 text-red-700 border border-red-200">
                                                Timeline Risk
                                            </span>
</div>
</td>
<td class="py-4 px-4 max-w-xs">
<p class="text-sm text-gray-600 truncate">Legal review taking longer than expected. Potential contract amendments required for compliance...</p>
</td>
<td class="py-4 px-4">
<div class="text-sm text-gray-900">Nov 8, 2024</div>
<div class="text-xs text-gray-500">4 days ago</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<img alt="Owner" class="w-8 h-8 rounded-full mr-2" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg"/>
<div>
<div class="text-sm font-medium text-gray-900">Sarah Chen</div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<button class="text-blue-600 hover:text-blue-800 text-sm font-medium" data-action="edit" data-item-type="risk" data-item-id="risk-2" data-item-name="Risk Item">Edit</button>
<button class="text-gray-600 hover:text-gray-800 text-sm">View</button>
</div>
</td>
</tr>
<tr class="hover:bg-gray-50">
<td class="py-4 px-4">
<div class="font-medium text-gray-900">Bermondsey Warehouse</div>
<div class="text-sm text-gray-500">DL_BW_2024_004 • Industrial</div>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800">
<i class="fa-solid fa-exclamation-triangle mr-2"></i>
                                            Medium
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex flex-wrap gap-1">
<span class="inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-yellow-50 text-yellow-700 border border-yellow-200">
                                                Market Volatility
                                            </span>
<span class="inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-yellow-50 text-yellow-700 border border-yellow-200">
                                                Tenant Credit
                                            </span>
</div>
</td>
<td class="py-4 px-4 max-w-xs">
<p class="text-sm text-gray-600 truncate">Industrial property market showing signs of volatility. Tenant credit rating requires additional review...</p>
</td>
<td class="py-4 px-4">
<div class="text-sm text-gray-900">Nov 9, 2024</div>
<div class="text-xs text-gray-500">3 days ago</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<img alt="Owner" class="w-8 h-8 rounded-full mr-2" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-6.jpg"/>
<div>
<div class="text-sm font-medium text-gray-900">Lisa Wang</div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<button class="text-blue-600 hover:text-blue-800 text-sm font-medium" data-action="edit" data-item-type="risk" data-item-id="risk-3" data-item-name="Risk Item">Edit</button>
<button class="text-gray-600 hover:text-gray-800 text-sm">View</button>
</div>
</td>
</tr>
<tr class="hover:bg-gray-50">
<td class="py-4 px-4">
<div class="font-medium text-gray-900">Shoreditch Retail Space</div>
<div class="text-sm text-gray-500">DL_SH_2024_002 • Retail</div>
</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800">
<i class="fa-solid fa-check-circle mr-2"></i>
                                            Low
                                        </span>
</td>
<td class="py-4 px-4">
<div class="flex flex-wrap gap-1">
<span class="inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-green-50 text-green-700 border border-green-200">
                                                Standard Terms
                                            </span>
<span class="inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-green-50 text-green-700 border border-green-200">
                                                Established Tenant
                                            </span>
</div>
</td>
<td class="py-4 px-4 max-w-xs">
<p class="text-sm text-gray-600 truncate">Standard commercial lease terms with established retail tenant. Low risk profile with good payment history...</p>
</td>
<td class="py-4 px-4">
<div class="text-sm text-gray-900">Nov 7, 2024</div>
<div class="text-xs text-gray-500">5 days ago</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center">
<img alt="Owner" class="w-8 h-8 rounded-full mr-2" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg"/>
<div>
<div class="text-sm font-medium text-gray-900">Mike Rodriguez</div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<button class="text-blue-600 hover:text-blue-800 text-sm font-medium" data-action="edit" data-item-type="risk" data-item-id="risk-4" data-item-name="Risk Item">Edit</button>
<button class="text-gray-600 hover:text-gray-800 text-sm">View</button>
</div>
</td>
</tr>
</tbody>
</table>
</div>
<div class="flex items-center justify-between mt-6 pt-4 border-t border-gray-200">
<div class="text-sm text-gray-500">
                            Showing 1-4 of 47 risk assessments
                        </div>
<div class="flex items-center space-x-2">
<button class="px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50">Previous</button>
<button class="px-3 py-1 bg-blue-600 text-white rounded text-sm">1</button>
<button class="px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50">2</button>
<button class="px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50">3</button>
<button class="px-3 py-1 border border-gray-300 rounded text-sm hover:bg-gray-50">Next</button>
</div>
</div>
</div>
</section>
<!-- COMPONENT: Risk Drivers Analysis -->
<section class="mb-8" id="risk-drivers-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Risk Drivers Analysis</h3>
<button class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm">
<i class="fa-solid fa-chart-bar mr-2"></i>View Full Report
                        </button>
</div>
<div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
<div>
<h4 class="text-md font-semibold text-gray-800 mb-4">Top Risk Drivers</h4>
<div class="space-y-3">
<div class="flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-200">
<div class="flex items-center">
<div class="w-3 h-3 bg-red-500 rounded-full mr-3"></div>
<span class="font-medium text-red-900">Planning &amp; Regulatory</span>
</div>
<div class="text-right">
<div class="text-red-900 font-semibold">12 deals</div>
<div class="text-red-700 text-xs">25.5% of total</div>
</div>
</div>
<div class="flex items-center justify-between p-3 bg-orange-50 rounded-lg border border-orange-200">
<div class="flex items-center">
<div class="w-3 h-3 bg-orange-500 rounded-full mr-3"></div>
<span class="font-medium text-orange-900">Timeline Pressure</span>
</div>
<div class="text-right">
<div class="text-orange-900 font-semibold">9 deals</div>
<div class="text-orange-700 text-xs">19.1% of total</div>
</div>
</div>
<div class="flex items-center justify-between p-3 bg-yellow-50 rounded-lg border border-yellow-200">
<div class="flex items-center">
<div class="w-3 h-3 bg-yellow-500 rounded-full mr-3"></div>
<span class="font-medium text-yellow-900">Market Volatility</span>
</div>
<div class="text-right">
<div class="text-yellow-900 font-semibold">8 deals</div>
<div class="text-yellow-700 text-xs">17.0% of total</div>
</div>
</div>
<div class="flex items-center justify-between p-3 bg-purple-50 rounded-lg border border-purple-200">
<div class="flex items-center">
<div class="w-3 h-3 bg-purple-500 rounded-full mr-3"></div>
<span class="font-medium text-purple-900">Legal Compliance</span>
</div>
<div class="text-right">
<div class="text-purple-900 font-semibold">7 deals</div>
<div class="text-purple-700 text-xs">14.9% of total</div>
</div>
</div>
<div class="flex items-center justify-between p-3 bg-blue-50 rounded-lg border border-blue-200">
<div class="flex items-center">
<div class="w-3 h-3 bg-blue-500 rounded-full mr-3"></div>
<span class="font-medium text-blue-900">Budget Overrun</span>
</div>
<div class="text-right">
<div class="text-blue-900 font-semibold">6 deals</div>
<div class="text-blue-700 text-xs">12.8% of total</div>
</div>
</div>
</div>
</div>
<div>
<h4 class="text-md font-semibold text-gray-800 mb-4">Risk Driver Trends</h4>
<div class="h-64" id="risk-drivers-chart"></div>
</div>
</div>
</div>
</section>
<!-- COMPONENT: Risk Mitigation Actions -->
<section class="mb-8" id="risk-mitigation-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Risk Mitigation Actions</h3>
<button class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm">
<i class="fa-solid fa-plus mr-2"></i>Add Mitigation Plan
                        </button>
</div>
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<div>
<h4 class="text-md font-semibold text-gray-800 mb-4">Active Mitigation Plans</h4>
<div class="space-y-4">
<div class="border border-gray-200 rounded-lg p-4">
<div class="flex items-start justify-between mb-3">
<div>
<h5 class="font-medium text-gray-900">Planning Permission Acceleration</h5>
<p class="text-sm text-gray-600">Kings Cross Development</p>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                            In Progress
                                        </span>
</div>
<p class="text-sm text-gray-700 mb-3">Engage planning consultant to expedite approval process and address environmental concerns proactively.</p>
<div class="flex items-center justify-between">
<div class="text-sm text-gray-500">Due: Nov 20, 2024</div>
<div class="flex items-center">
<img alt="Owner" class="w-6 h-6 rounded-full mr-2" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg"/>
<span class="text-sm text-gray-600">David Kim</span>
</div>
</div>
</div>
<div class="border border-gray-200 rounded-lg p-4">
<div class="flex items-start justify-between mb-3">
<div>
<h5 class="font-medium text-gray-900">Legal Review Optimization</h5>
<p class="text-sm text-gray-600">Canary Wharf Office</p>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                            Planned
                                        </span>
</div>
<p class="text-sm text-gray-700 mb-3">Assign additional legal resources to expedite contract review and compliance verification.</p>
<div class="flex items-center justify-between">
<div class="text-sm text-gray-500">Due: Nov 18, 2024</div>
<div class="flex items-center">
<img alt="Owner" class="w-6 h-6 rounded-full mr-2" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg"/>
<span class="text-sm text-gray-600">Sarah Chen</span>
</div>
</div>
</div>
<div class="border border-gray-200 rounded-lg p-4">
<div class="flex items-start justify-between mb-3">
<div>
<h5 class="font-medium text-gray-900">Market Analysis Update</h5>
<p class="text-sm text-gray-600">Bermondsey Warehouse</p>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                            Complete
                                        </span>
</div>
<p class="text-sm text-gray-700 mb-3">Conduct comprehensive market analysis to assess industrial property trends and pricing volatility.</p>
<div class="flex items-center justify-between">
<div class="text-sm text-gray-500">Completed: Nov 8, 2024</div>
<div class="flex items-center">
<img alt="Owner" class="w-6 h-6 rounded-full mr-2" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-6.jpg"/>
<span class="text-sm text-gray-600">Lisa Wang</span>
</div>
</div>
</div>
</div>
</div>
<div>
<h4 class="text-md font-semibold text-gray-800 mb-4">Mitigation Effectiveness</h4>
<div class="space-y-4">
<div class="bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-lg border border-green-200">
<div class="flex items-center justify-between mb-2">
<span class="font-medium text-green-900">Successful Mitigations</span>
<span class="text-2xl font-bold text-green-600">23</span>
</div>
<p class="text-sm text-green-700">Risks successfully reduced or eliminated</p>
<div class="mt-3 bg-green-200 rounded-full h-2">
<div class="bg-green-500 h-2 rounded-full" style="width: 82%"></div>
</div>
<div class="text-xs text-green-600 mt-1">82% success rate</div>
</div>
<div class="bg-gradient-to-r from-yellow-50 to-amber-50 p-4 rounded-lg border border-yellow-200">
<div class="flex items-center justify-between mb-2">
<span class="font-medium text-yellow-900">In Progress</span>
<span class="text-2xl font-bold text-yellow-600">8</span>
</div>
<p class="text-sm text-yellow-700">Active mitigation plans being executed</p>
<div class="mt-3 bg-yellow-200 rounded-full h-2">
<div class="bg-yellow-500 h-2 rounded-full" style="width: 65%"></div>
</div>
<div class="text-xs text-yellow-600 mt-1">65% average completion</div>
</div>
<div class="bg-gradient-to-r from-red-50 to-pink-50 p-4 rounded-lg border border-red-200">
<div class="flex items-center justify-between mb-2">
<span class="font-medium text-red-900">Escalated Risks</span>
<span class="text-2xl font-bold text-red-600">3</span>
</div>
<p class="text-sm text-red-700">Risks that require immediate attention</p>
<div class="mt-3 bg-red-200 rounded-full h-2">
<div class="bg-red-500 h-2 rounded-full" style="width: 100%"></div>
</div>
<div class="text-xs text-red-600 mt-1">Critical priority level</div>
</div>
</div>
</div>
</div>
</div>
</section>
<!-- COMPONENT: Risk Notes and Documentation -->
<section class="mb-8" id="risk-notes-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Risk Notes &amp; Documentation</h3>
<button data-export="data"  class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm"></i>ExportAll Notes
                        </button>
</div>
<div class="space-y-6">
<div class="border border-gray-200 rounded-lg p-4">
<div class="flex items-start justify-between mb-3">
<div class="flex items-center">
<img alt="Author" class="w-10 h-10 rounded-full mr-3" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg"/>
<div>
<div class="font-medium text-gray-900">David Kim</div>
<div class="text-sm text-gray-500">Nov 10, 2024 at 2:30 PM</div>
</div>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                    High Risk
                                </span>
</div>
<div class="mb-3">
<h4 class="font-medium text-gray-900 mb-2">Kings Cross Development - Planning Update</h4>
<p class="text-gray-700 text-sm leading-relaxed">
                                    Met with planning department today regarding environmental impact assessment. They've raised additional concerns about noise pollution and traffic impact during construction phase. This could delay approval by 3-4 weeks beyond our original timeline. 
                                </p>
<p class="text-gray-700 text-sm leading-relaxed mt-2">
                                    Recommended actions: 1) Engage acoustic consultant for noise mitigation plan, 2) Prepare detailed traffic management proposal, 3) Consider phased construction approach to minimize disruption.
                                </p>
</div>
<div class="flex items-center space-x-4 text-sm text-gray-500">
<span>Kings Cross Development</span>
<span>•</span>
<span>Planning &amp; Regulatory</span>
<span>•</span>
<button class="text-blue-600 hover:text-blue-800">Reply</button>
<button class="text-gray-600 hover:text-gray-800" data-action="edit" data-item-type="risk" data-item-id="risk-5" data-item-name="Risk Item">Edit</button>
</div>
</div>
<div class="border border-gray-200 rounded-lg p-4">
<div class="flex items-start justify-between mb-3">
<div class="flex items-center">
<img alt="Author" class="w-10 h-10 rounded-full mr-3" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg"/>
<div>
<div class="font-medium text-gray-900">Sarah Chen</div>
<div class="text-sm text-gray-500">Nov 8, 2024 at 11:15 AM</div>
</div>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                    High Risk
                                </span>
</div>
<div class="mb-3">
<h4 class="font-medium text-gray-900 mb-2">Canary Wharf Office - Legal Compliance Review</h4>
<p class="text-gray-700 text-sm leading-relaxed">
                                    Legal team has identified potential compliance issues with new financial services regulations that came into effect last month. The current lease terms may not fully align with updated requirements for tenant data protection and cybersecurity standards.
                                </p>
<p class="text-gray-700 text-sm leading-relaxed mt-2">
                                    Impact: Contract amendments required before final signing. Estimated additional 2-3 weeks for legal review and tenant approval. Risk of deal delay or potential renegotiation of terms.
                                </p>
</div>
<div class="flex items-center space-x-4 text-sm text-gray-500">
<span>Canary Wharf Office</span>
<span>•</span>
<span>Legal Compliance</span>
<span>•</span>
<button class="text-blue-600 hover:text-blue-800">Reply</button>
<button class="text-gray-600 hover:text-gray-800" data-action="edit" data-item-type="risk" data-item-id="risk-6" data-item-name="Risk Item">Edit</button>
</div>
</div>
<div class="border border-gray-200 rounded-lg p-4">
<div class="flex items-start justify-between mb-3">
<div class="flex items-center">
<img alt="Author" class="w-10 h-10 rounded-full mr-3" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-6.jpg"/>
<div>
<div class="font-medium text-gray-900">Lisa Wang</div>
<div class="text-sm text-gray-500">Nov 7, 2024 at 4:45 PM</div>
</div>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                    Medium Risk
                                </span>
</div>
<div class="mb-3">
<h4 class="font-medium text-gray-900 mb-2">Bermondsey Warehouse - Market Analysis Complete</h4>
<p class="text-gray-700 text-sm leading-relaxed">
                                    Completed comprehensive market analysis for industrial properties in South London. Results show 8% price volatility over past 6 months, primarily driven by Brexit-related supply chain adjustments and increased demand for logistics hubs.
                                </p>
<p class="text-gray-700 text-sm leading-relaxed mt-2">
                                    Recommendation: Proceed with current valuation but include market adjustment clause in contract. Consider shorter initial lease term with extension options to mitigate long-term market risk.
                                </p>
</div>
<div class="flex items-center space-x-4 text-sm text-gray-500">
<span>Bermondsey Warehouse</span>
<span>•</span>
<span>Market Volatility</span>
<span>•</span>
<button class="text-blue-600 hover:text-blue-800">Reply</button>
<button class="text-gray-600 hover:text-gray-800" data-action="edit" data-item-type="risk" data-item-id="risk-7" data-item-name="Risk Item">Edit</button>
</div>
</div>
</div>
<div class="mt-6 pt-4 border-t border-gray-200">
<div class="flex items-center justify-between">
<div class="text-sm text-gray-500">
                                Showing 3 of 24 risk notes
                            </div>
<button class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                                Load More Notes
                            </button>
</div>
</div>
</div>
</section>
<!-- COMPONENT: Risk Assessment Form -->
<section class="mb-8" id="risk-form-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Add New Risk Assessment</h3>
<button class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm">
<i class="fa-solid fa-save mr-2"></i>Save as Template
                        </button>
</div>
<form class="space-y-6">
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<div>
<label class="block text-sm font-medium text-gray-700 mb-2">Deal Selection</label>
<select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
<option>Select a deal...</option>
<option>Kings Cross Development</option>
<option>Canary Wharf Office</option>
<option>Bermondsey Warehouse</option>
<option>Shoreditch Retail Space</option>
<option>Greenwich Retail Park</option>
</select>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-2">Risk Level</label>
<select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
<option>Select risk level...</option>
<option value="Low">Low Risk</option>
<option value="Medium">Medium Risk</option>
<option value="High">High Risk</option>
</select>
</div>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-2">Risk Drivers</label>
<div class="grid grid-cols-2 md:grid-cols-3 gap-3">
<label class="flex items-center">
<input class="rounded border-gray-300 text-blue-600 focus:ring-blue-500" type="checkbox"/>
<span class="ml-2 text-sm text-gray-700">Planning &amp; Regulatory</span>
</label>
<label class="flex items-center">
<input class="rounded border-gray-300 text-blue-600 focus:ring-blue-500" type="checkbox"/>
<span class="ml-2 text-sm text-gray-700">Timeline Pressure</span>
</label>
<label class="flex items-center">
<input class="rounded border-gray-300 text-blue-600 focus:ring-blue-500" type="checkbox"/>
<span class="ml-2 text-sm text-gray-700">Market Volatility</span>
</label>
<label class="flex items-center">
<input class="rounded border-gray-300 text-blue-600 focus:ring-blue-500" type="checkbox"/>
<span class="ml-2 text-sm text-gray-700">Legal Compliance</span>
</label>
<label class="flex items-center">
<input class="rounded border-gray-300 text-blue-600 focus:ring-blue-500" type="checkbox"/>
<span class="ml-2 text-sm text-gray-700">Budget Overrun</span>
</label>
<label class="flex items-center">
<input class="rounded border-gray-300 text-blue-600 focus:ring-blue-500" type="checkbox"/>
<span class="ml-2 text-sm text-gray-700">Tenant Credit</span>
</label>
<label class="flex items-center">
<input class="rounded border-gray-300 text-blue-600 focus:ring-blue-500" type="checkbox"/>
<span class="ml-2 text-sm text-gray-700">Environmental</span>
</label>
<label class="flex items-center">
<input class="rounded border-gray-300 text-blue-600 focus:ring-blue-500" type="checkbox"/>
<span class="ml-2 text-sm text-gray-700">Technical Issues</span>
</label>
<label class="flex items-center">
<input class="rounded border-gray-300 text-blue-600 focus:ring-blue-500" type="checkbox"/>
<span class="ml-2 text-sm text-gray-700">Other</span>
</label>
</div>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-2">Risk Notes</label>
<textarea class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="Describe the risk in detail, including potential impact, likelihood, and any mitigation measures already in place or planned..." rows="4"></textarea>
</div>
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<div>
<label class="block text-sm font-medium text-gray-700 mb-2">Impact Assessment</label>
<select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
<option>Select impact level...</option>
<option>Very Low</option>
<option>Low</option>
<option>Medium</option>
<option>High</option>
<option>Very High</option>
</select>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-2">Likelihood</label>
<select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
<option>Select likelihood...</option>
<option>Very Unlikely</option>
<option>Unlikely</option>
<option>Possible</option>
<option>Likely</option>
<option>Very Likely</option>
</select>
</div>
</div>
<div class="flex items-center justify-between pt-4 border-t border-gray-200">
<div class="flex items-center space-x-3">
<button class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm" type="button">
                                    Save as Draft
                                </button>
<button class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm" type="button">
                                    Clear Form
                                </button>
</div>
<div class="flex items-center space-x-3">
<button class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm" type="button">
                                    Cancel
                                </button>
<button class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-medium" type="submit">
                                    Add Risk Assessment
                                </button>
</div>
</div>
</form>
</div>
</section>
<!-- COMPONENT: Risk Alerts and Notifications -->
<section class="mb-8" id="risk-alerts-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Risk Alerts &amp; Notifications</h3>
<div class="flex items-center space-x-3">
<button class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm">
<i class="fa-solid fa-cog mr-2"></i>Alert Settings
                            </button>
<button class="px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm">
<i class="fa-solid fa-envelope mr-2"></i>Email Digest
                            </button>
</div>
</div>
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<div>
<h4 class="text-md font-semibold text-gray-800 mb-4">Active Alerts</h4>
<div class="space-y-3">
<div class="flex items-start space-x-4 p-4 bg-red-50 border border-red-200 rounded-lg">
<div class="bg-red-100 p-2 rounded-full">
<i class="fa-solid fa-exclamation-triangle text-red-600"></i>
</div>
<div class="flex-1">
<h5 class="font-medium text-red-900">Critical Risk Escalation</h5>
<p class="text-sm text-red-700 mt-1">Kings Cross Development risk level increased to Critical due to planning delays</p>
<div class="flex items-center mt-2 space-x-4">
<span class="text-xs text-red-600">2 hours ago</span>
<button class="text-xs text-red-700 hover:text-red-900 font-medium">View Details</button>
<button class="text-xs text-red-700 hover:text-red-900">Dismiss</button>
</div>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
<div class="bg-yellow-100 p-2 rounded-full">
<i class="fa-solid fa-clock text-yellow-600"></i>
</div>
<div class="flex-1">
<h5 class="font-medium text-yellow-900">Risk Review Overdue</h5>
<p class="text-sm text-yellow-700 mt-1">Bermondsey Warehouse risk assessment requires monthly review</p>
<div class="flex items-center mt-2 space-x-4">
<span class="text-xs text-yellow-600">1 day ago</span>
<button class="text-xs text-yellow-700 hover:text-yellow-900 font-medium" data-action="add-comment" data-item-type="deal">Schedule Review</button>
<button class="text-xs text-yellow-700 hover:text-yellow-900">Dismiss</button>
</div>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
<div class="bg-blue-100 p-2 rounded-full">
<i class="fa-solid fa-info-circle text-blue-600"></i>
</div>
<div class="flex-1">
<h5 class="font-medium text-blue-900">New Risk Driver Detected</h5>
<p class="text-sm text-blue-700 mt-1">Market volatility alert for retail property sector</p>
<div class="flex items-center mt-2 space-x-4">
<span class="text-xs text-blue-600">3 hours ago</span>
<button class="text-xs text-blue-700 hover:text-blue-900 font-medium">Assess Impact</button>
<button class="text-xs text-blue-700 hover:text-blue-900">Dismiss</button>
</div>
</div>
</div>
</div>
</div>
<div>
<h4 class="text-md font-semibold text-gray-800 mb-4">Notification Settings</h4>
<div class="space-y-4">
<div class="flex items-center justify-between p-3 border border-gray-200 rounded-lg">
<div>
<div class="font-medium text-gray-900">High Risk Escalations</div>
<div class="text-sm text-gray-500">Immediate notifications for critical risks</div>
</div>
<label class="relative inline-flex items-center cursor-pointer">
<input checked="" class="sr-only peer" type="checkbox"/>
<div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
</label>
</div>
<div class="flex items-center justify-between p-3 border border-gray-200 rounded-lg">
<div>
<div class="font-medium text-gray-900">Weekly Risk Digest</div>
<div class="text-sm text-gray-500">Summary of all risk activities</div>
</div>
<label class="relative inline-flex items-center cursor-pointer">
<input checked="" class="sr-only peer" type="checkbox"/>
<div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
</label>
</div>
<div class="flex items-center justify-between p-3 border border-gray-200 rounded-lg">
<div>
<div class="font-medium text-gray-900">Deal Stage Changes</div>
<div class="text-sm text-gray-500">Risk updates when deals progress</div>
</div>
<label class="relative inline-flex items-center cursor-pointer">
<input class="sr-only peer" type="checkbox"/>
<div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
</label>
</div>
<div class="flex items-center justify-between p-3 border border-gray-200 rounded-lg">
<div>
<div class="font-medium text-gray-900">Market Alerts</div>
<div class="text-sm text-gray-500">External market risk factors</div>
</div>
<label class="relative inline-flex items-center cursor-pointer">
<input checked="" class="sr-only peer" type="checkbox"/>
<div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
</label>
</div>
</div>
<div class="mt-6 p-4 bg-gray-50 rounded-lg">
<h5 class="font-medium text-gray-900 mb-2">Alert Channels</h5>
<div class="space-y-2">
<label class="flex items-center">
<input checked="" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500" type="checkbox"/>
<span class="ml-2 text-sm text-gray-700">Email notifications</span>
</label>
<label class="flex items-center">
<input checked="" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500" type="checkbox"/>
<span class="ml-2 text-sm text-gray-700">In-app notifications</span>
</label>
<label class="flex items-center">
<input class="rounded border-gray-300 text-blue-600 focus:ring-blue-500" type="checkbox"/>
<span class="ml-2 text-sm text-gray-700">SMS for critical risks</span>
</label>
<label class="flex items-center">
<input class="rounded border-gray-300 text-blue-600 focus:ring-blue-500" type="checkbox"/>
<span class="ml-2 text-sm text-gray-700">Slack integration</span>
</label>
</div>
</div>
</div>
</div>
</div>
</section>
</main>
</div>
<!-- END RISK ASSESSMENT PAGE -->

    <!-- ACTIVITY LOG PAGE -->
    <div id="activity-log-page" class="page-content" style="display: none;">
      <main class="flex-1 overflow-y-auto p-6" id="activity-log-main">
<section class="mb-8" id="activity-overview-section">
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">Total Activities</p>
<p class="text-3xl font-bold text-gray-900 mt-2">2,847</p>
<div class="flex items-center mt-2">
<span class="text-green-600 text-sm font-medium">+23%</span>
<span class="text-gray-500 text-sm ml-2">vs last month</span>
</div>
</div>
<div class="bg-blue-100 p-3 rounded-full">
<i class="fa-solid fa-chart-line text-blue-600 text-xl"></i>
</div>
</div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">Deal Activities</p>
<p class="text-3xl font-bold text-gray-900 mt-2">1,284</p>
<div class="flex items-center mt-2">
<span class="text-blue-600 text-sm font-medium">45%</span>
<span class="text-gray-500 text-sm ml-2">of total</span>
</div>
</div>
<div class="bg-green-100 p-3 rounded-full">
<i class="fa-solid fa-handshake text-green-600 text-xl"></i>
</div>
</div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">Document Actions</p>
<p class="text-3xl font-bold text-gray-900 mt-2">892</p>
<div class="flex items-center mt-2">
<span class="text-purple-600 text-sm font-medium">31%</span>
<span class="text-gray-500 text-sm ml-2">of total</span>
</div>
</div>
<div class="bg-purple-100 p-3 rounded-full">
<i class="fa-solid fa-file-alt text-purple-600 text-xl"></i>
</div>
</div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">User Logins</p>
<p class="text-3xl font-bold text-gray-900 mt-2">456</p>
<div class="flex items-center mt-2">
<span class="text-orange-600 text-sm font-medium">16%</span>
<span class="text-gray-500 text-sm ml-2">of total</span>
</div>
</div>
<div class="bg-orange-100 p-3 rounded-full">
<i class="fa-solid fa-sign-in-alt text-orange-600 text-xl"></i>
</div>
</div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">System Events</p>
<p class="text-3xl font-bold text-gray-900 mt-2">215</p>
<div class="flex items-center mt-2">
<span class="text-red-600 text-sm font-medium">8%</span>
<span class="text-gray-500 text-sm ml-2">of total</span>
</div>
</div>
<div class="bg-red-100 p-3 rounded-full">
<i class="fa-solid fa-cog text-red-600 text-xl"></i>
</div>
</div>
</div>
</div>
</section>
<section class="mb-8" id="activity-filters-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Advanced Filters</h3>
<button class="text-sm text-blue-600 hover:text-blue-700">Reset All Filters</button>
</div>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4">
<div>
<label class="block text-sm font-medium text-gray-700 mb-2">Date Range</label>
<select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
<option>Last 24 Hours</option>
<option>Last 7 Days</option>
<option selected="">Last 30 Days</option>
<option>Last 90 Days</option>
<option>Custom Range</option>
</select>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-2">Event Type</label>
<select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
<option selected="">All Types</option>
<option>Deal Created</option>
<option>Deal Updated</option>
<option>Document Upload</option>
<option>Approval Request</option>
<option>Status Change</option>
<option>User Login</option>
</select>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-2">User</label>
<select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
<option selected="">All Users</option>
<option>Alex Johnson</option>
<option>Sarah Chen</option>
<option>Mike Rodriguez</option>
<option>David Kim</option>
<option>Emma Thompson</option>
</select>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-2">Deal</label>
<select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
<option selected="">All Deals</option>
<option>Canary Wharf Office</option>
<option>Shoreditch Retail Space</option>
<option>Kings Cross Development</option>
<option>Bermondsey Industrial</option>
</select>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-2">Severity</label>
<select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
<option selected="">All Levels</option>
<option>Info</option>
<option>Warning</option>
<option>Error</option>
<option>Critical</option>
</select>
</div>
<div class="flex items-end">
<button class="w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium">
                                Apply Filters
                            </button>
</div>
</div>
</div>
</section>
<section class="mb-8" id="activity-timeline-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Activity Timeline</h3>
<div class="flex items-center space-x-2">
<button class="px-3 py-1 text-sm bg-blue-600 text-white rounded-lg">Real-time</button>
<button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Grouped</button>
<button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Summary</button>
</div>
</div>
<div class="relative">
<div class="absolute left-8 top-0 bottom-0 w-0.5 bg-gray-200"></div>
<div class="space-y-6">
<div class="relative flex items-start space-x-6">
<div class="flex-shrink-0 w-4 h-4 bg-red-500 rounded-full border-4 border-white shadow-lg relative z-10"></div>
<div class="flex-1 bg-red-50 border-l-4 border-red-500 p-4 rounded-lg">
<div class="flex items-center justify-between mb-2">
<div class="flex items-center space-x-3">
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                                CRITICAL
                                            </span>
<h4 class="font-semibold text-gray-900">SLA Breach Detected</h4>
</div>
<span class="text-xs text-gray-500">2 minutes ago</span>
</div>
<p class="text-sm text-gray-700 mb-3">Legal approval for Canary Wharf Office Deal exceeded SLA by 48 hours</p>
<div class="flex items-center space-x-4 text-xs text-gray-600">
<span><i class="fa-solid fa-user mr-1"></i>System Alert</span>
<span><i class="fa-solid fa-building mr-1"></i>DL_CW_2024_001</span>
<span><i class="fa-solid fa-clock mr-1"></i>14:32:15 UTC</span>
<span><i class="fa-solid fa-map-marker-alt mr-1"></i>192.168.1.100</span>
</div>
</div>
</div>
<div class="relative flex items-start space-x-6">
<div class="flex-shrink-0 w-4 h-4 bg-green-500 rounded-full border-4 border-white shadow-lg relative z-10"></div>
<div class="flex-1 bg-green-50 border-l-4 border-green-500 p-4 rounded-lg">
<div class="flex items-center justify-between mb-2">
<div class="flex items-center space-x-3">
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                SUCCESS
                                            </span>
<h4 class="font-semibold text-gray-900">Contract Successfully Signed</h4>
</div>
<span class="text-xs text-gray-500">15 minutes ago</span>
</div>
<p class="text-sm text-gray-700 mb-3">All parties have signed the contract for Shoreditch Retail Space deal</p>
<div class="flex items-center space-x-4 text-xs text-gray-600">
<span><i class="fa-solid fa-user mr-1"></i>Mike Rodriguez</span>
<span><i class="fa-solid fa-building mr-1"></i>DL_SH_2024_002</span>
<span><i class="fa-solid fa-clock mr-1"></i>14:17:42 UTC</span>
<span><i class="fa-solid fa-map-marker-alt mr-1"></i>10.0.0.45</span>
</div>
</div>
</div>
<div class="relative flex items-start space-x-6">
<div class="flex-shrink-0 w-4 h-4 bg-blue-500 rounded-full border-4 border-white shadow-lg relative z-10"></div>
<div class="flex-1 bg-blue-50 border-l-4 border-blue-500 p-4 rounded-lg">
<div class="flex items-center justify-between mb-2">
<div class="flex items-center space-x-3">
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                                INFO
                                            </span>
<h4 class="font-semibold text-gray-900">Document Version Updated</h4>
</div>
<span class="text-xs text-gray-500">32 minutes ago</span>
</div>
<p class="text-sm text-gray-700 mb-3">Sarah Chen uploaded HoT version 2.1 for Canary Wharf Office Deal</p>
<div class="flex items-center space-x-4 text-xs text-gray-600">
<span><i class="fa-solid fa-user mr-1"></i>Sarah Chen</span>
<span><i class="fa-solid fa-file mr-1"></i>HoT_v2.1_CanaryWharf.pdf</span>
<span><i class="fa-solid fa-clock mr-1"></i>14:00:23 UTC</span>
<span><i class="fa-solid fa-map-marker-alt mr-1"></i>172.16.0.12</span>
</div>
</div>
</div>
<div class="relative flex items-start space-x-6">
<div class="flex-shrink-0 w-4 h-4 bg-yellow-500 rounded-full border-4 border-white shadow-lg relative z-10"></div>
<div class="flex-1 bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded-lg">
<div class="flex items-center justify-between mb-2">
<div class="flex items-center space-x-3">
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                                WARNING
                                            </span>
<h4 class="font-semibold text-gray-900">Approval Request Pending</h4>
</div>
<span class="text-xs text-gray-500">1 hour ago</span>
</div>
<p class="text-sm text-gray-700 mb-3">Executive approval requested for budget amendment on Kings Cross Development</p>
<div class="flex items-center space-x-4 text-xs text-gray-600">
<span><i class="fa-solid fa-user mr-1"></i>David Kim</span>
<span><i class="fa-solid fa-building mr-1"></i>DL_KC_2024_003</span>
<span><i class="fa-solid fa-clock mr-1"></i>13:45:17 UTC</span>
<span><i class="fa-solid fa-map-marker-alt mr-1"></i>192.168.1.75</span>
</div>
</div>
</div>
<div class="relative flex items-start space-x-6">
<div class="flex-shrink-0 w-4 h-4 bg-purple-500 rounded-full border-4 border-white shadow-lg relative z-10"></div>
<div class="flex-1 bg-purple-50 border-l-4 border-purple-500 p-4 rounded-lg">
<div class="flex items-center justify-between mb-2">
<div class="flex items-center space-x-3">
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                                                INFO
                                            </span>
<h4 class="font-semibold text-gray-900">Deal Stage Progression</h4>
</div>
<span class="text-xs text-gray-500">2 hours ago</span>
</div>
<p class="text-sm text-gray-700 mb-3">Deal moved from Proposal to HoTs stage by Emma Thompson</p>
<div class="flex items-center space-x-4 text-xs text-gray-600">
<span><i class="fa-solid fa-user mr-1"></i>Emma Thompson</span>
<span><i class="fa-solid fa-building mr-1"></i>DL_BM_2024_004</span>
<span><i class="fa-solid fa-clock mr-1"></i>12:28:54 UTC</span>
<span><i class="fa-solid fa-map-marker-alt mr-1"></i>10.0.0.89</span>
</div>
</div>
</div>
</div>
</div>
<div class="mt-6 flex justify-center">
<button class="px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">
                            Load More Activities
                        </button>
</div>
</div>
</section>
<section class="mb-8" id="activity-analytics-section">
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<h3 class="text-lg font-semibold text-gray-900 mb-4">Activity Volume Trends</h3>
<div class="h-80" id="activity-volume-chart"></div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<h3 class="text-lg font-semibold text-gray-900 mb-4">Event Type Distribution</h3>
<div class="h-80" id="event-type-chart"></div>
</div>
</div>
</section>
<section class="mb-8" id="user-activity-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">User Activity Summary</h3>
<div class="flex items-center space-x-2">
<button class="px-3 py-1 text-sm bg-blue-600 text-white rounded-lg">Today</button>
<button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Week</button>
<button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Month</button>
</div>
</div>
<div class="overflow-x-auto">
<table class="w-full">
<thead>
<tr class="border-b border-gray-200">
<th class="text-left py-3 px-4 font-medium text-gray-600">User</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Total Actions</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Deal Activities</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Document Actions</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Last Activity</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Login Sessions</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Status</th>
</tr>
</thead>
<tbody class="divide-y divide-gray-100">
<tr class="hover:bg-gray-50">
<td class="py-4 px-4">
<div class="flex items-center">
<img alt="User" class="w-10 h-10 rounded-full mr-3" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg"/>
<div>
<div class="font-medium text-gray-900">Sarah Chen</div>
<div class="text-sm text-gray-500">Deal Architect</div>
</div>
</div>
</td>
<td class="py-4 px-4 font-medium text-gray-900">247</td>
<td class="py-4 px-4 text-gray-700">152</td>
<td class="py-4 px-4 text-gray-700">68</td>
<td class="py-4 px-4 text-gray-700">32 minutes ago</td>
<td class="py-4 px-4 text-gray-700">8</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
<div class="w-2 h-2 bg-green-400 rounded-full mr-1"></div>
                                            Online
                                        </span>
</td>
</tr>
<tr class="hover:bg-gray-50">
<td class="py-4 px-4">
<div class="flex items-center">
<img alt="User" class="w-10 h-10 rounded-full mr-3" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg"/>
<div>
<div class="font-medium text-gray-900">Mike Rodriguez</div>
<div class="text-sm text-gray-500">Senior Associate</div>
</div>
</div>
</td>
<td class="py-4 px-4 font-medium text-gray-900">189</td>
<td class="py-4 px-4 text-gray-700">98</td>
<td class="py-4 px-4 text-gray-700">45</td>
<td class="py-4 px-4 text-gray-700">15 minutes ago</td>
<td class="py-4 px-4 text-gray-700">6</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
<div class="w-2 h-2 bg-green-400 rounded-full mr-1"></div>
                                            Online
                                        </span>
</td>
</tr>
<tr class="hover:bg-gray-50">
<td class="py-4 px-4">
<div class="flex items-center">
<img alt="User" class="w-10 h-10 rounded-full mr-3" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg"/>
<div>
<div class="font-medium text-gray-900">David Kim</div>
<div class="text-sm text-gray-500">Associate</div>
</div>
</div>
</td>
<td class="py-4 px-4 font-medium text-gray-900">156</td>
<td class="py-4 px-4 text-gray-700">89</td>
<td class="py-4 px-4 text-gray-700">34</td>
<td class="py-4 px-4 text-gray-700">1 hour ago</td>
<td class="py-4 px-4 text-gray-700">4</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
<div class="w-2 h-2 bg-yellow-400 rounded-full mr-1"></div>
                                            Away
                                        </span>
</td>
</tr>
<tr class="hover:bg-gray-50">
<td class="py-4 px-4">
<div class="flex items-center">
<img alt="User" class="w-10 h-10 rounded-full mr-3" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg"/>
<div>
<div class="font-medium text-gray-900">Emma Thompson</div>
<div class="text-sm text-gray-500">Junior Associate</div>
</div>
</div>
</td>
<td class="py-4 px-4 font-medium text-gray-900">134</td>
<td class="py-4 px-4 text-gray-700">76</td>
<td class="py-4 px-4 text-gray-700">29</td>
<td class="py-4 px-4 text-gray-700">2 hours ago</td>
<td class="py-4 px-4 text-gray-700">5</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
<div class="w-2 h-2 bg-gray-400 rounded-full mr-1"></div>
                                            Offline
                                        </span>
</td>
</tr>
<tr class="hover:bg-gray-50">
<td class="py-4 px-4">
<div class="flex items-center">
<img alt="User" class="w-10 h-10 rounded-full mr-3" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-2.jpg"/>
<div>
<div class="font-medium text-gray-900">Alex Johnson</div>
<div class="text-sm text-gray-500">Deal Architect</div>
</div>
</div>
</td>
<td class="py-4 px-4 font-medium text-gray-900">298</td>
<td class="py-4 px-4 text-gray-700">178</td>
<td class="py-4 px-4 text-gray-700">87</td>
<td class="py-4 px-4 text-gray-700">Active now</td>
<td class="py-4 px-4 text-gray-700">12</td>
<td class="py-4 px-4">
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
<div class="w-2 h-2 bg-green-400 rounded-full mr-1"></div>
                                            Online
                                        </span>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section class="mb-8" id="system-events-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">System Events &amp; Errors</h3>
<div class="flex items-center space-x-2">
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                3 Critical
                            </span>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                12 Warnings
                            </span>
</div>
</div>
<div class="space-y-4">
<div class="flex items-start space-x-4 p-4 bg-red-50 border border-red-200 rounded-lg">
<div class="bg-red-100 p-2 rounded-full">
<i class="fa-solid fa-exclamation-triangle text-red-600"></i>
</div>
<div class="flex-1">
<div class="flex items-center justify-between mb-2">
<h4 class="font-medium text-red-900">Database Connection Timeout</h4>
<span class="text-xs text-red-600">3 minutes ago</span>
</div>
<p class="text-sm text-red-700 mb-2">Connection to primary database timed out during bulk export operation</p>
<div class="flex items-center space-x-4 text-xs text-red-600">
<span><i class="fa-solid fa-server mr-1"></i>DB-PRIMARY-01</span>
<span><i class="fa-solid fa-code mr-1"></i>ERR_CONNECTION_TIMEOUT</span>
<span><i class="fa-solid fa-clock mr-1"></i>14:29:45 UTC</span>
</div>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
<div class="bg-yellow-100 p-2 rounded-full">
<i class="fa-solid fa-exclamation-circle text-yellow-600"></i>
</div>
<div class="flex-1">
<div class="flex items-center justify-between mb-2">
<h4 class="font-medium text-yellow-900">High Memory Usage</h4>
<span class="text-xs text-yellow-600">15 minutes ago</span>
</div>
<p class="text-sm text-yellow-700 mb-2">Application server memory usage exceeded 85% threshold</p>
<div class="flex items-center space-x-4 text-xs text-yellow-600">
<span><i class="fa-solid fa-server mr-1"></i>APP-SERVER-02</span>
<span><i class="fa-solid fa-memory mr-1"></i>87.3% Used</span>
<span><i class="fa-solid fa-clock mr-1"></i>14:17:23 UTC</span>
</div>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
<div class="bg-blue-100 p-2 rounded-full">
<i class="fa-solid fa-info-circle text-blue-600"></i>
</div>
<div class="flex-1">
<div class="flex items-center justify-between mb-2">
<h4 class="font-medium text-blue-900">Scheduled Backup Completed</h4>
<span class="text-xs text-blue-600">30 minutes ago</span>
</div>
<p class="text-sm text-blue-700 mb-2">Daily database backup completed successfully - 2.4GB archived</p>
<div class="flex items-center space-x-4 text-xs text-blue-600">
<span><i class="fa-solid fa-database mr-1"></i>BACKUP-SRV-01</span>
<span><i class="fa-solid fa-check mr-1"></i>SUCCESS</span>
<span><i class="fa-solid fa-clock mr-1"></i>14:02:15 UTC</span>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="mb-8" id="audit-compliance-section">
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Compliance Monitoring</h3>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
<i class="fa-solid fa-check mr-1"></i>
                                Compliant
                            </span>
</div>
<div class="space-y-4">
<div class="flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg">
<div class="flex items-center space-x-3">
<i class="fa-solid fa-shield-alt text-green-600"></i>
<span class="font-medium text-green-900">GDPR Compliance</span>
</div>
<div class="flex items-center space-x-2">
<span class="text-sm text-green-700">100%</span>
<i class="fa-solid fa-check-circle text-green-600"></i>
</div>
</div>
<div class="flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg">
<div class="flex items-center space-x-3">
<i class="fa-solid fa-lock text-green-600"></i>
<span class="font-medium text-green-900">Data Encryption</span>
</div>
<div class="flex items-center space-x-2">
<span class="text-sm text-green-700">AES-256</span>
<i class="fa-solid fa-check-circle text-green-600"></i>
</div>
</div>
<div class="flex items-center justify-between p-3 bg-green-50 border border-green-200 rounded-lg">
<div class="flex items-center space-x-3">
<i class="fa-solid fa-user-shield text-green-600"></i>
<span class="font-medium text-green-900">Access Control</span>
</div>
<div class="flex items-center space-x-2">
<span class="text-sm text-green-700">RBAC</span>
<i class="fa-solid fa-check-circle text-green-600"></i>
</div>
</div>
<div class="flex items-center justify-between p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
<div class="flex items-center space-x-3">
<i class="fa-solid fa-archive text-yellow-600"></i>
<span class="font-medium text-yellow-900">Data Retention</span>
</div>
<div class="flex items-center space-x-2">
<span class="text-sm text-yellow-700">Review Due</span>
<i class="fa-solid fa-exclamation-triangle text-yellow-600"></i>
</div>
</div>
</div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Security Events</h3>
<button class="text-sm text-blue-600 hover:text-blue-700">View Security Dashboard</button>
</div>
<div class="space-y-4">
<div class="flex items-start space-x-4 p-3 border border-gray-200 rounded-lg">
<div class="bg-green-100 p-2 rounded-full">
<i class="fa-solid fa-sign-in-alt text-green-600"></i>
</div>
<div class="flex-1">
<h4 class="font-medium text-gray-900">Successful Login</h4>
<p class="text-sm text-gray-600">Alex Johnson from 192.168.1.100</p>
<span class="text-xs text-gray-500">5 minutes ago</span>
</div>
</div>
<div class="flex items-start space-x-4 p-3 border border-gray-200 rounded-lg">
<div class="bg-blue-100 p-2 rounded-full">
<i class="fa-solid fa-key text-blue-600"></i>
</div>
<div class="flex-1">
<h4 class="font-medium text-gray-900">Password Changed</h4>
<p class="text-sm text-gray-600">Sarah Chen updated password</p>
<span class="text-xs text-gray-500">2 hours ago</span>
</div>
</div>
<div class="flex items-start space-x-4 p-3 border border-yellow-200 rounded-lg bg-yellow-50">
<div class="bg-yellow-100 p-2 rounded-full">
<i class="fa-solid fa-exclamation-triangle text-yellow-600"></i>
</div>
<div class="flex-1">
<h4 class="font-medium text-yellow-900">Failed Login Attempt</h4>
<p class="text-sm text-yellow-700">3 failed attempts from 203.45.67.89</p>
<span class="text-xs text-yellow-600">4 hours ago</span>
</div>
</div>
<div class="flex items-start space-x-4 p-3 border border-gray-200 rounded-lg">
<div class="bg-purple-100 p-2 rounded-full">
<i class="fa-solid fa-user-plus text-purple-600"></i>
</div>
<div class="flex-1">
<h4 class="font-medium text-gray-900">New User Created</h4>
<p class="text-sm text-gray-600">James Wilson added by Admin</p>
<span class="text-xs text-gray-500">1 day ago</span>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="mb-8" id="deal-activity-breakdown-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Deal Activity Breakdown</h3>
<div class="flex items-center space-x-2">
<button class="px-3 py-1 text-sm bg-blue-600 text-white rounded-lg">All Deals</button>
<button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Active Only</button>
<button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">High Value</button>
</div>
</div>
<div class="overflow-x-auto">
<table class="w-full">
<thead>
<tr class="border-b border-gray-200">
<th class="text-left py-3 px-4 font-medium text-gray-600">Deal Name</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Stage Changes</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Document Updates</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Approvals</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Comments</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Last Activity</th>
<th class="text-left py-3 px-4 font-medium text-gray-600">Activity Score</th>
</tr>
</thead>
<tbody class="divide-y divide-gray-100">
<tr class="hover:bg-gray-50">
<td class="py-4 px-4">
<div class="font-medium text-gray-900">Canary Wharf Office</div>
<div class="text-sm text-gray-500">DL_CW_2024_001</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<span class="text-2xl font-bold text-blue-600">3</span>
<div class="text-xs text-gray-500">
<div>Proposal → HoTs</div>
<div>2 days ago</div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<span class="text-2xl font-bold text-purple-600">8</span>
<div class="text-xs text-gray-500">
<div>HoT v2.1 uploaded</div>
<div>32 mins ago</div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<span class="text-2xl font-bold text-yellow-600">2</span>
<div class="text-xs text-gray-500">
<div>Legal pending</div>
<div>Overdue</div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<span class="text-2xl font-bold text-green-600">12</span>
<div class="text-xs text-gray-500">
<div>Latest: Risk assessment</div>
<div>1 hour ago</div>
</div>
</div>
</td>
<td class="py-4 px-4 text-gray-700">32 minutes ago</td>
<td class="py-4 px-4">
<div class="flex items-center">
<div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
<div class="bg-red-500 h-2 rounded-full" style="width: 95%"></div>
</div>
<span class="text-sm font-medium text-red-600">95</span>
</div>
</td>
</tr>
<tr class="hover:bg-gray-50">
<td class="py-4 px-4">
<div class="font-medium text-gray-900">Shoreditch Retail Space</div>
<div class="text-sm text-gray-500">DL_SH_2024_002</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<span class="text-2xl font-bold text-blue-600">2</span>
<div class="text-xs text-gray-500">
<div>HoTs → Contract</div>
<div>1 day ago</div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<span class="text-2xl font-bold text-purple-600">5</span>
<div class="text-xs text-gray-500">
<div>Contract signed</div>
<div>15 mins ago</div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<span class="text-2xl font-bold text-green-600">3</span>
<div class="text-xs text-gray-500">
<div>All approved</div>
<div>Complete</div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<span class="text-2xl font-bold text-green-600">7</span>
<div class="text-xs text-gray-500">
<div>Latest: Congratulations</div>
<div>20 mins ago</div>
</div>
</div>
</td>
<td class="py-4 px-4 text-gray-700">15 minutes ago</td>
<td class="py-4 px-4">
<div class="flex items-center">
<div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
<div class="bg-green-500 h-2 rounded-full" style="width: 78%"></div>
</div>
<span class="text-sm font-medium text-green-600">78</span>
</div>
</td>
</tr>
<tr class="hover:bg-gray-50">
<td class="py-4 px-4">
<div class="font-medium text-gray-900">Kings Cross Development</div>
<div class="text-sm text-gray-500">DL_KC_2024_003</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<span class="text-2xl font-bold text-blue-600">1</span>
<div class="text-xs text-gray-500">
<div>Viewing → Proposal</div>
<div>3 days ago</div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<span class="text-2xl font-bold text-purple-600">6</span>
<div class="text-xs text-gray-500">
<div>Financial model</div>
<div>1 hour ago</div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<span class="text-2xl font-bold text-yellow-600">1</span>
<div class="text-xs text-gray-500">
<div>Executive pending</div>
<div>Due today</div>
</div>
</div>
</td>
<td class="py-4 px-4">
<div class="flex items-center space-x-2">
<span class="text-2xl font-bold text-green-600">4</span>
<div class="text-xs text-gray-500">
<div>Latest: Budget query</div>
<div>2 hours ago</div>
</div>
</div>
</td>
<td class="py-4 px-4 text-gray-700">1 hour ago</td>
<td class="py-4 px-4">
<div class="flex items-center">
<div class="w-16 bg-gray-200 rounded-full h-2 mr-2">
<div class="bg-yellow-500 h-2 rounded-full" style="width: 62%"></div>
</div>
<span class="text-sm font-medium text-yellow-600">62</span>
</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section class="mb-8" id="export-reports-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Export &amp; Reporting</h3>
<div class="flex items-center space-x-2">
<span class="text-sm text-gray-500">Last export: 2 hours ago</span>
</div>
</div>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
<div class="p-6 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer">
<div class="flex items-center justify-between mb-4">
<div class="bg-blue-100 p-3 rounded-full">
<i class="fa-solid fa-file-csv text-blue-600 text-xl"></i>
</div>
<span class="text-xs text-gray-500">CSV</span>
</div>
<h4 class="font-medium text-gray-900 mb-2">Activity Log Export</h4>
<p class="text-sm text-gray-600 mb-4">Complete activity history with filters</p>
<button data-export="data"  class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg text-sm">ExportCSV
                            </button>
</div>
<div class="p-6 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer">
<div class="flex items-center justify-between mb-4">
<div class="bg-red-100 p-3 rounded-full">
<i class="fa-solid fa-file-pdf text-red-600 text-xl"></i>
</div>
<span class="text-xs text-gray-500">PDF</span>
</div>
<h4 class="font-medium text-gray-900 mb-2">Audit Report</h4>
<p class="text-sm text-gray-600 mb-4">Formatted compliance report</p>
<button class="w-full bg-red-600 hover:bg-red-700 text-white py-2 px-4 rounded-lg text-sm">
                                Generate PDF
                            </button>
</div>
<div class="p-6 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer">
<div class="flex items-center justify-between mb-4">
<div class="bg-green-100 p-3 rounded-full">
<i class="fa-solid fa-file-excel text-green-600 text-xl"></i>
</div>
<span class="text-xs text-gray-500">XLSX</span>
</div>
<h4 class="font-medium text-gray-900 mb-2">Analytics Export</h4>
<p class="text-sm text-gray-600 mb-4">Detailed analytics with charts</p>
<button data-export="data"  class="w-full bg-green-600 hover:bg-green-700 text-white py-2 px-4 rounded-lg text-sm">ExportExcel
                            </button>
</div>
<div class="p-6 border border-gray-200 rounded-lg hover:shadow-md transition-shadow cursor-pointer">
<div class="flex items-center justify-between mb-4">
<div class="bg-purple-100 p-3 rounded-full">
<i class="fa-solid fa-code text-purple-600 text-xl"></i>
</div>
<span class="text-xs text-gray-500">JSON</span>
</div>
<h4 class="font-medium text-gray-900 mb-2">API Export</h4>
<p class="text-sm text-gray-600 mb-4">Raw data for integration</p>
<button data-export="data"  class="w-full bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded-lg text-sm">ExportJSON
                            </button>
</div>
</div>
<div class="mt-6 p-4 bg-gray-50 rounded-lg">
<div class="flex items-center justify-between">
<div class="flex items-center space-x-3">
<i class="fa-solid fa-clock text-gray-500"></i>
<span class="text-sm text-gray-700">Schedule automatic exports</span>
</div>
<button class="text-sm text-blue-600 hover:text-blue-700 font-medium">
                                Configure Schedule
                            </button>
</div>
</div>
</div>
</section>
<section class="mb-8" id="retention-policies-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Data Retention Policies</h3>
<button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
<i class="fa-solid fa-cog mr-2"></i>
                            Manage Policies
                        </button>
</div>
<div class="grid grid-cols-1 md:grid-cols-3 gap-6">
<div class="p-4 border border-gray-200 rounded-lg">
<div class="flex items-center justify-between mb-3">
<h4 class="font-medium text-gray-900">Activity Logs</h4>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                    Active
                                </span>
</div>
<div class="space-y-2 text-sm text-gray-600">
<div class="flex justify-between">
<span>Retention Period:</span>
<span class="font-medium">7 years</span>
</div>
<div class="flex justify-between">
<span>Archive After:</span>
<span class="font-medium">1 year</span>
</div>
<div class="flex justify-between">
<span>Current Size:</span>
<span class="font-medium">2.4 GB</span>
</div>
</div>
</div>
<div class="p-4 border border-gray-200 rounded-lg">
<div class="flex items-center justify-between mb-3">
<h4 class="font-medium text-gray-900">User Sessions</h4>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                    Active
                                </span>
</div>
<div class="space-y-2 text-sm text-gray-600">
<div class="flex justify-between">
<span>Retention Period:</span>
<span class="font-medium">90 days</span>
</div>
<div class="flex justify-between">
<span>Archive After:</span>
<span class="font-medium">30 days</span>
</div>
<div class="flex justify-between">
<span>Current Size:</span>
<span class="font-medium">156 MB</span>
</div>
</div>
</div>
<div class="p-4 border border-gray-200 rounded-lg">
<div class="flex items-center justify-between mb-3">
<h4 class="font-medium text-gray-900">System Events</h4>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                    Review Due
                                </span>
</div>
<div class="space-y-2 text-sm text-gray-600">
<div class="flex justify-between">
<span>Retention Period:</span>
<span class="font-medium">5 years</span>
</div>
<div class="flex justify-between">
<span>Archive After:</span>
<span class="font-medium">6 months</span>
</div>
<div class="flex justify-between">
<span>Current Size:</span>
<span class="font-medium">892 MB</span>
</div>
</div>
</div>
</div>
</div>
</section>
</main>
    </div>
    <!-- END ACTIVITY LOG PAGE -->

    <!-- NOTIFICATIONS PAGE -->
    <div id="notifications-page" class="page-content" style="display: none;">
      <main class="flex-1 overflow-y-auto p-6" id="notifications-main">
<section class="mb-8" id="notification-filters-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Filter &amp; Sort</h3>
<button class="text-sm text-blue-600 hover:text-blue-700">Clear All Filters</button>
</div>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
<div>
<label class="block text-sm font-medium text-gray-700 mb-2">Severity</label>
<select class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
<option>All Severities</option>
<option>Critical</option>
<option>Error</option>
<option>Warning</option>
<option>Info</option>
</select>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-2">Type</label>
<select class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
<option>All Types</option>
<option>SLA Breach</option>
<option>Approval Pending</option>
<option>Document Uploaded</option>
<option>Comment</option>
</select>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-2">Deal</label>
<select class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
<option>All Deals</option>
<option>Canary Wharf Office</option>
<option>Shoreditch Retail</option>
<option>Kings Cross Development</option>
</select>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
<select class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
<option>All Status</option>
<option>Unread</option>
<option>Read</option>
<option>Archived</option>
</select>
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-2">Date Range</label>
<select class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
<option>Last 7 days</option>
<option>Last 30 days</option>
<option>Last 3 months</option>
<option>Custom range</option>
</select>
</div>
</div>
</div>
</section>
<section class="mb-8" id="notification-summary-section">
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">Critical Alerts</p>
<p class="text-3xl font-bold text-red-600 mt-2">5</p>
<div class="flex items-center mt-2">
<span class="text-red-600 text-sm font-medium">Immediate Action Required</span>
</div>
</div>
<div class="bg-red-100 p-3 rounded-full">
<i class="fa-solid fa-exclamation-triangle text-red-600 text-xl"></i>
</div>
</div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">Pending Approvals</p>
<p class="text-3xl font-bold text-orange-600 mt-2">12</p>
<div class="flex items-center mt-2">
<span class="text-orange-600 text-sm font-medium">Awaiting Review</span>
</div>
</div>
<div class="bg-orange-100 p-3 rounded-full">
<i class="fa-solid fa-clock text-orange-600 text-xl"></i>
</div>
</div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">New Documents</p>
<p class="text-3xl font-bold text-blue-600 mt-2">8</p>
<div class="flex items-center mt-2">
<span class="text-blue-600 text-sm font-medium">Ready for Review</span>
</div>
</div>
<div class="bg-blue-100 p-3 rounded-full">
<i class="fa-solid fa-file-upload text-blue-600 text-xl"></i>
</div>
</div>
</div>
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-gray-600">Unread Total</p>
<p class="text-3xl font-bold text-gray-900 mt-2">27</p>
<div class="flex items-center mt-2">
<span class="text-green-600 text-sm font-medium">↓ 15% from yesterday</span>
</div>
</div>
<div class="bg-gray-100 p-3 rounded-full">
<i class="fa-solid fa-bell text-gray-600 text-xl"></i>
</div>
</div>
</div>
</div>
</section>
<section class="mb-8" id="critical-notifications-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900 flex items-center">
<i class="fa-solid fa-exclamation-triangle text-red-500 mr-3"></i>
                            Critical Notifications
                        </h3>
<div class="flex items-center space-x-2">
<span class="bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full">5 Critical</span>
<button class="text-sm text-red-600 hover:text-red-700 font-medium">Escalate All</button>
</div>
</div>
<div class="space-y-4">
<div class="flex items-start space-x-4 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg">
<div class="flex-shrink-0">
<div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center">
<i class="fa-solid fa-exclamation-triangle text-red-600"></i>
</div>
</div>
<div class="flex-1">
<div class="flex items-start justify-between">
<div>
<h4 class="font-semibold text-red-900">SLA Breach - Legal Approval Overdue</h4>
<p class="text-sm text-red-700 mt-1">Canary Wharf Office Deal (DL_CW_2024_001) - Legal approval has exceeded SLA by 48 hours</p>
<div class="flex items-center mt-3 space-x-4">
<span class="text-xs text-red-600 font-medium">CRITICAL</span>
<span class="text-xs text-red-600">2 hours ago</span>
<span class="text-xs text-red-600">Deal Value: £2.1M</span>
</div>
</div>
<div class="flex items-center space-x-2 ml-4">
<button class="bg-red-600 hover:bg-red-700 text-white text-xs px-3 py-1 rounded font-medium" data-action="escalate" data-item-type="deal">
                                            Escalate
                                        </button>
<button class="border border-red-300 hover:bg-red-50 text-red-700 text-xs px-3 py-1 rounded">
                                            View Deal
                                        </button>
</div>
</div>
<div class="mt-3 flex items-center space-x-4">
<div class="flex items-center">
<img alt="Stakeholder" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg"/>
<span class="text-xs text-red-700 ml-2">Sarah Chen (Legal)</span>
</div>
<span class="text-xs text-red-600">Next milestone: Contract Review</span>
</div>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg">
<div class="flex-shrink-0">
<div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center">
<i class="fa-solid fa-clock text-red-600"></i>
</div>
</div>
<div class="flex-1">
<div class="flex items-start justify-between">
<div>
<h4 class="font-semibold text-red-900">Contract Deadline Approaching</h4>
<p class="text-sm text-red-700 mt-1">Kings Cross Development - Contract signature due in 6 hours, missing executive approval</p>
<div class="flex items-center mt-3 space-x-4">
<span class="text-xs text-red-600 font-medium">CRITICAL</span>
<span class="text-xs text-red-600">1 hour ago</span>
<span class="text-xs text-red-600">Deal Value: £4.2M</span>
</div>
</div>
<div class="flex items-center space-x-2 ml-4">
<button class="bg-red-600 hover:bg-red-700 text-white text-xs px-3 py-1 rounded font-medium">
                                            Urgent Action
                                        </button>
<button class="border border-red-300 hover:bg-red-50 text-red-700 text-xs px-3 py-1 rounded">
                                            View Contract
                                        </button>
</div>
</div>
<div class="mt-3 flex items-center space-x-4">
<div class="flex items-center">
<img alt="Stakeholder" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg"/>
<span class="text-xs text-red-700 ml-2">David Kim (Executive)</span>
</div>
<span class="text-xs text-red-600">Risk Level: High</span>
</div>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg">
<div class="flex-shrink-0">
<div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center">
<i class="fa-solid fa-exclamation-circle text-red-600"></i>
</div>
</div>
<div class="flex-1">
<div class="flex items-start justify-between">
<div>
<h4 class="font-semibold text-red-900">Risk Assessment Update Required</h4>
<p class="text-sm text-red-700 mt-1">Shoreditch Retail Space - Market conditions changed, risk level reassessment overdue by 24 hours</p>
<div class="flex items-center mt-3 space-x-4">
<span class="text-xs text-red-600 font-medium">CRITICAL</span>
<span class="text-xs text-red-600">4 hours ago</span>
<span class="text-xs text-red-600">Deal Value: £850K</span>
</div>
</div>
<div class="flex items-center space-x-2 ml-4">
<button class="bg-red-600 hover:bg-red-700 text-white text-xs px-3 py-1 rounded font-medium">
                                            Update Risk
                                        </button>
<button class="border border-red-300 hover:bg-red-50 text-red-700 text-xs px-3 py-1 rounded">
                                            View Assessment
                                        </button>
</div>
</div>
<div class="mt-3 flex items-center space-x-4">
<div class="flex items-center">
<img alt="Stakeholder" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg"/>
<span class="text-xs text-red-700 ml-2">Mike Rodriguez (Risk)</span>
</div>
<span class="text-xs text-red-600">Current Risk: Medium → High</span>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="mb-8" id="approval-notifications-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900 flex items-center">
<i class="fa-solid fa-check-circle text-orange-500 mr-3"></i>
                            Pending Approvals
                        </h3>
<div class="flex items-center space-x-2">
<span class="bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full">12 Pending</span>
<button class="text-sm text-orange-600 hover:text-orange-700 font-medium">Bulk Approve</button>
</div>
</div>
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<div class="space-y-4">
<div class="flex items-start space-x-4 p-4 bg-orange-50 border border-orange-200 rounded-lg">
<div class="flex-shrink-0">
<div class="w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center">
<i class="fa-solid fa-file-contract text-orange-600"></i>
</div>
</div>
<div class="flex-1">
<div class="flex items-start justify-between">
<div>
<h4 class="font-semibold text-orange-900">HoT Version 2.3 - Legal Review</h4>
<p class="text-sm text-orange-700 mt-1">Canary Wharf Office Deal - Updated terms and conditions</p>
<div class="flex items-center mt-3 space-x-4">
<span class="text-xs text-orange-600 font-medium">LEGAL APPROVAL</span>
<span class="text-xs text-orange-600">Due: Nov 16, 2024</span>
<span class="text-xs text-orange-600">SLA: 6h remaining</span>
</div>
</div>
<div class="flex flex-col space-y-1 ml-4">
<button class="bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1 rounded font-medium" data-action="approve" data-item-type="approval">
                                                Approve
                                            </button>
<button class="bg-red-600 hover:bg-red-700 text-white text-xs px-3 py-1 rounded font-medium" data-action="reject" data-item-type="approval">
                                                Reject
                                            </button>
<button class="border border-gray-300 hover:bg-gray-50 text-gray-700 text-xs px-3 py-1 rounded" data-action="add-comment" data-item-type="deal">
                                                Review
                                            </button>
</div>
</div>
<div class="mt-3 flex items-center justify-between">
<div class="flex items-center">
<img alt="Requester" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg"/>
<span class="text-xs text-orange-700 ml-2">Requested by Sarah Chen</span>
</div>
<div class="flex items-center space-x-2">
<span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full">High Impact</span>
<span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">Financial Changes</span>
</div>
</div>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-purple-50 border border-purple-200 rounded-lg">
<div class="flex-shrink-0">
<div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center">
<i class="fa-solid fa-pound-sign text-purple-600"></i>
</div>
</div>
<div class="flex-1">
<div class="flex items-start justify-between">
<div>
<h4 class="font-semibold text-purple-900">Budget Amendment - Executive Approval</h4>
<p class="text-sm text-purple-700 mt-1">Kings Cross Development - Additional £500K for infrastructure</p>
<div class="flex items-center mt-3 space-x-4">
<span class="text-xs text-purple-600 font-medium">EXECUTIVE APPROVAL</span>
<span class="text-xs text-purple-600">Due: Nov 18, 2024</span>
<span class="text-xs text-purple-600">SLA: 2 days remaining</span>
</div>
</div>
<div class="flex flex-col space-y-1 ml-4">
<button class="bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1 rounded font-medium" data-action="approve" data-item-type="approval">
                                                Approve
                                            </button>
<button class="bg-red-600 hover:bg-red-700 text-white text-xs px-3 py-1 rounded font-medium" data-action="reject" data-item-type="approval">
                                                Reject
                                            </button>
<button class="border border-gray-300 hover:bg-gray-50 text-gray-700 text-xs px-3 py-1 rounded" data-action="add-comment" data-item-type="deal">
                                                Review
                                            </button>
</div>
</div>
<div class="mt-3 flex items-center justify-between">
<div class="flex items-center">
<img alt="Requester" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg"/>
<span class="text-xs text-purple-700 ml-2">Requested by David Kim</span>
</div>
<div class="flex items-center space-x-2">
<span class="bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full">Budget Impact</span>
<span class="bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full">Timeline Risk</span>
</div>
</div>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
<div class="flex-shrink-0">
<div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
<i class="fa-solid fa-file-signature text-blue-600"></i>
</div>
</div>
<div class="flex-1">
<div class="flex items-start justify-between">
<div>
<h4 class="font-semibold text-blue-900">Contract Terms - Finance Review</h4>
<p class="text-sm text-blue-700 mt-1">Shoreditch Retail Space - Payment schedule modifications</p>
<div class="flex items-center mt-3 space-x-4">
<span class="text-xs text-blue-600 font-medium">FINANCE APPROVAL</span>
<span class="text-xs text-blue-600">Due: Nov 20, 2024</span>
<span class="text-xs text-blue-600">SLA: 4 days remaining</span>
</div>
</div>
<div class="flex flex-col space-y-1 ml-4">
<button class="bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1 rounded font-medium" data-action="approve" data-item-type="approval">
                                                Approve
                                            </button>
<button class="bg-red-600 hover:bg-red-700 text-white text-xs px-3 py-1 rounded font-medium" data-action="reject" data-item-type="approval">
                                                Reject
                                            </button>
<button class="border border-gray-300 hover:bg-gray-50 text-gray-700 text-xs px-3 py-1 rounded" data-action="add-comment" data-item-type="deal">
                                                Review
                                            </button>
</div>
</div>
<div class="mt-3 flex items-center justify-between">
<div class="flex items-center">
<img alt="Requester" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg"/>
<span class="text-xs text-blue-700 ml-2">Requested by Mike Rodriguez</span>
</div>
<div class="flex items-center space-x-2">
<span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">Low Risk</span>
<span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">Payment Terms</span>
</div>
</div>
</div>
</div>
</div>
<div class="space-y-4">
<div class="flex items-start space-x-4 p-4 bg-green-50 border border-green-200 rounded-lg">
<div class="flex-shrink-0">
<div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
<i class="fa-solid fa-truck text-green-600"></i>
</div>
</div>
<div class="flex-1">
<div class="flex items-start justify-between">
<div>
<h4 class="font-semibold text-green-900">Delivery Schedule - Operations Approval</h4>
<p class="text-sm text-green-700 mt-1">Bermondsey Industrial Unit - Onboarding timeline adjustment</p>
<div class="flex items-center mt-3 space-x-4">
<span class="text-xs text-green-600 font-medium">DELIVERY APPROVAL</span>
<span class="text-xs text-green-600">Due: Nov 22, 2024</span>
<span class="text-xs text-green-600">SLA: 6 days remaining</span>
</div>
</div>
<div class="flex flex-col space-y-1 ml-4">
<button class="bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1 rounded font-medium" data-action="approve" data-item-type="approval">
                                                Approve
                                            </button>
<button class="bg-red-600 hover:bg-red-700 text-white text-xs px-3 py-1 rounded font-medium" data-action="reject" data-item-type="approval">
                                                Reject
                                            </button>
<button class="border border-gray-300 hover:bg-gray-50 text-gray-700 text-xs px-3 py-1 rounded" data-action="add-comment" data-item-type="deal">
                                                Review
                                            </button>
</div>
</div>
<div class="mt-3 flex items-center justify-between">
<div class="flex items-center">
<img alt="Requester" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg"/>
<span class="text-xs text-green-700 ml-2">Requested by Emma Thompson</span>
</div>
<div class="flex items-center space-x-2">
<span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">Low Risk</span>
<span class="bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full">Schedule Change</span>
</div>
</div>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-indigo-50 border border-indigo-200 rounded-lg">
<div class="flex-shrink-0">
<div class="w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center">
<i class="fa-solid fa-shield-alt text-indigo-600"></i>
</div>
</div>
<div class="flex-1">
<div class="flex items-start justify-between">
<div>
<h4 class="font-semibold text-indigo-900">Risk Mitigation Plan - Executive Review</h4>
<p class="text-sm text-indigo-700 mt-1">Camden Office Complex - New risk assessment and mitigation strategies</p>
<div class="flex items-center mt-3 space-x-4">
<span class="text-xs text-indigo-600 font-medium">EXECUTIVE APPROVAL</span>
<span class="text-xs text-indigo-600">Due: Nov 25, 2024</span>
<span class="text-xs text-indigo-600">SLA: 9 days remaining</span>
</div>
</div>
<div class="flex flex-col space-y-1 ml-4">
<button class="bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1 rounded font-medium" data-action="approve" data-item-type="approval">
                                                Approve
                                            </button>
<button class="bg-red-600 hover:bg-red-700 text-white text-xs px-3 py-1 rounded font-medium" data-action="reject" data-item-type="approval">
                                                Reject
                                            </button>
<button class="border border-gray-300 hover:bg-gray-50 text-gray-700 text-xs px-3 py-1 rounded" data-action="add-comment" data-item-type="deal">
                                                Review
                                            </button>
</div>
</div>
<div class="mt-3 flex items-center justify-between">
<div class="flex items-center">
<img alt="Requester" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-6.jpg"/>
<span class="text-xs text-indigo-700 ml-2">Requested by Lisa Park</span>
</div>
<div class="flex items-center space-x-2">
<span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full">Medium Risk</span>
<span class="bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full">Risk Mitigation</span>
</div>
</div>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-teal-50 border border-teal-200 rounded-lg">
<div class="flex-shrink-0">
<div class="w-10 h-10 bg-teal-100 rounded-full flex items-center justify-center">
<i class="fa-solid fa-handshake text-teal-600"></i>
</div>
</div>
<div class="flex-1">
<div class="flex items-start justify-between">
<div>
<h4 class="font-semibold text-teal-900">Counterparty Agreement - External Review</h4>
<p class="text-sm text-teal-700 mt-1">Hackney Creative Hub - Joint venture terms and conditions</p>
<div class="flex items-center mt-3 space-x-4">
<span class="text-xs text-teal-600 font-medium">EXTERNAL APPROVAL</span>
<span class="text-xs text-teal-600">Due: Nov 28, 2024</span>
<span class="text-xs text-teal-600">SLA: 12 days remaining</span>
</div>
</div>
<div class="flex flex-col space-y-1 ml-4">
<button class="bg-teal-600 hover:bg-teal-700 text-white text-xs px-3 py-1 rounded font-medium">
                                                Follow Up
                                            </button>
<button class="border border-gray-300 hover:bg-gray-50 text-gray-700 text-xs px-3 py-1 rounded">
                                                View Details
                                            </button>
</div>
</div>
<div class="mt-3 flex items-center justify-between">
<div class="flex items-center">
<img alt="Requester" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-7.jpg"/>
<span class="text-xs text-teal-700 ml-2">Requested by James Wilson</span>
</div>
<div class="flex items-center space-x-2">
<span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">Joint Venture</span>
<span class="bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded-full">External Party</span>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="mb-8" id="task-notifications-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900 flex items-center">
<i class="fa-solid fa-tasks text-blue-500 mr-3"></i>
                            Task Notifications
                        </h3>
<div class="flex items-center space-x-2">
<span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">18 Active</span>
<button class="text-sm text-blue-600 hover:text-blue-700 font-medium">View All Tasks</button>
</div>
</div>
<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
<div>
<h4 class="font-medium text-gray-900 mb-4 flex items-center">
<div class="w-3 h-3 bg-red-500 rounded-full mr-2"></div>
                                Overdue Tasks (3)
                            </h4>
<div class="space-y-3">
<div class="p-4 bg-red-50 border-l-4 border-red-500 rounded-lg">
<h5 class="font-medium text-red-900">Legal Document Review</h5>
<p class="text-sm text-red-700 mt-1">Canary Wharf Office Deal</p>
<div class="flex items-center justify-between mt-3">
<span class="text-xs text-red-600 font-medium">OVERDUE 2 DAYS</span>
<div class="flex items-center">
<img alt="Assignee" class="w-5 h-5 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg"/>
<span class="text-xs text-red-700 ml-1">Sarah</span>
</div>
</div>
</div>
<div class="p-4 bg-red-50 border-l-4 border-red-500 rounded-lg">
<h5 class="font-medium text-red-900">Property Valuation Report</h5>
<p class="text-sm text-red-700 mt-1">Kings Cross Development</p>
<div class="flex items-center justify-between mt-3">
<span class="text-xs text-red-600 font-medium">OVERDUE 1 DAY</span>
<div class="flex items-center">
<img alt="Assignee" class="w-5 h-5 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg"/>
<span class="text-xs text-red-700 ml-1">David</span>
</div>
</div>
</div>
<div class="p-4 bg-red-50 border-l-4 border-red-500 rounded-lg">
<h5 class="font-medium text-red-900">Risk Assessment Update</h5>
<p class="text-sm text-red-700 mt-1">Shoreditch Retail Space</p>
<div class="flex items-center justify-between mt-3">
<span class="text-xs text-red-600 font-medium">OVERDUE 4 HOURS</span>
<div class="flex items-center">
<img alt="Assignee" class="w-5 h-5 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg"/>
<span class="text-xs text-red-700 ml-1">Mike</span>
</div>
</div>
</div>
</div>
</div>
<div>
<h4 class="font-medium text-gray-900 mb-4 flex items-center">
<div class="w-3 h-3 bg-orange-500 rounded-full mr-2"></div>
                                Due Today (5)
                            </h4>
<div class="space-y-3">
<div class="p-4 bg-orange-50 border-l-4 border-orange-500 rounded-lg">
<h5 class="font-medium text-orange-900">Client Presentation Prep</h5>
<p class="text-sm text-orange-700 mt-1">Camden Office Complex</p>
<div class="flex items-center justify-between mt-3">
<span class="text-xs text-orange-600 font-medium">DUE IN 4 HOURS</span>
<div class="flex items-center">
<img alt="Assignee" class="w-5 h-5 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg"/>
<span class="text-xs text-orange-700 ml-1">Emma</span>
</div>
</div>
</div>
<div class="p-4 bg-orange-50 border-l-4 border-orange-500 rounded-lg">
<h5 class="font-medium text-orange-900">Financial Model Review</h5>
<p class="text-sm text-orange-700 mt-1">Bermondsey Industrial Unit</p>
<div class="flex items-center justify-between mt-3">
<span class="text-xs text-orange-600 font-medium">DUE IN 6 HOURS</span>
<div class="flex items-center">
<img alt="Assignee" class="w-5 h-5 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-6.jpg"/>
<span class="text-xs text-orange-700 ml-1">Lisa</span>
</div>
</div>
</div>
<div class="p-4 bg-orange-50 border-l-4 border-orange-500 rounded-lg">
<h5 class="font-medium text-orange-900">Contract Terms Negotiation</h5>
<p class="text-sm text-orange-700 mt-1">Hackney Creative Hub</p>
<div class="flex items-center justify-between mt-3">
<span class="text-xs text-orange-600 font-medium">DUE TODAY</span>
<div class="flex items-center">
<img alt="Assignee" class="w-5 h-5 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-7.jpg"/>
<span class="text-xs text-orange-700 ml-1">James</span>
</div>
</div>
</div>
<div class="p-4 bg-orange-50 border-l-4 border-orange-500 rounded-lg">
<h5 class="font-medium text-orange-900">Site Survey Coordination</h5>
<p class="text-sm text-orange-700 mt-1">Greenwich Warehouse</p>
<div class="flex items-center justify-between mt-3">
<span class="text-xs text-orange-600 font-medium">DUE IN 2 HOURS</span>
<div class="flex items-center">
<img alt="Assignee" class="w-5 h-5 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-8.jpg"/>
<span class="text-xs text-orange-700 ml-1">Robert</span>
</div>
</div>
</div>
<div class="p-4 bg-orange-50 border-l-4 border-orange-500 rounded-lg">
<h5 class="font-medium text-orange-900">Stakeholder Meeting Prep</h5>
<p class="text-sm text-orange-700 mt-1">Islington Mixed Use</p>
<div class="flex items-center justify-between mt-3">
<span class="text-xs text-orange-600 font-medium">DUE IN 8 HOURS</span>
<div class="flex items-center">
<img alt="Assignee" class="w-5 h-5 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-9.jpg"/>
<span class="text-xs text-orange-700 ml-1">Tom</span>
</div>
</div>
</div>
</div>
</div>
<div>
<h4 class="font-medium text-gray-900 mb-4 flex items-center">
<div class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></div>
                                Due This Week (10)
                            </h4>
<div class="space-y-3">
<div class="p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg">
<h5 class="font-medium text-yellow-900">Market Research Analysis</h5>
<p class="text-sm text-yellow-700 mt-1">Stratford Retail Park</p>
<div class="flex items-center justify-between mt-3">
<span class="text-xs text-yellow-600 font-medium">DUE WEDNESDAY</span>
<div class="flex items-center">
<img alt="Assignee" class="w-5 h-5 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg"/>
<span class="text-xs text-yellow-700 ml-1">Sarah</span>
</div>
</div>
</div>
<div class="p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg">
<h5 class="font-medium text-yellow-900">Planning Permission Check</h5>
<p class="text-sm text-yellow-700 mt-1">Wapping Residential</p>
<div class="flex items-center justify-between mt-3">
<span class="text-xs text-yellow-600 font-medium">DUE THURSDAY</span>
<div class="flex items-center">
<img alt="Assignee" class="w-5 h-5 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg"/>
<span class="text-xs text-yellow-700 ml-1">Mike</span>
</div>
</div>
</div>
<div class="p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg">
<h5 class="font-medium text-yellow-900">Environmental Impact Assessment</h5>
<p class="text-sm text-yellow-700 mt-1">Docklands Office Tower</p>
<div class="flex items-center justify-between mt-3">
<span class="text-xs text-yellow-600 font-medium">DUE FRIDAY</span>
<div class="flex items-center">
<img alt="Assignee" class="w-5 h-5 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg"/>
<span class="text-xs text-yellow-700 ml-1">David</span>
</div>
</div>
</div>
<div class="p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg">
<h5 class="font-medium text-yellow-900">Insurance Policy Review</h5>
<p class="text-sm text-yellow-700 mt-1">Croydon Business Park</p>
<div class="flex items-center justify-between mt-3">
<span class="text-xs text-yellow-600 font-medium">DUE FRIDAY</span>
<div class="flex items-center">
<img alt="Assignee" class="w-5 h-5 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg"/>
<span class="text-xs text-yellow-700 ml-1">Emma</span>
</div>
</div>
</div>
<div class="text-center p-3 text-sm text-gray-500 border border-gray-200 rounded-lg">
<span>+6 more tasks this week</span>
<button class="text-blue-600 hover:text-blue-700 ml-2" data-view-all="deals-overview">View All</button>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="mb-8" id="document-notifications-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900 flex items-center">
<i class="fa-solid fa-file-upload text-green-500 mr-3"></i>
                            Document Notifications
                        </h3>
<div class="flex items-center space-x-2">
<span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">8 New</span>
<button class="text-sm text-green-600 hover:text-green-700 font-medium">View Document Center</button>
</div>
</div>
<div class="space-y-4">
<div class="flex items-start space-x-4 p-4 bg-green-50 border border-green-200 rounded-lg">
<div class="flex-shrink-0">
<div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
<i class="fa-solid fa-file-pdf text-green-600"></i>
</div>
</div>
<div class="flex-1">
<div class="flex items-start justify-between">
<div>
<h4 class="font-semibold text-green-900">New HoT Version Uploaded</h4>
<p class="text-sm text-green-700 mt-1">HoT_v2.4_CanaryWharf_Final.pdf uploaded for Canary Wharf Office Deal</p>
<div class="flex items-center mt-3 space-x-4">
<span class="text-xs text-green-600 font-medium">VERSION 2.4</span>
<span class="text-xs text-green-600">15 minutes ago</span>
<span class="text-xs text-green-600">Size: 2.3 MB</span>
</div>
</div>
<div class="flex items-center space-x-2 ml-4">
<button class="bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1 rounded font-medium" data-action="add-comment" data-item-type="deal">
                                            Review
                                        </button>
<button data-export="download"  class="border border-green-300 hover:bg-green-50 text-green-700 text-xs px-3 py-1 rounded">Export</button>
</div>
</div>
<div class="mt-3 flex items-center justify-between">
<div class="flex items-center">
<img alt="Uploader" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg"/>
<span class="text-xs text-green-700 ml-2">Uploaded by Sarah Chen</span>
</div>
<div class="flex items-center space-x-2">
<span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">Legal Review Required</span>
<span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full">High Priority</span>
</div>
</div>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
<div class="flex-shrink-0">
<div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
<i class="fa-solid fa-file-word text-blue-600"></i>
</div>
</div>
<div class="flex-1">
<div class="flex items-start justify-between">
<div>
<h4 class="font-semibold text-blue-900">Contract Amendment Received</h4>
<p class="text-sm text-blue-700 mt-1">Contract_Amendment_Shoreditch_v1.3.docx received from external legal counsel</p>
<div class="flex items-center mt-3 space-x-4">
<span class="text-xs text-blue-600 font-medium">AMENDMENT</span>
<span class="text-xs text-blue-600">1 hour ago</span>
<span class="text-xs text-blue-600">Size: 1.8 MB</span>
</div>
</div>
<div class="flex items-center space-x-2 ml-4">
<button class="bg-blue-600 hover:bg-blue-700 text-white text-xs px-3 py-1 rounded font-medium">
                                            Review Changes
                                        </button>
<button class="border border-blue-300 hover:bg-blue-50 text-blue-700 text-xs px-3 py-1 rounded">
                                            Compare
                                        </button>
</div>
</div>
<div class="mt-3 flex items-center justify-between">
<div class="flex items-center">
<div class="w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center">
<i class="fa-solid fa-building text-gray-600 text-xs"></i>
</div>
<span class="text-xs text-blue-700 ml-2">External Legal Counsel</span>
</div>
<div class="flex items-center space-x-2">
<span class="bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full">Contract Changes</span>
<span class="bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full">External Source</span>
</div>
</div>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-purple-50 border border-purple-200 rounded-lg">
<div class="flex-shrink-0">
<div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center">
<i class="fa-solid fa-file-excel text-purple-600"></i>
</div>
</div>
<div class="flex-1">
<div class="flex items-start justify-between">
<div>
<h4 class="font-semibold text-purple-900">Financial Model Updated</h4>
<p class="text-sm text-purple-700 mt-1">KingsCross_Financial_Model_v3.1.xlsx with updated market assumptions</p>
<div class="flex items-center mt-3 space-x-4">
<span class="text-xs text-purple-600 font-medium">FINANCIAL MODEL</span>
<span class="text-xs text-purple-600">2 hours ago</span>
<span class="text-xs text-purple-600">Size: 4.7 MB</span>
</div>
</div>
<div class="flex items-center space-x-2 ml-4">
<button class="bg-purple-600 hover:bg-purple-700 text-white text-xs px-3 py-1 rounded font-medium">
                                            Analyze
                                        </button>
<button data-export="download"  class="border border-purple-300 hover:bg-purple-50 text-purple-700 text-xs px-3 py-1 rounded">Export</button>
</div>
</div>
<div class="mt-3 flex items-center justify-between">
<div class="flex items-center">
<img alt="Uploader" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg"/>
<span class="text-xs text-purple-700 ml-2">Updated by David Kim</span>
</div>
<div class="flex items-center space-x-2">
<span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">Finance Review</span>
<span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">Market Data</span>
</div>
</div>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-gray-50 border border-gray-200 rounded-lg">
<div class="flex-shrink-0">
<div class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center">
<i class="fa-solid fa-file-image text-gray-600"></i>
</div>
</div>
<div class="flex-1">
<div class="flex items-start justify-between">
<div>
<h4 class="font-semibold text-gray-900">Site Survey Photos Uploaded</h4>
<p class="text-sm text-gray-700 mt-1">15 high-resolution photos from Bermondsey Industrial Unit site visit</p>
<div class="flex items-center mt-3 space-x-4">
<span class="text-xs text-gray-600 font-medium">SITE SURVEY</span>
<span class="text-xs text-gray-600">3 hours ago</span>
<span class="text-xs text-gray-600">15 files • 24.5 MB</span>
</div>
</div>
<div class="flex items-center space-x-2 ml-4">
<button class="bg-gray-600 hover:bg-gray-700 text-white text-xs px-3 py-1 rounded font-medium">
                                            View Gallery
                                        </button>
<button data-export="download"  class="border border-gray-300 hover:bg-gray-50 text-gray-700 text-xs px-3 py-1 rounded">ExportAll
                                        </button>
</div>
</div>
<div class="mt-3 flex items-center justify-between">
<div class="flex items-center">
<img alt="Uploader" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg"/>
<span class="text-xs text-gray-700 ml-2">Uploaded by Emma Thompson</span>
</div>
<div class="flex items-center space-x-2">
<span class="bg-teal-100 text-teal-800 text-xs px-2 py-1 rounded-full">Site Documentation</span>
<span class="bg-indigo-100 text-indigo-800 text-xs px-2 py-1 rounded-full">Visual Evidence</span>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="mb-8" id="comment-notifications-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900 flex items-center">
<i class="fa-solid fa-comment text-indigo-500 mr-3"></i>
                            Comments &amp; Mentions
                        </h3>
<div class="flex items-center space-x-2">
<span class="bg-indigo-100 text-indigo-800 text-xs px-2 py-1 rounded-full">14 New</span>
<button class="text-sm text-indigo-600 hover:text-indigo-700 font-medium">View All Comments</button>
</div>
</div>
<div class="space-y-4">
<div class="flex items-start space-x-4 p-4 bg-indigo-50 border border-indigo-200 rounded-lg">
<img alt="Commenter" class="w-10 h-10 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg"/>
<div class="flex-1">
<div class="flex items-start justify-between">
<div>
<h4 class="font-semibold text-indigo-900">Sarah Chen mentioned you</h4>
<p class="text-sm text-indigo-700 mt-1">@alex can you review the updated lease terms in section 4.2? There are some changes to the break clauses that need your attention.</p>
<div class="flex items-center mt-3 space-x-4">
<span class="text-xs text-indigo-600 font-medium">MENTION</span>
<span class="text-xs text-indigo-600">30 minutes ago</span>
<span class="text-xs text-indigo-600">Canary Wharf Office Deal</span>
</div>
</div>
<div class="flex items-center space-x-2 ml-4">
<button class="bg-indigo-600 hover:bg-indigo-700 text-white text-xs px-3 py-1 rounded font-medium">
                                            Reply
                                        </button>
<button class="border border-indigo-300 hover:bg-indigo-50 text-indigo-700 text-xs px-3 py-1 rounded">
                                            View Context
                                        </button>
</div>
</div>
<div class="mt-3 flex items-center space-x-4">
<span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full">Legal Review</span>
<span class="bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full">Urgent</span>
</div>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-green-50 border border-green-200 rounded-lg">
<img alt="Commenter" class="w-10 h-10 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg"/>
<div class="flex-1">
<div class="flex items-start justify-between">
<div>
<h4 class="font-semibold text-green-900">New comment on Shoreditch Retail Space</h4>
<p class="text-sm text-green-700 mt-1">Mike Rodriguez: "Great news! The landlord has agreed to the rent-free period. Contract is ready for final signatures."</p>
<div class="flex items-center mt-3 space-x-4">
<span class="text-xs text-green-600 font-medium">COMMENT</span>
<span class="text-xs text-green-600">1 hour ago</span>
<span class="text-xs text-green-600">Contract Stage</span>
</div>
</div>
<div class="flex items-center space-x-2 ml-4">
<button class="bg-green-600 hover:bg-green-700 text-white text-xs px-3 py-1 rounded font-medium">
                                            View Deal
                                        </button>
<button class="border border-green-300 hover:bg-green-50 text-green-700 text-xs px-3 py-1 rounded">
                                            Like
                                        </button>
</div>
</div>
<div class="mt-3 flex items-center space-x-4">
<span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">Good News</span>
<span class="bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full">Contract Ready</span>
</div>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
<img alt="Commenter" class="w-10 h-10 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg"/>
<div class="flex-1">
<div class="flex items-start justify-between">
<div>
<h4 class="font-semibold text-yellow-900">David Kim flagged a concern</h4>
<p class="text-sm text-yellow-700 mt-1">"The market analysis shows potential oversupply in Q2 2025. Should we reconsider the rental rates for Kings Cross Development?"</p>
<div class="flex items-center mt-3 space-x-4">
<span class="text-xs text-yellow-600 font-medium">CONCERN FLAGGED</span>
<span class="text-xs text-yellow-600">2 hours ago</span>
<span class="text-xs text-yellow-600">Kings Cross Development</span>
</div>
</div>
<div class="flex items-center space-x-2 ml-4">
<button class="bg-yellow-600 hover:bg-yellow-700 text-white text-xs px-3 py-1 rounded font-medium">
                                            Address
                                        </button>
<button class="border border-yellow-300 hover:bg-yellow-50 text-yellow-700 text-xs px-3 py-1 rounded">
                                            Discuss
                                        </button>
</div>
</div>
<div class="mt-3 flex items-center space-x-4">
<span class="bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full">Risk Alert</span>
<span class="bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full">Market Analysis</span>
</div>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
<img alt="Commenter" class="w-10 h-10 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg"/>
<div class="flex-1">
<div class="flex items-start justify-between">
<div>
<h4 class="font-semibold text-blue-900">Emma Thompson requested feedback</h4>
<p class="text-sm text-blue-700 mt-1">"Team, please review the onboarding timeline for Bermondsey Industrial Unit. Client wants to accelerate by 2 weeks."</p>
<div class="flex items-center mt-3 space-x-4">
<span class="text-xs text-blue-600 font-medium">FEEDBACK REQUEST</span>
<span class="text-xs text-blue-600">4 hours ago</span>
<span class="text-xs text-blue-600">Bermondsey Industrial Unit</span>
</div>
</div>
<div class="flex items-center space-x-2 ml-4">
<button class="bg-blue-600 hover:bg-blue-700 text-white text-xs px-3 py-1 rounded font-medium">
                                            Provide Feedback
                                        </button>
<button class="border border-blue-300 hover:bg-blue-50 text-blue-700 text-xs px-3 py-1 rounded">
                                            View Timeline
                                        </button>
</div>
</div>
<div class="mt-3 flex items-center space-x-4">
<span class="bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded-full">Timeline Change</span>
<span class="bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full">Client Request</span>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="mb-8" id="system-notifications-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900 flex items-center">
<i class="fa-solid fa-cog text-gray-500 mr-3"></i>
                            System &amp; Integration Notifications
                        </h3>
<div class="flex items-center space-x-2">
<span class="bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded-full">6 System</span>
<button class="text-sm text-gray-600 hover:text-gray-700 font-medium">System Settings</button>
</div>
</div>
<div class="space-y-4">
<div class="flex items-start space-x-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
<div class="flex-shrink-0">
<div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
<i class="fa-solid fa-sync text-blue-600"></i>
</div>
</div>
<div class="flex-1">
<div class="flex items-start justify-between">
<div>
<h4 class="font-semibold text-blue-900">CRM Integration Sync Complete</h4>
<p class="text-sm text-blue-700 mt-1">Successfully synchronized 47 contact records and 12 property listings from Salesforce</p>
<div class="flex items-center mt-3 space-x-4">
<span class="text-xs text-blue-600 font-medium">INTEGRATION</span>
<span class="text-xs text-blue-600">5 minutes ago</span>
<span class="text-xs text-blue-600">Salesforce</span>
</div>
</div>
<div class="flex items-center space-x-2 ml-4">
<button class="border border-blue-300 hover:bg-blue-50 text-blue-700 text-xs px-3 py-1 rounded">
                                            View Log
                                        </button>
</div>
</div>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-green-50 border border-green-200 rounded-lg">
<div class="flex-shrink-0">
<div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
<i class="fa-solid fa-shield-check text-green-600"></i>
</div>
</div>
<div class="flex-1">
<div class="flex items-start justify-between">
<div>
<h4 class="font-semibold text-green-900">Security Backup Completed</h4>
<p class="text-sm text-green-700 mt-1">Daily encrypted backup of all deal data and documents completed successfully</p>
<div class="flex items-center mt-3 space-x-4">
<span class="text-xs text-green-600 font-medium">BACKUP</span>
<span class="text-xs text-green-600">2:00 AM</span>
<span class="text-xs text-green-600">All Systems</span>
</div>
</div>
<div class="flex items-center space-x-2 ml-4">
<button class="border border-green-300 hover:bg-green-50 text-green-700 text-xs px-3 py-1 rounded">
                                            Verify
                                        </button>
</div>
</div>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
<div class="flex-shrink-0">
<div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center">
<i class="fa-solid fa-exclamation-triangle text-yellow-600"></i>
</div>
</div>
<div class="flex-1">
<div class="flex items-start justify-between">
<div>
<h4 class="font-semibold text-yellow-900">API Rate Limit Warning</h4>
<p class="text-sm text-yellow-700 mt-1">Property valuation API approaching rate limit (85% used). Consider upgrading plan.</p>
<div class="flex items-center mt-3 space-x-4">
<span class="text-xs text-yellow-600 font-medium">API WARNING</span>
<span class="text-xs text-yellow-600">1 hour ago</span>
<span class="text-xs text-yellow-600">Valuation Service</span>
</div>
</div>
<div class="flex items-center space-x-2 ml-4">
<button class="bg-yellow-600 hover:bg-yellow-700 text-white text-xs px-3 py-1 rounded font-medium">
                                            Upgrade Plan
                                        </button>
<button class="border border-yellow-300 hover:bg-yellow-50 text-yellow-700 text-xs px-3 py-1 rounded">
                                            View Usage
                                        </button>
</div>
</div>
</div>
</div>
<div class="flex items-start space-x-4 p-4 bg-purple-50 border border-purple-200 rounded-lg">
<div class="flex-shrink-0">
<div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center">
<i class="fa-solid fa-rocket text-purple-600"></i>
</div>
</div>
<div class="flex-1">
<div class="flex items-start justify-between">
<div>
<h4 class="font-semibold text-purple-900">System Update Available</h4>
<p class="text-sm text-purple-700 mt-1">Union Core v2.4.1 is available with enhanced reporting features and bug fixes</p>
<div class="flex items-center mt-3 space-x-4">
<span class="text-xs text-purple-600 font-medium">UPDATE</span>
<span class="text-xs text-purple-600">Available now</span>
<span class="text-xs text-purple-600">Version 2.4.1</span>
</div>
</div>
<div class="flex items-center space-x-2 ml-4">
<button class="bg-purple-600 hover:bg-purple-700 text-white text-xs px-3 py-1 rounded font-medium">
                                            Update Now
                                        </button>
<button class="border border-purple-300 hover:bg-purple-50 text-purple-700 text-xs px-3 py-1 rounded">
                                            Release Notes
                                        </button>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="mb-8" id="notification-analytics-section">
<div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6"></div></section></main>
    </div>
    <!-- END NOTIFICATIONS PAGE -->











            <!-- DEAL ROOM PAGE -->
            <div id="deal-room-page" class="page-content hidden">
<div class="flex-1 flex flex-col overflow-hidden" id="main-content">
<header class="bg-white shadow-sm border-b border-gray-200 px-6 py-4" id="header">
<div class="flex items-center justify-between">
<div class="flex items-center space-x-4">
<button class="p-2 text-gray-400 hover:text-gray-600" onclick="history.back()">
<i class="fa-solid fa-arrow-left"></i>
</button>
<div>
<h1 class="text-2xl font-bold text-gray-900">Canary Wharf Office Deal</h1>
<div class="flex items-center space-x-4 mt-1">
<p class="text-sm text-gray-500">DL_CW_2024_001</p>
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-pink-100 text-pink-800">
                                HoTs Stage
                            </span>
<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                Medium Risk
                            </span>
</div>
</div>
</div>
<div class="flex items-center space-x-4">
<button class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">
<i class="fa-solid fa-share mr-2"></i>
                        Share
                    </button>
<button data-export="data"  class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50"></i>Export</button>
<button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium">
<i class="fa-solid fa-edit mr-2"></i>
                        Edit Deal
                    </button>
</div>
</div>
</header>
<div class="flex-1 overflow-y-auto" id="deal-detail-main">
<section class="bg-white border-b border-gray-200 p-6" id="deal-overview-section">
<div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
<div class="lg:col-span-3">
<div class="grid grid-cols-1 md:grid-cols-3 gap-6">
<div class="bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-blue-700">Deal Value</p>
<p class="text-3xl font-bold text-blue-900 mt-2">£2,100,000</p>
<div class="flex items-center mt-2">
<span class="text-green-600 text-sm font-medium">+5.2%</span>
<span class="text-blue-600 text-sm ml-2">vs initial estimate</span>
</div>
</div>
<div class="bg-blue-100 p-3 rounded-full">
<i class="fa-solid fa-pound-sign text-blue-600 text-xl"></i>
</div>
</div>
</div>
<div class="bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-xl border border-green-200">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-green-700">Probability</p>
<p class="text-3xl font-bold text-green-900 mt-2">85%</p>
<div class="flex items-center mt-2">
<div class="w-16 bg-green-200 rounded-full h-2">
<div class="bg-green-500 h-2 rounded-full" style="width: 85%"></div>
</div>
</div>
</div>
<div class="bg-green-100 p-3 rounded-full">
<i class="fa-solid fa-percentage text-green-600 text-xl"></i>
</div>
</div>
</div>
<div class="bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-xl border border-purple-200">
<div class="flex items-center justify-between">
<div>
<p class="text-sm font-medium text-purple-700">Days Active</p>
<p class="text-3xl font-bold text-purple-900 mt-2">42</p>
<div class="flex items-center mt-2">
<span class="text-purple-600 text-sm">Next: Contract Review</span>
</div>
</div>
<div class="bg-purple-100 p-3 rounded-full">
<i class="fa-solid fa-calendar text-purple-600 text-xl"></i>
</div>
</div>
</div>
</div>
<div class="mt-6 p-6 bg-gray-50 rounded-xl">
<h3 class="text-lg font-semibold text-gray-900 mb-4">Property Details</h3>
<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
<div>
<div class="space-y-3">
<div class="flex justify-between">
<span class="text-gray-600">Address:</span>
<span class="font-medium text-gray-900">25 Canada Square, Canary Wharf</span>
</div>
<div class="flex justify-between">
<span class="text-gray-600">Property Type:</span>
<span class="font-medium text-gray-900">Office</span>
</div>
<div class="flex justify-between">
<span class="text-gray-600">Area:</span>
<span class="font-medium text-gray-900">15,000 sq ft</span>
</div>
<div class="flex justify-between">
<span class="text-gray-600">Floors:</span>
<span class="font-medium text-gray-900">12-14</span>
</div>
</div>
</div>
<div>
<div class="space-y-3">
<div class="flex justify-between">
<span class="text-gray-600">Lease Term:</span>
<span class="font-medium text-gray-900">10 years</span>
</div>
<div class="flex justify-between">
<span class="text-gray-600">Annual Rent:</span>
<span class="font-medium text-gray-900">£140 per sq ft</span>
</div>
<div class="flex justify-between">
<span class="text-gray-600">Service Charge:</span>
<span class="font-medium text-gray-900">£12 per sq ft</span>
</div>
<div class="flex justify-between">
<span class="text-gray-600">Parking Spaces:</span>
<span class="font-medium text-gray-900">25</span>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="space-y-6">
<div class="bg-white border border-gray-200 rounded-xl p-6">
<h3 class="text-lg font-semibold text-gray-900 mb-4">Key Stakeholders</h3>
<div class="space-y-4">
<div class="flex items-center space-x-3">
<img alt="Owner" class="w-10 h-10 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg"/>
<div>
<p class="font-medium text-gray-900">Sarah Chen</p>
<p class="text-sm text-gray-500">Deal Architect</p>
</div>
</div>
<div class="flex items-center space-x-3">
<img alt="Legal" class="w-10 h-10 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg"/>
<div>
<p class="font-medium text-gray-900">Michael Roberts</p>
<p class="text-sm text-gray-500">Legal Counsel</p>
</div>
</div>
<div class="flex items-center space-x-3">
<img alt="Client" class="w-10 h-10 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg"/>
<div>
<p class="font-medium text-gray-900">Emma Thompson</p>
<p class="text-sm text-gray-500">Client Representative</p>
</div>
</div>
</div>
</div>
<div class="bg-white border border-gray-200 rounded-xl p-6">
<h3 class="text-lg font-semibold text-gray-900 mb-4">Important Dates</h3>
<div class="space-y-3">
<div class="flex justify-between items-center">
<span class="text-gray-600">Created:</span>
<span class="text-sm font-medium text-gray-900">Oct 5, 2024</span>
</div>
<div class="flex justify-between items-center">
<span class="text-gray-600">Proposal Due:</span>
<span class="text-sm font-medium text-orange-600">Nov 15, 2024</span>
</div>
<div class="flex justify-between items-center">
<span class="text-gray-600">Contract Review:</span>
<span class="text-sm font-medium text-red-600">Nov 20, 2024</span>
</div>
<div class="flex justify-between items-center">
<span class="text-gray-600">Go Live Target:</span>
<span class="text-sm font-medium text-gray-900">Dec 15, 2024</span>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="bg-white border-b border-gray-200 p-6" id="deal-stages-section">
<h3 class="text-lg font-semibold text-gray-900 mb-6">Deal Pipeline Progress</h3>
<div class="relative">
<div class="flex items-center justify-between mb-4">
<div class="flex items-center space-x-4">
<button class="px-4 py-2 bg-blue-50 text-blue-700 rounded-lg border border-blue-200 font-medium">All Stages</button>
<button class="px-4 py-2 text-gray-600 hover:bg-gray-50 rounded-lg border border-gray-200">Current Stage</button>
<button class="px-4 py-2 text-gray-600 hover:bg-gray-50 rounded-lg border border-gray-200">Timeline View</button>
</div>
<div class="text-sm text-gray-500">
                            Progress: 57% Complete
                        </div>
</div>
<div class="relative">
<div class="absolute top-8 left-0 right-0 h-1 bg-gray-200 rounded-full"></div>
<div class="absolute top-8 left-0 h-1 bg-blue-500 rounded-full" style="width: 57%"></div>
<div class="flex justify-between relative">
<div class="text-center">
<div class="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mb-2 relative z-10">
<i class="fa-solid fa-check text-white text-lg"></i>
</div>
<h4 class="text-sm font-medium text-gray-900">Lead</h4>
<p class="text-xs text-gray-500 mt-1">Completed</p>
<p class="text-xs text-green-600 font-medium">Oct 5, 2024</p>
</div>
<div class="text-center">
<div class="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mb-2 relative z-10">
<i class="fa-solid fa-check text-white text-lg"></i>
</div>
<h4 class="text-sm font-medium text-gray-900">Viewing</h4>
<p class="text-xs text-gray-500 mt-1">Completed</p>
<p class="text-xs text-green-600 font-medium">Oct 12, 2024</p>
</div>
<div class="text-center">
<div class="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mb-2 relative z-10">
<i class="fa-solid fa-check text-white text-lg"></i>
</div>
<h4 class="text-sm font-medium text-gray-900">Proposal</h4>
<p class="text-xs text-gray-500 mt-1">Completed</p>
<p class="text-xs text-green-600 font-medium">Oct 25, 2024</p>
</div>
<div class="text-center">
<div class="w-16 h-16 bg-blue-500 rounded-full flex items-center justify-center mb-2 relative z-10 border-4 border-blue-200">
<i class="fa-solid fa-clock text-white text-lg"></i>
</div>
<h4 class="text-sm font-medium text-blue-900">HoTs</h4>
<p class="text-xs text-blue-600 mt-1">In Progress</p>
<p class="text-xs text-blue-600 font-medium">Due: Nov 15</p>
</div>
<div class="text-center">
<div class="w-16 h-16 bg-gray-300 rounded-full flex items-center justify-center mb-2 relative z-10">
<i class="fa-solid fa-file-contract text-gray-500 text-lg"></i>
</div>
<h4 class="text-sm font-medium text-gray-500">Contract</h4>
<p class="text-xs text-gray-400 mt-1">Pending</p>
<p class="text-xs text-gray-400">Est: Nov 20</p>
</div>
<div class="text-center">
<div class="w-16 h-16 bg-gray-300 rounded-full flex items-center justify-center mb-2 relative z-10">
<i class="fa-solid fa-cog text-gray-500 text-lg"></i>
</div>
<h4 class="text-sm font-medium text-gray-500">Onboarding</h4>
<p class="text-xs text-gray-400 mt-1">Pending</p>
<p class="text-xs text-gray-400">Est: Dec 1</p>
</div>
<div class="text-center">
<div class="w-16 h-16 bg-gray-300 rounded-full flex items-center justify-center mb-2 relative z-10">
<i class="fa-solid fa-flag-checkered text-gray-500 text-lg"></i>
</div>
<h4 class="text-sm font-medium text-gray-500">Live</h4>
<p class="text-xs text-gray-400 mt-1">Pending</p>
<p class="text-xs text-gray-400">Est: Dec 15</p>
</div>
</div>
</div>
</div>
</section>
<section class="bg-white border-b border-gray-200 p-6" id="current-hot-section">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Current Heads of Terms</h3>
<div class="flex items-center space-x-3">
<span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800">
                            Under Review
                        </span>
<button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
<i class="fa-solid fa-edit mr-2"></i>
                            Edit HoT
                        </button>
</div>
</div>
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<div class="bg-gray-50 rounded-xl p-6">
<div class="flex items-center justify-between mb-4">
<h4 class="font-medium text-gray-900">Version History</h4>
<button class="text-sm text-blue-600 hover:text-blue-700">View All Versions</button>
</div>
<div class="space-y-4">
<div class="bg-white border border-blue-200 rounded-lg p-4">
<div class="flex items-center justify-between mb-2">
<span class="font-medium text-gray-900">Version 2.1</span>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                        Current
                                    </span>
</div>
<p class="text-sm text-gray-600 mb-3">Updated commercial terms and added break clause</p>
<div class="flex items-center justify-between text-xs text-gray-500">
<span>Created by Sarah Chen</span>
<span>Nov 8, 2024</span>
</div>
<div class="mt-3 pt-3 border-t border-gray-200">
<div class="grid grid-cols-3 gap-4 text-center">
<div>
<div class="text-green-600 font-medium">3</div>
<div class="text-xs text-gray-500">Added</div>
</div>
<div>
<div class="text-orange-600 font-medium">5</div>
<div class="text-xs text-gray-500">Modified</div>
</div>
<div>
<div class="text-red-600 font-medium">1</div>
<div class="text-xs text-gray-500">Removed</div>
</div>
</div>
</div>
</div>
<div class="bg-white border border-gray-200 rounded-lg p-4">
<div class="flex items-center justify-between mb-2">
<span class="font-medium text-gray-900">Version 2.0</span>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Approved
                                    </span>
</div>
<p class="text-sm text-gray-600 mb-3">Initial draft with base commercial terms</p>
<div class="flex items-center justify-between text-xs text-gray-500">
<span>Created by Sarah Chen</span>
<span>Nov 1, 2024</span>
</div>
</div>
</div>
</div>
<div class="bg-gray-50 rounded-xl p-6">
<h4 class="font-medium text-gray-900 mb-4">Section Completeness</h4>
<div class="space-y-4">
<div class="flex items-center justify-between">
<span class="text-gray-700">Parties</span>
<div class="flex items-center space-x-2">
<div class="w-24 bg-gray-200 rounded-full h-2">
<div class="bg-green-500 h-2 rounded-full" style="width: 100%"></div>
</div>
<i class="fa-solid fa-check-circle text-green-500"></i>
</div>
</div>
<div class="flex items-center justify-between">
<span class="text-gray-700">Commercials</span>
<div class="flex items-center space-x-2">
<div class="w-24 bg-gray-200 rounded-full h-2">
<div class="bg-green-500 h-2 rounded-full" style="width: 100%"></div>
</div>
<i class="fa-solid fa-check-circle text-green-500"></i>
</div>
</div>
<div class="flex items-center justify-between">
<span class="text-gray-700">Term</span>
<div class="flex items-center space-x-2">
<div class="w-24 bg-gray-200 rounded-full h-2">
<div class="bg-yellow-500 h-2 rounded-full" style="width: 80%"></div>
</div>
<i class="fa-solid fa-clock text-yellow-500"></i>
</div>
</div>
<div class="flex items-center justify-between">
<span class="text-gray-700">Responsibilities</span>
<div class="flex items-center space-x-2">
<div class="w-24 bg-gray-200 rounded-full h-2">
<div class="bg-green-500 h-2 rounded-full" style="width: 100%"></div>
</div>
<i class="fa-solid fa-check-circle text-green-500"></i>
</div>
</div>
<div class="flex items-center justify-between">
<span class="text-gray-700">Options</span>
<div class="flex items-center space-x-2">
<div class="w-24 bg-gray-200 rounded-full h-2">
<div class="bg-red-500 h-2 rounded-full" style="width: 45%"></div>
</div>
<i class="fa-solid fa-exclamation-circle text-red-500"></i>
</div>
</div>
<div class="flex items-center justify-between">
<span class="text-gray-700">Conditions</span>
<div class="flex items-center space-x-2">
<div class="w-24 bg-gray-200 rounded-full h-2">
<div class="bg-yellow-500 h-2 rounded-full" style="width: 70%"></div>
</div>
<i class="fa-solid fa-clock text-yellow-500"></i>
</div>
</div>
</div>
<div class="mt-6 p-4 bg-white rounded-lg border border-gray-200">
<div class="text-center">
<div class="text-2xl font-bold text-gray-900">82%</div>
<div class="text-sm text-gray-600">Overall Completeness</div>
</div>
</div>
</div>
</div>
</section>
<section class="bg-white border-b border-gray-200 p-6" id="documents-section">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Related Documents</h3>
<div class="flex items-center space-x-3">
<button class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50" data-filter-toggle="filter-panel">
<i class="fa-solid fa-filter mr-2"></i>
                            Filter
                        </button>
<button class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
<i class="fa-solid fa-upload mr-2"></i>
                            Upload Document
                        </button>
</div>
</div>
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<div>
<h4 class="font-medium text-gray-900 mb-4">Primary Documents</h4>
<div class="space-y-4">
<div class="flex items-center space-x-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
<div class="bg-blue-100 p-3 rounded-lg">
<i class="fa-solid fa-file-contract text-blue-600 text-xl"></i>
</div>
<div class="flex-1">
<h5 class="font-medium text-gray-900">HoT_v2.1_CanaryWharf.pdf</h5>
<p class="text-sm text-gray-600">Current Heads of Terms document</p>
<div class="flex items-center justify-between mt-2">
<span class="text-xs text-gray-500">Updated 2 hours ago • Sarah Chen</span>
<div class="flex items-center space-x-2">
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                                Under Review
                                            </span>
</div>
</div>
</div>
<div class="flex flex-col space-y-2">
<button class="p-2 text-blue-600 hover:bg-blue-100 rounded">
<i class="fa-solid fa-eye"></i>
</button>
<button class="p-2 text-blue-600 hover:bg-blue-100 rounded">
<i class="fa-solid fa-download"></i>
</button>
</div>
</div>
<div class="flex items-center space-x-4 p-4 border border-gray-200 rounded-lg">
<div class="bg-gray-100 p-3 rounded-lg">
<i class="fa-solid fa-file-pdf text-gray-600 text-xl"></i>
</div>
<div class="flex-1">
<h5 class="font-medium text-gray-900">Property_Survey_CanaryWharf.pdf</h5>
<p class="text-sm text-gray-600">Professional property survey report</p>
<div class="flex items-center justify-between mt-2">
<span class="text-xs text-gray-500">Uploaded 1 week ago • Emma Thompson</span>
<div class="flex items-center space-x-2">
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                                Approved
                                            </span>
</div>
</div>
</div>
<div class="flex flex-col space-y-2">
<button class="p-2 text-gray-600 hover:bg-gray-100 rounded">
<i class="fa-solid fa-eye"></i>
</button>
<button class="p-2 text-gray-600 hover:bg-gray-100 rounded">
<i class="fa-solid fa-download"></i>
</button>
</div>
</div>
<div class="flex items-center space-x-4 p-4 border border-gray-200 rounded-lg">
<div class="bg-green-100 p-3 rounded-lg">
<i class="fa-solid fa-file-excel text-green-600 text-xl"></i>
</div>
<div class="flex-1">
<h5 class="font-medium text-gray-900">Financial_Analysis_CanaryWharf.xlsx</h5>
<p class="text-sm text-gray-600">Detailed financial projections and analysis</p>
<div class="flex items-center justify-between mt-2">
<span class="text-xs text-gray-500">Updated 3 days ago • Michael Roberts</span>
<div class="flex items-center space-x-2">
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                                Final
                                            </span>
</div>
</div>
</div>
<div class="flex flex-col space-y-2">
<button class="p-2 text-green-600 hover:bg-green-100 rounded">
<i class="fa-solid fa-eye"></i>
</button>
<button class="p-2 text-green-600 hover:bg-green-100 rounded">
<i class="fa-solid fa-download"></i>
</button>
</div>
</div>
</div>
</div>
<div>
<h4 class="font-medium text-gray-900 mb-4">Supporting Documents</h4>
<div class="space-y-4">
<div class="flex items-center space-x-4 p-4 border border-gray-200 rounded-lg">
<div class="bg-purple-100 p-3 rounded-lg">
<i class="fa-solid fa-file-image text-purple-600 text-xl"></i>
</div>
<div class="flex-1">
<h5 class="font-medium text-gray-900">Floor_Plans_CanaryWharf.zip</h5>
<p class="text-sm text-gray-600">Architectural floor plans and layouts</p>
<div class="flex items-center justify-between mt-2">
<span class="text-xs text-gray-500">Uploaded 1 week ago • Emma Thompson</span>
</div>
</div>
<div class="flex flex-col space-y-2">
<button class="p-2 text-purple-600 hover:bg-purple-100 rounded">
<i class="fa-solid fa-eye"></i>
</button>
<button class="p-2 text-purple-600 hover:bg-purple-100 rounded">
<i class="fa-solid fa-download"></i>
</button>
</div>
</div>
<div class="flex items-center space-x-4 p-4 border border-gray-200 rounded-lg">
<div class="bg-orange-100 p-3 rounded-lg">
<i class="fa-solid fa-file-alt text-orange-600 text-xl"></i>
</div>
<div class="flex-1">
<h5 class="font-medium text-gray-900">Environmental_Report.pdf</h5>
<p class="text-sm text-gray-600">Environmental impact assessment</p>
<div class="flex items-center justify-between mt-2">
<span class="text-xs text-gray-500">Uploaded 2 weeks ago • External Consultant</span>
</div>
</div>
<div class="flex flex-col space-y-2">
<button class="p-2 text-orange-600 hover:bg-orange-100 rounded">
<i class="fa-solid fa-eye"></i>
</button>
<button class="p-2 text-orange-600 hover:bg-orange-100 rounded">
<i class="fa-solid fa-download"></i>
</button>
</div>
</div>
<div class="flex items-center space-x-4 p-4 border border-gray-200 rounded-lg">
<div class="bg-red-100 p-3 rounded-lg">
<i class="fa-solid fa-file-signature text-red-600 text-xl"></i>
</div>
<div class="flex-1">
<h5 class="font-medium text-gray-900">Legal_Due_Diligence.pdf</h5>
<p class="text-sm text-gray-600">Legal review and due diligence report</p>
<div class="flex items-center justify-between mt-2">
<span class="text-xs text-gray-500">Uploaded 1 week ago • Legal Team</span>
</div>
</div>
<div class="flex flex-col space-y-2">
<button class="p-2 text-red-600 hover:bg-red-100 rounded">
<i class="fa-solid fa-eye"></i>
</button>
<button class="p-2 text-red-600 hover:bg-red-100 rounded">
<i class="fa-solid fa-download"></i>
</button>
</div>
</div>
</div>
<div class="mt-6 p-4 bg-gray-50 rounded-lg">
<div class="text-center">
<i class="fa-solid fa-cloud-upload-alt text-gray-400 text-3xl mb-2"></i>
<p class="text-sm text-gray-600 mb-2">Drag and drop files here or</p>
<button class="text-blue-600 hover:text-blue-700 font-medium">browse files</button>
</div>
</div>
</div>
</div>
</section>
<section class="bg-white border-b border-gray-200 p-6" id="approvals-section">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Pending Approvals</h3>
<div class="flex items-center space-x-2">
<span class="text-sm text-gray-600">3 of 5 approvals complete</span>
<div class="w-32 bg-gray-200 rounded-full h-2">
<div class="bg-green-500 h-2 rounded-full" style="width: 60%"></div>
</div>
</div>
</div>
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<div>
<h4 class="font-medium text-gray-900 mb-4">Current Approvals</h4>
<div class="space-y-4">
<div class="p-4 bg-red-50 border border-red-200 rounded-lg">
<div class="flex items-start justify-between mb-3">
<div class="flex items-center space-x-3">
<div class="bg-red-100 p-2 rounded-full">
<i class="fa-solid fa-exclamation-triangle text-red-600"></i>
</div>
<div>
<h5 class="font-medium text-red-900">Legal Review</h5>
<p class="text-sm text-red-700">HoT Version 2.1 Legal Approval</p>
</div>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                        Overdue
                                    </span>
</div>
<div class="flex items-center justify-between">
<div class="flex items-center space-x-2">
<img alt="Approver" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg"/>
<span class="text-sm text-red-700">Michael Roberts</span>
</div>
<span class="text-xs text-red-600 font-medium">Due: Nov 13, 2024</span>
</div>
<div class="mt-3 pt-3 border-t border-red-200">
<div class="flex items-center space-x-3">
<button class="px-3 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700">
                                            Send Reminder
                                        </button>
<button class="px-3 py-1 border border-red-300 text-red-700 text-xs rounded hover:bg-red-50" data-action="escalate" data-item-type="deal">
                                            Escalate
                                        </button>
</div>
</div>
</div>
<div class="p-4 bg-orange-50 border border-orange-200 rounded-lg">
<div class="flex items-start justify-between mb-3">
<div class="flex items-center space-x-3">
<div class="bg-orange-100 p-2 rounded-full">
<i class="fa-solid fa-clock text-orange-600"></i>
</div>
<div>
<h5 class="font-medium text-orange-900">Executive Approval</h5>
<p class="text-sm text-orange-700">Deal Value and Terms Approval</p>
</div>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                        Pending
                                    </span>
</div>
<div class="flex items-center justify-between">
<div class="flex items-center space-x-2">
<img alt="Approver" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg"/>
<span class="text-sm text-orange-700">David Kim</span>
</div>
<span class="text-xs text-orange-600">Due: Nov 16, 2024</span>
</div>
</div>
</div>
</div>
<div>
<h4 class="font-medium text-gray-900 mb-4">Completed Approvals</h4>
<div class="space-y-4">
<div class="p-4 bg-green-50 border border-green-200 rounded-lg">
<div class="flex items-start justify-between mb-3">
<div class="flex items-center space-x-3">
<div class="bg-green-100 p-2 rounded-full">
<i class="fa-solid fa-check text-green-600"></i>
</div>
<div>
<h5 class="font-medium text-green-900">Finance Review</h5>
<p class="text-sm text-green-700">Financial terms and projections</p>
</div>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Approved
                                    </span>
</div>
<div class="flex items-center justify-between">
<div class="flex items-center space-x-2">
<img alt="Approver" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-6.jpg"/>
<span class="text-sm text-green-700">Jennifer Wilson</span>
</div>
<span class="text-xs text-green-600">Approved: Nov 10, 2024</span>
</div>
</div>
<div class="p-4 bg-green-50 border border-green-200 rounded-lg">
<div class="flex items-start justify-between mb-3">
<div class="flex items-center space-x-3">
<div class="bg-green-100 p-2 rounded-full">
<i class="fa-solid fa-check text-green-600"></i>
</div>
<div>
<h5 class="font-medium text-green-900">Delivery Team</h5>
<p class="text-sm text-green-700">Operational feasibility assessment</p>
</div>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Approved
                                    </span>
</div>
<div class="flex items-center justify-between">
<div class="flex items-center space-x-2">
<img alt="Approver" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-7.jpg"/>
<span class="text-sm text-green-700">Robert Taylor</span>
</div>
<span class="text-xs text-green-600">Approved: Nov 8, 2024</span>
</div>
</div>
<div class="p-4 bg-green-50 border border-green-200 rounded-lg">
<div class="flex items-start justify-between mb-3">
<div class="flex items-center space-x-3">
<div class="bg-green-100 p-2 rounded-full">
<i class="fa-solid fa-check text-green-600"></i>
</div>
<div>
<h5 class="font-medium text-green-900">Risk Assessment</h5>
<p class="text-sm text-green-700">Risk evaluation and mitigation</p>
</div>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Approved
                                    </span>
</div>
<div class="flex items-center justify-between">
<div class="flex items-center space-x-2">
<img alt="Approver" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-8.jpg"/>
<span class="text-sm text-green-700">Lisa Anderson</span>
</div>
<span class="text-xs text-green-600">Approved: Nov 5, 2024</span>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="bg-white border-b border-gray-200 p-6" id="tasks-section">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Active Tasks</h3>
<div class="flex items-center space-x-3">
<div class="flex items-center space-x-2">
<button class="px-3 py-1 text-sm bg-red-50 text-red-700 rounded-lg border border-red-200">Overdue (2)</button>
<button class="px-3 py-1 text-sm bg-orange-50 text-orange-700 rounded-lg border border-orange-200">Due Today (3)</button>
<button class="px-3 py-1 text-sm border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">All Tasks</button>
</div>
<button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
<i class="fa-solid fa-plus mr-2"></i>
                            Add Task
                        </button>
</div>
</div>
<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
<div>
<h4 class="font-medium text-red-900 mb-4 flex items-center">
<i class="fa-solid fa-exclamation-triangle text-red-600 mr-2"></i>
                            Overdue Tasks
                        </h4>
<div class="space-y-4">
<div class="p-4 bg-red-50 border-l-4 border-red-500 rounded-lg">
<div class="flex items-start justify-between mb-2">
<h5 class="font-medium text-red-900">Legal Documentation Review</h5>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                        High
                                    </span>
</div>
<p class="text-sm text-red-700 mb-3">Review and approve HoT version 2.1 changes</p>
<div class="flex items-center justify-between">
<div class="flex items-center space-x-2">
<img alt="Assignee" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg"/>
<span class="text-sm text-red-700">Michael Roberts</span>
</div>
<span class="text-xs text-red-600 font-medium">Due: Nov 13</span>
</div>
</div>
<div class="p-4 bg-red-50 border-l-4 border-red-500 rounded-lg">
<div class="flex items-start justify-between mb-2">
<h5 class="font-medium text-red-900">Risk Mitigation Plan</h5>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                        Medium
                                    </span>
</div>
<p class="text-sm text-red-700 mb-3">Update risk mitigation strategies</p>
<div class="flex items-center justify-between">
<div class="flex items-center space-x-2">
<img alt="Assignee" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-8.jpg"/>
<span class="text-sm text-red-700">Lisa Anderson</span>
</div>
<span class="text-xs text-red-600 font-medium">Due: Nov 12</span>
</div>
</div>
</div>
</div>
<div>
<h4 class="font-medium text-orange-900 mb-4 flex items-center">
<i class="fa-solid fa-clock text-orange-600 mr-2"></i>
                            Due Today
                        </h4>
<div class="space-y-4">
<div class="p-4 bg-orange-50 border-l-4 border-orange-500 rounded-lg">
<div class="flex items-start justify-between mb-2">
<h5 class="font-medium text-orange-900">Property Inspection Report</h5>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                        Medium
                                    </span>
</div>
<p class="text-sm text-orange-700 mb-3">Complete final property inspection</p>
<div class="flex items-center justify-between">
<div class="flex items-center space-x-2">
<img alt="Assignee" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg"/>
<span class="text-sm text-orange-700">Emma Thompson</span>
</div>
<span class="text-xs text-orange-600 font-medium">Due: Today</span>
</div>
</div>
<div class="p-4 bg-orange-50 border-l-4 border-orange-500 rounded-lg">
<div class="flex items-start justify-between mb-2">
<h5 class="font-medium text-orange-900">Client Presentation Prep</h5>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                        High
                                    </span>
</div>
<p class="text-sm text-orange-700 mb-3">Prepare presentation materials for client meeting</p>
<div class="flex items-center justify-between">
<div class="flex items-center space-x-2">
<img alt="Assignee" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg"/>
<span class="text-sm text-orange-700">Sarah Chen</span>
</div>
<span class="text-xs text-orange-600 font-medium">Due: Today</span>
</div>
</div>
<div class="p-4 bg-orange-50 border-l-4 border-orange-500 rounded-lg">
<div class="flex items-start justify-between mb-2">
<h5 class="font-medium text-orange-900">Financial Model Update</h5>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                        Low
                                    </span>
</div>
<p class="text-sm text-orange-700 mb-3">Update financial projections with latest terms</p>
<div class="flex items-center justify-between">
<div class="flex items-center space-x-2">
<img alt="Assignee" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-6.jpg"/>
<span class="text-sm text-orange-700">Jennifer Wilson</span>
</div>
<span class="text-xs text-orange-600 font-medium">Due: Today</span>
</div>
</div>
</div>
</div>
<div>
<h4 class="font-medium text-gray-900 mb-4 flex items-center">
<i class="fa-solid fa-calendar text-gray-600 mr-2"></i>
                            Upcoming Tasks
                        </h4>
<div class="space-y-4">
<div class="p-4 bg-gray-50 border-l-4 border-gray-300 rounded-lg">
<div class="flex items-start justify-between mb-2">
<h5 class="font-medium text-gray-900">Contract Preparation</h5>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                        High
                                    </span>
</div>
<p class="text-sm text-gray-600 mb-3">Prepare initial contract draft</p>
<div class="flex items-center justify-between">
<div class="flex items-center space-x-2">
<img alt="Assignee" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg"/>
<span class="text-sm text-gray-600">Michael Roberts</span>
</div>
<span class="text-xs text-gray-500">Due: Nov 20</span>
</div>
</div>
<div class="p-4 bg-gray-50 border-l-4 border-gray-300 rounded-lg">
<div class="flex items-start justify-between mb-2">
<h5 class="font-medium text-gray-900">Onboarding Plan</h5>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Medium
                                    </span>
</div>
<p class="text-sm text-gray-600 mb-3">Create detailed onboarding timeline</p>
<div class="flex items-center justify-between">
<div class="flex items-center space-x-2">
<img alt="Assignee" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-7.jpg"/>
<span class="text-sm text-gray-600">Robert Taylor</span>
</div>
<span class="text-xs text-gray-500">Due: Nov 25</span>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="bg-white border-b border-gray-200 p-6" id="risk-analysis-section">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Risk Analysis</h3>
<div class="flex items-center space-x-3">
<span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800">
<i class="fa-solid fa-exclamation-triangle mr-2"></i>
                            Medium Risk
                        </span>
<button class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">
<i class="fa-solid fa-shield-alt mr-2"></i>
                            Risk Report
                        </button>
</div>
</div>
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<div>
<h4 class="font-medium text-gray-900 mb-4">Risk Factors</h4>
<div class="space-y-4">
<div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
<div class="flex items-start justify-between mb-3">
<div class="flex items-center space-x-3">
<div class="bg-yellow-100 p-2 rounded-full">
<i class="fa-solid fa-clock text-yellow-600"></i>
</div>
<div>
<h5 class="font-medium text-yellow-900">Timeline Risk</h5>
<p class="text-sm text-yellow-700">Legal review delays may impact go-live date</p>
</div>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                        Medium
                                    </span>
</div>
<div class="text-xs text-yellow-600">
                                    Impact: Potential 1-2 week delay in contract execution
                                </div>
</div>
<div class="p-4 bg-orange-50 border border-orange-200 rounded-lg">
<div class="flex items-start justify-between mb-3">
<div class="flex items-center space-x-3">
<div class="bg-orange-100 p-2 rounded-full">
<i class="fa-solid fa-building text-orange-600"></i>
</div>
<div>
<h5 class="font-medium text-orange-900">Market Risk</h5>
<p class="text-sm text-orange-700">Office market volatility in Canary Wharf</p>
</div>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                        Medium
                                    </span>
</div>
<div class="text-xs text-orange-600">
                                    Impact: Rental rates may fluctuate ±5% over lease term
                                </div>
</div>
<div class="p-4 bg-green-50 border border-green-200 rounded-lg">
<div class="flex items-start justify-between mb-3">
<div class="flex items-center space-x-3">
<div class="bg-green-100 p-2 rounded-full">
<i class="fa-solid fa-shield-check text-green-600"></i>
</div>
<div>
<h5 class="font-medium text-green-900">Credit Risk</h5>
<p class="text-sm text-green-700">Tenant has strong financial profile</p>
</div>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Low
                                    </span>
</div>
<div class="text-xs text-green-600">
                                    Impact: Minimal risk of default based on credit assessment
                                </div>
</div>
</div>
</div>
<div>
<h4 class="font-medium text-gray-900 mb-4">Mitigation Strategies</h4>
<div class="space-y-4">
<div class="p-4 border border-gray-200 rounded-lg">
<h5 class="font-medium text-gray-900 mb-2">Legal Review Acceleration</h5>
<p class="text-sm text-gray-600 mb-3">Implement parallel review process with external counsel</p>
<div class="flex items-center justify-between">
<span class="text-xs text-gray-500">Owner: Michael Roberts</span>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                        In Progress
                                    </span>
</div>
</div>
<div class="p-4 border border-gray-200 rounded-lg">
<h5 class="font-medium text-gray-900 mb-2">Market Rate Protection</h5>
<p class="text-sm text-gray-600 mb-3">Include market review clause with 3-year intervals</p>
<div class="flex items-center justify-between">
<span class="text-xs text-gray-500">Owner: Sarah Chen</span>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Completed
                                    </span>
</div>
</div>
<div class="p-4 border border-gray-200 rounded-lg">
<h5 class="font-medium text-gray-900 mb-2">Financial Guarantees</h5>
<p class="text-sm text-gray-600 mb-3">Secure parent company guarantee for additional security</p>
<div class="flex items-center justify-between">
<span class="text-xs text-gray-500">Owner: Jennifer Wilson</span>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                        Planned
                                    </span>
</div>
</div>
</div>
<div class="mt-6 p-4 bg-gray-50 rounded-lg">
<h5 class="font-medium text-gray-900 mb-2">Risk Score Calculation</h5>
<div class="space-y-2">
<div class="flex justify-between text-sm">
<span class="text-gray-600">Timeline Risk:</span>
<span class="font-medium">3/5</span>
</div>
<div class="flex justify-between text-sm">
<span class="text-gray-600">Market Risk:</span>
<span class="font-medium">3/5</span>
</div>
<div class="flex justify-between text-sm">
<span class="text-gray-600">Credit Risk:</span>
<span class="font-medium">1/5</span>
</div>
<div class="flex justify-between text-sm border-t border-gray-300 pt-2 mt-2">
<span class="text-gray-900 font-medium">Overall Risk Score:</span>
<span class="font-bold text-yellow-600">2.3/5</span>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="bg-white border-b border-gray-200 p-6" id="activity-timeline-section">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Activity Timeline</h3>
<div class="flex items-center space-x-3">
<div class="flex items-center space-x-2">
<button class="px-3 py-1 text-sm bg-blue-50 text-blue-700 rounded-lg border border-blue-200">All Activities</button>
<button class="px-3 py-1 text-sm border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">Documents</button>
<button class="px-3 py-1 text-sm border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">Approvals</button>
<button class="px-3 py-1 text-sm border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">Tasks</button>
</div>
<button class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
<i class="fa-solid fa-plus mr-2"></i>
                            Add Activity
                        </button>
</div>
</div>
<div class="relative">
<div class="absolute left-8 top-0 bottom-0 w-0.5 bg-gray-300"></div>
<div class="space-y-8">
<div class="flex items-start space-x-6">
<div class="flex-shrink-0 w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center relative z-10">
<i class="fa-solid fa-file-upload text-blue-600 text-lg"></i>
</div>
<div class="flex-1 bg-white border border-gray-200 rounded-lg p-4">
<div class="flex items-start justify-between mb-2">
<div>
<h4 class="font-medium text-gray-900">HoT Version 2.1 Uploaded</h4>
<p class="text-sm text-gray-600">Updated commercial terms and added break clause options</p>
</div>
<span class="text-xs text-gray-500">2 hours ago</span>
</div>
<div class="flex items-center space-x-4 mt-3">
<div class="flex items-center space-x-2">
<img alt="User" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg"/>
<span class="text-sm text-gray-700">Sarah Chen</span>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                        Document
                                    </span>
</div>
</div>
</div>
<div class="flex items-start space-x-6">
<div class="flex-shrink-0 w-16 h-16 bg-green-100 rounded-full flex items-center justify-center relative z-10">
<i class="fa-solid fa-check-circle text-green-600 text-lg"></i>
</div>
<div class="flex-1 bg-white border border-gray-200 rounded-lg p-4">
<div class="flex items-start justify-between mb-2">
<div>
<h4 class="font-medium text-gray-900">Finance Approval Completed</h4>
<p class="text-sm text-gray-600">Financial terms and projections approved by finance team</p>
</div>
<span class="text-xs text-gray-500">1 day ago</span>
</div>
<div class="flex items-center space-x-4 mt-3">
<div class="flex items-center space-x-2">
<img alt="User" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-6.jpg"/>
<span class="text-sm text-gray-700">Jennifer Wilson</span>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Approval
                                    </span>
</div>
</div>
</div>
<div class="flex items-start space-x-6">
<div class="flex-shrink-0 w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center relative z-10">
<i class="fa-solid fa-tasks text-orange-600 text-lg"></i>
</div>
<div class="flex-1 bg-white border border-gray-200 rounded-lg p-4">
<div class="flex items-start justify-between mb-2">
<div>
<h4 class="font-medium text-gray-900">Task Assigned: Property Inspection</h4>
<p class="text-sm text-gray-600">Final property inspection scheduled for today</p>
</div>
<span class="text-xs text-gray-500">2 days ago</span>
</div>
<div class="flex items-center space-x-4 mt-3">
<div class="flex items-center space-x-2">
<img alt="User" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg"/>
<span class="text-sm text-gray-700">Emma Thompson</span>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                        Task
                                    </span>
</div>
</div>
</div>
<div class="flex items-start space-x-6">
<div class="flex-shrink-0 w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center relative z-10">
<i class="fa-solid fa-handshake text-purple-600 text-lg"></i>
</div>
<div class="flex-1 bg-white border border-gray-200 rounded-lg p-4">
<div class="flex items-start justify-between mb-2">
<div>
<h4 class="font-medium text-gray-900">Deal Moved to HoTs Stage</h4>
<p class="text-sm text-gray-600">Deal progressed from Proposal to Heads of Terms stage</p>
</div>
<span class="text-xs text-gray-500">3 days ago</span>
</div>
<div class="flex items-center space-x-4 mt-3">
<div class="flex items-center space-x-2">
<img alt="User" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg"/>
<span class="text-sm text-gray-700">Sarah Chen</span>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                                        Stage Change
                                    </span>
</div>
</div>
</div>
<div class="flex items-start space-x-6">
<div class="flex-shrink-0 w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center relative z-10">
<i class="fa-solid fa-file-alt text-gray-600 text-lg"></i>
</div>
<div class="flex-1 bg-white border border-gray-200 rounded-lg p-4">
<div class="flex items-start justify-between mb-2">
<div>
<h4 class="font-medium text-gray-900">Financial Analysis Uploaded</h4>
<p class="text-sm text-gray-600">Detailed financial projections and ROI analysis</p>
</div>
<span class="text-xs text-gray-500">1 week ago</span>
</div>
<div class="flex items-center space-x-4 mt-3">
<div class="flex items-center space-x-2">
<img alt="User" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg"/>
<span class="text-sm text-gray-700">Michael Roberts</span>
</div>
<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                        Document
                                    </span>
</div>
</div>
</div>
</div>
</div>
</section>
<section class="bg-white p-6" id="communication-section">
<div class="flex items-center justify-between mb-6">
<h3 class="text-lg font-semibold text-gray-900">Communication &amp; Notes</h3>
<div class="flex items-center space-x-3">
<button class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">
<i class="fa-solid fa-envelope mr-2"></i>
                            Send Email
                        </button>
<button class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
<i class="fa-solid fa-plus mr-2"></i>
                            Add Note
                        </button>
</div>
</div>
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
<div>
<h4 class="font-medium text-gray-900 mb-4">Recent Communications</h4>
<div class="space-y-4">
<div class="p-4 bg-blue-50 border border-blue-200 rounded-lg">
<div class="flex items-start justify-between mb-3">
<div class="flex items-center space-x-3">
<div class="bg-blue-100 p-2 rounded-full">
<i class="fa-solid fa-envelope text-blue-600"></i>
</div>
<div>
<h5 class="font-medium text-blue-900">Email to Legal Team</h5>
<p class="text-sm text-blue-700">Re: HoT Version 2.1 Review Requirements</p>
</div>
</div>
<span class="text-xs text-blue-600">3 hours ago</span>
</div>
<p class="text-sm text-blue-800 mb-2">
                                    "Please prioritize the review of the updated HoT document. Key changes include break clause options and revised commercial terms..."
                                </p>
<div class="flex items-center space-x-2">
<img alt="Sender" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg"/>
<span class="text-sm text-blue-700">Sarah Chen</span>
</div>
</div>
<div class="p-4 bg-green-50 border border-green-200 rounded-lg">
<div class="flex items-start justify-between mb-3">
<div class="flex items-center space-x-3">
<div class="bg-green-100 p-2 rounded-full">
<i class="fa-solid fa-phone text-green-600"></i>
</div>
<div>
<h5 class="font-medium text-green-900">Client Call</h5>
<p class="text-sm text-green-700">Progress update and next steps discussion</p>
</div>
</div>
<span class="text-xs text-green-600">1 day ago</span>
</div>
<p class="text-sm text-green-800 mb-2">
                                    "Client expressed satisfaction with progress. Confirmed timeline expectations and discussed potential early move-in options..."
                                </p>
<div class="flex items-center space-x-2">
<img alt="Participant" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg"/>
<span class="text-sm text-green-700">Emma Thompson</span>
</div>
</div>
<div class="p-4 bg-gray-50 border border-gray-200 rounded-lg">
<div class="flex items-start justify-between mb-3">
<div class="flex items-center space-x-3">
<div class="bg-gray-100 p-2 rounded-full">
<i class="fa-solid fa-users text-gray-600"></i>
</div>
<div>
<h5 class="font-medium text-gray-900">Team Meeting</h5>
<p class="text-sm text-gray-600">Weekly deal review and status update</p>
</div>
</div>
<span class="text-xs text-gray-500">2 days ago</span>
</div>
<p class="text-sm text-gray-700 mb-2">
                                    "Team aligned on current priorities. Legal review identified as critical path item. Finance approval completed ahead of schedule..."
                                </p>
<div class="flex items-center space-x-2">
<img alt="Organizer" class="w-6 h-6 rounded-full" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-2.jpg"/>
<span class="text-sm text-gray-600">Alex Johnson</span>
</div>
</div>
</div>
</div>
<div>
<h4 class="font-medium text-gray-900 mb-4">Internal Notes</h4>
<div class="space-y-4">
</div></div></div></section></div></div>
            </div>
            <!-- END DEAL ROOM PAGE -->



        </main>
    </div>

    <!-- OPTION 2: COLLAPSED DESKTOP NAVIGATION -->
    <div id="nav-option-2" class="hidden flex h-screen">
        <!-- Left Navigation - Collapsed -->
        <aside id="sidebar-collapsed" class="w-18 bg-white border-r border-stone flex flex-col">
            <!-- Header -->
            <div class="p-3 border-b border-stone">
                <div class="w-10 h-10 bg-slate rounded-lg flex items-center justify-center mx-auto">
                    <i class="fa-solid fa-cube text-white text-lg"></i>
                </div>
            </div>

            <!-- Navigation Menu -->
            <nav class="flex-1 p-3 space-y-3 overflow-y-auto">
                <!-- Dashboard -->
                <div class="relative group">
                    <span class="flex items-center justify-center w-12 h-12 text-slate bg-stone rounded-lg font-medium cursor-pointer" id="nav-dashboard-collapsed">
                        <i class="fa-solid fa-chart-line text-lg"></i>
                    </span>
                    <div class="absolute left-16 top-0 bg-slate text-white px-3 py-2 rounded-lg text-sm opacity-0 group-hover:opacity-100 transition-opacity z-50 whitespace-nowrap">
                        Dashboard
                        <div class="absolute left-0 top-3 w-0 h-0 border-t-4 border-b-4 border-r-4 border-transparent border-r-slate -translate-x-1"></div>
                    </div>
                </div>

                <!-- Search -->
                <div class="relative group">
                    <span class="flex items-center justify-center w-12 h-12 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-search-collapsed">
                        <i class="fa-solid fa-search text-lg"></i>
                    </span>
                    <div class="absolute left-16 top-0 bg-slate text-white px-3 py-2 rounded-lg text-sm opacity-0 group-hover:opacity-100 transition-opacity z-50 whitespace-nowrap">
                        Search (⌘K)
                        <div class="absolute left-0 top-3 w-0 h-0 border-t-4 border-b-4 border-r-4 border-transparent border-r-slate -translate-x-1"></div>
                    </div>
                </div>

                <!-- Notifications -->
                <div class="relative group">
                    <span class="flex items-center justify-center w-12 h-12 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors relative cursor-pointer" id="nav-notifications-collapsed">
                        <i class="fa-regular fa-bell text-lg"></i>
                        <span class="absolute -top-1 -right-1 w-3 h-3 bg-danger rounded-full"></span>
                    </span>
                    <div class="absolute left-16 top-0 bg-slate text-white px-3 py-2 rounded-lg text-sm opacity-0 group-hover:opacity-100 transition-opacity z-50 whitespace-nowrap">
                        Notifications (3 new)
                        <div class="absolute left-0 top-3 w-0 h-0 border-t-4 border-b-4 border-r-4 border-transparent border-r-slate -translate-x-1"></div>
                    </div>
                </div>

                <!-- Divider -->
                <div class="w-8 h-px bg-stone mx-auto"></div>

                <!-- Pipeline -->
                <div class="relative group">
                    <span class="flex items-center justify-center w-12 h-12 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors relative cursor-pointer" id="nav-pipeline-collapsed">
                        <i class="fa-solid fa-building text-lg"></i>
                        <span class="absolute -top-1 -right-1 text-xs bg-slate bg-opacity-10 text-slate px-1 rounded-full">247</span>
                    </span>
                    <div class="absolute left-16 top-0 bg-slate text-white px-3 py-2 rounded-lg text-sm opacity-0 group-hover:opacity-100 transition-opacity z-50 whitespace-nowrap">
                        Pipeline (247 active)
                        <div class="absolute left-0 top-3 w-0 h-0 border-t-4 border-b-4 border-r-4 border-transparent border-r-slate -translate-x-1"></div>
                    </div>
                </div>

                <!-- Property Index -->
                <div class="relative group">
                    <span class="flex items-center justify-center w-12 h-12 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-property-collapsed">
                        <i class="fa-solid fa-database text-lg"></i>
                    </span>
                    <div class="absolute left-16 top-0 bg-slate text-white px-3 py-2 rounded-lg text-sm opacity-0 group-hover:opacity-100 transition-opacity z-50 whitespace-nowrap">
                        Property Index
                        <div class="absolute left-0 top-3 w-0 h-0 border-t-4 border-b-4 border-r-4 border-transparent border-r-slate -translate-x-1"></div>
                    </div>
                </div>

                <!-- Viewing Scheduler -->
                <div class="relative group">
                    <span class="flex items-center justify-center w-12 h-12 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors relative cursor-pointer" id="nav-viewing-collapsed">
                        <i class="fa-solid fa-calendar-alt text-lg"></i>
                        <span class="absolute -top-1 -right-1 text-xs bg-warning bg-opacity-20 text-warning px-1 rounded-full">12</span>
                    </span>
                    <div class="absolute left-16 top-0 bg-slate text-white px-3 py-2 rounded-lg text-sm opacity-0 group-hover:opacity-100 transition-opacity z-50 whitespace-nowrap">
                        Viewing Scheduler (12 pending)
                        <div class="absolute left-0 top-3 w-0 h-0 border-t-4 border-b-4 border-r-4 border-transparent border-r-slate -translate-x-1"></div>
                    </div>
                </div>

                <!-- Research & Comps -->
                <div class="relative group">
                    <span class="flex items-center justify-center w-12 h-12 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-research-collapsed">
                        <i class="fa-solid fa-chart-bar text-lg"></i>
                    </span>
                    <div class="absolute left-16 top-0 bg-slate text-white px-3 py-2 rounded-lg text-sm opacity-0 group-hover:opacity-100 transition-opacity z-50 whitespace-nowrap">
                        Research & Comps
                        <div class="absolute left-0 top-3 w-0 h-0 border-t-4 border-b-4 border-r-4 border-transparent border-r-slate -translate-x-1"></div>
                    </div>
                </div>

                <!-- Brokers -->
                <div class="relative group">
                    <span class="flex items-center justify-center w-12 h-12 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors relative cursor-pointer" id="nav-brokers-collapsed">
                        <i class="fa-solid fa-handshake text-lg"></i>
                        <span class="absolute -top-1 -right-1 w-2 h-2 bg-success rounded-full"></span>
                    </span>
                    <div class="absolute left-16 top-0 bg-slate text-white px-3 py-2 rounded-lg text-sm opacity-0 group-hover:opacity-100 transition-opacity z-50 whitespace-nowrap">
                        Brokers (NEW)
                        <div class="absolute left-0 top-3 w-0 h-0 border-t-4 border-b-4 border-r-4 border-transparent border-r-slate -translate-x-1"></div>
                    </div>
                </div>

                <!-- Divider -->
                <div class="w-8 h-px bg-stone mx-auto"></div>

                <!-- Deal Room -->
                <div class="relative group">
                    <span class="flex items-center justify-center w-12 h-12 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-deal-room-collapsed">
                        <i class="fa-solid fa-users text-lg"></i>
                    </span>
                    <div class="absolute left-16 top-0 bg-slate text-white px-3 py-2 rounded-lg text-sm opacity-0 group-hover:opacity-100 transition-opacity z-50 whitespace-nowrap">
                        Deal Room
                        <div class="absolute left-0 top-3 w-0 h-0 border-t-4 border-b-4 border-r-4 border-transparent border-r-slate -translate-x-1"></div>
                    </div>
                </div>

                <!-- Ticket Desk -->
                <div class="relative group">
                    <span class="flex items-center justify-center w-12 h-12 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors relative cursor-pointer" id="nav-tickets-collapsed">
                        <i class="fa-solid fa-ticket-alt text-lg"></i>
                        <span class="absolute -top-1 -right-1 text-xs bg-danger bg-opacity-20 text-danger px-1 rounded-full">8</span>
                    </span>
                    <div class="absolute left-16 top-0 bg-slate text-white px-3 py-2 rounded-lg text-sm opacity-0 group-hover:opacity-100 transition-opacity z-50 whitespace-nowrap">
                        Ticket Desk (8 urgent)
                        <div class="absolute left-0 top-3 w-0 h-0 border-t-4 border-b-4 border-r-4 border-transparent border-r-slate -translate-x-1"></div>
                    </div>
                </div>

                <!-- Divider -->
                <div class="w-8 h-px bg-stone mx-auto"></div>

                <!-- Portfolio / BI -->
                <div class="relative group">
                    <span class="flex items-center justify-center w-12 h-12 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-portfolio-collapsed">
                        <i class="fa-solid fa-chart-pie text-lg"></i>
                    </span>
                    <div class="absolute left-16 top-0 bg-slate text-white px-3 py-2 rounded-lg text-sm opacity-0 group-hover:opacity-100 transition-opacity z-50 whitespace-nowrap">
                        Portfolio / BI
                        <div class="absolute left-0 top-3 w-0 h-0 border-t-4 border-b-4 border-r-4 border-transparent border-r-slate -translate-x-1"></div>
                    </div>
                </div>

                <!-- Settings -->
                <div class="relative group">
                    <span class="flex items-center justify-center w-12 h-12 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors cursor-pointer" id="nav-settings-collapsed">
                        <i class="fa-solid fa-cog text-lg"></i>
                    </span>
                    <div class="absolute left-16 top-0 bg-slate text-white px-3 py-2 rounded-lg text-sm opacity-0 group-hover:opacity-100 transition-opacity z-50 whitespace-nowrap">
                        Settings
                        <div class="absolute left-0 top-3 w-0 h-0 border-t-4 border-b-4 border-r-4 border-transparent border-r-slate -translate-x-1"></div>
                    </div>
                </div>
            </nav>

            <!-- Footer -->
            <div class="p-3 border-t border-stone">
                <div class="flex flex-col space-y-3">
                    <div class="relative group">
                        <button class="flex items-center justify-center w-12 h-12 text-concrete hover:text-slate transition-colors mx-auto" title="Expand Sidebar" id="expand-btn-2">
                            <i class="fa-solid fa-chevron-right"></i>
                        </button>
                        <div class="absolute left-16 top-0 bg-slate text-white px-3 py-2 rounded-lg text-sm opacity-0 group-hover:opacity-100 transition-opacity z-50 whitespace-nowrap">
                            Expand Sidebar
                            <div class="absolute left-0 top-3 w-0 h-0 border-t-4 border-b-4 border-r-4 border-transparent border-r-slate -translate-x-1"></div>
                        </div>
                    </div>
                    
                    <div class="relative group">
                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="Executive" class="w-8 h-8 rounded-full mx-auto">
                        <div class="absolute left-16 top-0 bg-slate text-white px-3 py-2 rounded-lg text-sm opacity-0 group-hover:opacity-100 transition-opacity z-50 whitespace-nowrap">
                            Executive<br>
                            <span class="text-xs opacity-75">Portfolio Navigator</span>
                            <div class="absolute left-0 top-3 w-0 h-0 border-t-4 border-b-4 border-r-4 border-transparent border-r-slate -translate-x-1"></div>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content Area (Shared across both nav states) -->
        <main id="main-content-collapsed" class="flex-1 bg-stone p-25 overflow-y-auto"></main>
    </div>


    <!-- PAGE: Negotiation Dashboard -->
    <div id="negotiation-dashboard-page" class="page-content hidden">
        <div class="flex-1 overflow-y-auto p-6">
            <!-- COMPONENT: Key Metrics Section -->
            <section class="mb-8" id="key-metrics-section">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Active Deals</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">24</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-green-600 text-sm font-medium">+12%</span>
                                    <span class="text-gray-500 text-sm ml-2">vs last month</span>
                                </div>
                            </div>
                            <div class="bg-blue-100 p-3 rounded-full">
                                <i class="fa-solid fa-handshake text-blue-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Total Value</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">£8.4M</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-green-600 text-sm font-medium">+18%</span>
                                    <span class="text-gray-500 text-sm ml-2">vs last month</span>
                                </div>
                            </div>
                            <div class="bg-green-100 p-3 rounded-full">
                                <i class="fa-solid fa-pound-sign text-green-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Pending Approvals</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">7</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-red-600 text-sm font-medium">+3</span>
                                    <span class="text-gray-500 text-sm ml-2">this week</span>
                                </div>
                            </div>
                            <div class="bg-orange-100 p-3 rounded-full">
                                <i class="fa-solid fa-clock text-orange-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Win Rate</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">73%</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-green-600 text-sm font-medium">+5%</span>
                                    <span class="text-gray-500 text-sm ml-2">vs last quarter</span>
                                </div>
                            </div>
                            <div class="bg-purple-100 p-3 rounded-full">
                                <i class="fa-solid fa-trophy text-purple-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Deal Pipeline Overview -->
            <section class="mb-8" id="pipeline-overview-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Deal Pipeline Overview</h3>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Month</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Quarter</button>
                            <button class="px-3 py-1 text-sm bg-blue-600 text-white rounded-lg">This Year</button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-7 gap-4">
                        <div class="text-center p-4 bg-blue-50 rounded-lg border-2 border-blue-200">
                            <div class="text-2xl font-bold text-blue-600">8</div>
                            <div class="text-sm text-blue-700 font-medium mt-1">Lead</div>
                            <div class="text-xs text-blue-600 mt-1">£1.2M</div>
                        </div>
                        
                        <div class="text-center p-4 bg-indigo-50 rounded-lg border">
                            <div class="text-2xl font-bold text-indigo-600">6</div>
                            <div class="text-sm text-indigo-700 font-medium mt-1">Viewing</div>
                            <div class="text-xs text-indigo-600 mt-1">£980K</div>
                        </div>
                        
                        <div class="text-center p-4 bg-purple-50 rounded-lg border">
                            <div class="text-2xl font-bold text-purple-600">4</div>
                            <div class="text-sm text-purple-700 font-medium mt-1">Proposal</div>
                            <div class="text-xs text-purple-600 mt-1">£1.8M</div>
                        </div>
                        
                        <div class="text-center p-4 bg-pink-50 rounded-lg border">
                            <div class="text-2xl font-bold text-pink-600">3</div>
                            <div class="text-sm text-pink-700 font-medium mt-1">HoTs</div>
                            <div class="text-xs text-pink-600 mt-1">£2.1M</div>
                        </div>
                        
                        <div class="text-center p-4 bg-red-50 rounded-lg border">
                            <div class="text-2xl font-bold text-red-600">2</div>
                            <div class="text-sm text-red-700 font-medium mt-1">Contract</div>
                            <div class="text-xs text-red-600 mt-1">£1.5M</div>
                        </div>
                        
                        <div class="text-center p-4 bg-orange-50 rounded-lg border">
                            <div class="text-2xl font-bold text-orange-600">1</div>
                            <div class="text-sm text-orange-700 font-medium mt-1">Onboarding</div>
                            <div class="text-xs text-orange-600 mt-1">£800K</div>
                        </div>
                        
                        <div class="text-center p-4 bg-green-50 rounded-lg border">
                            <div class="text-2xl font-bold text-green-600">12</div>
                            <div class="text-sm text-green-700 font-medium mt-1">Live</div>
                            <div class="text-xs text-green-600 mt-1">£5.2M</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Charts Section -->
            <section class="mb-8" id="charts-section">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Deal Value Trend</h3>
                        <div id="deal-value-chart" class="h-80"></div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Deal Stage Distribution</h3>
                        <div id="stage-distribution-chart" class="h-80"></div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Critical Notifications -->
            <section class="mb-8" id="notifications-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Critical Notifications</h3>
                        <button class="text-sm text-blue-600 hover:text-blue-700" data-view-all="deals-overview">View All</button>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="flex items-start space-x-4 p-4 bg-red-50 border border-red-200 rounded-lg">
                            <div class="bg-red-100 p-2 rounded-full">
                                <i class="fa-solid fa-exclamation-triangle text-red-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-red-900">SLA Breach Alert</h4>
                                <p class="text-sm text-red-700 mt-1">Canary Wharf Office Deal - Legal approval overdue by 2 days</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-red-600">2 hours ago</span>
                                    <button class="text-xs text-red-700 hover:text-red-900 font-medium" data-action="quick-action" data-item-type="deal">Take Action</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                            <div class="bg-yellow-100 p-2 rounded-full">
                                <i class="fa-solid fa-clock text-yellow-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-yellow-900">Approval Pending</h4>
                                <p class="text-sm text-yellow-700 mt-1">Shoreditch Retail Space - Executive approval needed for contract terms</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-yellow-600">4 hours ago</span>
                                    <button class="text-xs text-yellow-700 hover:text-yellow-900 font-medium" data-action="add-comment" data-item-type="deal">Review</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                            <div class="bg-blue-100 p-2 rounded-full">
                                <i class="fa-solid fa-file-upload text-blue-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-blue-900">Document Uploaded</h4>
                                <p class="text-sm text-blue-700 mt-1">New HoT version uploaded for Kings Cross Development</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-blue-600">6 hours ago</span>
                                    <button class="text-xs text-blue-700 hover:text-blue-900 font-medium" data-action="view-document" data-item-type="document">View Document</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Active Deals Table -->
            <section class="mb-8" id="active-deals-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Active Deals</h3>
                        <div class="flex items-center space-x-3">
                            <div class="relative">
                                <input type="text" placeholder="Filter deals..." class="pl-8 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <i class="fa-solid fa-search absolute left-2.5 top-2.5 text-gray-400 text-sm"></i>
                            </div>
                            <button class="px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50" data-filter-toggle="filter-panel">
                                <i class="fa-solid fa-filter mr-2"></i>Filter
                            </button>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="border-b border-gray-200">
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Deal Name</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Property</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Stage</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Value</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Probability</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Risk</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Next Milestone</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Owner</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                                <tr class="hover:bg-gray-50">
                                    <td class="py-4 px-4">
                                        <div class="font-medium text-gray-900 cursor-pointer hover:text-blue-600" onclick="window.location.hash = '/deal-room'">Canary Wharf Office</div>
                                        <div class="text-sm text-gray-500">DL_CW_2024_001</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">25 Canada Square</div>
                                        <div class="text-sm text-gray-500">Office • 15,000 sq ft</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-pink-100 text-pink-800">
                                            HoTs
                                        </span>
                                    </td>
                                    <td class="py-4 px-4 font-medium text-gray-900">£2,100,000</td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <span class="text-gray-900">85%</span>
                                            <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                                <div class="bg-green-500 h-2 rounded-full" style="width: 85%"></div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                            Medium
                                        </span>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">Contract Review</div>
                                        <div class="text-sm text-gray-500">Due: Nov 15</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="Owner" class="w-8 h-8 rounded-full mr-2">
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Sarah Chen</div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                
                                <tr class="hover:bg-gray-50">
                                    <td class="py-4 px-4">
                                        <div class="font-medium text-gray-900 cursor-pointer hover:text-blue-600" onclick="window.location.hash = '/deal-room'">Shoreditch Retail Space</div>
                                        <div class="text-sm text-gray-500">DL_SH_2024_002</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">156 Brick Lane</div>
                                        <div class="text-sm text-gray-500">Retail • 3,500 sq ft</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                            Contract
                                        </span>
                                    </td>
                                    <td class="py-4 px-4 font-medium text-gray-900">£850,000</td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <span class="text-gray-900">92%</span>
                                            <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                                <div class="bg-green-500 h-2 rounded-full" style="width: 92%"></div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                            Low
                                        </span>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">Final Signatures</div>
                                        <div class="text-sm text-gray-500">Due: Nov 20</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg" alt="Owner" class="w-8 h-8 rounded-full mr-2">
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Mike Rodriguez</div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                
                                <tr class="hover:bg-gray-50">
                                    <td class="py-4 px-4">
                                        <div class="font-medium text-gray-900">Kings Cross Development</div>
                                        <div class="text-sm text-gray-500">DL_KC_2024_003</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">2 King's Boulevard</div>
                                        <div class="text-sm text-gray-500">Mixed Use • 45,000 sq ft</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                                            Proposal
                                        </span>
                                    </td>
                                    <td class="py-4 px-4 font-medium text-gray-900">£4,200,000</td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <span class="text-gray-900">68%</span>
                                            <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                                <div class="bg-yellow-500 h-2 rounded-full" style="width: 68%"></div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                            High
                                        </span>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">Proposal Submission</div>
                                        <div class="text-sm text-gray-500">Due: Nov 25</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg" alt="Owner" class="w-8 h-8 rounded-full mr-2">
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">David Kim</div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Task Management -->
            <section class="mb-8" id="task-management-section">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Urgent Tasks</h3>
                            <button data-view-all="task-management" class="text-sm text-blue-600 hover:text-blue-700">View All Tasks</button>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-start space-x-4 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg">
                                <div class="flex-shrink-0 mt-1">
                                    <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Review Legal Documentation</h4>
                                    <p class="text-sm text-gray-600 mt-1">Canary Wharf Office Deal</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <span class="text-xs text-red-600 font-medium">OVERDUE</span>
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="Assignee" class="w-6 h-6 rounded-full">
                                            <span class="text-xs text-gray-500 ml-2">Sarah Chen</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-4 p-4 bg-orange-50 border-l-4 border-orange-500 rounded-lg">
                                <div class="flex-shrink-0 mt-1">
                                    <div class="w-3 h-3 bg-orange-500 rounded-full"></div>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Property Valuation Report</h4>
                                    <p class="text-sm text-gray-600 mt-1">Shoreditch Retail Space</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <span class="text-xs text-orange-600 font-medium">DUE TODAY</span>
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg" alt="Assignee" class="w-6 h-6 rounded-full">
                                            <span class="text-xs text-gray-500 ml-2">Mike Rodriguez</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-4 p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg">
                                <div class="flex-shrink-0 mt-1">
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Client Presentation Prep</h4>
                                    <p class="text-sm text-gray-600 mt-1">Kings Cross Development</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <span class="text-xs text-yellow-600 font-medium">DUE TOMORROW</span>
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg" alt="Assignee" class="w-6 h-6 rounded-full">
                                            <span class="text-xs text-gray-500 ml-2">David Kim</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Pending Approvals</h3>
                            <button data-view-all="pending-approvals" class="text-sm text-blue-600 hover:text-blue-700">View All Approvals</button>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-start space-x-4 p-4 border border-gray-200 rounded-lg">
                                <div class="bg-blue-100 p-2 rounded-full">
                                    <i class="fa-solid fa-file-contract text-blue-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">HoT Version 2.1</h4>
                                    <p class="text-sm text-gray-600 mt-1">Canary Wharf Office Deal</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <div class="flex items-center space-x-2">
                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                                Legal Review
                                            </span>
                                        </div>
                                        <span class="text-xs text-gray-500">Due: Nov 16</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-4 p-4 border border-gray-200 rounded-lg">
                                <div class="bg-green-100 p-2 rounded-full">
                                    <i class="fa-solid fa-check-circle text-green-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Budget Approval</h4>
                                    <p class="text-sm text-gray-600 mt-1">Kings Cross Development</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <div class="flex items-center space-x-2">
                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                                                Executive
                                            </span>
                                        </div>
                                        <span class="text-xs text-gray-500">Due: Nov 18</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-4 p-4 border border-gray-200 rounded-lg">
                                <div class="bg-yellow-100 p-2 rounded-full">
                                    <i class="fa-solid fa-exclamation-triangle text-yellow-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Risk Assessment</h4>
                                    <p class="text-sm text-gray-600 mt-1">Shoreditch Retail Space</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <div class="flex items-center space-x-2">
                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                                Finance
                                            </span>
                                        </div>
                                        <span class="text-xs text-gray-500">Due: Nov 20</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Recent Activity -->
            <section class="mb-8" id="activity-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Recent Activity</h3>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">All</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Deals</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Documents</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Tasks</button>
                        </div>
                    </div>
                    
                    <div class="space-y-6">
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="User" class="w-10 h-10 rounded-full">
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-medium text-gray-900">Sarah Chen</span>
                                    <span class="text-gray-500">uploaded a new document</span>
                                    <span class="text-blue-600 font-medium">HoT_v2.1_CanaryWharf.pdf</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Canary Wharf Office Deal • 2 hours ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg" alt="User" class="w-10 h-10 rounded-full">
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-medium text-gray-900">Mike Rodriguez</span>
                                    <span class="text-gray-500">moved deal to</span>
                                    <span class="text-green-600 font-medium">Contract stage</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Shoreditch Retail Space • 4 hours ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg" alt="User" class="w-10 h-10 rounded-full">
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-medium text-gray-900">David Kim</span>
                                    <span class="text-gray-500">requested approval for</span>
                                    <span class="text-purple-600 font-medium">Budget Amendment</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Kings Cross Development • 6 hours ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg" alt="User" class="w-10 h-10 rounded-full">
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-medium text-gray-900">Emma Thompson</span>
                                    <span class="text-gray-500">completed task</span>
                                    <span class="text-blue-600 font-medium">Property Survey</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Bermondsey Industrial Unit • 8 hours ago</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Risk Management Dashboard -->
            <section class="mb-8" id="risk-management-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Risk Management Overview</h3>
                        <button class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">
                            <i class="fa-solid fa-exclamation-triangle mr-2"></i>
                            Risk Report
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <div class="text-center p-4 bg-red-50 rounded-lg border border-red-200">
                            <div class="text-3xl font-bold text-red-600">3</div>
                            <div class="text-sm text-red-700 font-medium mt-1">High Risk</div>
                            <div class="text-xs text-red-600 mt-1">Immediate attention required</div>
                        </div>
                        
                        <div class="text-center p-4 bg-yellow-50 rounded-lg border border-yellow-200">
                            <div class="text-3xl font-bold text-yellow-600">8</div>
                            <div class="text-sm text-yellow-700 font-medium mt-1">Medium Risk</div>
                            <div class="text-xs text-yellow-600 mt-1">Monitor closely</div>
                        </div>
                        
                        <div class="text-center p-4 bg-green-50 rounded-lg border border-green-200">
                            <div class="text-3xl font-bold text-green-600">13</div>
                            <div class="text-sm text-green-700 font-medium mt-1">Low Risk</div>
                            <div class="text-xs text-green-600 mt-1">Routine monitoring</div>
                        </div>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="flex items-start space-x-4 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg">
                            <div class="bg-red-100 p-2 rounded-full">
                                <i class="fa-solid fa-exclamation-triangle text-red-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-red-900">Regulatory Compliance Risk</h4>
                                <p class="text-sm text-red-700 mt-1">Kings Cross Development - Planning permission delays may impact timeline</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-red-600 font-medium">HIGH RISK</span>
                                    <button class="text-xs text-red-700 hover:text-red-900 font-medium">View Details</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4 p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg">
                            <div class="bg-yellow-100 p-2 rounded-full">
                                <i class="fa-solid fa-clock text-yellow-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-yellow-900">Timeline Risk</h4>
                                <p class="text-sm text-yellow-700 mt-1">Canary Wharf Office - Legal review taking longer than expected</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-yellow-600 font-medium">MEDIUM RISK</span>
                                    <button class="text-xs text-yellow-700 hover:text-yellow-900 font-medium">View Details</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Document Management -->
            <section class="mb-8" id="document-management-section">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Recent Documents</h3>
                            <button data-view-all="document-management" class="text-sm text-blue-600 hover:text-blue-700">View All Documents</button>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-center space-x-4 p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                                <div class="bg-red-100 p-2 rounded">
                                    <i class="fa-solid fa-file-pdf text-red-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">HoT_v2.1_CanaryWharf.pdf</h4>
                                    <p class="text-sm text-gray-500">Uploaded 2 hours ago • Sarah Chen</p>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                        Pending Review
                                    </span>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-4 p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                                <div class="bg-blue-100 p-2 rounded">
                                    <i class="fa-solid fa-file-word text-blue-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Contract_Shoreditch_v1.2.docx</h4>
                                    <p class="text-sm text-gray-500">Uploaded 4 hours ago • Mike Rodriguez</p>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Approved
                                    </span>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-4 p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                                <div class="bg-green-100 p-2 rounded">
                                    <i class="fa-solid fa-file-excel text-green-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Financial_Model_KingsCross.xlsx</h4>
                                    <p class="text-sm text-gray-500">Uploaded 6 hours ago • David Kim</p>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                        Under Review
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Signature Status</h3>
                            <button data-view-all="document-management" class="text-sm text-blue-600 hover:text-blue-700">View All Signatures</button>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="p-4 border border-gray-200 rounded-lg">
                                <div class="flex items-center justify-between mb-3">
                                    <h4 class="font-medium text-gray-900">Shoreditch Retail Contract</h4>
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                        Pending
                                    </span>
                                </div>
                                <div class="space-y-2">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">Landlord</span>
                                        <i class="fa-solid fa-check-circle text-green-500"></i>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">Tenant Representative</span>
                                        <i class="fa-solid fa-clock text-yellow-500"></i>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">Legal Counsel</span>
                                        <i class="fa-solid fa-clock text-yellow-500"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="p-4 border border-gray-200 rounded-lg">
                                <div class="flex items-center justify-between mb-3">
                                    <h4 class="font-medium text-gray-900">Canary Wharf HoT</h4>
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Complete
                                    </span>
                                </div>
                                <div class="space-y-2">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">All Parties</span>
                                        <i class="fa-solid fa-check-circle text-green-500"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Performance Analytics -->
            <section class="mb-8" id="performance-analytics-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Performance Analytics</h3>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Week</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Month</button>
                            <button class="px-3 py-1 text-sm bg-blue-600 text-white rounded-lg">This Quarter</button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="text-center p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border">
                            <div class="text-2xl font-bold text-blue-600">94%</div>
                            <div class="text-sm text-blue-700 font-medium mt-1">SLA Compliance</div>
                            <div class="text-xs text-blue-600 mt-1">↑ 3% from last quarter</div>
                        </div>
                        
                        <div class="text-center p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border">
                            <div class="text-2xl font-bold text-green-600">6.2</div>
                            <div class="text-sm text-green-700 font-medium mt-1">Avg Deal Cycle (days)</div>
                            <div class="text-xs text-green-600 mt-1">↓ 1.3 days improvement</div>
                        </div>
                        
                        <div class="text-center p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border">
                            <div class="text-2xl font-bold text-purple-600">£2.1M</div>
                            <div class="text-sm text-purple-700 font-medium mt-1">Avg Deal Value</div>
                            <div class="text-xs text-purple-600 mt-1">↑ 15% from last quarter</div>
                        </div>
                        
                        <div class="text-center p-4 bg-gradient-to-r from-orange-50 to-red-50 rounded-lg border">
                            <div class="text-2xl font-bold text-orange-600">87%</div>
                            <div class="text-sm text-orange-700 font-medium mt-1">Client Satisfaction</div>
                            <div class="text-xs text-orange-600 mt-1">↑ 4% from last quarter</div>
                        </div>
                    </div>
                    
                    <div class="h-80" id="performance-chart"></div>
                </div>
            </section>
        </div>
    </div>

    <!-- Deal Detail Drawer (Placeholder) -->

    <!-- PAGE: Negotiation Dashboard -->
    <div id="negotiation-dashboard-page" class="page-content hidden">
        <div class="flex-1 overflow-y-auto p-6">
            <!-- COMPONENT: Key Metrics Section -->
            <section class="mb-8" id="key-metrics-section">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Active Deals</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">24</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-green-600 text-sm font-medium">+12%</span>
                                    <span class="text-gray-500 text-sm ml-2">vs last month</span>
                                </div>
                            </div>
                            <div class="bg-blue-100 p-3 rounded-full">
                                <i class="fa-solid fa-handshake text-blue-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Total Value</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">£8.4M</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-green-600 text-sm font-medium">+18%</span>
                                    <span class="text-gray-500 text-sm ml-2">vs last month</span>
                                </div>
                            </div>
                            <div class="bg-green-100 p-3 rounded-full">
                                <i class="fa-solid fa-pound-sign text-green-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Pending Approvals</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">7</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-red-600 text-sm font-medium">+3</span>
                                    <span class="text-gray-500 text-sm ml-2">this week</span>
                                </div>
                            </div>
                            <div class="bg-orange-100 p-3 rounded-full">
                                <i class="fa-solid fa-clock text-orange-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600">Win Rate</p>
                                <p class="text-3xl font-bold text-gray-900 mt-2">73%</p>
                                <div class="flex items-center mt-2">
                                    <span class="text-green-600 text-sm font-medium">+5%</span>
                                    <span class="text-gray-500 text-sm ml-2">vs last quarter</span>
                                </div>
                            </div>
                            <div class="bg-purple-100 p-3 rounded-full">
                                <i class="fa-solid fa-trophy text-purple-600 text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Deal Pipeline Overview -->
            <section class="mb-8" id="pipeline-overview-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Deal Pipeline Overview</h3>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Month</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Quarter</button>
                            <button class="px-3 py-1 text-sm bg-blue-600 text-white rounded-lg">This Year</button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-7 gap-4">
                        <div class="text-center p-4 bg-blue-50 rounded-lg border-2 border-blue-200">
                            <div class="text-2xl font-bold text-blue-600">8</div>
                            <div class="text-sm text-blue-700 font-medium mt-1">Lead</div>
                            <div class="text-xs text-blue-600 mt-1">£1.2M</div>
                        </div>
                        
                        <div class="text-center p-4 bg-indigo-50 rounded-lg border">
                            <div class="text-2xl font-bold text-indigo-600">6</div>
                            <div class="text-sm text-indigo-700 font-medium mt-1">Viewing</div>
                            <div class="text-xs text-indigo-600 mt-1">£980K</div>
                        </div>
                        
                        <div class="text-center p-4 bg-purple-50 rounded-lg border">
                            <div class="text-2xl font-bold text-purple-600">4</div>
                            <div class="text-sm text-purple-700 font-medium mt-1">Proposal</div>
                            <div class="text-xs text-purple-600 mt-1">£1.8M</div>
                        </div>
                        
                        <div class="text-center p-4 bg-pink-50 rounded-lg border">
                            <div class="text-2xl font-bold text-pink-600">3</div>
                            <div class="text-sm text-pink-700 font-medium mt-1">HoTs</div>
                            <div class="text-xs text-pink-600 mt-1">£2.1M</div>
                        </div>
                        
                        <div class="text-center p-4 bg-red-50 rounded-lg border">
                            <div class="text-2xl font-bold text-red-600">2</div>
                            <div class="text-sm text-red-700 font-medium mt-1">Contract</div>
                            <div class="text-xs text-red-600 mt-1">£1.5M</div>
                        </div>
                        
                        <div class="text-center p-4 bg-orange-50 rounded-lg border">
                            <div class="text-2xl font-bold text-orange-600">1</div>
                            <div class="text-sm text-orange-700 font-medium mt-1">Onboarding</div>
                            <div class="text-xs text-orange-600 mt-1">£800K</div>
                        </div>
                        
                        <div class="text-center p-4 bg-green-50 rounded-lg border">
                            <div class="text-2xl font-bold text-green-600">12</div>
                            <div class="text-sm text-green-700 font-medium mt-1">Live</div>
                            <div class="text-xs text-green-600 mt-1">£5.2M</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Charts Section -->
            <section class="mb-8" id="charts-section">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Deal Value Trend</h3>
                        <div id="deal-value-chart" class="h-80"></div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Deal Stage Distribution</h3>
                        <div id="stage-distribution-chart" class="h-80"></div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Critical Notifications -->
            <section class="mb-8" id="notifications-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Critical Notifications</h3>
                        <button class="text-sm text-blue-600 hover:text-blue-700" data-view-all="deals-overview">View All</button>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="flex items-start space-x-4 p-4 bg-red-50 border border-red-200 rounded-lg">
                            <div class="bg-red-100 p-2 rounded-full">
                                <i class="fa-solid fa-exclamation-triangle text-red-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-red-900">SLA Breach Alert</h4>
                                <p class="text-sm text-red-700 mt-1">Canary Wharf Office Deal - Legal approval overdue by 2 days</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-red-600">2 hours ago</span>
                                    <button class="text-xs text-red-700 hover:text-red-900 font-medium" data-action="quick-action" data-item-type="deal">Take Action</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                            <div class="bg-yellow-100 p-2 rounded-full">
                                <i class="fa-solid fa-clock text-yellow-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-yellow-900">Approval Pending</h4>
                                <p class="text-sm text-yellow-700 mt-1">Shoreditch Retail Space - Executive approval needed for contract terms</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-yellow-600">4 hours ago</span>
                                    <button class="text-xs text-yellow-700 hover:text-yellow-900 font-medium" data-action="add-comment" data-item-type="deal">Review</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                            <div class="bg-blue-100 p-2 rounded-full">
                                <i class="fa-solid fa-file-upload text-blue-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-blue-900">Document Uploaded</h4>
                                <p class="text-sm text-blue-700 mt-1">New HoT version uploaded for Kings Cross Development</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-blue-600">6 hours ago</span>
                                    <button class="text-xs text-blue-700 hover:text-blue-900 font-medium" data-action="view-document" data-item-type="document">View Document</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Active Deals Table -->
            <section class="mb-8" id="active-deals-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Active Deals</h3>
                        <div class="flex items-center space-x-3">
                            <div class="relative">
                                <input type="text" placeholder="Filter deals..." class="pl-8 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <i class="fa-solid fa-search absolute left-2.5 top-2.5 text-gray-400 text-sm"></i>
                            </div>
                            <button class="px-3 py-2 border border-gray-300 rounded-lg text-sm hover:bg-gray-50" data-filter-toggle="filter-panel">
                                <i class="fa-solid fa-filter mr-2"></i>Filter
                            </button>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="border-b border-gray-200">
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Deal Name</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Property</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Stage</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Value</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Probability</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Risk</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Next Milestone</th>
                                    <th class="text-left py-3 px-4 font-medium text-gray-600">Owner</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                                <tr class="hover:bg-gray-50">
                                    <td class="py-4 px-4">
                                        <div class="font-medium text-gray-900 cursor-pointer hover:text-blue-600" onclick="window.location.hash = '/deal-room'">Canary Wharf Office</div>
                                        <div class="text-sm text-gray-500">DL_CW_2024_001</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">25 Canada Square</div>
                                        <div class="text-sm text-gray-500">Office • 15,000 sq ft</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-pink-100 text-pink-800">
                                            HoTs
                                        </span>
                                    </td>
                                    <td class="py-4 px-4 font-medium text-gray-900">£2,100,000</td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <span class="text-gray-900">85%</span>
                                            <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                                <div class="bg-green-500 h-2 rounded-full" style="width: 85%"></div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                            Medium
                                        </span>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">Contract Review</div>
                                        <div class="text-sm text-gray-500">Due: Nov 15</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="Owner" class="w-8 h-8 rounded-full mr-2">
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Sarah Chen</div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                
                                <tr class="hover:bg-gray-50">
                                    <td class="py-4 px-4">
                                        <div class="font-medium text-gray-900 cursor-pointer hover:text-blue-600" onclick="window.location.hash = '/deal-room'">Shoreditch Retail Space</div>
                                        <div class="text-sm text-gray-500">DL_SH_2024_002</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">156 Brick Lane</div>
                                        <div class="text-sm text-gray-500">Retail • 3,500 sq ft</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                            Contract
                                        </span>
                                    </td>
                                    <td class="py-4 px-4 font-medium text-gray-900">£850,000</td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <span class="text-gray-900">92%</span>
                                            <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                                <div class="bg-green-500 h-2 rounded-full" style="width: 92%"></div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                            Low
                                        </span>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">Final Signatures</div>
                                        <div class="text-sm text-gray-500">Due: Nov 20</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg" alt="Owner" class="w-8 h-8 rounded-full mr-2">
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">Mike Rodriguez</div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                
                                <tr class="hover:bg-gray-50">
                                    <td class="py-4 px-4">
                                        <div class="font-medium text-gray-900">Kings Cross Development</div>
                                        <div class="text-sm text-gray-500">DL_KC_2024_003</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">2 King's Boulevard</div>
                                        <div class="text-sm text-gray-500">Mixed Use • 45,000 sq ft</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                                            Proposal
                                        </span>
                                    </td>
                                    <td class="py-4 px-4 font-medium text-gray-900">£4,200,000</td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <span class="text-gray-900">68%</span>
                                            <div class="ml-2 w-16 bg-gray-200 rounded-full h-2">
                                                <div class="bg-yellow-500 h-2 rounded-full" style="width: 68%"></div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                            High
                                        </span>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="text-gray-900">Proposal Submission</div>
                                        <div class="text-sm text-gray-500">Due: Nov 25</div>
                                    </td>
                                    <td class="py-4 px-4">
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg" alt="Owner" class="w-8 h-8 rounded-full mr-2">
                                            <div>
                                                <div class="text-sm font-medium text-gray-900">David Kim</div>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Task Management -->
            <section class="mb-8" id="task-management-section">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Urgent Tasks</h3>
                            <button data-view-all="task-management" class="text-sm text-blue-600 hover:text-blue-700">View All Tasks</button>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-start space-x-4 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg">
                                <div class="flex-shrink-0 mt-1">
                                    <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Review Legal Documentation</h4>
                                    <p class="text-sm text-gray-600 mt-1">Canary Wharf Office Deal</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <span class="text-xs text-red-600 font-medium">OVERDUE</span>
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="Assignee" class="w-6 h-6 rounded-full">
                                            <span class="text-xs text-gray-500 ml-2">Sarah Chen</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-4 p-4 bg-orange-50 border-l-4 border-orange-500 rounded-lg">
                                <div class="flex-shrink-0 mt-1">
                                    <div class="w-3 h-3 bg-orange-500 rounded-full"></div>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Property Valuation Report</h4>
                                    <p class="text-sm text-gray-600 mt-1">Shoreditch Retail Space</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <span class="text-xs text-orange-600 font-medium">DUE TODAY</span>
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg" alt="Assignee" class="w-6 h-6 rounded-full">
                                            <span class="text-xs text-gray-500 ml-2">Mike Rodriguez</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-4 p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg">
                                <div class="flex-shrink-0 mt-1">
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Client Presentation Prep</h4>
                                    <p class="text-sm text-gray-600 mt-1">Kings Cross Development</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <span class="text-xs text-yellow-600 font-medium">DUE TOMORROW</span>
                                        <div class="flex items-center">
                                            <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg" alt="Assignee" class="w-6 h-6 rounded-full">
                                            <span class="text-xs text-gray-500 ml-2">David Kim</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Pending Approvals</h3>
                            <button data-view-all="pending-approvals" class="text-sm text-blue-600 hover:text-blue-700">View All Approvals</button>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-start space-x-4 p-4 border border-gray-200 rounded-lg">
                                <div class="bg-blue-100 p-2 rounded-full">
                                    <i class="fa-solid fa-file-contract text-blue-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">HoT Version 2.1</h4>
                                    <p class="text-sm text-gray-600 mt-1">Canary Wharf Office Deal</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <div class="flex items-center space-x-2">
                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800">
                                                Legal Review
                                            </span>
                                        </div>
                                        <span class="text-xs text-gray-500">Due: Nov 16</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-4 p-4 border border-gray-200 rounded-lg">
                                <div class="bg-green-100 p-2 rounded-full">
                                    <i class="fa-solid fa-check-circle text-green-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Budget Approval</h4>
                                    <p class="text-sm text-gray-600 mt-1">Kings Cross Development</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <div class="flex items-center space-x-2">
                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                                                Executive
                                            </span>
                                        </div>
                                        <span class="text-xs text-gray-500">Due: Nov 18</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="flex items-start space-x-4 p-4 border border-gray-200 rounded-lg">
                                <div class="bg-yellow-100 p-2 rounded-full">
                                    <i class="fa-solid fa-exclamation-triangle text-yellow-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Risk Assessment</h4>
                                    <p class="text-sm text-gray-600 mt-1">Shoreditch Retail Space</p>
                                    <div class="flex items-center justify-between mt-3">
                                        <div class="flex items-center space-x-2">
                                            <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800">
                                                Finance
                                            </span>
                                        </div>
                                        <span class="text-xs text-gray-500">Due: Nov 20</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Recent Activity -->
            <section class="mb-8" id="activity-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Recent Activity</h3>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">All</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Deals</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Documents</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">Tasks</button>
                        </div>
                    </div>
                    
                    <div class="space-y-6">
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="User" class="w-10 h-10 rounded-full">
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-medium text-gray-900">Sarah Chen</span>
                                    <span class="text-gray-500">uploaded a new document</span>
                                    <span class="text-blue-600 font-medium">HoT_v2.1_CanaryWharf.pdf</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Canary Wharf Office Deal • 2 hours ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg" alt="User" class="w-10 h-10 rounded-full">
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-medium text-gray-900">Mike Rodriguez</span>
                                    <span class="text-gray-500">moved deal to</span>
                                    <span class="text-green-600 font-medium">Contract stage</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Shoreditch Retail Space • 4 hours ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg" alt="User" class="w-10 h-10 rounded-full">
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-medium text-gray-900">David Kim</span>
                                    <span class="text-gray-500">requested approval for</span>
                                    <span class="text-purple-600 font-medium">Budget Amendment</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Kings Cross Development • 6 hours ago</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-5.jpg" alt="User" class="w-10 h-10 rounded-full">
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center space-x-2">
                                    <span class="font-medium text-gray-900">Emma Thompson</span>
                                    <span class="text-gray-500">completed task</span>
                                    <span class="text-blue-600 font-medium">Property Survey</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Bermondsey Industrial Unit • 8 hours ago</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Risk Management Dashboard -->
            <section class="mb-8" id="risk-management-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Risk Management Overview</h3>
                        <button class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">
                            <i class="fa-solid fa-exclamation-triangle mr-2"></i>
                            Risk Report
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <div class="text-center p-4 bg-red-50 rounded-lg border border-red-200">
                            <div class="text-3xl font-bold text-red-600">3</div>
                            <div class="text-sm text-red-700 font-medium mt-1">High Risk</div>
                            <div class="text-xs text-red-600 mt-1">Immediate attention required</div>
                        </div>
                        
                        <div class="text-center p-4 bg-yellow-50 rounded-lg border border-yellow-200">
                            <div class="text-3xl font-bold text-yellow-600">8</div>
                            <div class="text-sm text-yellow-700 font-medium mt-1">Medium Risk</div>
                            <div class="text-xs text-yellow-600 mt-1">Monitor closely</div>
                        </div>
                        
                        <div class="text-center p-4 bg-green-50 rounded-lg border border-green-200">
                            <div class="text-3xl font-bold text-green-600">13</div>
                            <div class="text-sm text-green-700 font-medium mt-1">Low Risk</div>
                            <div class="text-xs text-green-600 mt-1">Routine monitoring</div>
                        </div>
                    </div>
                    
                    <div class="space-y-4">
                        <div class="flex items-start space-x-4 p-4 bg-red-50 border-l-4 border-red-500 rounded-lg">
                            <div class="bg-red-100 p-2 rounded-full">
                                <i class="fa-solid fa-exclamation-triangle text-red-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-red-900">Regulatory Compliance Risk</h4>
                                <p class="text-sm text-red-700 mt-1">Kings Cross Development - Planning permission delays may impact timeline</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-red-600 font-medium">HIGH RISK</span>
                                    <button class="text-xs text-red-700 hover:text-red-900 font-medium">View Details</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="flex items-start space-x-4 p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded-lg">
                            <div class="bg-yellow-100 p-2 rounded-full">
                                <i class="fa-solid fa-clock text-yellow-600"></i>
                            </div>
                            <div class="flex-1">
                                <h4 class="font-medium text-yellow-900">Timeline Risk</h4>
                                <p class="text-sm text-yellow-700 mt-1">Canary Wharf Office - Legal review taking longer than expected</p>
                                <div class="flex items-center mt-2 space-x-4">
                                    <span class="text-xs text-yellow-600 font-medium">MEDIUM RISK</span>
                                    <button class="text-xs text-yellow-700 hover:text-yellow-900 font-medium">View Details</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Document Management -->
            <section class="mb-8" id="document-management-section">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Recent Documents</h3>
                            <button data-view-all="document-management" class="text-sm text-blue-600 hover:text-blue-700">View All Documents</button>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-center space-x-4 p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                                <div class="bg-red-100 p-2 rounded">
                                    <i class="fa-solid fa-file-pdf text-red-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">HoT_v2.1_CanaryWharf.pdf</h4>
                                    <p class="text-sm text-gray-500">Uploaded 2 hours ago • Sarah Chen</p>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                        Pending Review
                                    </span>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-4 p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                                <div class="bg-blue-100 p-2 rounded">
                                    <i class="fa-solid fa-file-word text-blue-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Contract_Shoreditch_v1.2.docx</h4>
                                    <p class="text-sm text-gray-500">Uploaded 4 hours ago • Mike Rodriguez</p>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Approved
                                    </span>
                                </div>
                            </div>
                            
                            <div class="flex items-center space-x-4 p-3 border border-gray-200 rounded-lg hover:bg-gray-50">
                                <div class="bg-green-100 p-2 rounded">
                                    <i class="fa-solid fa-file-excel text-green-600"></i>
                                </div>
                                <div class="flex-1">
                                    <h4 class="font-medium text-gray-900">Financial_Model_KingsCross.xlsx</h4>
                                    <p class="text-sm text-gray-500">Uploaded 6 hours ago • David Kim</p>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                        Under Review
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Signature Status</h3>
                            <button data-view-all="document-management" class="text-sm text-blue-600 hover:text-blue-700">View All Signatures</button>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="p-4 border border-gray-200 rounded-lg">
                                <div class="flex items-center justify-between mb-3">
                                    <h4 class="font-medium text-gray-900">Shoreditch Retail Contract</h4>
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                        Pending
                                    </span>
                                </div>
                                <div class="space-y-2">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">Landlord</span>
                                        <i class="fa-solid fa-check-circle text-green-500"></i>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">Tenant Representative</span>
                                        <i class="fa-solid fa-clock text-yellow-500"></i>
                                    </div>
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">Legal Counsel</span>
                                        <i class="fa-solid fa-clock text-yellow-500"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="p-4 border border-gray-200 rounded-lg">
                                <div class="flex items-center justify-between mb-3">
                                    <h4 class="font-medium text-gray-900">Canary Wharf HoT</h4>
                                    <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                        Complete
                                    </span>
                                </div>
                                <div class="space-y-2">
                                    <div class="flex items-center justify-between">
                                        <span class="text-sm text-gray-600">All Parties</span>
                                        <i class="fa-solid fa-check-circle text-green-500"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- COMPONENT: Performance Analytics -->
            <section class="mb-8" id="performance-analytics-section">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6">
                    <div class="flex items-center justify-between mb-6">
                        <h3 class="text-lg font-semibold text-gray-900">Performance Analytics</h3>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Week</button>
                            <button class="px-3 py-1 text-sm border border-gray-300 rounded-lg hover:bg-gray-50">This Month</button>
                            <button class="px-3 py-1 text-sm bg-blue-600 text-white rounded-lg">This Quarter</button>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="text-center p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border">
                            <div class="text-2xl font-bold text-blue-600">94%</div>
                            <div class="text-sm text-blue-700 font-medium mt-1">SLA Compliance</div>
                            <div class="text-xs text-blue-600 mt-1">↑ 3% from last quarter</div>
                        </div>
                        
                        <div class="text-center p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border">
                            <div class="text-2xl font-bold text-green-600">6.2</div>
                            <div class="text-sm text-green-700 font-medium mt-1">Avg Deal Cycle (days)</div>
                            <div class="text-xs text-green-600 mt-1">↓ 1.3 days improvement</div>
                        </div>
                        
                        <div class="text-center p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border">
                            <div class="text-2xl font-bold text-purple-600">£2.1M</div>
                            <div class="text-sm text-purple-700 font-medium mt-1">Avg Deal Value</div>
                            <div class="text-xs text-purple-600 mt-1">↑ 15% from last quarter</div>
                        </div>
                        
                        <div class="text-center p-4 bg-gradient-to-r from-orange-50 to-red-50 rounded-lg border">
                            <div class="text-2xl font-bold text-orange-600">87%</div>
                            <div class="text-sm text-orange-700 font-medium mt-1">Client Satisfaction</div>
                            <div class="text-xs text-orange-600 mt-1">↑ 4% from last quarter</div>
                        </div>
                    </div>
                    
                    <div class="h-80" id="performance-chart"></div>
                </div>
            </section>
        </div>
    </div>
    <div id="deal-detail-drawer" class="fixed inset-y-0 right-0 w-full bg-white shadow-2xl transform translate-x-full transition-transform duration-300 z-[60] border-l border-stone overflow-hidden">
        <div class="h-full flex flex-col">
            <!-- Back Button -->
            <div class="px-8 py-4 bg-white border-b border-gray-200">
                <button onclick="closeDealDetail()" class="flex items-center text-gray-600 hover:text-gray-900 transition-colors">
                    <i class="fa-solid fa-arrow-left mr-2"></i>
                    <span class="font-medium">Back to Deal Room</span>
                </button>
            </div>

            <!-- Enhanced Header Strip -->
            <div class="bg-white border-b border-gray-200 px-8 py-6">
                <div class="flex items-start justify-between mb-4">
                    <div class="flex-1">
                        <div class="flex items-center gap-4 mb-2">
                            <h1 class="text-3xl font-bold text-gray-900">Canary Wharf Tower</h1>
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800">
                                Contract Signed
                            </span>
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800">
                                <i class="fa-solid fa-clock mr-1"></i>
                                Due Soon
                            </span>
                        </div>
                        
                        <div class="flex items-center gap-6 text-sm text-gray-600">
                            <span class="font-medium">Deal ID: CW-2024-007</span>
                            <span class="text-gray-300">|</span>
                            
                            <div class="flex items-center gap-2">
                                <span class="text-gray-500">Owner:</span>
                                <div class="flex items-center gap-1">
                                    <div class="w-6 h-6 rounded-full bg-blue-500 flex items-center justify-center text-white text-xs font-medium">
                                        M
                                    </div>
                                    <span class="font-medium text-gray-900">Max Chen</span>
                                </div>
                            </div>
                            <span class="text-gray-300">|</span>
                            
                            <div class="flex items-center gap-2">
                                <span class="text-gray-500">Stage:</span>
                                <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800">
                                    Onboarding
                                </span>
                            </div>
                            <span class="text-gray-300">|</span>
                            
                            <div class="flex items-center gap-2">
                                <span class="text-gray-500">Win Probability:</span>
                                <span class="font-semibold text-green-600">95%</span>
                                <i class="fa-solid fa-arrow-up text-green-500 text-xs"></i>
                            </div>
                            <span class="text-gray-300">|</span>
                            
                            <div class="flex items-center gap-2">
                                <span class="text-gray-500">ACV:</span>
                                <span class="font-semibold text-gray-900">£2.4M</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex items-center gap-3">
                        <button onclick="editDeal()" class="px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors">
                            <i class="fa-solid fa-edit mr-2"></i>
                            Edit Deal
                        </button>
                        <button onclick="shareDeal()" class="px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors">
                            <i class="fa-solid fa-share mr-2"></i>
                            Share
                        </button>
                        <button onclick="showMoreActions()" class="px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors">
                            <i class="fa-solid fa-ellipsis-v"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Tab Navigation -->
            <div class="bg-white border-b border-gray-200 px-8">
                <div class="flex items-center gap-6">
                    <button id="tab-btn-overview" onclick="switchDealTab('overview')" class="deal-tab-btn deal-tab-active px-4 py-3 text-sm font-medium border-b-2 border-blue-600 text-blue-600 transition-colors">
                        Overview
                    </button>
                    <button id="tab-btn-commercials" onclick="switchDealTab('commercials')" class="deal-tab-btn px-4 py-3 text-sm font-medium border-b-2 border-transparent text-gray-600 hover:text-gray-900 transition-colors">
                        Commercials
                        <span class="ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">10</span>
                    </button>
                    <button id="tab-btn-documents" onclick="switchDealTab('documents')" class="deal-tab-btn px-4 py-3 text-sm font-medium border-b-2 border-transparent text-gray-600 hover:text-gray-900 transition-colors">
                        Documents
                        <span class="ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">11</span>
                    </button>
                    <button id="tab-btn-stakeholders" onclick="switchDealTab('stakeholders')" class="deal-tab-btn px-4 py-3 text-sm font-medium border-b-2 border-transparent text-gray-600 hover:text-gray-900 transition-colors">
                        Stakeholders
                        <span class="ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">12</span>
                    </button>
                    <button id="tab-btn-history" onclick="switchDealTab('history')" class="deal-tab-btn px-4 py-3 text-sm font-medium border-b-2 border-transparent text-gray-600 hover:text-gray-900 transition-colors">
                        History
                        <span class="ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">13</span>
                    </button>
                </div>
            </div>

            <!-- Tab Content Container -->
            <div class="flex-1 overflow-y-auto bg-gray-50">
                
                <!-- OVERVIEW TAB -->
                <div id="tab-content-overview" class="deal-tab-content">
                    <div class="p-8 space-y-6">
                        
                        <!-- Priority Dashboard -->
                        <div class="bg-red-50 border border-red-200 rounded-lg p-6">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center gap-3">
                                    <div class="w-10 h-10 bg-red-500 rounded-lg flex items-center justify-center">
                                        <i class="fa-solid fa-exclamation-triangle text-white text-lg"></i>
                                    </div>
                                    <div>
                                        <h3 class="text-lg font-semibold text-gray-900">Priority Dashboard</h3>
                                        <p class="text-sm text-gray-600">Critical items requiring immediate attention</p>
                                    </div>
                                </div>
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800">
                                    <i class="fa-solid fa-circle mr-2"></i>
                                    3 Critical Items
                                </span>
                            </div>

                            <div class="grid grid-cols-4 gap-4">
                                <!-- Current Stage -->
                                <div class="bg-white rounded-lg p-4 border border-blue-200">
                                    <div class="flex items-center gap-2 mb-2">
                                        <i class="fa-solid fa-flag text-blue-600"></i>
                                        <span class="text-xs font-medium text-gray-600 uppercase">Current Stage</span>
                                    </div>
                                    <div class="text-2xl font-bold text-gray-900 mb-1">Onboarding</div>
                                    <div class="text-sm text-gray-600 mb-3">
                                        <div>Time in stage: <span class="font-medium text-blue-600">12 days</span></div>
                                    </div>
                                    <div class="pt-3 border-t border-gray-200">
                                        <div class="text-xs text-gray-600">Next milestone:</div>
                                        <div class="text-sm font-medium text-gray-900">Go-Live</div>
                                        <div class="text-xs text-gray-600">Due in: <span class="font-medium text-blue-600">12 days</span></div>
                                    </div>
                                </div>

                                <!-- At-Risk Items -->
                                <div class="bg-white rounded-lg p-4 border border-red-200">
                                    <div class="flex items-center gap-2 mb-2">
                                        <i class="fa-solid fa-exclamation-triangle text-red-600"></i>
                                        <span class="text-xs font-medium text-gray-600 uppercase">At-Risk Items</span>
                                    </div>
                                    <div class="text-2xl font-bold text-red-600 mb-1">3</div>
                                    <div class="text-sm text-gray-600 space-y-1">
                                        <div>Overdue tasks: <span class="font-medium text-red-600">1</span></div>
                                        <div>SLA breaches: <span class="font-medium">0</span></div>
                                        <div>Missing docs: <span class="font-medium text-yellow-600">1</span></div>
                                    </div>
                                </div>

                                <!-- My Actions Due -->
                                <div class="bg-white rounded-lg p-4 border border-purple-200">
                                    <div class="flex items-center gap-2 mb-2">
                                        <i class="fa-solid fa-tasks text-purple-600"></i>
                                        <span class="text-xs font-medium text-gray-600 uppercase">My Actions Due</span>
                                    </div>
                                    <div class="text-2xl font-bold text-purple-600 mb-1">1</div>
                                    <div class="text-sm text-gray-600 space-y-1">
                                        <div>Due today: <span class="font-medium">0</span></div>
                                        <div>Due this week: <span class="font-medium text-purple-600">1</span></div>
                                        <div>Awaiting input: <span class="font-medium">0</span></div>
                                    </div>
                                </div>

                                <!-- Cycle Performance -->
                                <div class="bg-white rounded-lg p-4 border border-green-200">
                                    <div class="flex items-center gap-2 mb-2">
                                        <i class="fa-solid fa-chart-line text-green-600"></i>
                                        <span class="text-xs font-medium text-gray-600 uppercase">Cycle Performance</span>
                                    </div>
                                    <div class="text-2xl font-bold text-green-600 mb-1">-18 days</div>
                                    <div class="text-sm text-gray-600 mb-3">
                                        <div class="flex items-center gap-1">
                                            <i class="fa-solid fa-arrow-down text-green-600"></i>
                                            <span class="font-medium text-green-600">27% faster than average</span>
                                        </div>
                                    </div>
                                    <div class="pt-3 border-t border-gray-200">
                                        <div class="text-xs text-gray-600">Current: <span class="font-medium">47 days</span></div>
                                        <div class="text-xs text-gray-600">Average: <span class="font-medium">65 days</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Placeholder for more content -->
                        <div class="bg-white rounded-lg border border-gray-200 p-6">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4">Overview Tab - Priority 1 Features Loaded</h3>
                            <p class="text-gray-600">Priority Dashboard, Deal Timeline, Team Snapshot, and My Next Actions are now integrated. Scroll down to see all features.</p>
                        </div>

                    </div>
                </div>

                <!-- COMMERCIALS TAB -->
                <div id="tab-content-commercials" class="deal-tab-content" style="display: none;">
                    <div class="p-8 space-y-6">
                        <div class="bg-white rounded-lg border border-gray-200 p-6">
                            <h2 class="text-2xl font-bold text-gray-900 mb-4">Commercial Terms - Priority 2</h2>
                            <p class="text-gray-600 mb-4">This tab contains the Terms Editor, HoT Deltas, Approval Panel, and Scenario Tools.</p>
                            <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                                <p class="text-green-800 font-medium">✓ Tab switching is working! You successfully navigated to the Commercials tab.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- DOCUMENTS TAB -->
                <div id="tab-content-documents" class="deal-tab-content" style="display: none;">
                    <div class="p-8 space-y-6">
                        <div class="bg-white rounded-lg border border-gray-200 p-6">
                            <h2 class="text-2xl font-bold text-gray-900 mb-4">Documents - Priority 2</h2>
                            <p class="text-gray-600 mb-4">This tab contains the Stage-Gated Checklist, Per-Doc Actions, and Compliance Pack.</p>
                            <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                                <p class="text-green-800 font-medium">✓ Tab switching is working! You successfully navigated to the Documents tab.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- STAKEHOLDERS TAB -->
                <div id="tab-content-stakeholders" class="deal-tab-content" style="display: none;">
                    <div class="p-8 space-y-6">
                        <div class="bg-white rounded-lg border border-gray-200 p-6">
                            <h2 class="text-2xl font-bold text-gray-900 mb-6">Stakeholders - Priority 3</h2>
                            <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 text-center">
                                <i class="fa-solid fa-users text-blue-600 text-4xl mb-3"></i>
                                <h3 class="text-lg font-semibold text-gray-900 mb-2">Coming Soon</h3>
                                <p class="text-gray-600">Full stakeholder management with org charts and contact details.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- HISTORY TAB -->
                <div id="tab-content-history" class="deal-tab-content" style="display: none;">
                    <div class="p-8 space-y-6">
                        <div class="bg-white rounded-lg border border-gray-200 p-6">
                            <h2 class="text-2xl font-bold text-gray-900 mb-6">Deal History - Priority 3</h2>
                            <div class="bg-purple-50 border border-purple-200 rounded-lg p-6 text-center">
                                <i class="fa-solid fa-clock-rotate-left text-purple-600 text-4xl mb-3"></i>
                                <h3 class="text-lg font-semibold text-gray-900 mb-2">Coming Soon</h3>
                                <p class="text-gray-600">Complete audit trail with timeline view and version history.</p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div><!-- Notification Detail Drawer -->
    <div id="notification-detail-drawer" class="fixed inset-y-0 right-0 w-1/2 bg-white shadow-2xl transform translate-x-full transition-transform duration-300 z-[60] border-l border-stone overflow-y-auto">
        <div class="h-full flex flex-col">
            <!-- Drawer Header -->
            <div class="px-6 py-4 border-b border-stone flex justify-between items-center bg-white sticky top-0 z-10">
                <div>
                    <h2 class="text-xl font-semibold text-slate" id="notification-drawer-title">Notification Details</h2>
                    <p class="text-sm text-concrete" id="notification-drawer-time"></p>
                </div>
                <button id="close-notification-drawer" class="text-concrete hover:text-slate">
                    <i class="fa-solid fa-times text-xl"></i>
                </button>
            </div>
            
            <!-- Drawer Content -->
            <div class="flex-1 overflow-y-auto p-6">
                <div class="space-y-6">
                    <!-- Notification Header Info -->
                    <div class="flex items-start justify-between">
                        <div class="flex-1">
                            <div class="flex items-center space-x-2 mb-3">
                                <span id="notification-drawer-severity-badge" class="text-xs px-2 py-1 rounded"></span>
                                <span id="notification-drawer-category-badge" class="text-xs bg-stone text-slate px-2 py-1 rounded"></span>
                            </div>
                            <h3 class="text-lg font-semibold text-slate mb-2" id="notification-drawer-subtitle"></h3>
                        </div>
                        <button id="mark-notification-read-btn" class="text-sm text-info hover:text-opacity-80">
                            <i class="fa-solid fa-check mr-1"></i>
                            Mark as Read
                        </button>
                    </div>

                    <!-- Notification Description -->
                    <div class="bg-stone bg-opacity-30 rounded-lg p-4">
                        <p class="text-slate" id="notification-drawer-description"></p>
                    </div>

                    <!-- Metadata -->
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-medium text-concrete mb-1">Owner</label>
                            <p class="text-sm text-slate" id="notification-drawer-owner"></p>
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-concrete mb-1">Source</label>
                            <p class="text-sm text-slate" id="notification-drawer-source"></p>
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-concrete mb-1">Related Item</label>
                            <p class="text-sm text-slate" id="notification-drawer-related"></p>
                        </div>
                        <div>
                            <label class="block text-xs font-medium text-concrete mb-1">Status</label>
                            <p class="text-sm text-slate" id="notification-drawer-status"></p>
                        </div>
                    </div>

                    <!-- Actions Section -->
                    <div>
                        <h4 class="text-sm font-semibold text-slate mb-3">Quick Actions</h4>
                        <div id="notification-drawer-actions" class="space-y-2">
                            <!-- Actions will be populated dynamically -->
                        </div>
                    </div>

                    <!-- Related Notifications -->
                    <div>
                        <h4 class="text-sm font-semibold text-slate mb-3">Related Notifications</h4>
                        <div id="notification-drawer-related-list" class="space-y-2">
                            <p class="text-sm text-concrete">No related notifications</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Drawer Footer -->
            <div class="px-6 py-4 border-t border-stone bg-stone bg-opacity-30">
                <div class="flex items-center justify-between">
                    <button id="delete-notification-btn" class="text-sm text-danger hover:text-opacity-80">
                        <i class="fa-solid fa-trash mr-1"></i>
                        Delete Notification
                    </button>
                    <button id="close-notification-drawer-btn" class="px-4 py-2 border border-stone text-concrete rounded-lg hover:bg-stone transition-colors">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Navigation Drawer -->
    <div id="mobile-nav-drawer" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-slate bg-opacity-50" id="mobile-nav-overlay"></div>
        <div class="absolute left-0 top-0 h-full w-80 bg-white transform -translate-x-full transition-transform" id="mobile-drawer">
            <div class="p-25 border-b border-stone">
                <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-slate rounded-lg flex items-center justify-center">
                            <i class="fa-solid fa-cube text-white text-lg"></i>
                        </div>
                        <div>
                            <h1 class="text-xl font-semibold text-slate tracking-tight">UNION Core Plus</h1>
                            <p class="text-xs text-concrete">Built for the Best</p>
                        </div>
                    </div>
                    <button id="close-mobile-nav" class="text-concrete hover:text-slate">
                        <i class="fa-solid fa-times text-xl"></i>
                    </button>
                </div>
                <div class="bg-stone rounded-lg p-4">
                    <div class="flex items-center space-x-3">
                        <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="Executive" class="w-8 h-8 rounded-full">
                        <div>
                            <p class="text-sm font-semibold text-slate">Executive</p>
                            <p class="text-xs text-concrete">Portfolio Navigator</p>
                        </div>
                    </div>
                </div>
            </div>
            <nav class="flex-1 p-25 space-y-6 overflow-y-auto h-full">
                <div>
                    <h3 class="text-xs font-semibold text-concrete uppercase tracking-wide mb-3">Overview</h3>
                    <div class="space-y-2">
                        <span class="flex items-center px-4 py-4 text-slate bg-stone rounded-lg font-medium touch-manipulation cursor-pointer">
                            <i class="fa-solid fa-chart-line mr-4 w-5 text-lg"></i>
                            <span>Dashboard</span>
                            <span class="ml-auto text-xs bg-info bg-opacity-20 text-info px-2 py-1 rounded-full">Live</span>
                        </span>
                        <span class="flex items-center px-4 py-4 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors touch-manipulation cursor-pointer">
                            <i class="fa-solid fa-search mr-4 w-5 text-lg"></i>
                            <span>Global Search</span>
                        </span>
                        <span class="flex items-center px-4 py-4 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors touch-manipulation cursor-pointer">
                            <i class="fa-regular fa-bell mr-4 w-5 text-lg"></i>
                            <span>Notifications</span>
                            <span class="ml-auto w-3 h-3 bg-danger rounded-full"></span>
                        </span>
                    </div>
                </div>
                <div>
                    <h3 class="text-xs font-semibold text-concrete uppercase tracking-wide mb-3">Origination</h3>
                    <div class="space-y-2">
                        <span id="nav-pipeline-mobile" class="flex items-center px-4 py-4 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors touch-manipulation cursor-pointer">
                            <i class="fa-solid fa-building mr-4 w-5 text-lg"></i>
                            <span>Pipeline</span>
                            <span class="ml-auto text-xs bg-slate bg-opacity-10 text-slate px-2 py-1 rounded-full">247</span>
                        </span>
                        <span class="flex items-center px-4 py-4 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors touch-manipulation cursor-pointer">
                            <i class="fa-solid fa-database mr-4 w-5 text-lg"></i>
                            <span>Property Index</span>
                        </span>
                        <span class="flex items-center px-4 py-4 text-concrete hover:text-slate hover:bg-stone rounded-lg transition-colors touch-manipulation cursor-pointer">
                            <i class="fa-solid fa-calendar-alt mr-4 w-5 text-lg"></i>
                            <span>Viewing Scheduler</span>
                            <span class="ml-auto text-xs bg-warning bg-opacity-20 text-warning px-2 py-1 rounded-full">12</span>
                        </span>
                    </div>
                </div>
            </nav>
        </div>
    </div>

    <!-- Notifications Panel -->
    <div id="notifications-panel" class="fixed right-0 top-0 h-full w-96 bg-white shadow-2xl transform translate-x-full transition-transform duration-300 z-50">
        <div class="p-6 border-b border-stone">
            <div class="flex items-center justify-between">
                <h2 class="text-lg font-semibold text-slate">Notifications</h2>
                <button id="close-notifications" class="text-concrete hover:text-slate">
                    <i class="fa-solid fa-times"></i>
                </button>
            </div>
        </div>
        <div class="p-6 space-y-4 h-full overflow-y-auto">
            <div class="flex items-start space-x-3 p-3 bg-danger bg-opacity-5 rounded-lg">
                <div class="w-2 h-2 bg-danger rounded-full mt-2"></div>
                <div class="flex-1">
                    <p class="text-sm font-medium text-slate">SLA Breach Alert</p>
                    <p class="text-xs text-concrete">Canary Wharf Tower 42 - HoT approval overdue</p>
                    <p class="text-xs text-concrete mt-1">3 minutes ago</p>
                </div>
            </div>
            <div class="flex items-start space-x-3 p-3 bg-warning bg-opacity-5 rounded-lg">
                <div class="w-2 h-2 bg-warning rounded-full mt-2"></div>
                <div class="flex-1">
                    <p class="text-sm font-medium text-slate">Onboarding Delayed</p>
                    <p class="text-xs text-concrete">The Shard Office Suite - Vendor response pending</p>
                    <p class="text-xs text-concrete mt-1">15 minutes ago</p>
                </div>
            </div>
            <div class="flex items-start space-x-3 p-3 bg-success bg-opacity-5 rounded-lg">
                <div class="w-2 h-2 bg-success rounded-full mt-2"></div>
                <div class="flex-1">
                    <p class="text-sm font-medium text-slate">Deal Approved</p>
                    <p class="text-xs text-concrete">King's Cross Central - HoT signed successfully</p>
                    <p class="text-xs text-concrete mt-1">1 hour ago</p>
                </div>
            </div>
        </div>
    </div>

    <!-- INTERVENTION DRAWER -->
    <div id="intervention-drawer" class="fixed right-0 top-0 h-full w-[500px] bg-white shadow-2xl transform translate-x-full transition-transform duration-300 z-[60]">
        <!-- Header -->
        <div class="p-6 border-b border-stone">
            <div class="flex items-center justify-between">
                <h2 class="text-xl font-semibold text-slate">Create Intervention</h2>
                <button id="close-intervention-drawer" class="text-concrete hover:text-slate">
                    <i class="fa-solid fa-times text-xl"></i>
                </button>
            </div>
        </div>

        <!-- Form -->
        <div class="p-6 overflow-y-auto h-[calc(100%-180px)]">
            <form id="intervention-form" class="space-y-6">
                <!-- Auto-populated Context -->
                <div class="bg-stone bg-opacity-50 rounded-lg p-4 space-y-3">
                    <div>
                        <label class="text-xs font-medium text-concrete uppercase tracking-wide">Context</label>
                        <p class="text-sm text-slate mt-1" id="intervention-context">General intervention</p>
                    </div>
                    <div>
                        <label class="text-xs font-medium text-concrete uppercase tracking-wide">Linked Deals</label>
                        <p class="text-sm text-slate mt-1" id="intervention-deals">N/A</p>
                    </div>
                </div>

                <!-- Owner -->
                <div>
                    <label class="block text-sm font-medium text-slate mb-2">Owner</label>
                    <select id="intervention-owner" class="w-full bg-stone border-0 rounded-lg px-4 py-3 text-slate focus:outline-none focus:ring-2 focus:ring-slate">
                        <option value="Max">Max</option>
                        <option value="Tom">Tom</option>
                        <option value="Dani">Dani</option>
                        <option value="Executive">Executive</option>
                    </select>
                </div>

                <!-- Priority -->
                <div>
                    <label class="block text-sm font-medium text-slate mb-2">Priority</label>
                    <div class="flex space-x-3">
                        <label class="flex-1">
                            <input type="radio" name="priority" value="High" class="hidden peer">
                            <div class="px-4 py-3 bg-stone rounded-lg text-center cursor-pointer peer-checked:bg-danger peer-checked:text-white transition-colors">
                                High
                            </div>
                        </label>
                        <label class="flex-1">
                            <input type="radio" name="priority" value="Medium" checked class="hidden peer">
                            <div class="px-4 py-3 bg-stone rounded-lg text-center cursor-pointer peer-checked:bg-warning peer-checked:text-white transition-colors">
                                Medium
                            </div>
                        </label>
                        <label class="flex-1">
                            <input type="radio" name="priority" value="Low" class="hidden peer">
                            <div class="px-4 py-3 bg-stone rounded-lg text-center cursor-pointer peer-checked:bg-info peer-checked:text-white transition-colors">
                                Low
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Due Date -->
                <div>
                    <label class="block text-sm font-medium text-slate mb-2">Due Date</label>
                    <input type="date" id="intervention-due-date" class="w-full bg-stone border-0 rounded-lg px-4 py-3 text-slate focus:outline-none focus:ring-2 focus:ring-slate">
                </div>

                <!-- Expected Impact -->
                <div>
                    <label class="block text-sm font-medium text-slate mb-2">Expected Impact (100 chars)</label>
                    <input type="text" id="intervention-impact" maxlength="100" placeholder="e.g., Reduce HoT cycle time by 4 days" class="w-full bg-stone border-0 rounded-lg px-4 py-3 text-slate focus:outline-none focus:ring-2 focus:ring-slate">
                    <p class="text-xs text-concrete mt-1"><span id="impact-char-count">0</span>/100</p>
                </div>

                <!-- Notes -->
                <div>
                    <label class="block text-sm font-medium text-slate mb-2">Notes</label>
                    <textarea id="intervention-notes" rows="4" placeholder="Additional context or action plan..." class="w-full bg-stone border-0 rounded-lg px-4 py-3 text-slate focus:outline-none focus:ring-2 focus:ring-slate resize-none"></textarea>
                </div>
            </form>
        </div>

        <!-- Footer Actions -->
        <div class="absolute bottom-0 left-0 right-0 p-6 border-t border-stone bg-white">
            <div class="flex space-x-3">
                <button id="create-intervention-btn" class="flex-1 bg-slate text-white px-6 py-3 rounded-lg font-medium hover:bg-opacity-90 transition-colors">
                    Create Intervention
                </button>
                <button id="cancel-intervention-btn" class="px-6 py-3 bg-stone text-slate rounded-lg font-medium hover:bg-opacity-80 transition-colors">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Intervention Detail/Edit Drawer -->
    <div id="intervention-detail-drawer" class="fixed inset-y-0 right-0 w-1/2 bg-white shadow-2xl transform translate-x-full transition-transform duration-300 z-[60] border-l border-stone overflow-y-auto">
        <div class="h-full flex flex-col">
            <!-- Drawer Header -->
            <div class="px-6 py-4 border-b border-stone flex justify-between items-center bg-white sticky top-0 z-10">
                <div>
                    <h2 class="text-xl font-semibold text-slate haltung-semibold">Intervention Details</h2>
                    <p class="text-sm text-concrete" id="detail-intervention-id">INT-0041</p>
                </div>
                <button id="close-detail-drawer" class="text-concrete hover:text-slate">
                    <i class="fa-solid fa-times text-xl"></i>
                </button>
            </div>
            
            <!-- Drawer Content -->
            <div class="flex-1 overflow-y-auto p-6">
                <div class="space-y-6">
                    <!-- Status Banner (for closed interventions) -->
                    <div id="closed-banner" class="hidden bg-success bg-opacity-10 border border-success rounded-lg p-4 flex items-center">
                        <i class="fa-solid fa-check-circle text-success text-xl mr-3"></i>
                        <div class="flex-1">
                            <div class="text-sm font-medium text-success">This intervention has been closed</div>
                            <div class="text-xs text-success mt-1" id="closed-date">Closed on Oct 4, 2024</div>
                        </div>
                    </div>

                    <!-- Basic Information -->
                    <div class="bg-stone rounded-lg p-4">
                        <h3 class="text-lg font-semibold text-slate mb-4">Basic Information</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-concrete mb-1">Created By</label>
                                <div class="flex items-center">
                                    <div class="w-6 h-6 bg-slate rounded-full flex items-center justify-center text-white text-xs mr-2" id="detail-creator-avatar">E</div>
                                    <span class="text-sm text-slate" id="detail-created-by">Executive</span>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-concrete mb-1">Created Date</label>
                                <div class="text-sm text-slate" id="detail-created-date">Oct 5, 2024 9:15 AM</div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-concrete mb-2">Owner</label>
                                <select id="detail-owner" class="w-full px-3 py-2 border border-stone rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-slate bg-white">
                                    <option value="Tom">Tom</option>
                                    <option value="Max">Max</option>
                                    <option value="Dani">Dani</option>
                                    <option value="Executive">Executive</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-concrete mb-2">Status</label>
                                <select id="detail-status" class="w-full px-3 py-2 border border-stone rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-slate bg-white">
                                    <option value="Open">Open</option>
                                    <option value="In Progress">In Progress</option>
                                    <option value="Closed">Closed</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-concrete mb-1">Stage</label>
                                <div class="text-sm text-slate" id="detail-stage">At-Risk Deal</div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-concrete mb-1">Linked Deals</label>
                                <div class="text-sm text-info font-medium" id="detail-linked-deals">D-2024-089</div>
                            </div>
                        </div>
                    </div>

                    <!-- Priority & Due Date -->
                    <div class="bg-stone rounded-lg p-4">
                        <h3 class="text-lg font-semibold text-slate mb-4">Priority & Timeline</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-concrete mb-2">Priority</label>
                                <div class="space-y-2">
                                    <label class="flex items-center cursor-pointer">
                                        <input type="radio" name="detail-priority" value="High" class="w-4 h-4 text-danger focus:ring-danger">
                                        <span class="ml-2 text-sm text-slate">High</span>
                                        <span class="ml-2 px-2 py-0.5 bg-danger bg-opacity-10 text-danger text-xs rounded-full">Critical</span>
                                    </label>
                                    <label class="flex items-center cursor-pointer">
                                        <input type="radio" name="detail-priority" value="Medium" class="w-4 h-4 text-warning focus:ring-warning">
                                        <span class="ml-2 text-sm text-slate">Medium</span>
                                        <span class="ml-2 px-2 py-0.5 bg-warning bg-opacity-10 text-warning text-xs rounded-full">Important</span>
                                    </label>
                                    <label class="flex items-center cursor-pointer">
                                        <input type="radio" name="detail-priority" value="Low" class="w-4 h-4 text-info focus:ring-info">
                                        <span class="ml-2 text-sm text-slate">Low</span>
                                        <span class="ml-2 px-2 py-0.5 bg-info bg-opacity-10 text-info text-xs rounded-full">Routine</span>
                                    </label>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-concrete mb-2">Due Date</label>
                                <input type="date" id="detail-due-date" class="w-full px-3 py-2 border border-stone rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-slate">
                                <div class="mt-2 text-xs text-concrete" id="detail-days-remaining">3 days remaining</div>
                            </div>
                        </div>
                    </div>

                    <!-- Context & Impact -->
                    <div class="bg-stone rounded-lg p-4">
                        <h3 class="text-lg font-semibold text-slate mb-4">Context & Expected Impact</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-concrete mb-2">Context</label>
                                <div class="text-sm text-slate p-3 bg-white rounded border border-stone" id="detail-context">
                                    Canary Wharf Tower 42 - HoT approval overdue by 8 days
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-concrete mb-2">Expected Impact</label>
                                <textarea id="detail-expected-impact" rows="3" class="w-full bg-white border border-stone rounded-lg px-4 py-3 text-slate focus:outline-none focus:ring-2 focus:ring-slate resize-none text-sm"></textarea>
                                <div class="text-xs text-concrete text-right mt-1">
                                    <span id="detail-impact-char-count">0</span>/100
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-concrete mb-2">Notes</label>
                                <textarea id="detail-notes" rows="4" class="w-full bg-white border border-stone rounded-lg px-4 py-3 text-slate focus:outline-none focus:ring-2 focus:ring-slate resize-none text-sm"></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- Outcome (visible when status is Closed) -->
                    <div id="outcome-section" class="bg-stone rounded-lg p-4 hidden">
                        <h3 class="text-lg font-semibold text-slate mb-4">Outcome</h3>
                        <div>
                            <label class="block text-sm font-medium text-concrete mb-2">Resolution Summary</label>
                            <textarea id="detail-outcome" rows="4" class="w-full bg-white border border-stone rounded-lg px-4 py-3 text-slate focus:outline-none focus:ring-2 focus:ring-slate resize-none text-sm" placeholder="Describe what was accomplished and the final outcome..."></textarea>
                        </div>
                    </div>

                    <!-- Audit Trail -->
                    <div class="bg-stone rounded-lg p-4">
                        <h3 class="text-lg font-semibold text-slate mb-4">Audit Trail</h3>
                        <div class="space-y-3" id="audit-trail">
                            <!-- Audit entries will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Drawer Footer -->
            <div class="px-6 py-4 border-t border-stone flex justify-between bg-white sticky bottom-0">
                <div class="flex space-x-3">
                    <button id="delete-intervention-btn" class="px-4 py-2 border border-danger text-danger rounded-lg hover:bg-danger hover:bg-opacity-10">
                        <i class="fa-solid fa-trash mr-2"></i>Delete
                    </button>
                </div>
                <div class="flex space-x-3">
                    <button id="cancel-detail-btn" class="px-4 py-2 border border-stone text-slate rounded-lg hover:bg-stone">
                        Cancel
                    </button>
                    <button id="close-intervention-btn" class="px-4 py-2 bg-success text-white rounded-lg hover:bg-opacity-90 hidden">
                        <i class="fa-solid fa-check mr-2"></i>Close Intervention
                    </button>
                    <button id="save-intervention-btn" class="px-4 py-2 bg-slate text-white rounded-lg hover:bg-opacity-90">
                        <i class="fa-solid fa-save mr-2"></i>Save Changes
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay for detail drawer -->
    <div id="detail-drawer-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-[55] hidden"></div>

    <!-- Toast Notification -->
    <div id="toast-notification" class="fixed top-6 right-6 bg-success text-white px-6 py-4 rounded-lg shadow-lg transform translate-x-[calc(100%+24px)] transition-transform duration-300 z-[70] flex items-center space-x-3">
        <i class="fa-solid fa-check-circle text-xl"></i>
        <span id="toast-message">Action completed successfully</span>
    </div>

            <!-- CREATE COMPANY MODAL -->
            <div id="create-company-modal" class="fixed inset-0 bg-slate bg-opacity-50 z-50 hidden flex items-center justify-center">
                <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4">
                    <!-- Modal Header -->
                    <div class="flex items-center justify-between p-6 border-b border-stone">
                        <div>
                            <h2 class="text-xl font-semibold text-slate">Create New Company</h2>
                            <p class="text-sm text-concrete mt-1">Add a new company to the system</p>
                        </div>
                        <button id="close-company-modal" class="text-concrete hover:text-slate transition-colors">
                            <i class="fa-solid fa-times text-xl"></i>
                        </button>
                    </div>
                    
                    <!-- Modal Body -->
                    <div class="p-6">
                        <form id="create-company-form" class="space-y-4">
                            <div class="grid grid-cols-2 gap-4">
                                <div class="col-span-2">
                                    <label class="block text-sm font-medium text-slate mb-2">Company Name <span class="text-danger">*</span></label>
                                    <input type="text" id="company-name" required class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="e.g., British Land">
                                </div>
                                
                                <div class="col-span-2">
                                    <label class="block text-sm font-medium text-slate mb-2">Company Type <span class="text-danger">*</span></label>
                                    <select id="company-type" required class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate">
                                        <option value="">Select type</option>
                                        <option value="Landlord">Landlord</option>
                                        <option value="Disposal Agent">Disposal Agent</option>
                                        <option value="Broker">Broker</option>
                                        <option value="Tenant">Tenant</option>
                                        <option value="Service Provider">Service Provider</option>
                                        <option value="Partner">Partner</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-slate mb-2">Registration Number</label>
                                    <input type="text" id="company-registration" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="e.g., 12345678">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-slate mb-2">VAT Number</label>
                                    <input type="text" id="company-vat" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="e.g., GB123456789">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-slate mb-2">Website</label>
                                    <input type="url" id="company-website" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="e.g., https://example.com">
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-slate mb-2">Main Phone</label>
                                    <input type="tel" id="company-phone" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="e.g., +44 20 1234 5678">
                                </div>
                                
                                <div class="col-span-2">
                                    <label class="block text-sm font-medium text-slate mb-2">Address</label>
                                    <textarea id="company-address" rows="2" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="Full company address"></textarea>
                                </div>
                                
                                <div class="col-span-2">
                                    <label class="block text-sm font-medium text-slate mb-2">Notes</label>
                                    <textarea id="company-notes" rows="2" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="Additional notes about this company"></textarea>
                                </div>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Modal Footer -->
                    <div class="flex items-center justify-end space-x-3 p-6 border-t border-stone">
                        <button id="cancel-company-btn" class="px-4 py-2 border border-stone text-concrete rounded-lg hover:bg-stone transition-colors">
                            Cancel
                        </button>
                        <button id="save-company-btn" class="px-4 py-2 bg-slate text-white rounded-lg hover:bg-opacity-90 transition-colors">
                            <i class="fa-solid fa-save mr-2"></i>Create Company
                        </button>
                    </div>
                </div>
            </div>
            <!-- END CREATE COMPANY MODAL -->


            <!-- ADD UNIT DRAWER -->
            <div id="add-unit-drawer" class="fixed inset-y-0 right-0 w-full max-w-2xl bg-white shadow-2xl transform translate-x-full transition-transform duration-300 ease-in-out z-50 overflow-y-auto">
                <!-- Drawer Header -->
                <div class="sticky top-0 bg-white border-b border-stone p-6 z-10">
                    <div class="flex items-center justify-between">
                        <div>
                            <h2 class="text-xl font-semibold text-slate">Add Unit</h2>
                            <p class="text-sm text-concrete mt-1" id="add-unit-property-name">to Property</p>
                        </div>
                        <button id="close-unit-drawer" class="text-concrete hover:text-slate transition-colors">
                            <i class="fa-solid fa-times text-xl"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Drawer Body -->
                <div class="p-6">
                    <form id="add-unit-form" class="space-y-6">
                        <!-- Unit Basics -->
                        <div class="bg-stone bg-opacity-30 rounded-lg p-6">
                            <h3 class="text-lg font-semibold text-slate mb-4">Unit Basics</h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-slate mb-2">Unit Name/Label <span class="text-danger">*</span></label>
                                    <input type="text" id="unit-name" required class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="e.g., Unit 3A or Ground Floor Suite">
                                </div>
                                
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-slate mb-2">Floor</label>
                                        <input type="text" id="unit-floor" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="e.g., 3rd Floor">
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-slate mb-2">Area (sq ft)</label>
                                        <input type="number" id="unit-sqft" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="e.g., 5000">
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-slate mb-2">Desk Count</label>
                                        <input type="number" id="unit-desk-count" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="e.g., 50">
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-slate mb-2">Meeting Rooms</label>
                                        <input type="number" id="unit-meeting-rooms" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="e.g., 3">
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-slate mb-2">Status</label>
                                    <input type="text" id="unit-status" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="e.g., Available, Under Offer, Let">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Unit Details -->
                        <div class="bg-stone bg-opacity-30 rounded-lg p-6">
                            <h3 class="text-lg font-semibold text-slate mb-4">Unit Details</h3>
                            <div class="space-y-4">
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-slate mb-2">Visibility</label>
                                        <select id="unit-visibility" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate">
                                            <option value="">Select visibility</option>
                                            <option value="Public">Public</option>
                                            <option value="Private">Private</option>
                                        </select>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-slate mb-2">Windows Type</label>
                                        <select id="unit-windows-type" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate">
                                            <option value="">Select type</option>
                                            <option value="Floor to Ceiling">Floor to Ceiling</option>
                                            <option value="Standard">Standard</option>
                                            <option value="None">None</option>
                                            <option value="Skylight">Skylight</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-slate mb-2">HVAC Servicing</label>
                                    <select id="unit-hvac-servicing" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate">
                                        <option value="">Select servicing type</option>
                                        <option value="Landlord">Landlord</option>
                                        <option value="Tenant">Tenant</option>
                                        <option value="Shared">Shared</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-slate mb-2">HVAC Notes</label>
                                    <textarea id="unit-hvac-notes" rows="2" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="Additional HVAC details..."></textarea>
                                </div>
                                
                                <div>
                                    <label class="block text-sm font-medium text-slate mb-2">Figma Asset URL</label>
                                    <input type="url" id="unit-figma-url" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="https://figma.com/...">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Amenities -->
                        <div class="bg-stone bg-opacity-30 rounded-lg p-6">
                            <h3 class="text-lg font-semibold text-slate mb-4">Amenities</h3>
                            <p class="text-sm text-concrete mb-4">Select amenities available in this unit</p>
                            
                            <!-- Amenities Grid -->
                            <div id="amenities-grid" class="grid grid-cols-2 gap-3 max-h-96 overflow-y-auto pr-2">
                                <!-- Amenities will be dynamically inserted here -->
                            </div>
                            
                            <!-- Selected Amenities Details -->
                            <div id="selected-amenities-details" class="mt-6 space-y-4 hidden">
                                <h4 class="text-sm font-semibold text-slate">Selected Amenities Details</h4>
                                <div id="amenity-details-container" class="space-y-3">
                                    <!-- Amenity detail forms will be inserted here -->
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                
                <!-- Drawer Footer -->
                <div class="sticky bottom-0 bg-white border-t border-stone p-6">
                    <div class="flex items-center justify-between">
                        <button id="cancel-unit-btn" class="px-4 py-2 border border-stone text-concrete rounded-lg hover:bg-stone transition-colors">
                            Cancel
                        </button>
                        <div class="flex items-center space-x-3">
                            <button id="save-unit-btn" class="px-4 py-2 bg-concrete text-white rounded-lg hover:bg-opacity-90 transition-colors">
                                <i class="fa-solid fa-save mr-2"></i>Save Unit
                            </button>
                            <button id="save-add-another-unit-btn" class="px-4 py-2 bg-slate text-white rounded-lg hover:bg-opacity-90 transition-colors">
                                <i class="fa-solid fa-plus mr-2"></i>Save & Add Another
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Drawer Overlay -->
            <div id="unit-drawer-overlay" class="fixed inset-0 bg-slate bg-opacity-50 z-40 hidden"></div>
            <!-- END ADD UNIT DRAWER -->


    <script>
        // ========================================
        // PROPERTY MANAGEMENT SYSTEM
        // ========================================
// ============================================================================
// PROPERTY MANAGEMENT SYSTEM - JavaScript Functions
// ============================================================================

// Global state
let uploadedPhotos = [];
let uploadedDocuments = [];
let currentPropertyId = null;
let propertyUnits = [];
let selectedAmenities = new Set();
let companyCreationContext = null; // 'landlord' or 'disposal-agent'

// Amenities list from schema
const AMENITIES_LIST = [
    "24/7 access", "Air conditioning", "Backup internet connection", "Balcony",
    "Brainstorming rooms", "Breakout areas", "Business lounge", "Cafe",
    "Call handling", "Car parking", "CAT 5/6/7 cabling", "CCTV",
    "Changing rooms", "Cleaning", "Coffee", "Conference rooms",
    "Cycle parking", "Wi‑Fi", "DDA compliance", "Disabled access",
    "Dog friendly", "Event space", "Exercise studio", "Filtered water",
    "Fully furnished", "Games lounge", "Gym", "Kitchen",
    "Lift", "Lockers", "Mail handling", "Meeting rooms",
    "Mindfulness rooms", "On‑site barista", "On‑site staff", "Outdoor space",
    "Phone booths", "Printing", "Restaurant", "Restaurant on site",
    "Rooftop terrace", "Secretarial services", "Secure server rooms", "Security guards",
    "Showers", "Single‑sex toilets", "Snacks and refreshments", "Storage",
    "Unisex toilets", "Video conferencing", "VOIP", "Wellness room"
];

// ============================================================================
// INITIALIZATION
// ============================================================================

function initPropertyManagement() {
    console.log('Initializing Property Management System');
    
    // Initialize Add Property form
    initAddPropertyForm();
    
    // Initialize Company Modal
    initCompanyModal();
    
    // Initialize Property Detail page
    initPropertyDetailPage();
    
    // Initialize Add Unit drawer
    initAddUnitDrawer();
}

// ============================================================================
// ADD PROPERTY FORM
// ============================================================================

function initAddPropertyForm() {
    // File uploads
    const photoUploadArea = document.getElementById('photo-upload-area');
    const photoUploadInput = document.getElementById('photo-upload-input');
    const documentUploadArea = document.getElementById('document-upload-area');
    const documentUploadInput = document.getElementById('document-upload-input');
    
    if (photoUploadArea && photoUploadInput) {
        photoUploadArea.addEventListener('click', () => photoUploadInput.click());
        photoUploadInput.addEventListener('change', (e) => handlePhotoUpload(e.target.files));
        
        // Drag and drop
        photoUploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            photoUploadArea.classList.add('border-slate');
        });
        photoUploadArea.addEventListener('dragleave', () => {
            photoUploadArea.classList.remove('border-slate');
        });
        photoUploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            photoUploadArea.classList.remove('border-slate');
            handlePhotoUpload(e.dataTransfer.files);
        });
    }
    
    if (documentUploadArea && documentUploadInput) {
        documentUploadArea.addEventListener('click', () => documentUploadInput.click());
        documentUploadInput.addEventListener('change', (e) => handleDocumentUpload(e.target.files));
        
        // Drag and drop
        documentUploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            documentUploadArea.classList.add('border-slate');
        });
        documentUploadArea.addEventListener('dragleave', () => {
            documentUploadArea.classList.remove('border-slate');
        });
        documentUploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            documentUploadArea.classList.remove('border-slate');
            handleDocumentUpload(e.dataTransfer.files);
        });
    }
    
    // Save button
    const savePropertyBtn = document.getElementById('save-property-btn');
    if (savePropertyBtn) {
        savePropertyBtn.addEventListener('click', (e) => {
            e.preventDefault();
            saveProperty();
        });
    }
    
    // Cancel button
    const cancelPropertyBtn = document.getElementById('cancel-property-btn');
    if (cancelPropertyBtn) {
        cancelPropertyBtn.addEventListener('click', () => {
            if (confirm('Are you sure you want to cancel? Any unsaved changes will be lost.')) {
                resetPropertyForm();
                navigateToPage('property-index');
            }
        });
    }
    
    // Company creation buttons
    const addLandlordBtn = document.getElementById('add-landlord-btn');
    const addDisposalAgentBtn = document.getElementById('add-disposal-agent-btn');
    
    if (addLandlordBtn) {
        addLandlordBtn.addEventListener('click', (e) => {
            e.preventDefault();
            openCompanyModal('landlord');
        });
    }
    
    if (addDisposalAgentBtn) {
        addDisposalAgentBtn.addEventListener('click', (e) => {
            e.preventDefault();
            openCompanyModal('disposal-agent');
        });
    }
}

function handlePhotoUpload(files) {
    Array.from(files).forEach(file => {
        if (!file.type.match('image.*')) {
            showToast('Please upload only image files (JPG, PNG)', 'error');
            return;
        }
        
        if (file.size > 5 * 1024 * 1024) {
            showToast(`${file.name} is too large. Max size is 5MB`, 'error');
            return;
        }
        
        const reader = new FileReader();
        reader.onload = (e) => {
            const photoId = Date.now() + Math.random();
            uploadedPhotos.push({
                id: photoId,
                file: file,
                url: e.target.result
            });
            renderPhotoPreview();
        };
        reader.readAsDataURL(file);
    });
}

function renderPhotoPreview() {
    const previewGrid = document.getElementById('photo-preview-grid');
    if (!previewGrid) return;
    
    previewGrid.innerHTML = uploadedPhotos.map(photo => `
        <div class="relative group">
            <img src="${photo.url}" class="w-full h-32 object-cover rounded-lg border border-stone">
            <button onclick="removePhoto(${photo.id})" class="absolute top-2 right-2 w-8 h-8 bg-danger text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity">
                <i class="fa-solid fa-times"></i>
            </button>
            <p class="text-xs text-concrete mt-1 truncate">${photo.file.name}</p>
        </div>
    `).join('');
}

function removePhoto(photoId) {
    uploadedPhotos = uploadedPhotos.filter(p => p.id !== photoId);
    renderPhotoPreview();
}

function handleDocumentUpload(files) {
    Array.from(files).forEach(file => {
        if (file.size > 10 * 1024 * 1024) {
            showToast(`${file.name} is too large. Max size is 10MB`, 'error');
            return;
        }
        
        const docId = Date.now() + Math.random();
        uploadedDocuments.push({
            id: docId,
            file: file
        });
        renderDocumentList();
    });
}

function renderDocumentList() {
    const documentList = document.getElementById('document-list');
    if (!documentList) return;
    
    documentList.innerHTML = uploadedDocuments.map(doc => `
        <div class="flex items-center justify-between p-3 bg-stone bg-opacity-30 rounded-lg">
            <div class="flex items-center space-x-3">
                <i class="fa-solid fa-file text-concrete"></i>
                <div>
                    <p class="text-sm text-slate font-medium">${doc.file.name}</p>
                    <p class="text-xs text-concrete">${(doc.file.size / 1024).toFixed(1)} KB</p>
                </div>
            </div>
            <button onclick="removeDocument(${doc.id})" class="text-danger hover:text-opacity-80">
                <i class="fa-solid fa-trash"></i>
            </button>
        </div>
    `).join('');
}

function removeDocument(docId) {
    uploadedDocuments = uploadedDocuments.filter(d => d.id !== docId);
    renderDocumentList();
}

function saveProperty() {
    // Validate required fields
    const name = document.getElementById('property-name').value.trim();
    const address = document.getElementById('property-address').value.trim();
    
    if (!name || !address) {
        showToast('Please fill in all required fields (Name and Address)', 'error');
        return;
    }
    
    // Collect form data
    const propertyData = {
        property_id: 'PROP-' + Date.now(),
        name: name,
        address: address,
        postcode: document.getElementById('property-postcode').value.trim(),
        latitude: document.getElementById('property-latitude').value,
        longitude: document.getElementById('property-longitude').value,
        epc_rating: document.getElementById('property-epc').value,
        valve_visibility: document.getElementById('property-valve-visibility').value,
        availability_date: document.getElementById('property-availability-date').value,
        property_notes: document.getElementById('property-notes').value.trim(),
        landlord_company_id: document.getElementById('property-landlord').value,
        disposal_agent_company_id: document.getElementById('property-disposal-agent').value,
        property_HVAC_servicing: document.getElementById('property-hvac-servicing').value,
        photos: uploadedPhotos.map(p => p.url),
        documents: uploadedDocuments.map(d => d.file.name),
        created_at: new Date().toISOString(),
        updated_at: new Date().toISOString()
    };
    
    // Save to localStorage (simulating backend)
    let properties = JSON.parse(localStorage.getItem('properties') || '[]');
    properties.push(propertyData);
    localStorage.setItem('properties', JSON.stringify(properties));
    
    // Track analytics
    emitEvent('property_created', {
        property_id: propertyData.property_id,
        property_name: propertyData.name,
        has_photos: uploadedPhotos.length > 0,
        has_documents: uploadedDocuments.length > 0
    });
    
    showToast('Property created successfully!', 'success');
    
    // Reset form
    resetPropertyForm();
    
    // Navigate to property detail page
    setTimeout(() => {
        viewPropertyDetail(propertyData.property_id);
    }, 1000);
}

function resetPropertyForm() {
    document.getElementById('add-property-form').reset();
    uploadedPhotos = [];
    uploadedDocuments = [];
    renderPhotoPreview();
    renderDocumentList();
}

// ============================================================================
// COMPANY MODAL
// ============================================================================

function initCompanyModal() {
    const closeBtn = document.getElementById('close-company-modal');
    const cancelBtn = document.getElementById('cancel-company-btn');
    const saveBtn = document.getElementById('save-company-btn');
    
    if (closeBtn) closeBtn.addEventListener('click', closeCompanyModal);
    if (cancelBtn) cancelBtn.addEventListener('click', closeCompanyModal);
    if (saveBtn) saveBtn.addEventListener('click', saveCompany);
}

function openCompanyModal(context) {
    companyCreationContext = context;
    const modal = document.getElementById('create-company-modal');
    if (modal) {
        modal.classList.remove('hidden');
        document.getElementById('company-name').focus();
    }
}

function closeCompanyModal() {
    const modal = document.getElementById('create-company-modal');
    if (modal) {
        modal.classList.add('hidden');
        document.getElementById('create-company-form').reset();
    }
}

function saveCompany() {
    const name = document.getElementById('company-name').value.trim();
    const type = document.getElementById('company-type').value;
    
    if (!name || !type) {
        showToast('Please fill in company name and type', 'error');
        return;
    }
    
    // Create company data
    const companyData = {
        company_id: 'COMP-' + Date.now(),
        name: name,
        company_type: type,
        registration_number: document.getElementById('company-registration').value.trim(),
        vat_number: document.getElementById('company-vat').value.trim(),
        website: document.getElementById('company-website').value.trim(),
        phone: document.getElementById('company-phone').value.trim(),
        address: document.getElementById('company-address').value.trim(),
        company_notes: document.getElementById('company-notes').value.trim(),
        created_at: new Date().toISOString()
    };
    
    // Save to localStorage
    let companies = JSON.parse(localStorage.getItem('companies') || '[]');
    companies.push(companyData);
    localStorage.setItem('companies', JSON.stringify(companies));
    
    // Add to appropriate dropdown
    const selectId = companyCreationContext === 'landlord' ? 'property-landlord' : 'property-disposal-agent';
    const select = document.getElementById(selectId);
    if (select) {
        const option = document.createElement('option');
        option.value = companyData.company_id;
        option.textContent = companyData.name;
        select.appendChild(option);
        select.value = companyData.company_id;
    }
    
    showToast(`Company "${name}" created successfully!`, 'success');
    closeCompanyModal();
}

// ============================================================================
// PROPERTY DETAIL PAGE
// ============================================================================

function initPropertyDetailPage() {
    const editBtn = document.getElementById('edit-property-btn');
    const addUnitBtn = document.getElementById('add-unit-btn');
    
    if (editBtn) {
        editBtn.addEventListener('click', () => {
            showToast('Edit functionality coming soon', 'info');
        });
    }
    
    if (addUnitBtn) {
        addUnitBtn.addEventListener('click', () => {
            openAddUnitDrawer();
        });
    }
}

function viewPropertyDetail(propertyId) {
    currentPropertyId = propertyId;
    
    // Load property data
    const properties = JSON.parse(localStorage.getItem('properties') || '[]');
    const property = properties.find(p => p.property_id === propertyId);
    
    if (!property) {
        showToast('Property not found', 'error');
        navigateToPage('property-index');
        return;
    }
    
    // Load units for this property
    const allUnits = JSON.parse(localStorage.getItem('property_units') || '[]');
    propertyUnits = allUnits.filter(u => u.property_id === propertyId);
    
    // Populate property details
    document.getElementById('property-detail-name').textContent = property.name;
    document.getElementById('property-detail-address').textContent = property.address;
    document.getElementById('property-detail-breadcrumb').textContent = property.name;
    document.getElementById('property-detail-id').textContent = property.property_id;
    document.getElementById('property-detail-units-count').textContent = propertyUnits.length;
    document.getElementById('property-detail-created').textContent = new Date(property.created_at).toLocaleDateString();
    
    document.getElementById('property-detail-postcode').textContent = property.postcode || '-';
    document.getElementById('property-detail-epc').textContent = property.epc_rating || '-';
    document.getElementById('property-detail-visibility').textContent = property.valve_visibility || '-';
    document.getElementById('property-detail-availability').textContent = property.availability_date ? new Date(property.availability_date).toLocaleDateString() : '-';
    document.getElementById('property-detail-landlord').textContent = getLandlordName(property.landlord_company_id);
    document.getElementById('property-detail-disposal').textContent = getDisposalAgentName(property.disposal_agent_company_id);
    document.getElementById('property-detail-hvac').textContent = property.property_HVAC_servicing || '-';
    document.getElementById('property-detail-location').textContent = (property.latitude && property.longitude) ? `${property.latitude}, ${property.longitude}` : '-';
    document.getElementById('property-detail-notes').textContent = property.property_notes || '-';
    
    // Render units list
    renderUnitsList();
    
    // Navigate to page
    navigateToPage('property-detail');
}

function getLandlordName(companyId) {
    if (!companyId) return '-';
    const companies = JSON.parse(localStorage.getItem('companies') || '[]');
    const company = companies.find(c => c.company_id === companyId);
    return company ? company.name : companyId;
}

function getDisposalAgentName(companyId) {
    if (!companyId) return '-';
    const companies = JSON.parse(localStorage.getItem('companies') || '[]');
    const company = companies.find(c => c.company_id === companyId);
    return company ? company.name : companyId;
}

function renderUnitsList() {
    const emptyState = document.getElementById('units-empty-state');
    const tableContainer = document.getElementById('units-table-container');
    const tableBody = document.getElementById('units-table-body');
    
    if (propertyUnits.length === 0) {
        emptyState.classList.remove('hidden');
        tableContainer.classList.add('hidden');
    } else {
        emptyState.classList.add('hidden');
        tableContainer.classList.remove('hidden');
        
        tableBody.innerHTML = propertyUnits.map(unit => `
            <tr class="border-b border-stone hover:bg-stone hover:bg-opacity-30 transition-colors">
                <td class="py-3 px-4 text-sm text-slate font-medium">${unit.unit_name}</td>
                <td class="py-3 px-4 text-sm text-concrete">${unit.floor || '-'}</td>
                <td class="py-3 px-4 text-sm text-concrete">${unit.sqft || '-'}</td>
                <td class="py-3 px-4 text-sm text-concrete">${unit.desk_count || '-'}</td>
                <td class="py-3 px-4 text-sm text-concrete">${unit.status || '-'}</td>
                <td class="py-3 px-4 text-sm text-concrete">${unit.visibility || '-'}</td>
                <td class="py-3 px-4 text-sm text-right">
                    <button onclick="editUnit('${unit.unit_id}')" class="text-slate hover:underline mr-3">
                        <i class="fa-solid fa-edit"></i>
                    </button>
                    <button onclick="deleteUnit('${unit.unit_id}')" class="text-danger hover:underline">
                        <i class="fa-solid fa-trash"></i>
                    </button>
                </td>
            </tr>
        `).join('');
    }
}

function editUnit(unitId) {
    showToast('Edit unit functionality coming soon', 'info');
}

function deleteUnit(unitId) {
    if (!confirm('Are you sure you want to delete this unit?')) return;
    
    let allUnits = JSON.parse(localStorage.getItem('property_units') || '[]');
    allUnits = allUnits.filter(u => u.unit_id !== unitId);
    localStorage.setItem('property_units', JSON.stringify(allUnits));
    
    propertyUnits = allUnits.filter(u => u.property_id === currentPropertyId);
    renderUnitsList();
    
    // Update count
    document.getElementById('property-detail-units-count').textContent = propertyUnits.length;
    
    showToast('Unit deleted successfully', 'success');
}

// ============================================================================
// ADD UNIT DRAWER
// ============================================================================

function initAddUnitDrawer() {
    const closeBtn = document.getElementById('close-unit-drawer');
    const cancelBtn = document.getElementById('cancel-unit-btn');
    const saveBtn = document.getElementById('save-unit-btn');
    const saveAddAnotherBtn = document.getElementById('save-add-another-unit-btn');
    const overlay = document.getElementById('unit-drawer-overlay');
    
    if (closeBtn) closeBtn.addEventListener('click', closeAddUnitDrawer);
    if (cancelBtn) cancelBtn.addEventListener('click', closeAddUnitDrawer);
    if (overlay) overlay.addEventListener('click', closeAddUnitDrawer);
    if (saveBtn) saveBtn.addEventListener('click', () => saveUnit(false));
    if (saveAddAnotherBtn) saveAddAnotherBtn.addEventListener('click', () => saveUnit(true));
    
    // Render amenities checkboxes
    renderAmenitiesGrid();
}

function openAddUnitDrawer() {
    const drawer = document.getElementById('add-unit-drawer');
    const overlay = document.getElementById('unit-drawer-overlay');
    
    if (drawer && overlay) {
        // Set property name in drawer header
        const properties = JSON.parse(localStorage.getItem('properties') || '[]');
        const property = properties.find(p => p.property_id === currentPropertyId);
        if (property) {
            document.getElementById('add-unit-property-name').textContent = `to ${property.name}`;
        }
        
        // Show drawer
        overlay.classList.remove('hidden');
        setTimeout(() => {
            drawer.classList.remove('translate-x-full');
        }, 10);
        
        // Focus first input
        document.getElementById('unit-name').focus();
    }
}

function closeAddUnitDrawer() {
    const drawer = document.getElementById('add-unit-drawer');
    const overlay = document.getElementById('unit-drawer-overlay');
    
    if (drawer && overlay) {
        drawer.classList.add('translate-x-full');
        setTimeout(() => {
            overlay.classList.add('hidden');
            resetUnitForm();
        }, 300);
    }
}

function renderAmenitiesGrid() {
    const grid = document.getElementById('amenities-grid');
    if (!grid) return;
    
    grid.innerHTML = AMENITIES_LIST.map((amenity, index) => `
        <label class="flex items-center space-x-2 p-3 border border-stone rounded-lg hover:bg-stone hover:bg-opacity-30 cursor-pointer transition-colors">
            <input type="checkbox" value="${amenity}" class="amenity-checkbox" onchange="handleAmenitySelection()">
            <span class="text-sm text-slate">${amenity}</span>
        </label>
    `).join('');
}

function handleAmenitySelection() {
    const checkboxes = document.querySelectorAll('.amenity-checkbox');
    selectedAmenities.clear();
    
    checkboxes.forEach(cb => {
        if (cb.checked) {
            selectedAmenities.add(cb.value);
        }
    });
    
    // Show/hide details section
    const detailsSection = document.getElementById('selected-amenities-details');
    const detailsContainer = document.getElementById('amenity-details-container');
    
    if (selectedAmenities.size > 0) {
        detailsSection.classList.remove('hidden');
        
        // Render detail forms for selected amenities
        detailsContainer.innerHTML = Array.from(selectedAmenities).map(amenity => `
            <div class="p-4 bg-white rounded-lg border border-stone">
                <p class="text-sm font-medium text-slate mb-3">${amenity}</p>
                <div class="grid grid-cols-2 gap-3">
                    <div>
                        <label class="block text-xs text-concrete mb-1">Quantity</label>
                        <input type="number" data-amenity="${amenity}" class="amenity-quantity w-full px-3 py-2 text-sm border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="Optional">
                    </div>
                    <div>
                        <label class="block text-xs text-concrete mb-1">Included in rent?</label>
                        <select data-amenity="${amenity}" class="amenity-included w-full px-3 py-2 text-sm border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate">
                            <option value="true">Yes</option>
                            <option value="false">No (Extra cost)</option>
                        </select>
                    </div>
                </div>
            </div>
        `).join('');
    } else {
        detailsSection.classList.add('hidden');
    }
}

function saveUnit(addAnother) {
    // Validate required fields
    const unitName = document.getElementById('unit-name').value.trim();
    
    if (!unitName) {
        showToast('Please enter a unit name', 'error');
        return;
    }
    
    // Collect amenities data
    const amenitiesData = [];
    selectedAmenities.forEach(amenity => {
        const quantityInput = document.querySelector(`.amenity-quantity[data-amenity="${amenity}"]`);
        const includedSelect = document.querySelector(`.amenity-included[data-amenity="${amenity}"]`);
        
        amenitiesData.push({
            amenity: amenity,
            quantity: quantityInput ? parseInt(quantityInput.value) || null : null,
            included_flag: includedSelect ? includedSelect.value === 'true' : true
        });
    });
    
    // Create unit data
    const unitData = {
        unit_id: 'UNIT-' + Date.now(),
        property_id: currentPropertyId,
        unit_name: unitName,
        floor: document.getElementById('unit-floor').value.trim(),
        sqft: document.getElementById('unit-sqft').value,
        desk_count: document.getElementById('unit-desk-count').value,
        meeting_rooms: document.getElementById('unit-meeting-rooms').value,
        status: document.getElementById('unit-status').value.trim(),
        visibility: document.getElementById('unit-visibility').value,
        windows_type: document.getElementById('unit-windows-type').value,
        Property_unit_HVAC_servicing: document.getElementById('unit-hvac-servicing').value,
        hvac_notes: document.getElementById('unit-hvac-notes').value.trim(),
        figma_asset_url: document.getElementById('unit-figma-url').value.trim(),
        amenities: amenitiesData,
        created_at: new Date().toISOString(),
        updated_at: new Date().toISOString()
    };
    
    // Save to localStorage
    let allUnits = JSON.parse(localStorage.getItem('property_units') || '[]');
    allUnits.push(unitData);
    localStorage.setItem('property_units', JSON.stringify(allUnits));
    
    // Track analytics
    emitEvent('unit_created', {
        unit_id: unitData.unit_id,
        property_id: currentPropertyId,
        amenities_count: amenitiesData.length
    });
    
    showToast('Unit created successfully!', 'success');
    
    // Update property detail page
    propertyUnits = allUnits.filter(u => u.property_id === currentPropertyId);
    renderUnitsList();
    document.getElementById('property-detail-units-count').textContent = propertyUnits.length;
    
    if (addAnother) {
        resetUnitForm();
        document.getElementById('unit-name').focus();
    } else {
        closeAddUnitDrawer();
    }
}

function resetUnitForm() {
    document.getElementById('add-unit-form').reset();
    selectedAmenities.clear();
    
    // Uncheck all amenity checkboxes
    document.querySelectorAll('.amenity-checkbox').forEach(cb => cb.checked = false);
    
    // Hide details section
    document.getElementById('selected-amenities-details').classList.add('hidden');
}

// ============================================================================
// UTILITY FUNCTIONS
// ============================================================================

function showToast(message, type = 'info') {
    // Reuse existing toast function if available
    if (typeof window.showToast === 'function') {
        window.showToast(message, type);
    } else {
        alert(message);
    }
}

function emitEvent(eventName, eventData) {
    // Reuse existing analytics function if available
    if (typeof window.emitEvent === 'function') {
        window.emitEvent(eventName, eventData);
    } else {
        console.log('Event:', eventName, eventData);
    }
}

// Initialize when DOM is ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initPropertyManagement);
} else {
    initPropertyManagement();
}


        // ========================================
        // STATE MANAGEMENT
        // ========================================
        let interventions = [
            {
                id: 'INT-0041',
                createdBy: 'Executive',
                owner: 'Tom',
                stage: 'At-Risk Deal',
                context: 'Canary Wharf Tower 42 - HoT approval overdue by 8 days',
                status: 'Open',
                priority: 'High',
                dueDate: '2024-10-12',
                expectedImpact: 'Accelerate legal review and secure client sign-off within 48 hours',
                notes: 'Legal team has flagged covenant concerns. Need executive escalation to borrower.',
                linkedDeals: 'D-2024-089',
                createdAt: '2024-10-05T09:15:00Z'
            },
            {
                id: 'INT-0042',
                createdBy: 'Max',
                owner: 'Dani',
                stage: 'Dashboard',
                context: 'SLA compliance dropped below 90% threshold',
                status: 'In Progress',
                priority: 'High',
                dueDate: '2024-10-10',
                expectedImpact: 'Identify bottlenecks in Proposal → HoTs stage and implement process improvements',
                notes: 'Initial analysis shows 12 deals stuck in legal review. Scheduling vendor meeting.',
                linkedDeals: 'Multiple',
                createdAt: '2024-10-03T14:30:00Z'
            },
            {
                id: 'INT-0043',
                createdBy: 'Tom',
                owner: 'Max',
                stage: 'Quick Action',
                context: 'Vendor onboarding process taking 14+ days (target: 7 days)',
                status: 'Open',
                priority: 'Medium',
                dueDate: '2024-10-15',
                expectedImpact: 'Streamline documentation requirements and automate compliance checks',
                notes: 'Working with ops team to digitize forms and reduce manual touchpoints.',
                linkedDeals: 'N/A',
                createdAt: '2024-10-04T11:20:00Z'
            },
            {
                id: 'INT-0044',
                createdBy: 'Dani',
                owner: 'Tom',
                stage: 'At-Risk Deal',
                context: 'The Shard Office Suite - Viewing conversion stalled for 15 days',
                status: 'In Progress',
                priority: 'High',
                dueDate: '2024-10-09',
                expectedImpact: 'Re-engage client with revised proposal and competitive market analysis',
                notes: 'Client concerns about pricing. Preparing alternative structure with lower LTV.',
                linkedDeals: 'D-2024-103',
                createdAt: '2024-10-02T16:45:00Z'
            },
            {
                id: 'INT-0045',
                createdBy: 'Executive',
                owner: 'Dani',
                stage: 'Dashboard',
                context: 'Average cycle time increased by 2.1 days this month',
                status: 'Open',
                priority: 'Medium',
                dueDate: '2024-10-18',
                expectedImpact: 'Reduce stage transition delays through automated alerts and task prioritization',
                notes: 'Implementing new workflow automation to flag deals approaching SLA breach.',
                linkedDeals: 'N/A',
                createdAt: '2024-10-06T08:00:00Z'
            },
            {
                id: 'INT-0046',
                createdBy: 'Max',
                owner: 'Executive',
                stage: 'General',
                context: 'Q4 pipeline value 12% below target',
                status: 'Open',
                priority: 'High',
                dueDate: '2024-10-20',
                expectedImpact: 'Increase origination activity and accelerate high-value deals in HoTs stage',
                notes: 'Strategic review scheduled. Focus on broker relationships and deal prioritization.',
                linkedDeals: 'Multiple',
                createdAt: '2024-10-07T10:30:00Z'
            },
            {
                id: 'INT-0047',
                createdBy: 'Tom',
                owner: 'Max',
                stage: 'At-Risk Deal',
                context: 'Liverpool Street Development - Valuation report delayed by surveyor',
                status: 'Closed',
                priority: 'Medium',
                dueDate: '2024-10-05',
                expectedImpact: 'Secure expedited valuation and maintain deal momentum',
                notes: 'Escalated to surveyor director. Report received and deal progressing to HoTs.',
                linkedDeals: 'D-2024-078',
                createdAt: '2024-09-28T13:15:00Z',
                closedAt: '2024-10-04T17:30:00Z'
            },
            {
                id: 'INT-0038',
                createdBy: 'Dani',
                owner: 'Tom',
                stage: 'Quick Action',
                context: 'Broker commission invoicing backlog of 8 deals',
                status: 'Closed',
                priority: 'Low',
                dueDate: '2024-10-01',
                expectedImpact: 'Clear invoicing backlog and improve broker satisfaction',
                notes: 'Finance team processed all outstanding invoices. Implemented weekly review cadence.',
                linkedDeals: 'Multiple',
                createdAt: '2024-09-25T09:00:00Z',
                closedAt: '2024-09-30T16:00:00Z'
            },
            {
                id: 'INT-0039',
                createdBy: 'Executive',
                owner: 'Dani',
                stage: 'Dashboard',
                context: 'Win rate declined to 68.4% (target: 72%)',
                status: 'Closed',
                priority: 'High',
                dueDate: '2024-09-30',
                expectedImpact: 'Improve proposal quality and competitive positioning',
                notes: 'Conducted deal loss analysis. Implemented new pricing strategy and enhanced due diligence.',
                linkedDeals: 'N/A',
                createdAt: '2024-09-20T11:30:00Z',
                closedAt: '2024-09-29T14:45:00Z'
            },
            {
                id: 'INT-0040',
                createdBy: 'Max',
                owner: 'Tom',
                stage: 'At-Risk Deal',
                context: 'Manchester Retail Park - Client unresponsive for 10 days',
                status: 'Closed',
                priority: 'Medium',
                dueDate: '2024-10-03',
                expectedImpact: 'Re-establish client communication and confirm deal status',
                notes: 'Client confirmed continued interest. Deal moved to HoTs stage with revised timeline.',
                linkedDeals: 'D-2024-095',
                createdAt: '2024-09-26T15:20:00Z',
                closedAt: '2024-10-02T10:15:00Z'
            }
        ];
        let interventionCounter = 48; // Start from INT-0048
        let interventionContext = {};
        let notifications = [
            {
                id: 1,
                type: 'danger',
                title: 'SLA Breach Alert',
                message: 'Canary Wharf Tower 42 - HoT approval overdue',
                time: '3 minutes ago',
                read: false
            },
            {
                id: 2,
                type: 'warning',
                title: 'Onboarding Delayed',
                message: 'The Shard Office Suite - Vendor response pending',
                time: '15 minutes ago',
                read: false
            },
            {
                id: 3,
                type: 'success',
                title: 'Deal Approved',
                message: 'King\'s Cross Central - HoT signed successfully',
                time: '1 hour ago',
                read: true
            }
        ];

        // ========================================
        // UTILITY FUNCTIONS
        // ========================================
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast-notification');
            const toastMessage = document.getElementById('toast-message');
            const icon = toast.querySelector('i');
            
            // Update colors based on type
            toast.className = `fixed top-6 right-6 px-6 py-4 rounded-lg shadow-lg transform transition-transform duration-300 z-[70] flex items-center space-x-3 bg-${type} text-white`;
            
            // Update icon
            const iconMap = {
                success: 'fa-check-circle',
                danger: 'fa-exclamation-circle',
                warning: 'fa-exclamation-triangle',
                info: 'fa-info-circle'
            };
            icon.className = `fa-solid ${iconMap[type] || 'fa-check-circle'} text-xl`;
            
            toastMessage.textContent = message;
            toast.classList.remove('translate-x-[calc(100%+24px)]');
            
            setTimeout(() => {
                toast.classList.add('translate-x-[calc(100%+24px)]');
            }, 3000);
        }

        function setDefaultDueDate() {
            const dateInput = document.getElementById('intervention-due-date');
            const today = new Date();
            today.setDate(today.getDate() + 7); // Default to 7 days from now
            dateInput.value = today.toISOString().split('T')[0];
        }

        function formatTimeAgo(date) {
            const now = new Date();
            const diff = now - new Date(date);
            const minutes = Math.floor(diff / 60000);
            const hours = Math.floor(minutes / 60);
            const days = Math.floor(hours / 24);
            
            if (minutes < 1) return 'Just now';
            if (minutes < 60) return `${minutes} minute${minutes > 1 ? 's' : ''} ago`;
            if (hours < 24) return `${hours} hour${hours > 1 ? 's' : ''} ago`;
            return `${days} day${days > 1 ? 's' : ''} ago`;
        }

        // ========================================
        // INTERVENTION DRAWER
        // ========================================
        function openInterventionDrawer(context = {}) {
            interventionContext = context;
            const drawer = document.getElementById('intervention-drawer');
            
            // Populate context
            document.getElementById('intervention-context').textContent = context.metric || context.stage || 'General intervention';
            document.getElementById('intervention-deals').textContent = context.deals || 'N/A';
            
            // Set owner if suggested
            if (context.owner) {
                document.getElementById('intervention-owner').value = context.owner;
            }
            
            // Reset form
            document.getElementById('intervention-form').reset();
            document.getElementById('impact-char-count').textContent = '0';
            setDefaultDueDate();
            
            // Open drawer
            drawer.classList.remove('translate-x-full');
            
            emitEvent('intervention_drawer_opened', { context });
        }

        function closeInterventionDrawer() {
            const drawer = document.getElementById('intervention-drawer');
            drawer.classList.add('translate-x-full');
        }

        // Character counter
        document.getElementById('intervention-impact').addEventListener('input', function() {
            document.getElementById('impact-char-count').textContent = this.value.length;
        });

        // Drawer close buttons
        document.getElementById('close-intervention-drawer').addEventListener('click', closeInterventionDrawer);
        document.getElementById('cancel-intervention-btn').addEventListener('click', closeInterventionDrawer);

        // Create intervention
        document.getElementById('create-intervention-btn').addEventListener('click', function() {
            const owner = document.getElementById('intervention-owner').value;
            const priority = document.querySelector('input[name="priority"]:checked').value;
            const dueDate = document.getElementById('intervention-due-date').value;
            const impact = document.getElementById('intervention-impact').value;
            const notes = document.getElementById('intervention-notes').value;
            
            if (!impact.trim()) {
                showToast('Please provide an expected impact', 'warning');
                return;
            }
            
            const intervention = {
                id: `INT-${String(interventionCounter).padStart(4, '0')}`,
                createdBy: 'Executive',
                owner,
                stage: interventionContext.stage || 'General',
                context: interventionContext.metric || interventionContext.stage || 'General intervention',
                status: 'Open',
                priority,
                dueDate,
                expectedImpact: impact,
                notes,
                linkedDeals: interventionContext.deals || 'N/A',
                createdAt: new Date().toISOString()
            };
            
            interventions.push(intervention);
            interventionCounter++;
            
            // Emit analytics event
            emitEvent('intervention_created', {
                id: intervention.id,
                stage: intervention.stage,
                owner: intervention.owner,
                priority: intervention.priority,
                due_date: intervention.dueDate
            });
            
            // Close drawer and show toast
            closeInterventionDrawer();
            showToast(`Intervention ${intervention.id} created successfully`);
            
            // Update interventions list on dashboard
            updateInterventionsList();
            
            // Update interventions page if visible
            if (currentPage === 'interventions') {
                renderInterventionsTable();
                updateInterventionsStats();
                renderInterventionsCharts();
            }
        });

        // ========================================
        // INTERVENTIONS PAGE FUNCTIONS
        // ========================================
        let filteredInterventions = [];
        let sortColumn = 'id';
        let sortDirection = 'desc';

        function renderInterventionsTable() {
            const tbody = document.getElementById('interventions-table-body');
            const emptyState = document.getElementById('empty-state');
            
            if (!tbody) return;
            
            // Apply filters
            applyInterventionsFilters();
            
            // Show empty state if no results
            if (filteredInterventions.length === 0) {
                tbody.innerHTML = '';
                emptyState?.classList.remove('hidden');
                document.getElementById('filtered-count').textContent = '0';
                return;
            }
            
            emptyState?.classList.add('hidden');
            document.getElementById('filtered-count').textContent = filteredInterventions.length;
            
            // Sort interventions
            const sorted = [...filteredInterventions].sort((a, b) => {
                let aVal = a[sortColumn];
                let bVal = b[sortColumn];
                
                if (sortColumn === 'dueDate') {
                    aVal = new Date(aVal).getTime();
                    bVal = new Date(bVal).getTime();
                }
                
                if (sortDirection === 'asc') {
                    return aVal > bVal ? 1 : -1;
                } else {
                    return aVal < bVal ? 1 : -1;
                }
            });
            
            // Render rows
            tbody.innerHTML = sorted.map(intervention => {
                const priorityColors = {
                    'High': 'bg-danger bg-opacity-10 text-danger',
                    'Medium': 'bg-warning bg-opacity-10 text-warning',
                    'Low': 'bg-info bg-opacity-10 text-info'
                };
                
                const statusColors = {
                    'Open': 'bg-warning bg-opacity-10 text-warning',
                    'In Progress': 'bg-info bg-opacity-10 text-info',
                    'Closed': 'bg-success bg-opacity-10 text-success'
                };
                
                return `
                    <tr class="hover:bg-stone cursor-pointer" data-intervention-id="${intervention.id}">
                        <td class="px-6 py-4 text-sm font-medium text-slate">${intervention.id}</td>
                        <td class="px-6 py-4 text-sm text-slate">${intervention.owner}</td>
                        <td class="px-6 py-4">
                            <span class="px-2 py-1 text-xs font-medium bg-info bg-opacity-10 text-info rounded-full">${intervention.stage}</span>
                        </td>
                        <td class="px-6 py-4 text-sm text-concrete max-w-xs truncate">${intervention.context}</td>
                        <td class="px-6 py-4">
                            <span class="px-2 py-1 text-xs font-medium ${priorityColors[intervention.priority]} rounded-full">${intervention.priority}</span>
                        </td>
                        <td class="px-6 py-4">
                            <span class="px-2 py-1 text-xs font-medium ${statusColors[intervention.status]} rounded-full">${intervention.status}</span>
                        </td>
                        <td class="px-6 py-4 text-sm text-slate">${formatDate(intervention.dueDate)}</td>
                        <td class="px-6 py-4 text-sm text-concrete max-w-xs truncate">${intervention.expectedImpact}</td>
                        <td class="px-6 py-4">
                            <div class="flex items-center space-x-2">
                                <button class="text-info hover:text-opacity-80" onclick="viewIntervention('${intervention.id}')">
                                    <i class="fa-solid fa-eye"></i>
                                </button>
                                <button class="text-slate hover:text-opacity-80" onclick="editIntervention('${intervention.id}')">
                                    <i class="fa-solid fa-edit"></i>
                                </button>
                                ${intervention.status !== 'Closed' ? `
                                <button class="text-success hover:text-opacity-80" onclick="closeIntervention('${intervention.id}')">
                                    <i class="fa-solid fa-check"></i>
                                </button>
                                ` : ''}
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function applyInterventionsFilters() {
            const searchTerm = document.getElementById('interventions-search')?.value.toLowerCase() || '';
            const stageFilter = document.getElementById('filter-stage')?.value || '';
            const ownerFilter = document.getElementById('filter-owner')?.value || '';
            const statusFilter = document.getElementById('filter-status')?.value || '';
            const priorityFilter = document.getElementById('filter-priority')?.value || '';
            
            filteredInterventions = interventions.filter(intervention => {
                const matchesSearch = !searchTerm || 
                    intervention.id.toLowerCase().includes(searchTerm) ||
                    intervention.context.toLowerCase().includes(searchTerm) ||
                    intervention.expectedImpact.toLowerCase().includes(searchTerm);
                
                const matchesStage = !stageFilter || intervention.stage === stageFilter;
                const matchesOwner = !ownerFilter || intervention.owner === ownerFilter;
                const matchesStatus = !statusFilter || intervention.status === statusFilter;
                const matchesPriority = !priorityFilter || intervention.priority === priorityFilter;
                
                return matchesSearch && matchesStage && matchesOwner && matchesStatus && matchesPriority;
            });
        }

        function updateInterventionsStats() {
            const openCount = interventions.filter(i => i.status === 'Open').length;
            const inProgressCount = interventions.filter(i => i.status === 'In Progress').length;
            const closedCount = interventions.filter(i => i.status === 'Closed').length;
            
            document.getElementById('stat-open').textContent = openCount;
            document.getElementById('stat-in-progress').textContent = inProgressCount;
            document.getElementById('stat-closed').textContent = closedCount;
            
            // Calculate average days to close
            const closedInterventions = interventions.filter(i => i.status === 'Closed' && i.closedAt);
            if (closedInterventions.length > 0) {
                const avgDays = closedInterventions.reduce((sum, i) => {
                    const created = new Date(i.createdAt);
                    const closed = new Date(i.closedAt);
                    const days = Math.floor((closed - created) / (1000 * 60 * 60 * 24));
                    return sum + days;
                }, 0) / closedInterventions.length;
                document.getElementById('stat-avg-days').textContent = avgDays.toFixed(1);
            } else {
                document.getElementById('stat-avg-days').textContent = '-';
            }
            
            // Calculate on-time rate
            const dueInterventions = interventions.filter(i => i.status === 'Closed' && i.closedAt);
            if (dueInterventions.length > 0) {
                const onTimeCount = dueInterventions.filter(i => {
                    const closed = new Date(i.closedAt);
                    const due = new Date(i.dueDate);
                    return closed <= due;
                }).length;
                const onTimeRate = (onTimeCount / dueInterventions.length * 100).toFixed(0);
                document.getElementById('stat-on-time').textContent = `${onTimeRate}%`;
            } else {
                document.getElementById('stat-on-time').textContent = '-';
            }
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-GB', { day: 'numeric', month: 'short', year: 'numeric' });
        }

        // ========================================
        // INTERVENTION DETAIL DRAWER
        // ========================================
        let currentInterventionId = null;
        let originalInterventionState = null;

        function viewIntervention(id) {
            openInterventionDetail(id, true); // true = read-only mode
        }

        function editIntervention(id) {
            openInterventionDetail(id, false); // false = edit mode
        }

        function openInterventionDetail(id, readOnly = false) {
            const intervention = interventions.find(i => i.id === id);
            if (!intervention) return;
            
            currentInterventionId = id;
            originalInterventionState = JSON.parse(JSON.stringify(intervention));
            
            // Populate drawer
            document.getElementById('detail-intervention-id').textContent = intervention.id;
            document.getElementById('detail-created-by').textContent = intervention.createdBy;
            document.getElementById('detail-creator-avatar').textContent = intervention.createdBy.charAt(0);
            document.getElementById('detail-created-date').textContent = formatDateTime(intervention.createdAt);
            document.getElementById('detail-owner').value = intervention.owner;
            document.getElementById('detail-status').value = intervention.status;
            document.getElementById('detail-stage').textContent = intervention.stage;
            document.getElementById('detail-linked-deals').textContent = intervention.linkedDeals;
            document.getElementById('detail-context').textContent = intervention.context;
            document.getElementById('detail-expected-impact').value = intervention.expectedImpact;
            document.getElementById('detail-impact-char-count').textContent = intervention.expectedImpact.length;
            document.getElementById('detail-notes').value = intervention.notes || '';
            document.getElementById('detail-due-date').value = intervention.dueDate;
            
            // Set priority
            document.querySelector(`input[name="detail-priority"][value="${intervention.priority}"]`).checked = true;
            
            // Calculate days remaining
            const daysRemaining = Math.ceil((new Date(intervention.dueDate) - new Date()) / (1000 * 60 * 60 * 24));
            const daysText = daysRemaining > 0 ? `${daysRemaining} days remaining` : 
                            daysRemaining === 0 ? 'Due today' : 
                            `${Math.abs(daysRemaining)} days overdue`;
            document.getElementById('detail-days-remaining').textContent = daysText;
            document.getElementById('detail-days-remaining').className = `mt-2 text-xs ${daysRemaining < 0 ? 'text-danger' : 'text-concrete'}`;
            
            // Handle closed status
            if (intervention.status === 'Closed') {
                document.getElementById('closed-banner').classList.remove('hidden');
                document.getElementById('closed-date').textContent = `Closed on ${formatDate(intervention.closedAt)}`;
                document.getElementById('outcome-section').classList.remove('hidden');
                document.getElementById('detail-outcome').value = intervention.outcome || '';
                document.getElementById('close-intervention-btn').classList.add('hidden');
            } else {
                document.getElementById('closed-banner').classList.add('hidden');
                document.getElementById('outcome-section').classList.add('hidden');
                document.getElementById('close-intervention-btn').classList.remove('hidden');
            }
            
            // Build audit trail
            buildAuditTrail(intervention);
            
            // Open drawer
            document.getElementById('intervention-detail-drawer').classList.remove('translate-x-full');
            document.getElementById('detail-drawer-overlay').classList.remove('hidden');
            
            emitEvent('intervention_detail_opened', { id, readOnly });
        }

        function closeInterventionDetail() {
            document.getElementById('intervention-detail-drawer').classList.add('translate-x-full');
            document.getElementById('detail-drawer-overlay').classList.add('hidden');
            currentInterventionId = null;
            originalInterventionState = null;
        }

        function buildAuditTrail(intervention) {
            const trail = intervention.auditTrail || [];
            
            // Always include creation event
            const events = [
                {
                    user: intervention.createdBy,
                    action: 'created intervention',
                    timestamp: intervention.createdAt,
                    color: 'blue'
                }
            ];
            
            // Add custom audit trail events
            trail.forEach(event => events.push(event));
            
            // Add closure event if closed
            if (intervention.status === 'Closed' && intervention.closedAt) {
                events.push({
                    user: intervention.closedBy || intervention.owner,
                    action: 'closed intervention',
                    timestamp: intervention.closedAt,
                    color: 'green'
                });
            }
            
            const auditHtml = events.map(event => {
                const colorClasses = {
                    'blue': 'bg-info',
                    'green': 'bg-success',
                    'yellow': 'bg-warning',
                    'red': 'bg-danger',
                    'purple': 'bg-purple-500'
                };
                
                return `
                    <div class="flex items-start space-x-3 p-3 bg-white rounded-lg border border-stone">
                        <div class="w-2 h-2 ${colorClasses[event.color] || 'bg-info'} rounded-full mt-2"></div>
                        <div class="flex-1">
                            <div class="text-sm text-slate">
                                <span class="font-medium">${event.user}</span> ${event.action}
                            </div>
                            <div class="text-xs text-concrete">${formatDateTime(event.timestamp)}</div>
                        </div>
                    </div>
                `;
            }).join('');
            
            document.getElementById('audit-trail').innerHTML = auditHtml;
        }

        function formatDateTime(isoString) {
            const date = new Date(isoString);
            return date.toLocaleString('en-GB', { 
                day: 'numeric', 
                month: 'short', 
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        function saveInterventionChanges() {
            const intervention = interventions.find(i => i.id === currentInterventionId);
            if (!intervention) return;
            
            const oldOwner = intervention.owner;
            const oldStatus = intervention.status;
            const oldPriority = intervention.priority;
            
            // Update intervention
            intervention.owner = document.getElementById('detail-owner').value;
            intervention.status = document.getElementById('detail-status').value;
            intervention.priority = document.querySelector('input[name="detail-priority"]:checked').value;
            intervention.dueDate = document.getElementById('detail-due-date').value;
            intervention.expectedImpact = document.getElementById('detail-expected-impact').value;
            intervention.notes = document.getElementById('detail-notes').value;
            
            // Handle status change to Closed
            if (intervention.status === 'Closed' && oldStatus !== 'Closed') {
                intervention.closedAt = new Date().toISOString();
                intervention.closedBy = 'Executive';
                intervention.outcome = document.getElementById('detail-outcome').value;
            }
            
            // Initialize audit trail if it doesn't exist
            if (!intervention.auditTrail) {
                intervention.auditTrail = [];
            }
            
            // Add audit trail entries for changes
            if (oldOwner !== intervention.owner) {
                intervention.auditTrail.push({
                    user: 'Executive',
                    action: `reassigned to ${intervention.owner}`,
                    timestamp: new Date().toISOString(),
                    color: 'purple'
                });
            }
            
            if (oldStatus !== intervention.status) {
                intervention.auditTrail.push({
                    user: 'Executive',
                    action: `changed status to ${intervention.status}`,
                    timestamp: new Date().toISOString(),
                    color: intervention.status === 'Closed' ? 'green' : 'yellow'
                });
            }
            
            if (oldPriority !== intervention.priority) {
                intervention.auditTrail.push({
                    user: 'Executive',
                    action: `updated priority to ${intervention.priority}`,
                    timestamp: new Date().toISOString(),
                    color: 'yellow'
                });
            }
            
            // Update UI
            renderInterventionsTable();
            updateInterventionsStats();
            renderInterventionsCharts();
            updateInterventionsList();
            
            showToast(`${currentInterventionId} updated successfully`, 'success');
            closeInterventionDetail();
            
            emitEvent('intervention_updated', {
                id: currentInterventionId,
                changes: {
                    owner: oldOwner !== intervention.owner,
                    status: oldStatus !== intervention.status,
                    priority: oldPriority !== intervention.priority
                }
            });
        }

        function deleteIntervention() {
            if (!confirm(`Are you sure you want to delete ${currentInterventionId}? This action cannot be undone.`)) {
                return;
            }
            
            const index = interventions.findIndex(i => i.id === currentInterventionId);
            if (index > -1) {
                interventions.splice(index, 1);
                
                // Update UI
                renderInterventionsTable();
                updateInterventionsStats();
                renderInterventionsCharts();
                updateInterventionsList();
                
                showToast(`${currentInterventionId} deleted`, 'success');
                closeInterventionDetail();
                
                emitEvent('intervention_deleted', { id: currentInterventionId });
            }
        }

        // Event listeners for detail drawer
        document.getElementById('close-detail-drawer').addEventListener('click', closeInterventionDetail);
        document.getElementById('cancel-detail-btn').addEventListener('click', closeInterventionDetail);
        document.getElementById('detail-drawer-overlay').addEventListener('click', closeInterventionDetail);
        document.getElementById('save-intervention-btn').addEventListener('click', saveInterventionChanges);
        document.getElementById('delete-intervention-btn').addEventListener('click', deleteIntervention);
        
        // Close intervention from detail drawer
        document.getElementById('close-intervention-btn').addEventListener('click', function() {
            const intervention = interventions.find(i => i.id === currentInterventionId);
            if (intervention) {
                document.getElementById('detail-status').value = 'Closed';
                document.getElementById('outcome-section').classList.remove('hidden');
                document.getElementById('closed-banner').classList.remove('hidden');
                this.classList.add('hidden');
            }
        });
        
        // Character counter for expected impact in detail drawer
        document.getElementById('detail-expected-impact').addEventListener('input', function() {
            document.getElementById('detail-impact-char-count').textContent = this.value.length;
        });
        
        // Status change handler
        document.getElementById('detail-status').addEventListener('change', function() {
            if (this.value === 'Closed') {
                document.getElementById('outcome-section').classList.remove('hidden');
                document.getElementById('close-intervention-btn').classList.add('hidden');
            } else {
                document.getElementById('outcome-section').classList.add('hidden');
                document.getElementById('close-intervention-btn').classList.remove('hidden');
            }
        });

        function closeIntervention(id) {
            const intervention = interventions.find(i => i.id === id);
            if (intervention) {
                intervention.status = 'Closed';
                intervention.closedAt = new Date().toISOString();
                renderInterventionsTable();
                updateInterventionsStats();
                renderInterventionsCharts();
                showToast(`${id} marked as closed`, 'success');
                emitEvent('intervention_closed', { id });
            }
        }

        function renderInterventionsCharts() {
            // Status Distribution Chart
            const statusCounts = {
                'Open': interventions.filter(i => i.status === 'Open').length,
                'In Progress': interventions.filter(i => i.status === 'In Progress').length,
                'Closed': interventions.filter(i => i.status === 'Closed').length
            };
            
            if (document.getElementById('status-chart')) {
                Highcharts.chart('status-chart', {
                    chart: { type: 'pie', backgroundColor: 'transparent' },
                    title: { text: null },
                    credits: { enabled: false },
                    plotOptions: {
                        pie: {
                            innerSize: '60%',
                            dataLabels: {
                                enabled: true,
                                format: '<b>{point.name}</b>: {point.y}',
                                style: { fontSize: '12px', color: '#64748b' }
                            }
                        }
                    },
                    series: [{
                        name: 'Interventions',
                        data: [
                            { name: 'Open', y: statusCounts['Open'], color: '#f59e0b' },
                            { name: 'In Progress', y: statusCounts['In Progress'], color: '#3b82f6' },
                            { name: 'Closed', y: statusCounts['Closed'], color: '#10b981' }
                        ]
                    }]
                });
            }
            
            // Priority Breakdown Chart
            const priorityCounts = {
                'High': interventions.filter(i => i.priority === 'High').length,
                'Medium': interventions.filter(i => i.priority === 'Medium').length,
                'Low': interventions.filter(i => i.priority === 'Low').length
            };
            
            if (document.getElementById('priority-chart')) {
                Highcharts.chart('priority-chart', {
                    chart: { type: 'column', backgroundColor: 'transparent' },
                    title: { text: null },
                    credits: { enabled: false },
                    xAxis: {
                        categories: ['High', 'Medium', 'Low'],
                        labels: { style: { color: '#64748b' } }
                    },
                    yAxis: {
                        min: 0,
                        title: { text: 'Count', style: { color: '#64748b' } },
                        labels: { style: { color: '#64748b' } }
                    },
                    legend: { enabled: false },
                    plotOptions: {
                        column: {
                            borderRadius: 4,
                            dataLabels: {
                                enabled: true,
                                style: { fontSize: '12px', fontWeight: 'bold' }
                            }
                        }
                    },
                    series: [{
                        name: 'Interventions',
                        data: [
                            { y: priorityCounts['High'], color: '#ef4444' },
                            { y: priorityCounts['Medium'], color: '#f59e0b' },
                            { y: priorityCounts['Low'], color: '#3b82f6' }
                        ]
                    }]
                });
            }
            
            // Render performance metrics
            renderPerformanceMetrics();
            
            // Render recent activity
            renderRecentActivity();
        }

        function renderPerformanceMetrics() {
            // Resolution Time by Priority
            const resolutionMetrics = calculateResolutionTimeByPriority();
            const resolutionHtml = resolutionMetrics.map(metric => `
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <span class="w-3 h-3 ${metric.color} rounded-full mr-3"></span>
                        <span class="text-sm font-medium text-slate">${metric.priority}</span>
                    </div>
                    <div class="text-right">
                        <div class="text-sm font-semibold text-slate">${metric.avgDays} days</div>
                        <div class="text-xs ${metric.vsTarget >= 0 ? 'text-danger' : 'text-success'}">
                            ${metric.vsTarget >= 0 ? '+' : ''}${metric.vsTarget}% vs target
                        </div>
                    </div>
                </div>
            `).join('');
            
            const resolutionContainer = document.getElementById('resolution-time-metrics');
            if (resolutionContainer) {
                resolutionContainer.innerHTML = resolutionHtml;
            }
            
            // Owner Performance
            const ownerMetrics = calculateOwnerPerformance();
            const ownerHtml = ownerMetrics.map(metric => `
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <div class="w-6 h-6 bg-slate rounded-full flex items-center justify-center text-white text-xs mr-3">
                            ${metric.owner.charAt(0)}
                        </div>
                        <span class="text-sm font-medium text-slate">${metric.owner}</span>
                    </div>
                    <div class="text-right">
                        <div class="text-sm font-semibold text-slate">${metric.onTimeRate}% on-time</div>
                        <div class="text-xs text-concrete">${metric.active} active</div>
                    </div>
                </div>
            `).join('');
            
            const ownerContainer = document.getElementById('owner-performance-metrics');
            if (ownerContainer) {
                ownerContainer.innerHTML = ownerHtml;
            }
        }

        function calculateResolutionTimeByPriority() {
            const priorities = ['Critical', 'High', 'Medium', 'Low'];
            const colors = ['bg-danger', 'bg-warning', 'bg-warning', 'bg-concrete'];
            const targets = { 'Critical': 2, 'High': 5, 'Medium': 7, 'Low': 12 };
            
            return priorities.map((priority, index) => {
                // Map "Critical" to "High" for our data
                const actualPriority = priority === 'Critical' ? 'High' : priority;
                const closed = interventions.filter(i => 
                    i.priority === actualPriority && 
                    i.status === 'Closed' && 
                    i.closedAt
                );
                
                let avgDays = 0;
                if (closed.length > 0) {
                    const totalDays = closed.reduce((sum, i) => {
                        const created = new Date(i.createdAt);
                        const closedDate = new Date(i.closedAt);
                        return sum + Math.floor((closedDate - created) / (1000 * 60 * 60 * 24));
                    }, 0);
                    avgDays = (totalDays / closed.length).toFixed(1);
                }
                
                const target = targets[priority];
                const vsTarget = target > 0 ? (((avgDays - target) / target) * 100).toFixed(0) : 0;
                
                return {
                    priority,
                    avgDays: avgDays || '-',
                    vsTarget: parseInt(vsTarget),
                    color: colors[index]
                };
            });
        }

        function calculateOwnerPerformance() {
            const owners = ['Tom', 'Max', 'Dani'];
            
            return owners.map(owner => {
                const ownerInterventions = interventions.filter(i => i.owner === owner);
                const active = ownerInterventions.filter(i => i.status !== 'Closed').length;
                const closed = ownerInterventions.filter(i => i.status === 'Closed' && i.closedAt);
                
                let onTimeCount = 0;
                closed.forEach(i => {
                    const closedDate = new Date(i.closedAt);
                    const dueDate = new Date(i.dueDate);
                    if (closedDate <= dueDate) onTimeCount++;
                });
                
                const onTimeRate = closed.length > 0 ? Math.round((onTimeCount / closed.length) * 100) : 0;
                
                return {
                    owner,
                    onTimeRate,
                    active
                };
            });
        }

        function renderRecentActivity() {
            // Get recent interventions with activity
            const recentActivities = [];
            
            // Add closed interventions
            interventions
                .filter(i => i.status === 'Closed' && i.closedAt)
                .sort((a, b) => new Date(b.closedAt) - new Date(a.closedAt))
                .slice(0, 2)
                .forEach(i => {
                    recentActivities.push({
                        user: i.closedBy || i.owner,
                        action: 'closed intervention',
                        interventionId: i.id,
                        detail: i.outcome || 'Intervention completed successfully',
                        timestamp: i.closedAt
                    });
                });
            
            // Add recently updated interventions (from audit trail)
            interventions
                .filter(i => i.auditTrail && i.auditTrail.length > 0)
                .forEach(i => {
                    const lastAudit = i.auditTrail[i.auditTrail.length - 1];
                    recentActivities.push({
                        user: lastAudit.user,
                        action: lastAudit.action,
                        interventionId: i.id,
                        detail: `Status: ${i.status}, Priority: ${i.priority}`,
                        timestamp: lastAudit.timestamp
                    });
                });
            
            // Add recently created interventions
            interventions
                .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
                .slice(0, 1)
                .forEach(i => {
                    recentActivities.push({
                        user: i.createdBy,
                        action: 'created intervention',
                        interventionId: i.id,
                        detail: `${i.priority} priority: ${i.context.substring(0, 50)}...`,
                        timestamp: i.createdAt
                    });
                });
            
            // Sort by timestamp and take top 3
            recentActivities.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            const topActivities = recentActivities.slice(0, 3);
            
            const activityHtml = topActivities.map(activity => {
                const timeAgo = getTimeAgo(activity.timestamp);
                const initial = activity.user.charAt(0);
                
                return `
                    <div class="flex items-start space-x-4 p-4 hover:bg-stone transition-colors">
                        <div class="w-10 h-10 bg-slate rounded-full flex items-center justify-center text-white font-medium flex-shrink-0">
                            ${initial}
                        </div>
                        <div class="flex-1 min-w-0">
                            <p class="text-sm text-slate">
                                <span class="font-medium">${activity.user}</span> ${activity.action} 
                                <span class="font-medium text-info">${activity.interventionId}</span>
                            </p>
                            <p class="text-xs text-concrete mt-1 line-clamp-1">
                                ${activity.detail}
                            </p>
                            <span class="text-xs text-concrete mt-1 inline-block">${timeAgo}</span>
                        </div>
                    </div>
                `;
            }).join('');
            
            const activityContainer = document.getElementById('recent-activity-feed');
            if (activityContainer) {
                activityContainer.innerHTML = activityHtml || `
                    <div class="p-8 text-center">
                        <i class="fa-solid fa-clock-rotate-left text-3xl text-concrete mb-2"></i>
                        <p class="text-sm text-concrete">No recent activity</p>
                    </div>
                `;
            }
        }

        function getTimeAgo(timestamp) {
            const now = new Date();
            const past = new Date(timestamp);
            const diffMs = now - past;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);
            
            if (diffMins < 1) return 'Just now';
            if (diffMins < 60) return `${diffMins} minute${diffMins > 1 ? 's' : ''} ago`;
            if (diffHours < 24) return `${diffHours} hour${diffHours > 1 ? 's' : ''} ago`;
            if (diffDays < 7) return `${diffDays} day${diffDays > 1 ? 's' : ''} ago`;
            return formatDate(timestamp);
        }

        function updateInterventionsList() {
            const container = document.querySelector('#risk-and-interventions .space-y-3');
            if (!container) return;
            
            const recent = interventions.slice(-4).reverse();
            
            const statusColors = {
                'Open': 'info',
                'In Progress': 'warning',
                'Resolved': 'success',
                'Closed': 'success'
            };
            
            const html = recent.map(int => {
                const color = statusColors[int.status] || 'info';
                return `
                    <div class="flex items-center justify-between p-3 bg-${color} bg-opacity-5 rounded-lg border-l-4 border-${color}">
                        <div class="flex-1">
                            <div class="flex items-center space-x-2 mb-1">
                                <span class="text-xs bg-${color} text-white px-2 py-1 rounded">${int.status}</span>
                                <h3 class="text-sm font-medium text-slate">${int.context}</h3>
                            </div>
                            <p class="text-xs text-concrete">${int.expectedImpact || 'No impact specified'}</p>
                            <p class="text-xs text-concrete mt-1">Owner: ${int.owner} • Priority: ${int.priority} • ${formatTimeAgo(int.createdAt)}</p>
                        </div>
                    </div>
                `;
            }).join('');
            
            if (html) {
                container.innerHTML = html + `
                    <div class="text-center pt-2">
                        <button class="text-xs text-concrete hover:text-slate">Show more interventions</button>
                    </div>
                `;
            }
        }

        // ========================================
        // NOTIFICATIONS PANEL
        // ========================================
        function updateNotificationsPanel() {
            const panel = document.getElementById('notifications-panel');
            const container = panel.querySelector('.space-y-4');
            
            const html = notifications.map(notif => {
                const typeColors = {
                    danger: 'danger',
                    warning: 'warning',
                    success: 'success',
                    info: 'info'
                };
                const color = typeColors[notif.type] || 'info';
                
                return `
                    <div class="flex items-start space-x-3 p-3 bg-${color} bg-opacity-5 rounded-lg ${notif.read ? 'opacity-60' : ''}" data-notif-id="${notif.id}">
                        <div class="w-2 h-2 bg-${color} rounded-full mt-2 ${notif.read ? 'opacity-30' : ''}"></div>
                        <div class="flex-1">
                            <p class="text-sm font-medium text-slate">${notif.title}</p>
                            <p class="text-xs text-concrete">${notif.message}</p>
                            <p class="text-xs text-concrete mt-1">${notif.time}</p>
                        </div>
                        ${!notif.read ? `<button class="text-xs text-info hover:underline mark-read" data-id="${notif.id}">Mark read</button>` : ''}
                    </div>
                `;
            }).join('');
            
            container.innerHTML = html + `
                <div class="text-center pt-4">
                    <button class="text-sm text-info hover:underline" id="clear-all-notifications">Clear all notifications</button>
                </div>
            `;
            
            // Add event listeners for mark read buttons
            container.querySelectorAll('.mark-read').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.dataset.id);
                    const notif = notifications.find(n => n.id === id);
                    if (notif) {
                        notif.read = true;
                        updateNotificationsPanel();
                        showToast('Notification marked as read', 'info');
                    }
                });
            });
            
            // Clear all button
            const clearAllBtn = document.getElementById('clear-all-notifications');
            if (clearAllBtn) {
                clearAllBtn.addEventListener('click', function() {
                    notifications = notifications.filter(n => !n.read);
                    updateNotificationsPanel();
                    showToast('Read notifications cleared', 'info');
                });
            }
        }

        // Notifications panel toggle
        document.getElementById('notifications-btn').addEventListener('click', function() {
            const panel = document.getElementById('notifications-panel');
            panel.classList.remove('translate-x-full');
            emitEvent('notifications_panel_opened', { unread_count: notifications.filter(n => !n.read).length });
        });

        document.getElementById('close-notifications').addEventListener('click', function() {
            const panel = document.getElementById('notifications-panel');
            panel.classList.add('translate-x-full');
        });

        // ========================================
        // NAVIGATION
        // ========================================
        
        // Sidebar Collapse/Expand - Toggle between expanded and collapsed
        document.getElementById('collapse-btn-1').addEventListener('click', function() {
            document.getElementById('nav-option-1').classList.add('hidden');
            document.getElementById('nav-option-2').classList.remove('hidden');
            emitEvent('sidebar_toggled', { state: 'collapsed' });
        });

        document.getElementById('expand-btn-2').addEventListener('click', function() {
            document.getElementById('nav-option-1').classList.remove('hidden');
            document.getElementById('nav-option-2').classList.add('hidden');
            emitEvent('sidebar_toggled', { state: 'expanded' });
        });

        // Mobile Navigation
        const mobileNavBtn = document.createElement('button');
        mobileNavBtn.id = 'show-mobile-nav';
        mobileNavBtn.className = 'md:hidden fixed bottom-6 right-6 bg-slate text-white w-14 h-14 rounded-full shadow-lg hover:bg-opacity-90 transition-colors z-40 flex items-center justify-center';
        mobileNavBtn.innerHTML = '<i class="fa-solid fa-bars text-xl"></i>';
        document.body.appendChild(mobileNavBtn);

        mobileNavBtn.addEventListener('click', function() {
            const drawer = document.getElementById('mobile-nav-drawer');
            const drawerPanel = document.getElementById('mobile-drawer');
            drawer.classList.remove('hidden');
            setTimeout(() => {
                drawerPanel.classList.remove('-translate-x-full');
            }, 10);
            emitEvent('mobile_nav_opened', {});
        });

        document.getElementById('close-mobile-nav').addEventListener('click', function() {
            const drawer = document.getElementById('mobile-nav-drawer');
            const drawerPanel = document.getElementById('mobile-drawer');
            drawerPanel.classList.add('-translate-x-full');
            setTimeout(() => {
                drawer.classList.add('hidden');
            }, 300);
        });

        document.getElementById('mobile-nav-overlay').addEventListener('click', function() {
            document.getElementById('close-mobile-nav').click();
        });

        // ========================================
        // PAGE ROUTING
        // ========================================
        let currentPage = 'dashboard';

        function navigateToPage(pageName) {
            // Hide all pages
            document.querySelectorAll('.page-content').forEach(page => {
                page.classList.add('hidden');
            });
            
            // Show requested page
            const targetPage = document.getElementById(`${pageName}-page`);
            if (targetPage) {
                targetPage.classList.remove('hidden');
                currentPage = pageName;
                
                // Update navigation active states
                updateNavActiveStates(pageName);
                
                // Page-specific actions
                if (pageName === 'interventions') {
                    renderInterventionsTable();
                    updateInterventionsStats();
                    renderInterventionsCharts();
                }
                
                if (pageName === 'notifications') {
                    if (filteredNotifications.length === 0) {
                        renderNotificationsFeed();
                    }
                }
                
                if (pageName === 'pipeline') {
                    if (allDeals.length === 0) {
                        initializePipelineData();
                    }
                }
                
                if (pageName === 'property-index') {
                    if (typeof properties !== 'undefined' && properties.length === 0) {
                        generatePropertyData();
                    }
                    if (typeof updatePropertyDisplay === 'function') {
                        updatePropertyDisplay();
                    }
                }
                
                if (pageName === 'add-property') {
                    // Initialize Add Property page
                    setTimeout(() => {
                        initAddPropertyPage();
                    }, 100);
                }
                
                // Sync content to collapsed nav
                syncMainContent();
                
                emitEvent('page_navigated', { page: pageName });
            }
        }

        function updateNavActiveStates(pageName) {
            // Remove active state from all nav items
            document.querySelectorAll('[id^="nav-"]').forEach(item => {
                item.classList.remove('bg-stone', 'text-slate', 'font-medium');
                item.classList.add('text-concrete');
            });
            
            // Add active state to current page nav item
            const navItems = document.querySelectorAll(`#nav-${pageName}, #nav-${pageName}-collapsed`);
            navItems.forEach(item => {
                if (item) {
                    item.classList.remove('text-concrete');
                    item.classList.add('bg-stone', 'text-slate', 'font-medium');
                }
            });
        }

        // Navigation click handlers
        document.getElementById('nav-dashboard')?.addEventListener('click', () => navigateToPage('dashboard'));
        document.getElementById('nav-dashboard-collapsed')?.addEventListener('click', () => navigateToPage('dashboard'));
        document.getElementById('nav-interventions')?.addEventListener('click', () => navigateToPage('interventions'));
        document.getElementById('nav-interventions-collapsed')?.addEventListener('click', () => navigateToPage('interventions'));
        document.getElementById('nav-notifications')?.addEventListener('click', () => navigateToPage('notifications'));
        document.getElementById('nav-notifications-collapsed')?.addEventListener('click', () => navigateToPage('notifications'));

        // Notifications Panel Toggle
        document.getElementById('notifications-btn').addEventListener('click', function() {
            const panel = document.getElementById('notifications-panel');
            panel.classList.remove('translate-x-full');
        });

        document.getElementById('close-notifications').addEventListener('click', function() {
            const panel = document.getElementById('notifications-panel');
            panel.classList.add('translate-x-full');
        });

        // Initialize Highcharts
        Highcharts.chart('cycle-time-chart', {
            chart: { type: 'line', backgroundColor: 'transparent' },
            title: { text: null },
            credits: { enabled: false },
            legend: { enabled: false },
            xAxis: {
                categories: ['Lead', 'Viewing', 'Proposal', 'HoTs', 'Signed', 'Live'],
                gridLineWidth: 1,
                gridLineColor: '#F0F0F0'
            },
            yAxis: { title: { text: 'Days' }, gridLineColor: '#F0F0F0' },
            series: [{
                name: 'Average Days',
                data: [3.2, 5.1, 8.4, 22.0, 12.0, 6.8],
                color: '#252525',
                marker: { fillColor: '#252525', radius: 4 }
            }],
            tooltip: {
                formatter: function() {
                    const targets = { 'Lead': 4, 'Viewing': 6, 'Proposal': 10, 'HoTs': 18, 'Signed': 10, 'Live': 7 };
                    const variance = this.y - targets[this.x];
                    const status = variance <= 0 ? 'On target' : `${variance.toFixed(1)}d over target`;
                    return `<b>${this.x}</b><br/>Current: ${this.y}d<br/>Target: ${targets[this.x]}d<br/>${status}`;
                }
            },
            plotOptions: {
                line: {
                    dataLabels: { enabled: true, format: '{y}d' }
                }
            }
        });

        Highcharts.chart('bottleneck-heatmap', {
            chart: { type: 'heatmap', backgroundColor: 'transparent' },
            title: { text: null },
            credits: { enabled: false },
            xAxis: { categories: ['Lead', 'Viewing', 'Proposal', 'HoTs', 'Signed', 'Onboarding', 'Live'] },
            yAxis: { categories: ['0-5d', '6-10d', '11-15d', '>15d'], title: null },
            colorAxis: {
                min: 0, max: 30,
                stops: [[0, '#10B981'], [0.3, '#F59E0B'], [0.7, '#EF4444'], [1, '#DC2626']]
            },
            legend: { enabled: false },
            series: [{
                name: 'Deal Count',
                data: [
                    [0, 0, 12], [1, 0, 8], [2, 0, 15], [3, 0, 5], [4, 0, 18], [5, 0, 22], [6, 0, 14],
                    [0, 1, 5], [1, 1, 12], [2, 1, 8], [3, 1, 25], [4, 1, 12], [5, 1, 8], [6, 1, 6],
                    [0, 2, 2], [1, 2, 6], [2, 2, 18], [3, 2, 15], [4, 2, 8], [5, 2, 4], [6, 2, 3],
                    [0, 3, 1], [1, 3, 2], [2, 3, 8], [3, 3, 12], [4, 3, 6], [5, 3, 2], [6, 3, 1]
                ],
                dataLabels: { enabled: true, color: '#FFFFFF', style: { fontSize: '10px' } }
            }],
            tooltip: {
                formatter: function() {
                    const stages = ['Lead', 'Viewing', 'Proposal', 'HoTs', 'Signed', 'Onboarding', 'Live'];
                    const timeBands = ['0-5d', '6-10d', '11-15d', '>15d'];
                    const causes = ['Client delays', 'Document review', 'Legal redlines', 'Vendor delays'];
                    return `<b>Stage:</b> ${stages[this.point.x]}<br/><b>Time Band:</b> ${timeBands[this.point.y]}<br/><b>Deal Count:</b> ${this.point.value}<br/><b>Top Cause:</b> ${causes[this.point.y]}`;
                }
            }
        });

        // Analytics Events
        function emitEvent(eventName, data) {
            console.log('Analytics Event:', eventName, data);
        }

        function openDealRoomFiltered() {
            emitEvent('bottleneck_matrix_filter_applied', {
                stage: 'all',
                user_id: 'exec_001',
                timestamp: new Date().toISOString()
            });
        }

        function emitNavigationEvent(eventType, data) {
            console.log('Navigation Event:', {
                event: eventType,
                timestamp: new Date().toISOString(),
                user_id: 'exec_001',
                role: 'executive',
                ...data
            });
        }

        document.querySelectorAll('[id^="nav-"]').forEach(element => {
            element.addEventListener('click', function(e) {
                const route = this.getAttribute('href') || this.id;
                emitNavigationEvent('nav_item_clicked', {
                    route: route,
                    navigation_state: document.getElementById('nav-option-1').classList.contains('hidden') ? 'collapsed' : 'expanded'
                });
            });
        });

        document.addEventListener('keydown', function(e) {
            if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
                e.preventDefault();
                emitNavigationEvent('keyboard_shortcut_used', { shortcut: 'global_search' });
            }
        });

        document.querySelectorAll('[id^="nav-"]').forEach(element => {
            element.addEventListener('focus', function() {
                this.classList.add('ring-2', 'ring-slate', 'ring-offset-2');
            });
            element.addEventListener('blur', function() {
                this.classList.remove('ring-2', 'ring-slate', 'ring-offset-2');
            });
        });

        // ========================================
        // QUICK ACTIONS & INTERVENTION TRIGGERS
        // ========================================
        
        // Main "Create Intervention" button in header
        document.querySelectorAll('button').forEach(btn => {
            if (btn.textContent.trim() === 'Create Intervention') {
                btn.addEventListener('click', function() {
                    openInterventionDrawer({ 
                        stage: 'Dashboard', 
                        metric: 'General intervention',
                        deals: 'N/A'
                    });
                });
            }
        });

        // At-Risk Deal intervention buttons
        document.querySelectorAll('#risk-and-interventions button').forEach(btn => {
            const text = btn.textContent.trim();
            if (text === 'Intervene' || text === 'Escalate') {
                btn.addEventListener('click', function() {
                    const card = this.closest('.flex');
                    const dealName = card.querySelector('h3').textContent;
                    const context = card.querySelector('.text-sm.text-concrete').textContent;
                    const owner = card.querySelector('.text-xs.text-concrete').textContent.match(/(\w+) assigned/)?.[1] || 'Executive';
                    
                    openInterventionDrawer({
                        stage: 'At-Risk Deal',
                        metric: context,
                        deals: dealName,
                        owner: owner
                    });
                    
                    emitEvent('at_risk_action', {
                        deal: dealName,
                        action: text.toLowerCase()
                    });
                });
            }
        });

        // Quick action buttons in header
        document.querySelectorAll('button[title="Add Property"]').forEach(btn => {
            btn.addEventListener('click', function() {
                navigateToPage('add-property');
                emitEvent('quick_action_clicked', { type: 'add_property' });
            });
        });

        document.querySelectorAll('button[title="Create Proposal"]').forEach(btn => {
            btn.addEventListener('click', function() {
                showToast('Create Proposal feature coming soon', 'info');
                emitEvent('quick_action_clicked', { type: 'create_proposal' });
            });
        });

        // Quick Actions section buttons
        document.querySelectorAll('#quick-actions button').forEach(btn => {
            btn.addEventListener('click', function() {
                const action = this.querySelector('span:last-child').textContent.trim();
                if (action === 'Create Intervention') {
                    openInterventionDrawer({ 
                        stage: 'Quick Action', 
                        metric: 'General intervention'
                    });
                } else {
                    showToast(`${action} feature coming soon`, 'info');
                    emitEvent('quick_action_clicked', { type: action.toLowerCase().replace(/\s+/g, '_') });
                }
            });
        });

        // Deal Funnel "View Details" buttons
        document.querySelectorAll('#deal-funnel button').forEach(btn => {
            if (btn.textContent.includes('View Details')) {
                btn.addEventListener('click', function() {
                    const stage = this.closest('.relative').querySelector('.text-xs.text-slate').textContent;
                    showToast(`Viewing ${stage} deals`, 'info');
                    emitEvent('funnel_bar_clicked', { stage });
                });
            }
        });

        // Heatmap cell clicks
        const heatmapChart = Highcharts.charts.find(chart => chart && chart.options.chart.type === 'heatmap');
        if (heatmapChart) {
            heatmapChart.series[0].points.forEach(point => {
                point.graphic.element.style.cursor = 'pointer';
                point.graphic.element.addEventListener('click', function() {
                    const stages = ['Lead', 'Viewing', 'Proposal', 'HoTs', 'Signed', 'Onboarding', 'Live'];
                    const timeBands = ['0-5d', '6-10d', '11-15d', '>15d'];
                    const stage = stages[point.x];
                    const band = timeBands[point.y];
                    
                    showToast(`Viewing ${stage} deals in ${band} delay band`, 'info');
                    emitEvent('heatmap_cell_clicked', { stage, band, count: point.value });
                });
            });
        }

        // Cycle time chart point clicks
        const cycleChart = Highcharts.charts.find(chart => chart && chart.options.chart.type === 'line');
        if (cycleChart) {
            cycleChart.series[0].points.forEach(point => {
                point.graphic.element.style.cursor = 'pointer';
                point.graphic.element.addEventListener('click', function() {
                    const stage = point.category;
                    showToast(`Viewing ${stage} stage details`, 'info');
                    emitEvent('cycle_time_point_clicked', { stage, days: point.y });
                });
            });
        }

        // KPI tile clicks
        document.querySelectorAll('#kpi-tiles .bg-white').forEach(tile => {
            tile.style.cursor = 'pointer';
            tile.addEventListener('click', function() {
                const title = this.querySelector('h3').textContent;
                showToast(`Opening ${title} analytics`, 'info');
                emitEvent('kpi_tile_clicked', { metric: title });
            });
        });

        // Timeframe selector
        document.querySelectorAll('.fa-calendar').forEach(icon => {
            const container = icon.closest('.flex');
            if (container) {
                container.style.cursor = 'pointer';
                container.addEventListener('click', function() {
                    showToast('Timeframe selector coming soon', 'info');
                    emitEvent('timeframe_selector_clicked', {});
                });
            }
        });

        // Global search
        const searchInput = document.querySelector('input[placeholder*="Search deals"]');
        if (searchInput) {
            searchInput.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    const query = this.value.trim();
                    if (query) {
                        showToast(`Searching for: "${query}"`, 'info');
                        emitEvent('global_search', { query });
                    }
                }
            });
        }

        // ========================================
        // CONTENT SYNCHRONIZATION
        // ========================================
        function syncMainContent() {
            const expandedContent = document.getElementById('main-content-expanded');
            const collapsedContent = document.getElementById('main-content-collapsed');
            
            // Clone the content from expanded to collapsed
            if (expandedContent && collapsedContent) {
                collapsedContent.innerHTML = expandedContent.innerHTML;
            }
        }

        // ========================================
        // SEARCH, FILTERS & SORTING
        // ========================================
        
        // Search input
        document.addEventListener('DOMContentLoaded', function() {
            const searchInput = document.getElementById('interventions-search');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    renderInterventionsTable();
                    emitEvent('interventions_search', { query: this.value });
                });
            }
            
            // Filter dropdowns
            const filters = ['filter-stage', 'filter-owner', 'filter-status', 'filter-priority'];
            filters.forEach(filterId => {
                const filterEl = document.getElementById(filterId);
                if (filterEl) {
                    filterEl.addEventListener('change', function() {
                        renderInterventionsTable();
                        emitEvent('interventions_filter_changed', { 
                            filter: filterId, 
                            value: this.value 
                        });
                    });
                }
            });
            
            // Table sorting
            document.querySelectorAll('[data-sort]').forEach(header => {
                header.addEventListener('click', function() {
                    const column = this.getAttribute('data-sort');
                    
                    if (sortColumn === column) {
                        sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
                    } else {
                        sortColumn = column;
                        sortDirection = 'desc';
                    }
                    
                    // Update sort icons
                    document.querySelectorAll('[data-sort] i').forEach(icon => {
                        icon.className = 'fa-solid fa-sort ml-1';
                    });
                    
                    const icon = this.querySelector('i');
                    if (sortDirection === 'asc') {
                        icon.className = 'fa-solid fa-sort-up ml-1';
                    } else {
                        icon.className = 'fa-solid fa-sort-down ml-1';
                    }
                    
                    renderInterventionsTable();
                    emitEvent('interventions_sorted', { column, direction: sortDirection });
                });
            });
            
            // Export button
            const exportBtn = document.getElementById('export-interventions');
            if (exportBtn) {
                exportBtn.addEventListener('click', function() {
                    exportInterventionsToCSV();
                });
            }
            
            // New intervention button on interventions page
            const newInterventionBtn = document.getElementById('new-intervention-btn');
            if (newInterventionBtn) {
                newInterventionBtn.addEventListener('click', function() {
                    openInterventionDrawer({ stage: 'General' });
                });
            }
        });
        
        function exportInterventionsToCSV() {
            const headers = ['ID', 'Owner', 'Stage', 'Context', 'Priority', 'Status', 'Due Date', 'Expected Impact', 'Created At'];
            const rows = filteredInterventions.map(i => [
                i.id,
                i.owner,
                i.stage,
                i.context,
                i.priority,
                i.status,
                i.dueDate,
                i.expectedImpact,
                i.createdAt
            ]);
            
            let csv = headers.join(',') + '\n';
            rows.forEach(row => {
                csv += row.map(cell => `"${cell}"`).join(',') + '\n';
            });
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `interventions_${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            
            showToast('Interventions exported successfully', 'success');
            emitEvent('interventions_exported', { count: filteredInterventions.length });
        }

        // ========================================
        // PROPERTY INDEX FUNCTIONALITY
        // ========================================
        
        let properties = [];
        let filteredProperties = [];
        let currentPropertyView = 'grid';
        let currentPropertyPage = 1;
        const propertiesPerPage = 12;
        
        function generatePropertyData() {
            const locations = ['London', 'Manchester', 'Birmingham', 'Edinburgh', 'Glasgow'];
            const sectors = ['Office', 'Retail', 'Industrial', 'Mixed Use'];
            const availabilities = ['Available', 'Under Offer', 'Let'];
            const brokers = ['Savills', 'CBRE', 'JLL', 'Knight Frank', 'Cushman & Wakefield'];
            const propertyNames = [
                'Canary Wharf Tower', 'The Shard Office Suite', 'Liverpool Street Tower', 'Broadgate Circle',
                'City Point', 'Tower 42', 'Heron Tower', 'Leadenhall Building', 'Walkie Talkie',
                'Gherkin Office Space', 'Bishopsgate Tower', 'Fenchurch Street', 'London Wall Place',
                'Principal Place', 'Nova Victoria', 'Paddington Central', 'Kings Cross Quarter',
                'MediaCityUK', 'Spinningfields', 'Deansgate Square', 'First Street', 'Circle Square',
                'Brindleyplace', 'Snowhill', 'Arena Central', 'Paradise Birmingham', 'Exchange Square',
                'Edinburgh Quarter', 'Capital Square', 'Haymarket', 'Exchange Plaza', 'St James Centre',
                'Buchanan Galleries', 'Argyle Street', 'Pacific Quay', 'Finnieston', 'Merchant City'
            ];
            
            properties = [];
            for (let i = 0; i < 60; i++) {
                const location = locations[i % locations.length];
                const sector = sectors[i % sectors.length];
                const availability = availabilities[i % availabilities.length];
                const broker = brokers[i % brokers.length];
                const size = Math.floor(Math.random() * 40000) + 5000;
                const rent = Math.floor(Math.random() * 60) + 40;
                
                // Use real Unsplash commercial property images
                const imageUrls = [
                    'https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?w=400&h=300&fit=crop',
                    'https://images.unsplash.com/photo-1577495508048-b635879837f1?w=400&h=300&fit=crop',
                    'https://images.unsplash.com/photo-1582407947304-fd86f028f716?w=400&h=300&fit=crop',
                    'https://images.unsplash.com/photo-1565008576549-57569a49371d?w=400&h=300&fit=crop',
                    'https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?w=400&h=300&fit=crop',
                    'https://images.unsplash.com/photo-1497366216548-37526070297c?w=400&h=300&fit=crop',
                    'https://images.unsplash.com/photo-1497366754035-f200968a6e72?w=400&h=300&fit=crop',
                    'https://images.unsplash.com/photo-1497366412874-3415097a27e7?w=400&h=300&fit=crop',
                    'https://images.unsplash.com/photo-1524758631624-e2822e304c36?w=400&h=300&fit=crop',
                    'https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=400&h=300&fit=crop'
                ];
                
                properties.push({
                    id: `PROP-${String(i + 1).padStart(3, '0')}`,
                    name: `${propertyNames[i % propertyNames.length]} ${i > 35 ? 'Phase ' + Math.ceil((i-35)/5) : ''}`.trim(),
                    address: `${Math.floor(Math.random() * 200) + 1} ${['High Street', 'Market Street', 'Queen Street', 'King Street', 'George Street'][i % 5]}, ${location}`,
                    image: imageUrls[i % imageUrls.length],
                    size: size,
                    rent: rent,
                    availability: availability,
                    sector: sector,
                    location: location,
                    broker: broker,
                    brokerContact: ['James Mitchell', 'Sarah Thompson', 'David Chen', 'Emma Wilson', 'Michael Brown'][i % 5]
                });
            }
            
            filteredProperties = [...properties];
        }
        
        function updatePropertyDisplay() {
            if (currentPropertyView === 'grid') {
                renderPropertiesGrid();
                document.getElementById('properties-grid').classList.remove('hidden');
                document.getElementById('properties-table').classList.add('hidden');
            } else {
                renderPropertiesTable();
                document.getElementById('properties-grid').classList.add('hidden');
                document.getElementById('properties-table').classList.remove('hidden');
            }
            updatePropertyPagination();
        }
        
        function renderPropertiesGrid() {
            const grid = document.getElementById('properties-grid');
            if (!grid) return;
            
            const start = (currentPropertyPage - 1) * propertiesPerPage;
            const end = start + propertiesPerPage;
            const pageProperties = filteredProperties.slice(start, end);
            
            grid.innerHTML = pageProperties.map(prop => `
                <div class="bg-white border border-stone rounded-lg overflow-hidden hover:shadow-lg transition-shadow">
                    <img src="${prop.image}" alt="${prop.name}" class="w-full h-48 object-cover">
                    <div class="p-4">
                        <h3 class="font-semibold text-slate mb-1">${prop.name}</h3>
                        <p class="text-sm text-concrete mb-3">${prop.address}</p>
                        <div class="flex items-center justify-between mb-3">
                            <span class="text-xs text-concrete">${prop.size.toLocaleString()} sq ft</span>
                            <span class="text-xs font-medium text-slate">£${prop.rent} psf</span>
                        </div>
                        <div class="flex items-center justify-between mb-3">
                            <span class="px-2 py-1 bg-success bg-opacity-10 text-success text-xs rounded">${prop.availability}</span>
                            <span class="text-xs text-concrete">${prop.broker}</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="flex-1 px-3 py-2 bg-slate text-white text-xs rounded hover:bg-opacity-90">
                                <i class="fa-solid fa-plus mr-1"></i>Add to Pipeline
                            </button>
                            <button class="px-3 py-2 border border-stone text-slate text-xs rounded hover:bg-stone">
                                <i class="fa-solid fa-share"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        function renderPropertiesTable() {
            const tbody = document.getElementById('properties-table-body');
            if (!tbody) return;
            
            const start = (currentPropertyPage - 1) * propertiesPerPage;
            const end = start + propertiesPerPage;
            const pageProperties = filteredProperties.slice(start, end);
            
            tbody.innerHTML = pageProperties.map(prop => `
                <tr class="border-t border-stone hover:bg-stone">
                    <td class="px-4 py-3">
                        <div class="font-medium text-slate">${prop.name}</div>
                        <div class="text-xs text-concrete">${prop.address}</div>
                    </td>
                    <td class="px-4 py-3 text-sm text-slate">${prop.location}</td>
                    <td class="px-4 py-3 text-sm text-slate">${prop.size.toLocaleString()} sq ft</td>
                    <td class="px-4 py-3 text-sm text-slate">£${prop.rent} psf</td>
                    <td class="px-4 py-3 text-sm text-slate">${prop.sector}</td>
                    <td class="px-4 py-3">
                        <span class="px-2 py-1 bg-success bg-opacity-10 text-success text-xs rounded">${prop.availability}</span>
                    </td>
                    <td class="px-4 py-3 text-sm text-slate">${prop.broker}</td>
                    <td class="px-4 py-3">
                        <button class="px-3 py-1 bg-slate text-white text-xs rounded hover:bg-opacity-90">
                            Add to Pipeline
                        </button>
                    </td>
                </tr>
            `).join('');
        }
        
        function updatePropertyPagination() {
            document.getElementById('properties-showing').textContent = filteredProperties.length;
            document.getElementById('properties-total').textContent = properties.length;
        }
        
        function filterProperties() {
            const searchQuery = document.getElementById('property-search')?.value.toLowerCase() || '';
            const locationFilter = document.getElementById('filter-location')?.value || '';
            const sizeFilter = document.getElementById('filter-size')?.value || '';
            const availabilityFilter = document.getElementById('filter-availability')?.value || '';
            const sectorFilter = document.getElementById('filter-sector')?.value || '';
            
            filteredProperties = properties.filter(prop => {
                const matchesSearch = !searchQuery || 
                    prop.name.toLowerCase().includes(searchQuery) ||
                    prop.address.toLowerCase().includes(searchQuery) ||
                    prop.broker.toLowerCase().includes(searchQuery);
                    
                const matchesLocation = !locationFilter || prop.location === locationFilter;
                const matchesAvailability = !availabilityFilter || prop.availability === availabilityFilter;
                const matchesSector = !sectorFilter || prop.sector === sectorFilter;
                
                let matchesSize = true;
                if (sizeFilter === 'small') matchesSize = prop.size < 5000;
                else if (sizeFilter === 'medium') matchesSize = prop.size >= 5000 && prop.size <= 20000;
                else if (sizeFilter === 'large') matchesSize = prop.size > 20000;
                
                return matchesSearch && matchesLocation && matchesSize && matchesAvailability && matchesSector;
            });
            
            currentPropertyPage = 1;
            updatePropertyDisplay();
        }
        
        function exportPropertiesCSV() {
            const headers = ['ID', 'Name', 'Address', 'Location', 'Size (sq ft)', 'Rent (psf)', 'Sector', 'Availability', 'Broker'];
            const rows = filteredProperties.map(prop => [
                prop.id,
                prop.name,
                prop.address,
                prop.location,
                prop.size,
                prop.rent,
                prop.sector,
                prop.availability,
                prop.broker
            ]);
            
            const csvContent = [headers, ...rows].map(row => row.join(',')).join('\n');
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `properties_${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            
            showToast('Properties exported successfully', 'success');
            emitEvent('properties_exported', { count: filteredProperties.length });
        }
        
        function setupPropertyIndexEventListeners() {
            // Search
            document.getElementById('property-search')?.addEventListener('input', filterProperties);
            
            // Filters
            document.getElementById('filter-location')?.addEventListener('change', filterProperties);
            document.getElementById('filter-size')?.addEventListener('change', filterProperties);
            document.getElementById('filter-availability')?.addEventListener('change', filterProperties);
            document.getElementById('filter-sector')?.addEventListener('change', filterProperties);
            
            // View toggle
            document.getElementById('view-grid-btn')?.addEventListener('click', function() {
                currentPropertyView = 'grid';
                this.classList.add('bg-slate', 'text-white');
                this.classList.remove('text-concrete');
                document.getElementById('view-table-btn').classList.remove('bg-slate', 'text-white');
                document.getElementById('view-table-btn').classList.add('text-concrete');
                updatePropertyDisplay();
            });
            
            document.getElementById('view-table-btn')?.addEventListener('click', function() {
                currentPropertyView = 'table';
                this.classList.add('bg-slate', 'text-white');
                this.classList.remove('text-concrete');
                document.getElementById('view-grid-btn').classList.remove('bg-slate', 'text-white');
                document.getElementById('view-grid-btn').classList.add('text-concrete');
                updatePropertyDisplay();
            });
            
            // Pagination
            document.getElementById('properties-prev-page')?.addEventListener('click', function() {
                if (currentPropertyPage > 1) {
                    currentPropertyPage--;
                    updatePropertyDisplay();
                }
            });
            
            document.getElementById('properties-next-page')?.addEventListener('click', function() {
                const maxPage = Math.ceil(filteredProperties.length / propertiesPerPage);
                if (currentPropertyPage < maxPage) {
                    currentPropertyPage++;
                    updatePropertyDisplay();
                }
            });
            
            // Export
            document.getElementById('export-properties-btn')?.addEventListener('click', exportPropertiesCSV);
            
            // Add Property button
            document.getElementById('property-index-add-btn')?.addEventListener('click', function() {
                navigateToPage('add-property');
                emitEvent('add_property_from_index', {
                    user_id: 'executive_001',
                    timestamp: new Date().toISOString()
                });
            });
        }

        // Setup Property Index Navigation
        function setupPropertyIndexNavigation() {
            document.getElementById('nav-property-index')?.addEventListener('click', () => navigateToPage('property-index'));
            document.getElementById('nav-property-index-collapsed')?.addEventListener('click', () => navigateToPage('property-index'));
            document.getElementById('nav-property-index-mobile')?.addEventListener('click', () => {
                navigateToPage('property-index');
                document.getElementById('mobile-nav-drawer')?.classList.add('translate-x-full');
            });
        }

        // ========================================
        // INITIALIZATION
        // ========================================
        document.addEventListener('DOMContentLoaded', function() {
            emitEvent('dashboard_viewed', {
                user_id: 'exec_001',
                role: 'executive',
                timestamp: new Date().toISOString()
            });
            
            // Sync content between both navigation states
            syncMainContent();
            
            // Initialize notifications panel
            updateNotificationsPanel();
            
            // Set default due date
            setDefaultDueDate();
            
            // Initialize search
            initializeSearch();
            
            // Setup navigation handlers
            setupPropertyIndexNavigation();
            
            // Setup Property Index event listeners
            setupPropertyIndexEventListeners();
        });

        // ========================================
        // GLOBAL SEARCH FUNCTIONALITY
        // ========================================
        
        let searchData = [];
        let currentSearchFilter = 'all';
        let currentSearchSort = 'relevance';
        let currentSearchQuery = '';

        function initializeSearch() {
            // Generate dummy search data
            generateSearchData();
            
            // Search navigation click handlers
            document.getElementById('nav-search')?.addEventListener('click', function() {
                navigateToPage('search');
                performSearch('');
            });
            
            document.getElementById('nav-search-collapsed')?.addEventListener('click', function() {
                navigateToPage('search');
                performSearch('');
            });
            
            // Header search input
            const headerSearch = document.querySelector('input[placeholder*="Search deals"]');
            if (headerSearch) {
                headerSearch.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter') {
                        const query = this.value.trim();
                        navigateToPage('search');
                        performSearch(query);
                    }
                });
            }
            
            // Filter buttons
            document.querySelectorAll('.search-filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    currentSearchFilter = this.dataset.filter;
                    document.querySelectorAll('.search-filter-btn').forEach(b => {
                        b.classList.remove('bg-slate', 'text-white');
                        b.classList.add('bg-gray-100', 'text-concrete');
                    });
                    this.classList.remove('bg-gray-100', 'text-concrete');
                    this.classList.add('bg-slate', 'text-white');
                    renderSearchResults();
                });
            });
            
            // Category filter cards
            document.querySelectorAll('[data-category-filter]').forEach(card => {
                card.addEventListener('click', function() {
                    const filter = this.dataset.categoryFilter;
                    currentSearchFilter = filter;
                    document.querySelectorAll('.search-filter-btn').forEach(btn => {
                        btn.classList.remove('bg-slate', 'text-white');
                        btn.classList.add('bg-gray-100', 'text-concrete');
                        if (btn.dataset.filter === filter) {
                            btn.classList.remove('bg-gray-100', 'text-concrete');
                            btn.classList.add('bg-slate', 'text-white');
                        }
                    });
                    renderSearchResults();
                });
            });
            
            // Sort dropdown
            const sortSelect = document.getElementById('search-sort');
            if (sortSelect) {
                sortSelect.addEventListener('change', function() {
                    currentSearchSort = this.value;
                    renderSearchResults();
                });
            }
        }

        function generateSearchData() {
            searchData = [
                // Deals (8 total)
                {
                    type: 'deals',
                    id: 'CW-2024-007',
                    title: 'Canary Wharf Tower - Premium Office Space',
                    description: '25,000 sq ft premium office space in Canary Wharf Tower. Contract signed, onboarding in progress.',
                    status: 'Contract Signed',
                    owner: 'Max Chen',
                    date: '2024-10-01T10:00:00Z',
                    metadata: { size: '25,000 sq ft', stage: 'Onboarding', value: '£8.2M' }
                },
                {
                    type: 'deals',
                    id: 'CW-2024-012',
                    title: 'Canary Wharf Business Centre - Flexible Workspace',
                    description: 'Modern co-working space with flexible terms. Available spaces from 100-5,000 sq ft.',
                    status: 'Viewing Scheduled',
                    owner: 'Tom Parker',
                    date: '2024-09-28T14:30:00Z',
                    metadata: { size: '100-5,000 sq ft', stage: 'Viewing', value: '£2.5M' }
                },
                {
                    type: 'deals',
                    id: 'LS-2024-034',
                    title: 'Liverpool Street - Corporate Headquarters',
                    description: 'Full floor corporate HQ with 35,000 sq ft. Negotiating final terms with legal team.',
                    status: 'HoTs Stage',
                    owner: 'Dani Rodriguez',
                    date: '2024-09-26T11:00:00Z',
                    metadata: { size: '35,000 sq ft', stage: 'HoTs', value: '£12.5M' }
                },
                {
                    type: 'deals',
                    id: 'SH-2024-018',
                    title: 'The Shard - Executive Suite Package',
                    description: 'Premium executive suites on floors 25-27. Client reviewing proposal.',
                    status: 'Proposal Sent',
                    owner: 'Tom Parker',
                    date: '2024-09-24T15:30:00Z',
                    metadata: { size: '18,500 sq ft', stage: 'Proposal', value: '£15.8M' }
                },
                {
                    type: 'deals',
                    id: 'MC-2024-056',
                    title: 'Manchester City Centre - Tech Hub',
                    description: 'Modern tech workspace with high-speed connectivity. Viewing completed successfully.',
                    status: 'Post-Viewing',
                    owner: 'Max Chen',
                    date: '2024-09-22T09:45:00Z',
                    metadata: { size: '22,000 sq ft', stage: 'Post-Viewing', value: '£6.8M' }
                },
                {
                    type: 'deals',
                    id: 'ED-2024-091',
                    title: 'Edinburgh Financial District - Banking Space',
                    description: 'Secure banking facility with vault and trading floor. Due diligence in progress.',
                    status: 'Due Diligence',
                    owner: 'Dani Rodriguez',
                    date: '2024-09-20T13:20:00Z',
                    metadata: { size: '28,000 sq ft', stage: 'Due Diligence', value: '£9.2M' }
                },
                {
                    type: 'deals',
                    id: 'BR-2024-073',
                    title: 'Birmingham Business Park - Multi-Tenant Complex',
                    description: 'Large multi-tenant office complex with parking. Initial lead qualification.',
                    status: 'Lead',
                    owner: 'Tom Parker',
                    date: '2024-09-18T10:15:00Z',
                    metadata: { size: '45,000 sq ft', stage: 'Lead', value: '£11.5M' }
                },
                {
                    type: 'deals',
                    id: 'GL-2024-029',
                    title: 'Glasgow Waterfront - Creative Studios',
                    description: 'Converted warehouse space for creative industries. Contract being finalized.',
                    status: 'Contract Review',
                    owner: 'Max Chen',
                    date: '2024-09-15T14:00:00Z',
                    metadata: { size: '15,500 sq ft', stage: 'Contract', value: '£4.2M' }
                },
                
                // Properties (8 total)
                {
                    type: 'properties',
                    id: 'PROP-089',
                    image: 'images/cqHY8w4FIoW7.jpg',
                    title: 'Canary Wharf One',
                    description: 'Grade A office building with river views. 50,000 sq ft available across multiple floors.',
                    status: 'Available',
                    owner: 'Tom Richardson',
                    date: '2024-09-25T09:00:00Z',
                    metadata: { size: '50,000 sq ft', floors: 'Floors 15-18', available: 'Q1 2025' }
                },
                {
                    type: 'properties',
                    id: 'PROP-124',
                    image: 'images/U9Zn0OlnVwdM.jpg',
                    title: 'Canary Wharf Executive Floor',
                    description: 'Premium executive floor with panoramic city views. Fully fitted and ready to move in.',
                    status: 'Available',
                    owner: 'Tom Richardson',
                    date: '2024-09-20T11:00:00Z',
                    metadata: { size: '8,500 sq ft', floors: 'Floor 42', available: 'Immediate' }
                },
                {
                    type: 'properties',
                    id: 'PROP-156',
                    image: 'images/RRtXm8mNwo4c.jpg',
                    title: 'The Shard - Premium Office Suites',
                    description: 'Iconic building with stunning views. Multiple suite configurations available.',
                    status: 'Available',
                    owner: 'Tom Richardson',
                    date: '2024-09-18T10:30:00Z',
                    metadata: { size: '12,000-30,000 sq ft', floors: 'Floors 20-28', available: 'Q2 2025' }
                },
                {
                    type: 'properties',
                    id: 'PROP-178',
                    image: 'images/PJWDHqTFtPVA.jpg',
                    title: 'Liverpool Street Tower - City Views',
                    description: 'Modern office space in the heart of the financial district with excellent transport links.',
                    status: 'Available',
                    owner: 'Dani Rodriguez',
                    date: '2024-09-16T14:00:00Z',
                    metadata: { size: '18,000 sq ft', floors: 'Floors 10-12', available: 'Immediate' }
                },
                {
                    type: 'properties',
                    id: 'PROP-192',
                    image: 'images/Rb5VI8z9v4XW.jpg',
                    title: 'Manchester Media City - Creative Hub',
                    description: 'Purpose-built creative workspace with production facilities and collaboration areas.',
                    status: 'Available',
                    owner: 'Max Chen',
                    date: '2024-09-14T11:15:00Z',
                    metadata: { size: '25,000 sq ft', floors: 'Ground-3rd Floor', available: 'Q1 2025' }
                },
                {
                    type: 'properties',
                    id: 'PROP-205',
                    image: 'images/h3UwVU7EAwcF.jpg',
                    title: 'Edinburgh New Town - Heritage Building',
                    description: 'Beautifully restored Georgian building with modern amenities. Perfect for professional services.',
                    status: 'Available',
                    owner: 'Tom Richardson',
                    date: '2024-09-12T09:45:00Z',
                    metadata: { size: '8,000 sq ft', floors: '2nd-3rd Floor', available: 'Immediate' }
                },
                {
                    type: 'properties',
                    id: 'PROP-218',
                    image: 'images/RAj442h1rUO5.webp',
                    title: 'Birmingham Business Quarter - Modern Workspace',
                    description: 'Contemporary office building with flexible floor plates and excellent amenities.',
                    status: 'Available',
                    owner: 'Dani Rodriguez',
                    date: '2024-09-10T13:30:00Z',
                    metadata: { size: '32,000 sq ft', floors: 'Floors 5-8', available: 'Q2 2025' }
                },
                {
                    type: 'properties',
                    id: 'PROP-231',
                    image: 'images/bnhFZlBYKFtU.jpg',
                    title: 'Glasgow Waterfront - Riverside Office',
                    description: 'Stunning riverside location with floor-to-ceiling windows and outdoor terraces.',
                    status: 'Available',
                    owner: 'Max Chen',
                    date: '2024-09-08T10:00:00Z',
                    metadata: { size: '15,000 sq ft', floors: 'Floors 1-2', available: 'Immediate' }
                },
                
                // Documents (8 total)
                {
                    type: 'documents',
                    id: 'DOC-2024-156',
                    title: 'HoT - Canary Wharf Tower Lease v2.pdf',
                    description: 'Heads of Terms document for Canary Wharf Tower lease agreement.',
                    status: 'Pending Review',
                    owner: 'Max Chen',
                    date: '2024-10-07T16:00:00Z',
                    metadata: { size: '2.1 MB', type: 'PDF', modified: '3 hours ago' }
                },
                {
                    type: 'documents',
                    id: 'DOC-2024-143',
                    title: 'Proposal - Canary Wharf Business Centre.docx',
                    description: 'Business proposal for flexible workspace solution at Canary Wharf.',
                    status: 'Approved',
                    owner: 'Tom Richardson',
                    date: '2024-10-06T10:00:00Z',
                    metadata: { size: '1.8 MB', type: 'Word', modified: '1 day ago' }
                },
                {
                    type: 'documents',
                    id: 'DOC-2024-138',
                    title: 'Canary Wharf Financial Model Q4 2024.xlsx',
                    description: 'Financial projections and analysis for Q4 2024 Canary Wharf deals.',
                    status: 'Final',
                    owner: 'Max Chen',
                    date: '2024-10-05T14:00:00Z',
                    metadata: { size: '3.2 MB', type: 'Excel', modified: '2 days ago' }
                },
                {
                    type: 'documents',
                    id: 'DOC-2024-129',
                    title: 'Liverpool Street - Due Diligence Report.pdf',
                    description: 'Comprehensive due diligence findings for Liverpool Street property.',
                    status: 'Final',
                    owner: 'Dani Rodriguez',
                    date: '2024-10-04T11:00:00Z',
                    metadata: { size: '5.8 MB', type: 'PDF', modified: '3 days ago' }
                },
                {
                    type: 'documents',
                    id: 'DOC-2024-115',
                    title: 'The Shard - Client Presentation.pptx',
                    description: 'Executive presentation deck for Shard executive suites proposal.',
                    status: 'Approved',
                    owner: 'Tom Parker',
                    date: '2024-10-03T09:30:00Z',
                    metadata: { size: '12.4 MB', type: 'PowerPoint', modified: '4 days ago' }
                },
                {
                    type: 'documents',
                    id: 'DOC-2024-098',
                    title: 'Manchester Tech Hub - Market Analysis.xlsx',
                    description: 'Market research and competitive analysis for Manchester tech workspace.',
                    status: 'Pending Review',
                    owner: 'Max Chen',
                    date: '2024-10-02T14:15:00Z',
                    metadata: { size: '2.9 MB', type: 'Excel', modified: '5 days ago' }
                },
                {
                    type: 'documents',
                    id: 'DOC-2024-087',
                    title: 'Edinburgh Banking Space - Compliance Checklist.docx',
                    description: 'Regulatory compliance requirements for banking facility fit-out.',
                    status: 'Final',
                    owner: 'Dani Rodriguez',
                    date: '2024-10-01T10:45:00Z',
                    metadata: { size: '1.2 MB', type: 'Word', modified: '6 days ago' }
                },
                {
                    type: 'documents',
                    id: 'DOC-2024-072',
                    title: 'Birmingham Business Park - Site Survey.pdf',
                    description: 'Detailed site survey and technical specifications for multi-tenant complex.',
                    status: 'Approved',
                    owner: 'Tom Parker',
                    date: '2024-09-30T13:00:00Z',
                    metadata: { size: '8.1 MB', type: 'PDF', modified: '1 week ago' }
                },
                
                // Tasks (4 total)
                {
                    type: 'tasks',
                    id: 'TASK-2024-089',
                    title: 'Network Installation - Canary Wharf Tower',
                    description: 'Install high-speed network infrastructure across all floors.',
                    status: 'In Progress',
                    owner: 'Dani Wilson',
                    date: '2024-10-05T09:00:00Z',
                    metadata: { due: 'Due in 2 days', progress: 65, vendor: 'TechFlow Solutions' }
                },
                {
                    type: 'tasks',
                    id: 'TASK-2024-102',
                    title: 'Security System Setup - Canary Wharf Plaza',
                    description: 'Deploy access control and surveillance systems.',
                    status: 'Ready for QA',
                    owner: 'Dani Wilson',
                    date: '2024-10-03T11:00:00Z',
                    metadata: { due: 'Due in 5 days', progress: 90, vendor: 'SecureSpace Ltd' }
                },
                {
                    type: 'tasks',
                    id: 'TASK-2024-078',
                    title: 'Furniture Delivery - The Shard Executive Suites',
                    description: 'Coordinate delivery and installation of premium executive furniture.',
                    status: 'In Progress',
                    owner: 'Tom Parker',
                    date: '2024-10-02T08:30:00Z',
                    metadata: { due: 'Due in 3 days', progress: 45, vendor: 'Premium Office Interiors' }
                },
                {
                    type: 'tasks',
                    id: 'TASK-2024-065',
                    title: 'Fire Safety Inspection - Liverpool Street Tower',
                    description: 'Schedule and complete mandatory fire safety compliance inspection.',
                    status: 'Blocked',
                    owner: 'Dani Wilson',
                    date: '2024-10-01T11:15:00Z',
                    metadata: { due: 'Overdue by 1 day', progress: 20, vendor: 'SafetyFirst Compliance' }
                },
                
                // Vendors (4 total)
                {
                    type: 'vendors',
                    id: 'VENDOR-045',
                    title: 'Canary Wharf Facilities Management',
                    description: 'Full-service facilities management for commercial properties.',
                    status: 'Approved',
                    owner: 'Operations',
                    date: '2024-09-15T10:00:00Z',
                    metadata: { category: 'Facilities', rating: '4.8/5', projects: '12 active' }
                },
                {
                    type: 'vendors',
                    id: 'VENDOR-067',
                    title: 'TechFlow Solutions',
                    description: 'IT infrastructure and network installation specialists.',
                    status: 'Active',
                    owner: 'IT',
                    date: '2024-09-10T14:00:00Z',
                    metadata: { category: 'Technology', rating: '4.9/5', projects: '8 active' }
                },
                {
                    type: 'vendors',
                    id: 'VENDOR-082',
                    title: 'Premium Office Interiors',
                    description: 'High-end office furniture and interior design services.',
                    status: 'Active',
                    owner: 'Design',
                    date: '2024-09-08T09:30:00Z',
                    metadata: { category: 'Interiors', rating: '4.7/5', projects: '6 active' }
                },
                {
                    type: 'vendors',
                    id: 'VENDOR-093',
                    title: 'SafetyFirst Compliance',
                    description: 'Fire safety, health & safety, and regulatory compliance specialists.',
                    status: 'Approved',
                    owner: 'Compliance',
                    date: '2024-09-05T11:00:00Z',
                    metadata: { category: 'Compliance', rating: '4.9/5', projects: '15 active' }
                }
            ];
        }

        function performSearch(query) {
            currentSearchQuery = query.toLowerCase();
            const startTime = performance.now();
            
            renderSearchResults();
            
            const endTime = performance.now();
            const duration = ((endTime - startTime) / 1000).toFixed(2);
            document.getElementById('search-duration').textContent = `${duration}s`;
            
            emitEvent('search_performed', { query, duration });
        }

        function renderSearchResults() {
            // Filter results
            let filtered = searchData;
            
            // Apply type filter
            if (currentSearchFilter !== 'all') {
                filtered = filtered.filter(item => item.type === currentSearchFilter);
            }
            
            // Apply search query
            if (currentSearchQuery) {
                filtered = filtered.filter(item => {
                    const searchText = `${item.title} ${item.description} ${item.id}`.toLowerCase();
                    return searchText.includes(currentSearchQuery);
                });
            }
            
            // Apply sorting
            filtered = sortSearchResults(filtered);
            
            // Update counts
            updateSearchCounts(filtered);
            
            // Render results
            const container = document.getElementById('search-results-container');
            const noResults = document.getElementById('no-results-state');
            
            if (filtered.length === 0) {
                container.innerHTML = '';
                noResults.classList.remove('hidden');
            } else {
                noResults.classList.add('hidden');
                container.innerHTML = renderResultsByType(filtered);
            }
            
            // Update summary
            const summary = document.getElementById('search-results-summary');
            if (currentSearchQuery) {
                summary.textContent = `Found ${filtered.length} result${filtered.length !== 1 ? 's' : ''} for "${currentSearchQuery}"`;
            } else {
                summary.textContent = `Showing ${filtered.length} result${filtered.length !== 1 ? 's' : ''}`;
            }
        }

        function sortSearchResults(results) {
            switch (currentSearchSort) {
                case 'date':
                    return results.sort((a, b) => new Date(b.date) - new Date(a.date));
                case 'alphabetical':
                    return results.sort((a, b) => a.title.localeCompare(b.title));
                case 'relevance':
                default:
                    return results;
            }
        }

        function updateSearchCounts(filtered) {
            const counts = {
                all: filtered.length,
                deals: filtered.filter(i => i.type === 'deals').length,
                properties: filtered.filter(i => i.type === 'properties').length,
                documents: filtered.filter(i => i.type === 'documents').length,
                tasks: filtered.filter(i => i.type === 'tasks').length,
                vendors: filtered.filter(i => i.type === 'vendors').length,
                interventions: 0
            };
            
            Object.keys(counts).forEach(key => {
                const el = document.getElementById(`count-${key}`);
                if (el) el.textContent = counts[key];
                
                const categoryEl = document.getElementById(`category-count-${key}`);
                if (categoryEl) categoryEl.textContent = counts[key];
            });
        }

        function renderResultsByType(results) {
            const grouped = {};
            results.forEach(item => {
                if (!grouped[item.type]) grouped[item.type] = [];
                grouped[item.type].push(item);
            });
            
            let html = '';
            
            // Render each type
            if (grouped.deals) html += renderDealsSection(grouped.deals);
            if (grouped.properties) html += renderPropertiesSection(grouped.properties);
            if (grouped.documents) html += renderDocumentsSection(grouped.documents);
            if (grouped.tasks) html += renderTasksSection(grouped.tasks);
            if (grouped.vendors) html += renderVendorsSection(grouped.vendors);
            
            return html;
        }

        function highlightSearchTerm(text) {
            if (!currentSearchQuery) return text;
            const regex = new RegExp(`(${currentSearchQuery})`, 'gi');
            return text.replace(regex, '<span class="bg-yellow-200">$1</span>');
        }

        function renderDealsSection(deals) {
            return `
                <section class="mb-8">
                    <div class="bg-white rounded-lg border border-stone">
                        <div class="p-6 border-b border-stone">
                            <h2 class="text-lg font-semibold text-slate">Deals (${deals.length})</h2>
                        </div>
                        <div class="divide-y divide-stone">
                            ${deals.map(deal => `
                                <div class="p-6 hover:bg-stone cursor-pointer transition-colors" onclick="openDealDrawer('${deal.id}', '${deal.title}', '${deal.status}', '${deal.owner}', '${deal.metadata.value}')">
                                    <div class="flex items-start space-x-4">
                                        <div class="w-12 h-12 bg-blue-50 rounded-lg flex items-center justify-center flex-shrink-0">
                                            <i class="fa-solid fa-handshake text-info text-lg"></i>
                                        </div>
                                        <div class="flex-1">
                                            <div class="flex items-center space-x-2 mb-1">
                                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">Deal</span>
                                                <span class="text-xs text-concrete">${deal.id}</span>
                                            </div>
                                            <h3 class="font-semibold text-slate text-lg mb-2">${highlightSearchTerm(deal.title)}</h3>
                                            <p class="text-sm text-concrete mb-3">${highlightSearchTerm(deal.description)}</p>
                                            <div class="flex items-center space-x-4 text-xs text-concrete">
                                                <span><i class="fa-solid fa-user mr-1"></i>${deal.owner}</span>
                                                <span><i class="fa-solid fa-expand mr-1"></i>${deal.metadata.size}</span>
                                                <span><i class="fa-solid fa-layer-group mr-1"></i>${deal.metadata.stage}</span>
                                                <span><i class="fa-solid fa-pound-sign mr-1"></i>${deal.metadata.value}</span>
                                            </div>
                                        </div>
                                        <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">${deal.status}</span>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </section>
            `;
        }
        
        function openDealDrawer(id, title, status, owner, value) {
            document.getElementById('deal-detail-id').textContent = id;
            document.getElementById('deal-detail-id-value').textContent = id;
            document.getElementById('deal-detail-title').textContent = title;
            document.getElementById('deal-detail-owner').textContent = owner;
            document.getElementById('deal-detail-value').textContent = value;
            document.getElementById('deal-detail-drawer').classList.remove('translate-x-full');
            emitEvent('deal_drawer_opened', { dealId: id });
        }
        
        // Close deal drawer handlers
        document.getElementById('close-deal-drawer')?.addEventListener('click', function() {
            document.getElementById('deal-detail-drawer').classList.add('translate-x-full');
        });
        
        document.getElementById('close-deal-drawer-btn')?.addEventListener('click', function() {
            document.getElementById('deal-detail-drawer').classList.add('translate-x-full');
        });

        function renderPropertiesSection(properties) {
            return `
                <section class="mb-8">
                    <div class="bg-white rounded-lg border border-stone">
                        <div class="p-6 border-b border-stone">
                            <h2 class="text-lg font-semibold text-slate">Properties (${properties.length})</h2>
                        </div>
                        <div class="p-6">
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                ${properties.map(prop => `
                                    <div class="border border-stone rounded-lg overflow-hidden hover:shadow-lg transition-shadow cursor-pointer">
                                        <div class="h-48 bg-gradient-to-br from-blue-100 to-blue-50 overflow-hidden">
                                            ${prop.image ? 
                                                `<img src="${prop.image}" alt="${prop.title}" class="w-full h-full object-cover" />` :
                                                `<div class="w-full h-full flex items-center justify-center"><i class="fa-solid fa-building text-4xl text-info"></i></div>`
                                            }
                                        </div>
                                        <div class="p-4">
                                            <h3 class="font-medium text-slate mb-2">${highlightSearchTerm(prop.title)}</h3>
                                            <p class="text-xs text-concrete mb-3">${highlightSearchTerm(prop.description)}</p>
                                            <div class="space-y-2 text-sm text-concrete">
                                                <div class="flex justify-between">
                                                    <span>Size</span>
                                                    <span>${prop.metadata.size}</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span>Floors</span>
                                                    <span>${prop.metadata.floors}</span>
                                                </div>
                                                <div class="flex justify-between">
                                                    <span>Available</span>
                                                    <span>${prop.metadata.available}</span>
                                                </div>
                                            </div>
                                            <div class="mt-3 pt-3 border-t border-stone">
                                                <span class="text-xs text-concrete">Listed by ${prop.owner}</span>
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </section>
            `;
        }

        function renderDocumentsSection(documents) {
            const statusColors = {
                'Pending Review': 'bg-orange-100 text-orange-800',
                'Approved': 'bg-green-100 text-green-800',
                'Final': 'bg-blue-100 text-blue-800',
                'Archive': 'bg-gray-100 text-gray-800'
            };
            
            const fileIcons = {
                'PDF': 'fa-file-pdf text-red-600 bg-red-50',
                'Word': 'fa-file-word text-blue-600 bg-blue-50',
                'Excel': 'fa-file-excel text-green-600 bg-green-50',
                'PowerPoint': 'fa-file-powerpoint text-purple-600 bg-purple-50'
            };
            
            return `
                <section class="mb-8">
                    <div class="bg-white rounded-lg border border-stone">
                        <div class="p-6 border-b border-stone">
                            <h2 class="text-lg font-semibold text-slate">Documents (${documents.length})</h2>
                        </div>
                        <div class="divide-y divide-stone">
                            ${documents.map(doc => `
                                <div class="p-4 flex items-center justify-between hover:bg-stone cursor-pointer transition-colors">
                                    <div class="flex items-center space-x-3">
                                        <div class="w-10 h-10 ${fileIcons[doc.metadata.type]} rounded-lg flex items-center justify-center">
                                            <i class="fa-solid ${fileIcons[doc.metadata.type].split(' ')[0]}"></i>
                                        </div>
                                        <div>
                                            <h3 class="font-medium text-slate">${highlightSearchTerm(doc.title)}</h3>
                                            <div class="flex items-center space-x-4 text-xs text-concrete">
                                                <span>${doc.metadata.size}</span>
                                                <span>Modified ${doc.metadata.modified}</span>
                                                <span>${doc.owner}</span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${statusColors[doc.status]}">${doc.status}</span>
                                        <button class="text-concrete hover:text-slate">
                                            <i class="fa-solid fa-download"></i>
                                        </button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </section>
            `;
        }

        function renderTasksSection(tasks) {
            const statusColors = {
                'In Progress': 'bg-yellow-100 text-yellow-800',
                'Ready for QA': 'bg-green-100 text-green-800',
                'Blocked': 'bg-red-100 text-red-800'
            };
            
            return `
                <section class="mb-8">
                    <div class="bg-white rounded-lg border border-stone">
                        <div class="p-6 border-b border-stone">
                            <h2 class="text-lg font-semibold text-slate">Tasks (${tasks.length})</h2>
                        </div>
                        <div class="p-6">
                            <div class="space-y-4">
                                ${tasks.map(task => `
                                    <div class="border border-stone rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer">
                                        <div class="flex items-start justify-between mb-3">
                                            <div class="flex items-start space-x-3">
                                                <div class="w-8 h-8 bg-orange-50 rounded-lg flex items-center justify-center">
                                                    <i class="fa-solid fa-tasks text-warning text-sm"></i>
                                                </div>
                                                <div>
                                                    <h3 class="font-medium text-slate mb-1">${highlightSearchTerm(task.title)}</h3>
                                                    <p class="text-sm text-concrete mb-2">${highlightSearchTerm(task.description)}</p>
                                                    <div class="flex items-center space-x-4 text-xs text-concrete">
                                                        <span><i class="fa-solid fa-user mr-1"></i>${task.owner}</span>
                                                        <span><i class="fa-solid fa-calendar mr-1"></i>${task.metadata.due}</span>
                                                        <span><i class="fa-solid fa-building mr-1"></i>${task.metadata.vendor}</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${statusColors[task.status]}">${task.status}</span>
                                        </div>
                                        <div class="bg-gray-50 rounded-lg p-3">
                                            <div class="flex justify-between text-xs text-concrete mb-1">
                                                <span>Progress</span>
                                                <span>${task.metadata.progress}%</span>
                                            </div>
                                            <div class="w-full bg-gray-200 rounded-full h-2">
                                                <div class="bg-warning h-2 rounded-full" style="width: ${task.metadata.progress}%"></div>
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </section>
            `;
        }

        function renderVendorsSection(vendors) {
            return `
                <section class="mb-8">
                    <div class="bg-white rounded-lg border border-stone">
                        <div class="p-6 border-b border-stone">
                            <h2 class="text-lg font-semibold text-slate">Vendors (${vendors.length})</h2>
                        </div>
                        <div class="p-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                ${vendors.map(vendor => `
                                    <div class="border border-stone rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer">
                                        <div class="flex items-start space-x-3 mb-3">
                                            <div class="w-12 h-12 bg-slate rounded-lg flex items-center justify-center text-white font-semibold">
                                                ${vendor.title.charAt(0)}
                                            </div>
                                            <div class="flex-1">
                                                <h3 class="font-medium text-slate mb-1">${highlightSearchTerm(vendor.title)}</h3>
                                                <p class="text-sm text-concrete mb-2">${highlightSearchTerm(vendor.description)}</p>
                                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">${vendor.status}</span>
                                            </div>
                                        </div>
                                        <div class="grid grid-cols-3 gap-4 pt-3 border-t border-stone text-center">
                                            <div>
                                                <div class="text-xs text-concrete mb-1">Category</div>
                                                <div class="text-sm font-medium text-slate">${vendor.metadata.category}</div>
                                            </div>
                                            <div>
                                                <div class="text-xs text-concrete mb-1">Rating</div>
                                                <div class="text-sm font-medium text-slate">${vendor.metadata.rating}</div>
                                            </div>
                                            <div>
                                                <div class="text-xs text-concrete mb-1">Projects</div>
                                                <div class="text-sm font-medium text-slate">${vendor.metadata.projects}</div>
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </section>
            `;
        }

        // ===== NOTIFICATIONS SYSTEM =====
        
        let allNotifications = [];
        let filteredNotifications = [];
        let displayedCount = 20;
        let currentNotificationFilters = {
            severity: '',
            category: '',
            source: '',
            status: '',
            time: '',
            search: ''
        };

        // Generate dummy notifications data
        function generateNotificationsData() {
            const notifications = [
                // CRITICAL (4)
                {
                    id: 'NOT-001',
                    title: 'SLA Breach - Contract Approval Overdue',
                    description: 'Canary Wharf Tower contract approval is 72 hours overdue. Legal team has not responded to approval request. Deal value: £2.1M',
                    severity: 'critical',
                    category: 'legal',
                    source: 'system',
                    owner: 'Legal Team',
                    relatedItem: 'Deal #CWT-2024-042',
                    timestamp: new Date(Date.now() - 4 * 60 * 60 * 1000), // 4 hours ago
                    read: false,
                    actions: [
                        { label: 'Escalate Now', type: 'danger' },
                        { label: 'Acknowledge', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-002',
                    title: 'System Integration Failure',
                    description: 'Valve API integration has failed. Property listings are not syncing. Last successful sync: 4 hours ago.',
                    severity: 'critical',
                    category: 'system',
                    source: 'integration',
                    owner: 'IT Operations',
                    relatedItem: 'Project: High',
                    timestamp: new Date(Date.now() - 3 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'Contact IT', type: 'danger' },
                        { label: 'View Logs', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-003',
                    title: 'Onboarding SLA Breach',
                    description: 'The Shard Office Suite onboarding is 48 hours behind schedule. Go-live date at risk. Multiple vendor dependencies blocked.',
                    severity: 'critical',
                    category: 'delivery',
                    source: 'user',
                    owner: 'Dani - Service Orchestrator',
                    relatedItem: 'Go-live: 2 days',
                    timestamp: new Date(Date.now() - 6 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'Executive Review', type: 'danger' },
                        { label: 'View Board', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-004',
                    title: 'Deal Stalled - Client Non-Responsive',
                    description: 'Bishopsgate Plaza client has not responded to HoT for 10 days. Deal value £3.2M at risk of being lost to competitor.',
                    severity: 'critical',
                    category: 'negotiation',
                    source: 'user',
                    owner: 'Max - Deal Architect',
                    relatedItem: '£3.2M value',
                    timestamp: new Date(Date.now() - 8 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'Intervention', type: 'danger' },
                        { label: 'Contact Client', type: 'secondary' }
                    ]
                },

                // HIGH PRIORITY (12)
                {
                    id: 'NOT-005',
                    title: 'Approval Pending - Executive Sign-off Required',
                    description: 'King\'s Cross Central HoT requires executive approval. Deal value exceeds £5M threshold. Awaiting signature for 24 hours.',
                    severity: 'high',
                    category: 'executive',
                    source: 'system',
                    owner: 'Awaiting Executive',
                    relatedItem: '£5.4M value',
                    timestamp: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'Review & Sign', type: 'warning' },
                        { label: 'View HoT', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-006',
                    title: 'Vendor Response Delayed',
                    description: 'TechFlow Solutions has not responded to onboarding requirements for Leadenhall Building. 18 hours past SLA.',
                    severity: 'high',
                    category: 'delivery',
                    source: 'system',
                    owner: 'TechFlow Solutions',
                    relatedItem: 'SLA Breach',
                    timestamp: new Date(Date.now() - 18 * 60 * 60 * 1000),
                    read: true,
                    actions: [
                        { label: 'Escalate', type: 'warning' },
                        { label: 'Contact Vendor', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-007',
                    title: 'Document Version Conflict',
                    description: 'Multiple versions of Liverpool Street contract detected. Legal team needs to review and consolidate versions.',
                    severity: 'high',
                    category: 'negotiation',
                    source: 'system',
                    owner: 'Legal Review',
                    relatedItem: '3 versions detected',
                    timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'Resolve Conflict', type: 'warning' },
                        { label: 'View Versions', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-008',
                    title: 'Payment Processing Delayed',
                    description: 'Commission payment for Canary Wharf deal is overdue. Broker escalation expected within 24 hours.',
                    severity: 'high',
                    category: 'negotiation',
                    source: 'system',
                    owner: 'Finance Team',
                    relatedItem: '£45K commission',
                    timestamp: new Date(Date.now() - 12 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'Process Payment', type: 'warning' },
                        { label: 'Contact Finance', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-009',
                    title: 'Client Feedback - Urgent Response Needed',
                    description: 'Manchester Tech Hub client has raised concerns about proposed lease terms. Response required within 48 hours.',
                    severity: 'high',
                    category: 'negotiation',
                    source: 'user',
                    owner: 'Tom - Origination',
                    relatedItem: 'Deal #MTH-2024-018',
                    timestamp: new Date(Date.now() - 6 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'Respond Now', type: 'warning' },
                        { label: 'View Feedback', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-010',
                    title: 'Property Inspection Overdue',
                    description: 'Edinburgh Financial District property inspection was scheduled 3 days ago. No report submitted yet.',
                    severity: 'high',
                    category: 'delivery',
                    source: 'system',
                    owner: 'Inspection Team',
                    relatedItem: 'Due: 3 days ago',
                    timestamp: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000),
                    read: true,
                    actions: [
                        { label: 'Follow Up', type: 'warning' },
                        { label: 'Reschedule', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-011',
                    title: 'Budget Threshold Exceeded',
                    description: 'Birmingham Business Park renovation costs have exceeded approved budget by 15%. Executive review required.',
                    severity: 'high',
                    category: 'executive',
                    source: 'system',
                    owner: 'Finance Team',
                    relatedItem: '+£180K over budget',
                    timestamp: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'Review Budget', type: 'warning' },
                        { label: 'View Details', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-012',
                    title: 'Compliance Certificate Expiring',
                    description: 'Fire safety certificate for Liverpool Street Tower expires in 7 days. Renewal process not started.',
                    severity: 'high',
                    category: 'delivery',
                    source: 'system',
                    owner: 'Compliance Team',
                    relatedItem: 'Expires: 7 days',
                    timestamp: new Date(Date.now() - 4 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'Start Renewal', type: 'warning' },
                        { label: 'View Certificate', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-013',
                    title: 'Broker Commission Dispute',
                    description: 'External broker has disputed commission calculation for Glasgow Waterfront deal. Requires immediate resolution.',
                    severity: 'high',
                    category: 'negotiation',
                    source: 'user',
                    owner: 'Max - Deal Architect',
                    relatedItem: '£28K disputed',
                    timestamp: new Date(Date.now() - 8 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'Resolve Dispute', type: 'warning' },
                        { label: 'Contact Broker', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-014',
                    title: 'Key Personnel Change',
                    description: 'Client\'s lead negotiator for Canary Wharf Tower has been replaced. New contact introduction needed.',
                    severity: 'high',
                    category: 'negotiation',
                    source: 'user',
                    owner: 'Tom - Origination',
                    relatedItem: 'Deal #CWT-2024-042',
                    timestamp: new Date(Date.now() - 5 * 60 * 60 * 1000),
                    read: true,
                    actions: [
                        { label: 'Schedule Meeting', type: 'warning' },
                        { label: 'Update Contact', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-015',
                    title: 'Insurance Renewal Required',
                    description: 'Property insurance for The Shard office suites expires in 14 days. Renewal quotes pending.',
                    severity: 'high',
                    category: 'delivery',
                    source: 'system',
                    owner: 'Insurance Team',
                    relatedItem: 'Expires: 14 days',
                    timestamp: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'Review Quotes', type: 'warning' },
                        { label: 'Contact Insurer', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-016',
                    title: 'Tenant Complaint Escalated',
                    description: 'Manchester City Centre tenant has escalated maintenance complaint to executive level. Immediate action required.',
                    severity: 'high',
                    category: 'delivery',
                    source: 'user',
                    owner: 'Dani - Service Orchestrator',
                    relatedItem: 'Tenant: Acme Corp',
                    timestamp: new Date(Date.now() - 10 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'Respond to Tenant', type: 'warning' },
                        { label: 'View Complaint', type: 'secondary' }
                    ]
                },

                // MEDIUM PRIORITY (28)
                {
                    id: 'NOT-017',
                    title: 'Viewing Scheduled',
                    description: 'Tom has scheduled a viewing for Bank Junction Tower tomorrow at 2:00 PM. Client has 5 business days to respond. Follow-up scheduled.',
                    severity: 'medium',
                    category: 'negotiation',
                    source: 'user',
                    owner: 'Tom - Origination',
                    relatedItem: 'Tomorrow 2:00 PM',
                    timestamp: new Date(Date.now() - 10 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'View Details', type: 'info' },
                        { label: 'Send Reminder', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-018',
                    title: 'Task Completed',
                    description: 'Network setup completed for Moorgate Plaza. All systems tested and operational. Ready for tenant access.',
                    severity: 'medium',
                    category: 'delivery',
                    source: 'system',
                    owner: 'Network Setup',
                    relatedItem: 'Completed',
                    timestamp: new Date(Date.now() - 1 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'Acknowledge', type: 'info' },
                        { label: 'Mark Read', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-019',
                    title: 'Proposal Submitted',
                    description: 'Max submitted proposal for Fenchurch Street Building. Client has 5 business days to respond. Follow-up scheduled.',
                    severity: 'medium',
                    category: 'negotiation',
                    source: 'user',
                    owner: 'Max - Deal Architect',
                    relatedItem: 'Follow-up: 5 days',
                    timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'Track Progress', type: 'info' },
                        { label: 'View Proposal', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-020',
                    title: 'Document Uploaded',
                    description: 'Legal team uploaded updated contract for Canary Wharf Tower. Review and approval required within 48 hours.',
                    severity: 'medium',
                    category: 'legal',
                    source: 'user',
                    owner: 'Legal Team',
                    relatedItem: 'Contract v3.2',
                    timestamp: new Date(Date.now() - 3 * 60 * 60 * 1000),
                    read: true,
                    actions: [
                        { label: 'Review Document', type: 'info' },
                        { label: 'Download', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-021',
                    title: 'Meeting Reminder',
                    description: 'Quarterly review meeting with executive team scheduled for tomorrow at 10:00 AM. Agenda and reports attached.',
                    severity: 'medium',
                    category: 'executive',
                    source: 'system',
                    owner: 'Executive Team',
                    relatedItem: 'Tomorrow 10:00 AM',
                    timestamp: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'View Agenda', type: 'info' },
                        { label: 'Add to Calendar', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-022',
                    title: 'Property Added to Pipeline',
                    description: 'New property added: Shoreditch Creative Hub - 15,000 sq ft creative workspace. Initial assessment pending.',
                    severity: 'medium',
                    category: 'negotiation',
                    source: 'user',
                    owner: 'Tom - Origination',
                    relatedItem: '15,000 sq ft',
                    timestamp: new Date(Date.now() - 4 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'View Property', type: 'info' },
                        { label: 'Schedule Visit', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-023',
                    title: 'Client Feedback Received',
                    description: 'Positive feedback received from Edinburgh Financial District client. Requested follow-up meeting next week.',
                    severity: 'medium',
                    category: 'negotiation',
                    source: 'user',
                    owner: 'Max - Deal Architect',
                    relatedItem: 'Rating: 5/5',
                    timestamp: new Date(Date.now() - 5 * 60 * 60 * 1000),
                    read: true,
                    actions: [
                        { label: 'Schedule Meeting', type: 'info' },
                        { label: 'View Feedback', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-024',
                    title: 'Vendor Onboarding Complete',
                    description: 'SafetyFirst Compliance has completed onboarding process. Now available for project assignments.',
                    severity: 'medium',
                    category: 'delivery',
                    source: 'system',
                    owner: 'Vendor Hub',
                    relatedItem: 'Status: Active',
                    timestamp: new Date(Date.now() - 6 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'View Profile', type: 'info' },
                        { label: 'Assign Project', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-025',
                    title: 'Monthly Report Available',
                    description: 'September pipeline performance report is now available. Review key metrics and trends.',
                    severity: 'medium',
                    category: 'executive',
                    source: 'system',
                    owner: 'Analytics Team',
                    relatedItem: 'September 2024',
                    timestamp: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'View Report', type: 'info' },
                        { label: 'Download PDF', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-026',
                    title: 'Deal Stage Updated',
                    description: 'Birmingham Business Park moved from Viewing to Proposal stage. Next steps: prepare and submit proposal.',
                    severity: 'medium',
                    category: 'negotiation',
                    source: 'user',
                    owner: 'Tom - Origination',
                    relatedItem: 'Stage: Proposal',
                    timestamp: new Date(Date.now() - 7 * 60 * 60 * 1000),
                    read: true,
                    actions: [
                        { label: 'View Deal', type: 'info' },
                        { label: 'Prepare Proposal', type: 'secondary' }
                    ]
                },
                // Add 18 more medium priority notifications
                {
                    id: 'NOT-027',
                    title: 'System Maintenance Scheduled',
                    description: 'Planned system maintenance this Saturday 2:00 AM - 6:00 AM. Limited functionality during this period.',
                    severity: 'medium',
                    category: 'system',
                    source: 'system',
                    owner: 'IT Operations',
                    relatedItem: 'Saturday 2-6 AM',
                    timestamp: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'View Details', type: 'info' },
                        { label: 'Set Reminder', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-028',
                    title: 'New Team Member Added',
                    description: 'Sarah Johnson joined as Junior Deal Architect. Onboarding session scheduled for Monday.',
                    severity: 'medium',
                    category: 'system',
                    source: 'user',
                    owner: 'HR Team',
                    relatedItem: 'Start: Monday',
                    timestamp: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'View Profile', type: 'info' },
                        { label: 'Send Welcome', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-029',
                    title: 'Contract Renewal Reminder',
                    description: 'Vendor contract with TechFlow Solutions expires in 30 days. Review and renewal recommended.',
                    severity: 'medium',
                    category: 'delivery',
                    source: 'system',
                    owner: 'Vendor Management',
                    relatedItem: 'Expires: 30 days',
                    timestamp: new Date(Date.now() - 8 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'Review Contract', type: 'info' },
                        { label: 'Contact Vendor', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-030',
                    title: 'Property Valuation Updated',
                    description: 'Market valuation for Canary Wharf One updated to £45M (+8% from last quarter).',
                    severity: 'medium',
                    category: 'negotiation',
                    source: 'system',
                    owner: 'Valuation Team',
                    relatedItem: '£45M (+8%)',
                    timestamp: new Date(Date.now() - 9 * 60 * 60 * 1000),
                    read: true,
                    actions: [
                        { label: 'View Report', type: 'info' },
                        { label: 'Update Listings', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-031',
                    title: 'Training Session Available',
                    description: 'New negotiation techniques workshop available. Register by Friday for next week\'s session.',
                    severity: 'medium',
                    category: 'system',
                    source: 'system',
                    owner: 'Training Team',
                    relatedItem: 'Register by Friday',
                    timestamp: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'Register Now', type: 'info' },
                        { label: 'View Details', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-032',
                    title: 'Client Meeting Notes Shared',
                    description: 'Max shared detailed notes from yesterday\'s client meeting. Action items assigned to team members.',
                    severity: 'medium',
                    category: 'negotiation',
                    source: 'user',
                    owner: 'Max - Deal Architect',
                    relatedItem: '5 action items',
                    timestamp: new Date(Date.now() - 10 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'View Notes', type: 'info' },
                        { label: 'Review Actions', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-033',
                    title: 'Market Report Published',
                    description: 'Q3 2024 London commercial property market report now available. Key trends and forecasts included.',
                    severity: 'medium',
                    category: 'executive',
                    source: 'system',
                    owner: 'Research Team',
                    relatedItem: 'Q3 2024',
                    timestamp: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000),
                    read: true,
                    actions: [
                        { label: 'Read Report', type: 'info' },
                        { label: 'Download', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-034',
                    title: 'Property Photos Updated',
                    description: 'Professional photography completed for Liverpool Street Tower. 45 new high-resolution images added.',
                    severity: 'medium',
                    category: 'negotiation',
                    source: 'user',
                    owner: 'Marketing Team',
                    relatedItem: '45 new photos',
                    timestamp: new Date(Date.now() - 11 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'View Gallery', type: 'info' },
                        { label: 'Update Listing', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-035',
                    title: 'Competitor Activity Alert',
                    description: 'Competitor has listed similar property in Canary Wharf area. Price analysis and positioning review recommended.',
                    severity: 'medium',
                    category: 'executive',
                    source: 'system',
                    owner: 'Market Intelligence',
                    relatedItem: 'Competitor: PropCo',
                    timestamp: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'View Analysis', type: 'info' },
                        { label: 'Adjust Strategy', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-036',
                    title: 'Lease Terms Negotiated',
                    description: 'Successfully negotiated favorable lease terms for Glasgow Waterfront. Client accepted 10-year commitment.',
                    severity: 'medium',
                    category: 'negotiation',
                    source: 'user',
                    owner: 'Max - Deal Architect',
                    relatedItem: '10-year lease',
                    timestamp: new Date(Date.now() - 12 * 60 * 60 * 1000),
                    read: true,
                    actions: [
                        { label: 'View Terms', type: 'info' },
                        { label: 'Prepare Contract', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-037',
                    title: 'Energy Efficiency Audit Complete',
                    description: 'Energy audit completed for The Shard offices. Recommendations for 20% cost reduction available.',
                    severity: 'medium',
                    category: 'delivery',
                    source: 'system',
                    owner: 'Sustainability Team',
                    relatedItem: '20% savings',
                    timestamp: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'View Report', type: 'info' },
                        { label: 'Implement Changes', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-038',
                    title: 'Client Referral Received',
                    description: 'Existing client referred new prospect for Manchester area. Initial contact scheduled for next week.',
                    severity: 'medium',
                    category: 'negotiation',
                    source: 'user',
                    owner: 'Tom - Origination',
                    relatedItem: 'Referral bonus',
                    timestamp: new Date(Date.now() - 13 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'View Details', type: 'info' },
                        { label: 'Prepare Pitch', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-039',
                    title: 'Security System Upgrade',
                    description: 'Security system upgrade completed for Birmingham Business Park. New access control system operational.',
                    severity: 'medium',
                    category: 'delivery',
                    source: 'system',
                    owner: 'Security Team',
                    relatedItem: 'Status: Complete',
                    timestamp: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000),
                    read: true,
                    actions: [
                        { label: 'View Details', type: 'info' },
                        { label: 'Train Staff', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-040',
                    title: 'Parking Allocation Updated',
                    description: 'Additional parking spaces allocated for Edinburgh Financial District. 15 new spaces available.',
                    severity: 'medium',
                    category: 'delivery',
                    source: 'user',
                    owner: 'Facilities Team',
                    relatedItem: '+15 spaces',
                    timestamp: new Date(Date.now() - 14 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'View Map', type: 'info' },
                        { label: 'Update Tenants', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-041',
                    title: 'Broker Partnership Opportunity',
                    description: 'New broker partnership opportunity with London Commercial Realty. Initial meeting proposed.',
                    severity: 'medium',
                    category: 'executive',
                    source: 'user',
                    owner: 'Business Development',
                    relatedItem: 'Partnership',
                    timestamp: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'Review Proposal', type: 'info' },
                        { label: 'Schedule Meeting', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-042',
                    title: 'Tenant Satisfaction Survey Results',
                    description: 'Q3 tenant satisfaction survey results available. Overall score: 4.2/5 (+0.3 from last quarter).',
                    severity: 'medium',
                    category: 'delivery',
                    source: 'system',
                    owner: 'Customer Success',
                    relatedItem: '4.2/5 (+0.3)',
                    timestamp: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000),
                    read: true,
                    actions: [
                        { label: 'View Results', type: 'info' },
                        { label: 'Action Plan', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-043',
                    title: 'Marketing Campaign Launched',
                    description: 'New digital marketing campaign launched for Canary Wharf properties. Early engagement metrics positive.',
                    severity: 'medium',
                    category: 'negotiation',
                    source: 'user',
                    owner: 'Marketing Team',
                    relatedItem: 'Campaign: Q4',
                    timestamp: new Date(Date.now() - 15 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'View Metrics', type: 'info' },
                        { label: 'Adjust Budget', type: 'secondary' }
                    ]
                },
                {
                    id: 'NOT-044',
                    title: 'Building Permit Approved',
                    description: 'Renovation permit approved for Manchester City Centre. Construction can begin next month.',
                    severity: 'medium',
                    category: 'delivery',
                    source: 'system',
                    owner: 'Planning Team',
                    relatedItem: 'Start: Next month',
                    timestamp: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000),
                    read: false,
                    actions: [
                        { label: 'View Permit', type: 'info' },
                        { label: 'Schedule Work', type: 'secondary' }
                    ]
                },

                // LOW PRIORITY (47) - Adding 47 low priority notifications
                // I'll add a representative sample to keep the code manageable
                ...Array.from({ length: 47 }, (_, i) => ({
                    id: `NOT-${45 + i}`,
                    title: `System Update ${i + 1}`,
                    description: `Regular system update notification. No action required. System performance: optimal.`,
                    severity: 'low',
                    category: 'system',
                    source: 'system',
                    owner: 'System',
                    relatedItem: 'Status: OK',
                    timestamp: new Date(Date.now() - (i + 1) * 24 * 60 * 60 * 1000),
                    read: i % 3 === 0,
                    actions: [
                        { label: 'Acknowledge', type: 'success' }
                    ]
                }))
            ];

            return notifications;
        }

        // Initialize notifications
        allNotifications = generateNotificationsData();
        filteredNotifications = [...allNotifications];

        // Render notifications feed
        function renderNotificationsFeed() {
            const feed = document.getElementById('notifications-feed');
            if (!feed) return;

            const toDisplay = filteredNotifications.slice(0, displayedCount);
            
            // Group by severity
            const grouped = {
                critical: toDisplay.filter(n => n.severity === 'critical'),
                high: toDisplay.filter(n => n.severity === 'high'),
                medium: toDisplay.filter(n => n.severity === 'medium'),
                low: toDisplay.filter(n => n.severity === 'low')
            };

            let html = '';

            // Critical Section
            if (grouped.critical.length > 0) {
                html += renderNotificationSection('Critical Alerts', 'critical', grouped.critical, 'danger');
            }

            // High Section
            if (grouped.high.length > 0) {
                html += renderNotificationSection('High Priority Alerts', 'high', grouped.high, 'warning');
            }

            // Medium Section
            if (grouped.medium.length > 0) {
                html += renderNotificationSection('Medium Priority Updates', 'medium', grouped.medium, 'info');
            }

            // Low Section
            if (grouped.low.length > 0) {
                html += renderNotificationSection('Low Priority & System Updates', 'low', grouped.low, 'success');
            }

            feed.innerHTML = html || '<div class="p-12 text-center text-concrete">No notifications found</div>';

            // Update counts
            document.getElementById('notifications-count').textContent = 
                `Showing ${toDisplay.length} of ${filteredNotifications.length} notifications`;

            // Show/hide load more button
            const loadMoreBtn = document.getElementById('load-more-btn');
            const noMoreMsg = document.getElementById('no-more-notifications');
            if (filteredNotifications.length > displayedCount) {
                loadMoreBtn.classList.remove('hidden');
                noMoreMsg.classList.add('hidden');
            } else {
                loadMoreBtn.classList.add('hidden');
                if (filteredNotifications.length > 0) {
                    noMoreMsg.classList.remove('hidden');
                }
            }

            // Update stats
            updateNotificationStats();

            // Add click handlers
            attachNotificationHandlers();
        }

        function renderNotificationSection(title, severity, notifications, colorClass) {
            const severityIcons = {
                critical: 'fa-exclamation-triangle',
                high: 'fa-exclamation-circle',
                medium: 'fa-info-circle',
                low: 'fa-check-circle'
            };

            return `
                <div class="border-b border-stone">
                    <div class="p-4 bg-${colorClass} bg-opacity-5 flex items-center justify-between cursor-pointer hover:bg-opacity-10 transition-colors" onclick="toggleNotificationSection('${severity}')">
                        <div class="flex items-center space-x-2">
                            <i class="fa-solid ${severityIcons[severity]} text-${colorClass}"></i>
                            <h3 class="font-semibold text-slate">${title}</h3>
                            <span class="text-xs bg-${colorClass} text-white px-2 py-1 rounded-full">${notifications.length}</span>
                        </div>
                        <i class="fa-solid fa-chevron-down text-concrete" id="section-icon-${severity}"></i>
                    </div>
                    <div class="divide-y divide-stone" id="section-${severity}">
                        ${notifications.map(n => renderNotificationItem(n, colorClass)).join('')}
                    </div>
                </div>
            `;
        }

        function renderNotificationItem(notification, colorClass) {
            const timeAgo = getTimeAgo(notification.timestamp);
            const readClass = notification.read ? 'opacity-70' : '';
            const unreadIndicator = notification.read ? 
                '<div class="w-3 h-3 bg-concrete rounded-full mt-2"></div>' :
                `<div class="w-3 h-3 bg-${colorClass} rounded-full mt-2"></div>`;

            return `
                <div class="p-6 hover:bg-stone hover:bg-opacity-30 transition-colors cursor-pointer notification-item ${readClass}" 
                     data-notification-id="${notification.id}"
                     onclick="openNotificationDrawer('${notification.id}')">
                    <div class="flex items-start justify-between">
                        <div class="flex items-start space-x-4 flex-1">
                            ${unreadIndicator}
                            <div class="flex-1">
                                <div class="flex items-center space-x-2 mb-2">
                                    <h4 class="font-medium text-slate">${notification.title}</h4>
                                    <span class="text-xs bg-${colorClass} text-white px-2 py-1 rounded">${notification.severity.toUpperCase()}</span>
                                    <span class="text-xs bg-stone text-slate px-2 py-1 rounded">${notification.category}</span>
                                </div>
                                <p class="text-sm text-concrete mb-2">${notification.description}</p>
                                <div class="flex items-center space-x-4 text-xs text-concrete">
                                    <span class="flex items-center">
                                        <i class="fa-solid fa-clock mr-1"></i>
                                        ${timeAgo}
                                    </span>
                                    <span class="flex items-center">
                                        <i class="fa-solid fa-user mr-1"></i>
                                        ${notification.owner}
                                    </span>
                                    <span class="flex items-center">
                                        <i class="fa-solid fa-link mr-1"></i>
                                        ${notification.relatedItem}
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center space-x-2 ml-4">
                            ${notification.actions.map(action => `
                                <button class="text-xs bg-${action.type === 'danger' ? 'danger' : action.type === 'warning' ? 'warning' : action.type === 'info' ? 'info' : 'stone'} ${action.type === 'secondary' ? 'text-slate' : 'text-white'} px-3 py-1 rounded hover:opacity-90 transition-colors" 
                                        onclick="event.stopPropagation(); handleNotificationAction('${notification.id}', '${action.label}')">
                                    ${action.label}
                                </button>
                            `).join('')}
                            <button class="p-1 text-concrete hover:text-slate" onclick="event.stopPropagation(); showNotificationMenu('${notification.id}')">
                                <i class="fa-solid fa-ellipsis-v"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function toggleNotificationSection(severity) {
            const section = document.getElementById(`section-${severity}`);
            const icon = document.getElementById(`section-icon-${severity}`);
            if (section.classList.contains('hidden')) {
                section.classList.remove('hidden');
                icon.classList.remove('fa-chevron-down');
                icon.classList.add('fa-chevron-up');
            } else {
                section.classList.add('hidden');
                icon.classList.remove('fa-chevron-up');
                icon.classList.add('fa-chevron-down');
            }
        }

        function attachNotificationHandlers() {
            // Click handlers are inline in the HTML for simplicity
        }

        function openNotificationDrawer(notificationId) {
            const notification = allNotifications.find(n => n.id === notificationId);
            if (!notification) return;

            // Populate drawer
            document.getElementById('notification-drawer-title').textContent = notification.title;
            document.getElementById('notification-drawer-time').textContent = getTimeAgo(notification.timestamp);
            document.getElementById('notification-drawer-subtitle').textContent = notification.title;
            document.getElementById('notification-drawer-description').textContent = notification.description;
            document.getElementById('notification-drawer-owner').textContent = notification.owner;
            document.getElementById('notification-drawer-source').textContent = notification.source;
            document.getElementById('notification-drawer-related').textContent = notification.relatedItem;
            document.getElementById('notification-drawer-status').textContent = notification.read ? 'Read' : 'Unread';

            // Severity badge
            const severityBadge = document.getElementById('notification-drawer-severity-badge');
            const severityColors = {
                critical: 'bg-danger text-white',
                high: 'bg-warning text-white',
                medium: 'bg-info text-white',
                low: 'bg-success text-white'
            };
            severityBadge.className = `text-xs px-2 py-1 rounded ${severityColors[notification.severity]}`;
            severityBadge.textContent = notification.severity.toUpperCase();

            // Category badge
            document.getElementById('notification-drawer-category-badge').textContent = notification.category;

            // Actions
            const actionsContainer = document.getElementById('notification-drawer-actions');
            actionsContainer.innerHTML = notification.actions.map(action => `
                <button class="w-full text-left px-4 py-2 bg-stone hover:bg-opacity-80 rounded-lg text-sm text-slate transition-colors"
                        onclick="handleNotificationAction('${notificationId}', '${action.label}')">
                    ${action.label}
                </button>
            `).join('');

            // Store current notification ID for actions
            document.getElementById('notification-detail-drawer').dataset.notificationId = notificationId;

            // Open drawer
            document.getElementById('notification-detail-drawer').classList.remove('translate-x-full');
            emitEvent('notification_drawer_opened', { notificationId });
        }

        function handleNotificationAction(notificationId, actionLabel) {
            showToast(`Action: ${actionLabel}`, 'info');
            emitEvent('notification_action', { notificationId, action: actionLabel });
        }

        function showNotificationMenu(notificationId) {
            showToast('Notification menu', 'info');
        }

        function markNotificationAsRead(notificationId) {
            const notification = allNotifications.find(n => n.id === notificationId);
            if (notification) {
                notification.read = true;
                renderNotificationsFeed();
                showToast('Marked as read', 'success');
            }
        }

        function deleteNotification(notificationId) {
            const index = allNotifications.findIndex(n => n.id === notificationId);
            if (index !== -1) {
                allNotifications.splice(index, 1);
                applyNotificationFilters();
                showToast('Notification deleted', 'success');
                document.getElementById('notification-detail-drawer').classList.add('translate-x-full');
            }
        }

        function updateNotificationStats() {
            const stats = {
                critical: allNotifications.filter(n => n.severity === 'critical').length,
                high: allNotifications.filter(n => n.severity === 'high').length,
                medium: allNotifications.filter(n => n.severity === 'medium').length,
                low: allNotifications.filter(n => n.severity === 'low').length
            };

            document.getElementById('stat-critical').textContent = stats.critical;
            document.getElementById('stat-high').textContent = stats.high;
            document.getElementById('stat-medium').textContent = stats.medium;
            document.getElementById('stat-low').textContent = stats.low;
        }

        function applyNotificationFilters() {
            filteredNotifications = allNotifications.filter(notification => {
                // Severity filter
                if (currentNotificationFilters.severity && notification.severity !== currentNotificationFilters.severity) {
                    return false;
                }

                // Category filter
                if (currentNotificationFilters.category && notification.category !== currentNotificationFilters.category) {
                    return false;
                }

                // Source filter
                if (currentNotificationFilters.source && notification.source !== currentNotificationFilters.source) {
                    return false;
                }

                // Status filter
                if (currentNotificationFilters.status) {
                    if (currentNotificationFilters.status === 'unread' && notification.read) return false;
                    if (currentNotificationFilters.status === 'read' && !notification.read) return false;
                }

                // Time filter
                if (currentNotificationFilters.time) {
                    const now = Date.now();
                    const notificationTime = notification.timestamp.getTime();
                    const dayInMs = 24 * 60 * 60 * 1000;

                    if (currentNotificationFilters.time === 'today' && (now - notificationTime) > dayInMs) return false;
                    if (currentNotificationFilters.time === 'week' && (now - notificationTime) > 7 * dayInMs) return false;
                    if (currentNotificationFilters.time === 'month' && (now - notificationTime) > 30 * dayInMs) return false;
                }

                // Search filter
                if (currentNotificationFilters.search) {
                    const searchLower = currentNotificationFilters.search.toLowerCase();
                    return notification.title.toLowerCase().includes(searchLower) ||
                           notification.description.toLowerCase().includes(searchLower) ||
                           notification.owner.toLowerCase().includes(searchLower);
                }

                return true;
            });

            displayedCount = 20;
            renderNotificationsFeed();
            updateActiveFiltersDisplay();
        }

        function updateActiveFiltersDisplay() {
            const activeFiltersDiv = document.getElementById('active-filters');
            const chipsContainer = document.getElementById('active-filters-chips');
            
            const activeFilters = Object.entries(currentNotificationFilters).filter(([key, value]) => value);
            
            if (activeFilters.length === 0) {
                activeFiltersDiv.classList.add('hidden');
                return;
            }

            activeFiltersDiv.classList.remove('hidden');
            chipsContainer.innerHTML = activeFilters.map(([key, value]) => `
                <span class="inline-flex items-center space-x-1 bg-slate text-white px-2 py-1 rounded text-xs">
                    <span>${key}: ${value}</span>
                    <button onclick="removeNotificationFilter('${key}')" class="hover:text-danger">
                        <i class="fa-solid fa-times"></i>
                    </button>
                </span>
            `).join('');
        }

        function removeNotificationFilter(filterKey) {
            currentNotificationFilters[filterKey] = '';
            document.getElementById(`filter-${filterKey}`).value = '';
            applyNotificationFilters();
        }

        function clearAllNotificationFilters() {
            currentNotificationFilters = {
                severity: '',
                category: '',
                source: '',
                status: '',
                time: '',
                search: ''
            };
            
            document.getElementById('filter-severity').value = '';
            document.getElementById('filter-category').value = '';
            document.getElementById('filter-source').value = '';
            document.getElementById('filter-status').value = '';
            document.getElementById('filter-time').value = '';
            document.getElementById('filter-search').value = '';
            
            applyNotificationFilters();
        }

        function markAllNotificationsAsRead() {
            allNotifications.forEach(n => n.read = true);
            renderNotificationsFeed();
            showToast('All notifications marked as read', 'success');
            emitEvent('notifications_marked_all_read');
        }

        // Event Listeners for Notifications Page
        document.getElementById('filter-severity')?.addEventListener('change', function() {
            currentNotificationFilters.severity = this.value;
            applyNotificationFilters();
        });

        document.getElementById('filter-category')?.addEventListener('change', function() {
            currentNotificationFilters.category = this.value;
            applyNotificationFilters();
        });

        document.getElementById('filter-source')?.addEventListener('change', function() {
            currentNotificationFilters.source = this.value;
            applyNotificationFilters();
        });

        document.getElementById('filter-status')?.addEventListener('change', function() {
            currentNotificationFilters.status = this.value;
            applyNotificationFilters();
        });

        document.getElementById('filter-time')?.addEventListener('change', function() {
            currentNotificationFilters.time = this.value;
            applyNotificationFilters();
        });

        document.getElementById('filter-search')?.addEventListener('input', function() {
            currentNotificationFilters.search = this.value;
            applyNotificationFilters();
        });

        document.getElementById('clear-filters-btn')?.addEventListener('click', clearAllNotificationFilters);

        document.getElementById('mark-all-read-btn')?.addEventListener('click', markAllNotificationsAsRead);

        document.getElementById('notification-settings-btn')?.addEventListener('click', function() {
            showToast('Notification settings coming soon', 'info');
        });

        document.getElementById('load-more-btn')?.addEventListener('click', function() {
            displayedCount += 20;
            renderNotificationsFeed();
        });

        document.getElementById('close-notification-drawer')?.addEventListener('click', function() {
            document.getElementById('notification-detail-drawer').classList.add('translate-x-full');
        });

        document.getElementById('close-notification-drawer-btn')?.addEventListener('click', function() {
            document.getElementById('notification-detail-drawer').classList.add('translate-x-full');
        });

        document.getElementById('mark-notification-read-btn')?.addEventListener('click', function() {
            const notificationId = document.getElementById('notification-detail-drawer').dataset.notificationId;
            if (notificationId) {
                markNotificationAsRead(notificationId);
                document.getElementById('notification-detail-drawer').classList.add('translate-x-full');
            }
        });

        document.getElementById('delete-notification-btn')?.addEventListener('click', function() {
            const notificationId = document.getElementById('notification-detail-drawer').dataset.notificationId;
            if (notificationId && confirm('Are you sure you want to delete this notification?')) {
                deleteNotification(notificationId);
            }
        });

        // ============================================================================
        // PIPELINE MANAGEMENT SYSTEM
        // ============================================================================

        // Pipeline State
        let allDeals = [];
        let filteredDeals = [];
        let currentPipelinePage = 1;
        let dealsPerPage = 25;
        let pipelineSortColumn = null;
        let pipelineSortDirection = 'asc';

        // Generate Dummy Deals Data
        function generatePipelineDeals() {
            const properties = [
                { name: 'Canary Wharf Tower 42', address: '25 Cabot Square', size: 18000, sector: 'office', location: 'london' },
                { name: 'The Shard Office Suite', address: '32 London Bridge Street', size: 8500, sector: 'office', location: 'london' },
                { name: "King's Cross Central", address: '5 Pancras Square', size: 22000, sector: 'office', location: 'london' },
                { name: 'Bishopsgate Plaza', address: '100 Bishopsgate', size: 12300, sector: 'office', location: 'london' },
                { name: 'Shoreditch Innovation Hub', address: '1 Curtain Road', size: 18000, sector: 'office', location: 'london' },
                { name: 'Paddington Central', address: '2 Kingdom Street', size: 9300, sector: 'office', location: 'london' },
                { name: 'Liverpool Street Tower', address: '25 Old Broad Street', size: 15000, sector: 'office', location: 'london' },
                { name: 'Manchester Media City', address: 'Salford Quays', size: 25000, sector: 'office', location: 'manchester' },
                { name: 'Birmingham Business Quarter', address: 'Colmore Row', size: 32000, sector: 'office', location: 'birmingham' },
                { name: 'Edinburgh Financial District', address: 'Lothian Road', size: 14000, sector: 'office', location: 'edinburgh' },
                { name: 'Glasgow Waterfront', address: 'Finnieston Quay', size: 15000, sector: 'office', location: 'glasgow' },
                { name: 'Oxford Street Retail', address: '250 Oxford Street', size: 5000, sector: 'retail', location: 'london' },
                { name: 'Westfield Shopping Centre', address: 'Ariel Way', size: 3500, sector: 'retail', location: 'london' },
                { name: 'Heathrow Logistics Park', address: 'Bath Road', size: 45000, sector: 'industrial', location: 'london' },
                { name: 'Stratford Mixed Use', address: 'Montfichet Road', size: 28000, sector: 'mixed', location: 'london' }
            ];

            const brokers = [
                { name: 'Savills', contact: 'James Mitchell', slug: 'savills' },
                { name: 'CBRE', contact: 'Sarah Williams', slug: 'cbre' },
                { name: 'JLL', contact: 'Michael Thompson', slug: 'jll' },
                { name: 'Knight Frank', contact: 'Emma Davis', slug: 'knight-frank' },
                { name: 'Cushman & Wakefield', contact: 'Robert Brown', slug: 'cushman' }
            ];

            const stages = ['lead', 'viewing', 'proposal', 'hot', 'signed'];
            const stageNames = { lead: 'Lead', viewing: 'Viewing', proposal: 'Proposal', hot: 'HoT', signed: 'Contract Signed' };
            const stageColors = { lead: 'concrete', viewing: 'slate', proposal: 'warning', hot: 'info', signed: 'success' };
            
            const owners = ['Tom', 'Max', 'Dani'];
            const avatars = {
                'Tom': 'https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-2.jpg',
                'Max': 'https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-3.jpg',
                'Dani': 'https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-4.jpg'
            };

            const deals = [];
            for (let i = 1; i <= 60; i++) {
                const property = properties[Math.floor(Math.random() * properties.length)];
                const broker = brokers[Math.floor(Math.random() * brokers.length)];
                const stage = stages[Math.floor(Math.random() * stages.length)];
                const owner = owners[Math.floor(Math.random() * owners.length)];
                const value = (Math.random() * 15 + 0.5).toFixed(1);
                const daysAgo = Math.floor(Math.random() * 30);
                const hoursAgo = Math.floor(Math.random() * 24);
                const isStalled = daysAgo > 10 && Math.random() > 0.7;
                const hasSLARisk = Math.random() > 0.85;

                deals.push({
                    id: `UNI-2024-${String(i).padStart(3, '0')}`,
                    property: property.name,
                    address: property.address,
                    size: property.size,
                    sector: property.sector,
                    location: property.location,
                    stage: stage,
                    stageName: stageNames[stage],
                    stageColor: stageColors[stage],
                    broker: broker.name,
                    brokerSlug: broker.slug,
                    brokerContact: broker.contact,
                    owner: owner,
                    ownerAvatar: avatars[owner],
                    value: parseFloat(value),
                    valueFormatted: `£${value}M`,
                    createdDaysAgo: daysAgo,
                    lastTouchHoursAgo: hoursAgo,
                    isStalled: isStalled,
                    hasSLARisk: hasSLARisk,
                    tags: [
                        property.sector.charAt(0).toUpperCase() + property.sector.slice(1),
                        property.size > 20000 ? 'Large' : property.size > 10000 ? 'Medium' : 'Small',
                        ...(hasSLARisk ? ['SLA Risk'] : []),
                        ...(value > 5 ? ['Premium'] : [])
                    ],
                    nextAction: stage === 'lead' ? 'Initial contact' : 
                               stage === 'viewing' ? 'Schedule client viewing' :
                               stage === 'proposal' ? 'Send pricing proposal' :
                               stage === 'hot' ? 'Legal approval pending' :
                               'Final documentation',
                    nextActionDue: Math.floor(Math.random() * 7) - 2,
                    lastActivity: hoursAgo < 24 ? `${hoursAgo} hours ago` : `${Math.floor(hoursAgo / 24)} days ago`,
                    lastActivityType: ['Client call', 'Site visit', 'Email sent', 'Document review', 'HoT submitted'][Math.floor(Math.random() * 5)]
                });
            }

            return deals.sort((a, b) => a.createdDaysAgo - b.createdDaysAgo);
        }

        // Initialize Pipeline Data
        function initializePipelineData() {
            allDeals = generatePipelineDeals();
            filteredDeals = [...allDeals];
            updatePipelineKPIs();
            renderPipelineTable();
            renderStageDistributionChart();
            renderRecentActivity();
            renderBrokerPerformance();
        }

        // Update Pipeline KPIs
        function updatePipelineKPIs() {
            const totalDeals = filteredDeals.length;
            const newLeads = filteredDeals.filter(d => d.createdDaysAgo <= 7).length;
            const stalledDeals = filteredDeals.filter(d => d.isStalled).length;
            const viewingsBooked = filteredDeals.filter(d => d.stage === 'viewing' && d.createdDaysAgo <= 7).length;
            const totalValue = filteredDeals.reduce((sum, d) => sum + d.value, 0).toFixed(1);

            document.getElementById('kpi-total').textContent = totalDeals;
            document.getElementById('kpi-leads').textContent = newLeads;
            document.getElementById('kpi-stalled').textContent = stalledDeals;
            document.getElementById('kpi-viewings').textContent = viewingsBooked;
            document.getElementById('pipeline-total-value').textContent = `£${totalValue}M total value`;
        }

        // Render Pipeline Table
        function renderPipelineTable() {
            const tbody = document.getElementById('pipeline-table-body');
            if (!tbody) return;

            const start = (currentPipelinePage - 1) * dealsPerPage;
            const end = start + dealsPerPage;
            const pageDeals = filteredDeals.slice(start, end);

            tbody.innerHTML = pageDeals.map(deal => `
                <tr class="hover:bg-stone hover:bg-opacity-20 transition-colors cursor-pointer" onclick="openPipelineDealDrawer('${deal.id}')">
                    <td class="py-4 px-6">
                        <input type="checkbox" class="w-4 h-4 text-slate bg-stone border-stone rounded focus:ring-slate" onclick="event.stopPropagation()">
                    </td>
                    <td class="py-4 px-6">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 bg-${deal.stageColor} rounded-lg flex items-center justify-center">
                                <i class="fa-solid fa-building text-white text-xs"></i>
                            </div>
                            <div>
                                <div class="font-medium text-slate">${deal.id}</div>
                                <div class="text-xs text-concrete">Created ${deal.createdDaysAgo} days ago</div>
                            </div>
                        </div>
                    </td>
                    <td class="py-4 px-6">
                        <div>
                            <div class="font-medium text-slate">${deal.property}</div>
                            <div class="text-sm text-concrete">${deal.address} • ${deal.size.toLocaleString()} sq ft</div>
                            <div class="flex items-center space-x-2 mt-1">
                                ${deal.tags.map(tag => {
                                    const color = tag === 'SLA Risk' ? 'danger' : tag === 'Premium' ? 'info' : 'slate';
                                    return `<span class="text-xs bg-${color} bg-opacity-10 text-${color} px-2 py-1 rounded">${tag}</span>`;
                                }).join('')}
                            </div>
                        </div>
                    </td>
                    <td class="py-4 px-6">
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-${deal.stageColor} bg-opacity-10 text-${deal.stageColor}">
                            <div class="w-2 h-2 bg-${deal.stageColor} rounded-full mr-2"></div>
                            ${deal.stageName}
                        </span>
                    </td>
                    <td class="py-4 px-6">
                        <div>
                            <div class="text-sm font-medium text-slate">${deal.nextAction}</div>
                            <div class="text-xs ${deal.nextActionDue < 0 ? 'text-danger' : deal.nextActionDue === 0 ? 'text-warning' : 'text-success'} flex items-center mt-1">
                                <i class="fa-solid fa-clock mr-1"></i>
                                ${deal.nextActionDue < 0 ? `Overdue by ${Math.abs(deal.nextActionDue)} days` : 
                                  deal.nextActionDue === 0 ? 'Due today' : 
                                  `Due in ${deal.nextActionDue} days`}
                            </div>
                        </div>
                    </td>
                    <td class="py-4 px-6">
                        <div class="flex items-center space-x-2">
                            <img src="${deal.ownerAvatar}" alt="${deal.owner}" class="w-6 h-6 rounded-full">
                            <span class="text-sm text-slate">${deal.owner}</span>
                        </div>
                    </td>
                    <td class="py-4 px-6">
                        <div class="text-sm text-slate">${deal.lastActivity}</div>
                        <div class="text-xs text-concrete">${deal.lastActivityType}</div>
                    </td>
                    <td class="py-4 px-6">
                        <div>
                            <div class="text-sm font-medium text-slate">${deal.broker}</div>
                            <div class="text-xs text-concrete">${deal.brokerContact}</div>
                        </div>
                    </td>
                    <td class="py-4 px-6">
                        <div class="text-sm font-semibold text-slate">${deal.valueFormatted}</div>
                        <div class="text-xs text-concrete">Annual value</div>
                    </td>
                    <td class="py-4 px-6 text-center">
                        <div class="flex items-center justify-center space-x-1">
                            <button class="p-1 text-concrete hover:text-slate transition-colors" title="View Details" onclick="event.stopPropagation(); openPipelineDealDrawer('${deal.id}')">
                                <i class="fa-solid fa-eye"></i>
                            </button>
                            <button class="p-1 text-concrete hover:text-slate transition-colors" title="Edit" onclick="event.stopPropagation()">
                                <i class="fa-solid fa-edit"></i>
                            </button>
                            <button class="p-1 text-concrete hover:text-slate transition-colors" title="More Actions" onclick="event.stopPropagation()">
                                <i class="fa-solid fa-ellipsis-v"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');

            updatePipelinePagination();
            document.getElementById('pipeline-results-count').textContent = `Showing ${start + 1} to ${Math.min(end, filteredDeals.length)} of ${filteredDeals.length} deals`;
        }

        // Update Pipeline Pagination
        function updatePipelinePagination() {
            const totalPages = Math.ceil(filteredDeals.length / dealsPerPage);
            const pageNumbersContainer = document.getElementById('pipeline-page-numbers');
            
            if (!pageNumbersContainer) return;

            let pages = [];
            if (totalPages <= 7) {
                pages = Array.from({ length: totalPages }, (_, i) => i + 1);
            } else {
                if (currentPipelinePage <= 3) {
                    pages = [1, 2, 3, 4, '...', totalPages];
                } else if (currentPipelinePage >= totalPages - 2) {
                    pages = [1, '...', totalPages - 3, totalPages - 2, totalPages - 1, totalPages];
                } else {
                    pages = [1, '...', currentPipelinePage - 1, currentPipelinePage, currentPipelinePage + 1, '...', totalPages];
                }
            }

            pageNumbersContainer.innerHTML = pages.map(page => {
                if (page === '...') {
                    return '<span class="px-3 py-2 text-concrete">...</span>';
                }
                const isActive = page === currentPipelinePage;
                return `<button class="px-3 py-2 rounded-lg text-sm ${isActive ? 'bg-slate text-white' : 'text-slate hover:bg-stone'} transition-colors" onclick="goToPipelinePage(${page})">${page}</button>`;
            }).join('');

            document.getElementById('pipeline-prev-page').disabled = currentPipelinePage === 1;
            document.getElementById('pipeline-next-page').disabled = currentPipelinePage === totalPages;
            
            document.getElementById('pipeline-page-start').textContent = (currentPipelinePage - 1) * dealsPerPage + 1;
            document.getElementById('pipeline-page-end').textContent = Math.min(currentPipelinePage * dealsPerPage, filteredDeals.length);
            document.getElementById('pipeline-page-total').textContent = filteredDeals.length;
        }

        // Go to Pipeline Page
        function goToPipelinePage(page) {
            currentPipelinePage = page;
            renderPipelineTable();
        }

        // Filter Pipeline Deals
        function filterPipelineDeals() {
            const stage = document.getElementById('filter-pipeline-stage')?.value || '';
            const broker = document.getElementById('filter-pipeline-broker')?.value || '';
            const sector = document.getElementById('filter-pipeline-sector')?.value || '';
            const location = document.getElementById('filter-pipeline-location')?.value || '';
            const size = document.getElementById('filter-pipeline-size')?.value || '';
            const price = document.getElementById('filter-pipeline-price')?.value || '';
            const search = document.getElementById('search-pipeline')?.value.toLowerCase() || '';

            filteredDeals = allDeals.filter(deal => {
                if (stage && deal.stage !== stage) return false;
                if (broker && deal.brokerSlug !== broker) return false;
                if (sector && deal.sector !== sector) return false;
                if (location && deal.location !== location) return false;
                
                if (size) {
                    if (size === 'small' && deal.size >= 5000) return false;
                    if (size === 'medium' && (deal.size < 5000 || deal.size > 20000)) return false;
                    if (size === 'large' && deal.size <= 20000) return false;
                }
                
                if (price) {
                    if (price === 'low' && deal.value >= 1) return false;
                    if (price === 'medium' && (deal.value < 1 || deal.value > 5)) return false;
                    if (price === 'high' && deal.value <= 5) return false;
                }
                
                if (search) {
                    const searchableText = `${deal.id} ${deal.property} ${deal.address} ${deal.broker} ${deal.brokerContact} ${deal.owner}`.toLowerCase();
                    if (!searchableText.includes(search)) return false;
                }

                return true;
            });

            currentPipelinePage = 1;
            updatePipelineKPIs();
            renderPipelineTable();
            renderStageDistributionChart();
        }

        // Render Stage Distribution Chart
        function renderStageDistributionChart() {
            const stageCounts = {
                'Lead': filteredDeals.filter(d => d.stage === 'lead').length,
                'Viewing': filteredDeals.filter(d => d.stage === 'viewing').length,
                'Proposal': filteredDeals.filter(d => d.stage === 'proposal').length,
                'HoT': filteredDeals.filter(d => d.stage === 'hot').length,
                'Signed': filteredDeals.filter(d => d.stage === 'signed').length
            };

            if (typeof Highcharts !== 'undefined') {
                Highcharts.chart('stage-distribution-chart', {
                    chart: { type: 'bar', backgroundColor: 'transparent' },
                    title: { text: null },
                    xAxis: { categories: Object.keys(stageCounts), title: { text: null } },
                    yAxis: { min: 0, title: { text: 'Number of Deals' } },
                    legend: { enabled: false },
                    plotOptions: {
                        bar: {
                            dataLabels: { enabled: true },
                            colorByPoint: true
                        }
                    },
                    colors: ['#8E8E8E', '#252525', '#F59E0B', '#3B82F6', '#10B981'],
                    series: [{
                        name: 'Deals',
                        data: Object.values(stageCounts)
                    }],
                    credits: { enabled: false }
                });
            }
        }

        // Render Recent Activity
        function renderRecentActivity() {
            const recentDeals = [...filteredDeals]
                .sort((a, b) => a.lastTouchHoursAgo - b.lastTouchHoursAgo)
                .slice(0, 5);

            const activityList = document.getElementById('recent-activity-list');
            if (!activityList) return;

            activityList.innerHTML = recentDeals.map(deal => `
                <div class="flex items-start space-x-3 p-3 bg-stone bg-opacity-20 rounded-lg hover:bg-opacity-30 transition-colors cursor-pointer" onclick="openPipelineDealDrawer('${deal.id}')">
                    <div class="w-2 h-2 bg-${deal.stageColor} rounded-full mt-2"></div>
                    <div class="flex-1">
                        <p class="text-sm font-medium text-slate">${deal.owner} ${deal.lastActivityType.toLowerCase()} for ${deal.property}</p>
                        <p class="text-xs text-concrete">${deal.stageName} stage • ${deal.lastActivity}</p>
                    </div>
                </div>
            `).join('');
        }

        // Render Broker Performance
        function renderBrokerPerformance() {
            const brokerStats = {};
            
            allDeals.forEach(deal => {
                if (!brokerStats[deal.broker]) {
                    brokerStats[deal.broker] = {
                        deals: 0,
                        value: 0,
                        winRate: 0,
                        slug: deal.brokerSlug
                    };
                }
                brokerStats[deal.broker].deals++;
                brokerStats[deal.broker].value += deal.value;
            });

            // Calculate win rates
            Object.keys(brokerStats).forEach(broker => {
                const signedDeals = allDeals.filter(d => d.broker === broker && d.stage === 'signed').length;
                brokerStats[broker].winRate = brokerStats[broker].deals > 0 ? 
                    Math.round((signedDeals / brokerStats[broker].deals) * 100) : 0;
            });

            const brokerGrid = document.getElementById('broker-performance-grid');
            if (!brokerGrid) return;

            const brokerColors = {
                'Savills': 'slate',
                'CBRE': 'info',
                'JLL': 'success',
                'Knight Frank': 'warning',
                'Cushman & Wakefield': 'concrete'
            };

            brokerGrid.innerHTML = Object.entries(brokerStats).map(([broker, stats]) => {
                const color = brokerColors[broker] || 'slate';
                return `
                    <div class="text-center p-6 bg-${color} bg-opacity-5 rounded-lg">
                        <div class="w-12 h-12 bg-${color} bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-3">
                            <i class="fa-solid fa-building text-${color} text-lg"></i>
                        </div>
                        <div class="text-sm font-medium text-slate mb-2">${broker}</div>
                        <div class="text-2xl font-semibold text-slate mb-1">${stats.deals}</div>
                        <div class="text-xs text-concrete mb-2">Deals</div>
                        <div class="text-sm font-semibold text-slate">£${stats.value.toFixed(1)}M</div>
                        <div class="text-xs text-concrete mb-2">Total Value</div>
                        <div class="text-sm font-semibold text-${color}">${stats.winRate}%</div>
                        <div class="text-xs text-concrete">Win Rate</div>
                    </div>
                `;
            }).join('');
        }

        // Open Pipeline Deal Drawer
        function openPipelineDealDrawer(dealId) {
            const deal = allDeals.find(d => d.id === dealId);
            if (!deal) return;

            const drawer = document.getElementById('deal-detail-drawer');
            if (drawer) {
                drawer.classList.remove('translate-x-full');
                
                // Emit analytics event
                emitEvent('pipeline_deal_opened', {
                    deal_id: dealId,
                    stage: deal.stage,
                    value: deal.value,
                    user_id: 'executive_001',
                    timestamp: new Date().toISOString()
                });

                showToast('Deal details loaded', 'info');
            }
        }

        // Pipeline Event Listeners
        document.getElementById('filter-pipeline-stage')?.addEventListener('change', filterPipelineDeals);
        document.getElementById('filter-pipeline-broker')?.addEventListener('change', filterPipelineDeals);
        document.getElementById('filter-pipeline-sector')?.addEventListener('change', filterPipelineDeals);
        document.getElementById('filter-pipeline-location')?.addEventListener('change', filterPipelineDeals);
        document.getElementById('filter-pipeline-size')?.addEventListener('change', filterPipelineDeals);
        document.getElementById('filter-pipeline-price')?.addEventListener('change', filterPipelineDeals);
        document.getElementById('search-pipeline')?.addEventListener('input', filterPipelineDeals);

        document.getElementById('clear-pipeline-filters')?.addEventListener('click', function() {
            document.getElementById('filter-pipeline-stage').value = '';
            document.getElementById('filter-pipeline-broker').value = '';
            document.getElementById('filter-pipeline-sector').value = '';
            document.getElementById('filter-pipeline-location').value = '';
            document.getElementById('filter-pipeline-size').value = '';
            document.getElementById('filter-pipeline-price').value = '';
            document.getElementById('search-pipeline').value = '';
            filterPipelineDeals();
        });

        // Quick Filters
        document.querySelectorAll('[data-quick-filter]').forEach(btn => {
            btn.addEventListener('click', function() {
                const filter = this.dataset.quickFilter;
                
                // Reset all filters first
                document.getElementById('filter-pipeline-stage').value = '';
                document.getElementById('filter-pipeline-broker').value = '';
                document.getElementById('filter-pipeline-sector').value = '';
                document.getElementById('filter-pipeline-location').value = '';
                document.getElementById('filter-pipeline-size').value = '';
                document.getElementById('filter-pipeline-price').value = '';
                document.getElementById('search-pipeline').value = '';

                // Apply quick filter
                if (filter === 'my-deals') {
                    document.getElementById('search-pipeline').value = 'Tom';
                } else if (filter === 'sla-risk') {
                    filteredDeals = allDeals.filter(d => d.hasSLARisk);
                    currentPipelinePage = 1;
                    updatePipelineKPIs();
                    renderPipelineTable();
                    return;
                } else if (filter === 'high-value') {
                    document.getElementById('filter-pipeline-price').value = 'high';
                } else if (filter === 'urgent') {
                    filteredDeals = allDeals.filter(d => d.nextActionDue <= 0);
                    currentPipelinePage = 1;
                    updatePipelineKPIs();
                    renderPipelineTable();
                    return;
                }

                filterPipelineDeals();
            });
        });

        // Pagination
        document.getElementById('pipeline-prev-page')?.addEventListener('click', function() {
            if (currentPipelinePage > 1) {
                currentPipelinePage--;
                renderPipelineTable();
            }
        });

        document.getElementById('pipeline-next-page')?.addEventListener('click', function() {
            const totalPages = Math.ceil(filteredDeals.length / dealsPerPage);
            if (currentPipelinePage < totalPages) {
                currentPipelinePage++;
                renderPipelineTable();
            }
        });

        document.getElementById('pipeline-per-page')?.addEventListener('change', function() {
            dealsPerPage = parseInt(this.value);
            currentPipelinePage = 1;
            renderPipelineTable();
        });

        // Export Pipeline
        document.getElementById('export-pipeline-btn')?.addEventListener('click', function() {
            const csv = [
                ['Deal ID', 'Property', 'Address', 'Size (sq ft)', 'Sector', 'Location', 'Stage', 'Broker', 'Owner', 'Value', 'Created', 'Last Activity'].join(','),
                ...filteredDeals.map(d => [
                    d.id,
                    `"${d.property}"`,
                    `"${d.address}"`,
                    d.size,
                    d.sector,
                    d.location,
                    d.stageName,
                    d.broker,
                    d.owner,
                    d.valueFormatted,
                    `${d.createdDaysAgo} days ago`,
                    d.lastActivity
                ].join(','))
            ].join('\n');

            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `pipeline_${new Date().toISOString().split('T')[0]}.csv`;
            a.click();

            showToast('Pipeline exported successfully', 'success');
            emitEvent('pipeline_exported', {
                deals_count: filteredDeals.length,
                user_id: 'executive_001',
                timestamp: new Date().toISOString()
            });
        });

        // Add Deal Button
        document.getElementById('add-deal-btn')?.addEventListener('click', function() {
            showToast('Add Deal form coming soon', 'info');
            emitEvent('add_deal_clicked', {
                user_id: 'executive_001',
                timestamp: new Date().toISOString()
            });
        });

        // Table Sorting
        document.querySelectorAll('[data-sort]').forEach(header => {
            header.addEventListener('click', function() {
                const column = this.dataset.sort;
                
                if (pipelineSortColumn === column) {
                    pipelineSortDirection = pipelineSortDirection === 'asc' ? 'desc' : 'asc';
                } else {
                    pipelineSortColumn = column;
                    pipelineSortDirection = 'asc';
                }

                filteredDeals.sort((a, b) => {
                    let aVal, bVal;
                    
                    if (column === 'id') {
                        aVal = a.id;
                        bVal = b.id;
                    } else if (column === 'property') {
                        aVal = a.property;
                        bVal = b.property;
                    } else if (column === 'stage') {
                        aVal = a.stage;
                        bVal = b.stage;
                    } else if (column === 'owner') {
                        aVal = a.owner;
                        bVal = b.owner;
                    } else if (column === 'value') {
                        aVal = a.value;
                        bVal = b.value;
                    }

                    if (typeof aVal === 'string') {
                        return pipelineSortDirection === 'asc' ? 
                            aVal.localeCompare(bVal) : 
                            bVal.localeCompare(aVal);
                    } else {
                        return pipelineSortDirection === 'asc' ? 
                            aVal - bVal : 
                            bVal - aVal;
                    }
                });

                renderPipelineTable();
            });
        });

        // Add nav handler for Pipeline
        document.getElementById('nav-pipeline')?.addEventListener('click', () => navigateToPage('pipeline'));
        document.getElementById('nav-pipeline-collapsed')?.addEventListener('click', () => navigateToPage('pipeline'));
        document.getElementById('nav-pipeline-mobile')?.addEventListener('click', () => {
            navigateToPage('pipeline');
            document.getElementById('mobile-nav-drawer').classList.add('translate-x-full');
        });

        // ============================================================================
        // ADD PROPERTY FUNCTIONALITY
        // ============================================================================

        // State for uploaded files
        // uploadedPhotos and uploadedDocuments already declared globally

        // Initialize Add Property page
        function initAddPropertyPage() {
            // File upload handlers
            setupFileUploads();
            
            // Form validation
            setupFormValidation();
            
            // Button handlers
            setupPropertyButtons();
        }

        // Setup file upload functionality
        function setupFileUploads() {
            // Photo upload
            const photoUploadArea = document.getElementById('photo-upload-area');
            const photoInput = document.getElementById('property-photos');
            const photoPreviewsContainer = document.getElementById('photo-previews');

            if (photoUploadArea && photoInput) {
                // Click to upload
                photoUploadArea.addEventListener('click', () => photoInput.click());

                // Drag and drop
                photoUploadArea.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    photoUploadArea.classList.add('border-slate', 'bg-stone');
                });

                photoUploadArea.addEventListener('dragleave', () => {
                    photoUploadArea.classList.remove('border-slate', 'bg-stone');
                });

                photoUploadArea.addEventListener('drop', (e) => {
                    e.preventDefault();
                    photoUploadArea.classList.remove('border-slate', 'bg-stone');
                    const files = Array.from(e.dataTransfer.files).filter(f => f.type.startsWith('image/'));
                    handlePhotoUpload(files);
                });

                // File input change
                photoInput.addEventListener('change', (e) => {
                    const files = Array.from(e.target.files);
                    handlePhotoUpload(files);
                });
            }

            // Document upload
            const docUploadArea = document.getElementById('doc-upload-area');
            const docInput = document.getElementById('property-documents');
            const docPreviewsContainer = document.getElementById('doc-previews');

            if (docUploadArea && docInput) {
                // Click to upload
                docUploadArea.addEventListener('click', () => docInput.click());

                // Drag and drop
                docUploadArea.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    docUploadArea.classList.add('border-slate', 'bg-stone');
                });

                docUploadArea.addEventListener('dragleave', () => {
                    docUploadArea.classList.remove('border-slate', 'bg-stone');
                });

                docUploadArea.addEventListener('drop', (e) => {
                    e.preventDefault();
                    docUploadArea.classList.remove('border-slate', 'bg-stone');
                    const files = Array.from(e.dataTransfer.files);
                    handleDocumentUpload(files);
                });

                // File input change
                docInput.addEventListener('change', (e) => {
                    const files = Array.from(e.target.files);
                    handleDocumentUpload(files);
                });
            }
        }

        // Handle photo upload
        function handlePhotoUpload(files) {
            const photoPreviewsContainer = document.getElementById('photo-previews');
            
            files.forEach(file => {
                // Validate file size (5MB max)
                if (file.size > 5 * 1024 * 1024) {
                    showToast(`${file.name} is too large. Max size is 5MB.`, 'danger');
                    return;
                }

                // Create preview
                const reader = new FileReader();
                reader.onload = (e) => {
                    const photoId = Date.now() + Math.random();
                    uploadedPhotos.push({ id: photoId, file, url: e.target.result });

                    const previewDiv = document.createElement('div');
                    previewDiv.className = 'relative group';
                    previewDiv.dataset.photoId = photoId;
                    previewDiv.innerHTML = `
                        <img src="${e.target.result}" class="w-full h-32 object-cover rounded-lg border border-stone">
                        <button type="button" class="absolute top-2 right-2 w-6 h-6 bg-danger text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center" onclick="removePhoto(${photoId})">
                            <i class="fa-solid fa-times text-xs"></i>
                        </button>
                        <div class="absolute bottom-2 left-2 right-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded truncate">
                            ${file.name}
                        </div>
                    `;
                    photoPreviewsContainer.appendChild(previewDiv);
                };
                reader.readAsDataURL(file);
            });

            emitEvent('property_photos_uploaded', { count: files.length });
        }

        // Handle document upload
        function handleDocumentUpload(files) {
            const docPreviewsContainer = document.getElementById('doc-previews');
            
            files.forEach(file => {
                // Validate file size (10MB max)
                if (file.size > 10 * 1024 * 1024) {
                    showToast(`${file.name} is too large. Max size is 10MB.`, 'danger');
                    return;
                }

                const docId = Date.now() + Math.random();
                uploadedDocuments.push({ id: docId, file });

                const docDiv = document.createElement('div');
                docDiv.className = 'flex items-center justify-between p-3 bg-stone rounded-lg';
                docDiv.dataset.docId = docId;
                docDiv.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <i class="fa-solid fa-file-pdf text-2xl text-danger"></i>
                        <div>
                            <p class="text-sm font-medium text-slate">${file.name}</p>
                            <p class="text-xs text-concrete">${(file.size / 1024).toFixed(2)} KB</p>
                        </div>
                    </div>
                    <button type="button" class="text-danger hover:text-opacity-80 transition-colors" onclick="removeDocument(${docId})">
                        <i class="fa-solid fa-trash"></i>
                    </button>
                `;
                docPreviewsContainer.appendChild(docDiv);
            });

            emitEvent('property_documents_uploaded', { count: files.length });
        }

        // Remove photo
        window.removePhoto = function(photoId) {
            uploadedPhotos = uploadedPhotos.filter(p => p.id !== photoId);
            const previewDiv = document.querySelector(`[data-photo-id="${photoId}"]`);
            if (previewDiv) previewDiv.remove();
            showToast('Photo removed', 'info');
        };

        // Remove document
        window.removeDocument = function(docId) {
            uploadedDocuments = uploadedDocuments.filter(d => d.id !== docId);
            const docDiv = document.querySelector(`[data-doc-id="${docId}"]`);
            if (docDiv) docDiv.remove();
            showToast('Document removed', 'info');
        };

        // Setup form validation
        function setupFormValidation() {
            const form = document.getElementById('add-property-form');
            if (!form) return;

            // Real-time validation for required fields
            const requiredFields = [
                'property-name',
                'property-address',
                'property-city',
                'property-postcode',
                'property-size',
                'property-rent',
                'property-availability',
                'property-sector',
                'property-broker'
            ];

            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) {
                    field.addEventListener('blur', () => validateField(field));
                    field.addEventListener('input', () => {
                        if (field.classList.contains('border-danger')) {
                            validateField(field);
                        }
                    });
                }
            });
        }

        // Validate individual field
        function validateField(field) {
            const value = field.value.trim();
            const isValid = value !== '';

            if (isValid) {
                field.classList.remove('border-danger');
                field.classList.add('border-stone');
            } else {
                field.classList.remove('border-stone');
                field.classList.add('border-danger');
            }

            return isValid;
        }

        // Validate entire form
        function validatePropertyForm() {
            const requiredFields = [
                { id: 'property-name', label: 'Property Name' },
                { id: 'property-address', label: 'Street Address' },
                { id: 'property-city', label: 'City' },
                { id: 'property-postcode', label: 'Postcode' },
                { id: 'property-size', label: 'Size' },
                { id: 'property-rent', label: 'Rent' },
                { id: 'property-availability', label: 'Availability' },
                { id: 'property-sector', label: 'Sector' },
                { id: 'property-broker', label: 'Broker' }
            ];

            let isValid = true;
            const errors = [];

            requiredFields.forEach(({ id, label }) => {
                const field = document.getElementById(id);
                if (field && !validateField(field)) {
                    isValid = false;
                    errors.push(label);
                }
            });

            if (!isValid) {
                showToast(`Please fill in required fields: ${errors.join(', ')}`, 'danger');
            }

            return isValid;
        }

        // Setup button handlers
        function setupPropertyButtons() {
            // Cancel button
            const cancelBtn = document.getElementById('cancel-property-btn');
            if (cancelBtn) {
                cancelBtn.addEventListener('click', () => {
                    if (confirm('Are you sure you want to cancel? All unsaved changes will be lost.')) {
                        resetPropertyForm();
                        navigateToPage('property-index');
                        emitEvent('property_creation_cancelled', {
                            user_id: 'executive_001',
                            timestamp: new Date().toISOString()
                        });
                    }
                });
            }

            // Save button
            const saveBtn = document.getElementById('save-property-btn');
            if (saveBtn) {
                saveBtn.addEventListener('click', () => {
                    if (validatePropertyForm()) {
                        saveProperty(false);
                    }
                });
            }

            // Save & Add to Pipeline button
            const saveAddPipelineBtn = document.getElementById('save-add-pipeline-btn');
            if (saveAddPipelineBtn) {
                saveAddPipelineBtn.addEventListener('click', () => {
                    if (validatePropertyForm()) {
                        saveProperty(true);
                    }
                });
            }
        }

        // Save property
        function saveProperty(addToPipeline = false) {
            // Collect form data
            const propertyData = {
                id: 'PROP-' + Date.now(),
                name: document.getElementById('property-name').value,
                address: document.getElementById('property-address').value,
                city: document.getElementById('property-city').value,
                postcode: document.getElementById('property-postcode').value,
                latitude: document.getElementById('property-latitude').value || null,
                longitude: document.getElementById('property-longitude').value || null,
                size: parseInt(document.getElementById('property-size').value),
                rent: parseFloat(document.getElementById('property-rent').value),
                availability: document.getElementById('property-availability').value,
                availabilityDate: document.getElementById('property-availability-date').value || null,
                sector: document.getElementById('property-sector').value,
                lease: document.getElementById('property-lease').value || null,
                epc: document.getElementById('property-epc').value || null,
                fitout: document.getElementById('property-fitout').value || null,
                valveVisibility: document.getElementById('property-valve-visibility').value || null,
                hvacServicing: document.getElementById('property-hvac-servicing').value || null,
                propertyNotes: document.getElementById('property-notes-main').value || null,
                broker: document.getElementById('property-broker').value,
                brokerContact: document.getElementById('property-broker-contact').value || null,
                email: document.getElementById('property-email').value || null,
                phone: document.getElementById('property-phone').value || null,
                landlordCompany: document.getElementById('property-landlord').value || null,
                disposalAgentCompany: document.getElementById('property-disposal-agent').value || null,
                notes: document.getElementById('property-notes').value || null,
                location: document.getElementById('property-location').value || null,
                stage: document.getElementById('property-stage').value || 'Active',
                amenities: Array.from(document.querySelectorAll('input[name="amenity"]:checked')).map(cb => cb.value),
                photos: uploadedPhotos.map(p => p.url),
                documents: uploadedDocuments.map(d => d.file.name),
                // Unit Information
                unitName: document.getElementById('unit-name').value || null,
                unitFloor: document.getElementById('unit-floor').value || null,
                unitSqft: document.getElementById('unit-sqft').value || null,
                unitDeskCount: document.getElementById('unit-desk-count').value || null,
                unitMeetingRooms: document.getElementById('unit-meeting-rooms').value || null,
                unitVisibility: document.getElementById('unit-visibility').value || null,
                unitStatus: document.getElementById('unit-status').value || null,
                unitWindowsType: document.getElementById('unit-windows-type').value || null,
                unitHvacServicing: document.getElementById('unit-hvac-servicing').value || null,
                unitFigmaUrl: document.getElementById('unit-figma-url').value || null,
                unitHvacNotes: document.getElementById('unit-hvac-notes').value || null,
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString(),
                createdBy: 'Executive'
            };

            // Simulate save operation
            setTimeout(() => {
                // Add to properties array (if we had one)
                showToast('Property saved successfully!', 'success');
                
                emitEvent('property_created', {
                    property_id: propertyData.id,
                    property_name: propertyData.name,
                    add_to_pipeline: addToPipeline,
                    user_id: 'executive_001',
                    timestamp: new Date().toISOString()
                });

                // Reset form
                resetPropertyForm();

                if (addToPipeline) {
                    // Show pipeline modal
                    showAddToPipelineModal(propertyData);
                } else {
                    // Navigate to property index
                    setTimeout(() => {
                        navigateToPage('property-index');
                    }, 1500);
                }
            }, 500);
        }

        // Show Add to Pipeline modal
        function showAddToPipelineModal(propertyData) {
            // Create modal overlay
            const modalOverlay = document.createElement('div');
            modalOverlay.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center';
            modalOverlay.innerHTML = `
                <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-slate">Add to Pipeline</h3>
                        <button class="text-concrete hover:text-slate" onclick="this.closest('.fixed').remove()">
                            <i class="fa-solid fa-times"></i>
                        </button>
                    </div>
                    
                    <p class="text-sm text-concrete mb-4">
                        Create a deal for <strong>${propertyData.name}</strong> and add it to the pipeline.
                    </p>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-slate mb-2">Deal Stage</label>
                            <select id="pipeline-stage" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate">
                                <option value="lead">Lead</option>
                                <option value="viewing">Viewing Scheduled</option>
                                <option value="proposal">Proposal Sent</option>
                                <option value="hot">Heads of Terms</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-slate mb-2">Deal Owner</label>
                            <select id="pipeline-owner" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate">
                                <option value="Tom">Tom</option>
                                <option value="Max">Max</option>
                                <option value="Dani">Dani</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-slate mb-2">Estimated Value (£)</label>
                            <input type="number" id="pipeline-value" class="w-full px-4 py-2 border border-stone rounded-lg focus:outline-none focus:ring-2 focus:ring-slate" placeholder="e.g., 1170000" value="${propertyData.size * propertyData.rent}">
                        </div>
                    </div>
                    
                    <div class="flex items-center space-x-3 mt-6">
                        <button class="flex-1 px-4 py-2 border border-stone text-concrete rounded-lg hover:bg-stone transition-colors" onclick="this.closest('.fixed').remove(); navigateToPage('property-index');">
                            Skip
                        </button>
                        <button class="flex-1 px-4 py-2 bg-slate text-white rounded-lg hover:bg-opacity-90 transition-colors" onclick="addDealToPipeline('${propertyData.id}', '${propertyData.name}')">
                            Add to Pipeline
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modalOverlay);
        }

        // Add deal to pipeline
        window.addDealToPipeline = function(propertyId, propertyName) {
            const stage = document.getElementById('pipeline-stage').value;
            const owner = document.getElementById('pipeline-owner').value;
            const value = document.getElementById('pipeline-value').value;

            // Simulate adding to pipeline
            showToast('Deal added to pipeline successfully!', 'success');
            
            emitEvent('deal_added_to_pipeline', {
                property_id: propertyId,
                property_name: propertyName,
                stage: stage,
                owner: owner,
                value: value,
                user_id: 'executive_001',
                timestamp: new Date().toISOString()
            });

            // Close modal
            document.querySelector('.fixed.inset-0').remove();

            // Navigate to pipeline
            setTimeout(() => {
                navigateToPage('pipeline');
            }, 1500);
        };

        // Reset property form
        function resetPropertyForm() {
            const form = document.getElementById('add-property-form');
            if (form) form.reset();
            
            // Clear uploaded files
            uploadedPhotos = [];
            uploadedDocuments = [];
            
            const photoPreviewsContainer = document.getElementById('photo-previews');
            if (photoPreviewsContainer) photoPreviewsContainer.innerHTML = '';
            
            const docPreviewsContainer = document.getElementById('doc-previews');
            if (docPreviewsContainer) docPreviewsContainer.innerHTML = '';
            
            // Reset validation states
            document.querySelectorAll('.border-danger').forEach(el => {
                el.classList.remove('border-danger');
                el.classList.add('border-stone');
            });
        }

        // Initialize Add Property page when navigating to it
        document.addEventListener('DOMContentLoaded', function() {
            // Check if we're on the add property page
            const addPropertyPage = document.getElementById('add-property-page');
            if (addPropertyPage) {
                initAddPropertyPage();
            }
        });

        // Update Add Property button handlers
        document.querySelectorAll('button[title="Add Property"]').forEach(btn => {
            btn.addEventListener('click', () => {
                navigateToPage('add-property');
                emitEvent('add_property_clicked', {
                    user_id: 'executive_001',
                    timestamp: new Date().toISOString()
                });
            });
        });

        // ========================================
        // DEAL DETAIL TAB SWITCHING
        // ========================================
        
        function switchDealTab(tabName) {
            console.log('Switching to tab:', tabName);
            
            // Hide all tab contents
            const allTabContents = document.querySelectorAll('.deal-tab-content');
            allTabContents.forEach(content => {
                content.style.display = 'none';
            });
            
            // Remove active class from all tab buttons
            const allTabButtons = document.querySelectorAll('.deal-tab-btn');
            allTabButtons.forEach(btn => {
                btn.classList.remove('deal-tab-active', 'border-blue-600', 'text-blue-600');
                btn.classList.add('border-transparent', 'text-gray-600');
            });
            
            // Show the selected tab content
            const selectedContent = document.getElementById('tab-content-' + tabName);
            if (selectedContent) {
                selectedContent.style.display = 'block';
                console.log('Showing tab content:', 'tab-content-' + tabName);
            } else {
                console.error('Tab content not found:', 'tab-content-' + tabName);
            }
            
            // Add active class to the selected tab button
            const selectedButton = document.getElementById('tab-btn-' + tabName);
            if (selectedButton) {
                selectedButton.classList.add('deal-tab-active', 'border-blue-600', 'text-blue-600');
                selectedButton.classList.remove('border-transparent', 'text-gray-600');
                console.log('Activated tab button:', 'tab-btn-' + tabName);
            } else {
                console.error('Tab button not found:', 'tab-btn-' + tabName);
            }
        }

        // Close deal detail drawer
        function closeDealDetail() {
            const drawer = document.getElementById('deal-detail-drawer');
            if (drawer) {
                drawer.classList.add('translate-x-full');
            }
        }

        // Placeholder functions for buttons
        function editDeal() {
            alert('Edit Deal functionality coming soon');
        }

        function shareDeal() {
            alert('Share Deal functionality coming soon');
        }

        function showMoreActions() {
            alert('More Actions menu coming soon');
        }

        function createIntervention() {
            alert('Create Intervention functionality coming soon');
        }

        function escalateBlocker(id) {
            alert('Escalate Blocker ' + id + ' functionality coming soon');
        }

        function requestDocument(type) {
            alert('Request Document (' + type + ') functionality coming soon');
        }

        function viewBlockerDetails(id) {
            alert('View Blocker Details ' + id + ' functionality coming soon');
        }

        console.log('✓ Deal tab switching functions loaded');

// Deal Value Trend Chart
Highcharts.chart('deal-value-chart', {
    credits: { enabled: false },
    chart: {
        type: 'line',
        height: 320
    },
    title: {
        text: ''
    },
    xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov']
    },
    yAxis: {
        title: {
            text: 'Deal Value (£M)'
        }
    },
    series: [{
        name: 'Deal Value',
        data: [1.2, 1.8, 2.1, 1.9, 2.4, 2.8, 3.1, 2.7, 3.4, 3.8, 4.2],
        color: '#2563eb'
    }]
});

// Stage Distribution Chart
Highcharts.chart('stage-distribution-chart', {
    credits: { enabled: false },
    chart: {
        type: 'pie',
        height: 320
    },
    title: {
        text: ''
    },
    series: [{
        name: 'Deals',
        data: [
            { name: 'Lead', y: 8, color: '#3b82f6' },
            { name: 'Viewing', y: 6, color: '#6366f1' },
            { name: 'Proposal', y: 4, color: '#8b5cf6' },
            { name: 'HoTs', y: 3, color: '#ec4899' },
            { name: 'Contract', y: 2, color: '#ef4444' },
            { name: 'Onboarding', y: 1, color: '#f97316' },
            { name: 'Live', y: 12, color: '#10b981' }
        ]
    }]
});

// Performance Chart
Highcharts.chart('performance-chart', {
    credits: { enabled: false },
    chart: {
        type: 'column',
        height: 320
    },
    title: {
        text: ''
    },
    xAxis: {
        categories: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6', 'Week 7', 'Week 8']
    },
    yAxis: [{
        title: {
            text: 'Deal Value (£M)'
        }
    }, {
        title: {
            text: 'Deal Count'
        },
        opposite: true
    }],
    series: [{
        name: 'Deal Value',
        type: 'column',
        data: [2.1, 1.8, 2.4, 2.9, 3.2, 2.7, 3.5, 4.1],
        color: '#2563eb'
    }, {
        name: 'Deal Count',
        type: 'line',
        yAxis: 1,
        data: [3, 2, 4, 3, 5, 4, 6, 7],
        color: '#10b981'
    }]
});        // ============================================================================
        // UNION CORE PLUS - HASH-BASED ROUTER
        // ============================================================================

        // Simple hash-based router for URL navigation
        const UnionRouter = {
            routes: {},
            currentPath: '/',
            
            init() {
                // Listen for hash changes
                window.addEventListener('hashchange', () => this.handleRoute());
                window.addEventListener('load', () => this.handleRoute());
                
                // Update navigation clicks to use hash links
                this.setupNavigation();
                
                console.log('✅ UNION Router initialized');
            },
            
            // Register a route
            register(path, pageId) {
                this.routes[path] = pageId;
            },
            
            // Handle route changes
            handleRoute() {
                const hash = window.location.hash.slice(1) || '/';
                this.currentPath = hash;
                
                // Check for dynamic routes (e.g., /deal/:id)
                let matchedRoute = null;
                let params = {};
                
                // Try exact match first
                if (this.routes[hash]) {
                    matchedRoute = this.routes[hash];
                } else {
                    // Try pattern matching
                    for (const [route, pageId] of Object.entries(this.routes)) {
                        const match = this.matchRoute(route, hash);
                        if (match) {
                            matchedRoute = pageId;
                            params = match;
                            break;
                        }
                    }
                }
                
                if (matchedRoute) {
                    this.showPage(matchedRoute, params);
                } else {
                    console.warn('No route found for:', hash);
                    // Default to dashboard
                    window.location.hash = '/';
                }
            },
            
            // Match dynamic routes
            matchRoute(pattern, path) {
                const patternParts = pattern.split('/');
                const pathParts = path.split('/');
                
                if (patternParts.length !== pathParts.length) return null;
                
                const params = {};
                for (let i = 0; i < patternParts.length; i++) {
                    if (patternParts[i].startsWith(':')) {
                        params[patternParts[i].slice(1)] = pathParts[i];
                    } else if (patternParts[i] !== pathParts[i]) {
                        return null;
                    }
                }
                
                return Object.keys(params).length > 0 ? params : null;
            },
            
            // Show a page
            showPage(pageId, params = {}) {
                // Hide all pages
                document.querySelectorAll('.page-content').forEach(page => {
                    page.classList.add('hidden');
                });
                
                // Show the target page
                const page = document.getElementById(pageId);
                if (page) {
                    page.classList.remove('hidden');
                    console.log('📄 Showing page:', pageId, params);
                    
                    // Update active nav item
                    this.updateActiveNav(pageId);
                } else {
                    console.error('❌ Page not found:', pageId);
                }
            },
            
            // Update active navigation item
            updateActiveNav(pageId) {
                // Remove active class from all nav items
                document.querySelectorAll('[id^="nav-"]').forEach(nav => {
                    nav.classList.remove('bg-slate', 'bg-opacity-10', 'text-slate');
                    nav.classList.add('text-concrete');
                });
                
                // Add active class to current nav item
                const navMap = {
                    'dashboard-page': 'nav-dashboard',
                    'pipeline-page': 'nav-pipeline',
                    'property-index-page': 'nav-property-index',
                    'add-property-page': 'nav-property-index',
                    'property-detail-page': 'nav-property-index',
                    'viewing-scheduler-page': 'nav-viewing-scheduler',
                    'research-comps-page': 'nav-research',
                    'brokers-page': 'nav-brokers',
                    'deal-room-page': 'nav-deal-room',
                    'commercials-page': 'nav-commercials',
                    'documents-page': 'nav-documents',
                    'interventions-page': 'nav-interventions',
                    'search-page': 'nav-search',
                    'notifications-page': 'nav-notifications'
                };
                
                const navId = navMap[pageId];
                if (navId) {
                    const navItem = document.getElementById(navId);
                    if (navItem) {
                        navItem.classList.remove('text-concrete');
                        navItem.classList.add('bg-slate', 'bg-opacity-10', 'text-slate');
                    }
                }
            },
            
            // Setup navigation to use hash links
            setupNavigation() {
                const navItems = {
                    'nav-dashboard': '/',
                    'nav-search': '/search',
                    'nav-notifications': '/notifications',
                    'nav-pipeline': '/pipeline',
                    'nav-property-index': '/property-index',
                    'nav-viewing-scheduler': '/viewing-scheduler',
                    'nav-research': '/research-comps',
                    'nav-brokers': '/brokers',
                    'nav-commercials': '/commercials',
                    'nav-documents': '/documents',
                    'nav-interventions': '/interventions',
                    'nav-deals-overview': '/deals-overview',
                    'nav-heads-of-terms': '/heads-of-terms',
                    'nav-document-management': '/document-management',
                    'nav-task-management': '/task-management',
                    'nav-approval-requests': '/approval-requests',
                    'nav-risk-assessment': '/risk-assessment',
                    'nav-activity-log': '/activity-log',
                    'nav-notifications': '/notifications',
                };
                
                for (const [navId, route] of Object.entries(navItems)) {
                    const navElement = document.getElementById(navId);
                    if (navElement) {
                        navElement.addEventListener('click', (e) => {
                            e.preventDefault();
                            window.location.hash = route;
                        });
                        navElement.style.cursor = 'pointer';
                    }
                }
            },
            
            // Navigate programmatically
            navigateTo(path) {
                window.location.hash = path;
            }
        };

        // Register all routes
        UnionRouter.register('/', 'dashboard-page');
        UnionRouter.register('/pipeline', 'pipeline-page');
        UnionRouter.register('/property-index', 'property-index-page');
        UnionRouter.register('/property/add', 'add-property-page');
        UnionRouter.register('/property/:id', 'property-detail-page');
        UnionRouter.register('/search', 'search-page');
        UnionRouter.register('/notifications', 'notifications-page');
        UnionRouter.register('/interventions', 'interventions-page');
        UnionRouter.register('/negotiation-dashboard', 'negotiation-dashboard-page');

        
        UnionRouter.register('/deals-overview', 'deals-overview-page', function() {
            // Callback after page is shown
            setTimeout(function() {
                if (typeof initDealsOverviewEnhancements === 'function') {
                    initDealsOverviewEnhancements();
                }
            }, 300);
        });
        UnionRouter.register('/deal-room', 'deal-room-page');
        UnionRouter.register('/deal/:id', 'deal-room-page');
        UnionRouter.register('/heads-of-terms', 'heads-of-terms-page');
        UnionRouter.register('/document-management', 'document-management-page');
        UnionRouter.register('/task-management', 'task-management-page');
        UnionRouter.register('/approval-requests', 'approval-requests-page');
        UnionRouter.register('/risk-assessment', 'risk-assessment-page');
        UnionRouter.register('/activity-log', 'activity-log-page');
        UnionRouter.register('/notifications', 'notifications-page');
        // Initialize router when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => UnionRouter.init());
        } else {
            UnionRouter.init();
        }

        console.log('✅ UNION Router loaded');
    </script>
<manus-content-root></manus-content-root><script>
			var __manus_space_editor_info = {
			spaceId : 'unioncore-g6g5ma',
			patchList : [],
			};
				{
				var __manus__global_env = {
  "apiHost": "https://api.manus.im",
  "host": "https://manus.im",
  "amplitudeKey": "46ac3f9abb41dd2d17a5785e052bc6d3"
};

var ru=Object.defineProperty;var ou=(t,e,n)=>e in t?ru(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var pt=(t,e,n)=>ou(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const mn=globalThis,hl=mn.trustedTypes,Yr=hl?hl.createPolicy("lit-html",{createHTML:t=>t}):void 0,bc="$lit$",Et=`lit$${Math.random().toFixed(9).slice(2)}$`,Vc="?"+Et,au=`<${Vc}>`,kt=document,Xn=()=>kt.createComment(""),In=t=>t===null||typeof t!="object"&&typeof t!="function",wi=Array.isArray,cu=t=>wi(t)||typeof(t==null?void 0:t[Symbol.iterator])=="function",Ml=`[ 	
\f\r]`,dn=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Ur=/-->/g,Jr=/>/g,Nt=RegExp(`>|${Ml}(?:([^\\s"'>=/]+)(${Ml}*=${Ml}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),xr=/'/g,wr=/"/g,mc=/^(?:script|style|textarea|title)$/i,fc=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),O=fc(1),Ee=fc(2),zt=Symbol.for("lit-noChange"),ce=Symbol.for("lit-nothing"),kr=new WeakMap,Jt=kt.createTreeWalker(kt,129);function Ac(t,e){if(!wi(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Yr!==void 0?Yr.createHTML(e):e}const du=(t,e)=>{const n=t.length-1,l=[];let i,r=e===2?"<svg>":e===3?"<math>":"",o=dn;for(let a=0;a<n;a++){const c=t[a];let d,s,u=-1,h=0;for(;h<c.length&&(o.lastIndex=h,s=o.exec(c),s!==null);)h=o.lastIndex,o===dn?s[1]==="!--"?o=Ur:s[1]!==void 0?o=Jr:s[2]!==void 0?(mc.test(s[2])&&(i=RegExp("</"+s[2],"g")),o=Nt):s[3]!==void 0&&(o=Nt):o===Nt?s[0]===">"?(o=i??dn,u=-1):s[1]===void 0?u=-2:(u=o.lastIndex-s[2].length,d=s[1],o=s[3]===void 0?Nt:s[3]==='"'?wr:xr):o===wr||o===xr?o=Nt:o===Ur||o===Jr?o=dn:(o=Nt,i=void 0);const g=o===Nt&&t[a+1].startsWith("/>")?" ":"";r+=o===dn?c+au:u>=0?(l.push(d),c.slice(0,u)+bc+c.slice(u)+Et+g):c+Et+(u===-2?a:g)}return[Ac(t,r+(t[n]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),l]};let hi=class pc{constructor({strings:e,_$litType$:n},l){let i;this.parts=[];let r=0,o=0;const a=e.length-1,c=this.parts,[d,s]=du(e,n);if(this.el=pc.createElement(d,l),Jt.currentNode=this.el.content,n===2||n===3){const u=this.el.content.firstChild;u.replaceWith(...u.childNodes)}for(;(i=Jt.nextNode())!==null&&c.length<a;){if(i.nodeType===1){if(i.hasAttributes())for(const u of i.getAttributeNames())if(u.endsWith(bc)){const h=s[o++],g=i.getAttribute(u).split(Et),b=/([.?@])?(.*)/.exec(h);c.push({type:1,index:r,name:b[2],strings:g,ctor:b[1]==="."?uu:b[1]==="?"?gu:b[1]==="@"?hu:Cl}),i.removeAttribute(u)}else u.startsWith(Et)&&(c.push({type:6,index:r}),i.removeAttribute(u));if(mc.test(i.tagName)){const u=i.textContent.split(Et),h=u.length-1;if(h>0){i.textContent=hl?hl.emptyScript:"";for(let g=0;g<h;g++)i.append(u[g],Xn()),Jt.nextNode(),c.push({type:2,index:++r});i.append(u[h],Xn())}}}else if(i.nodeType===8)if(i.data===Vc)c.push({type:2,index:r});else{let u=-1;for(;(u=i.data.indexOf(Et,u+1))!==-1;)c.push({type:7,index:r}),u+=Et.length-1}r++}}static createElement(e,n){const l=kt.createElement("template");return l.innerHTML=e,l}};function $t(t,e,n=t,l){var o,a;if(e===zt)return e;let i=l!==void 0?(o=n._$Co)==null?void 0:o[l]:n._$Cl;const r=In(e)?void 0:e._$litDirective$;return(i==null?void 0:i.constructor)!==r&&((a=i==null?void 0:i._$AO)==null||a.call(i,!1),r===void 0?i=void 0:(i=new r(t),i._$AT(t,n,l)),l!==void 0?(n._$Co??(n._$Co=[]))[l]=i:n._$Cl=i),i!==void 0&&(e=$t(t,i._$AS(t,e.values),i,l)),e}let su=class{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:n},parts:l}=this._$AD,i=((e==null?void 0:e.creationScope)??kt).importNode(n,!0);Jt.currentNode=i;let r=Jt.nextNode(),o=0,a=0,c=l[0];for(;c!==void 0;){if(o===c.index){let d;c.type===2?d=new ki(r,r.nextSibling,this,e):c.type===1?d=new c.ctor(r,c.name,c.strings,this,e):c.type===6&&(d=new bu(r,this,e)),this._$AV.push(d),c=l[++a]}o!==(c==null?void 0:c.index)&&(r=Jt.nextNode(),o++)}return Jt.currentNode=kt,i}p(e){let n=0;for(const l of this._$AV)l!==void 0&&(l.strings!==void 0?(l._$AI(e,l,n),n+=l.strings.length-2):l._$AI(e[n])),n++}},ki=class Zc{get _$AU(){var e;return((e=this._$AM)==null?void 0:e._$AU)??this._$Cv}constructor(e,n,l,i){this.type=2,this._$AH=ce,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=l,this.options=i,this._$Cv=(i==null?void 0:i.isConnected)??!0}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&(e==null?void 0:e.nodeType)===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=$t(this,e,n),In(e)?e===ce||e==null||e===""?(this._$AH!==ce&&this._$AR(),this._$AH=ce):e!==this._$AH&&e!==zt&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):cu(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==ce&&In(this._$AH)?this._$AA.nextSibling.data=e:this.T(kt.createTextNode(e)),this._$AH=e}$(e){var r;const{values:n,_$litType$:l}=e,i=typeof l=="number"?this._$AC(e):(l.el===void 0&&(l.el=hi.createElement(Ac(l.h,l.h[0]),this.options)),l);if(((r=this._$AH)==null?void 0:r._$AD)===i)this._$AH.p(n);else{const o=new su(i,this),a=o.u(this.options);o.p(n),this.T(a),this._$AH=o}}_$AC(e){let n=kr.get(e.strings);return n===void 0&&kr.set(e.strings,n=new hi(e)),n}k(e){wi(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let l,i=0;for(const r of e)i===n.length?n.push(l=new Zc(this.O(Xn()),this.O(Xn()),this,this.options)):l=n[i],l._$AI(r),i++;i<n.length&&(this._$AR(l&&l._$AB.nextSibling,i),n.length=i)}_$AR(e=this._$AA.nextSibling,n){var l;for((l=this._$AP)==null?void 0:l.call(this,!1,!0,n);e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var n;this._$AM===void 0&&(this._$Cv=e,(n=this._$AP)==null||n.call(this,e))}},Cl=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,n,l,i,r){this.type=1,this._$AH=ce,this._$AN=void 0,this.element=e,this.name=n,this._$AM=i,this.options=r,l.length>2||l[0]!==""||l[1]!==""?(this._$AH=Array(l.length-1).fill(new String),this.strings=l):this._$AH=ce}_$AI(e,n=this,l,i){const r=this.strings;let o=!1;if(r===void 0)e=$t(this,e,n,0),o=!In(e)||e!==this._$AH&&e!==zt,o&&(this._$AH=e);else{const a=e;let c,d;for(e=r[0],c=0;c<r.length-1;c++)d=$t(this,a[l+c],n,c),d===zt&&(d=this._$AH[c]),o||(o=!In(d)||d!==this._$AH[c]),d===ce?e=ce:e!==ce&&(e+=(d??"")+r[c+1]),this._$AH[c]=d}o&&!i&&this.j(e)}j(e){e===ce?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},uu=class extends Cl{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===ce?void 0:e}},gu=class extends Cl{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==ce)}},hu=class extends Cl{constructor(e,n,l,i,r){super(e,n,l,i,r),this.type=5}_$AI(e,n=this){if((e=$t(this,e,n,0)??ce)===zt)return;const l=this._$AH,i=e===ce&&l!==ce||e.capture!==l.capture||e.once!==l.once||e.passive!==l.passive,r=e!==ce&&(l===ce||i);i&&this.element.removeEventListener(this.name,this,l),r&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n;typeof this._$AH=="function"?this._$AH.call(((n=this.options)==null?void 0:n.host)??this.element,e):this._$AH.handleEvent(e)}};class bu{constructor(e,n,l){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=l}get _$AU(){return this._$AM._$AU}_$AI(e){$t(this,e)}}const Hl=mn.litHtmlPolyfillSupport;Hl==null||Hl(hi,ki),(mn.litHtmlVersions??(mn.litHtmlVersions=[])).push("3.3.1");const vt=(t,e,n)=>{const l=e;let i=l._$litPart$;return i===void 0&&(l._$litPart$=i=new ki(e.insertBefore(Xn(),null),null,void 0,{})),i._$AI(t),i};class Wl extends HTMLElement{constructor(){super(),this._dialogElement=null,this._isOpen=!1,this._title="Dialog",this._isClosable=!0,this._shadowRoot=this.attachShadow({mode:"open"}),this._render()}static get observedAttributes(){return["open","title","closable","width"]}connectedCallback(){this.hasAttribute("open")?this._isOpen=!0:this._isOpen=!1,this._title=this.getAttribute("title")||this._title,this.hasAttribute("closable")?this._isClosable=this.getAttribute("closable")!=="false":this._isClosable=!0;const e=this.getAttribute("width");e?this.style.setProperty("--dynamic-dialog-width",e):this.style.removeProperty("--dynamic-dialog-width"),this._render(),this._dialogElement=this._shadowRoot.querySelector("dialog"),this._dialogElement&&(this._dialogElement.addEventListener("click",n=>{this._isClosable&&n.target===this._dialogElement&&this.close()}),this._dialogElement.addEventListener("close",()=>{this._isOpen&&(this._isOpen=!1,this.hasAttribute("open")&&this.removeAttribute("open"),this._dispatchCloseEvent())}),this._isOpen&&!this._dialogElement.open&&(this._dialogElement.showModal(),this._dispatchOpenEvent()))}disconnectedCallback(){}attributeChangedCallback(e,n,l){const i=this._isOpen;let r=!1;if(e==="open"){const o=l!==null;this._isOpen!==o&&(this._isOpen=o),this._dialogElement&&(this._isOpen?this._dialogElement.open||(this._dialogElement.showModal(),i||this._dispatchOpenEvent()):this._dialogElement.open&&this._dialogElement.close())}else if(e==="title"){const o=l||"Dialog";this._title!==o&&(this._title=o,r=!0)}else if(e==="closable"){const o=l!=="false";this._isClosable!==o&&(this._isClosable=o,r=!0)}else e==="width"&&(l!==null?this.style.setProperty("--dynamic-dialog-width",l):this.style.removeProperty("--dynamic-dialog-width"));r&&this._render()}show(){this._isOpen?this._dialogElement&&!this._dialogElement.open&&(this._dialogElement.showModal(),this._dispatchOpenEvent()):this.setAttribute("open","")}close(){this._isOpen?this.removeAttribute("open"):this._dialogElement&&this._dialogElement.open&&this._dialogElement.close()}_handleCloseButtonClick(){this.close()}_dispatchOpenEvent(){this.dispatchEvent(new CustomEvent("dialog-open",{bubbles:!0,composed:!0}))}_dispatchCloseEvent(){this.dispatchEvent(new CustomEvent("dialog-close",{bubbles:!0,composed:!0}))}_render(){const e=O`
      <style>
        :host {
          /* Default width for the dialog, can be overridden by the 'width' attribute */
          --lit-html-dialog-default-width: 400px;
          /* --dynamic-dialog-width will be set on the host instance via JS */
          --lit-html-dialog-font-family: 'SF Pro', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
          --lit-html-dialog-surface-bg: white;
          --lit-html-dialog-border-main: rgba(0, 0, 0, 0.06);
          --lit-html-dialog-text-primary: #34322D;
          --lit-html-dialog-text-tertiary: #858481;
          --lit-html-dialog-text-white: white;
          --lit-html-dialog-icon-tertiary: #858481;
          --lit-html-dialog-border-btn-main: rgba(0, 0, 0, 0.12);
          --lit-html-dialog-function-error-bg: #F25A5A;
          --lit-html-dialog-button-default-bg: transparent;
          --lit-html-dialog-box-shadow: 0px 4px 11px rgba(0, 0, 0, 0.15);
          --lit-html-dialog-border-radius: 20px;
        }

        dialog {
          /* Use the dynamic width variable, falling back to the default width */
          width: var(--dynamic-dialog-width, var(--lit-html-dialog-default-width));
          max-width: 90vw; /* Add a max-width to prevent overflow on small screens */

          background: var(--lit-html-dialog-surface-bg);
          box-shadow: var(--lit-html-dialog-box-shadow);
          border-radius: var(--lit-html-dialog-border-radius);
          border: 1px var(--lit-html-dialog-border-main) solid;
          padding: 0;
          margin: auto;
          overflow: visible;
        }

        dialog::backdrop {
          background: rgba(0, 0, 0, 0.3);
        }

        .dialog-header {
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
          padding: 20px 16px 10px 20px;
          gap: 10px;
        }

        .dialog-title {
          flex: 1 1 0;
          color: var(--lit-html-dialog-text-primary);
          font-size: 18px;
          font-family: var(--lit-html-dialog-font-family);
          font-weight: 600;
          line-height: 24px;
          word-wrap: break-word;
        }

        .dialog-close-button {
          background: none;
          border: none;
          cursor: pointer;
          padding: 0;
          width: 28px;
          height: 28px;
          display: flex;
          justify-content: center;
          align-items: center;
          color: var(--lit-html-dialog-icon-tertiary);
          font-size: 18px;
          font-family: var(--lit-html-dialog-font-family);
          font-weight: 500;
          line-height: 1;
        }
        .dialog-close-button:hover {
            color: var(--lit-html-dialog-text-primary);
        }

        .dialog-body {
          padding: 0px 20px ;
          color: var(--lit-html-dialog-text-tertiary);
          font-size: 14px;
          font-family: var(--lit-html-dialog-font-family);
          font-weight: 400;
          line-height: 22px;
          word-wrap: break-word;
        }

        .dialog-footer {
          display: flex;
          justify-content: flex-end;
          align-items: center;
          gap: 12px;
          padding: 20px;
        }

        .dialog-footer ::slotted(.dialog-button) {
          min-height: 36px;
          padding: 8px 12px;
          border-radius: 10px;
          font-size: 14px;
          font-weight: 500;
          line-height: 20px;
          border: none;
          cursor: pointer;
          display: inline-flex;
          justify-content: center;
          align-items: center;
          font-family: var(--lit-html-dialog-font-family);
        }
        .dialog-footer ::slotted(.dialog-button-default) {
          min-width: 64px;
          color: var(--lit-html-dialog-text-primary);
          background-color: var(--lit-html-dialog-button-default-bg);
          border: 1px solid var(--lit-html-dialog-border-btn-main);
        }
        .dialog-footer ::slotted(.dialog-button-default:hover) {
            background-color: rgba(0,0,0,0.05);
        }
        .dialog-footer ::slotted(.dialog-button-error) {
          min-width: 74px;
          color: var(--lit-html-dialog-text-white);
          background-color: var(--lit-html-dialog-function-error-bg);
        }
        .dialog-footer ::slotted(.dialog-button-error:hover) {
            opacity: 0.9;
        }
      </style>

      <dialog part="dialog">
        <div class="dialog-header" part="header">
          <div class="dialog-title" part="title">${this._title}</div>
          ${this._isClosable?O`
                <button
                  type="button"
                  class="dialog-close-button"
                  part="close-button"
                  aria-label="Close dialog"
                  @click=${()=>this._handleCloseButtonClick()}
                >
                  &#x2715;
                </button>
              `:""}
        </div>
        <div class="dialog-body" part="body">
          <slot></slot>
        </div>
        <div class="dialog-footer" part="footer">
          <slot name="footer"></slot>
        </div>
      </dialog>
    `;vt(e,this._shadowRoot)}}class zi extends HTMLElement{constructor(){super(),this.anchor=null,this.popupContent=null,this.isOpen=!1,this.scrollListener=null,this._ref=null,this._customClass="",this.mousePosition=null,this.gapSize=10,this.attachShadow({mode:"open"}),this.render()}static get observedAttributes(){return["open","ref","class"]}connectedCallback(){this.scrollListener=()=>{this.isOpen&&this.updatePosition()},window.addEventListener("scroll",this.scrollListener,!0),this._ref&&this._ref(this)}disconnectedCallback(){this.scrollListener&&window.removeEventListener("scroll",this.scrollListener,!0),this.destroy()}attributeChangedCallback(e,n,l){e==="open"?(this.isOpen=l!==null,this.render(),this.isOpen&&setTimeout(()=>this.updatePosition(),0)):e==="ref"||e==="class"&&(this._customClass=l||"",this.render())}set ref(e){this._ref=e,this.isConnected&&e(this)}set customClass(e){this._customClass=e,this.setAttribute("class",e),this.render()}get customClass(){return this._customClass}setAnchor(e){this.anchor=e,this.isOpen&&this.updatePosition()}open(e){if(this.isOpen=!0,this.setAttribute("open",""),e){this.mousePosition={x:e.clientX,y:e.clientY};const n=e.target;n&&this.setAnchor(n)}else this.mousePosition=null;this.render(),setTimeout(()=>this.updatePosition(),0)}close(){this.isOpen=!1,this.mousePosition=null,this.removeAttribute("open"),this.render()}updatePosition(){if(!this.popupContent)return;const e=this.popupContent.getBoundingClientRect();let n,l,i="bottom";if(this.anchor)n=this.anchor.getBoundingClientRect().bottom+this.gapSize;else if(this.mousePosition)n=this.mousePosition.y+this.gapSize;else{n=window.innerHeight/2-e.height/2,l=window.innerWidth/2-e.width/2,this.updatePopupStyles(n,l,i);return}if(this.mousePosition)l=this.mousePosition.x-e.width/2;else if(this.anchor){const r=this.anchor.getBoundingClientRect();l=r.left+r.width/2-e.width/2}else l=window.innerWidth/2-e.width/2;l+e.width>window.innerWidth&&(l=window.innerWidth-e.width-10),l<10&&(l=10),n+e.height>window.innerHeight&&(i="top",this.anchor?n=this.anchor.getBoundingClientRect().top-e.height-this.gapSize:this.mousePosition&&(n=this.mousePosition.y-e.height-this.gapSize),n<0&&(n=window.innerHeight/2-e.height/2,i="bottom")),this.updatePopupStyles(n,l,i)}updatePopupStyles(e,n,l){this.popupContent&&(this.popupContent.style.position="fixed",this.popupContent.style.top=`${e}px`,this.popupContent.style.left=`${n}px`,this.popupContent.setAttribute("data-position",l))}render(){const e=O`
			<style>
				:host {
					display: block;
				}

				.popup-content {
					display: ${this.isOpen?"block":"none"};
					position: fixed;
					z-index: 1000;
				}

				/* 底部定位时的连接伪元素 */
				.popup-content[data-position='bottom']::before {
					content: '';
					position: absolute;
					left: 0;
					right: 0;
					top: -${this.gapSize}px;
					height: ${this.gapSize}px;
					/* 调试时可以设置背景色 */
					/* background-color: rgba(255, 0, 0, 0.2); */
				}

				/* 顶部定位时的连接伪元素 */
				.popup-content[data-position='top']::after {
					content: '';
					position: absolute;
					left: 0;
					right: 0;
					bottom: -${this.gapSize}px;
					height: ${this.gapSize}px;
					/* 调试时可以设置背景色 */
					/* background-color: rgba(0, 255, 0, 0.2); */
				}
			</style>
			<div class="popup-content ${this._customClass}" data-position="bottom">
				<slot></slot>
			</div>
		`;vt(e,this.shadowRoot),this.popupContent=this.shadowRoot.querySelector(".popup-content")}destroy(){vt(ce,this.shadowRoot)}}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Qi={ATTRIBUTE:1,CHILD:2},Li=t=>(...e)=>({_$litDirective$:t,values:e});let Ki=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,n,l){this._$Ct=e,this._$AM=n,this._$Ci=l}_$AS(e,n){return this.update(e,n)}update(e,n){return this.render(...n)}};/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const tt=Li(class extends Ki{constructor(t){var e;if(super(t),t.type!==Qi.ATTRIBUTE||t.name!=="class"||((e=t.strings)==null?void 0:e.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((e=>t[e])).join(" ")+" "}update(t,[e]){var l,i;if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter((r=>r!==""))));for(const r in e)e[r]&&!((l=this.nt)!=null&&l.has(r))&&this.st.add(r);return this.render(e)}const n=t.element.classList;for(const r of this.st)r in e||(n.remove(r),this.st.delete(r));for(const r in e){const o=!!e[r];o===this.st.has(r)||(i=this.nt)!=null&&i.has(r)||(o?(n.add(r),this.st.add(r)):(n.remove(r),this.st.delete(r)))}return zt}});/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Vu=t=>t.strings===void 0;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const fn=(t,e)=>{var l;const n=t._$AN;if(n===void 0)return!1;for(const i of n)(l=i._$AO)==null||l.call(i,e,!1),fn(i,e);return!0},bl=t=>{let e,n;do{if((e=t._$AM)===void 0)break;n=e._$AN,n.delete(t),t=e}while((n==null?void 0:n.size)===0)},Gc=t=>{for(let e;e=t._$AM;t=e){let n=e._$AN;if(n===void 0)e._$AN=n=new Set;else if(n.has(t))break;n.add(t),Au(e)}};function mu(t){this._$AN!==void 0?(bl(this),this._$AM=t,Gc(this)):this._$AM=t}function fu(t,e=!1,n=0){const l=this._$AH,i=this._$AN;if(i!==void 0&&i.size!==0)if(e)if(Array.isArray(l))for(let r=n;r<l.length;r++)fn(l[r],!1),bl(l[r]);else l!=null&&(fn(l,!1),bl(l));else fn(this,t)}const Au=t=>{t.type==Qi.CHILD&&(t._$AP??(t._$AP=fu),t._$AQ??(t._$AQ=mu))};let pu=class extends Ki{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,n,l){super._$AT(e,n,l),Gc(this),this.isConnected=e._$AU}_$AO(e,n=!0){var l,i;e!==this.isConnected&&(this.isConnected=e,e?(l=this.reconnected)==null||l.call(this):(i=this.disconnected)==null||i.call(this)),n&&(fn(this,e),bl(this))}setValue(e){if(Vu(this._$Ct))this._$Ct._$AI(e,this);else{const n=[...this._$Ct._$AH];n[this._$Ci]=e,this._$Ct._$AI(n,this,0)}}disconnected(){}reconnected(){}};/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Zu=()=>new Gu;let Gu=class{};const Dl=new WeakMap,Qt=Li(class extends pu{render(t){return ce}update(t,[e]){var l;const n=e!==this.G;return n&&this.G!==void 0&&this.rt(void 0),(n||this.lt!==this.ct)&&(this.G=e,this.ht=(l=t.options)==null?void 0:l.host,this.rt(this.ct=t.element)),ce}rt(t){if(this.isConnected||(t=void 0),typeof this.G=="function"){const e=this.ht??globalThis;let n=Dl.get(e);n===void 0&&(n=new WeakMap,Dl.set(e,n)),n.get(this.G)!==void 0&&this.G.call(this.ht,void 0),n.set(this.G,t),t!==void 0&&this.G.call(this.ht,t)}else this.G.value=t}get lt(){var t,e;return typeof this.G=="function"?(t=Dl.get(this.ht??globalThis))==null?void 0:t.get(this.G):(e=this.G)==null?void 0:e.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});class Xu extends HTMLElement{constructor(){super(),this.textareaRef=Zu(),this._value="",this._autoResize=!1,this._autoFocus=!1,this._placeholder="",this._disabled=!1,this.adjustHeight=()=>{const e=this.textareaRef.value;if(!e||!this._autoResize)return;const n=e.scrollTop,l=window.getComputedStyle(e),i=parseInt(l.borderTopWidth,10)||0,r=parseInt(l.borderBottomWidth,10)||0,o=e.cloneNode(!0);o.style.position="absolute",o.style.visibility="hidden",o.style.height="auto",o.style.width=l.width,o.style.minHeight=l.minHeight,o.style.maxHeight=l.maxHeight,o.style.padding=l.padding,o.style.font=l.font,o.style.lineHeight=l.lineHeight,o.style.letterSpacing=l.letterSpacing,o.style.wordSpacing=l.wordSpacing,o.style.whiteSpace=l.whiteSpace,o.style.wordBreak=l.wordBreak,o.style.boxSizing=l.boxSizing,document.body.appendChild(o);let a=o.scrollHeight;l.boxSizing!=="border-box"&&(a+=i+r),a=o.scrollHeight+i+r,document.body.removeChild(o);const c=parseFloat(l.minHeight)||0,d=parseFloat(l.maxHeight)||1/0;a=Math.max(c,Math.min(a,d)),e.style.height=`${a}px`,e.scrollTop=n},this.handleInput=e=>{const n=e.target;this._value=n.value,this._autoResize&&this.adjustHeight(),this.dispatchEvent(new CustomEvent("lit-textarea-input",{detail:{value:this._value},bubbles:!0,composed:!0})),this.dispatchEvent(new Event("input",{bubbles:!0,composed:!0}))}}static get observedAttributes(){return["auto-resize","value","autofocus","class","placeholder","disabled","rows","cols"]}connectedCallback(){if(this._render(),this.textareaRef.value&&(this._autoResize&&(this._setupAutoResize(),this.adjustHeight()),this._autoFocus)){this.textareaRef.value.focus();const e=this.textareaRef.value.value.length;this.textareaRef.value.setSelectionRange(e,e)}}disconnectedCallback(){this._teardownAutoResize()}attributeChangedCallback(e,n,l){if(n===l&&e!=="disabled"&&e!=="autofocus"&&e!=="auto-resize"&&(e==="disabled"&&this._disabled===(l!==null)||e==="autofocus"&&this._autoFocus===(l!==null)||e==="auto-resize"&&this._autoResize===(l!==null)||e!=="disabled"&&e!=="auto-focus"&&e!=="auto-resize"))return;let i=!0;switch(e){case"auto-resize":const r=l!==null;this._autoResize!==r&&(this._autoResize=r,this.textareaRef.value&&(this._autoResize?(this._setupAutoResize(),this.adjustHeight()):(this._teardownAutoResize(),this.textareaRef.value.style.height="")));break;case"value":this._value!==(l||"")&&(this._value=l||"",this.textareaRef.value&&this.textareaRef.value.value!==this._value&&(this.textareaRef.value.value=this._value),this._autoResize&&Promise.resolve().then(()=>this.adjustHeight()));break;case"autofocus":this._autoFocus=l!==null,i=!1;break;case"class":i=!1;break;case"placeholder":this._placeholder=l||"";break;case"disabled":this._disabled=l!==null;break;case"rows":this._rows=l?parseInt(l,10):void 0;break;case"cols":this._cols=l?parseInt(l,10):void 0;break;default:i=!1}i&&this._render()}_setupAutoResize(){!this.textareaRef.value||this.resizeObserver||(window.addEventListener("resize",this.adjustHeight),this.resizeObserver=new ResizeObserver(this.adjustHeight),this.resizeObserver.observe(this.textareaRef.value))}_teardownAutoResize(){window.removeEventListener("resize",this.adjustHeight),this.resizeObserver&&(this.textareaRef.value&&this.resizeObserver.unobserve(this.textareaRef.value),this.resizeObserver.disconnect(),this.resizeObserver=void 0)}getInternalTextareaClasses(){return{"internal-textarea":!0,"auto-resize-active":this._autoResize}}_render(){const e=O`
			<style>
				.internal-textarea:disabled {
					cursor: not-allowed;
					opacity: 0.7;
				}

				.internal-textarea {
					width: 100%;
					background: transparent;
					border: none;
					resize: none;
					overflow: hidden;
				}

				.internal-textarea:focus {
					outline: none;
				}
			</style>
			<textarea
				part="textarea"
				class=${tt(this.getInternalTextareaClasses())}
				${Qt(this.textareaRef)}
				.value=${this._value}
				?disabled=${this._disabled}
				placeholder=${this._placeholder||""}
				?autofocus=${this.autofocus}
				rows=${this._rows!==void 0?this._rows:this._autoResize?1:ce}
				cols=${this._cols!==void 0?this._cols:ce}
				@input=${this.handleInput}
				@focus=${()=>this.dispatchEvent(new FocusEvent("focus",{bubbles:!1,composed:!0}))}
				@blur=${()=>this.dispatchEvent(new FocusEvent("blur",{bubbles:!1,composed:!0}))}
				aria-label=${this.getAttribute("aria-label")||this._placeholder||"textarea"}
			></textarea>
		`;vt(e,this),this.textareaRef.value&&this.textareaRef.value.value!==this._value&&(this.textareaRef.value.value=this._value),this._autoFocus&&setTimeout(()=>{var n;(n=this.textareaRef.value)==null||n.focus()},0)}}class Bl{constructor(e,n=!0){this.container=e,n&&this.render()}render(){vt(this.template,this.container)}destroy(){vt(ce,this.container)}}class Iu extends Bl{constructor(e,n){super(e,!1),this.container=e,this.conf=n,this._destroyPromise=new Promise(l=>{this._resolveDestroyPromise=l})}get template(){const{variant:e,title:n}=this.conf,l=`toast toast--${e}`,i=Ee`
<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
  <g clip-path="url(#clip0_4437_76010)">
    <path d="M17.4987 10.0007C17.4987 5.85851 14.1408 2.50065 9.9987 2.50065C5.85656 2.50065 2.4987 5.85851 2.4987 10.0007C2.4987 14.1428 5.85656 17.5006 9.9987 17.5006C14.1408 17.5006 17.4987 14.1428 17.4987 10.0007ZM11.9095 7.74479C12.2349 7.41935 12.7625 7.41935 13.0879 7.74479C13.4133 8.07023 13.4133 8.59774 13.0879 8.92318L9.75456 12.2565C9.42912 12.5819 8.90159 12.5819 8.57617 12.2565L6.9095 10.5898L6.85254 10.5264C6.58559 10.1991 6.60445 9.71656 6.9095 9.41146C7.2146 9.10636 7.6971 9.08754 8.02441 9.35449L8.08789 9.41146L9.16536 10.4889L11.9095 7.74479ZM19.1654 10.0007C19.1654 15.0633 15.0613 19.1673 9.9987 19.1673C4.93609 19.1673 0.832031 15.0633 0.832031 10.0007C0.832031 4.93804 4.93609 0.833984 9.9987 0.833984C15.0613 0.833984 19.1654 4.93804 19.1654 10.0007Z" fill="#25BA3B"/>
  </g>
  <defs>
    <clipPath id="clip0_4437_76010">
      <rect width="20" height="20" fill="white"/>
    </clipPath>
  </defs>
</svg>
		`;return O`
			<style>
				/* Base Toast Styles matching the Figma design */
				.toast {
					padding: 10px 16px;
					background: rgba(0, 0, 0, 0.9);
					box-shadow: 0px 4px 11px rgba(0, 0, 0, 0.08);
					overflow: hidden;
					border-radius: 12px;
					border: 1px solid rgba(255, 255, 255, 0.04);
					backdrop-filter: blur(40px);
					display: inline-flex;
					justify-content: flex-start;
					align-items: center;
					margin-bottom: 10px;
					opacity: 0;
					transition: opacity 0.3s ease-in-out;
					pointer-events: auto;
					max-width: calc(100vw - 40px);
					box-sizing: border-box;
				}

				.toast.is-visible {
					opacity: 1;
				}

				/* Content wrapper */
				.toast__content {
					display: flex;
					flex-direction: row;
					align-items: center;
					justify-content: flex-start;
					gap: 10px;
					flex-shrink: 0;
				}

				/* Icon Wrapper */
				.toast__icon-wrapper {
					width: 20px;
					height: 20px;
					position: relative;
					overflow: hidden;
					display: flex;
					align-items: center;
					justify-content: center;
					flex-shrink: 0;
				}

				/* Text Style */
				.toast__message {
					color: #ffffff;
					font-size: 14px;
					font-family: 'SF Pro', sans-serif;
					font-weight: 400;
					line-height: 22px;
					letter-spacing: -0.154px;
					word-wrap: break-word;
					white-space: nowrap;
				}

				/* Specific variant styles */
				.toast--success .toast__icon-wrapper {
					/* Success icon color is handled by the SVG fill itself */
				}

				.toast--error {
					/* 假设 error 变体有不同的背景色或边框 */
					background: #ffdddd; /* 示例错误背景色 */
					outline: 1px rgba(255, 0, 0, 0.2) solid;
				}
				.toast--error .toast__icon-wrapper svg path {
					fill: #f44336; /* 示例错误图标颜色 */
				}
				.toast--error .toast__message {
					color: #f44336; /* 示例错误文本颜色 */
				}
			</style>
			<div class=${l}>
				<div class="toast__content">
					<div class="toast__icon-wrapper">${e==="success"?i:""}</div>
					<div class="toast__message">${n}</div>
				</div>
			</div>
		`}show(){this.render();const e=this.container.querySelector(".toast");e&&(requestAnimationFrame(()=>{e.classList.add("is-visible")}),setTimeout(()=>{this.destroy()},3e3))}destroy(){const e=this.container.querySelector(".toast");e?(e.classList.remove("is-visible"),e.addEventListener("transitionend",()=>{super.destroy(),e.parentNode&&e.parentNode.removeChild(e),this._resolveDestroyPromise()},{once:!0})):(super.destroy(),this._resolveDestroyPromise())}get destroyed(){return this._destroyPromise}}const Ru="toast-manager-container";class Eu{constructor(){this.currentToasts=[]}initRoot(e){this.rootContainer=document.createElement("div"),this.rootContainer.id=Ru,e.appendChild(this.rootContainer),this.rootContainer.style.cssText=`
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      flex-direction: column-reverse; /* 新的 Toast 在底部，旧的向上推 */
      align-items: center;
      z-index: 1000;
      pointer-events: none; /* 允许点击穿透 Toast 容器 */
    `}showToast(e){const n=document.createElement("div");n.style.pointerEvents="auto",this.rootContainer.prepend(n);const l=new Iu(n,e);this.currentToasts.push(l),l.show(),l.destroyed.then(()=>{this.removeToast(l)})}removeToast(e){this.currentToasts=this.currentToasts.filter(n=>n!==e),e.container&&e.container.parentNode&&e.container.parentNode.removeChild(e.container)}clearAllToasts(){this.currentToasts.forEach(e=>e.destroy()),this.currentToasts=[]}}const il=new Eu,yu=t=>O`<style>
		.spinner {
			width: 20px;
			height: 20px;
			border: 2px solid transparent;
			border-top: 2px solid white;
			border-radius: 50%;
			animation: spin 1s linear infinite;
			transition: opacity 0.3s ease;
		}


		@keyframes spin {
			0% {
				transform: rotate(0deg);
			}
			100% {
				transform: rotate(360deg);
			}
		}
	</style>

  <span class="spinner"></span>`;class zr{constructor(e,n,l,i){this.destroyed=!1,this.event=e,this.handler=n,this.emitter=l,this.listenBy=i}unregister(){this.emitter.off(this.event,this),this._destroy()}_destroy(){return this.destroyed?!1:(this.handler=null,this.emitter=null,this.destroyed=!0,!0)}}class vu{constructor(){this._events={}}on(e,n){var i;if(!n)throw new TypeError("invalid handler! --EventEmitter");this._events[e]||(this._events[e]=[]);const l=new zr(e,n,this,null);return(i=this._events[e])==null||i.push(l),l}listenBy(e,n,l){var r;if(!l)throw new TypeError("invalid handler! --EventEmitter");this._events[n]||(this._events[n]=[]);const i=new zr(n,l,this,e);return(r=this._events[n])==null||r.push(i),i}once(e,n){const l=this.on(e,i=>{n(i),l.unregister()});return l}emit(e,n=null){if(!this._events[e])return!1;for(const l of this._events[e])l.destroyed||l.handler.call(this,n);return!0}off(e,n){var l,i;if(!this._events[e])return!1;if(n){for(let r=this._events[e],o=0;o<r.length;o++){const a=r[o];if(a===n)return this._events[e]=(l=this._events[e])==null?void 0:l.filter(c=>c!==a),((i=this._events[e])==null?void 0:i.length)===0&&delete this._events[e],!0}return console.error(n,this),console.error(`Cannot find listener of ${e} --EventEmitter`),!1}for(let r=this._events[e],o=0;o<r.length;o++){const a=r[o];this._events[e][o]=null,a==null||a._destroy()}return delete this._events[e],!0}stopListenBy(e){var n;for(const l in this._events)this._events[l]=(n=this._events[l])==null?void 0:n.filter(i=>i.listenBy===e?(i._destroy(),!1):!0)}removeAllListeners(){for(const e in this._events){const n=this._events[e];if(n){for(let l=n,i=0;i<l.length;i++)n[i]=null;this._events[e]=null}}}}const Rn=new vu;class Su{constructor(){this.viewType="default",this.prevViewType="default"}setViewType(e){this.prevViewType=this.viewType,this.viewType=e,Rn.emit("onViewTypeChange",{})}}const qe=new Su;function Cu(t){const e=t.key==="z"||t.key==="Z";return/Mac|iPod|iPhone|iPad/.test(navigator.platform)?e&&t.metaKey&&!t.ctrlKey&&!t.altKey:e&&t.ctrlKey&&!t.metaKey&&!t.altKey}function Wu(){let t=!1,e=[];return{get ready(){return t},markReady:()=>{t||(t=!0,e.forEach(({resolve:n})=>n()),e=[])},waitReady:async()=>t?!0:new Promise((l,i)=>{e.push({resolve:l,reject:i})}),onReady(n){this.waitReady().then(n)},clear:()=>{t=!1,e.forEach(({reject:n})=>n()),e=[]},clearWithoutPromise:()=>{t=!1}}}function bi(t,e){if(typeof window>"u")return;const n=window.location.href,l=new URL(n);t.forEach(i=>{l.searchParams.delete(i)}),window.history.pushState({},"",l.toString())}function Xc(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}function Bu(t){document.readyState!=="loading"?t():document.addEventListener("DOMContentLoaded",()=>{t()})}function Nu(){return[()=>typeof window<"u"&&window.__NEXT_DATA__,()=>document.getElementById("__next")!==null,()=>document.querySelectorAll('script[src*="_next/"]').length>0,()=>document.querySelectorAll('link[href*="_next/"]').length>0].some(e=>e())}async function Fu(){return new Promise(t=>{let e=!1;function n(){var i;(i=window==null?void 0:window.next)!=null&&i.router&&setTimeout(()=>{Promise.resolve().then(()=>{t(!0),e=!0})},200)}const l=setInterval(()=>{n(),e&&clearInterval(l)},100);setTimeout(()=>{clearInterval(l),t(!1)},1e4)})}class Yu{get spaceId(){var e;return(e=window.__manus_space_editor_info)==null?void 0:e.spaceId}get apiHost(){var e;return((e=window.__manus__global_env)==null?void 0:e.apiHost)??"https://api.manus.im"}get host(){var e;return((e=window.__manus__global_env)==null?void 0:e.host)??"https://manus.im"}get patchList(){var e;return((e=window.__manus_space_editor_info)==null?void 0:e.patchList)??[]}get amplitudeKey(){return window.__manus__global_env.amplitudeKey??""}}const Se=new Yu,Uu={snakeToCamel:t=>t.replace(/(_[a-z])/g,e=>e.toUpperCase().replace("_","")),camelToSnake:t=>t.replace(/([A-Z])/g,e=>`_${e.toLowerCase()}`).replace(/^_/,"")};function Ju(t,e){return Uu.camelToSnake(e)}function Vl(t,e){return e&&(Array.isArray(e)?e.map(n=>Vl(t,n)):typeof e=="object"?Object.keys(e).reduce((n,l)=>{const i=e[l],r=Ju(t,l);return n[r]=Vl(t,i),n},{}):e)}var Vi=function(t,e){return Vi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&(n[i]=l[i])},Vi(t,e)};function Me(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Vi(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var N=function(){return N=Object.assign||function(e){for(var n,l=1,i=arguments.length;l<i;l++){n=arguments[l];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N.apply(this,arguments)};function mi(t,e){var n={};for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&e.indexOf(l)<0&&(n[l]=t[l]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,l=Object.getOwnPropertySymbols(t);i<l.length;i++)e.indexOf(l[i])<0&&Object.prototype.propertyIsEnumerable.call(t,l[i])&&(n[l[i]]=t[l[i]]);return n}function W(t,e,n,l){function i(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(s){try{d(l.next(s))}catch(u){o(u)}}function c(s){try{d(l.throw(s))}catch(u){o(u)}}function d(s){s.done?r(s.value):i(s.value).then(a,c)}d((l=l.apply(t,e||[])).next())})}function C(t,e){var n={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},l,i,r,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(d){return function(s){return c([d,s])}}function c(d){if(l)throw new TypeError("Generator is already executing.");for(;o&&(o=0,d[0]&&(n=0)),n;)try{if(l=1,i&&(r=d[0]&2?i.return:d[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,d[1])).done)return r;switch(i=0,r&&(d=[d[0]&2,r.value]),d[0]){case 0:case 1:r=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,i=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(r=n.trys,!(r=r.length>0&&r[r.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!r||d[1]>r[0]&&d[1]<r[3])){n.label=d[1];break}if(d[0]===6&&n.label<r[1]){n.label=r[1],r=d;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(d);break}r[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(s){d=[6,s],i=0}finally{l=r=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function H(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],l=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&l>=t.length&&(t=void 0),{value:t&&t[l++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function U(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var l=n.call(t),i,r=[],o;try{for(;(e===void 0||e-- >0)&&!(i=l.next()).done;)r.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=l.return)&&n.call(l)}finally{if(o)throw o.error}}return r}function D(t,e,n){if(n||arguments.length===2)for(var l=0,i=e.length,r;l<i;l++)(r||!(l in e))&&(r||(r=Array.prototype.slice.call(e,0,l)),r[l]=e[l]);return t.concat(r||Array.prototype.slice.call(e))}function _t(t){return this instanceof _t?(this.v=t,this):new _t(t)}function xu(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=n.apply(t,e||[]),i,r=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(b){return Promise.resolve(b).then(g,u)}}function a(g,b){l[g]&&(i[g]=function(m){return new Promise(function(f,p){r.push([g,m,f,p])>1||c(g,m)})},b&&(i[g]=b(i[g])))}function c(g,b){try{d(l[g](b))}catch(m){h(r[0][3],m)}}function d(g){g.value instanceof _t?Promise.resolve(g.value.v).then(s,u):h(r[0][2],g)}function s(g){c("next",g)}function u(g){c("throw",g)}function h(g,b){g(b),r.shift(),r.length&&c(r[0][0],r[0][1])}}function wu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof H=="function"?H(t):t[Symbol.iterator](),n={},l("next"),l("throw"),l("return"),n[Symbol.asyncIterator]=function(){return this},n);function l(r){n[r]=t[r]&&function(o){return new Promise(function(a,c){o=t[r](o),i(a,c,o.done,o.value)})}}function i(r,o,a,c){Promise.resolve(c).then(function(d){r({value:d,done:a})},o)}}var Dt;(function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"})(Dt||(Dt={}));var St;(function(t){t.IDENTIFY="$identify",t.GROUP_IDENTIFY="$groupidentify",t.REVENUE="revenue_amount"})(St||(St={}));var Qr="-",Nl="AMP",ku="".concat(Nl,"_unsent"),Ic="$default_instance",Rc="https://api2.amplitude.com/2/httpapi",zu="https://api.eu.amplitude.com/2/httpapi",Qu="https://api2.amplitude.com/batch",Lu="https://api.eu.amplitude.com/batch",Ku="utm_campaign",Tu="utm_content",Mu="utm_id",Hu="utm_medium",Du="utm_source",ju="utm_term",Lr="dclid",Kr="fbclid",Tr="gbraid",Mr="gclid",Hr="ko_click_id",Dr="li_fat_id",jr="msclkid",_r="rdt_cid",Or="ttclid",Pr="twclid",$r="wbraid",Ti={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rdt_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},ml=["access-control-allow-origin","access-control-allow-credentials","access-control-expose-headers","access-control-max-age","access-control-allow-methods","access-control-allow-headers","accept-patch","accept-ranges","age","allow","alt-svc","cache-control","connection","content-disposition","content-encoding","content-language","content-length","content-location","content-md5","content-range","content-type","date","delta-base","etag","expires","im","last-modified","link","location","permanent","p3p","pragma","proxy-authenticate","public-key-pins","retry-after","server","status","strict-transport-security","trailer","transfer-encoding","tk","upgrade","vary","via","warning","www-authenticate","x-b3-traceid","x-frame-options"],_u=["authorization","cookie","set-cookie"],Ou=1e3,fi=function(t){if(Object.keys(t).length>Ou)return!1;for(var e in t){var n=t[e];if(!Ec(e,n))return!1}return!0},Ec=function(t,e){var n,l;if(typeof t!="string")return!1;if(Array.isArray(e)){var i=!0;try{for(var r=H(e),o=r.next();!o.done;o=r.next()){var a=o.value;if(Array.isArray(a))return!1;if(typeof a=="object")i=i&&fi(a);else if(!["number","string"].includes(typeof a))return!1;if(!i)return!1}}catch(c){n={error:c}}finally{try{o&&!o.done&&(l=r.return)&&l.call(r)}finally{if(n)throw n.error}}}else{if(e==null)return!1;if(typeof e=="object")return fi(e);if(!["number","string","boolean"].includes(typeof e))return!1}return!0},qt=(function(){function t(){this._propertySet=new Set,this._properties={}}return t.prototype.getUserProperties=function(){return N({},this._properties)},t.prototype.set=function(e,n){return this._safeSet(oe.SET,e,n),this},t.prototype.setOnce=function(e,n){return this._safeSet(oe.SET_ONCE,e,n),this},t.prototype.append=function(e,n){return this._safeSet(oe.APPEND,e,n),this},t.prototype.prepend=function(e,n){return this._safeSet(oe.PREPEND,e,n),this},t.prototype.postInsert=function(e,n){return this._safeSet(oe.POSTINSERT,e,n),this},t.prototype.preInsert=function(e,n){return this._safeSet(oe.PREINSERT,e,n),this},t.prototype.remove=function(e,n){return this._safeSet(oe.REMOVE,e,n),this},t.prototype.add=function(e,n){return this._safeSet(oe.ADD,e,n),this},t.prototype.unset=function(e){return this._safeSet(oe.UNSET,e,Qr),this},t.prototype.clearAll=function(){return this._properties={},this._properties[oe.CLEAR_ALL]=Qr,this},t.prototype._safeSet=function(e,n,l){if(this._validate(e,n,l)){var i=this._properties[e];return i===void 0&&(i={},this._properties[e]=i),i[n]=l,this._propertySet.add(n),!0}return!1},t.prototype._validate=function(e,n,l){return this._properties[oe.CLEAR_ALL]!==void 0||this._propertySet.has(n)?!1:e===oe.ADD?typeof l=="number":e!==oe.UNSET&&e!==oe.REMOVE?Ec(n,l):!0},t})(),oe;(function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"})(oe||(oe={}));var Pu=[oe.CLEAR_ALL,oe.UNSET,oe.SET,oe.SET_ONCE,oe.ADD,oe.APPEND,oe.PREPEND,oe.PREINSERT,oe.POSTINSERT,oe.REMOVE],$u="Event tracked successfully",qu="Unexpected error occurred",eg="Event rejected due to exceeded retry count",tg="Event skipped due to optOut config",ng="Event rejected due to missing API key",lg="Invalid API key",ig="Client not initialized",Xe;(function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.PayloadTooLarge="payload_too_large",t.Invalid="invalid",t.Failed="failed",t.Timeout="Timeout",t.SystemError="SystemError"})(Xe||(Xe={}));var Ot=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Xe.Unknown),{event:t,code:e,message:n}},Fe=function(){var t="ampIntegrationContext";if(typeof globalThis<"u"&&typeof globalThis[t]<"u")return globalThis[t];if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof global<"u")return global},rg=function(t){return t?(t^Math.random()*16>>t/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,Wt)},qr=D([],U(Array(256).keys()),!1).map(function(t){return t.toString(16).padStart(2,"0")}),Wt=function(t){var e,n=Fe();if(!(!((e=n==null?void 0:n.crypto)===null||e===void 0)&&e.getRandomValues))return rg(t);var l=n.crypto.getRandomValues(new Uint8Array(16));return l[6]=l[6]&15|64,l[8]=l[8]&63|128,D([],U(l.entries()),!1).map(function(i){var r=U(i,2),o=r[0],a=r[1];return[4,6,8,10].includes(o)?"-".concat(qr[a]):qr[a]}).join("")},og=(function(){function t(e){this.client=e,this.queue=[],this.applying=!1,this.plugins=[]}return t.prototype.register=function(e,n){var l,i;return W(this,void 0,void 0,function(){return C(this,function(r){switch(r.label){case 0:return this.plugins.some(function(o){return o.name===e.name})?(this.loggerProvider.warn("Plugin with name ".concat(e.name," already exists, skipping registration")),[2]):(e.name===void 0&&(e.name=Wt(),this.loggerProvider.warn(`Plugin name is undefined. 
      Generating a random UUID for plugin name: `.concat(e.name,`. 
      Set a name for the plugin to prevent it from being added multiple times.`))),e.type=(l=e.type)!==null&&l!==void 0?l:"enrichment",[4,(i=e.setup)===null||i===void 0?void 0:i.call(e,n,this.client)]);case 1:return r.sent(),this.plugins.push(e),[2]}})})},t.prototype.deregister=function(e,n){var l;return W(this,void 0,void 0,function(){var i,r;return C(this,function(o){switch(o.label){case 0:return i=this.plugins.findIndex(function(a){return a.name===e}),i===-1?(n.loggerProvider.warn("Plugin with name ".concat(e," does not exist, skipping deregistration")),[2]):(r=this.plugins[i],this.plugins.splice(i,1),[4,(l=r.teardown)===null||l===void 0?void 0:l.call(r)]);case 1:return o.sent(),[2]}})})},t.prototype.reset=function(e){this.applying=!1;var n=this.plugins;n.map(function(l){var i;return(i=l.teardown)===null||i===void 0?void 0:i.call(l)}),this.plugins=[],this.client=e},t.prototype.push=function(e){var n=this;return new Promise(function(l){n.queue.push([e,l]),n.scheduleApply(0)})},t.prototype.scheduleApply=function(e){var n=this;this.applying||(this.applying=!0,setTimeout(function(){n.apply(n.queue.shift()).then(function(){n.applying=!1,n.queue.length>0&&n.scheduleApply(0)})},e))},t.prototype.apply=function(e){return W(this,void 0,void 0,function(){var n,l,i,r,o,a,c,g,b,d,s,u,h,g,b,m,f,p,A,X,y,I;return C(this,function(S){switch(S.label){case 0:if(!e)return[2];n=U(e,1),l=n[0],i=U(e,2),r=i[1],this.loggerProvider.log("Timeline.apply: Initial event",l),o=this.plugins.filter(function(G){return G.type==="before"}),S.label=1;case 1:S.trys.push([1,6,7,8]),a=H(o),c=a.next(),S.label=2;case 2:return c.done?[3,5]:(g=c.value,g.execute?[4,g.execute(N({},l))]:[3,4]);case 3:if(b=S.sent(),b===null)return this.loggerProvider.log("Timeline.apply: Event filtered out by before plugin '".concat(String(g.name),"', event: ").concat(JSON.stringify(l))),r({event:l,code:0,message:""}),[2];l=b,this.loggerProvider.log("Timeline.apply: Event after before plugin '".concat(String(g.name),"', event: ").concat(JSON.stringify(l))),S.label=4;case 4:return c=a.next(),[3,2];case 5:return[3,8];case 6:return d=S.sent(),A={error:d},[3,8];case 7:try{c&&!c.done&&(X=a.return)&&X.call(a)}finally{if(A)throw A.error}return[7];case 8:s=this.plugins.filter(function(G){return G.type==="enrichment"||G.type===void 0}),S.label=9;case 9:S.trys.push([9,14,15,16]),u=H(s),h=u.next(),S.label=10;case 10:return h.done?[3,13]:(g=h.value,g.execute?[4,g.execute(N({},l))]:[3,12]);case 11:if(b=S.sent(),b===null)return this.loggerProvider.log("Timeline.apply: Event filtered out by enrichment plugin '".concat(String(g.name),"', event: ").concat(JSON.stringify(l))),r({event:l,code:0,message:""}),[2];l=b,this.loggerProvider.log("Timeline.apply: Event after enrichment plugin '".concat(String(g.name),"', event: ").concat(JSON.stringify(l))),S.label=12;case 12:return h=u.next(),[3,10];case 13:return[3,16];case 14:return m=S.sent(),y={error:m},[3,16];case 15:try{h&&!h.done&&(I=u.return)&&I.call(u)}finally{if(y)throw y.error}return[7];case 16:return f=this.plugins.filter(function(G){return G.type==="destination"}),this.loggerProvider.log("Timeline.apply: Final event before destinations, event: ".concat(JSON.stringify(l))),p=f.map(function(G){var B=N({},l);return G.execute(B).catch(function(v){return Ot(B,0,String(v))})}),Promise.all(p).then(function(G){var B=U(G,1),v=B[0],J=v||Ot(l,100,"Event not tracked, no destination plugins on the instance");r(J)}),[2]}})})},t.prototype.flush=function(){return W(this,void 0,void 0,function(){var e,n,l,i=this;return C(this,function(r){switch(r.label){case 0:return e=this.queue,this.queue=[],[4,Promise.all(e.map(function(o){return i.apply(o)}))];case 1:return r.sent(),n=this.plugins.filter(function(o){return o.type==="destination"}),l=n.map(function(o){return o.flush&&o.flush()}),[4,Promise.all(l)];case 2:return r.sent(),[2]}})})},t.prototype.onIdentityChanged=function(e){this.plugins.forEach(function(n){var l;(l=n.onIdentityChanged)===null||l===void 0||l.call(n,e)})},t.prototype.onSessionIdChanged=function(e){this.plugins.forEach(function(n){var l;(l=n.onSessionIdChanged)===null||l===void 0||l.call(n,e)})},t.prototype.onOptOutChanged=function(e){this.plugins.forEach(function(n){var l;(l=n.onOptOutChanged)===null||l===void 0||l.call(n,e)})},t})(),ag=function(t,e,n){var l=typeof t=="string"?{event_type:t}:t;return N(N(N({},l),n),e&&{event_properties:e})},yc=function(t,e){var n=N(N({},e),{event_type:St.IDENTIFY,user_properties:t.getUserProperties()});return n},cg=function(t,e,n,l){var i,r=N(N({},l),{event_type:St.GROUP_IDENTIFY,group_properties:n.getUserProperties(),groups:(i={},i[t]=e,i)});return r},dg=function(t,e,n){var l,i=new qt;i.set(t,e);var r=N(N({},n),{event_type:St.IDENTIFY,user_properties:i.getUserProperties(),groups:(l={},l[t]=e,l)});return r},sg=function(t,e){return N(N({},e),{event_type:St.REVENUE,event_properties:t.getEventProperties()})},Oe=function(t){return{promise:t||Promise.resolve()}},ug=(function(){function t(e){e===void 0&&(e="$default"),this.initializing=!1,this.isReady=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new og(this),this.name=e}return t.prototype._init=function(e){return W(this,void 0,void 0,function(){return C(this,function(n){switch(n.label){case 0:return this.config=e,this.timeline.reset(this),this.timeline.loggerProvider=this.config.loggerProvider,[4,this.runQueuedFunctions("q")];case 1:return n.sent(),this.isReady=!0,[2]}})})},t.prototype.runQueuedFunctions=function(e){return W(this,void 0,void 0,function(){var n,l,i,r,o,a,c,d;return C(this,function(s){switch(s.label){case 0:n=this[e],this[e]=[],s.label=1;case 1:s.trys.push([1,8,9,10]),l=H(n),i=l.next(),s.label=2;case 2:return i.done?[3,7]:(r=i.value,o=r(),o&&"promise"in o?[4,o.promise]:[3,4]);case 3:return s.sent(),[3,6];case 4:return[4,o];case 5:s.sent(),s.label=6;case 6:return i=l.next(),[3,2];case 7:return[3,10];case 8:return a=s.sent(),c={error:a},[3,10];case 9:try{i&&!i.done&&(d=l.return)&&d.call(l)}finally{if(c)throw c.error}return[7];case 10:return this[e].length?[4,this.runQueuedFunctions(e)]:[3,12];case 11:s.sent(),s.label=12;case 12:return[2]}})})},t.prototype.track=function(e,n,l){var i=ag(e,n,l);return Oe(this.dispatch(i))},t.prototype.identify=function(e,n){var l=yc(e,n);return Oe(this.dispatch(l))},t.prototype.groupIdentify=function(e,n,l,i){var r=cg(e,n,l,i);return Oe(this.dispatch(r))},t.prototype.setGroup=function(e,n,l){var i=dg(e,n,l);return Oe(this.dispatch(i))},t.prototype.revenue=function(e,n){var l=sg(e,n);return Oe(this.dispatch(l))},t.prototype.add=function(e){return this.isReady?this._addPlugin(e):(this.q.push(this._addPlugin.bind(this,e)),Oe())},t.prototype._addPlugin=function(e){return Oe(this.timeline.register(e,this.config))},t.prototype.remove=function(e){return this.isReady?this._removePlugin(e):(this.q.push(this._removePlugin.bind(this,e)),Oe())},t.prototype._removePlugin=function(e){return Oe(this.timeline.deregister(e,this.config))},t.prototype.dispatchWithCallback=function(e,n){if(!this.isReady)return n(Ot(e,0,ig));this.process(e).then(n)},t.prototype.dispatch=function(e){return W(this,void 0,void 0,function(){var n=this;return C(this,function(l){return this.isReady?[2,this.process(e)]:[2,new Promise(function(i){n.dispatchQ.push(n.dispatchWithCallback.bind(n,e,i))})]})})},t.prototype.getOperationAppliedUserProperties=function(e){var n={};if(e===void 0)return n;var l={};return Object.keys(e).forEach(function(i){Object.values(Dt).includes(i)||(l[i]=e[i])}),Pu.forEach(function(i){if(Object.keys(e).includes(i)){var r=e[i];switch(i){case Dt.CLEAR_ALL:Object.keys(n).forEach(function(o){delete n[o]});break;case Dt.UNSET:Object.keys(r).forEach(function(o){delete n[o]});break;case Dt.SET:Object.assign(n,r);break}}}),Object.assign(n,l),n},t.prototype.process=function(e){return W(this,void 0,void 0,function(){var n,r,l,i,r;return C(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),this.config.optOut?[2,Ot(e,0,tg)]:(e.event_type===St.IDENTIFY&&(n=this.getOperationAppliedUserProperties(e.user_properties),this.timeline.onIdentityChanged({userProperties:n})),[4,this.timeline.push(e)]);case 1:return r=o.sent(),r.code===200?this.config.loggerProvider.log(r.message):r.code===100?this.config.loggerProvider.warn(r.message):this.config.loggerProvider.error(r.message),[2,r];case 2:return l=o.sent(),i=String(l),this.config.loggerProvider.error(i),r=Ot(e,0,i),[2,r];case 3:return[2]}})})},t.prototype.setOptOut=function(e){if(!this.isReady){this.q.push(this._setOptOut.bind(this,!!e));return}this._setOptOut(e)},t.prototype._setOptOut=function(e){this.config.optOut!==e&&(this.timeline.onOptOutChanged(e),this.config.optOut=!!e)},t.prototype.flush=function(){return Oe(this.timeline.flush())},t.prototype.plugin=function(e){var n=this.timeline.plugins.find(function(l){return l.name===e});if(n===void 0){this.config.loggerProvider.debug("Cannot find plugin with name ".concat(e));return}return n},t.prototype.plugins=function(e){return this.timeline.plugins.filter(function(n){return n instanceof e})},t})(),gg=(function(){function t(e,n){this.key="AMP_remote_config_".concat(e.substring(0,10)),this.logger=n}return t.prototype.fetchConfig=function(){var e=null,n={remoteConfig:null,lastFetch:new Date};try{e=localStorage.getItem(this.key)}catch(i){return this.logger.debug("Remote config localstorage failed to access: ",i),Promise.resolve(n)}if(e===null)return this.logger.debug("Remote config localstorage gets null because the key does not exist"),Promise.resolve(n);try{var l=JSON.parse(e);return this.logger.debug("Remote config localstorage parsed successfully: ".concat(JSON.stringify(l))),Promise.resolve({remoteConfig:l.remoteConfig,lastFetch:new Date(l.lastFetch)})}catch(i){return this.logger.debug("Remote config localstorage failed to parse: ",i),localStorage.removeItem(this.key),Promise.resolve(n)}},t.prototype.setConfig=function(e){try{return localStorage.setItem(this.key,JSON.stringify(e)),this.logger.debug("Remote config localstorage set successfully."),Promise.resolve(!0)}catch(n){this.logger.debug("Remote config localstorage failed to set: ",n)}return Promise.resolve(!1)},t})(),hg="https://sr-client-cfg.amplitude.com/config",bg="https://sr-client-cfg.eu.amplitude.com/config",Vg=3,mg=1e3,fg=(function(){function t(e,n,l){l===void 0&&(l="US"),this.callbackInfos=[],this.apiKey=e,this.serverUrl=l==="US"?hg:bg,this.logger=n,this.storage=new gg(e,n)}return t.prototype.subscribe=function(e,n,l){var i=Wt(),r={id:i,key:e,deliveryMode:n,callback:l};return this.callbackInfos.push(r),n==="all"?this.subscribeAll(r):this.subscribeWaitForRemote(r,n.timeout),i},t.prototype.unsubscribe=function(e){var n=this.callbackInfos.findIndex(function(l){return l.id===e});return n===-1?(this.logger.debug("Remote config client unsubscribe failed because callback with id ".concat(e," doesn't exist.")),!1):(this.callbackInfos.splice(n,1),this.logger.debug("Remote config client unsubscribe succeeded removing callback with id ".concat(e,".")),!0)},t.prototype.updateConfigs=function(){return W(this,void 0,void 0,function(){var e,n=this;return C(this,function(l){switch(l.label){case 0:return[4,this.fetch()];case 1:return e=l.sent(),this.storage.setConfig(e),this.callbackInfos.forEach(function(i){n.sendCallback(i,e,"remote")}),[2]}})})},t.prototype.subscribeAll=function(e){return W(this,void 0,void 0,function(){var n,l,i,r=this;return C(this,function(o){switch(o.label){case 0:return n=this.fetch().then(function(a){r.logger.debug("Remote config client subscription all mode fetched from remote: ".concat(JSON.stringify(a))),r.sendCallback(e,a,"remote"),r.storage.setConfig(a)}),l=this.storage.fetchConfig().then(function(a){return a}),[4,Promise.race([n,l])];case 1:return i=o.sent(),i!==void 0&&(this.logger.debug("Remote config client subscription all mode fetched from cache: ".concat(JSON.stringify(i))),this.sendCallback(e,i,"cache")),[4,n];case 2:return o.sent(),[2]}})})},t.prototype.subscribeWaitForRemote=function(e,n){return W(this,void 0,void 0,function(){var l,i,i;return C(this,function(r){switch(r.label){case 0:l=new Promise(function(o,a){setTimeout(function(){a("Timeout exceeded")},n)}),r.label=1;case 1:return r.trys.push([1,3,,5]),[4,Promise.race([this.fetch(),l])];case 2:return i=r.sent(),this.logger.debug("Remote config client subscription wait for remote mode returns from remote."),this.sendCallback(e,i,"remote"),this.storage.setConfig(i),[3,5];case 3:return r.sent(),this.logger.debug("Remote config client subscription wait for remote mode exceeded timeout. Try to fetch from cache."),[4,this.storage.fetchConfig()];case 4:return i=r.sent(),i.remoteConfig!==null?(this.logger.debug("Remote config client subscription wait for remote mode returns a cached copy."),this.sendCallback(e,i,"cache")):(this.logger.debug("Remote config client subscription wait for remote mode failed to fetch cache."),this.sendCallback(e,i,"remote")),[3,5];case 5:return[2]}})})},t.prototype.sendCallback=function(e,n,l){e.lastCallback=new Date;var i;e.key?i=e.key.split(".").reduce(function(r,o){return r===null?r:o in r?r[o]:null},n.remoteConfig):i=n.remoteConfig,e.callback(i,l,n.lastFetch)},t.prototype.fetch=function(e,n){return e===void 0&&(e=Vg),n===void 0&&(n=mg),W(this,void 0,void 0,function(){var l,i,r,o,a,c,d=this;return C(this,function(s){switch(s.label){case 0:l=n/e,i={remoteConfig:null,lastFetch:new Date},r=function(u){var h,g,b,m,f,p;return C(this,function(A){switch(A.label){case 0:h=new AbortController,g=setTimeout(function(){return h.abort()},n),A.label=1;case 1:return A.trys.push([1,7,8,9]),[4,fetch(o.getUrlParams(),{method:"GET",headers:{Accept:"*/*"},signal:h.signal})];case 2:return b=A.sent(),b.ok?[3,4]:[4,b.text()];case 3:return m=A.sent(),o.logger.debug("Remote config client fetch with retry time ".concat(e," failed with ").concat(b.status,": ").concat(m)),[3,6];case 4:return[4,b.json()];case 5:return f=A.sent(),[2,{value:{remoteConfig:f,lastFetch:new Date}}];case 6:return[3,9];case 7:return p=A.sent(),p instanceof Error&&p.name==="AbortError"?o.logger.debug("Remote config client fetch with retry time ".concat(e," timed out after ").concat(n,"ms")):o.logger.debug("Remote config client fetch with retry time ".concat(e," is rejected because: "),p),[3,9];case 8:return clearTimeout(g),[7];case 9:return u<e-1?[4,new Promise(function(X){return setTimeout(X,d.getJitterDelay(l))})]:[3,11];case 10:A.sent(),A.label=11;case 11:return[2]}})},o=this,a=0,s.label=1;case 1:return a<e?[5,r(a)]:[3,4];case 2:if(c=s.sent(),typeof c=="object")return[2,c.value];s.label=3;case 3:return a++,[3,1];case 4:return[2,i]}})})},t.prototype.getJitterDelay=function(e){return Math.floor(Math.random()*e)},t.prototype.getUrlParams=function(){var e=encodeURIComponent(this.apiKey),n=new URLSearchParams;return n.append("config_group",t.CONFIG_GROUP),"".concat(this.serverUrl,"/").concat(e,"?").concat(n.toString())},t.CONFIG_GROUP="browser",t})(),et;(function(t){t[t.None=0]="None",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Verbose=3]="Verbose",t[t.Debug=4]="Debug"})(et||(et={}));var Hn="Amplitude Logger ",vc=(function(){function t(){this.logLevel=et.None}return t.prototype.disable=function(){this.logLevel=et.None},t.prototype.enable=function(e){e===void 0&&(e=et.Warn),this.logLevel=e},t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<et.Verbose||console.log("".concat(Hn,"[Log]: ").concat(e.join(" ")))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<et.Warn||console.warn("".concat(Hn,"[Warn]: ").concat(e.join(" ")))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<et.Error||console.error("".concat(Hn,"[Error]: ").concat(e.join(" ")))},t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<et.Debug||console.log("".concat(Hn,"[Debug]: ").concat(e.join(" ")))},t})(),Ag=(function(){function t(){this.productId="",this.quantity=1,this.price=0}return t.prototype.setProductId=function(e){return this.productId=e,this},t.prototype.setQuantity=function(e){return e>0&&(this.quantity=e),this},t.prototype.setPrice=function(e){return this.price=e,this},t.prototype.setRevenueType=function(e){return this.revenueType=e,this},t.prototype.setCurrency=function(e){return this.currency=e,this},t.prototype.setRevenue=function(e){return this.revenue=e,this},t.prototype.setReceipt=function(e){return this.receipt=e,this},t.prototype.setReceiptSig=function(e){return this.receiptSig=e,this},t.prototype.setEventProperties=function(e){return fi(e)&&(this.properties=e),this},t.prototype.getEventProperties=function(){var e=this.properties?N({},this.properties):{};return e[gt.REVENUE_PRODUCT_ID]=this.productId,e[gt.REVENUE_QUANTITY]=this.quantity,e[gt.REVENUE_PRICE]=this.price,e[gt.REVENUE_TYPE]=this.revenueType,e[gt.REVENUE_CURRENCY]=this.currency,e[gt.REVENUE]=this.revenue,e[gt.RECEIPT]=this.receipt,e[gt.RECEIPT_SIG]=this.receiptSig,e},t})(),gt;(function(t){t.REVENUE_PRODUCT_ID="$productId",t.REVENUE_QUANTITY="$quantity",t.REVENUE_PRICE="$price",t.REVENUE_TYPE="$revenueType",t.REVENUE_CURRENCY="$currency",t.REVENUE="$revenue",t.RECEIPT="$receipt",t.RECEIPT_SIG="$receiptSig"})(gt||(gt={}));var pg=function(t,e){var n=Math.max(e,1);return t.reduce(function(l,i,r){var o=Math.floor(r/n);return l[o]||(l[o]=[]),l[o].push(i),l},[])},rl=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:Ic,logLevel:et.Warn,loggerProvider:new vc,offline:!1,optOut:!1,serverUrl:Rc,serverZone:"US",useBatch:!1}},Zg=(function(){function t(e){var n,l,i,r;this._optOut=!1;var o=rl();this.apiKey=e.apiKey,this.flushIntervalMillis=(n=e.flushIntervalMillis)!==null&&n!==void 0?n:o.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||o.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||o.flushQueueSize,this.instanceName=e.instanceName||o.instanceName,this.loggerProvider=e.loggerProvider||o.loggerProvider,this.logLevel=(l=e.logLevel)!==null&&l!==void 0?l:o.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.offline=e.offline!==void 0?e.offline:o.offline,this.optOut=(i=e.optOut)!==null&&i!==void 0?i:o.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||o.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=(r=e.useBatch)!==null&&r!==void 0?r:o.useBatch,this.loggerProvider.enable(this.logLevel);var a=Sc(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=a.serverZone,this.serverUrl=a.serverUrl}return Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),t})(),Gg=function(t,e){return t==="EU"?e?Lu:zu:e?Qu:Rc},Sc=function(t,e,n){if(t===void 0&&(t=""),e===void 0&&(e=rl().serverZone),n===void 0&&(n=rl().useBatch),t)return{serverUrl:t,serverZone:void 0};var l=["US","EU"].includes(e)?e:rl().serverZone;return{serverZone:l,serverUrl:Gg(l,n)}},Xg=(function(){function t(){this.sdk={metrics:{histogram:{}}}}return t.prototype.recordHistogram=function(e,n){this.sdk.metrics.histogram[e]=n},t})();function Ig(t){return t instanceof Error?t.message:String(t)}function Dn(t){var e="";try{"body"in t&&(e=JSON.stringify(t.body,null,2))}catch{}return e}var Rg=(function(){function t(){this.name="amplitude",this.type="destination",this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduleId=null,this.scheduledTimeout=0,this.flushId=null,this.queue=[]}return t.prototype.setup=function(e){var n;return W(this,void 0,void 0,function(){var l,i=this;return C(this,function(r){switch(r.label){case 0:return this.config=e,this.storageKey="".concat(ku,"_").concat(this.config.apiKey.substring(0,10)),[4,(n=this.config.storageProvider)===null||n===void 0?void 0:n.get(this.storageKey)];case 1:return l=r.sent(),l&&l.length>0&&Promise.all(l.map(function(o){return i.execute(o)})).catch(),[2,Promise.resolve(void 0)]}})})},t.prototype.execute=function(e){var n=this;return e.insert_id||(e.insert_id=Wt()),new Promise(function(l){var i={event:e,attempts:0,callback:function(r){return l(r)},timeout:0};n.queue.push(i),n.schedule(n.config.flushIntervalMillis),n.saveEvents()})},t.prototype.removeEventsExceedFlushMaxRetries=function(e){var n=this;return e.filter(function(l){return l.attempts+=1,l.attempts<n.config.flushMaxRetries?!0:(n.fulfillRequest([l],500,eg),!1)})},t.prototype.scheduleEvents=function(e){var n=this;e.forEach(function(l){n.schedule(l.timeout===0?n.config.flushIntervalMillis:l.timeout)})},t.prototype.schedule=function(e){var n=this;if(!this.config.offline&&(this.scheduleId===null||this.scheduleId&&e>this.scheduledTimeout)){this.scheduleId&&clearTimeout(this.scheduleId),this.scheduledTimeout=e,this.scheduleId=setTimeout(function(){n.queue=n.queue.map(function(l){return l.timeout=0,l}),n.flush(!0)},e);return}},t.prototype.resetSchedule=function(){this.scheduleId=null,this.scheduledTimeout=0},t.prototype.flush=function(e){return e===void 0&&(e=!1),W(this,void 0,void 0,function(){var n,l,i,r=this;return C(this,function(o){switch(o.label){case 0:return this.config.offline?(this.resetSchedule(),this.config.loggerProvider.debug("Skipping flush while offline."),[2]):this.flushId?(this.resetSchedule(),this.config.loggerProvider.debug("Skipping flush because previous flush has not resolved."),[2]):(this.flushId=this.scheduleId,this.resetSchedule(),n=[],l=[],this.queue.forEach(function(a){return a.timeout===0?n.push(a):l.push(a)}),i=pg(n,this.config.flushQueueSize),[4,i.reduce(function(a,c){return W(r,void 0,void 0,function(){return C(this,function(d){switch(d.label){case 0:return[4,a];case 1:return d.sent(),[4,this.send(c,e)];case 2:return[2,d.sent()]}})})},Promise.resolve())]);case 1:return o.sent(),this.flushId=null,this.scheduleEvents(this.queue),[2]}})})},t.prototype.send=function(e,n){return n===void 0&&(n=!0),W(this,void 0,void 0,function(){var l,i,r,o,a;return C(this,function(c){switch(c.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(e,400,ng)];l={api_key:this.config.apiKey,events:e.map(function(d){var s=d.event;s.extra;var u=mi(s,["extra"]);return u}),options:{min_id_length:this.config.minIdLength},client_upload_time:new Date().toISOString(),request_metadata:this.config.requestMetadata},this.config.requestMetadata=new Xg,c.label=1;case 1:return c.trys.push([1,3,,4]),i=Sc(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(i,l)];case 2:return r=c.sent(),r===null?(this.fulfillRequest(e,0,qu),[2]):n?(this.handleResponse(r,e),[3,4]):("body"in r?this.fulfillRequest(e,r.statusCode,"".concat(r.status,": ").concat(Dn(r))):this.fulfillRequest(e,r.statusCode,r.status),[2]);case 3:return o=c.sent(),a=Ig(o),this.config.loggerProvider.error(a),this.handleResponse({status:Xe.Failed,statusCode:0},e),[3,4];case 4:return[2]}})})},t.prototype.handleResponse=function(e,n){var l=e.status;switch(l){case Xe.Success:{this.handleSuccessResponse(e,n);break}case Xe.Invalid:{this.handleInvalidResponse(e,n);break}case Xe.PayloadTooLarge:{this.handlePayloadTooLargeResponse(e,n);break}case Xe.RateLimit:{this.handleRateLimitResponse(e,n);break}default:{this.config.loggerProvider.warn(`{code: 0, error: "Status '`.concat(l,"' provided for ").concat(n.length,' events"}')),this.handleOtherResponse(n);break}}},t.prototype.handleSuccessResponse=function(e,n){this.fulfillRequest(n,e.statusCode,$u)},t.prototype.handleInvalidResponse=function(e,n){var l=this;if(e.body.missingField||e.body.error.startsWith(lg)){this.fulfillRequest(n,e.statusCode,e.body.error);return}var i=D(D(D(D([],U(Object.values(e.body.eventsWithInvalidFields)),!1),U(Object.values(e.body.eventsWithMissingFields)),!1),U(Object.values(e.body.eventsWithInvalidIdLengths)),!1),U(e.body.silencedEvents),!1).flat(),r=new Set(i),o=n.filter(function(c,d){if(r.has(d)){l.fulfillRequest([c],e.statusCode,e.body.error);return}return!0});o.length>0&&this.config.loggerProvider.warn(Dn(e));var a=this.removeEventsExceedFlushMaxRetries(o);this.scheduleEvents(a)},t.prototype.handlePayloadTooLargeResponse=function(e,n){if(n.length===1){this.fulfillRequest(n,e.statusCode,e.body.error);return}this.config.loggerProvider.warn(Dn(e)),this.config.flushQueueSize/=2;var l=this.removeEventsExceedFlushMaxRetries(n);this.scheduleEvents(l)},t.prototype.handleRateLimitResponse=function(e,n){var l=this,i=Object.keys(e.body.exceededDailyQuotaUsers),r=Object.keys(e.body.exceededDailyQuotaDevices),o=e.body.throttledEvents,a=new Set(i),c=new Set(r),d=new Set(o),s=n.filter(function(h,g){if(h.event.user_id&&a.has(h.event.user_id)||h.event.device_id&&c.has(h.event.device_id)){l.fulfillRequest([h],e.statusCode,e.body.error);return}return d.has(g)&&(h.timeout=l.throttleTimeout),!0});s.length>0&&this.config.loggerProvider.warn(Dn(e));var u=this.removeEventsExceedFlushMaxRetries(s);this.scheduleEvents(u)},t.prototype.handleOtherResponse=function(e){var n=this,l=e.map(function(r){return r.timeout=r.attempts*n.retryTimeout,r}),i=this.removeEventsExceedFlushMaxRetries(l);this.scheduleEvents(i)},t.prototype.fulfillRequest=function(e,n,l){this.removeEvents(e),e.forEach(function(i){return i.callback(Ot(i.event,n,l))})},t.prototype.saveEvents=function(){if(this.config.storageProvider){var e=this.queue.map(function(n){return n.event});this.config.storageProvider.set(this.storageKey,e)}},t.prototype.removeEvents=function(e){this.queue=this.queue.filter(function(n){return!e.some(function(l){return l.event.insert_id===n.event.insert_id})}),this.saveEvents()},t})(),Eg=(function(){function t(){}return t.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:yg(),platform:"Web",os:void 0,deviceModel:void 0}},t})(),yg=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},vg=(function(){function t(){this.queue=[]}return t.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},t.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(n){e(n)}),this.queue=[])},t})(),Rt=function(){return Rt=Object.assign||function(e){for(var n,l=1,i=arguments.length;l<i;l++){n=arguments[l];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rt.apply(this,arguments)};function ol(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],l=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&l>=t.length&&(t=void 0),{value:t&&t[l++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function eo(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var l=n.call(t),i,r=[],o;try{for(;(e===void 0||e-- >0)&&!(i=l.next()).done;)r.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=l.return)&&n.call(l)}finally{if(o)throw o.error}}return r}var al=function(t,e){var n,l,i=["string","number","boolean","undefined"],r=typeof t,o=typeof e;if(r!==o)return!1;try{for(var a=ol(i),c=a.next();!c.done;c=a.next()){var d=c.value;if(d===r)return t===e}}catch(f){n={error:f}}finally{try{c&&!c.done&&(l=a.return)&&l.call(a)}finally{if(n)throw n.error}}if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;var s=Array.isArray(t),u=Array.isArray(e);if(s!==u)return!1;if(s&&u){for(var h=0;h<t.length;h++)if(!al(t[h],e[h]))return!1}else{var g=Object.keys(t).sort(),b=Object.keys(e).sort();if(!al(g,b))return!1;var m=!0;return Object.keys(t).forEach(function(f){al(t[f],e[f])||(m=!1)}),m}return!0},Sg="$set",Cg="$unset",Wg="$clearAll";Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),n=e.length,l=new Array(n);n--;)l[n]=[e[n],t[e[n]]];return l});var Bg=(function(){function t(){this.identity={userProperties:{}},this.listeners=new Set}return t.prototype.editIdentity=function(){var e=this,n=Rt({},this.identity.userProperties),l=Rt(Rt({},this.identity),{userProperties:n});return{setUserId:function(i){return l.userId=i,this},setDeviceId:function(i){return l.deviceId=i,this},setUserProperties:function(i){return l.userProperties=i,this},setOptOut:function(i){return l.optOut=i,this},updateUserProperties:function(i){var r,o,a,c,d,s,u=l.userProperties||{};try{for(var h=ol(Object.entries(i)),g=h.next();!g.done;g=h.next()){var b=eo(g.value,2),m=b[0],f=b[1];switch(m){case Sg:try{for(var p=(a=void 0,ol(Object.entries(f))),A=p.next();!A.done;A=p.next()){var X=eo(A.value,2),y=X[0],I=X[1];u[y]=I}}catch(B){a={error:B}}finally{try{A&&!A.done&&(c=p.return)&&c.call(p)}finally{if(a)throw a.error}}break;case Cg:try{for(var S=(d=void 0,ol(Object.keys(f))),G=S.next();!G.done;G=S.next()){var y=G.value;delete u[y]}}catch(B){d={error:B}}finally{try{G&&!G.done&&(s=S.return)&&s.call(S)}finally{if(d)throw d.error}}break;case Wg:u={};break}}}catch(B){r={error:B}}finally{try{g&&!g.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}return l.userProperties=u,this},commit:function(){return e.setIdentity(l),this}}},t.prototype.getIdentity=function(){return Rt({},this.identity)},t.prototype.setIdentity=function(e){var n=Rt({},this.identity);this.identity=Rt({},e),al(n,this.identity)||this.listeners.forEach(function(l){l(e)})},t.prototype.addIdentityListener=function(e){this.listeners.add(e)},t.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},t})(),sn=typeof globalThis<"u"?globalThis:typeof global<"u"?global:self,Ng=(function(){function t(){this.identityStore=new Bg,this.eventBridge=new vg,this.applicationContextProvider=new Eg}return t.getInstance=function(e){return sn.analyticsConnectorInstances||(sn.analyticsConnectorInstances={}),sn.analyticsConnectorInstances[e]||(sn.analyticsConnectorInstances[e]=new t),sn.analyticsConnectorInstances[e]},t})(),En=function(t){return t===void 0&&(t=Ic),Ng.getInstance(t)},Fg=function(t,e){En(e).identityStore.editIdentity().setUserId(t).commit()},Yg=function(t,e){En(e).identityStore.editIdentity().setDeviceId(t).commit()},Ug=(function(){function t(){this.name="identity",this.type="before",this.identityStore=En().identityStore}return t.prototype.execute=function(e){return W(this,void 0,void 0,function(){var n;return C(this,function(l){return n=e.user_properties,n&&this.identityStore.editIdentity().updateUserProperties(n).commit(),[2,e]})})},t.prototype.setup=function(e){return W(this,void 0,void 0,function(){return C(this,function(n){return e.instanceName&&(this.identityStore=En(e.instanceName).identityStore),[2]})})},t})(),Cc=function(t,e){e===void 0&&(e=Date.now());var n=Date.now(),l=n-e;return l>t},Wc=function(t,e,n){return e===void 0&&(e=""),n===void 0&&(n=10),[Nl,e,t.substring(0,n)].filter(Boolean).join("_")},Jg=function(t){return"".concat(Nl.toLowerCase(),"_").concat(t.substring(0,6))},xg=function(){var t,e,n,l;if(typeof navigator>"u")return"";var i=navigator.userLanguage;return(l=(n=(e=(t=navigator.languages)===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:navigator.language)!==null&&n!==void 0?n:i)!==null&&l!==void 0?l:""},fl=function(){var t,e=Fe();if(!(!((t=e==null?void 0:e.location)===null||t===void 0)&&t.search))return{};var n=e.location.search.substring(1).split("&").filter(Boolean),l=n.reduce(function(i,r){var o=r.split("=",2),a=to(o[0]),c=to(o[1]);return c&&(i[a]=c),i},{});return l},to=function(t){t===void 0&&(t="");try{return decodeURIComponent(t)}catch{return""}},wg=function(t){var e=new Error().stack||"";return e.split(`
`).slice(2+t).map(function(n){return n.trim()})},ue=function(t){return function(){var e=N({},t.config),n=e.loggerProvider,l=e.logLevel;return{logger:n,logLevel:l}}},kg=function(t,e){var n,l;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");try{for(var i=H(e.split(".")),r=i.next();!r.done;r=i.next()){var o=r.value;if(o in t)t=t[o];else return}}catch(a){n={error:a}}finally{try{r&&!r.done&&(l=i.return)&&l.call(i)}finally{if(n)throw n.error}}return t},ge=function(t,e){return function(){var n,l,i={};try{for(var r=H(e),o=r.next();!o.done;o=r.next()){var a=o.value;i[a]=kg(t,a)}}catch(c){n={error:c}}finally{try{o&&!o.done&&(l=r.return)&&l.call(r)}finally{if(n)throw n.error}}return i}},he=function(t,e,n,l,i){return i===void 0&&(i=null),function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var a=n(),c=a.logger,d=a.logLevel;if(d&&d<et.Debug||!d||!c)return t.apply(i,r);var s={type:"invoke public method",name:e,args:r,stacktrace:wg(1),time:{start:new Date().toISOString()},states:{}};l&&s.states&&(s.states.before=l());var u=t.apply(i,r);return u&&u.promise?u.promise.then(function(){l&&s.states&&(s.states.after=l()),s.time&&(s.time.end=new Date().toISOString()),c.debug(JSON.stringify(s,null,2))}):(l&&s.states&&(s.states.after=l()),s.time&&(s.time.end=new Date().toISOString()),c.debug(JSON.stringify(s,null,2))),u}},Ai=function(t,e){return!e||!e.length?!0:e.some(function(n){return typeof n=="string"?t===n:t.match(n)})},zg=function(t,e){var n=t;try{n=decodeURI(t)}catch{}return n},Mi=(function(){function t(){this.memoryStorage=new Map}return t.prototype.isEnabled=function(){return W(this,void 0,void 0,function(){return C(this,function(e){return[2,!0]})})},t.prototype.get=function(e){return W(this,void 0,void 0,function(){return C(this,function(n){return[2,this.memoryStorage.get(e)]})})},t.prototype.getRaw=function(e){return W(this,void 0,void 0,function(){var n;return C(this,function(l){switch(l.label){case 0:return[4,this.get(e)];case 1:return n=l.sent(),[2,n?JSON.stringify(n):void 0]}})})},t.prototype.set=function(e,n){return W(this,void 0,void 0,function(){return C(this,function(l){return this.memoryStorage.set(e,n),[2]})})},t.prototype.remove=function(e){return W(this,void 0,void 0,function(){return C(this,function(n){return this.memoryStorage.delete(e),[2]})})},t.prototype.reset=function(){return W(this,void 0,void 0,function(){return C(this,function(e){return this.memoryStorage.clear(),[2]})})},t})(),pi=(function(){function t(e){this.options=N({},e)}return t.prototype.isEnabled=function(){return W(this,void 0,void 0,function(){var e,n,l;return C(this,function(i){switch(i.label){case 0:if(!Fe())return[2,!1];t.testValue=String(Date.now()),e=new t(this.options),n="AMP_TEST",i.label=1;case 1:return i.trys.push([1,4,5,7]),[4,e.set(n,t.testValue)];case 2:return i.sent(),[4,e.get(n)];case 3:return l=i.sent(),[2,l===t.testValue];case 4:return i.sent(),[2,!1];case 5:return[4,e.remove(n)];case 6:return i.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){var n;return W(this,void 0,void 0,function(){var l,i;return C(this,function(r){switch(r.label){case 0:return[4,this.getRaw(e)];case 1:if(l=r.sent(),!l)return[2,void 0];try{return i=(n=Qg(l))!==null&&n!==void 0?n:Lg(l),i===void 0?(console.error("Amplitude Logger [Error]: Failed to decode cookie value for key: ".concat(e,", value: ").concat(l)),[2,void 0]):[2,JSON.parse(i)]}catch{return console.error("Amplitude Logger [Error]: Failed to parse cookie value for key: ".concat(e,", value: ").concat(l)),[2,void 0]}return[2]}})})},t.prototype.getRaw=function(e){var n,l;return W(this,void 0,void 0,function(){var i,r,o;return C(this,function(a){return i=Fe(),r=(l=(n=i==null?void 0:i.document)===null||n===void 0?void 0:n.cookie.split("; "))!==null&&l!==void 0?l:[],o=r.find(function(c){return c.indexOf(e+"=")===0}),o?[2,o.substring(e.length+1)]:[2,void 0]})})},t.prototype.set=function(e,n){var l;return W(this,void 0,void 0,function(){var i,r,o,a,c,d,s;return C(this,function(u){try{i=(l=this.options.expirationDays)!==null&&l!==void 0?l:0,r=n!==null?i:-1,o=void 0,r&&(a=new Date,a.setTime(a.getTime()+r*24*60*60*1e3),o=a),c="".concat(e,"=").concat(btoa(encodeURIComponent(JSON.stringify(n)))),o&&(c+="; expires=".concat(o.toUTCString())),c+="; path=/",this.options.domain&&(c+="; domain=".concat(this.options.domain)),this.options.secure&&(c+="; Secure"),this.options.sameSite&&(c+="; SameSite=".concat(this.options.sameSite)),d=Fe(),d&&(d.document.cookie=c)}catch(h){s=h instanceof Error?h.message:String(h),console.error("Amplitude Logger [Error]: Failed to set cookie for key: ".concat(e,". Error: ").concat(s))}return[2]})})},t.prototype.remove=function(e){return W(this,void 0,void 0,function(){return C(this,function(n){switch(n.label){case 0:return[4,this.set(e,null)];case 1:return n.sent(),[2]}})})},t.prototype.reset=function(){return W(this,void 0,void 0,function(){return C(this,function(e){return[2]})})},t})(),Qg=function(t){try{return decodeURIComponent(atob(t))}catch{return}},Lg=function(t){try{return decodeURIComponent(atob(decodeURIComponent(t)))}catch{return}},no=function(t,e,n){return e===void 0&&(e=""),n===void 0&&(n=10),[Nl,e,t.substring(0,n)].filter(Boolean).join("_")},Bc=(function(){function t(e){this.storage=e}return t.prototype.isEnabled=function(){return W(this,void 0,void 0,function(){var e,n,l,i;return C(this,function(r){switch(r.label){case 0:if(!this.storage)return[2,!1];e=String(Date.now()),n=new t(this.storage),l="AMP_TEST",r.label=1;case 1:return r.trys.push([1,4,5,7]),[4,n.set(l,e)];case 2:return r.sent(),[4,n.get(l)];case 3:return i=r.sent(),[2,i===e];case 4:return r.sent(),[2,!1];case 5:return[4,n.remove(l)];case 6:return r.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){return W(this,void 0,void 0,function(){var n;return C(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,this.getRaw(e)];case 1:return n=l.sent(),n?[2,JSON.parse(n)]:[2,void 0];case 2:return l.sent(),console.error("[Amplitude] Error: Could not get value from storage"),[2,void 0];case 3:return[2]}})})},t.prototype.getRaw=function(e){var n;return W(this,void 0,void 0,function(){return C(this,function(l){return[2,((n=this.storage)===null||n===void 0?void 0:n.getItem(e))||void 0]})})},t.prototype.set=function(e,n){var l;return W(this,void 0,void 0,function(){return C(this,function(i){try{(l=this.storage)===null||l===void 0||l.setItem(e,JSON.stringify(n))}catch{}return[2]})})},t.prototype.remove=function(e){var n;return W(this,void 0,void 0,function(){return C(this,function(l){try{(n=this.storage)===null||n===void 0||n.removeItem(e)}catch{}return[2]})})},t.prototype.reset=function(){var e;return W(this,void 0,void 0,function(){return C(this,function(n){try{(e=this.storage)===null||e===void 0||e.clear()}catch{}return[2]})})},t})(),Hi=(function(){function t(){}return t.prototype.send=function(e,n){return Promise.resolve(null)},t.prototype.buildResponse=function(e){var n,l,i,r,o,a,c,d,s,u,h,g,b,m,f,p,A,X,y,I,S,G;if(typeof e!="object")return null;var B=e.code||0,v=this.buildStatus(B);switch(v){case Xe.Success:return{status:v,statusCode:B,body:{eventsIngested:(n=e.events_ingested)!==null&&n!==void 0?n:0,payloadSizeBytes:(l=e.payload_size_bytes)!==null&&l!==void 0?l:0,serverUploadTime:(i=e.server_upload_time)!==null&&i!==void 0?i:0}};case Xe.Invalid:return{status:v,statusCode:B,body:{error:(r=e.error)!==null&&r!==void 0?r:"",missingField:(o=e.missing_field)!==null&&o!==void 0?o:"",eventsWithInvalidFields:(a=e.events_with_invalid_fields)!==null&&a!==void 0?a:{},eventsWithMissingFields:(c=e.events_with_missing_fields)!==null&&c!==void 0?c:{},eventsWithInvalidIdLengths:(d=e.events_with_invalid_id_lengths)!==null&&d!==void 0?d:{},epsThreshold:(s=e.eps_threshold)!==null&&s!==void 0?s:0,exceededDailyQuotaDevices:(u=e.exceeded_daily_quota_devices)!==null&&u!==void 0?u:{},silencedDevices:(h=e.silenced_devices)!==null&&h!==void 0?h:[],silencedEvents:(g=e.silenced_events)!==null&&g!==void 0?g:[],throttledDevices:(b=e.throttled_devices)!==null&&b!==void 0?b:{},throttledEvents:(m=e.throttled_events)!==null&&m!==void 0?m:[]}};case Xe.PayloadTooLarge:return{status:v,statusCode:B,body:{error:(f=e.error)!==null&&f!==void 0?f:""}};case Xe.RateLimit:return{status:v,statusCode:B,body:{error:(p=e.error)!==null&&p!==void 0?p:"",epsThreshold:(A=e.eps_threshold)!==null&&A!==void 0?A:0,throttledDevices:(X=e.throttled_devices)!==null&&X!==void 0?X:{},throttledUsers:(y=e.throttled_users)!==null&&y!==void 0?y:{},exceededDailyQuotaDevices:(I=e.exceeded_daily_quota_devices)!==null&&I!==void 0?I:{},exceededDailyQuotaUsers:(S=e.exceeded_daily_quota_users)!==null&&S!==void 0?S:{},throttledEvents:(G=e.throttled_events)!==null&&G!==void 0?G:[]}};case Xe.Timeout:default:return{status:v,statusCode:B}}},t.prototype.buildStatus=function(e){return e>=200&&e<300?Xe.Success:e===429?Xe.RateLimit:e===413?Xe.PayloadTooLarge:e===408?Xe.Timeout:e>=400&&e<500?Xe.Invalid:e>=500?Xe.Failed:Xe.Unknown},t})(),Kg=(function(t){Me(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(n,l){return W(this,void 0,void 0,function(){var i,r,o;return C(this,function(a){switch(a.label){case 0:if(typeof fetch>"u")throw new Error("FetchTransport is not supported");return i={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(l),method:"POST"},[4,fetch(n,i)];case 1:return r=a.sent(),[4,r.text()];case 2:o=a.sent();try{return[2,this.buildResponse(JSON.parse(o))]}catch{return[2,this.buildResponse({code:r.status})]}return[2]}})})},e})(Hi),Tg=null,Mg=["a","button","input","select","textarea","label","video","audio",'[contenteditable="true" i]',"[data-amp-default-track]",".amp-default-track"],Nc="data-amp-track-",Hg=["div","span","h1","h2","h3","h4","h5","h6"],Dg=["a","button",'[role="button"]','[role="link"]','[role="menuitem"]','[role="menuitemcheckbox"]','[role="menuitemradio"]','[role="option"]','[role="tab"]','[role="treeitem"]','[contenteditable="true" i]'],jg=D(['input[type="button"]','input[type="submit"]','input[type="reset"]','input[type="image"]','input[type="file"]'],U(Dg),!1),_g=["*"],Og=1e3,Pg=4,$g=50;function qg(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||t===null||t===void 0}function Fc(t,e,n){if(t){var l=e.map(lo),i=n.map(lo);Yc({json:t,allowlist:l,excludelist:i,ancestors:[]})}}function Yc(t){var e,n,l=t.json,i=t.targetObject,r=t.allowlist,o=t.excludelist,a=t.ancestors,c=t.parentObject,d=t.targetKey;i||(i=l);var s=Object.keys(i);try{for(var u=H(s),h=u.next();!h.done;h=u.next()){var g=h.value,b=D(D([],U(a),!1),[g],!1);qg(i[g])?(!io(b,r)||io(b,o))&&delete i[g]:Yc({json:l,targetObject:i[g],allowlist:r,excludelist:o,ancestors:b,parentObject:i,targetKey:g})}}catch(m){e={error:m}}finally{try{h&&!h.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}Object.keys(i).length===0&&c&&d&&delete c[d]}function lo(t){return t.startsWith("/")&&(t=t.slice(1)),t.split("/").map(function(e){return e.replace(/~0/g,"~").replace(/~1/g,"/")})}function Zi(t,e,n,l){if(n===void 0&&(n=0),l===void 0&&(l=0),l===e.length)return n===t.length;if(n===t.length){for(;l<e.length&&e[l]==="**";)l++;return l===e.length}var i=e[l];if(i==="**"){if(l+1===e.length)return!0;for(var r=n;r<=t.length;r++)if(Zi(t,e,r,l+1))return!0;return!1}else return i==="*"||i===t[n]?Zi(t,e,n+1,l+1):!1}function io(t,e){return e.some(function(n){return Zi(t,n)})}var eh=500,Uc=100,th=(function(){function t(e){this.request=e}return t.prototype.headers=function(e){var n,l;e===void 0&&(e=[]);var i=this.request.headers,r={};if(Array.isArray(i))i.forEach(function(u){var h=U(u,2),g=h[0],b=h[1];r[g]=b});else if(i instanceof Headers)i.forEach(function(u,h){r[h]=u});else if(typeof i=="object"&&i!==null)try{for(var o=H(Object.entries(i)),a=o.next();!a.done;a=o.next()){var c=U(a.value,2),d=c[0],s=c[1];r[d]=s}}catch(u){n={error:u}}finally{try{a&&!a.done&&(l=o.return)&&l.call(o)}finally{if(n)throw n.error}}return Fl(r,{allow:e})},Object.defineProperty(t.prototype,"bodySize",{get:function(){if(typeof this._bodySize=="number")return this._bodySize;var e=Fe();if(e!=null&&e.TextEncoder){var n=this.request.body;return this._bodySize=Jc(n,Uc),this._bodySize}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"method",{get:function(){return this.request.method},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"body",{get:function(){return typeof this.request.body=="string"?this.request.body:null},enumerable:!1,configurable:!0}),t.prototype.json=function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=[]),W(this,void 0,void 0,function(){var l;return C(this,function(i){return e.length===0?[2,null]:(l=this.body,[2,Di(l,e,n)])})})},t})(),nh=(function(){function t(e,n){this.bodyRaw=e,this.requestHeaders=n}return t.prototype.headers=function(e){return e===void 0&&(e=[]),Fl(this.requestHeaders,{allow:e})},Object.defineProperty(t.prototype,"bodySize",{get:function(){return Jc(this.bodyRaw,Uc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"body",{get:function(){return typeof this.bodyRaw=="string"?this.bodyRaw:null},enumerable:!1,configurable:!0}),t.prototype.json=function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=[]),W(this,void 0,void 0,function(){var l;return C(this,function(i){return e.length===0?[2,null]:(l=this.body,[2,Di(l,e,n)])})})},t})();function Jc(t,e){var n,l,i,r=Fe(),o=r==null?void 0:r.TextEncoder;if(o){var a;if(typeof t=="string")a=t,i=new o().encode(a).length;else if(t instanceof Blob)a=t,i=a.size;else if(t instanceof URLSearchParams)a=t,i=new o().encode(a.toString()).length;else if(ArrayBuffer.isView(t))a=t,i=a.byteLength;else if(t instanceof ArrayBuffer)a=t,i=a.byteLength;else if(t instanceof FormData){var c=t,d=0,s=0;try{for(var u=H(c.entries()),h=u.next();!h.done;h=u.next()){var g=U(h.value,2),b=g[0],m=g[1];if(d+=b.length,typeof m=="string")d+=new o().encode(m).length;else if(m instanceof Blob)d+=m.size;else return;if(++s>=e)return}}catch(f){n={error:f}}finally{try{h&&!h.done&&(l=u.return)&&l.call(u)}finally{if(n)throw n.error}}i=d}else if(t instanceof ReadableStream){a=t;return}return i}}var lh=(function(){function t(e){this.response=e}return t.prototype.headers=function(e){var n;if(e===void 0&&(e=[]),this.response.headers instanceof Headers){var l=this.response.headers,i={};return(n=l==null?void 0:l.forEach)===null||n===void 0||n.call(l,function(r,o){i[o]=r}),Fl(i,{allow:e})}},Object.defineProperty(t.prototype,"bodySize",{get:function(){var e,n;if(this._bodySize!==void 0)return this._bodySize;var l=(n=(e=this.response.headers)===null||e===void 0?void 0:e.get)===null||n===void 0?void 0:n.call(e,"content-length"),i=l?parseInt(l,10):void 0;return this._bodySize=i,i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.response.status},enumerable:!1,configurable:!0}),t.prototype.text=function(){return W(this,void 0,void 0,function(){var e,n,l;return C(this,function(i){switch(i.label){case 0:this.clonedResponse||(this.clonedResponse=this.response.clone()),i.label=1;case 1:return i.trys.push([1,3,,4]),e=this.clonedResponse.text(),n=new Promise(function(r){return setTimeout(function(){return r(null)},eh)}),[4,Promise.race([e,n])];case 2:return l=i.sent(),[2,l];case 3:return i.sent(),[2,null];case 4:return[2]}})})},t.prototype.json=function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=[]),W(this,void 0,void 0,function(){var l;return C(this,function(i){switch(i.label){case 0:return e.length===0?[2,null]:[4,this.text()];case 1:return l=i.sent(),[2,Di(l,e,n)]}})})},t})(),ih=(function(){function t(e,n,l,i){this.statusCode=e,this.headersString=n,this.size=l,this.getJson=i}return Object.defineProperty(t.prototype,"bodySize",{get:function(){return this.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.statusCode},enumerable:!1,configurable:!0}),t.prototype.headers=function(e){var n,l;if(e===void 0&&(e=[]),!this.headersString)return{};var i={},r=this.headersString.split(`\r
`);try{for(var o=H(r),a=o.next();!a.done;a=o.next()){var c=a.value,d=U(c.split(": "),2),s=d[0],u=d[1];s&&u&&(i[s]=u)}}catch(h){n={error:h}}finally{try{a&&!a.done&&(l=o.return)&&l.call(o)}finally{if(n)throw n.error}}return Fl(i,{allow:e})},t.prototype.json=function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=[]),W(this,void 0,void 0,function(){var l;return C(this,function(i){return e.length===0?[2,null]:(l=this.getJson(),l?(Fc(l,e,n),[2,l]):[2,null])})})},t})();function Di(t,e,n){if(!t)return null;try{var l=JSON.parse(t);return Fc(l,e,n),l}catch{return null}}var An;(function(t){t.REDACT="redact",t.REMOVE="remove"})(An||(An={}));var ro="[REDACTED]",Fl=function(t,e){var n,l,i=e.allow,r=i===void 0?[]:i,o=e.strategy,a=o===void 0?An.REMOVE:o,c=D([],U(_u),!1),d={},s=function(b){var m=b.toLowerCase();c.find(function(f){return f.toLowerCase()===m})?a===An.REDACT&&(d[b]=ro):r.find(function(f){return f.toLowerCase()===m})?d[b]=t[b]:a===An.REDACT&&(d[b]=ro)};try{for(var u=H(Object.keys(t)),h=u.next();!h.done;h=u.next()){var g=h.value;s(g)}}catch(b){n={error:b}}finally{try{h&&!h.done&&(l=u.return)&&l.call(u)}finally{if(n)throw n.error}}return d},rh=(function(){function t(e,n,l,i,r,o,a,c,d,s,u){a===void 0&&(a=0),this.type=e,this.method=n,this.timestamp=l,this.startTime=i,this.url=r,this.requestWrapper=o,this.status=a,this.duration=c,this.responseWrapper=d,this.error=s,this.endTime=u}return t.prototype.toSerializable=function(){var e,n,l,i,r={type:this.type,method:this.method,url:this.url,timestamp:this.timestamp,status:this.status,duration:this.duration,error:this.error,startTime:this.startTime,endTime:this.endTime,requestHeaders:(e=this.requestWrapper)===null||e===void 0?void 0:e.headers(D([],U(ml),!1)),requestBodySize:(n=this.requestWrapper)===null||n===void 0?void 0:n.bodySize,responseHeaders:(l=this.responseWrapper)===null||l===void 0?void 0:l.headers(D([],U(ml),!1)),responseBodySize:(i=this.responseWrapper)===null||i===void 0?void 0:i.bodySize};return Object.fromEntries(Object.entries(r).filter(function(o){var a=U(o,2);a[0];var c=a[1];return c!==void 0}))},t})();function oh(t){return typeof t=="object"&&t!==null&&"url"in t&&"method"in t}var ah=(function(){function t(e,n){n===void 0&&(n=Wt()),this.callback=e,this.id=n}return t})(),ch=(function(){function t(e){this.eventCallbacks=new Map,this.isObserving=!1,this.logger=e;var n=Fe();t.isSupported()&&(this.globalScope=n)}return t.isSupported=function(){var e=Fe();return!!e&&!!e.fetch},t.prototype.subscribe=function(e,n){var l,i,r,o,a,c,d,s,u,h;if(this.logger||(this.logger=n),this.eventCallbacks.set(e.id,e),!this.isObserving){var g=(r=(i=(l=this.globalScope)===null||l===void 0?void 0:l.XMLHttpRequest)===null||i===void 0?void 0:i.prototype)===null||r===void 0?void 0:r.open,b=(c=(a=(o=this.globalScope)===null||o===void 0?void 0:o.XMLHttpRequest)===null||a===void 0?void 0:a.prototype)===null||c===void 0?void 0:c.send,m=(u=(s=(d=this.globalScope)===null||d===void 0?void 0:d.XMLHttpRequest)===null||s===void 0?void 0:s.prototype)===null||u===void 0?void 0:u.setRequestHeader;g&&b&&m&&this.observeXhr(g,b,m);var f=(h=this.globalScope)===null||h===void 0?void 0:h.fetch;f&&this.observeFetch(f),this.isObserving=!0}},t.prototype.unsubscribe=function(e){this.eventCallbacks.delete(e.id)},t.prototype.triggerEventCallbacks=function(e){var n=this;this.eventCallbacks.forEach(function(l){var i;try{l.callback(e)}catch(r){(i=n.logger)===null||i===void 0||i.debug("an unexpected error occurred while triggering event callbacks",r)}})},t.prototype.handleNetworkRequestEvent=function(e,n,l,i,r,o,a){var c,d;if(!(o===void 0||a===void 0)){var s,u="GET";if(oh(n)?(s=n.url,u=n.method):s=(c=n==null?void 0:n.toString)===null||c===void 0?void 0:c.call(n),s)try{var h=new URL(s);s="".concat(h.protocol,"//").concat(h.host).concat(h.pathname).concat(h.search).concat(h.hash)}catch(A){(d=this.logger)===null||d===void 0||d.error("an unexpected error occurred while parsing the URL",A)}u=(l==null?void 0:l.method)||u;var g,b;i&&(g=i.status),r&&(b={name:r.name||"UnknownError",message:r.message||"An unknown error occurred"},g=0);var m=Math.floor(performance.now()-a),f=Math.floor(o+m),p=new rh(e,u,o,o,s,l,g,m,i,b,f);this.triggerEventCallbacks(p)}},t.prototype.getTimestamps=function(){var e,n;return{startTime:(e=Date.now)===null||e===void 0?void 0:e.call(Date),durationStart:(n=performance==null?void 0:performance.now)===null||n===void 0?void 0:n.call(performance)}},t.prototype.observeFetch=function(e){var n=this;!this.globalScope||!e||(this.globalScope.fetch=function(l,i){return W(n,void 0,void 0,function(){var r,o,a,c,d,s;return C(this,function(u){switch(u.label){case 0:try{r=this.getTimestamps()}catch(h){(d=this.logger)===null||d===void 0||d.debug("an unexpected error occurred while retrieving timestamps",h)}u.label=1;case 1:return u.trys.push([1,3,,4]),[4,e(l,i)];case 2:return o=u.sent(),[3,4];case 3:return c=u.sent(),a=c,[3,4];case 4:try{this.handleNetworkRequestEvent("fetch",l,i?new th(i):void 0,o?new lh(o):void 0,a,r==null?void 0:r.startTime,r==null?void 0:r.durationStart)}catch(h){(s=this.logger)===null||s===void 0||s.debug("an unexpected error occurred while handling fetch",h)}if(o)return[2,o];throw a}})})})},t.createXhrJsonParser=function(e,n){return function(){var l,i;try{if(e.responseType==="json"){if(!((l=n.globalScope)===null||l===void 0)&&l.structuredClone)return n.globalScope.structuredClone(e.response)}else if(["text",""].includes(e.responseType))return JSON.parse(e.responseText)}catch(r){return r instanceof Error&&r.name==="InvalidStateError"&&((i=n.logger)===null||i===void 0||i.error("unexpected error when retrieving responseText. responseType='".concat(e.responseType,"'"))),null}return null}},t.prototype.observeXhr=function(e,n,l){if(!(!this.globalScope||!e||!n)){var i=this.globalScope.XMLHttpRequest.prototype,r=this;i.open=function(){for(var o,a,c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];var s=this,u=U(c,2),h=u[0],g=u[1];try{s.$$AmplitudeAnalyticsEvent=N({method:h,url:(o=g==null?void 0:g.toString)===null||o===void 0?void 0:o.call(g),headers:{}},r.getTimestamps())}catch(b){(a=r.logger)===null||a===void 0||a.error("an unexpected error occurred while calling xhr open",b)}return e.apply(s,c)},i.send=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var c=this,d=c,s=t.createXhrJsonParser(c,r),u=o[0],h=d.$$AmplitudeAnalyticsEvent;return d.addEventListener("loadend",function(){var g;try{var b=d.getAllResponseHeaders(),m=d.getResponseHeader("content-length"),f=new ih(d.status,b,m?parseInt(m,10):void 0,s),p=d.$$AmplitudeAnalyticsEvent.headers,A=new nh(u,p);h.status=d.status,r.handleNetworkRequestEvent("xhr",{url:h.url,method:h.method},A,f,void 0,h.startTime,h.durationStart)}catch(X){(g=r.logger)===null||g===void 0||g.error("an unexpected error occurred while handling xhr send",X)}}),n.apply(d,o)},i.setRequestHeader=function(o,a){var c,d=this;try{d.$$AmplitudeAnalyticsEvent.headers[o]=a}catch(s){(c=r.logger)===null||c===void 0||c.error("an unexpected error occurred while calling xhr setRequestHeader",s)}l.apply(d,[o,a])}}},t})(),oo=new ch,dh=(function(){function t(){}return t.prototype.parse=function(){return W(this,void 0,void 0,function(){return C(this,function(e){return[2,N(N(N(N({},Ti),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},t.prototype.getUtmParam=function(){var e=fl(),n=e[Ku],l=e[Tu],i=e[Mu],r=e[Hu],o=e[Du],a=e[ju];return{utm_campaign:n,utm_content:l,utm_id:i,utm_medium:r,utm_source:o,utm_term:a}},t.prototype.getReferrer=function(){var e,n,l={referrer:void 0,referring_domain:void 0};try{l.referrer=document.referrer||void 0,l.referring_domain=(n=(e=l.referrer)===null||e===void 0?void 0:e.split("/")[2])!==null&&n!==void 0?n:void 0}catch{}return l},t.prototype.getClickIds=function(){var e,n=fl();return e={},e[Lr]=n[Lr],e[Kr]=n[Kr],e[Tr]=n[Tr],e[Mr]=n[Mr],e[Hr]=n[Hr],e[Dr]=n[Dr],e[jr]=n[jr],e[_r]=n[_r],e[Or]=n[Or],e[Pr]=n[Pr],e[$r]=n[$r],e},t})(),Fn=function(t,e){return typeof t=="boolean"?t:(t==null?void 0:t[e])!==!1},xc=function(t){return Fn(t,"attribution")},sh=function(t){return Fn(t,"fileDownloads")},uh=function(t){return Fn(t,"formInteractions")},wc=function(t){return Fn(t,"pageViews")},ao=function(t){return Fn(t,"sessions")},kc=function(t){return typeof t=="object"&&(t.networkTracking===!0||typeof t.networkTracking=="object")},zc=function(t){return typeof t=="boolean"?t:typeof t=="object"&&(t.elementInteractions===!0||typeof t.elementInteractions=="object")},gh=function(t){return typeof t=="object"&&t.webVitals===!0},Qc=function(t){return typeof t=="boolean"?t:typeof t=="object"&&(t.frustrationInteractions===!0||typeof t.frustrationInteractions=="object")},hh=function(t){if(zc(t.autocapture)&&typeof t.autocapture=="object"&&typeof t.autocapture.elementInteractions=="object")return t.autocapture.elementInteractions},bh=function(t){if(Qc(t.autocapture)&&typeof t.autocapture=="object"&&typeof t.autocapture.frustrationInteractions=="object")return t.autocapture.frustrationInteractions},Vh=function(t){var e;if(kc(t.autocapture)){var n=void 0;return typeof t.autocapture=="object"&&typeof t.autocapture.networkTracking=="object"?n=t.autocapture.networkTracking:t.networkTrackingOptions&&(n=t.networkTrackingOptions),N(N({},n),{captureRules:(e=n==null?void 0:n.captureRules)===null||e===void 0?void 0:e.map(function(l){var i;if(l.urls&&l.hosts){var r=JSON.stringify(l.hosts),o=JSON.stringify(l.urls);return(i=t.loggerProvider)===null||i===void 0||i.warn("Found network capture rule with both urls='".concat(o,"' and hosts='").concat(r,"' set. ")+"Definition of urls takes precedence over hosts, so ignoring hosts."),N(N({},l),{hosts:void 0})}return l})})}},mh=function(t){var e=function(){return!1},n=void 0,l,i=t.pageCounter,r=wc(t.defaultTracking);return r&&(e=void 0,l=void 0,t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.pageViews&&typeof t.defaultTracking.pageViews=="object"&&("trackOn"in t.defaultTracking.pageViews&&(e=t.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in t.defaultTracking.pageViews&&(n=t.defaultTracking.pageViews.trackHistoryChanges),"eventType"in t.defaultTracking.pageViews&&t.defaultTracking.pageViews.eventType&&(l=t.defaultTracking.pageViews.eventType))),{trackOn:e,trackHistoryChanges:n,eventType:l,pageCounter:i}},fh=function(t){return xc(t.defaultTracking)&&t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.attribution&&typeof t.defaultTracking.attribution=="object"?N({},t.defaultTracking.attribution):{}},jl=function(t,e){for(var n=0;n<e.length;n++){var l=e[n],i=l.name,r=l.args,o=l.resolve,a=t&&t[i];if(typeof a=="function"){var c=a.apply(t,r);typeof o=="function"&&o(c==null?void 0:c.promise)}}return t},_l=function(t){var e=t;return e&&e._q!==void 0},Lc="2.24.1",Ah="amplitude-ts",ph="Web",Zh="$remote",Gh=(function(){function t(){this.name="@amplitude/plugin-context-browser",this.type="before",this.library="".concat(Ah,"/").concat(Lc),typeof navigator<"u"&&(this.userAgent=navigator.userAgent)}return t.prototype.setup=function(e){return this.config=e,Promise.resolve(void 0)},t.prototype.execute=function(e){var n,l;return W(this,void 0,void 0,function(){var i,r,o,a;return C(this,function(c){return i=new Date().getTime(),r=(n=this.config.lastEventId)!==null&&n!==void 0?n:-1,o=(l=e.event_id)!==null&&l!==void 0?l:r+1,this.config.lastEventId=o,e.time||(this.config.lastEventTime=i),a=N(N(N(N(N(N(N(N({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:i},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:ph}),this.config.trackingOptions.language&&{language:xg()}),this.config.trackingOptions.ipAddress&&{ip:Zh}),{insert_id:Wt(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),e),{event_id:o,library:this.library,user_agent:this.userAgent}),[2,a]})})},t})(),jn=1e3,Kc=(function(t){Me(e,t);function e(n){var l=this,i,r,o;try{o=(i=Fe())===null||i===void 0?void 0:i.localStorage}catch(a){(r=n==null?void 0:n.loggerProvider)===null||r===void 0||r.debug("Failed to access localStorage. error=".concat(JSON.stringify(a))),o=void 0}return l=t.call(this,o)||this,l.loggerProvider=n==null?void 0:n.loggerProvider,l}return e.prototype.set=function(n,l){var i;return W(this,void 0,void 0,function(){var r;return C(this,function(o){switch(o.label){case 0:return Array.isArray(l)&&l.length>jn?(r=l.length-jn,[4,t.prototype.set.call(this,n,l.slice(0,jn))]):[3,2];case 1:return o.sent(),(i=this.loggerProvider)===null||i===void 0||i.error("Failed to save ".concat(r," events because the queue length exceeded ").concat(jn,".")),[3,4];case 2:return[4,t.prototype.set.call(this,n,l)];case 3:o.sent(),o.label=4;case 4:return[2]}})})},e})(Bc),Xh=(function(t){Me(e,t);function e(){var n;return t.call(this,(n=Fe())===null||n===void 0?void 0:n.sessionStorage)||this}return e})(Bc),Ih=(function(t){Me(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={done:4},n}return e.prototype.send=function(n,l){return W(this,void 0,void 0,function(){var i=this;return C(this,function(r){return[2,new Promise(function(o,a){typeof XMLHttpRequest>"u"&&a(new Error("XHRTransport is not supported."));var c=new XMLHttpRequest;c.open("POST",n,!0),c.onreadystatechange=function(){if(c.readyState===i.state.done){var d=c.responseText;try{o(i.buildResponse(JSON.parse(d)))}catch{o(i.buildResponse({code:c.status}))}}},c.setRequestHeader("Content-Type","application/json"),c.setRequestHeader("Accept","*/*"),c.send(JSON.stringify(l))})]})})},e})(Hi),Rh=(function(t){Me(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(n,l){return W(this,void 0,void 0,function(){var i=this;return C(this,function(r){return[2,new Promise(function(o,a){var c=Fe();if(!(c!=null&&c.navigator.sendBeacon))throw new Error("SendBeaconTransport is not supported");try{var d=JSON.stringify(l),s=c.navigator.sendBeacon(n,JSON.stringify(l));return o(s?i.buildResponse({code:200,events_ingested:l.events.length,payload_size_bytes:d.length,server_upload_time:Date.now()}):i.buildResponse({code:500}))}catch(u){a(u)}})]})})},e})(Hi),Eh=function(t,e,n){return n===void 0&&(n=!0),W(void 0,void 0,void 0,function(){var l,i,r,o,a,c,d,s,u;return C(this,function(h){switch(h.label){case 0:return l=Jg(t),[4,e.getRaw(l)];case 1:return i=h.sent(),i?n?[4,e.remove(l)]:[3,3]:[2,{optOut:!1}];case 2:h.sent(),h.label=3;case 3:return r=U(i.split("."),6),o=r[0],a=r[1],c=r[2],d=r[3],s=r[4],u=r[5],[2,{deviceId:o,userId:yh(a),sessionId:Ol(d),lastEventId:Ol(u),lastEventTime:Ol(s),optOut:!!c}]}})})},Ol=function(t){var e=parseInt(t,32);if(!isNaN(e))return e},yh=function(t){if(!(!atob||!escape||!t))try{return decodeURIComponent(escape(atob(t)))}catch{return}},st="[Amplitude]",co="".concat(st," Form Started"),vh="".concat(st," Form Submitted"),Sh="".concat(st," File Downloaded"),so="session_start",uo="session_end",Ch="".concat(st," File Extension"),Wh="".concat(st," File Name"),Bh="".concat(st," Link ID"),Nh="".concat(st," Link Text"),Fh="".concat(st," Link URL"),Pl="".concat(st," Form ID"),$l="".concat(st," Form Name"),ql="".concat(st," Form Destination"),Al="cookie",Yh="US",Uh=(function(t){Me(e,t);function e(n,l,i,r,o,a,c,d,s,u,h,g,b,m,f,p,A,X,y,I,S,G,B,v,J,w,L,$,q,Ae,pe,We,Ue,ye,Be){i===void 0&&(i=new Mi),r===void 0&&(r={domain:"",expiration:365,sameSite:"Lax",secure:!1,upgrade:!0}),d===void 0&&(d=1e3),s===void 0&&(s=5),u===void 0&&(u=30),h===void 0&&(h=Al),p===void 0&&(p=new vc),A===void 0&&(A=et.Warn),y===void 0&&(y=!1),I===void 0&&(I=!1),B===void 0&&(B=""),v===void 0&&(v=Yh),w===void 0&&(w=1800*1e3),L===void 0&&(L=new Kc({loggerProvider:p})),$===void 0&&($={ipAddress:!0,language:!0,platform:!0}),q===void 0&&(q="fetch"),Ae===void 0&&(Ae=!1),pe===void 0&&(pe=!0);var x=t.call(this,{apiKey:n,storageProvider:L,transportProvider:Tc(q)})||this;return x.apiKey=n,x.appVersion=l,x.cookieOptions=r,x.defaultTracking=o,x.autocapture=a,x.flushIntervalMillis=d,x.flushMaxRetries=s,x.flushQueueSize=u,x.identityStorage=h,x.ingestionMetadata=g,x.instanceName=b,x.loggerProvider=p,x.logLevel=A,x.minIdLength=X,x.offline=y,x.partnerId=S,x.plan=G,x.serverUrl=B,x.serverZone=v,x.sessionTimeout=w,x.storageProvider=L,x.trackingOptions=$,x.transport=q,x.useBatch=Ae,x.fetchRemoteConfig=pe,x.networkTrackingOptions=Be,x.version=Lc,x._optOut=!1,x._cookieStorage=i,x.deviceId=c,x.lastEventId=m,x.lastEventTime=f,x.optOut=I,x.sessionId=J,x.pageCounter=Ue,x.userId=We,x.debugLogsEnabled=ye,x.loggerProvider.enable(ye?et.Debug:x.logLevel),x.networkTrackingOptions=Be,x}return Object.defineProperty(e.prototype,"cookieStorage",{get:function(){return this._cookieStorage},set:function(n){this._cookieStorage!==n&&(this._cookieStorage=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceId",{get:function(){return this._deviceId},set:function(n){this._deviceId!==n&&(this._deviceId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},set:function(n){this._userId!==n&&(this._userId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this._sessionId},set:function(n){this._sessionId!==n&&(this._sessionId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(n){this._optOut!==n&&(this._optOut=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(n){this._lastEventTime!==n&&(this._lastEventTime=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventId",{get:function(){return this._lastEventId},set:function(n){this._lastEventId!==n&&(this._lastEventId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageCounter",{get:function(){return this._pageCounter},set:function(n){this._pageCounter!==n&&(this._pageCounter=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debugLogsEnabled",{set:function(n){this._debugLogsEnabled!==n&&(this._debugLogsEnabled=n,this.updateStorage())},enumerable:!1,configurable:!0}),e.prototype.updateStorage=function(){var n={deviceId:this._deviceId,userId:this._userId,sessionId:this._sessionId,optOut:this._optOut,lastEventTime:this._lastEventTime,lastEventId:this._lastEventId,pageCounter:this._pageCounter,debugLogsEnabled:this._debugLogsEnabled};this.cookieStorage.set(Wc(this.apiKey),n)},e})(Zg),Jh=function(t,e,n){return e===void 0&&(e={}),W(void 0,void 0,void 0,function(){var l,i,r,o,a,c,d,s,u,h,g,b,m,f,p,A,X,y,I,S,G,B,v,J,w,L,$,q,Ae,pe,We,Ue,ye,Be,x,Ve,ee,De,$e,me,le,Le,ot,je,cn;return C(this,function(ut){switch(ut.label){case 0:return l=e.identityStorage||Al,G={},l===Al?[3,1]:(r="",[3,5]);case 1:return(v=(B=e.cookieOptions)===null||B===void 0?void 0:B.domain)!==null&&v!==void 0?(o=v,[3,4]):[3,2];case 2:return[4,wh()];case 3:o=ut.sent(),ut.label=4;case 4:r=o,ut.label=5;case 5:return i=N.apply(void 0,[(G.domain=r,G.expiration=365,G.sameSite="Lax",G.secure=!1,G.upgrade=!0,G),e.cookieOptions]),a=xh(e.identityStorage,i),[4,Eh(t,a,(w=(J=e.cookieOptions)===null||J===void 0?void 0:J.upgrade)!==null&&w!==void 0?w:!0)];case 6:return c=ut.sent(),[4,a.get(Wc(t))];case 7:return d=ut.sent(),s=fl(),u=s.ampTimestamp?Number(s.ampTimestamp):void 0,h=u?Date.now()<u:!0,g=(pe=(Ae=(q=(L=e.deviceId)!==null&&L!==void 0?L:h?($=s.ampDeviceId)!==null&&$!==void 0?$:s.deviceId:void 0)!==null&&q!==void 0?q:d==null?void 0:d.deviceId)!==null&&Ae!==void 0?Ae:c.deviceId)!==null&&pe!==void 0?pe:Wt(),b=(We=d==null?void 0:d.lastEventId)!==null&&We!==void 0?We:c.lastEventId,m=(Ue=d==null?void 0:d.lastEventTime)!==null&&Ue!==void 0?Ue:c.lastEventTime,f=(Be=(ye=e.optOut)!==null&&ye!==void 0?ye:d==null?void 0:d.optOut)!==null&&Be!==void 0?Be:c.optOut,p=(x=d==null?void 0:d.sessionId)!==null&&x!==void 0?x:c.sessionId,A=(ee=(Ve=e.userId)!==null&&Ve!==void 0?Ve:d==null?void 0:d.userId)!==null&&ee!==void 0?ee:c.userId,n.previousSessionDeviceId=(De=d==null?void 0:d.deviceId)!==null&&De!==void 0?De:c.deviceId,n.previousSessionUserId=($e=d==null?void 0:d.userId)!==null&&$e!==void 0?$e:c.userId,X={ipAddress:(le=(me=e.trackingOptions)===null||me===void 0?void 0:me.ipAddress)!==null&&le!==void 0?le:!0,language:(ot=(Le=e.trackingOptions)===null||Le===void 0?void 0:Le.language)!==null&&ot!==void 0?ot:!0,platform:(cn=(je=e.trackingOptions)===null||je===void 0?void 0:je.platform)!==null&&cn!==void 0?cn:!0},y=d==null?void 0:d.pageCounter,I=d==null?void 0:d.debugLogsEnabled,e.autocapture!==void 0&&(e.defaultTracking=e.autocapture),S=new Uh(t,e.appVersion,a,i,e.defaultTracking,e.autocapture,g,e.flushIntervalMillis,e.flushMaxRetries,e.flushQueueSize,l,e.ingestionMetadata,e.instanceName,b,m,e.loggerProvider,e.logLevel,e.minIdLength,e.offline,f,e.partnerId,e.plan,e.serverUrl,e.serverZone,p,e.sessionTimeout,e.storageProvider,X,e.transport,e.useBatch,e.fetchRemoteConfig,A,y,I,e.networkTrackingOptions),[4,S.storageProvider.isEnabled()];case 8:return ut.sent()||(S.loggerProvider.warn("Storage provider ".concat(S.storageProvider.constructor.name," is not enabled. Falling back to MemoryStorage.")),S.storageProvider=new Mi),[2,S]}})})},xh=function(t,e){switch(t===void 0&&(t=Al),e===void 0&&(e={}),t){case"localStorage":return new Kc;case"sessionStorage":return new Xh;case"none":return new Mi;case"cookie":default:return new pi(N(N({},e),{expirationDays:e.expiration}))}},Tc=function(t){return t==="xhr"?new Ih:t==="beacon"?new Rh:new Kg},wh=function(t){return W(void 0,void 0,void 0,function(){var e,n,l,i,r,r,o,a,c,d;return C(this,function(s){switch(s.label){case 0:return[4,new pi().isEnabled()];case 1:if(!s.sent()||typeof location>"u"||!location.hostname)return[2,""];for(e=location.hostname,n=e.split("."),l=[],i="AMP_TLDTEST",r=n.length-2;r>=0;--r)l.push(n.slice(r).join("."));r=0,s.label=2;case 2:return r<l.length?(o=l[r],a={domain:"."+o},c=new pi(a),[4,c.set(i,1)]):[3,7];case 3:return s.sent(),[4,c.get(i)];case 4:return d=s.sent(),d?[4,c.remove(i)]:[3,6];case 5:return s.sent(),[2,"."+o];case 6:return r++,[3,2];case 7:return[2,""]}})})},Mc=function(){var t="ampIntegrationContext";if(typeof globalThis<"u"&&typeof globalThis[t]<"u")return globalThis[t];if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof global<"u")return global},go=function(){var t,e=Mc();if(!(!((t=e==null?void 0:e.location)===null||t===void 0)&&t.search))return{};var n=e.location.search.substring(1).split("&").filter(Boolean),l=n.reduce(function(i,r){var o=r.split("=",2),a=ho(o[0]),c=ho(o[1]);return c&&(i[a]=c),i},{});return l},ho=function(t){t===void 0&&(t="");try{return decodeURIComponent(t)}catch{return""}},kh="utm_campaign",zh="utm_content",Qh="utm_id",Lh="utm_medium",Kh="utm_source",Th="utm_term",bo="dclid",Vo="fbclid",mo="gbraid",fo="gclid",Ao="ko_click_id",po="li_fat_id",Zo="msclkid",Go="rdt_cid",Xo="ttclid",Io="twclid",Ro="wbraid",Hc={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rdt_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},Mh=(function(){function t(){}return t.prototype.parse=function(){return W(this,void 0,void 0,function(){return C(this,function(e){return[2,N(N(N(N({},Hc),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},t.prototype.getUtmParam=function(){var e=go(),n=e[kh],l=e[zh],i=e[Qh],r=e[Lh],o=e[Kh],a=e[Th];return{utm_campaign:n,utm_content:l,utm_id:i,utm_medium:r,utm_source:o,utm_term:a}},t.prototype.getReferrer=function(){var e,n,l={referrer:void 0,referring_domain:void 0};try{l.referrer=document.referrer||void 0,l.referring_domain=(n=(e=l.referrer)===null||e===void 0?void 0:e.split("/")[2])!==null&&n!==void 0?n:void 0}catch{}return l},t.prototype.getClickIds=function(){var e,n=go();return e={},e[bo]=n[bo],e[Vo]=n[Vo],e[mo]=n[mo],e[fo]=n[fo],e[Ao]=n[Ao],e[po]=n[po],e[Zo]=n[Zo],e[Go]=n[Go],e[Xo]=n[Xo],e[Io]=n[Io],e[Ro]=n[Ro],e},t})(),pl;(function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"})(pl||(pl={}));var Eo;(function(t){t.REVENUE_PRODUCT_ID="$productId",t.REVENUE_QUANTITY="$quantity",t.REVENUE_PRICE="$price",t.REVENUE_TYPE="$revenueType",t.REVENUE_CURRENCY="$currency",t.REVENUE="$revenue"})(Eo||(Eo={}));var yo;(function(t){t.IDENTIFY="$identify",t.GROUP_IDENTIFY="$groupidentify",t.REVENUE="revenue_amount"})(yo||(yo={}));var Hh=function(t){var e={};for(var n in t){var l=t[n];l&&(e[n]=l)}return e},Dh="[Amplitude] Page Viewed",jh=function(t){t===void 0&&(t={});var e,n=Mc(),l=void 0,i=!1,r,o=t.trackOn,a=t.trackHistoryChanges,c=t.eventType,d=c===void 0?Dh:c,s=function(p){var A=p;try{A=decodeURI(p)}catch(X){l==null||l.error("Malformed URI sequence: ",X)}return A},u=function(){return W(void 0,void 0,void 0,function(){var p,A,X;return C(this,function(y){switch(y.label){case 0:return p=s(typeof location<"u"&&location.href||""),X={event_type:d},A=[{}],[4,_h()];case 1:return[2,(X.event_properties=N.apply(void 0,[N.apply(void 0,A.concat([y.sent()])),{"[Amplitude] Page Domain":typeof location<"u"&&location.hostname||"","[Amplitude] Page Location":p,"[Amplitude] Page Path":typeof location<"u"&&s(location.pathname)||"","[Amplitude] Page Title":typeof document<"u"&&document.title||"","[Amplitude] Page URL":p.split("?")[0]}]),X)]}})})},h=function(){return typeof o>"u"||typeof o=="function"&&o()},g=typeof location<"u"?location.href:null,b=function(){return W(void 0,void 0,void 0,function(){var p,A,X,y;return C(this,function(I){switch(I.label){case 0:return p=location.href,A=Ph(a,p,g||"")&&h(),g=p,A?(l==null||l.log("Tracking page view event"),e!=null?[3,1]:[3,3]):[3,4];case 1:return y=(X=e).track,[4,u()];case 2:y.apply(X,[I.sent()]),I.label=3;case 3:I.label=4;case 4:return[2]}})})},m=function(){b()},f={name:"@amplitude/plugin-page-view-tracking-browser",type:"enrichment",setup:function(p,A){return W(void 0,void 0,void 0,function(){var X,y;return C(this,function(I){switch(I.label){case 0:return e=A,r=p,l=p.loggerProvider,l.log("Installing @amplitude/plugin-page-view-tracking-browser"),i=!0,n&&(n.addEventListener("popstate",m),n.history.pushState=new Proxy(n.history.pushState,{apply:function(S,G,B){var v=U(B,3),J=v[0],w=v[1],L=v[2];S.apply(G,[J,w,L]),i&&b()}})),h()?(l.log("Tracking page view event"),y=(X=e).track,[4,u()]):[3,2];case 1:y.apply(X,[I.sent()]),I.label=2;case 2:return[2]}})})},execute:function(p){return W(void 0,void 0,void 0,function(){var A;return C(this,function(X){switch(X.label){case 0:return o==="attribution"&&Oh(p)?(l==null||l.log("Enriching campaign event to page view event with campaign parameters"),[4,u()]):[3,2];case 1:A=X.sent(),p.event_type=A.event_type,p.event_properties=N(N({},p.event_properties),A.event_properties),X.label=2;case 2:return r&&p.event_type===d&&(r.pageCounter=r.pageCounter?r.pageCounter+1:1,p.event_properties=N(N({},p.event_properties),{"[Amplitude] Page Counter":r.pageCounter})),[2,p]}})})},teardown:function(){return W(void 0,void 0,void 0,function(){return C(this,function(p){return n&&(n.removeEventListener("popstate",m),i=!1),[2]})})}};return f},_h=function(){return W(void 0,void 0,void 0,function(){var t;return C(this,function(e){switch(e.label){case 0:return t=Hh,[4,new Mh().parse()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},Oh=function(t){if(t.event_type==="$identify"&&t.user_properties){var e=t.user_properties,n=e[pl.SET]||{},l=e[pl.UNSET]||{},i=D(D([],U(Object.keys(n)),!1),U(Object.keys(l)),!1);return Object.keys(Hc).every(function(r){return i.includes(r)})}return!1},Ph=function(t,e,n){switch(t){case"pathOnly":{if(n=="")return!0;var l=new URL(e),i=new URL(n),r=l.origin+l.pathname,o=i.origin+i.pathname;return r!==o}default:return e!==n}},$h=function(){var t,e=[],n=function(d,s,u){d.addEventListener(s,u),e.push({element:d,type:s,handler:u})},l=function(){e.forEach(function(d){var s=d.element,u=d.type,h=d.handler;s==null||s.removeEventListener(u,h)}),e=[]},i="@amplitude/plugin-form-interaction-tracking-browser",r="enrichment",o=function(d,s){return W(void 0,void 0,void 0,function(){var u,h;return C(this,function(g){return u=function(){if(!s){d.loggerProvider.warn("Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked.");return}if(!(typeof document>"u")){var b=function(f){var p=!1;n(f,"change",function(){var A,X=vo(f);p||s.track(co,(A={},A[Pl]=Kt(f.id),A[$l]=Kt(f.name),A[ql]=X,A)),p=!0}),n(f,"submit",function(){var A,X,y=vo(f);p||s.track(co,(A={},A[Pl]=Kt(f.id),A[$l]=Kt(f.name),A[ql]=y,A)),s.track(vh,(X={},X[Pl]=Kt(f.id),X[$l]=Kt(f.name),X[ql]=y,X)),p=!1})},m=Array.from(document.getElementsByTagName("form"));m.forEach(b),typeof MutationObserver<"u"&&(t=new MutationObserver(function(f){f.forEach(function(p){p.addedNodes.forEach(function(A){A.nodeName==="FORM"&&b(A),"querySelectorAll"in A&&typeof A.querySelectorAll=="function"&&Array.from(A.querySelectorAll("form")).map(b)})})}),t.observe(document.body,{subtree:!0,childList:!0}))}},document.readyState==="complete"?u():(h=Fe(),h?h.addEventListener("load",u):d.loggerProvider.debug("Form interaction tracking is not installed because global is undefined.")),[2]})})},a=function(d){return W(void 0,void 0,void 0,function(){return C(this,function(s){return[2,d]})})},c=function(){return W(void 0,void 0,void 0,function(){return C(this,function(d){return t==null||t.disconnect(),l(),[2]})})};return{name:i,type:r,setup:o,execute:a,teardown:c}},Kt=function(t){if(typeof t=="string")return t},vo=function(t){var e=t.getAttribute("action");try{e=new URL(encodeURI(e??""),window.location.href).href}catch{}return e},qh=function(){var t,e=[],n=function(d,s,u){d.addEventListener(s,u),e.push({element:d,type:s,handler:u})},l=function(){e.forEach(function(d){var s=d.element,u=d.type,h=d.handler;s==null||s.removeEventListener(u,h)}),e=[]},i="@amplitude/plugin-file-download-tracking-browser",r="enrichment",o=function(d,s){return W(void 0,void 0,void 0,function(){var u,h;return C(this,function(g){return u=function(){if(!s){d.loggerProvider.warn("File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked.");return}if(!(typeof document>"u")){var b=function(p){var A;try{A=new URL(p.href,window.location.href)}catch{return}var X=m.exec(A.href),y=X==null?void 0:X[1];y&&n(p,"click",function(){var I;y&&s.track(Sh,(I={},I[Ch]=y,I[Wh]=A.pathname,I[Bh]=p.id,I[Nh]=p.text,I[Fh]=p.href,I))})},m=/\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)(\?.+)?$/,f=Array.from(document.getElementsByTagName("a"));f.forEach(b),typeof MutationObserver<"u"&&(t=new MutationObserver(function(p){p.forEach(function(A){A.addedNodes.forEach(function(X){X.nodeName==="A"&&b(X),"querySelectorAll"in X&&typeof X.querySelectorAll=="function"&&Array.from(X.querySelectorAll("a")).map(b)})})}),t.observe(document.body,{subtree:!0,childList:!0}))}},document.readyState==="complete"?u():(h=Fe(),h?h.addEventListener("load",u):d.loggerProvider.debug("File download tracking is not installed because global is undefined.")),[2]})})},a=function(d){return W(void 0,void 0,void 0,function(){return C(this,function(s){return[2,d]})})},c=function(){return W(void 0,void 0,void 0,function(){return C(this,function(d){return t==null||t.disconnect(),l(),[2]})})};return{name:i,type:r,setup:o,execute:a,teardown:c}},So=!1,eb=function(t){if(!(So||t.defaultTracking!==void 0)){var e=`\`options.defaultTracking\` is set to undefined. This implicitly configures your Amplitude instance to track Page Views, Sessions, File Downloads, and Form Interactions. You can suppress this warning by explicitly setting a value to \`options.defaultTracking\`. The value must either be a boolean, to enable and disable all default events, or an object, for advanced configuration. For example:

amplitude.init(<YOUR_API_KEY>, {
  defaultTracking: true,
});

Visit https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events for more details.`;t.loggerProvider.warn(e),So=!0}},tb=function(){var t="@amplitude/plugin-network-checker-browser",e="before",n=Fe(),l=[],i=function(c,d){n!=null&&n.addEventListener&&(n==null||n.addEventListener(c,d),l.push({type:c,handler:d}))},r=function(){l.forEach(function(c){var d=c.type,s=c.handler;n==null||n.removeEventListener(d,s)}),l=[]},o=function(c,d){return W(void 0,void 0,void 0,function(){return C(this,function(s){return typeof navigator>"u"?(c.loggerProvider.debug("Network connectivity checker plugin is disabled because navigator is not available."),c.offline=!1,[2]):(c.offline=!navigator.onLine,i("online",function(){c.loggerProvider.debug("Network connectivity changed to online."),c.offline=!1,setTimeout(function(){d.flush()},c.flushIntervalMillis)}),i("offline",function(){c.loggerProvider.debug("Network connectivity changed to offline."),c.offline=!0}),[2])})})},a=function(){return W(void 0,void 0,void 0,function(){return C(this,function(c){return r(),[2]})})};return{name:t,type:e,setup:o,teardown:a}};function Dc(t){var e,n,l,i,r,o,a,c,d,s;if(!(typeof t!="object"||t===null)&&!Array.isArray(t)){var u=Object.keys(t);try{for(var h=H(u),g=h.next();!g.done;g=h.next()){var b=g.value;try{var m=t[b];typeof(m==null?void 0:m.enabled)=="boolean"&&(m.enabled?(delete m.enabled,Object.keys(m).length===0&&(t[b]=!0)):t[b]=!1),Dc(m)}catch{}}}catch(v){e={error:v}}finally{try{g&&!g.done&&(n=h.return)&&n.call(h)}finally{if(e)throw e.error}}try{if(!((d=(c=(a=t.autocapture)===null||a===void 0?void 0:a.networkTracking)===null||c===void 0?void 0:c.captureRules)===null||d===void 0)&&d.length)try{for(var f=H(t.autocapture.networkTracking.captureRules),p=f.next();!p.done;p=f.next()){var A=p.value;try{for(var X=(r=void 0,H(["responseHeaders","requestHeaders"])),y=X.next();!y.done;y=X.next()){var I=y.value,S=(s=A[I])!==null&&s!==void 0?s:{},G=S.captureSafeHeaders,B=S.allowlist;if(!(!G&&!B)){if(B!==void 0&&!Array.isArray(B)){delete A[I];continue}A[I]=D(D([],U(G?ml:[]),!1),U(B??[]),!1)}}}catch(v){r={error:v}}finally{try{y&&!y.done&&(o=X.return)&&o.call(X)}finally{if(r)throw r.error}}}}catch(v){l={error:v}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(l)throw l.error}}}catch{}}}function Co(t,e,n){var l,i,r=[];try{for(var o=H(e??[]),a=o.next();!a.done;a=o.next()){var c=a.value;try{r.push(new RegExp(c))}catch(d){n.loggerProvider.warn("Invalid regex pattern: ".concat(c),d)}}}catch(d){l={error:d}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(l)throw l.error}}return t.concat(r)}function nb(t,e){var n,l,i,r,o,a,c;if(t){Dc(t);try{e.loggerProvider.debug("Update browser config with remote configuration:",JSON.stringify(t));var d=t;if(d&&"autocapture"in d){if(typeof d.autocapture=="boolean"&&(e.autocapture=d.autocapture),typeof d.autocapture=="object"&&d.autocapture!==null){var s=N({},d.autocapture);if(e.autocapture===void 0&&(e.autocapture=d.autocapture),typeof d.autocapture.elementInteractions=="object"&&d.autocapture.elementInteractions!==null&&(!((i=d.autocapture.elementInteractions.pageUrlAllowlistRegex)===null||i===void 0)&&i.length)){s.elementInteractions=N({},d.autocapture.elementInteractions);var u=s.elementInteractions,h=(r=u.pageUrlAllowlist)!==null&&r!==void 0?r:[],g=d.autocapture.elementInteractions.pageUrlAllowlistRegex;u.pageUrlAllowlist=Co(h,g,e),delete u.pageUrlAllowlistRegex}if(typeof d.autocapture.networkTracking=="object"&&d.autocapture.networkTracking!==null&&(!((o=d.autocapture.networkTracking.captureRules)===null||o===void 0)&&o.length)){s.networkTracking=N({},d.autocapture.networkTracking);var b=s.networkTracking,m=(a=b.captureRules)!==null&&a!==void 0?a:[];try{for(var f=H(m),p=f.next();!p.done;p=f.next()){var A=p.value;A.urls=Co((c=A.urls)!==null&&c!==void 0?c:[],A.urlsRegex,e),delete A.urlsRegex}}catch(X){n={error:X}}finally{try{p&&!p.done&&(l=f.return)&&l.call(f)}finally{if(n)throw n.error}}}typeof e.autocapture=="boolean"&&(e.autocapture=N({attribution:e.autocapture,fileDownloads:e.autocapture,formInteractions:e.autocapture,pageViews:e.autocapture,sessions:e.autocapture,elementInteractions:e.autocapture,webVitals:e.autocapture,frustrationInteractions:e.autocapture},s)),typeof e.autocapture=="object"&&(e.autocapture=N(N({},e.autocapture),s))}e.defaultTracking=e.autocapture}e.loggerProvider.debug("Browser config after remote config update:",JSON.stringify(e))}catch(X){e.loggerProvider.error("Failed to apply remote configuration because of error: ",X)}}}var Zl;(function(t){t.US="US",t.EU="EU",t.STAGING="STAGING"})(Zl||(Zl={}));var xe;(function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.PayloadTooLarge="payload_too_large",t.Invalid="invalid",t.Failed="failed",t.Timeout="Timeout",t.SystemError="SystemError"})(xe||(xe={}));var lb=(function(){function t(){}return t.prototype.send=function(e,n){return Promise.resolve(null)},t.prototype.buildResponse=function(e){var n,l,i,r,o,a,c,d,s,u,h,g,b,m,f,p,A,X,y,I,S,G;if(typeof e!="object")return null;var B=e.code||0,v=this.buildStatus(B);switch(v){case xe.Success:return{status:v,statusCode:B,body:{eventsIngested:(n=e.events_ingested)!==null&&n!==void 0?n:0,payloadSizeBytes:(l=e.payload_size_bytes)!==null&&l!==void 0?l:0,serverUploadTime:(i=e.server_upload_time)!==null&&i!==void 0?i:0}};case xe.Invalid:return{status:v,statusCode:B,body:{error:(r=e.error)!==null&&r!==void 0?r:"",missingField:(o=e.missing_field)!==null&&o!==void 0?o:"",eventsWithInvalidFields:(a=e.events_with_invalid_fields)!==null&&a!==void 0?a:{},eventsWithMissingFields:(c=e.events_with_missing_fields)!==null&&c!==void 0?c:{},eventsWithInvalidIdLengths:(d=e.events_with_invalid_id_lengths)!==null&&d!==void 0?d:{},epsThreshold:(s=e.eps_threshold)!==null&&s!==void 0?s:0,exceededDailyQuotaDevices:(u=e.exceeded_daily_quota_devices)!==null&&u!==void 0?u:{},silencedDevices:(h=e.silenced_devices)!==null&&h!==void 0?h:[],silencedEvents:(g=e.silenced_events)!==null&&g!==void 0?g:[],throttledDevices:(b=e.throttled_devices)!==null&&b!==void 0?b:{},throttledEvents:(m=e.throttled_events)!==null&&m!==void 0?m:[]}};case xe.PayloadTooLarge:return{status:v,statusCode:B,body:{error:(f=e.error)!==null&&f!==void 0?f:""}};case xe.RateLimit:return{status:v,statusCode:B,body:{error:(p=e.error)!==null&&p!==void 0?p:"",epsThreshold:(A=e.eps_threshold)!==null&&A!==void 0?A:0,throttledDevices:(X=e.throttled_devices)!==null&&X!==void 0?X:{},throttledUsers:(y=e.throttled_users)!==null&&y!==void 0?y:{},exceededDailyQuotaDevices:(I=e.exceeded_daily_quota_devices)!==null&&I!==void 0?I:{},exceededDailyQuotaUsers:(S=e.exceeded_daily_quota_users)!==null&&S!==void 0?S:{},throttledEvents:(G=e.throttled_events)!==null&&G!==void 0?G:[]}};case xe.Timeout:default:return{status:v,statusCode:B}}},t.prototype.buildStatus=function(e){return e>=200&&e<300?xe.Success:e===429?xe.RateLimit:e===413?xe.PayloadTooLarge:e===408?xe.Timeout:e>=400&&e<500?xe.Invalid:e>=500?xe.Failed:xe.Unknown},t})(),ib="Network error occurred, remote config fetch failed",rb="Remote config successfully fetched",ob="Remote config fetch rejected due to exceeded retry count",Wo="Remote config fetch rejected due to timeout after 5 seconds",Bo="Unexpected error occurred",ab="https://sr-client-cfg.amplitude.com/config",cb="https://sr-client-cfg.stag2.amplitude.com/config",db="https://sr-client-cfg.eu.amplitude.com/config",sb=(function(){function t(e){var n=e.localConfig,l=e.configKeys,i=this;this.retryTimeout=1e3,this.attempts=0,this.sessionTargetingMatch=!1,this.metrics={},this.getRemoteNamespaceConfig=function(r,o){return W(i,void 0,void 0,function(){var a,c,d;return C(this,function(s){switch(s.label){case 0:return a=Date.now(),[4,this.fetchWithTimeout(o)];case 1:return c=s.sent(),c&&(d=c.configs&&c.configs[r],d)?(this.metrics.fetchTimeAPISuccess=Date.now()-a,[2,d]):(this.metrics.fetchTimeAPIFail=Date.now()-a,[2,void 0])}})})},this.getRemoteConfig=function(r,o,a){return W(i,void 0,void 0,function(){var c;return C(this,function(d){switch(d.label){case 0:return[4,this.getRemoteNamespaceConfig(r,a)];case 1:return c=d.sent(),[2,c==null?void 0:c[o]]}})})},this.fetchWithTimeout=function(r){return W(i,void 0,void 0,function(){var o,a,c;return C(this,function(d){switch(d.label){case 0:return o=new AbortController,a=setTimeout(function(){return o.abort()},5e3),[4,this.fetchRemoteConfig(o.signal,r)];case 1:return c=d.sent(),clearTimeout(a),[2,c]}})})},this.fetchRemoteConfig=function(r,o){return W(i,void 0,void 0,function(){var a,c,d,s,u,h,g,b,m,f,p,A,X;return C(this,function(y){switch(y.label){case 0:if(o===this.lastFetchedSessionId&&this.attempts>=this.localConfig.flushMaxRetries)return[2,this.completeRequest({err:ob})];if(r.aborted)return[2,this.completeRequest({err:Wo})];o!==this.lastFetchedSessionId&&(this.lastFetchedSessionId=o,this.attempts=0),y.label=1;case 1:y.trys.push([1,3,,4]),a=new URLSearchParams({api_key:this.localConfig.apiKey});try{for(c=H(this.configKeys),d=c.next();!d.done;d=c.next())s=d.value,a.append("config_keys",s)}catch(I){p={error:I}}finally{try{d&&!d.done&&(A=c.return)&&A.call(c)}finally{if(p)throw p.error}}return o&&a.set("session_id",String(o)),u={headers:{Accept:"*/*"},method:"GET"},h="".concat(this.getServerUrl(),"?").concat(a.toString()),this.attempts+=1,[4,fetch(h,N(N({},u),{signal:r}))];case 2:if(g=y.sent(),g===null)return[2,this.completeRequest({err:Bo})];switch(b=new lb().buildStatus(g.status),b){case xe.Success:return this.attempts=0,[2,this.parseAndStoreConfig(g)];case xe.Failed:return[2,this.retryFetch(r,o)];default:return[2,this.completeRequest({err:ib})]}case 3:return m=y.sent(),f=m,r.aborted?[2,this.completeRequest({err:Wo})]:[2,this.completeRequest({err:(X=f.message)!==null&&X!==void 0?X:Bo})];case 4:return[2]}})})},this.retryFetch=function(r,o){return W(i,void 0,void 0,function(){var a=this;return C(this,function(c){switch(c.label){case 0:return[4,new Promise(function(d){return setTimeout(d,a.attempts*a.retryTimeout)})];case 1:return c.sent(),[2,this.fetchRemoteConfig(r,o)]}})})},this.parseAndStoreConfig=function(r){return W(i,void 0,void 0,function(){var o;return C(this,function(a){switch(a.label){case 0:return[4,r.json()];case 1:return o=a.sent(),this.completeRequest({success:rb}),[2,o]}})})},this.localConfig=n,this.configKeys=l}return t.prototype.getServerUrl=function(){return this.localConfig.configServerUrl?this.localConfig.configServerUrl:this.localConfig.serverZone===Zl.STAGING?cb:this.localConfig.serverZone===Zl.EU?db:ab},t.prototype.completeRequest=function(e){var n=e.err,l=e.success;if(n)throw new Error(n);l&&this.localConfig.loggerProvider.log(l)},t})(),ub=function(t){var e=t.localConfig,n=t.configKeys;return W(void 0,void 0,void 0,function(){return C(this,function(l){return[2,new sb({localConfig:e,configKeys:n})]})})},gb=ub,hb="@amplitude/plugin-autocapture-browser",bb="@amplitude/plugin-frustration-browser",Gi="[Amplitude] Element Clicked",Vb="[Amplitude] Dead Click",No="[Amplitude] Rage Click",mb="[Amplitude] Element Changed",fb="[Amplitude] Element ID",Ab="[Amplitude] Element Class",Fo="[Amplitude] Element Tag",Yo="[Amplitude] Element Text",pb="[Amplitude] Element Hierarchy",Zb="[Amplitude] Element Href",Gb="[Amplitude] Element Position Left",Xb="[Amplitude] Element Position Top",Ib="[Amplitude] Element Aria Label",Rb="[Amplitude] Element Attributes",Eb="[Amplitude] Element Parent Label",Uo="[Amplitude] Page URL",yb="[Amplitude] Page Title",vb="[Amplitude] Viewport Height",Sb="[Amplitude] Viewport Width",cl="https://app.amplitude.com",Cb="https://app.eu.amplitude.com",Wb="https://apps.stag2.amplitude.com",Bb={US:cl,EU:Cb,STAGING:Wb},Nb="https://cdn.amplitude.com/libs/visual-tagging-selector-1.0.0-alpha.js.gz",Fb="amp-visual-tagging-selector-highlight",jc="data-amp-mask-attributes",bn="data-amp-mask",It="*****",Yb=25;function ae(t){return typeof t=="function"}function ji(t){var e=function(l){Error.call(l),l.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ei=ji(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(l,i){return i+1+") "+l.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Gl(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Yn=(function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,l,i,r;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=H(o),c=a.next();!c.done;c=a.next()){var d=c.value;d.remove(this)}}catch(m){e={error:m}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else o.remove(this);var s=this.initialTeardown;if(ae(s))try{s()}catch(m){r=m instanceof ei?m.errors:[m]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var h=H(u),g=h.next();!g.done;g=h.next()){var b=g.value;try{Jo(b)}catch(m){r=r??[],m instanceof ei?r=D(D([],U(r)),U(m.errors)):r.push(m)}}}catch(m){l={error:m}}finally{try{g&&!g.done&&(i=h.return)&&i.call(h)}finally{if(l)throw l.error}}}if(r)throw new ei(r)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)Jo(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&Gl(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&Gl(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=(function(){var e=new t;return e.closed=!0,e})(),t})(),_c=Yn.EMPTY;function Oc(t){return t instanceof Yn||t&&"closed"in t&&ae(t.remove)&&ae(t.add)&&ae(t.unsubscribe)}function Jo(t){ae(t)?t():t.unsubscribe()}var Ub={Promise:void 0},Jb={setTimeout:function(t,e){for(var n=[],l=2;l<arguments.length;l++)n[l-2]=arguments[l];return setTimeout.apply(void 0,D([t,e],U(n)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function Pc(t){Jb.setTimeout(function(){throw t})}function Xi(){}function dl(t){t()}var _i=(function(t){Me(e,t);function e(n){var l=t.call(this)||this;return l.isStopped=!1,n?(l.destination=n,Oc(n)&&n.add(l)):l.destination=kb,l}return e.create=function(n,l,i){return new yn(n,l,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e})(Yn),xb=(function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(l){_n(l)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(l){_n(l)}else _n(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){_n(n)}},t})(),yn=(function(t){Me(e,t);function e(n,l,i){var r=t.call(this)||this,o;return ae(n)||!n?o={next:n??void 0,error:l??void 0,complete:i??void 0}:o=n,r.destination=new xb(o),r}return e})(_i);function _n(t){Pc(t)}function wb(t){throw t}var kb={closed:!0,next:Xi,error:wb,complete:Xi},Oi=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function $c(t){return t}function zb(t){return t.length===0?$c:t.length===1?t[0]:function(n){return t.reduce(function(l,i){return i(l)},n)}}var Re=(function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,l){var i=this,r=Lb(e)?e:new yn(e,n,l);return dl(function(){var o=i,a=o.operator,c=o.source;r.add(a?a.call(r,c):c?i._subscribe(r):i._trySubscribe(r))}),r},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var l=this;return n=xo(n),new n(function(i,r){var o=new yn({next:function(a){try{e(a)}catch(c){r(c),o.unsubscribe()}},error:r,complete:i});l.subscribe(o)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[Oi]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return zb(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=xo(e),new e(function(l,i){var r;n.subscribe(function(o){return r=o},function(o){return i(o)},function(){return l(r)})})},t.create=function(e){return new t(e)},t})();function xo(t){var e;return(e=t??Ub.Promise)!==null&&e!==void 0?e:Promise}function Qb(t){return t&&ae(t.next)&&ae(t.error)&&ae(t.complete)}function Lb(t){return t&&t instanceof _i||Qb(t)&&Oc(t)}function Kb(t){return ae(t==null?void 0:t.lift)}function nt(t){return function(e){if(Kb(e))return e.lift(function(n){try{return t(n,this)}catch(l){this.error(l)}});throw new TypeError("Unable to lift unknown Observable type")}}function ze(t,e,n,l,i){return new Tb(t,e,n,l,i)}var Tb=(function(t){Me(e,t);function e(n,l,i,r,o,a){var c=t.call(this,n)||this;return c.onFinalize=o,c.shouldUnsubscribe=a,c._next=l?function(d){try{l(d)}catch(s){n.error(s)}}:t.prototype._next,c._error=r?function(d){try{r(d)}catch(s){n.error(s)}finally{this.unsubscribe()}}:t.prototype._error,c._complete=i?function(){try{i()}catch(d){n.error(d)}finally{this.unsubscribe()}}:t.prototype._complete,c}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var l=this.closed;t.prototype.unsubscribe.call(this),!l&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e})(_i),Mb=ji(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),qc=(function(t){Me(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var l=new wo(this,this);return l.operator=n,l},e.prototype._throwIfClosed=function(){if(this.closed)throw new Mb},e.prototype.next=function(n){var l=this;dl(function(){var i,r;if(l._throwIfClosed(),!l.isStopped){l.currentObservers||(l.currentObservers=Array.from(l.observers));try{for(var o=H(l.currentObservers),a=o.next();!a.done;a=o.next()){var c=a.value;c.next(n)}}catch(d){i={error:d}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var l=this;dl(function(){if(l._throwIfClosed(),!l.isStopped){l.hasError=l.isStopped=!0,l.thrownError=n;for(var i=l.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;dl(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var l=n.observers;l.length;)l.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var l=this,i=this,r=i.hasError,o=i.isStopped,a=i.observers;return r||o?_c:(this.currentObservers=null,a.push(n),new Yn(function(){l.currentObservers=null,Gl(a,n)}))},e.prototype._checkFinalizedStatuses=function(n){var l=this,i=l.hasError,r=l.thrownError,o=l.isStopped;i?n.error(r):o&&n.complete()},e.prototype.asObservable=function(){var n=new Re;return n.source=this,n},e.create=function(n,l){return new wo(n,l)},e})(Re),wo=(function(t){Me(e,t);function e(n,l){var i=t.call(this)||this;return i.destination=n,i.source=l,i}return e.prototype.next=function(n){var l,i;(i=(l=this.destination)===null||l===void 0?void 0:l.next)===null||i===void 0||i.call(l,n)},e.prototype.error=function(n){var l,i;(i=(l=this.destination)===null||l===void 0?void 0:l.error)===null||i===void 0||i.call(l,n)},e.prototype.complete=function(){var n,l;(l=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||l===void 0||l.call(n)},e.prototype._subscribe=function(n){var l,i;return(i=(l=this.source)===null||l===void 0?void 0:l.subscribe(n))!==null&&i!==void 0?i:_c},e})(qc),Hb={now:function(){return Date.now()}},Db=(function(t){Me(e,t);function e(n,l){return t.call(this)||this}return e.prototype.schedule=function(n,l){return this},e})(Yn),ko={setInterval:function(t,e){for(var n=[],l=2;l<arguments.length;l++)n[l-2]=arguments[l];return setInterval.apply(void 0,D([t,e],U(n)))},clearInterval:function(t){return clearInterval(t)},delegate:void 0},jb=(function(t){Me(e,t);function e(n,l){var i=t.call(this,n,l)||this;return i.scheduler=n,i.work=l,i.pending=!1,i}return e.prototype.schedule=function(n,l){var i;if(l===void 0&&(l=0),this.closed)return this;this.state=n;var r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,l)),this.pending=!0,this.delay=l,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,l),this},e.prototype.requestAsyncId=function(n,l,i){return i===void 0&&(i=0),ko.setInterval(n.flush.bind(n,this),i)},e.prototype.recycleAsyncId=function(n,l,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return l;l!=null&&ko.clearInterval(l)},e.prototype.execute=function(n,l){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,l);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,l){var i=!1,r;try{this.work(n)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,l=n.id,i=n.scheduler,r=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Gl(r,this),l!=null&&(this.id=this.recycleAsyncId(i,l,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e})(Db),zo=(function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,l){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(l,n)},t.now=Hb.now,t})(),_b=(function(t){Me(e,t);function e(n,l){l===void 0&&(l=zo.now);var i=t.call(this,n,l)||this;return i.actions=[],i._active=!1,i}return e.prototype.flush=function(n){var l=this.actions;if(this._active){l.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=l.shift());if(this._active=!1,i){for(;n=l.shift();)n.unsubscribe();throw i}},e})(zo),Un=new _b(jb),Ob=Un,Pi=new Re(function(t){return t.complete()});function ed(t){return t&&ae(t.schedule)}function td(t){return t[t.length-1]}function Pb(t){return ed(td(t))?t.pop():void 0}function $b(t,e){return typeof td(t)=="number"?t.pop():e}var $i=(function(t){return t&&typeof t.length=="number"&&typeof t!="function"});function nd(t){return ae(t==null?void 0:t.then)}function ld(t){return ae(t[Oi])}function id(t){return Symbol.asyncIterator&&ae(t==null?void 0:t[Symbol.asyncIterator])}function rd(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function qb(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var od=qb();function ad(t){return ae(t==null?void 0:t[od])}function cd(t){return xu(this,arguments,function(){var n,l,i,r;return C(this,function(o){switch(o.label){case 0:n=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,_t(n.read())];case 3:return l=o.sent(),i=l.value,r=l.done,r?[4,_t(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,_t(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function dd(t){return ae(t==null?void 0:t.getReader)}function Qe(t){if(t instanceof Re)return t;if(t!=null){if(ld(t))return eV(t);if($i(t))return tV(t);if(nd(t))return nV(t);if(id(t))return sd(t);if(ad(t))return lV(t);if(dd(t))return iV(t)}throw rd(t)}function eV(t){return new Re(function(e){var n=t[Oi]();if(ae(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function tV(t){return new Re(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function nV(t){return new Re(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,Pc)})}function lV(t){return new Re(function(e){var n,l;try{for(var i=H(t),r=i.next();!r.done;r=i.next()){var o=r.value;if(e.next(o),e.closed)return}}catch(a){n={error:a}}finally{try{r&&!r.done&&(l=i.return)&&l.call(i)}finally{if(n)throw n.error}}e.complete()})}function sd(t){return new Re(function(e){rV(t,e).catch(function(n){return e.error(n)})})}function iV(t){return sd(cd(t))}function rV(t,e){var n,l,i,r;return W(this,void 0,void 0,function(){var o,a;return C(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=wu(t),c.label=1;case 1:return[4,n.next()];case 2:if(l=c.sent(),!!l.done)return[3,4];if(o=l.value,e.next(o),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),l&&!l.done&&(r=n.return)?[4,r.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function yt(t,e,n,l,i){l===void 0&&(l=0),i===void 0&&(i=!1);var r=e.schedule(function(){n(),i?t.add(this.schedule(null,l)):this.unsubscribe()},l);if(t.add(r),!i)return r}function ud(t,e){return e===void 0&&(e=0),nt(function(n,l){n.subscribe(ze(l,function(i){return yt(l,t,function(){return l.next(i)},e)},function(){return yt(l,t,function(){return l.complete()},e)},function(i){return yt(l,t,function(){return l.error(i)},e)}))})}function gd(t,e){return e===void 0&&(e=0),nt(function(n,l){l.add(t.schedule(function(){return n.subscribe(l)},e))})}function oV(t,e){return Qe(t).pipe(gd(e),ud(e))}function aV(t,e){return Qe(t).pipe(gd(e),ud(e))}function cV(t,e){return new Re(function(n){var l=0;return e.schedule(function(){l===t.length?n.complete():(n.next(t[l++]),n.closed||this.schedule())})})}function dV(t,e){return new Re(function(n){var l;return yt(n,e,function(){l=t[od](),yt(n,e,function(){var i,r,o;try{i=l.next(),r=i.value,o=i.done}catch(a){n.error(a);return}o?n.complete():n.next(r)},0,!0)}),function(){return ae(l==null?void 0:l.return)&&l.return()}})}function hd(t,e){if(!t)throw new Error("Iterable cannot be null");return new Re(function(n){yt(n,e,function(){var l=t[Symbol.asyncIterator]();yt(n,e,function(){l.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function sV(t,e){return hd(cd(t),e)}function uV(t,e){if(t!=null){if(ld(t))return oV(t,e);if($i(t))return cV(t,e);if(nd(t))return aV(t,e);if(id(t))return hd(t,e);if(ad(t))return dV(t,e);if(dd(t))return sV(t,e)}throw rd(t)}function gV(t,e){return e?uV(t,e):Qe(t)}function bd(t){return t instanceof Date&&!isNaN(t)}var hV=ji(function(t){return function(n){n===void 0&&(n=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=n}});function bV(t,e){var n=bd(t)?{first:t}:typeof t=="number"?{each:t}:t,l=n.first,i=n.each,r=n.with,o=r===void 0?VV:r,a=n.scheduler,c=a===void 0?Un:a,d=n.meta,s=d===void 0?null:d;if(l==null&&i==null)throw new TypeError("No timeout provided.");return nt(function(u,h){var g,b,m=null,f=0,p=function(A){b=yt(h,c,function(){try{g.unsubscribe(),Qe(o({meta:s,lastValue:m,seen:f})).subscribe(h)}catch(X){h.error(X)}},A)};g=u.subscribe(ze(h,function(A){b==null||b.unsubscribe(),f++,h.next(m=A),i>0&&p(i)},void 0,void 0,function(){b!=null&&b.closed||b==null||b.unsubscribe(),m=null})),!f&&p(l!=null?typeof l=="number"?l:+l-c.now():i)})}function VV(t){throw new hV(t)}function Ne(t,e){return nt(function(n,l){var i=0;n.subscribe(ze(l,function(r){l.next(t.call(e,r,i++))}))})}var mV=Array.isArray;function fV(t,e){return mV(e)?t.apply(void 0,D([],U(e))):t(e)}function AV(t){return Ne(function(e){return fV(t,e)})}function pV(t,e,n,l,i,r,o,a){var c=[],d=0,s=0,u=!1,h=function(){u&&!c.length&&!d&&e.complete()},g=function(m){return d<l?b(m):c.push(m)},b=function(m){d++;var f=!1;Qe(n(m,s++)).subscribe(ze(e,function(p){e.next(p)},function(){f=!0},void 0,function(){if(f)try{d--;for(var p=function(){var A=c.shift();o||b(A)};c.length&&d<l;)p();h()}catch(A){e.error(A)}}))};return t.subscribe(ze(e,g,function(){u=!0,h()})),function(){}}function Jn(t,e,n){return n===void 0&&(n=1/0),ae(e)?Jn(function(l,i){return Ne(function(r,o){return e(l,r,i,o)})(Qe(t(l,i)))},n):(typeof e=="number"&&(n=e),nt(function(l,i){return pV(l,i,t,n)}))}function ZV(t){return t===void 0&&(t=1/0),Jn($c,t)}var GV=["addListener","removeListener"],XV=["addEventListener","removeEventListener"],IV=["on","off"];function en(t,e,n,l){if(ae(n)&&(l=n,n=void 0),l)return en(t,e,n).pipe(AV(l));var i=U(yV(t)?XV.map(function(a){return function(c){return t[a](e,c,n)}}):RV(t)?GV.map(Qo(t,e)):EV(t)?IV.map(Qo(t,e)):[],2),r=i[0],o=i[1];if(!r&&$i(t))return Jn(function(a){return en(a,e,n)})(Qe(t));if(!r)throw new TypeError("Invalid event target");return new Re(function(a){var c=function(){for(var d=[],s=0;s<arguments.length;s++)d[s]=arguments[s];return a.next(1<d.length?d:d[0])};return r(c),function(){return o(c)}})}function Qo(t,e){return function(n){return function(l){return t[n](e,l)}}}function RV(t){return ae(t.addListener)&&ae(t.removeListener)}function EV(t){return ae(t.on)&&ae(t.off)}function yV(t){return ae(t.addEventListener)&&ae(t.removeEventListener)}function Vd(t,e,n){t===void 0&&(t=0),n===void 0&&(n=Ob);var l=-1;return e!=null&&(ed(e)?n=e:l=e),new Re(function(i){var r=bd(t)?+t-n.now():t;r<0&&(r=0);var o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=l?this.schedule(void 0,l):i.complete())},r)})}function qi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Pb(t),l=$b(t,1/0),i=t;return i.length?i.length===1?Qe(i[0]):ZV(l)(gV(i,n)):Pi}var vV=Array.isArray;function SV(t){return t.length===1&&vV(t[0])?t[0]:t}function ke(t,e){return nt(function(n,l){var i=0;n.subscribe(ze(l,function(r){return t.call(e,r,i++)&&l.next(r)}))})}function CV(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t=SV(t),t.length===1?Qe(t[0]):new Re(WV(t))}function WV(t){return function(e){for(var n=[],l=function(r){n.push(Qe(t[r]).subscribe(ze(e,function(o){if(n){for(var a=0;a<n.length;a++)a!==r&&n[a].unsubscribe();n=null}e.next(o)})))},i=0;n&&!e.closed&&i<t.length;i++)l(i)}}function BV(t){return nt(function(e,n){var l=[];return e.subscribe(ze(n,function(i){return l.push(i)},function(){n.next(l),n.complete()})),Qe(t).subscribe(ze(n,function(){var i=l;l=[],n.next(i)},Xi)),function(){l=null}})}function NV(t,e){return e===void 0&&(e=Un),nt(function(n,l){var i=null,r=null,o=null,a=function(){if(i){i.unsubscribe(),i=null;var d=r;r=null,l.next(d)}};function c(){var d=o+t,s=e.now();if(s<d){i=this.schedule(void 0,d-s),l.add(i);return}a()}n.subscribe(ze(l,function(d){r=d,o=e.now(),i||(i=e.schedule(c,t),l.add(i))},function(){a(),l.complete()},void 0,function(){r=i=null}))})}function er(t){return t<=0?function(){return Pi}:nt(function(e,n){var l=0;e.subscribe(ze(n,function(i){++l<=t&&(n.next(i),t<=l&&n.complete())}))})}function FV(t){return Ne(function(){return t})}function YV(t,e){return Jn(function(n,l){return Qe(t(n,l)).pipe(er(1),FV(n))})}function UV(t,e){e===void 0&&(e=Un);var n=Vd(t,e);return YV(function(){return n})}function JV(){return nt(function(t,e){var n,l=!1;t.subscribe(ze(e,function(i){var r=n;n=i,l&&e.next([r,i]),l=!0}))})}function xt(t){t===void 0&&(t={});var e=t.connector,n=e===void 0?function(){return new qc}:e,l=t.resetOnError,i=l===void 0?!0:l,r=t.resetOnComplete,o=r===void 0?!0:r,a=t.resetOnRefCountZero,c=a===void 0?!0:a;return function(d){var s,u,h,g=0,b=!1,m=!1,f=function(){u==null||u.unsubscribe(),u=void 0},p=function(){f(),s=h=void 0,b=m=!1},A=function(){var X=s;p(),X==null||X.unsubscribe()};return nt(function(X,y){g++,!m&&!b&&f();var I=h=h??n();y.add(function(){g--,g===0&&!m&&!b&&(u=ti(A,c))}),I.subscribe(y),!s&&g>0&&(s=new yn({next:function(S){return I.next(S)},error:function(S){m=!0,f(),u=ti(p,i,S),I.error(S)},complete:function(){b=!0,f(),u=ti(p,o),I.complete()}}),Qe(X).subscribe(s))})(d)}}function ti(t,e){for(var n=[],l=2;l<arguments.length;l++)n[l-2]=arguments[l];if(e===!0){t();return}if(e!==!1){var i=new yn({next:function(){i.unsubscribe(),t()}});return Qe(e.apply(void 0,D([],U(n)))).subscribe(i)}}function xV(t,e){return nt(function(n,l){var i=null,r=0,o=!1,a=function(){return o&&!i&&l.complete()};n.subscribe(ze(l,function(c){i==null||i.unsubscribe();var d=0,s=r++;Qe(t(c,s)).subscribe(i=ze(l,function(u){return l.next(e?e(c,u,s,d++):u)},function(){i=null,a()}))},function(){o=!0,a()}))})}function wV(t,e){return nt(function(n,l){var i=e??{},r=i.leading,o=r===void 0?!0:r,a=i.trailing,c=a===void 0?!1:a,d=!1,s=null,u=null,h=!1,g=function(){u==null||u.unsubscribe(),u=null,c&&(f(),h&&l.complete())},b=function(){u=null,h&&l.complete()},m=function(p){return u=Qe(t(p)).subscribe(ze(l,g,b))},f=function(){if(d){d=!1;var p=s;s=null,l.next(p),!h&&m(p)}};n.subscribe(ze(l,function(p){d=!0,s=p,!(u&&!u.closed)&&(o?f():m(p))},function(){h=!0,!(c&&d&&u&&!u.closed)&&l.complete()}))})}function kV(t,e,n){e===void 0&&(e=Un);var l=Vd(t,e);return wV(function(){return l},n)}var zV=["input","select","textarea"],md=function(t,e){var n,l=(n=window==null?void 0:window.getComputedStyle)===null||n===void 0?void 0:n.call(window,t);return(l==null?void 0:l.getPropertyValue("cursor"))==="pointer"&&e==="click"},pn=function(t,e,n){return n===void 0&&(n=!1),function(l,i){var r,o,a=t.pageUrlAllowlist,c=t.pageUrlExcludelist,d=t.shouldTrackEventResolver,s=(o=(r=i==null?void 0:i.tagName)===null||r===void 0?void 0:r.toLowerCase)===null||o===void 0?void 0:o.call(r);if(!s)return!1;if(d)return d(l,i);if(!Ai(window.location.href,a)||c&&c.length>0&&Ai(window.location.href,c))return!1;var u=String(i==null?void 0:i.getAttribute("type"))||"";if(typeof u=="string")switch(u.toLowerCase()){case"hidden":return!1;case"password":return!1}var h=md(i,l);if(n&&h)return!0;if(e){var g=e.some(function(b){var m;return!!(!((m=i==null?void 0:i.matches)===null||m===void 0)&&m.call(i,b))});if(!g)return!1}switch(s){case"input":case"select":case"textarea":return l==="change"||l==="click";default:return h?!0:l==="click"}}},QV=function(t){var e,n,l,i=(n=(e=t==null?void 0:t.tagName)===null||e===void 0?void 0:e.toLowerCase)===null||n===void 0?void 0:n.call(e),r=t instanceof HTMLElement?((l=t.getAttribute("contenteditable"))===null||l===void 0?void 0:l.toLowerCase())==="true":!1;return!zV.includes(i)&&!r},LV=function(t){return t?t.split(",").map(function(e){return e.trim()}).filter(function(e){return e.length>0&&e!=="id"&&e!=="class"}):[]},KV=function(t,e){return Object.entries(t).reduce(function(n,l){var i=U(l,2),r=i[0],o=i[1];if(r.startsWith(e)){var a=r.replace(e,"");a&&(n[a]=o||"")}return n},{})},TV=function(t){return t==null||typeof t=="object"&&Object.keys(t).length===0||typeof t=="string"&&t.trim().length===0},Lo=function(t){return Object.keys(t).reduce(function(e,n){var l=t[n];return TV(l)||(e[n]=l),e},{})},tr=function(t,e){return t?e.some(function(n){var l;return(l=t==null?void 0:t.matches)===null||l===void 0?void 0:l.call(t,n)})?t:tr(t==null?void 0:t.parentElement,e):null},MV=function(t){return new Promise(function(e,n){var l;try{var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.addEventListener("load",function(){e({status:!0})},{once:!0}),i.addEventListener("error",function(){n({status:!1,message:"Failed to load the script ".concat(t)})}),(l=document.head)===null||l===void 0||l.appendChild(i)}catch(r){n(r)}})};function HV(){return"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}var xn=function(t){return!(t.event.target===null||!t.closestTrackedAncestor)};function DV(t){return t.type==="click"||t.type==="change"}var jV="1.13.0",_V=new Set(["id","class","style","value","onclick","onchange","oninput","onblur","onsubmit","onfocus","onkeydown","onkeyup","onkeypress","data-reactid","data-react-checksum","data-reactroot",jc,bn]),OV=["type"],PV=["svg","path","g"],$V=["password","hidden"],qV=128;function e0(t,e){var n,l,i,r,o,a;if(t===null)return null;var c=String(t.tagName).toLowerCase(),d={tag:c},s=Array.from((r=(i=t.parentElement)===null||i===void 0?void 0:i.children)!==null&&r!==void 0?r:[]);s.length&&(d.index=s.indexOf(t),d.indexOfType=s.filter(function(I){return I.tagName===t.tagName}).indexOf(t));var u=(a=(o=t.previousElementSibling)===null||o===void 0?void 0:o.tagName)===null||a===void 0?void 0:a.toLowerCase();u&&(d.prevSib=String(u));var h=t.getAttribute("id");h&&(d.id=String(h));var g=Array.from(t.classList);g.length&&(d.classes=g);var b={},m=Array.from(t.attributes),f=m.filter(function(I){return!_V.has(I.name)}),p=!QV(t);if(!$V.includes(String(t.getAttribute("type")))&&!PV.includes(c))try{for(var A=H(f),X=A.next();!X.done;X=A.next()){var y=X.value;if(!(p&&!OV.includes(y.name))){if(e.has(y.name)){b[y.name]=It;continue}b[y.name]=String(y.value).substring(0,qV)}}}catch(I){n={error:I}}finally{try{X&&!X.done&&(l=A.return)&&l.call(A)}finally{if(n)throw n.error}}return Object.keys(b).length&&(d.attrs=b),d}function t0(t){var e=[];if(!t)return e;e.push(t);for(var n=t.parentElement;n&&n.tagName!=="HTML";)e.push(n),n=n.parentElement;return e}var n0=function(t,e){try{if(t.sourceType==="DOM_ELEMENT"){var n=document.documentElement;return t.scope&&e&&(n=e.closest(t.scope)),n&&t.selector?n.querySelector(t.selector):n}}catch{return}},l0=function(t,e,n){t.forEach(function(l){if(typeof l!="string"&&l.actionType==="ATTACH_EVENT_PROPERTY"){var i=n.extractDataFromDataSource(l.dataSource,e.closestTrackedAncestor);e.targetElementProperties[l.destinationKey]=i}})},i0=/\b(?:\d[ -]*?){13,16}\b/,r0=/(\d{3}-?\d{2}-?\d{4})/g,o0=/[^\s@]+@[^\s@.]+\.[^\s@]+/g,nr=(function(){function t(e){var n,l,i=this,r;this.replaceSensitiveString=function(u){var h,g;if(typeof u!="string")return"";var b=u;b=b.replace(i0,It),b=b.replace(r0,It),b=b.replace(o0,It);try{for(var m=H(i.additionalMaskTextPatterns),f=m.next();!f.done;f=m.next()){var p=f.value;try{b=b.replace(p,It)}catch{}}}catch(A){h={error:A}}finally{try{f&&!f.done&&(g=m.return)&&g.call(m)}finally{if(h)throw h.error}}return b},this.getHierarchy=function(u){var h,g,b,m=[];if(!u)return[];for(var f=t0(u),p=new Map,A=f.length-1;A>=0;A--){var X=f[A];if(X){var y=LV(X.getAttribute(jc)),I=A===f.length-1?[]:(b=p.get(f[A+1]))!==null&&b!==void 0?b:new Set,S=new Set(D(D([],U(I),!1),U(y),!1));p.set(X,S)}}m=f.map(function(w){var L;return e0(w,(L=p.get(w))!==null&&L!==void 0?L:new Set)});var G=function(w){w!=null&&w.attrs&&Object.entries(w.attrs).forEach(function(L){var $=U(L,2),q=$[0],Ae=$[1];w.attrs&&(w.attrs[q]=i.replaceSensitiveString(Ae))})};try{for(var B=H(m),v=B.next();!v.done;v=B.next()){var J=v.value;G(J)}}catch(w){h={error:w}}finally{try{v&&!v.done&&(g=B.return)&&g.call(B)}finally{if(h)throw h.error}}return m},this.getNearestLabel=function(u){var h=u.parentElement;if(!h)return"";var g;try{g=h.querySelector(":scope>span,h1,h2,h3,h4,h5,h6")}catch{g=null}return g?i.getText(g):i.getNearestLabel(h)},this.getEventProperties=function(u,h,g){var b,m,f,p,A=(f=(m=h==null?void 0:h.tagName)===null||m===void 0?void 0:m.toLowerCase)===null||f===void 0?void 0:f.call(m),X=typeof h.getBoundingClientRect=="function"?h.getBoundingClientRect():{left:null,top:null},y=i.getHierarchy(h),I=(p=y[0])===null||p===void 0?void 0:p.attrs,S=i.getNearestLabel(h),G=KV(I??{},g),B=(b={},b[pb]=y,b[Fo]=A,b[Yo]=i.getText(h),b[Gb]=X.left==null?null:Math.round(X.left),b[Xb]=X.top==null?null:Math.round(X.top),b[Rb]=G,b[Eb]=S,b[Uo]=zg(window.location.href.split("?")[0]),b[yb]=i.getPageTitle(),b[vb]=window.innerHeight,b[Sb]=window.innerWidth,b);return B[fb]=h.getAttribute("id")||"",B[Ab]=h.getAttribute("class"),B[Ib]=I==null?void 0:I["aria-label"],A==="a"&&u==="click"&&h instanceof HTMLAnchorElement&&(B[Zb]=i.replaceSensitiveString(h.href)),Lo(B)},this.addAdditionalEventProperties=function(u,h,g,b,m){m===void 0&&(m=!1);var f={event:u,timestamp:Date.now(),type:h};if(DV(f)&&f.event.target!==null){if(m){var p=md(f.event.target,f.type);if(p)return f.closestTrackedAncestor=f.event.target,f.targetElementProperties=i.getEventProperties(f.type,f.closestTrackedAncestor,b),f}var A=tr(f.event.target,g);return A&&(f.closestTrackedAncestor=A,f.targetElementProperties=i.getEventProperties(f.type,A,b)),f}return f},this.extractDataFromDataSource=function(u,h){if(u.sourceType==="DOM_ELEMENT"){var g=n0(u,h);return g?u.elementExtractType==="TEXT"?i.getText(g):u.elementExtractType==="ATTRIBUTE"&&u.attribute?g.getAttribute(u.attribute):void 0:void 0}},this.getText=function(u){var h=u.closest("[".concat(bn,"]"))!==null;if(h)return It;var g="";if(!u.querySelector("[".concat(bn,"], [contenteditable]")))g=u.innerText||"";else{var b=u.cloneNode(!0);b.querySelectorAll("[".concat(bn,"], [contenteditable]")).forEach(function(m){m.innerText=It}),g=b.innerText||""}return i.replaceSensitiveString(g.substring(0,255)).replace(/\s+/g," ").trim()},this.getPageTitle=function(){if(typeof document>"u")return"";var u=document.querySelector("title");return u&&u.hasAttribute(bn)?It:i.replaceSensitiveString(document.title)},this.getEventTagProps=function(u){var h,g,b;if(!u)return{};var m=(b=(g=u==null?void 0:u.tagName)===null||g===void 0?void 0:g.toLowerCase)===null||b===void 0?void 0:b.call(g),f=(h={},h[Fo]=m,h[Yo]=i.getText(u),h[Uo]=window.location.href.split("?")[0],h);return Lo(f)};var o=(r=e.maskTextRegex)!==null&&r!==void 0?r:[],a=[];try{for(var c=H(o),d=c.next();!d.done;d=c.next()){var s=d.value;if(a.length>=Yb)break;if(s instanceof RegExp)a.push(s);else if("pattern"in s&&typeof s.pattern=="string")try{a.push(new RegExp(s.pattern,"i"))}catch{}}}catch(u){n={error:u}}finally{try{d&&!d.done&&(l=c.return)&&l.call(c)}finally{if(n)throw n.error}}this.additionalMaskTextPatterns=a}return t})(),a0=(function(){function t(e){var n=e===void 0?{}:e,l=n.origin,i=l===void 0?cl:l,r=this;this.endpoint=cl,this.requestCallbacks={},this.onSelect=function(o){r.notify({action:"element-selected",data:o})},this.onTrack=function(o,a){o==="selector-mode-changed"?r.notify({action:"track-selector-mode-changed",data:a}):o==="selector-moved"&&r.notify({action:"track-selector-moved",data:a})},this.endpoint=i}return t.prototype.notify=function(e){var n,l,i,r;(l=(n=this.logger)===null||n===void 0?void 0:n.debug)===null||l===void 0||l.call(n,"Message sent: ",JSON.stringify(e)),(r=(i=window.opener)===null||i===void 0?void 0:i.postMessage)===null||r===void 0||r.call(i,e,this.endpoint)},t.prototype.sendRequest=function(e,n,l){var i=this;l===void 0&&(l={timeout:15e3});var r=HV(),o={id:r,action:e,args:n},a=new Promise(function(c,d){i.requestCallbacks[r]={resolve:c,reject:d},i.notify(o),(l==null?void 0:l.timeout)>0&&setTimeout(function(){d(new Error("".concat(e," timed out (id: ").concat(r,")"))),delete i.requestCallbacks[r]},l.timeout)});return a},t.prototype.handleResponse=function(e){var n;if(!this.requestCallbacks[e.id]){(n=this.logger)===null||n===void 0||n.warn("No callback found for request id: ".concat(e.id));return}this.requestCallbacks[e.id].resolve(e.responseData),delete this.requestCallbacks[e.id]},t.prototype.setup=function(e){var n=this,l=e===void 0?{dataExtractor:new nr({})}:e,i=l.logger,r=l.endpoint,o=l.isElementSelectable,a=l.cssSelectorAllowlist,c=l.actionClickAllowlist,d=l.dataExtractor;this.logger=i,r&&this.endpoint===cl&&(this.endpoint=r);var s=null;window.addEventListener("message",function(u){var h,g,b,m,f;if((g=(h=n.logger)===null||h===void 0?void 0:h.debug)===null||g===void 0||g.call(h,"Message received: ",JSON.stringify(u)),n.endpoint===u.origin){var p=u==null?void 0:u.data,A=p==null?void 0:p.action;if(A)if("id"in p)(m=(b=n.logger)===null||b===void 0?void 0:b.debug)===null||m===void 0||m.call(b,"Received Response to previous request: ",JSON.stringify(u)),n.handleResponse(p);else if(A==="ping")n.notify({action:"pong"});else if(A==="initialize-visual-tagging-selector"){var X=p==null?void 0:p.data;MV(Nb).then(function(){var y;s=(y=window==null?void 0:window.amplitudeVisualTaggingSelector)===null||y===void 0?void 0:y.call(window,{getEventTagProps:d.getEventTagProps,isElementSelectable:function(I){return o?o((X==null?void 0:X.actionType)||"click",I):!0},onTrack:n.onTrack,onSelect:n.onSelect,visualHighlightClass:Fb,messenger:n,cssSelectorAllowlist:a,actionClickAllowlist:c,extractDataFromDataSource:d.extractDataFromDataSource,dataExtractor:d,diagnostics:{autocapture:{version:jV}}}),n.notify({action:"selector-loaded"})}).catch(function(){var y;(y=n.logger)===null||y===void 0||y.warn("Failed to initialize visual tagging selector")})}else A==="close-visual-tagging-selector"&&((f=s==null?void 0:s.close)===null||f===void 0||f.call(s))}}),this.notify({action:"page-loaded"})},t})(),c0=5;function d0(t){var e=t.amplitude,n=t.allObservables,l=t.options,i=t.shouldTrackEvent,r=t.evaluateTriggers,o=n.clickObservable,a=o.pipe(JV(),ke(function(u){var h=U(u,2),g=h[0],b=h[1],m=g.event.target!==b.event.target,f=Math.abs(b.event.screenX-g.event.screenX)<=20&&Math.abs(b.event.screenY-g.event.screenY)<=20;return m&&!f})),c=o.pipe(NV(l.debounceTime),Ne(function(){return"timeout"})),d=qi(a,c),s=o.pipe(UV(0),ke(xn),ke(function(u){return i("click",u.closestTrackedAncestor)}),Ne(function(u){return r(u)}),BV(d));return s.subscribe(function(u){var h,g,b=(u.length>=c0,Gi);try{for(var m=H(u),f=m.next();!f.done;f=m.next()){var p=f.value;e==null||e.track(b,p.targetElementProperties)}}catch(A){h={error:A}}finally{try{f&&!f.done&&(g=m.return)&&g.call(m)}finally{if(h)throw h.error}}})}function s0(t){var e=t.amplitude,n=t.allObservables,l=t.getEventProperties,i=t.shouldTrackEvent,r=t.evaluateTriggers,o=n.changeObservable,a=o.pipe(ke(xn),ke(function(c){return i("change",c.closestTrackedAncestor)}),Ne(function(c){return r(c)}));return a.subscribe(function(c){e==null||e.track(mb,l("change",c.closestTrackedAncestor))})}function u0(t){var e=t.amplitude,n=t.allObservables,l=t.options,i=t.getEventProperties,r=t.shouldTrackEvent,o=t.shouldTrackActionClick,a=n.clickObservable,c=n.mutationObservable,d=n.navigateObservable,s=a.pipe(ke(function(b){return!r("click",b.closestTrackedAncestor)}),Ne(function(b){var m=tr(b.event.target,l.actionClickAllowlist);return b.closestTrackedAncestor=m,b.closestTrackedAncestor!==null&&(b.targetElementProperties=i(b.type,b.closestTrackedAncestor)),b}),ke(xn),ke(function(b){return o("click",b.closestTrackedAncestor)})),u=[c];d&&u.push(d);var h=qi.apply(void 0,D([],U(u),!1)),g=s.pipe(xV(function(b){return h.pipe(er(1),bV({first:500,with:function(){return Pi}}),Ne(function(){return b}))}));return g.subscribe(function(b){e==null||e.track(Gi,i("click",b.closestTrackedAncestor))})}var fd=function(){return new Re(function(t){var e=new MutationObserver(function(n){t.next(n)});return e.observe(document.body,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),function(){return e.disconnect()}})},Ad=function(t){return t===void 0&&(t="click"),en(document,t,{capture:!0})},g0=function(t,e){try{if(e.subprop_key==="[Amplitude] Element Text")return e.subprop_op==="is"&&e.subprop_value.includes(t.targetElementProperties["[Amplitude] Element Text"]);if(e.subprop_key==="[Amplitude] Element Hierarchy")return e.subprop_op==="autotrack css match"&&!!t.closestTrackedAncestor.closest(e.subprop_value.toString())}catch(n){return console.error("Error matching event to filter",n),!1}return!1},Ii={"[Amplitude] Element Clicked":"click","[Amplitude] Element Changed":"change"},Ko=function(t){var e,n,l,i,r=Object.values(Ii).reduce(function(g,b){return g[b]=new Set,g},{});if(!t)return r;try{for(var o=H(t),a=o.next();!a.done;a=o.next()){var c=a.value;try{try{for(var d=(l=void 0,H(c.definition)),s=d.next();!s.done;s=d.next()){var u=s.value,h=Ii[u.event_type];h&&r[h].add(c.id)}}catch(g){l={error:g}}finally{try{s&&!s.done&&(i=d.return)&&i.call(d)}finally{if(l)throw l.error}}}catch(g){console.warn("Skipping Labeled Event due to malformed definition",c==null?void 0:c.id,g)}}}catch(g){e={error:g}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},To=function(t){var e,n,l,i,r=new Map;try{for(var o=H(t),a=o.next();!a.done;a=o.next()){var c=a.value;try{for(var d=(l=void 0,H(c.conditions)),s=d.next();!s.done;s=d.next()){var u=s.value;if(u.type==="LABELED_EVENT"){var h=u.match.eventId,g=r.get(h);g||(g=[],r.set(h,g)),g.push(c)}}}catch(b){l={error:b}}finally{try{s&&!s.done&&(i=d.return)&&i.call(d)}finally{if(l)throw l.error}}}}catch(b){e={error:b}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},h0=function(t,e){return e.filter(function(n){return n.definition.some(function(l){return Ii[l.event_type]===t.type&&l.filters.every(function(i){return g0(t,i)})})})},b0=function(t,e){var n,l,i,r,o=new Set;try{for(var a=H(t),c=a.next();!c.done;c=a.next()){var d=c.value,s=e.get(d.id);if(s)try{for(var u=(i=void 0,H(s)),h=u.next();!h.done;h=u.next()){var g=h.value;o.add(g)}}catch(b){i={error:b}}finally{try{h&&!h.done&&(r=u.return)&&r.call(u)}finally{if(i)throw i.error}}}}catch(b){n={error:b}}finally{try{c&&!c.done&&(l=a.return)&&l.call(a)}finally{if(n)throw n.error}}return Array.from(o)},V0=(function(){function t(e,n,l,i){this.groupedLabeledEvents=e,this.labeledEventToTriggerMap=n,this.dataExtractor=l,this.options=i}return t.prototype.evaluate=function(e){var n,l,i=this.options.pageActions;if(!i)return e;var r=h0(e,Array.from(this.groupedLabeledEvents[e.type]).map(function(s){return i.labeledEvents[s]})),o=b0(r,this.labeledEventToTriggerMap);try{for(var a=H(o),c=a.next();!c.done;c=a.next()){var d=c.value;l0(d.actions,e,this.dataExtractor)}}catch(s){n={error:s}}finally{try{c&&!c.done&&(l=a.return)&&l.call(a)}finally{if(n)throw n.error}}return e},t.prototype.update=function(e,n,l){this.groupedLabeledEvents=e,this.labeledEventToTriggerMap=n,this.options=l},t})(),m0=function(t,e,n,l){return new V0(t,e,n,l)},ht;(function(t){t.ClickObservable="clickObservable",t.ChangeObservable="changeObservable",t.NavigateObservable="navigateObservable",t.MutationObservable="mutationObservable"})(ht||(ht={}));var f0=function(t){var e,n,l,i,r,o,a,c;t===void 0&&(t={});var d=t.dataAttributePrefix,s=d===void 0?Nc:d,u=t.visualTaggingOptions,h=u===void 0?{enabled:!0,messenger:new a0}:u;t.cssSelectorAllowlist=(e=t.cssSelectorAllowlist)!==null&&e!==void 0?e:Mg,t.actionClickAllowlist=(n=t.actionClickAllowlist)!==null&&n!==void 0?n:Hg,t.debounceTime=(l=t.debounceTime)!==null&&l!==void 0?l:0,t.pageUrlExcludelist=(i=t.pageUrlExcludelist)===null||i===void 0?void 0:i.reduce(function(v,J){if(typeof J=="string"&&v.push(J),J instanceof RegExp&&v.push(J),typeof J=="object"&&J!==null&&"pattern"in J)try{v.push(new RegExp(J.pattern))}catch(w){return console.warn("Invalid regex pattern: ".concat(J.pattern),w),v}return v},[]);var g=hb,b="enrichment",m=[],f=new nr(t),p=function(){var v,J=Ad().pipe(Ne(function(q){return f.addAdditionalEventProperties(q,"click",t.cssSelectorAllowlist,s)}),xt()),w=en(document,"change",{capture:!0}).pipe(Ne(function(q){return f.addAdditionalEventProperties(q,"change",t.cssSelectorAllowlist,s)}),xt()),L;window.navigation&&(L=en(window.navigation,"navigate").pipe(Ne(function(q){return f.addAdditionalEventProperties(q,"navigate",t.cssSelectorAllowlist,s)}),xt()));var $=fd().pipe(Ne(function(q){return f.addAdditionalEventProperties(q,"mutation",t.cssSelectorAllowlist,s)}),xt());return v={},v[ht.ClickObservable]=J,v[ht.ChangeObservable]=w,v[ht.NavigateObservable]=L,v[ht.MutationObservable]=$,v},A=Ko(Object.values((o=(r=t.pageActions)===null||r===void 0?void 0:r.labeledEvents)!==null&&o!==void 0?o:{})),X=To((c=(a=t.pageActions)===null||a===void 0?void 0:a.triggers)!==null&&c!==void 0?c:[]),y=m0(A,X,f,t),I=function(v){var J,w;v&&(t.pageActions=N(N({},t.pageActions),v),A=Ko(Object.values((J=t.pageActions.labeledEvents)!==null&&J!==void 0?J:{})),X=To((w=t.pageActions.triggers)!==null&&w!==void 0?w:[]),y.update(A,X,t))},S=function(v,J){return W(void 0,void 0,void 0,function(){var w,L,$,q,Ae,pe,We,Ue,ye,Be;return C(this,function(x){return typeof document>"u"?[2]:(v.fetchRemoteConfig&&gb({localConfig:v,configKeys:["analyticsSDK.pageActions"]}).then(function(Ve){return W(void 0,void 0,void 0,function(){var ee,De,$e;return C(this,function(me){switch(me.label){case 0:return me.trys.push([0,2,,3]),[4,Ve.getRemoteConfig("analyticsSDK","pageActions")];case 1:return ee=me.sent(),I(ee),[3,3];case 2:return De=me.sent(),($e=v==null?void 0:v.loggerProvider)===null||$e===void 0||$e.error("Failed to fetch remote config: ".concat(String(De))),[3,3];case 3:return[2]}})})}).catch(function(Ve){var ee;(ee=v==null?void 0:v.loggerProvider)===null||ee===void 0||ee.error("Failed to create remote config fetch: ".concat(String(Ve)))}),w=pn(t,t.cssSelectorAllowlist),L=pn(t,t.actionClickAllowlist),$=p(),q=d0({allObservables:$,options:t,amplitude:J,shouldTrackEvent:w,evaluateTriggers:y.evaluate.bind(y)}),m.push(q),Ae=s0({allObservables:$,getEventProperties:function(){for(var Ve=[],ee=0;ee<arguments.length;ee++)Ve[ee]=arguments[ee];return f.getEventProperties.apply(f,D(D([],U(Ve),!1),[s],!1))},amplitude:J,shouldTrackEvent:w,evaluateTriggers:y.evaluate.bind(y)}),m.push(Ae),pe=u0({allObservables:$,options:t,getEventProperties:function(){for(var Ve=[],ee=0;ee<arguments.length;ee++)Ve[ee]=arguments[ee];return f.getEventProperties.apply(f,D(D([],U(Ve),!1),[s],!1))},amplitude:J,shouldTrackEvent:w,shouldTrackActionClick:L}),m.push(pe),(ye=v==null?void 0:v.loggerProvider)===null||ye===void 0||ye.log("".concat(g," has been successfully added.")),window.opener&&h.enabled&&(We=t.cssSelectorAllowlist,Ue=t.actionClickAllowlist,(Be=h.messenger)===null||Be===void 0||Be.setup(N(N({dataExtractor:f,logger:v==null?void 0:v.loggerProvider},(v==null?void 0:v.serverZone)&&{endpoint:Bb[v.serverZone]}),{isElementSelectable:pn(t,D(D([],U(We),!1),U(Ue),!1)),cssSelectorAllowlist:We,actionClickAllowlist:Ue}))),[2])})})},G=function(v){return W(void 0,void 0,void 0,function(){return C(this,function(J){return[2,v]})})},B=function(){return W(void 0,void 0,void 0,function(){var v,J,w,L,$;return C(this,function(q){try{for(v=H(m),J=v.next();!J.done;J=v.next())w=J.value,w.unsubscribe()}catch(Ae){L={error:Ae}}finally{try{J&&!J.done&&($=v.return)&&$.call(v)}finally{if(L)throw L.error}}return[2]})})};return{name:g,type:b,setup:S,execute:G,teardown:B}},Mo=3e3;function A0(t){var e=t.amplitude,n=t.allObservables,l=t.getEventProperties,i=t.shouldTrackDeadClick,r=n.clickObservable,o=n.mutationObservable,a=n.navigateObservable,c=r.pipe(ke(xn),ke(function(h){return i("click",h.closestTrackedAncestor)}),ke(function(h){var g=h.event.target;return g.closest('a[target="_blank"]')===null})),d=[o];a&&d.push(a);var s=qi.apply(void 0,D([],U(d),!1)),u=c.pipe(Jn(function(h){var g,b=new Re(function(m){return g=setTimeout(function(){return m.next(h)},Mo),function(){clearTimeout(g)}});return CV(b,s.pipe(er(1),Ne(function(){return null}))).pipe(ke(function(m){return m!==null}))}),kV(Mo));return u.subscribe(function(h){var g={"[Amplitude] X":h.event.clientX,"[Amplitude] Y":h.event.clientY};e.track(Vb,N(N({},l("click",h.closestTrackedAncestor)),g),{time:h.timestamp})})}var Ri=Pg,pd=Og,Ho=$g;function Do(t,e){var n,l,i,r,o=e.event,a=o.clientX,c=o.clientY;t.yMin=Math.min((n=t.yMin)!==null&&n!==void 0?n:c,c),t.yMax=Math.max((l=t.yMax)!==null&&l!==void 0?l:c,c),t.xMin=Math.min((i=t.xMin)!==null&&i!==void 0?i:a,a),t.xMax=Math.max((r=t.xMax)!==null&&r!==void 0?r:a,a),t.isOutOfBounds=t.yMax-t.yMin>Ho||t.xMax-t.xMin>Ho}function jo(t){var e=t[0],n=t[t.length-1],l=N({"[Amplitude] Begin Time":new Date(e.timestamp).toISOString(),"[Amplitude] End Time":new Date(n.timestamp).toISOString(),"[Amplitude] Duration":n.timestamp-e.timestamp,"[Amplitude] Clicks":t.map(function(i){return{X:i.event.clientX,Y:i.event.clientY,Time:i.timestamp}}),"[Amplitude] Click Count":t.length},e.targetElementProperties);return{rageClickEvent:l,time:e.timestamp}}function p0(t,e){var n=Math.max(0,t.length-Ri+1),l=t[n];return e.timestamp-l.timestamp>=pd}function Z0(t,e){return t.length>0&&t[t.length-1].closestTrackedAncestor!==e.closestTrackedAncestor}function G0(t){var e=t.amplitude,n=t.allObservables,l=t.shouldTrackRageClick,i=n.clickObservable,r=[],o={},a;function c(d){r=[],o={},d&&(Do(o,d),r.push(d))}return i.pipe(ke(xn),ke(function(d){return l("click",d.closestTrackedAncestor)}),Ne(function(d){if(a&&clearTimeout(a),Do(o,d),r.length===0)return r.push(d),null;if(Z0(r,d)||p0(r,d)||o.isOutOfBounds){var s=r.length>=Ri?jo(r):null;return c(d),s}return r.push(d),r.length>=Ri&&(a=setTimeout(function(){var u=jo(r),h=u.rageClickEvent,g=u.time;e.track(No,h,{time:g}),c()},pd)),null}),ke(function(d){return d!==null})).subscribe(function(d){d!==null&&e.track(No,d.rageClickEvent,{time:d.time})})}var X0=function(t){var e,n,l,i,r;t===void 0&&(t={});var o=bb,a="enrichment",c=[],d=(n=(e=t.rageClicks)===null||e===void 0?void 0:e.cssSelectorAllowlist)!==null&&n!==void 0?n:_g,s=(i=(l=t.deadClicks)===null||l===void 0?void 0:l.cssSelectorAllowlist)!==null&&i!==void 0?i:jg,u=(r=t.dataAttributePrefix)!==null&&r!==void 0?r:Nc,h=new nr(t),g=D([],U(new Set(D(D([],U(d),!1),U(s),!1))),!1),b=function(){var A,X=Ad("pointerdown").pipe(Ne(function(S){return h.addAdditionalEventProperties(S,"click",g,u,!0)}),xt()),y;window.navigation&&(y=en(window.navigation,"navigate").pipe(Ne(function(S){return h.addAdditionalEventProperties(S,"navigate",g,u)}),xt()));var I=fd().pipe(Ne(function(S){return h.addAdditionalEventProperties(S,"mutation",g,u)}),xt());return A={},A[ht.ClickObservable]=X,A[ht.ChangeObservable]=new Re,A[ht.NavigateObservable]=y,A[ht.MutationObservable]=I,A},m=function(A,X){return W(void 0,void 0,void 0,function(){var y,I,S,G,B,v;return C(this,function(J){return typeof document>"u"?[2]:(y=pn(t,d),I=pn(t,s),S=b(),G=G0({allObservables:S,amplitude:X,shouldTrackRageClick:y}),c.push(G),B=A0({amplitude:X,allObservables:S,getEventProperties:function(w,L){return h.getEventProperties(w,L,u)},shouldTrackDeadClick:I}),c.push(B),(v=A==null?void 0:A.loggerProvider)===null||v===void 0||v.log("".concat(o," has been successfully added.")),[2])})})},f=function(A){return W(void 0,void 0,void 0,function(){return C(this,function(X){return[2,A]})})},p=function(){return W(void 0,void 0,void 0,function(){var A,X,y,I,S;return C(this,function(G){try{for(A=H(c),X=A.next();!X.done;X=A.next())y=X.value,y.unsubscribe()}catch(B){I={error:B}}finally{try{X&&!X.done&&(S=A.return)&&S.call(A)}finally{if(I)throw I.error}}return[2]})})};return{name:o,type:a,setup:m,execute:f,teardown:p}},I0="@amplitude/plugin-network-capture-browser",Zd="[Amplitude] Network Request",Gd="500-599";function sl(t,e){var n=e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&"),l="^"+n.replace(/\*/g,".*")+"$",i=new RegExp(l);return i.test(t)}function Xd(t,e){var n,l,i=e.split(",");try{for(var r=H(i),o=r.next();!o.done;o=r.next()){var a=o.value,c=U(a.split("-").map(Number),2),d=c[0],s=c[1];if(t===d&&s===void 0||t>=d&&t<=s)return!0}}catch(u){n={error:u}}finally{try{o&&!o.done&&(l=r.return)&&l.call(r)}finally{if(n)throw n.error}}return!1}function R0(t,e,n,l,i){if(!(t.hosts&&!t.hosts.find(function(o){return sl(e,o)}))&&!(l&&t.urls&&!Ai(l,t.urls))&&!(i&&t.methods&&!t.methods.find(function(o){return i.toLowerCase()===o.toLowerCase()||o==="*"}))){if(n||n===0){var r=t.statusCodeRange||Gd;if(!Xd(n,r))return!1}return!0}}function Id(t){var e;if(t)try{var n=(e=Fe())===null||e===void 0?void 0:e.location.href,l=new URL(t,n),i=l.searchParams.toString(),r=l.hash.replace("#",""),o=l.href,a=l.host;l.hash="",l.search="";var c=l.href;return{query:i,fragment:r,href:o,hrefWithoutQueryOrHash:c,host:a}}catch{return}}function E0(t,e){if(t.includes("amplitude.com"))try{var n=e.body;if(typeof n!="string")return!1;var l=JSON.parse(n),i=l.events;if(i.find(function(r){return r.event_type===Zd}))return!0}catch{}return!1}function _o(t){if(typeof t!="object"||t===null){if(t)return D([],U(ml),!1);if(t===void 0){var e=void 0;return e}return}if(t.length!==0)return t}function Oo(t){var e,n;return!(!((e=t==null?void 0:t.allowlist)===null||e===void 0)&&e.length)&&!(!((n=t==null?void 0:t.blocklist)===null||n===void 0)&&n.length)}function y0(t,e){var n;e===void 0&&(e={});var l=Id(t.url);if(!l)return!1;var i=l.host;if(e.ignoreAmplitudeRequests!==!1&&(sl(i,"*.amplitude.com")||sl(i,"amplitude.com"))||!((n=e.ignoreHosts)===null||n===void 0)&&n.find(function(o){return sl(i,o)})||!e.captureRules&&t.status!==void 0&&!Xd(t.status,Gd))return!1;if(e.captureRules){var r;if(D([],U(e.captureRules),!1).reverse().find(function(o){if(r=R0(o,i,t.status,t.url,t.method),r){var a=_o(o.responseHeaders);if(t.responseWrapper&&a){var c=t.responseWrapper.headers(a);c&&(t.responseHeaders=c)}var d=_o(o.requestHeaders);if(t.requestWrapper&&d){var s=t.requestWrapper.headers(d);s&&(t.requestHeaders=s)}t.responseWrapper&&o.responseBody&&!Oo(o.responseBody)&&(t.responseBodyJson=t.responseWrapper.json(o.responseBody.allowlist,o.responseBody.blocklist)),t.requestWrapper&&o.requestBody&&!Oo(o.requestBody)&&(t.requestBodyJson=t.requestWrapper.json(o.requestBody.allowlist,o.requestBody.blocklist))}return r!==void 0}),!r)return!1}return!(t.requestWrapper&&E0(i,t.requestWrapper))}function v0(t,e,n,l){return W(this,void 0,void 0,function(){var i,r,o;return C(this,function(a){switch(a.label){case 0:return e.requestBodyJson||e.responseBodyJson?[4,Promise.all([e.requestBodyJson,e.responseBodyJson])]:[3,2];case 1:if(i=U.apply(void 0,[a.sent(),2]),r=i[0],o=i[1],r)try{t["[Amplitude] Request Body"]=JSON.stringify(r)}catch(c){l==null||l.debug("Failed to stringify request body",c)}if(o)try{t["[Amplitude] Response Body"]=JSON.stringify(o)}catch{l==null||l.debug("Failed to stringify response body")}a.label=2;case 2:return n==null||n.track(Zd,t),[2]}})})}function S0(t){var e=t.allObservables,n=t.networkTrackingOptions,l=t.amplitude,i=t.loggerProvider,r=e.networkObservable,o=r.pipe(ke(function(a){return y0(a.event,n)}));return o.subscribe(function(a){var c,d,s,u=a.event,h=Id(u.url);if(h){var g=(d=u.responseWrapper)===null||d===void 0?void 0:d.bodySize,b=(s=u.requestWrapper)===null||s===void 0?void 0:s.bodySize,m=(c={},c["[Amplitude] URL"]=h.hrefWithoutQueryOrHash,c["[Amplitude] URL Query"]=h.query,c["[Amplitude] URL Fragment"]=h.fragment,c["[Amplitude] Request Method"]=u.method,c["[Amplitude] Status Code"]=u.status,c["[Amplitude] Start Time"]=u.startTime,c["[Amplitude] Completion Time"]=u.endTime,c["[Amplitude] Duration"]=u.duration,c["[Amplitude] Request Body Size"]=b,c["[Amplitude] Response Body Size"]=g,c["[Amplitude] Request Type"]=u.type,c["[Amplitude] Request Headers"]=u.requestHeaders,c["[Amplitude] Response Headers"]=u.responseHeaders,c);v0(m,u,l,i)}})}var Ei;(function(t){t.NetworkObservable="networkObservable"})(Ei||(Ei={}));var C0=function(t){t===void 0&&(t={});var e=I0,n="enrichment",l,i=[],r=function(s,u){var h={event:s,timestamp:Date.now(),type:u};return h},o=function(){var s,u=new Re(function(h){var g=new ah(function(b){var m=r(b,"network");h.next(m)});return oo.subscribe(g,l),function(){oo.unsubscribe(g)}});return s={},s[Ei.NetworkObservable]=u,s},a=function(s,u){return W(void 0,void 0,void 0,function(){var h,g;return C(this,function(b){return typeof document>"u"?[2]:(h=o(),l=s==null?void 0:s.loggerProvider,g=S0({allObservables:h,networkTrackingOptions:t,amplitude:u,loggerProvider:l}),i.push(g),l==null||l.log("".concat(e," has been successfully added.")),[2])})})},c=function(s){return W(void 0,void 0,void 0,function(){return C(this,function(u){return[2,s]})})},d=function(){return W(void 0,void 0,void 0,function(){var s,u,h,g,b;return C(this,function(m){try{for(s=H(i),u=s.next();!u.done;u=s.next())h=u.value,h.unsubscribe()}catch(f){g={error:f}}finally{try{u&&!u.done&&(b=s.return)&&b.call(s)}finally{if(g)throw g.error}}return[2]})})};return{name:e,type:n,setup:a,execute:c,teardown:d}},W0="web-vitals-browser",B0="[Amplitude] Web Vitals";let Rd=-1;const on=t=>{addEventListener("pageshow",(e=>{e.persisted&&(Rd=e.timeStamp,t(e))}),!0)},mt=(t,e,n,l)=>{let i,r;return o=>{e.value>=0&&(o||l)&&(r=e.value-(i??0),(r||i===void 0)&&(i=e.value,e.delta=r,e.rating=((a,c)=>a>c[1]?"poor":a>c[0]?"needs-improvement":"good")(e.value,n),t(e)))}},lr=t=>{requestAnimationFrame((()=>requestAnimationFrame((()=>t()))))},ir=()=>{const t=performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},wn=()=>{const t=ir();return(t==null?void 0:t.activationStart)??0},ft=(t,e=-1)=>{const n=ir();let l="navigate";return Rd>=0?l="back-forward-cache":n&&(document.prerendering||wn()>0?l="prerender":document.wasDiscarded?l="restore":n.type&&(l=n.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:l}},ni=new WeakMap;function rr(t,e){return ni.get(t)||ni.set(t,new e),ni.get(t)}let N0=class{constructor(){pt(this,"t");pt(this,"i",0);pt(this,"o",[])}h(e){var i;if(e.hadRecentInput)return;const n=this.o[0],l=this.o.at(-1);this.i&&n&&l&&e.startTime-l.startTime<1e3&&e.startTime-n.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),(i=this.t)==null||i.call(this,e)}};const kn=(t,e,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const l=new PerformanceObserver((i=>{Promise.resolve().then((()=>{e(i.getEntries())}))}));return l.observe({type:t,buffered:!0,...n}),l}}catch{}},or=t=>{let e=!1;return()=>{e||(t(),e=!0)}};let jt=-1;const Ed=new Set,Po=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,yi=t=>{if(document.visibilityState==="hidden"){if(t.type==="visibilitychange")for(const e of Ed)e();isFinite(jt)||(jt=t.type==="visibilitychange"?t.timeStamp:0,removeEventListener("prerenderingchange",yi,!0))}},Yl=()=>{var t;if(jt<0){const e=wn();jt=(document.prerendering||(t=globalThis.performance.getEntriesByType("visibility-state").filter((l=>l.name==="hidden"&&l.startTime>e))[0])==null?void 0:t.startTime)??Po(),addEventListener("visibilitychange",yi,!0),addEventListener("prerenderingchange",yi,!0),on((()=>{setTimeout((()=>{jt=Po()}))}))}return{get firstHiddenTime(){return jt},onHidden(e){Ed.add(e)}}},Ul=t=>{document.prerendering?addEventListener("prerenderingchange",(()=>t()),!0):t()},$o=[1800,3e3],yd=(t,e={})=>{Ul((()=>{const n=Yl();let l,i=ft("FCP");const r=kn("paint",(o=>{for(const a of o)a.name==="first-contentful-paint"&&(r.disconnect(),a.startTime<n.firstHiddenTime&&(i.value=Math.max(a.startTime-wn(),0),i.entries.push(a),l(!0)))}));r&&(l=mt(t,i,$o,e.reportAllChanges),on((o=>{i=ft("FCP"),l=mt(t,i,$o,e.reportAllChanges),lr((()=>{i.value=performance.now()-o.timeStamp,l(!0)}))})))}))},qo=[.1,.25],F0=(t,e={})=>{const n=Yl();yd(or((()=>{let l,i=ft("CLS",0);const r=rr(e,N0),o=c=>{for(const d of c)r.h(d);r.i>i.value&&(i.value=r.i,i.entries=r.o,l())},a=kn("layout-shift",o);a&&(l=mt(t,i,qo,e.reportAllChanges),n.onHidden((()=>{o(a.takeRecords()),l(!0)})),on((()=>{r.i=0,i=ft("CLS",0),l=mt(t,i,qo,e.reportAllChanges),lr((()=>l()))})),setTimeout(l))})))};let vd=0,li=1/0,On=0;const Y0=t=>{for(const e of t)e.interactionId&&(li=Math.min(li,e.interactionId),On=Math.max(On,e.interactionId),vd=On?(On-li)/7+1:0)};let vi;const ea=()=>vi?vd:performance.interactionCount??0,U0=()=>{"interactionCount"in performance||vi||(vi=kn("event",Y0,{type:"event",buffered:!0,durationThreshold:0}))};let ta=0,J0=class{constructor(){pt(this,"u",[]);pt(this,"l",new Map);pt(this,"m");pt(this,"p")}v(){ta=ea(),this.u.length=0,this.l.clear()}L(){const e=Math.min(this.u.length-1,Math.floor((ea()-ta)/50));return this.u[e]}h(e){var i,r;if((i=this.m)==null||i.call(this,e),!e.interactionId&&e.entryType!=="first-input")return;const n=this.u.at(-1);let l=this.l.get(e.interactionId);if(l||this.u.length<10||e.duration>n.P){if(l?e.duration>l.P?(l.entries=[e],l.P=e.duration):e.duration===l.P&&e.startTime===l.entries[0].startTime&&l.entries.push(e):(l={id:e.interactionId,entries:[e],P:e.duration},this.l.set(l.id,l),this.u.push(l)),this.u.sort(((o,a)=>a.P-o.P)),this.u.length>10){const o=this.u.splice(10);for(const a of o)this.l.delete(a.id)}(r=this.p)==null||r.call(this,l)}}};const Sd=t=>{const e=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?t():(t=or(t),addEventListener("visibilitychange",t,{once:!0,capture:!0}),e((()=>{t(),removeEventListener("visibilitychange",t,{capture:!0})})))},na=[200,500],x0=(t,e={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;const n=Yl();Ul((()=>{U0();let l,i=ft("INP");const r=rr(e,J0),o=c=>{Sd((()=>{for(const s of c)r.h(s);const d=r.L();d&&d.P!==i.value&&(i.value=d.P,i.entries=d.entries,l())}))},a=kn("event",o,{durationThreshold:e.durationThreshold??40});l=mt(t,i,na,e.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),n.onHidden((()=>{o(a.takeRecords()),l(!0)})),on((()=>{r.v(),i=ft("INP"),l=mt(t,i,na,e.reportAllChanges)})))}))};let w0=class{constructor(){pt(this,"m")}h(e){var n;(n=this.m)==null||n.call(this,e)}};const la=[2500,4e3],k0=(t,e={})=>{Ul((()=>{const n=Yl();let l,i=ft("LCP");const r=rr(e,w0),o=c=>{e.reportAllChanges||(c=c.slice(-1));for(const d of c)r.h(d),d.startTime<n.firstHiddenTime&&(i.value=Math.max(d.startTime-wn(),0),i.entries=[d],l())},a=kn("largest-contentful-paint",o);if(a){l=mt(t,i,la,e.reportAllChanges);const c=or((()=>{o(a.takeRecords()),a.disconnect(),l(!0)})),d=s=>{s.isTrusted&&(Sd(c),removeEventListener(s.type,d,{capture:!0}))};for(const s of["keydown","click","visibilitychange"])addEventListener(s,d,{capture:!0});on((s=>{i=ft("LCP"),l=mt(t,i,la,e.reportAllChanges),lr((()=>{i.value=performance.now()-s.timeStamp,l(!0)}))}))}}))},ia=[800,1800],Si=t=>{document.prerendering?Ul((()=>Si(t))):document.readyState!=="complete"?addEventListener("load",(()=>Si(t)),!0):setTimeout(t)},z0=(t,e={})=>{let n=ft("TTFB"),l=mt(t,n,ia,e.reportAllChanges);Si((()=>{const i=ir();i&&(n.value=Math.max(i.responseStart-wn(),0),n.entries=[i],l(!0),on((()=>{n=ft("TTFB",0),l=mt(t,n,ia,e.reportAllChanges),l(!0)})))}))};function Q0(t){var e,n=((e=t.entries[0])===null||e===void 0?void 0:e.startTime)||0;return performance.timeOrigin+n}function un(t){return{value:t.value,rating:t.rating,delta:t.delta,navigationType:t.navigationType,id:t.id,timestamp:Math.floor(Q0(t)),navigationStart:Math.floor(performance.timeOrigin)}}var L0=function(){var t=null,e=Fe(),n=e==null?void 0:e.document,l=e==null?void 0:e.location,i=function(a,c){return W(void 0,void 0,void 0,function(){var d,s,u;return C(this,function(h){return d=function(g){var b;if(!g)return"";var m=g;try{m=decodeURI(g)}catch(f){(b=a.loggerProvider)===null||b===void 0||b.error("Malformed URI sequence: ",f)}return m},n===void 0?[2]:(s=d(l==null?void 0:l.href),u={"[Amplitude] Page Domain":(l==null?void 0:l.hostname)||"","[Amplitude] Page Location":s,"[Amplitude] Page Path":d(l==null?void 0:l.pathname),"[Amplitude] Page Title":typeof document<"u"&&document.title||"","[Amplitude] Page URL":s.split("?")[0]},k0(function(g){u["[Amplitude] LCP"]=un(g)}),yd(function(g){u["[Amplitude] FCP"]=un(g)}),x0(function(g){u["[Amplitude] INP"]=un(g)}),F0(function(g){u["[Amplitude] CLS"]=un(g)}),z0(function(g){u["[Amplitude] TTFB"]=un(g)}),t=function(){n.visibilityState==="hidden"&&t&&(c.track(B0,u),n.removeEventListener("visibilitychange",t),t=null)},n.addEventListener("visibilitychange",t),[2])})})},r=function(a){return W(void 0,void 0,void 0,function(){return C(this,function(c){return[2,a]})})},o=function(){return W(void 0,void 0,void 0,function(){return C(this,function(a){return t&&(n==null||n.removeEventListener("visibilitychange",t)),[2]})})};return{name:W0,type:"enrichment",setup:i,execute:r,teardown:o}},ra=function(t){var e=t.split(".");return e.length<=2?t:e.slice(e.length-2,e.length).join(".")},K0=function(t){return Object.values(t).every(function(e){return!e})},T0=function(t,e,n,l,i){i===void 0&&(i=!0),t.referrer;var r=t.referring_domain,o=mi(t,["referrer","referring_domain"]),a=e||{};a.referrer;var c=a.referring_domain,d=mi(a,["referrer","referring_domain"]);if(M0(n.excludeReferrers,t.referring_domain))return l.debug("This is not a new campaign because ".concat(t.referring_domain," is in the exclude referrer list.")),!1;if(!i&&K0(t)&&e)return l.debug("This is not a new campaign because this is a direct traffic in the same session."),!1;var s=JSON.stringify(o)!==JSON.stringify(d),u=ra(r||"")!==ra(c||""),h=!e||s||u;return h?l.debug("This is a new campaign. An $identify event will be sent."):l.debug("This is not a new campaign because it's the same as the previous one."),h},M0=function(t,e){return t===void 0&&(t=[]),e===void 0&&(e=""),t.some(function(n){return n instanceof RegExp?n.test(e):n===e})},H0=function(t,e){var n=N(N({},Ti),t),l=Object.entries(n).reduce(function(i,r){var o,a=U(r,2),c=a[0],d=a[1];return i.setOnce("initial_".concat(c),(o=d??e.initialEmptyValue)!==null&&o!==void 0?o:"EMPTY"),d?i.set(c,d):i.unset(c)},new qt);return yc(l)},D0=function(t){var e=t;return e?(e.startsWith(".")&&(e=e.substring(1)),[new RegExp("".concat(e.replace(".","\\."),"$"))]):[]},j0=(function(){function t(e,n){var l;this.shouldTrackNewCampaign=!1,this.options=N({initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1,excludeReferrers:D0((l=n.cookieOptions)===null||l===void 0?void 0:l.domain)},e),this.storage=n.cookieStorage,this.storageKey=no(n.apiKey,"MKTG"),this.webExpStorageKey=no(n.apiKey,"MKTG_ORIGINAL"),this.currentCampaign=Ti,this.sessionTimeout=n.sessionTimeout,this.lastEventTime=n.lastEventTime,this.logger=n.loggerProvider,n.loggerProvider.log("Installing web attribution tracking.")}return t.prototype.init=function(){return W(this,void 0,void 0,function(){var e,n;return C(this,function(l){switch(l.label){case 0:return[4,this.fetchCampaign()];case 1:return n=U.apply(void 0,[l.sent(),2]),this.currentCampaign=n[0],this.previousCampaign=n[1],e=this.lastEventTime?Cc(this.sessionTimeout,this.lastEventTime):!0,T0(this.currentCampaign,this.previousCampaign,this.options,this.logger,e)?(this.shouldTrackNewCampaign=!0,[4,this.storage.set(this.storageKey,this.currentCampaign)]):[3,3];case 2:l.sent(),l.label=3;case 3:return[2]}})})},t.prototype.fetchCampaign=function(){return W(this,void 0,void 0,function(){var e;return C(this,function(n){switch(n.label){case 0:return[4,this.storage.get(this.webExpStorageKey)];case 1:return e=n.sent(),e?[4,this.storage.remove(this.webExpStorageKey)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[4,Promise.all([e||new dh().parse(),this.storage.get(this.storageKey)])];case 4:return[2,n.sent()]}})})},t.prototype.generateCampaignEvent=function(e){this.shouldTrackNewCampaign=!1;var n=H0(this.currentCampaign,this.options);return e&&(n.event_id=e),n},t.prototype.shouldSetSessionIdOnNewCampaign=function(){return this.shouldTrackNewCampaign&&!!this.options.resetSessionOnNewCampaign},t})(),_0=(function(t){Me(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(n,l,i){n===void 0&&(n="");var r,o;return arguments.length>2?(r=l,o=i):typeof l=="string"?(r=l,o=void 0):(r=l==null?void 0:l.userId,o=l),Oe(this._init(N(N({},o),{userId:r,apiKey:n})))},e.prototype._init=function(n){var l,i,r;return W(this,void 0,void 0,function(){var o,a,c,d,s,u,h,g=this;return C(this,function(b){switch(b.label){case 0:return this.initializing?[2]:(this.initializing=!0,[4,Jh(n.apiKey,n,this)]);case 1:return o=b.sent(),o.fetchRemoteConfig?(this.remoteConfigClient=new fg(o.apiKey,o.loggerProvider,o.serverZone),[4,new Promise(function(m){var f;(f=g.remoteConfigClient)===null||f===void 0||f.subscribe("configs.analyticsSDK.browserSDK","all",function(p,A,X){o.loggerProvider.debug("Remote configuration received:",JSON.stringify({remoteConfig:p,source:A,lastFetch:X},null,2)),p&&nb(p,o),m()})})]):[3,3];case 2:b.sent(),b.label=3;case 3:return[4,t.prototype._init.call(this,o)];case 4:return b.sent(),this.logBrowserOptions(o),xc(this.config.defaultTracking)?(a=fh(this.config),this.webAttribution=new j0(a,this.config),[4,this.webAttribution.init()]):[3,6];case 5:b.sent(),b.label=6;case 6:return c=fl(),d=c.ampTimestamp?Number(c.ampTimestamp):void 0,s=d?Date.now()<d:!0,u=s&&!Number.isNaN(Number(c.ampSessionId))?Number(c.ampSessionId):void 0,this.setSessionId((r=(i=(l=n.sessionId)!==null&&l!==void 0?l:u)!==null&&i!==void 0?i:this.config.sessionId)!==null&&r!==void 0?r:Date.now()),h=En(n.instanceName),h.identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),this.config.offline===Tg?[3,8]:[4,this.add(tb()).promise];case 7:b.sent(),b.label=8;case 8:return[4,this.add(new Rg).promise];case 9:return b.sent(),[4,this.add(new Gh).promise];case 10:return b.sent(),[4,this.add(new Ug).promise];case 11:return b.sent(),eb(this.config),sh(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding file download tracking plugin"),[4,this.add(qh()).promise]):[3,13];case 12:b.sent(),b.label=13;case 13:return uh(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding form interaction plugin"),[4,this.add($h()).promise]):[3,15];case 14:b.sent(),b.label=15;case 15:return wc(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding page view tracking plugin"),[4,this.add(jh(mh(this.config))).promise]):[3,17];case 16:b.sent(),b.label=17;case 17:return zc(this.config.autocapture)?(this.config.loggerProvider.debug("Adding user interactions plugin (autocapture plugin)"),[4,this.add(f0(hh(this.config))).promise]):[3,19];case 18:b.sent(),b.label=19;case 19:return Qc(this.config.autocapture)?(this.config.loggerProvider.debug("Adding frustration interactions plugin"),[4,this.add(X0(bh(this.config))).promise]):[3,21];case 20:b.sent(),b.label=21;case 21:return kc(this.config.autocapture)?(this.config.loggerProvider.debug("Adding network tracking plugin"),[4,this.add(C0(Vh(this.config))).promise]):[3,23];case 22:b.sent(),b.label=23;case 23:return gh(this.config.autocapture)?(this.config.loggerProvider.debug("Adding web vitals plugin"),[4,this.add(L0()).promise]):[3,25];case 24:b.sent(),b.label=25;case 25:return this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 26:return b.sent(),h.eventBridge.setEventReceiver(function(m){g.track(m.eventType,m.eventProperties)}),[2]}})})},e.prototype.getUserId=function(){var n;return(n=this.config)===null||n===void 0?void 0:n.userId},e.prototype.setUserId=function(n){if(!this.config){this.q.push(this.setUserId.bind(this,n));return}this.config.loggerProvider.debug("function setUserId: ",n),(n!==this.config.userId||n===void 0)&&(this.config.userId=n,this.timeline.onIdentityChanged({userId:n}),Fg(n,this.config.instanceName))},e.prototype.getDeviceId=function(){var n;return(n=this.config)===null||n===void 0?void 0:n.deviceId},e.prototype.setDeviceId=function(n){if(!this.config){this.q.push(this.setDeviceId.bind(this,n));return}this.config.loggerProvider.debug("function setDeviceId: ",n),n!==this.config.deviceId&&(this.config.deviceId=n,this.timeline.onIdentityChanged({deviceId:n}),Yg(n,this.config.instanceName))},e.prototype.reset=function(){this.setDeviceId(Wt()),this.setUserId(void 0)},e.prototype.getIdentity=function(){var n,l;return{deviceId:(n=this.config)===null||n===void 0?void 0:n.deviceId,userId:(l=this.config)===null||l===void 0?void 0:l.userId,userProperties:this.userProperties}},e.prototype.getOptOut=function(){var n;return(n=this.config)===null||n===void 0?void 0:n.optOut},e.prototype.getSessionId=function(){var n;return(n=this.config)===null||n===void 0?void 0:n.sessionId},e.prototype.setSessionId=function(n){var l,i=[];if(!this.config)return this.q.push(this.setSessionId.bind(this,n)),Oe(Promise.resolve());if(n===this.config.sessionId)return Oe(Promise.resolve());this.config.loggerProvider.debug("function setSessionId: ",n);var r=this.getSessionId();r!==n&&this.timeline.onSessionIdChanged(n);var o=this.config.lastEventTime,a=(l=this.config.lastEventId)!==null&&l!==void 0?l:-1;this.config.sessionId=n,this.config.lastEventTime=void 0,this.config.pageCounter=0,ao(this.config.defaultTracking)&&(r&&o&&i.push(this.track(uo,void 0,{device_id:this.previousSessionDeviceId,event_id:++a,session_id:r,time:o+1,user_id:this.previousSessionUserId}).promise),this.config.lastEventTime=this.config.sessionId);var c=this.trackCampaignEventIfNeeded(++a,i);return ao(this.config.defaultTracking)&&i.push(this.track(so,void 0,{event_id:c?++a:a,session_id:this.config.sessionId,time:this.config.lastEventTime}).promise),this.previousSessionDeviceId=this.config.deviceId,this.previousSessionUserId=this.config.userId,Oe(Promise.all(i))},e.prototype.extendSession=function(){if(!this.config){this.q.push(this.extendSession.bind(this));return}this.config.lastEventTime=Date.now()},e.prototype.setTransport=function(n){if(!this.config){this.q.push(this.setTransport.bind(this,n));return}this.config.transportProvider=Tc(n)},e.prototype.identify=function(n,l){if(_l(n)){var i=n._q;n._q=[],n=jl(new qt,i)}return l!=null&&l.user_id&&this.setUserId(l.user_id),l!=null&&l.device_id&&this.setDeviceId(l.device_id),t.prototype.identify.call(this,n,l)},e.prototype.groupIdentify=function(n,l,i,r){if(_l(i)){var o=i._q;i._q=[],i=jl(new qt,o)}return t.prototype.groupIdentify.call(this,n,l,i,r)},e.prototype.revenue=function(n,l){if(_l(n)){var i=n._q;n._q=[],n=jl(new Ag,i)}return t.prototype.revenue.call(this,n,l)},e.prototype.trackCampaignEventIfNeeded=function(n,l){if(!this.webAttribution||!this.webAttribution.shouldTrackNewCampaign)return!1;var i=this.webAttribution.generateCampaignEvent(n);return l?l.push(this.track(i).promise):this.track(i),this.config.loggerProvider.log("Tracking attribution."),!0},e.prototype.process=function(n){return W(this,void 0,void 0,function(){var l,i,r;return C(this,function(o){return l=Date.now(),i=Cc(this.config.sessionTimeout,this.config.lastEventTime),r=this.webAttribution&&this.webAttribution.shouldSetSessionIdOnNewCampaign(),n.event_type!==so&&n.event_type!==uo&&(!n.session_id||n.session_id===this.getSessionId())&&(i||r?(this.setSessionId(l),r&&this.config.loggerProvider.log("Created a new session for new campaign.")):i||this.trackCampaignEventIfNeeded()),n.event_type===St.IDENTIFY&&n.user_properties&&(this.userProperties=this.getOperationAppliedUserProperties(n.user_properties)),[2,t.prototype.process.call(this,n)]})})},e.prototype.logBrowserOptions=function(n){try{var l=N(N({},n),{apiKey:n.apiKey.substring(0,10)+"********"});this.config.loggerProvider.debug("Initialized Amplitude with BrowserConfig:",JSON.stringify(l))}catch(i){this.config.loggerProvider.error("Error logging browser config",i)}},e})(ug),O0=function(){var t=new _0;return{init:he(t.init.bind(t),"init",ue(t),ge(t,["config"])),add:he(t.add.bind(t),"add",ue(t),ge(t,["config.apiKey","timeline.plugins"])),remove:he(t.remove.bind(t),"remove",ue(t),ge(t,["config.apiKey","timeline.plugins"])),track:he(t.track.bind(t),"track",ue(t),ge(t,["config.apiKey","timeline.queue.length"])),logEvent:he(t.logEvent.bind(t),"logEvent",ue(t),ge(t,["config.apiKey","timeline.queue.length"])),identify:he(t.identify.bind(t),"identify",ue(t),ge(t,["config.apiKey","timeline.queue.length"])),groupIdentify:he(t.groupIdentify.bind(t),"groupIdentify",ue(t),ge(t,["config.apiKey","timeline.queue.length"])),setGroup:he(t.setGroup.bind(t),"setGroup",ue(t),ge(t,["config.apiKey","timeline.queue.length"])),revenue:he(t.revenue.bind(t),"revenue",ue(t),ge(t,["config.apiKey","timeline.queue.length"])),flush:he(t.flush.bind(t),"flush",ue(t),ge(t,["config.apiKey","timeline.queue.length"])),getUserId:he(t.getUserId.bind(t),"getUserId",ue(t),ge(t,["config","config.userId"])),setUserId:he(t.setUserId.bind(t),"setUserId",ue(t),ge(t,["config","config.userId"])),getDeviceId:he(t.getDeviceId.bind(t),"getDeviceId",ue(t),ge(t,["config","config.deviceId"])),setDeviceId:he(t.setDeviceId.bind(t),"setDeviceId",ue(t),ge(t,["config","config.deviceId"])),reset:he(t.reset.bind(t),"reset",ue(t),ge(t,["config","config.userId","config.deviceId"])),getSessionId:he(t.getSessionId.bind(t),"getSessionId",ue(t),ge(t,["config"])),setSessionId:he(t.setSessionId.bind(t),"setSessionId",ue(t),ge(t,["config"])),extendSession:he(t.extendSession.bind(t),"extendSession",ue(t),ge(t,["config"])),setOptOut:he(t.setOptOut.bind(t),"setOptOut",ue(t),ge(t,["config"])),setTransport:he(t.setTransport.bind(t),"setTransport",ue(t),ge(t,["config"])),getIdentity:he(t.getIdentity.bind(t),"getIdentity",ue(t),ge(t,["config"])),getOptOut:he(t.getOptOut.bind(t),"getOptOut",ue(t),ge(t,["config"]))}};const an=O0();var P0=an.add,oa=an.identify,$0=an.init,q0=an.reset,em=an.setUserId,aa=an.track;const Gn=class Gn{constructor(){this.inited=!1,this.storageUserId=null,this.storageUserProperties={},this.experiment=null}static createPageViewTrackingEnrichment(){return{name:"page-view-tracking-enrichment",type:"enrichment",setup:async()=>{},execute:async e=>{if(e.event_properties&&typeof e.event_properties=="object")for(const n of Gn.PROPERTIES_TO_REMOVE)delete e.event_properties[n];return e}}}init(){this.inited||Se.amplitudeKey&&(this.inited=!0,P0(Gn.createPageViewTrackingEnrichment()),$0(Se.amplitudeKey,{transport:"beacon",autocapture:{elementInteractions:!0}}))}reset(){this.inited=!1,this.storageUserId=null,this.storageUserProperties={},q0()}setUserId(e){!e||this.storageUserId===e||(this.inited||this.init(),this.storageUserId=e,em(e))}trackOnce(e){this.inited||this.init(),aa(e)}batchTrack(e){this.inited||this.init();for(const n of e)aa(n)}customUserProperties(e){if(!e||Object.keys(e).length===0)return;this.inited||this.init();let n;this.storageUserProperties?n=this.extractChangedValues(this.storageUserProperties,e):n=e,this.storageUserProperties=e;const l=new qt;Object.entries(n).forEach(([i,r])=>{l.set(i,typeof r=="number"?`${r}`:r)}),oa(l)}customUserPropertyOne(e,n){if(!e||(this.inited||this.init(),this.storageUserProperties[e]===n))return;this.storageUserProperties[e]=n;const l=new qt;l.set(e,n),oa(l)}extractChangedValues(e,n){const l={};return Object.keys(n).forEach(i=>{(!(i in e)||e[i]!==n[i])&&(l[i]=n[i])}),l}formatToAmplitude(e){const{events:n,clientInfo:l}=e;return Vl("server",n.map(i=>{const{eventName:r,extData:o}=i;return{event_type:r,event_properties:{ext_data:o,client_info:l}}}))}};Gn.PROPERTIES_TO_REMOVE=["page_title","[Amplitude] Page Title"];let Ci=Gn;const ca=new Ci;function bt(t,e,n,l){return new(n||(n=Promise))((function(i,r){function o(d){try{c(l.next(d))}catch(s){r(s)}}function a(d){try{c(l.throw(d))}catch(s){r(s)}}function c(d){var s;d.done?i(d.value):(s=d.value,s instanceof n?s:new n((function(u){u(s)}))).then(o,a)}c((l=l.apply(t,[])).next())}))}function Vt(t,e){var n,l,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function a(c){return function(d){return(function(s){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(o=0)),o;)try{if(n=1,l&&(i=2&s[0]?l.return:s[0]?l.throw||((i=l.return)&&i.call(l),0):l.next)&&!(i=i.call(l,s[1])).done)return i;switch(l=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,l=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||s[0]!==6&&s[0]!==2)){o=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(s[0]===6&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(u){s=[6,u],l=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}})([c,d])}}}var Ie={exclude:[],include:[],logging:!0,timeout:1e3};function ii(t,e){if(!["include","exclude","permissions_to_check","retries","timeout","logging"].includes(t))throw new Error("Unknown option "+t);if(["include","exclude","permissions_to_check"].includes(t)&&(!Array.isArray(e)||!e.every((function(n){return typeof n=="string"}))))throw new Error("The value of the include, exclude and permissions_to_check must be an array of strings");if(["retries","timeout"].includes(t)&&typeof e!="number")throw new Error("The value of retries must be a number");Ie[t]=e}var Cd={},tm={timeout:"true"},at=function(t,e){typeof window<"u"&&(Cd[t]=e)},nm=function(){return Object.fromEntries(Object.entries(Cd).filter((function(t){var e,n=t[0];return!(!((e=Ie==null?void 0:Ie.exclude)===null||e===void 0)&&e.includes(n))})).filter((function(t){var e,n,l,i,r=t[0];return!((e=Ie==null?void 0:Ie.include)===null||e===void 0)&&e.some((function(o){return o.includes(".")}))?(n=Ie==null?void 0:Ie.include)===null||n===void 0?void 0:n.some((function(o){return o.startsWith(r)})):((l=Ie==null?void 0:Ie.include)===null||l===void 0?void 0:l.length)===0||((i=Ie==null?void 0:Ie.include)===null||i===void 0?void 0:i.includes(r))})).map((function(t){return[t[0],(0,t[1])()]})))};function Pn(t){return t^=t>>>16,t=Math.imul(t,2246822507),t^=t>>>13,t=Math.imul(t,3266489909),(t^=t>>>16)>>>0}var Je=new Uint32Array([597399067,2869860233,951274213,2716044179]);function lt(t,e){return t<<e|t>>>32-e}function ar(t,e){var n;if(e===void 0&&(e=0),e=e?0|e:0,typeof t=="string"&&(n=t,t=new TextEncoder().encode(n).buffer),!(t instanceof ArrayBuffer))throw new TypeError("Expected key to be ArrayBuffer or string");var l=new Uint32Array([e,e,e,e]);(function(r,o){for(var a=r.byteLength/16|0,c=new Uint32Array(r,0,4*a),d=0;d<a;d++){var s=c.subarray(4*d,4*(d+1));s[0]=Math.imul(s[0],Je[0]),s[0]=lt(s[0],15),s[0]=Math.imul(s[0],Je[1]),o[0]=o[0]^s[0],o[0]=lt(o[0],19),o[0]=o[0]+o[1],o[0]=Math.imul(o[0],5)+1444728091,s[1]=Math.imul(s[1],Je[1]),s[1]=lt(s[1],16),s[1]=Math.imul(s[1],Je[2]),o[1]=o[1]^s[1],o[1]=lt(o[1],17),o[1]=o[1]+o[2],o[1]=Math.imul(o[1],5)+197830471,s[2]=Math.imul(s[2],Je[2]),s[2]=lt(s[2],17),s[2]=Math.imul(s[2],Je[3]),o[2]=o[2]^s[2],o[2]=lt(o[2],15),o[2]=o[2]+o[3],o[2]=Math.imul(o[2],5)+2530024501,s[3]=Math.imul(s[3],Je[3]),s[3]=lt(s[3],18),s[3]=Math.imul(s[3],Je[0]),o[3]=o[3]^s[3],o[3]=lt(o[3],13),o[3]=o[3]+o[0],o[3]=Math.imul(o[3],5)+850148119}})(t,l),(function(r,o){var a=r.byteLength/16|0,c=r.byteLength%16,d=new Uint32Array(4),s=new Uint8Array(r,16*a,c);switch(c){case 15:d[3]=d[3]^s[14]<<16;case 14:d[3]=d[3]^s[13]<<8;case 13:d[3]=d[3]^s[12],d[3]=Math.imul(d[3],Je[3]),d[3]=lt(d[3],18),d[3]=Math.imul(d[3],Je[0]),o[3]=o[3]^d[3];case 12:d[2]=d[2]^s[11]<<24;case 11:d[2]=d[2]^s[10]<<16;case 10:d[2]=d[2]^s[9]<<8;case 9:d[2]=d[2]^s[8],d[2]=Math.imul(d[2],Je[2]),d[2]=lt(d[2],17),d[2]=Math.imul(d[2],Je[3]),o[2]=o[2]^d[2];case 8:d[1]=d[1]^s[7]<<24;case 7:d[1]=d[1]^s[6]<<16;case 6:d[1]=d[1]^s[5]<<8;case 5:d[1]=d[1]^s[4],d[1]=Math.imul(d[1],Je[1]),d[1]=lt(d[1],16),d[1]=Math.imul(d[1],Je[2]),o[1]=o[1]^d[1];case 4:d[0]=d[0]^s[3]<<24;case 3:d[0]=d[0]^s[2]<<16;case 2:d[0]=d[0]^s[1]<<8;case 1:d[0]=d[0]^s[0],d[0]=Math.imul(d[0],Je[0]),d[0]=lt(d[0],15),d[0]=Math.imul(d[0],Je[1]),o[0]=o[0]^d[0]}})(t,l),(function(r,o){o[0]=o[0]^r.byteLength,o[1]=o[1]^r.byteLength,o[2]=o[2]^r.byteLength,o[3]=o[3]^r.byteLength,o[0]=o[0]+o[1]|0,o[0]=o[0]+o[2]|0,o[0]=o[0]+o[3]|0,o[1]=o[1]+o[0]|0,o[2]=o[2]+o[0]|0,o[3]=o[3]+o[0]|0,o[0]=Pn(o[0]),o[1]=Pn(o[1]),o[2]=Pn(o[2]),o[3]=Pn(o[3]),o[0]=o[0]+o[1]|0,o[0]=o[0]+o[2]|0,o[0]=o[0]+o[3]|0,o[1]=o[1]+o[0]|0,o[2]=o[2]+o[0]|0,o[3]=o[3]+o[0]|0})(t,l);var i=new Uint8Array(l.buffer);return Array.from(i).map((function(r){return r.toString(16).padStart(2,"0")})).join("")}function lm(t,e){return new Promise((function(n){setTimeout((function(){return n(e)}),t)}))}function im(t,e,n){return Promise.all(t.map((function(l){return Promise.race([l,lm(e,n)])})))}function Wd(){return bt(this,void 0,void 0,(function(){var t,e,n,l,i;return Vt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=nm(),e=Object.keys(t),[4,im(Object.values(t),(Ie==null?void 0:Ie.timeout)||1e3,tm)];case 1:return n=r.sent(),l=n.filter((function(o){return o!==void 0})),i={},l.forEach((function(o,a){i[e[a]]=o})),[2,Bd(i,Ie.exclude||[],Ie.include||[],"")];case 2:throw r.sent();case 3:return[2]}}))}))}function Bd(t,e,n,l){l===void 0&&(l="");for(var i={},r=function(d,s){var u=l+d+".";if(typeof s!="object"||Array.isArray(s)){var h=e.some((function(m){return u.startsWith(m)})),g=n.some((function(m){return u.startsWith(m)}));h&&!g||(i[d]=s)}else{var b=Bd(s,e,n,u);Object.keys(b).length>0&&(i[d]=b)}},o=0,a=Object.entries(t);o<a.length;o++){var c=a[o];r(c[0],c[1])}return i}function rm(t){return bt(this,void 0,void 0,(function(){var e,n;return Vt(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,Wd()];case 1:return e=l.sent(),n=ar(JSON.stringify(e)),Math.random()<1e-5&&Ie.logging&&(function(i,r){bt(this,void 0,void 0,(function(){var o,a;return Vt(this,(function(c){switch(c.label){case 0:if(o="https://logging.thumbmarkjs.com/v1/log",a={thumbmark:i,components:r,version:"0.20.6"},sessionStorage.getItem("_tmjs_l"))return[3,4];sessionStorage.setItem("_tmjs_l","1"),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})];case 2:case 3:return c.sent(),[3,4];case 4:return[2]}}))}))})(n,e),[2,n.toString()];case 2:throw l.sent();case 3:return[2]}}))}))}function Pt(){if(typeof navigator>"u")return{name:"unknown",version:"unknown"};for(var t=navigator.userAgent,e={edg:"Edge",opr:"Opera",samsung:"SamsungBrowser"},n=0,l=[/(?<name>SamsungBrowser)\/(?<version>\d+(?:\.\d+)?)/,/(?<name>Edge|Edg)\/(?<version>\d+(?:\.\d+)?)/,/(?<name>(?:Chrome|Chromium|OPR|Opera|Vivaldi|Brave))\/(?<version>\d+(?:\.\d+)?)/,/(?<name>(?:Firefox|Waterfox|Iceweasel|IceCat))\/(?<version>\d+(?:\.\d+)?)/,/(?<name>Safari)\/(?<version>\d+(?:\.\d+)?)/,/(?<name>MSIE|Trident|IEMobile).+?(?<version>\d+(?:\.\d+)?)/,/(?<name>samsung).*Version\/(?<version>\d+(?:\.\d+)?)/i,/(?<name>[A-Za-z]+)\/(?<version>\d+(?:\.\d+)?)/];n<l.length;n++){var i=l[n],r=t.match(i);if(r&&r.groups)return{name:e[r.groups.name.toLowerCase()]||r.groups.name,version:r.groups.version}}return{name:"unknown",version:"unknown"}}function om(t){for(var e=0,n=0;n<t.length;++n)e+=Math.abs(t[n]);return e}var am=Pt();function Nd(t,e,n){for(var l=[],i=0;i<t[0].data.length;i++){for(var r=[],o=0;o<t.length;o++)r.push(t[o].data[i]);l.push(cm(r))}var a=new Uint8ClampedArray(l);return new ImageData(a,e,n)}function cm(t){if(t.length===0)return 0;for(var e={},n=0,l=t;n<l.length;n++)e[r=l[n]]=(e[r]||0)+1;var i=t[0];for(var r in e)e[r]>e[i]&&(i=parseInt(r,10));return i}["SamsungBrowser","Safari"].includes(am.name)||at("audio",(function(){return bt(this,void 0,void 0,(function(){return Vt(this,(function(t){return[2,new Promise((function(e,n){try{var l=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,5e3,44100),i=l.createBufferSource(),r=l.createOscillator();r.frequency.value=1e3;var o,a=l.createDynamicsCompressor();a.threshold.value=-50,a.knee.value=40,a.ratio.value=12,a.attack.value=0,a.release.value=.2,r.connect(a),a.connect(l.destination),r.start(),l.oncomplete=function(c){o=c.renderedBuffer.getChannelData(0),e({sampleHash:om(o),oscillator:r.type,maxChannels:l.destination.maxChannelCount,channelCountMode:i.channelCountMode})},l.startRendering()}catch(c){console.error("Error creating audio fingerprint:",c),n(c)}}))]}))}))}));var Fd=Pt(),da=Fd.name.toLowerCase(),dm=Fd.version.split(".")[0]||"0",sm=parseInt(dm,10);da==="firefox"||da==="safari"&&sm===17||at("canvas",(function(){return document.createElement("canvas").getContext("2d"),new Promise((function(t){var e=Array.from({length:3},(function(){return(function(){var n=document.createElement("canvas"),l=n.getContext("2d");if(!l)return new ImageData(1,1);n.width=280,n.height=20;var i=l.createLinearGradient(0,0,n.width,n.height);i.addColorStop(0,"red"),i.addColorStop(.16666666666666666,"orange"),i.addColorStop(.3333333333333333,"yellow"),i.addColorStop(.5,"green"),i.addColorStop(.6666666666666666,"blue"),i.addColorStop(.8333333333333334,"indigo"),i.addColorStop(1,"violet"),l.fillStyle=i,l.fillRect(0,0,n.width,n.height);var r="Random Text WMwmil10Oo";return l.font="23.123px Arial",l.fillStyle="black",l.fillText(r,-5,15),l.fillStyle="rgba(0, 0, 255, 0.5)",l.fillText(r,-3.3,17.7),l.beginPath(),l.moveTo(0,0),l.lineTo(2*n.width/7,n.height),l.strokeStyle="white",l.lineWidth=2,l.stroke(),l.getImageData(0,0,n.width,n.height)})()}));t({commonImageDataHash:ar(Nd(e,280,20).data.toString()).toString()})}))}));var gn,um=["Arial","Arial Black","Arial Narrow","Arial Rounded MT","Arimo","Archivo","Barlow","Bebas Neue","Bitter","Bookman","Calibri","Cabin","Candara","Century","Century Gothic","Comic Sans MS","Constantia","Courier","Courier New","Crimson Text","DM Mono","DM Sans","DM Serif Display","DM Serif Text","Dosis","Droid Sans","Exo","Fira Code","Fira Sans","Franklin Gothic Medium","Garamond","Geneva","Georgia","Gill Sans","Helvetica","Impact","Inconsolata","Indie Flower","Inter","Josefin Sans","Karla","Lato","Lexend","Lucida Bright","Lucida Console","Lucida Sans Unicode","Manrope","Merriweather","Merriweather Sans","Montserrat","Myriad","Noto Sans","Nunito","Nunito Sans","Open Sans","Optima","Orbitron","Oswald","Pacifico","Palatino","Perpetua","PT Sans","PT Serif","Poppins","Prompt","Public Sans","Quicksand","Rajdhani","Recursive","Roboto","Roboto Condensed","Rockwell","Rubik","Segoe Print","Segoe Script","Segoe UI","Sora","Source Sans Pro","Space Mono","Tahoma","Taviraj","Times","Times New Roman","Titillium Web","Trebuchet MS","Ubuntu","Varela Round","Verdana","Work Sans"],gm=["monospace","sans-serif","serif"];function sa(t,e){if(!t)throw new Error("Canvas context not supported");return t.font,t.font="72px ".concat(e),t.measureText("WwMmLli0Oo").width}function hm(){var t,e=document.createElement("canvas"),n=(t=e.getContext("webgl"))!==null&&t!==void 0?t:e.getContext("experimental-webgl");if(n&&"getParameter"in n)try{var l=(n.getParameter(n.VENDOR)||"").toString(),i=(n.getParameter(n.RENDERER)||"").toString(),r={vendor:l,renderer:i,version:(n.getParameter(n.VERSION)||"").toString(),shadingLanguageVersion:(n.getParameter(n.SHADING_LANGUAGE_VERSION)||"").toString()};if(!i.length||!l.length){var o=n.getExtension("WEBGL_debug_renderer_info");if(o){var a=(n.getParameter(o.UNMASKED_VENDOR_WEBGL)||"").toString(),c=(n.getParameter(o.UNMASKED_RENDERER_WEBGL)||"").toString();a&&(r.vendorUnmasked=a),c&&(r.rendererUnmasked=c)}}return r}catch{}return"undefined"}function bm(){var t=new Float32Array(1),e=new Uint8Array(t.buffer);return t[0]=1/0,t[0]=t[0]-t[0],e[3]}function Vm(t,e){var n={};return e.forEach((function(l){var i=(function(r){if(r.length===0)return null;var o={};r.forEach((function(d){var s=String(d);o[s]=(o[s]||0)+1}));var a=r[0],c=1;return Object.keys(o).forEach((function(d){o[d]>c&&(a=d,c=o[d])})),a})(t.map((function(r){return l in r?r[l]:void 0})).filter((function(r){return r!==void 0})));i&&(n[l]=i)})),n}function mm(){var t=[],e={"prefers-contrast":["high","more","low","less","forced","no-preference"],"any-hover":["hover","none"],"any-pointer":["none","coarse","fine"],pointer:["none","coarse","fine"],hover:["hover","none"],update:["fast","slow"],"inverted-colors":["inverted","none"],"prefers-reduced-motion":["reduce","no-preference"],"prefers-reduced-transparency":["reduce","no-preference"],scripting:["none","initial-only","enabled"],"forced-colors":["active","none"]};return Object.keys(e).forEach((function(n){e[n].forEach((function(l){matchMedia("(".concat(n,": ").concat(l,")")).matches&&t.push("".concat(n,": ").concat(l))}))})),t}Pt().name!="Firefox"&&at("fonts",(function(){var t=this;return new Promise((function(e,n){try{(function(l){var i;bt(this,void 0,void 0,(function(){var r,o,a;return Vt(this,(function(c){switch(c.label){case 0:return document.body?[3,2]:[4,(d=50,new Promise((function(u){return setTimeout(u,d,s)})))];case 1:return c.sent(),[3,0];case 2:if((r=document.createElement("iframe")).setAttribute("frameBorder","0"),(o=r.style).setProperty("position","fixed"),o.setProperty("display","block","important"),o.setProperty("visibility","visible"),o.setProperty("border","0"),o.setProperty("opacity","0"),r.src="about:blank",document.body.appendChild(r),!(a=r.contentDocument||((i=r.contentWindow)===null||i===void 0?void 0:i.document)))throw new Error("Iframe document is not accessible");return l({iframe:a}),setTimeout((function(){document.body.removeChild(r)}),0),[2]}var d,s}))}))})((function(l){var i=l.iframe;return bt(t,void 0,void 0,(function(){var r,o,a,c;return Vt(this,(function(d){return r=i.createElement("canvas"),o=r.getContext("2d"),a=gm.map((function(s){return sa(o,s)})),c={},um.forEach((function(s){var u=sa(o,s);a.includes(u)||(c[s]=u)})),e(c),[2]}))}))}))}catch{n({error:"unsupported"})}}))})),at("hardware",(function(){return new Promise((function(t,e){var n=navigator.deviceMemory!==void 0?navigator.deviceMemory:0,l=window.performance&&window.performance.memory?window.performance.memory:0;t({videocard:hm(),architecture:bm(),deviceMemory:n.toString()||"undefined",jsHeapSizeLimit:l.jsHeapSizeLimit||0})}))})),at("locales",(function(){return new Promise((function(t){t({languages:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone})}))})),at("permissions",(function(){return bt(this,void 0,void 0,(function(){var t;return Vt(this,(function(e){return gn=(Ie==null?void 0:Ie.permissions_to_check)||["accelerometer","accessibility","accessibility-events","ambient-light-sensor","background-fetch","background-sync","bluetooth","camera","clipboard-read","clipboard-write","device-info","display-capture","gyroscope","geolocation","local-fonts","magnetometer","microphone","midi","nfc","notifications","payment-handler","persistent-storage","push","speaker","storage-access","top-level-storage-access","window-management","query"],Pt().name.toLowerCase()==="safari"&&(gn=gn.filter((function(n){return!["camera","geolocation","microphone"].includes(n)}))),t=Array.from({length:(Ie==null?void 0:Ie.retries)||3},(function(){return(function(){return bt(this,void 0,void 0,(function(){var n,l,i,r,o;return Vt(this,(function(a){switch(a.label){case 0:n={},l=0,i=gn,a.label=1;case 1:if(!(l<i.length))return[3,6];r=i[l],a.label=2;case 2:return a.trys.push([2,4,,5]),[4,navigator.permissions.query({name:r})];case 3:return o=a.sent(),n[r]=o.state.toString(),[3,5];case 4:return a.sent(),[3,5];case 5:return l++,[3,1];case 6:return[2,n]}}))}))})()})),[2,Promise.all(t).then((function(n){return Vm(n,gn)}))]}))}))})),at("plugins",(function(){var t=[];if(navigator.plugins)for(var e=0;e<navigator.plugins.length;e++){var n=navigator.plugins[e];t.push([n.name,n.filename,n.description].join("|"))}return new Promise((function(l){l({plugins:t})}))})),at("screen",(function(){return new Promise((function(t){t({is_touchscreen:navigator.maxTouchPoints>0,maxTouchPoints:navigator.maxTouchPoints,colorDepth:screen.colorDepth,mediaMatches:mm()})}))})),at("system",(function(){return new Promise((function(t){var e=Pt(),n={platform:window.navigator.platform,productSub:navigator.productSub,product:navigator.product,useragent:navigator.userAgent,hardwareConcurrency:navigator.hardwareConcurrency,browser:{name:e.name,version:e.version}};e.name.toLowerCase()!=="safari"&&(n.applePayVersion=(function(){if(window.location.protocol==="https:"&&typeof window.ApplePaySession=="function")try{for(var l=window.ApplePaySession.supportsVersion,i=15;i>0;i--)if(l(i))return i}catch{return 0}return 0})(),n.cookieEnabled=window.navigator.cookieEnabled),t(n)}))}));var Te,fm=Pt().name!=="SamsungBrowser"?1:3,k=null;at("webgl",(function(){return bt(this,void 0,void 0,(function(){var t;return Vt(this,(function(e){typeof document<"u"&&((Te=document.createElement("canvas")).width=200,Te.height=100,k=Te.getContext("webgl"));try{if(!k)throw new Error("WebGL not supported");return t=Array.from({length:fm},(function(){return(function(){try{if(!k)throw new Error("WebGL not supported");var n=`
          attribute vec2 position;
          void main() {
              gl_Position = vec4(position, 0.0, 1.0);
          }
      `,l=`
          precision mediump float;
          void main() {
              gl_FragColor = vec4(0.812, 0.195, 0.553, 0.921); // Set line color
          }
      `,i=k.createShader(k.VERTEX_SHADER),r=k.createShader(k.FRAGMENT_SHADER);if(!i||!r)throw new Error("Failed to create shaders");if(k.shaderSource(i,n),k.shaderSource(r,l),k.compileShader(i),!k.getShaderParameter(i,k.COMPILE_STATUS))throw new Error("Vertex shader compilation failed: "+k.getShaderInfoLog(i));if(k.compileShader(r),!k.getShaderParameter(r,k.COMPILE_STATUS))throw new Error("Fragment shader compilation failed: "+k.getShaderInfoLog(r));var o=k.createProgram();if(!o)throw new Error("Failed to create shader program");if(k.attachShader(o,i),k.attachShader(o,r),k.linkProgram(o),!k.getProgramParameter(o,k.LINK_STATUS))throw new Error("Shader program linking failed: "+k.getProgramInfoLog(o));k.useProgram(o);for(var a=137,c=new Float32Array(4*a),d=2*Math.PI/a,s=0;s<a;s++){var u=s*d;c[4*s]=0,c[4*s+1]=0,c[4*s+2]=Math.cos(u)*(Te.width/2),c[4*s+3]=Math.sin(u)*(Te.height/2)}var h=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,h),k.bufferData(k.ARRAY_BUFFER,c,k.STATIC_DRAW);var g=k.getAttribLocation(o,"position");k.enableVertexAttribArray(g),k.vertexAttribPointer(g,2,k.FLOAT,!1,0,0),k.viewport(0,0,Te.width,Te.height),k.clearColor(0,0,0,1),k.clear(k.COLOR_BUFFER_BIT),k.drawArrays(k.LINES,0,2*a);var b=new Uint8ClampedArray(Te.width*Te.height*4);return k.readPixels(0,0,Te.width,Te.height,k.RGBA,k.UNSIGNED_BYTE,b),new ImageData(b,Te.width,Te.height)}catch{return new ImageData(1,1)}finally{k&&(k.bindBuffer(k.ARRAY_BUFFER,null),k.useProgram(null),k.viewport(0,0,k.drawingBufferWidth,k.drawingBufferHeight),k.clearColor(0,0,0,0))}})()})),[2,{commonImageHash:ar(Nd(t,Te.width,Te.height).data.toString()).toString()}]}catch{return[2,{webgl:"unsupported"}]}return[2]}))}))}));var Ft=function(t,e,n,l){for(var i=(n-e)/l,r=0,o=0;o<l;o++)r+=t(e+(o+.5)*i);return r*i};at("math",(function(){return bt(void 0,void 0,void 0,(function(){return Vt(this,(function(t){return[2,{acos:Math.acos(.5),asin:Ft(Math.asin,-1,1,97),atan:Ft(Math.atan,-1,1,97),cos:Ft(Math.cos,0,Math.PI,97),cosh:Math.cosh(9/7),e:Math.E,largeCos:Math.cos(1e20),largeSin:Math.sin(1e20),largeTan:Math.tan(1e20),log:Math.log(1e3),pi:Math.PI,sin:Ft(Math.sin,-Math.PI,Math.PI,97),sinh:Ft(Math.sinh,-9/7,7/9,97),sqrt:Math.sqrt(2),tan:Ft(Math.tan,0,2*Math.PI,97),tanh:Ft(Math.tanh,-9/7,7/9,97)}]}))}))}));class Am{constructor(){this.defaultIncludeOption=["audio","canvas","fonts","hardware","locales","math","permissions","plugins","screen","system","webgl"],this.currentIncludeOption=[],this.initOption()}async getId(){return await rm()}async getJsonData(){return await Wd()}initOption(){this.currentIncludeOption=[...this.defaultIncludeOption],ii("exclude",["fonts","locales","permissions","plugins","system.browser.name","system.browser.version"])}changeIncludeOption(e){typeof e=="string"?(this.currentIncludeOption=this.currentIncludeOption.includes(e)?this.currentIncludeOption.filter(n=>n!==e):[...this.currentIncludeOption,e],ii("include",this.currentIncludeOption)):(this.currentIncludeOption=[...e],ii("include",this.currentIncludeOption))}}const pm=new Am;class Zm{constructor(e,n){this.interval=e,this.getClientInfo=n,this.events=[],this.timer=null}push(e){e.extData||(e.extData={}),e.extData.url=window.location.href,this.events.push(e),this.doChecking()}doChecking(){this.timer&&this.clearTimer(),this.timer=setTimeout(()=>{this.send(),this.clearTimer()},this.interval)}clearTimer(){clearTimeout(this.timer),this.timer=null}async send(){var i;const e={...this.getClientInfo(),tmToken:await pm.getId()},n={events:this.events,clientInfo:e},l=ca.formatToAmplitude(n);ca.batchTrack(l),(i=navigator==null?void 0:navigator.sendBeacon)==null||i.call(navigator,`${Se.apiHost}/api/user_behavior/batch_create_event_v2`,JSON.stringify(Vl("server",n))),this.events=[]}}function Gm(){const t=new Date;return{clientType:"web",clientVersion:"",productName:"Manus",timezone:(()=>{try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{return}})(),timezoneOffset:t.getTimezoneOffset()}}const Xm=new Zm(200,Gm);function wt(t){(Array.isArray(t)?t:[t]).map(n=>({...n,extData:{...n.extData},eventAt:new Date().toISOString()})).forEach(n=>{Xm.push(n)})}class Im{getCookie(e){if(typeof document>"u")return console.warn("CookieHelper: Cannot get cookie in a non-browser environment."),null;const n=e+"=",l=document.cookie.split(";");for(let i=0;i<l.length;i++){let r=l[i];for(;r.charAt(0)===" ";)r=r.substring(1,r.length);if(r.indexOf(n)===0)return r.substring(n.length,r.length)}return null}setCookie(e,n,l={}){if(typeof document>"u"){console.warn("CookieHelper: Cannot set cookie in a non-browser environment.");return}let i="";if(l.daysToExpire){const d=new Date;d.setTime(d.getTime()+l.daysToExpire*24*60*60*1e3),i="; expires="+d.toUTCString()}const r=l.path?"; path="+l.path:"; path=/",o=l.domain?"; domain="+l.domain:"",a=l.secure?"; secure":"",c=l.sameSite?"; samesite="+l.sameSite:"";document.cookie=e+"="+(n||"")+i+r+o+a+c}deleteCookie(e,n={}){if(typeof document>"u"){console.warn("CookieHelper: Cannot delete cookie in a non-browser environment.");return}this.setCookie(e,"",{daysToExpire:-1,path:n.path,domain:n.domain})}}const $n=new Im,Q={spaceEditorHighlight:"__manus__-space-editor-highlight",virtualTextNode:"__manus__virtual-text-node",onlyTextNode:"__manus__only-text-node",textNodeActive:"__manus__text-node-active",editModeActive:"__manus__edit-mode-active",spaceControlView:"__manus__space-editor-control-panel",textEditorPanelView:"__manus__space-editor-text-editor-modal",elementEditorPanelView:"__manus__space-editor-element-editor-modal",footerToolbarView:"__manus__space-footer-toolbar",colorPicker:"clr-picker",copyNode:"__manus__copy-node",hidden:"__manus__hidden"},Vn={accessToken:"access_token"};var P;(function(t){t[t.Canceled=1]="Canceled",t[t.Unknown=2]="Unknown",t[t.InvalidArgument=3]="InvalidArgument",t[t.DeadlineExceeded=4]="DeadlineExceeded",t[t.NotFound=5]="NotFound",t[t.AlreadyExists=6]="AlreadyExists",t[t.PermissionDenied=7]="PermissionDenied",t[t.ResourceExhausted=8]="ResourceExhausted",t[t.FailedPrecondition=9]="FailedPrecondition",t[t.Aborted=10]="Aborted",t[t.OutOfRange=11]="OutOfRange",t[t.Unimplemented=12]="Unimplemented",t[t.Internal=13]="Internal",t[t.Unavailable=14]="Unavailable",t[t.DataLoss=15]="DataLoss",t[t.Unauthenticated=16]="Unauthenticated"})(P||(P={}));function cr(t,e){return t!==null&&typeof t=="object"&&"$typeName"in t&&typeof t.$typeName=="string"?e===void 0?!0:e.typeName===t.$typeName:!1}var Z;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(Z||(Z={}));function Rm(){let t=0,e=0;for(let l=0;l<28;l+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<l,(i&128)==0)return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,(n&128)==0)return this.assertBounds(),[t,e];for(let l=3;l<=31;l+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<l,(i&128)==0)return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function ri(t,e,n){for(let r=0;r<28;r=r+7){const o=t>>>r,a=!(!(o>>>7)&&e==0),c=(a?o|128:o)&255;if(n.push(c),!a)return}const l=t>>>28&15|(e&7)<<4,i=e>>3!=0;if(n.push((i?l|128:l)&255),!!i){for(let r=3;r<31;r=r+7){const o=e>>>r,a=!!(o>>>7),c=(a?o|128:o)&255;if(n.push(c),!a)return}n.push(e>>>31&1)}}const ul=4294967296;function ua(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let l=0,i=0;function r(o,a){const c=Number(t.slice(o,a));i*=n,l=l*n+c,l>=ul&&(i=i+(l/ul|0),l=l%ul)}return r(-24,-18),r(-18,-12),r(-12,-6),r(-6),e?Ud(l,i):dr(l,i)}function Em(t,e){let n=dr(t,e);const l=n.hi&2147483648;l&&(n=Ud(n.lo,n.hi));const i=Yd(n.lo,n.hi);return l?"-"+i:i}function Yd(t,e){if({lo:t,hi:e}=ym(t,e),e<=2097151)return String(ul*e+t);const n=t&16777215,l=(t>>>24|e<<8)&16777215,i=e>>16&65535;let r=n+l*6777216+i*6710656,o=l+i*8147497,a=i*2;const c=1e7;return r>=c&&(o+=Math.floor(r/c),r%=c),o>=c&&(a+=Math.floor(o/c),o%=c),a.toString()+ga(o)+ga(r)}function ym(t,e){return{lo:t>>>0,hi:e>>>0}}function dr(t,e){return{lo:t|0,hi:e|0}}function Ud(t,e){return e=~e,t?t=~t+1:e+=1,dr(t,e)}const ga=t=>{const e=String(t);return"0000000".slice(e.length)+e};function Wi(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function vm(){let t=this.buf[this.pos++],e=t&127;if((t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,(t&128)==0)return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;(t&128)!==0&&n<10;n++)t=this.buf[this.pos++];if((t&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}var ha={};const de=Sm();function Sm(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(!!globalThis.Deno||typeof process!="object"||typeof ha!="object"||ha.BUF_BIGINT_DISABLE!=="1")){const n=BigInt("-9223372036854775808"),l=BigInt("9223372036854775807"),i=BigInt("0"),r=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(o){const a=typeof o=="bigint"?o:BigInt(o);if(a>l||a<n)throw new Error(`invalid int64: ${o}`);return a},uParse(o){const a=typeof o=="bigint"?o:BigInt(o);if(a>r||a<i)throw new Error(`invalid uint64: ${o}`);return a},enc(o){return t.setBigInt64(0,this.parse(o),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(o){return t.setBigInt64(0,this.uParse(o),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(o,a){return t.setInt32(0,o,!0),t.setInt32(4,a,!0),t.getBigInt64(0,!0)},uDec(o,a){return t.setInt32(0,o,!0),t.setInt32(4,a,!0),t.getBigUint64(0,!0)}}}return{zero:"0",supported:!1,parse(n){return typeof n!="string"&&(n=n.toString()),ba(n),n},uParse(n){return typeof n!="string"&&(n=n.toString()),Va(n),n},enc(n){return typeof n!="string"&&(n=n.toString()),ba(n),ua(n)},uEnc(n){return typeof n!="string"&&(n=n.toString()),Va(n),ua(n)},dec(n,l){return Em(n,l)},uDec(n,l){return Yd(n,l)}}}function ba(t){if(!/^-?[0-9]+$/.test(t))throw new Error("invalid int64: "+t)}function Va(t){if(!/^[0-9]+$/.test(t))throw new Error("invalid uint64: "+t)}function Lt(t,e){switch(t){case Z.STRING:return"";case Z.BOOL:return!1;case Z.DOUBLE:case Z.FLOAT:return 0;case Z.INT64:case Z.UINT64:case Z.SFIXED64:case Z.FIXED64:case Z.SINT64:return e?"0":de.zero;case Z.BYTES:return new Uint8Array(0);default:return 0}}function Cm(t,e){switch(t){case Z.BOOL:return e===!1;case Z.STRING:return e==="";case Z.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}const Jd=2,Gt=Symbol.for("reflect unsafe local");function xd(t,e){const n=t[e.localName].case;return n===void 0?n:e.fields.find(l=>l.localName===n)}function Wm(t,e){const n=e.localName;if(e.oneof)return t[e.oneof.localName].case===n;if(e.presence!=Jd)return t[n]!==void 0&&Object.prototype.hasOwnProperty.call(t,n);switch(e.fieldKind){case"list":return t[n].length>0;case"map":return Object.keys(t[n]).length>0;case"scalar":return!Cm(e.scalar,t[n]);case"enum":return t[n]!==e.enum.values[0].number}throw new Error("message field with implicit presence")}function vn(t,e){return Object.prototype.hasOwnProperty.call(t,e)&&t[e]!==void 0}function wd(t,e){if(e.oneof){const n=t[e.oneof.localName];return n.case===e.localName?n.value:void 0}return t[e.localName]}function kd(t,e,n){e.oneof?t[e.oneof.localName]={case:e.localName,value:n}:t[e.localName]=n}function Bm(t,e){const n=e.localName;if(e.oneof){const l=e.oneof.localName;t[l].case===n&&(t[l]={case:void 0})}else if(e.presence!=Jd)delete t[n];else switch(e.fieldKind){case"map":t[n]={};break;case"list":t[n]=[];break;case"enum":t[n]=e.enum.values[0].number;break;case"scalar":t[n]=Lt(e.scalar,e.longAsString);break}}function Ct(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}function sr(t,e){var n,l,i,r;if(Ct(t)&&Gt in t&&"add"in t&&"field"in t&&typeof t.field=="function"){if(e!==void 0){const o=e,a=t.field();return o.listKind==a.listKind&&o.scalar===a.scalar&&((n=o.message)===null||n===void 0?void 0:n.typeName)===((l=a.message)===null||l===void 0?void 0:l.typeName)&&((i=o.enum)===null||i===void 0?void 0:i.typeName)===((r=a.enum)===null||r===void 0?void 0:r.typeName)}return!0}return!1}function ur(t,e){var n,l,i,r;if(Ct(t)&&Gt in t&&"has"in t&&"field"in t&&typeof t.field=="function"){if(e!==void 0){const o=e,a=t.field();return o.mapKey===a.mapKey&&o.mapKind==a.mapKind&&o.scalar===a.scalar&&((n=o.message)===null||n===void 0?void 0:n.typeName)===((l=a.message)===null||l===void 0?void 0:l.typeName)&&((i=o.enum)===null||i===void 0?void 0:i.typeName)===((r=a.enum)===null||r===void 0?void 0:r.typeName)}return!0}return!1}function gr(t,e){return Ct(t)&&Gt in t&&"desc"in t&&Ct(t.desc)&&t.desc.kind==="message"&&(e===void 0||t.desc.typeName==e.typeName)}function Nm(t){return zd(t.$typeName)}function zn(t){const e=t.fields[0];return zd(t.typeName)&&e!==void 0&&e.fieldKind=="scalar"&&e.name=="value"&&e.number==1}function zd(t){return t.startsWith("google.protobuf.")&&["DoubleValue","FloatValue","Int64Value","UInt64Value","Int32Value","UInt32Value","BoolValue","StringValue","BytesValue"].includes(t.substring(16))}const Fm=999,Ym=998,gl=2;function dt(t,e){if(cr(e,t))return e;const n=km(t);return e!==void 0&&Um(t,n,e),n}function Um(t,e,n){for(const l of t.members){let i=n[l.localName];if(i==null)continue;let r;if(l.kind=="oneof"){const o=xd(n,l);if(!o)continue;r=o,i=wd(n,o)}else r=l;switch(r.fieldKind){case"message":i=hr(r,i);break;case"scalar":i=Qd(r,i);break;case"list":i=xm(r,i);break;case"map":i=Jm(r,i);break}kd(e,r,i)}return e}function Qd(t,e){return t.scalar==Z.BYTES?br(e):e}function Jm(t,e){if(Ct(e)){if(t.scalar==Z.BYTES)return ma(e,br);if(t.mapKind=="message")return ma(e,n=>hr(t,n))}return e}function xm(t,e){if(Array.isArray(e)){if(t.scalar==Z.BYTES)return e.map(br);if(t.listKind=="message")return e.map(n=>hr(t,n))}return e}function hr(t,e){if(t.fieldKind=="message"&&!t.oneof&&zn(t.message))return Qd(t.message.fields[0],e);if(Ct(e)){if(t.message.typeName=="google.protobuf.Struct"&&t.parent.typeName!=="google.protobuf.Value")return e;if(!cr(e,t.message))return dt(t.message,e)}return e}function br(t){return Array.isArray(t)?new Uint8Array(t):t}function ma(t,e){const n={};for(const l of Object.entries(t))n[l[0]]=e(l[1]);return n}const wm=Symbol(),fa=new WeakMap;function km(t){let e;if(zm(t)){const n=fa.get(t);let l,i;if(n)({prototype:l,members:i}=n);else{l={},i=new Set;for(const r of t.members)r.kind!="oneof"&&(r.fieldKind!="scalar"&&r.fieldKind!="enum"||r.presence!=gl&&(i.add(r),l[r.localName]=oi(r)));fa.set(t,{prototype:l,members:i})}e=Object.create(l),e.$typeName=t.typeName;for(const r of t.members)i.has(r)||r.kind=="field"&&(r.fieldKind=="message"||(r.fieldKind=="scalar"||r.fieldKind=="enum")&&r.presence!=gl)||(e[r.localName]=oi(r))}else{e={$typeName:t.typeName};for(const n of t.members)(n.kind=="oneof"||n.presence==gl)&&(e[n.localName]=oi(n))}return e}function zm(t){switch(t.file.edition){case Fm:return!1;case Ym:return!0;default:return t.fields.some(e=>e.presence!=gl&&e.fieldKind!="message"&&!e.oneof)}}function oi(t){if(t.kind=="oneof")return{case:void 0};if(t.fieldKind=="list")return[];if(t.fieldKind=="map")return{};if(t.fieldKind=="message")return wm;const e=t.getDefaultValue();return e!==void 0?t.fieldKind=="scalar"&&t.longAsString?e.toString():e:t.fieldKind=="scalar"?Lt(t.scalar,t.longAsString):t.enum.values[0].number}const Qm=["FieldValueInvalidError","FieldListRangeError","ForeignFieldError"];class Pe extends Error{constructor(e,n,l="FieldValueInvalidError"){super(n),this.name=l,this.field=()=>e}}function Lm(t){return t instanceof Error&&Qm.includes(t.name)&&"field"in t&&typeof t.field=="function"}const ai=Symbol.for("@bufbuild/protobuf/text-encoding");function Vr(){if(globalThis[ai]==null){const t=new globalThis.TextEncoder,e=new globalThis.TextDecoder;globalThis[ai]={encodeUtf8(n){return t.encode(n)},decodeUtf8(n){return e.decode(n)},checkUtf8(n){try{return encodeURIComponent(n),!0}catch{return!1}}}}return globalThis[ai]}var fe;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(fe||(fe={}));const Ld=34028234663852886e22,Kd=-34028234663852886e22,Td=4294967295,Md=2147483647,Hd=-2147483648;class Dd{constructor(e=Vr().encodeUtf8){this.encodeUtf8=e,this.stack=[],this.chunks=[],this.buf=[]}finish(){this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]);let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let n=new Uint8Array(e),l=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],l),l+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Aa(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return ci(e),Wi(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.encodeUtf8(e);return this.uint32(n.byteLength),this.raw(n)}float(e){Km(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){Aa(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){ci(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return ci(e),e=(e<<1^e>>31)>>>0,Wi(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),l=new DataView(n.buffer),i=de.enc(e);return l.setInt32(0,i.lo,!0),l.setInt32(4,i.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),l=new DataView(n.buffer),i=de.uEnc(e);return l.setInt32(0,i.lo,!0),l.setInt32(4,i.hi,!0),this.raw(n)}int64(e){let n=de.enc(e);return ri(n.lo,n.hi,this.buf),this}sint64(e){const n=de.enc(e),l=n.hi>>31,i=n.lo<<1^l,r=(n.hi<<1|n.lo>>>31)^l;return ri(i,r,this.buf),this}uint64(e){const n=de.uEnc(e);return ri(n.lo,n.hi,this.buf),this}}class mr{constructor(e,n=Vr().decodeUtf8){this.decodeUtf8=n,this.varint64=Rm,this.uint32=vm,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength)}tag(){let e=this.uint32(),n=e>>>3,l=e&7;if(n<=0||l<0||l>5)throw new Error("illegal tag: field no "+n+" wire type "+l);return[n,l]}skip(e,n){let l=this.pos;switch(e){case fe.Varint:for(;this.buf[this.pos++]&128;);break;case fe.Bit64:this.pos+=4;case fe.Bit32:this.pos+=4;break;case fe.LengthDelimited:let i=this.uint32();this.pos+=i;break;case fe.StartGroup:for(;;){const[r,o]=this.tag();if(o===fe.EndGroup){if(n!==void 0&&r!==n)throw new Error("invalid end group tag");break}this.skip(o,r)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(l,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return de.dec(...this.varint64())}uint64(){return de.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),l=-(e&1);return e=(e>>>1|(n&1)<<31)^l,n=n>>>1^l,de.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return de.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return de.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.decodeUtf8(this.bytes())}}function ci(t){if(typeof t=="string")t=Number(t);else if(typeof t!="number")throw new Error("invalid int32: "+typeof t);if(!Number.isInteger(t)||t>Md||t<Hd)throw new Error("invalid int32: "+t)}function Aa(t){if(typeof t=="string")t=Number(t);else if(typeof t!="number")throw new Error("invalid uint32: "+typeof t);if(!Number.isInteger(t)||t>Td||t<0)throw new Error("invalid uint32: "+t)}function Km(t){if(typeof t=="string"){const e=t;if(t=Number(t),Number.isNaN(t)&&e!=="NaN")throw new Error("invalid float32: "+e)}else if(typeof t!="number")throw new Error("invalid float32: "+typeof t);if(Number.isFinite(t)&&(t>Ld||t<Kd))throw new Error("invalid float32: "+t)}function Yt(t,e){const n=t.fieldKind=="list"?sr(e,t):t.fieldKind=="map"?ur(e,t):fr(t,e);if(n===!0)return;let l;switch(t.fieldKind){case"list":l=`expected ${Od(t)}, got ${Ce(e)}`;break;case"map":l=`expected ${Pd(t)}, got ${Ce(e)}`;break;default:l=Xl(t,e,n)}return new Pe(t,l)}function pa(t,e,n){const l=fr(t,n);if(l!==!0)return new Pe(t,`list item #${e+1}: ${Xl(t,n,l)}`)}function Tm(t,e,n){const l=jd(e,t.mapKey);if(l!==!0)return new Pe(t,`invalid map key: ${Xl({scalar:t.mapKey},e,l)}`);const i=fr(t,n);if(i!==!0)return new Pe(t,`map entry ${Ce(e)}: ${Xl(t,n,i)}`)}function fr(t,e){return t.scalar!==void 0?jd(e,t.scalar):t.enum!==void 0?t.enum.open?Number.isInteger(e):t.enum.values.some(n=>n.number===e):gr(e,t.message)}function jd(t,e){switch(e){case Z.DOUBLE:return typeof t=="number";case Z.FLOAT:return typeof t!="number"?!1:Number.isNaN(t)||!Number.isFinite(t)?!0:t>Ld||t<Kd?`${t.toFixed()} out of range`:!0;case Z.INT32:case Z.SFIXED32:case Z.SINT32:return typeof t!="number"||!Number.isInteger(t)?!1:t>Md||t<Hd?`${t.toFixed()} out of range`:!0;case Z.FIXED32:case Z.UINT32:return typeof t!="number"||!Number.isInteger(t)?!1:t>Td||t<0?`${t.toFixed()} out of range`:!0;case Z.BOOL:return typeof t=="boolean";case Z.STRING:return typeof t!="string"?!1:Vr().checkUtf8(t)||"invalid UTF8";case Z.BYTES:return t instanceof Uint8Array;case Z.INT64:case Z.SFIXED64:case Z.SINT64:if(typeof t=="bigint"||typeof t=="number"||typeof t=="string"&&t.length>0)try{return de.parse(t),!0}catch{return`${t} out of range`}return!1;case Z.FIXED64:case Z.UINT64:if(typeof t=="bigint"||typeof t=="number"||typeof t=="string"&&t.length>0)try{return de.uParse(t),!0}catch{return`${t} out of range`}return!1}}function Xl(t,e,n){return n=typeof n=="string"?`: ${n}`:`, got ${Ce(e)}`,t.scalar!==void 0?`expected ${Mm(t.scalar)}`+n:t.enum!==void 0?`expected ${t.enum.toString()}`+n:`expected ${_d(t.message)}`+n}function Ce(t){switch(typeof t){case"object":return t===null?"null":t instanceof Uint8Array?`Uint8Array(${t.length})`:Array.isArray(t)?`Array(${t.length})`:sr(t)?Od(t.field()):ur(t)?Pd(t.field()):gr(t)?_d(t.desc):cr(t)?`message ${t.$typeName}`:"object";case"string":return t.length>30?"string":`"${t.split('"').join('\\"')}"`;case"boolean":return String(t);case"number":return String(t);case"bigint":return String(t)+"n";default:return typeof t}}function _d(t){return`ReflectMessage (${t.typeName})`}function Od(t){switch(t.listKind){case"message":return`ReflectList (${t.message.toString()})`;case"enum":return`ReflectList (${t.enum.toString()})`;case"scalar":return`ReflectList (${Z[t.scalar]})`}}function Pd(t){switch(t.mapKind){case"message":return`ReflectMap (${Z[t.mapKey]}, ${t.message.toString()})`;case"enum":return`ReflectMap (${Z[t.mapKey]}, ${t.enum.toString()})`;case"scalar":return`ReflectMap (${Z[t.mapKey]}, ${Z[t.scalar]})`}}function Mm(t){switch(t){case Z.STRING:return"string";case Z.BOOL:return"boolean";case Z.INT64:case Z.SINT64:case Z.SFIXED64:return"bigint (int64)";case Z.UINT64:case Z.FIXED64:return"bigint (uint64)";case Z.BYTES:return"Uint8Array";case Z.DOUBLE:return"number (float64)";case Z.FLOAT:return"number (float32)";case Z.FIXED32:case Z.UINT32:return"number (uint32)";case Z.INT32:case Z.SFIXED32:case Z.SINT32:return"number (int32)"}}function rt(t,e,n=!0){return new $d(t,e,n)}class $d{get sortedFields(){var e;return(e=this._sortedFields)!==null&&e!==void 0?e:this._sortedFields=this.desc.fields.concat().sort((n,l)=>n.number-l.number)}constructor(e,n,l=!0){this.lists=new Map,this.maps=new Map,this.check=l,this.desc=e,this.message=this[Gt]=n??dt(e),this.fields=e.fields,this.oneofs=e.oneofs,this.members=e.members}findNumber(e){return this._fieldsByNumber||(this._fieldsByNumber=new Map(this.desc.fields.map(n=>[n.number,n]))),this._fieldsByNumber.get(e)}oneofCase(e){return hn(this.message,e),xd(this.message,e)}isSet(e){return hn(this.message,e),Wm(this.message,e)}clear(e){hn(this.message,e),Bm(this.message,e)}get(e){hn(this.message,e);const n=wd(this.message,e);switch(e.fieldKind){case"list":let l=this.lists.get(e);return(!l||l[Gt]!==n)&&this.lists.set(e,l=new Hm(e,n,this.check)),l;case"map":let i=this.maps.get(e);return(!i||i[Gt]!==n)&&this.maps.set(e,i=new Dm(e,n,this.check)),i;case"message":return pr(e,n,this.check);case"scalar":return n===void 0?Lt(e.scalar,!1):Zr(e,n);case"enum":return n??e.enum.values[0].number}}set(e,n){if(hn(this.message,e),this.check){const i=Yt(e,n);if(i)throw i}let l;e.fieldKind=="message"?l=Ar(e,n):ur(n)||sr(n)?l=n[Gt]:l=Gr(e,n),kd(this.message,e,l)}getUnknown(){return this.message.$unknown}setUnknown(e){this.message.$unknown=e}}function hn(t,e){if(e.parent.typeName!==t.$typeName)throw new Pe(e,`cannot use ${e.toString()} with message ${t.$typeName}`,"ForeignFieldError")}class Hm{field(){return this._field}get size(){return this._arr.length}constructor(e,n,l){this._field=e,this._arr=this[Gt]=n,this.check=l}get(e){const n=this._arr[e];return n===void 0?void 0:di(this._field,n,this.check)}set(e,n){if(e<0||e>=this._arr.length)throw new Pe(this._field,`list item #${e+1}: out of range`);if(this.check){const l=pa(this._field,e,n);if(l)throw l}this._arr[e]=Za(this._field,n)}add(e){if(this.check){const n=pa(this._field,this._arr.length,e);if(n)throw n}this._arr.push(Za(this._field,e))}clear(){this._arr.splice(0,this._arr.length)}[Symbol.iterator](){return this.values()}keys(){return this._arr.keys()}*values(){for(const e of this._arr)yield di(this._field,e,this.check)}*entries(){for(let e=0;e<this._arr.length;e++)yield[e,di(this._field,this._arr[e],this.check)]}}class Dm{constructor(e,n,l=!0){this.obj=this[Gt]=n??{},this.check=l,this._field=e}field(){return this._field}set(e,n){if(this.check){const l=Tm(this._field,e,n);if(l)throw l}return this.obj[qn(e)]=jm(this._field,n),this}delete(e){const n=qn(e),l=Object.prototype.hasOwnProperty.call(this.obj,n);return l&&delete this.obj[n],l}clear(){for(const e of Object.keys(this.obj))delete this.obj[e]}get(e){let n=this.obj[qn(e)];return n!==void 0&&(n=si(this._field,n,this.check)),n}has(e){return Object.prototype.hasOwnProperty.call(this.obj,qn(e))}*keys(){for(const e of Object.keys(this.obj))yield Ga(e,this._field.mapKey)}*entries(){for(const e of Object.entries(this.obj))yield[Ga(e[0],this._field.mapKey),si(this._field,e[1],this.check)]}[Symbol.iterator](){return this.entries()}get size(){return Object.keys(this.obj).length}*values(){for(const e of Object.values(this.obj))yield si(this._field,e,this.check)}forEach(e,n){for(const l of this.entries())e.call(n,l[1],l[0],this)}}function Ar(t,e){return gr(e)?Nm(e.message)&&!t.oneof&&t.fieldKind=="message"?e.message.value:e.desc.typeName=="google.protobuf.Struct"&&t.parent.typeName!="google.protobuf.Value"?es(e.message):e.message:e}function pr(t,e,n){return e!==void 0&&(zn(t.message)&&!t.oneof&&t.fieldKind=="message"?e={$typeName:t.message.typeName,value:Zr(t.message.fields[0],e)}:t.message.typeName=="google.protobuf.Struct"&&t.parent.typeName!="google.protobuf.Value"&&Ct(e)&&(e=qd(e))),new $d(t.message,e,n)}function Za(t,e){return t.listKind=="message"?Ar(t,e):Gr(t,e)}function di(t,e,n){return t.listKind=="message"?pr(t,e,n):Zr(t,e)}function jm(t,e){return t.mapKind=="message"?Ar(t,e):Gr(t,e)}function si(t,e,n){return t.mapKind=="message"?pr(t,e,n):e}function qn(t){return typeof t=="string"||typeof t=="number"?t:String(t)}function Ga(t,e){switch(e){case Z.STRING:return t;case Z.INT32:case Z.FIXED32:case Z.UINT32:case Z.SFIXED32:case Z.SINT32:{const n=Number.parseInt(t);if(Number.isFinite(n))return n;break}case Z.BOOL:switch(t){case"true":return!0;case"false":return!1}break;case Z.UINT64:case Z.FIXED64:try{return de.uParse(t)}catch{}break;default:try{return de.parse(t)}catch{}break}return t}function Zr(t,e){switch(t.scalar){case Z.INT64:case Z.SFIXED64:case Z.SINT64:"longAsString"in t&&t.longAsString&&typeof e=="string"&&(e=de.parse(e));break;case Z.FIXED64:case Z.UINT64:"longAsString"in t&&t.longAsString&&typeof e=="string"&&(e=de.uParse(e));break}return e}function Gr(t,e){switch(t.scalar){case Z.INT64:case Z.SFIXED64:case Z.SINT64:"longAsString"in t&&t.longAsString?e=String(e):(typeof e=="string"||typeof e=="number")&&(e=de.parse(e));break;case Z.FIXED64:case Z.UINT64:"longAsString"in t&&t.longAsString?e=String(e):(typeof e=="string"||typeof e=="number")&&(e=de.uParse(e));break}return e}function qd(t){const e={$typeName:"google.protobuf.Struct",fields:{}};if(Ct(t))for(const[n,l]of Object.entries(t))e.fields[n]=ns(l);return e}function es(t){const e={};for(const[n,l]of Object.entries(t.fields))e[n]=ts(l);return e}function ts(t){switch(t.kind.case){case"structValue":return es(t.kind.value);case"listValue":return t.kind.value.values.map(ts);case"nullValue":case void 0:return null;default:return t.kind.value}}function ns(t){const e={$typeName:"google.protobuf.Value",kind:{case:void 0}};switch(typeof t){case"number":e.kind={case:"numberValue",value:t};break;case"string":e.kind={case:"stringValue",value:t};break;case"boolean":e.kind={case:"boolValue",value:t};break;case"object":if(t===null)e.kind={case:"nullValue",value:0};else if(Array.isArray(t)){const n={$typeName:"google.protobuf.ListValue",values:[]};if(Array.isArray(t))for(const l of t)n.values.push(ns(l));e.kind={case:"listValue",value:n}}else e.kind={case:"structValue",value:qd(t)};break}return e}function Xr(t){const e=_m();let n=t.length*3/4;t[t.length-2]=="="?n-=2:t[t.length-1]=="="&&(n-=1);let l=new Uint8Array(n),i=0,r=0,o,a=0;for(let c=0;c<t.length;c++){if(o=e[t.charCodeAt(c)],o===void 0)switch(t[c]){case"=":r=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string")}switch(r){case 0:a=o,r=1;break;case 1:l[i++]=a<<2|(o&48)>>4,a=o,r=2;break;case 2:l[i++]=(a&15)<<4|(o&60)>>2,a=o,r=3;break;case 3:l[i++]=(a&3)<<6|o,r=0;break}}if(r==1)throw Error("invalid base64 string");return l.subarray(0,i)}function ls(t,e="std"){const n=is(e),l=e=="std";let i="",r=0,o,a=0;for(let c=0;c<t.length;c++)switch(o=t[c],r){case 0:i+=n[o>>2],a=(o&3)<<4,r=1;break;case 1:i+=n[a|o>>4],a=(o&15)<<2,r=2;break;case 2:i+=n[a|o>>6],i+=n[o&63],r=0;break}return r&&(i+=n[a],l&&(i+="=",r==1&&(i+="="))),i}let el,Xa,Tt;function is(t){return el||(el="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Xa=el.slice(0,-2).concat("-","_")),t=="url"?Xa:el}function _m(){if(!Tt){Tt=[];const t=is("std");for(let e=0;e<t.length;e++)Tt[t[e].charCodeAt(0)]=e;Tt[45]=t.indexOf("+"),Tt[95]=t.indexOf("/")}return Tt}function Sn(t){let e=!1;const n=[];for(let l=0;l<t.length;l++){let i=t.charAt(l);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}const Om=new Set(["constructor","toString","toJSON","valueOf"]);function Cn(t){return Om.has(t)?t+"$":t}function Ir(t){for(const e of t.field)vn(e,"jsonName")||(e.jsonName=Sn(e.name));t.nestedType.forEach(Ir)}function Pm(t,e){const n=t.values.find(l=>l.name===e);if(!n)throw new Error(`cannot parse ${t} default value: ${e}`);return n.number}function $m(t,e){switch(t){case Z.STRING:return e;case Z.BYTES:{const n=qm(e);if(n===!1)throw new Error(`cannot parse ${Z[t]} default value: ${e}`);return n}case Z.INT64:case Z.SFIXED64:case Z.SINT64:return de.parse(e);case Z.UINT64:case Z.FIXED64:return de.uParse(e);case Z.DOUBLE:case Z.FLOAT:switch(e){case"inf":return Number.POSITIVE_INFINITY;case"-inf":return Number.NEGATIVE_INFINITY;case"nan":return Number.NaN;default:return parseFloat(e)}case Z.BOOL:return e==="true";case Z.INT32:case Z.UINT32:case Z.SINT32:case Z.FIXED32:case Z.SFIXED32:return parseInt(e,10)}}function qm(t){const e=[],n={tail:t,c:"",next(){return this.tail.length==0?!1:(this.c=this.tail[0],this.tail=this.tail.substring(1),!0)},take(l){if(this.tail.length>=l){const i=this.tail.substring(0,l);return this.tail=this.tail.substring(l),i}return!1}};for(;n.next();)switch(n.c){case"\\":if(n.next())switch(n.c){case"\\":e.push(n.c.charCodeAt(0));break;case"b":e.push(8);break;case"f":e.push(12);break;case"n":e.push(10);break;case"r":e.push(13);break;case"t":e.push(9);break;case"v":e.push(11);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":{const l=n.c,i=n.take(2);if(i===!1)return!1;const r=parseInt(l+i,8);if(Number.isNaN(r))return!1;e.push(r);break}case"x":{const l=n.c,i=n.take(2);if(i===!1)return!1;const r=parseInt(l+i,16);if(Number.isNaN(r))return!1;e.push(r);break}case"u":{const l=n.c,i=n.take(4);if(i===!1)return!1;const r=parseInt(l+i,16);if(Number.isNaN(r))return!1;const o=new Uint8Array(4);new DataView(o.buffer).setInt32(0,r,!0),e.push(o[0],o[1],o[2],o[3]);break}case"U":{const l=n.c,i=n.take(8);if(i===!1)return!1;const r=de.uEnc(l+i),o=new Uint8Array(8),a=new DataView(o.buffer);a.setInt32(0,r.lo,!0),a.setInt32(4,r.hi,!0),e.push(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7]);break}}break;default:e.push(n.c.charCodeAt(0))}return new Uint8Array(e)}function*Bi(t){switch(t.kind){case"file":for(const e of t.messages)yield e,yield*Bi(e);yield*t.enums,yield*t.services,yield*t.extensions;break;case"message":for(const e of t.nestedMessages)yield e,yield*Bi(e);yield*t.nestedEnums,yield*t.nestedExtensions;break}}function rs(...t){const e=ef();if(!t.length)return e;if("$typeName"in t[0]&&t[0].$typeName=="google.protobuf.FileDescriptorSet"){for(const l of t[0].file)ya(l,e);return e}if("$typeName"in t[0]){let o=function(a){const c=[];for(const d of a.dependency){if(e.getFile(d)!=null||r.has(d))continue;const s=i(d);if(!s)throw new Error(`Unable to resolve ${d}, imported by ${a.name}`);"kind"in s?e.addFile(s,!1,!0):(r.add(s.name),c.push(s))}return c.concat(...c.map(o))};var n=o;const l=t[0],i=t[1],r=new Set;for(const a of[l,...o(l)].reverse())ya(a,e)}else for(const l of t)for(const i of l.files)e.addFile(i);return e}function ef(){const t=new Map,e=new Map,n=new Map;return{kind:"registry",types:t,extendees:e,[Symbol.iterator](){return t.values()},get files(){return n.values()},addFile(l,i,r){if(n.set(l.proto.name,l),!i)for(const o of Bi(l))this.add(o);if(r)for(const o of l.dependencies)this.addFile(o,i,r)},add(l){if(l.kind=="extension"){let i=e.get(l.extendee.typeName);i||e.set(l.extendee.typeName,i=new Map),i.set(l.number,l)}t.set(l.typeName,l)},get(l){return t.get(l)},getFile(l){return n.get(l)},getMessage(l){const i=t.get(l);return(i==null?void 0:i.kind)=="message"?i:void 0},getEnum(l){const i=t.get(l);return(i==null?void 0:i.kind)=="enum"?i:void 0},getExtension(l){const i=t.get(l);return(i==null?void 0:i.kind)=="extension"?i:void 0},getExtensionFor(l,i){var r;return(r=e.get(l.typeName))===null||r===void 0?void 0:r.get(i)},getService(l){const i=t.get(l);return(i==null?void 0:i.kind)=="service"?i:void 0}}}const tf=998,nf=999,lf=9,Wn=10,Zn=11,rf=12,Ia=14,Rr=3,of=2,Ra=1,af=0,ui=1,Ea=2,cf=3,df=1,sf=2,uf=1,os={998:{fieldPresence:1,enumType:2,repeatedFieldEncoding:2,utf8Validation:3,messageEncoding:1,jsonFormat:2,enforceNamingStyle:2,defaultSymbolVisibility:1},999:{fieldPresence:2,enumType:1,repeatedFieldEncoding:1,utf8Validation:2,messageEncoding:1,jsonFormat:1,enforceNamingStyle:2,defaultSymbolVisibility:1},1e3:{fieldPresence:1,enumType:1,repeatedFieldEncoding:1,utf8Validation:2,messageEncoding:1,jsonFormat:1,enforceNamingStyle:2,defaultSymbolVisibility:1},1001:{fieldPresence:1,enumType:1,repeatedFieldEncoding:1,utf8Validation:2,messageEncoding:1,jsonFormat:1,enforceNamingStyle:1,defaultSymbolVisibility:2}};function ya(t,e){var n,l;const i={kind:"file",proto:t,deprecated:(l=(n=t.options)===null||n===void 0?void 0:n.deprecated)!==null&&l!==void 0?l:!1,edition:Vf(t),name:t.name.replace(/\.proto$/,""),dependencies:mf(t,e),enums:[],messages:[],extensions:[],services:[],toString(){return`file ${t.name}`}},r=new Map,o={get(a){return r.get(a)},add(a){var c;ct(((c=a.proto.options)===null||c===void 0?void 0:c.mapEntry)===!0),r.set(a.typeName,a)}};for(const a of t.enumType)as(a,i,void 0,e);for(const a of t.messageType)cs(a,i,void 0,e,o);for(const a of t.service)gf(a,i,e);Ni(i,e);for(const a of r.values())Fi(a,e,o);for(const a of i.messages)Fi(a,e,o),Ni(a,e);e.addFile(i,!0)}function Ni(t,e){switch(t.kind){case"file":for(const n of t.proto.extension){const l=Yi(n,t,e);t.extensions.push(l),e.add(l)}break;case"message":for(const n of t.proto.extension){const l=Yi(n,t,e);t.nestedExtensions.push(l),e.add(l)}for(const n of t.nestedMessages)Ni(n,e);break}}function Fi(t,e,n){const l=t.proto.oneofDecl.map(r=>bf(r,t)),i=new Set;for(const r of t.proto.field){const o=pf(r,l),a=Yi(r,t,e,o,n);t.fields.push(a),t.field[a.localName]=a,o===void 0?t.members.push(a):(o.fields.push(a),i.has(o)||(i.add(o),t.members.push(o)))}for(const r of l.filter(o=>i.has(o)))t.oneofs.push(r);for(const r of t.nestedMessages)Fi(r,e,n)}function as(t,e,n,l){var i,r,o,a,c;const d=ff(t.name,t.value),s={kind:"enum",proto:t,deprecated:(r=(i=t.options)===null||i===void 0?void 0:i.deprecated)!==null&&r!==void 0?r:!1,file:e,parent:n,open:!0,name:t.name,typeName:Jl(t,n,e),value:{},values:[],sharedPrefix:d,toString(){return`enum ${this.typeName}`}};s.open=If(s),l.add(s);for(const u of t.value){const h=u.name;s.values.push(s.value[u.number]={kind:"enum_value",proto:u,deprecated:(a=(o=u.options)===null||o===void 0?void 0:o.deprecated)!==null&&a!==void 0?a:!1,parent:s,name:h,localName:Cn(d==null?h:h.substring(d.length)),number:u.number,toString(){return`enum value ${s.typeName}.${h}`}})}((c=n==null?void 0:n.nestedEnums)!==null&&c!==void 0?c:e.enums).push(s)}function cs(t,e,n,l,i){var r,o,a,c;const d={kind:"message",proto:t,deprecated:(o=(r=t.options)===null||r===void 0?void 0:r.deprecated)!==null&&o!==void 0?o:!1,file:e,parent:n,name:t.name,typeName:Jl(t,n,e),fields:[],field:{},oneofs:[],members:[],nestedEnums:[],nestedMessages:[],nestedExtensions:[],toString(){return`message ${this.typeName}`}};((a=t.options)===null||a===void 0?void 0:a.mapEntry)===!0?i.add(d):(((c=n==null?void 0:n.nestedMessages)!==null&&c!==void 0?c:e.messages).push(d),l.add(d));for(const s of t.enumType)as(s,e,d,l);for(const s of t.nestedType)cs(s,e,d,l,i)}function gf(t,e,n){var l,i;const r={kind:"service",proto:t,deprecated:(i=(l=t.options)===null||l===void 0?void 0:l.deprecated)!==null&&i!==void 0?i:!1,file:e,name:t.name,typeName:Jl(t,void 0,e),methods:[],method:{},toString(){return`service ${this.typeName}`}};e.services.push(r),n.add(r);for(const o of t.method){const a=hf(o,r,n);r.methods.push(a),r.method[a.localName]=a}}function hf(t,e,n){var l,i,r,o;let a;t.clientStreaming&&t.serverStreaming?a="bidi_streaming":t.clientStreaming?a="client_streaming":t.serverStreaming?a="server_streaming":a="unary";const c=n.getMessage(Zt(t.inputType)),d=n.getMessage(Zt(t.outputType));ct(c,`invalid MethodDescriptorProto: input_type ${t.inputType} not found`),ct(d,`invalid MethodDescriptorProto: output_type ${t.inputType} not found`);const s=t.name;return{kind:"rpc",proto:t,deprecated:(i=(l=t.options)===null||l===void 0?void 0:l.deprecated)!==null&&i!==void 0?i:!1,parent:e,name:s,localName:Cn(s.length?Cn(s[0].toLowerCase()+s.substring(1)):s),methodKind:a,input:c,output:d,idempotency:(o=(r=t.options)===null||r===void 0?void 0:r.idempotencyLevel)!==null&&o!==void 0?o:af,toString(){return`rpc ${e.typeName}.${s}`}}}function bf(t,e){return{kind:"oneof",proto:t,deprecated:!1,parent:e,fields:[],name:t.name,localName:Cn(Sn(t.name)),toString(){return`oneof ${e.typeName}.${this.name}`}}}function Yi(t,e,n,l,i){var r,o,a;const c=i===void 0,d={kind:"field",proto:t,deprecated:(o=(r=t.options)===null||r===void 0?void 0:r.deprecated)!==null&&o!==void 0?o:!1,name:t.name,number:t.number,scalar:void 0,message:void 0,enum:void 0,presence:Zf(t,l,c,e),listKind:void 0,mapKind:void 0,mapKey:void 0,delimitedEncoding:void 0,packed:void 0,longAsString:!1,getDefaultValue:void 0};if(c){const g=e.kind=="file"?e:e.file,b=e.kind=="file"?void 0:e,m=Jl(t,b,g);d.kind="extension",d.file=g,d.parent=b,d.oneof=void 0,d.typeName=m,d.jsonName=`[${m}]`,d.toString=()=>`extension ${m}`;const f=n.getMessage(Zt(t.extendee));ct(f,`invalid FieldDescriptorProto: extendee ${t.extendee} not found`),d.extendee=f}else{const g=e;ct(g.kind=="message"),d.parent=g,d.oneof=l,d.localName=l?Sn(t.name):Cn(Sn(t.name)),d.jsonName=t.jsonName,d.toString=()=>`field ${g.typeName}.${t.name}`}const s=t.label,u=t.type,h=(a=t.options)===null||a===void 0?void 0:a.jstype;if(s===Rr){const g=u==Zn?i==null?void 0:i.get(Zt(t.typeName)):void 0;if(g){d.fieldKind="map";const{key:b,value:m}=Xf(g);return d.mapKey=b.scalar,d.mapKind=m.fieldKind,d.message=m.message,d.delimitedEncoding=!1,d.enum=m.enum,d.scalar=m.scalar,d}switch(d.fieldKind="list",u){case Zn:case Wn:d.listKind="message",d.message=n.getMessage(Zt(t.typeName)),ct(d.message),d.delimitedEncoding=va(t,e);break;case Ia:d.listKind="enum",d.enum=n.getEnum(Zt(t.typeName)),ct(d.enum);break;default:d.listKind="scalar",d.scalar=u,d.longAsString=h==Ra;break}return d.packed=Gf(t,e),d}switch(u){case Zn:case Wn:d.fieldKind="message",d.message=n.getMessage(Zt(t.typeName)),ct(d.message,`invalid FieldDescriptorProto: type_name ${t.typeName} not found`),d.delimitedEncoding=va(t,e),d.getDefaultValue=()=>{};break;case Ia:{const g=n.getEnum(Zt(t.typeName));ct(g!==void 0,`invalid FieldDescriptorProto: type_name ${t.typeName} not found`),d.fieldKind="enum",d.enum=n.getEnum(Zt(t.typeName)),d.getDefaultValue=()=>vn(t,"defaultValue")?Pm(g,t.defaultValue):void 0;break}default:{d.fieldKind="scalar",d.scalar=u,d.longAsString=h==Ra,d.getDefaultValue=()=>vn(t,"defaultValue")?$m(u,t.defaultValue):void 0;break}}return d}function Vf(t){switch(t.syntax){case"":case"proto2":return tf;case"proto3":return nf;case"editions":if(t.edition in os)return t.edition;throw new Error(`${t.name}: unsupported edition`);default:throw new Error(`${t.name}: unsupported syntax "${t.syntax}"`)}}function mf(t,e){return t.dependency.map(n=>{const l=e.getFile(n);if(!l)throw new Error(`Cannot find ${n}, imported by ${t.name}`);return l})}function ff(t,e){const n=Af(t)+"_";for(const l of e){if(!l.name.toLowerCase().startsWith(n))return;const i=l.name.substring(n.length);if(i.length==0||/^\d/.test(i))return}return n}function Af(t){return(t.substring(0,1)+t.substring(1).replace(/[A-Z]/g,e=>"_"+e)).toLowerCase()}function Jl(t,e,n){let l;return e?l=`${e.typeName}.${t.name}`:n.proto.package.length>0?l=`${n.proto.package}.${t.name}`:l=`${t.name}`,l}function Zt(t){return t.startsWith(".")?t.substring(1):t}function pf(t,e){if(!vn(t,"oneofIndex")||t.proto3Optional)return;const n=e[t.oneofIndex];return ct(n,`invalid FieldDescriptorProto: oneof #${t.oneofIndex} for field #${t.number} not found`),n}function Zf(t,e,n,l){if(t.label==of)return cf;if(t.label==Rr)return Ea;if(e||t.proto3Optional||n)return ui;const i=tn("fieldPresence",{proto:t,parent:l});return i==Ea&&(t.type==Zn||t.type==Wn)?ui:i}function Gf(t,e){if(t.label!=Rr)return!1;switch(t.type){case lf:case rf:case Wn:case Zn:return!1}const n=t.options;return n&&vn(n,"packed")?n.packed:df==tn("repeatedFieldEncoding",{proto:t,parent:e})}function Xf(t){const e=t.fields.find(l=>l.number===1),n=t.fields.find(l=>l.number===2);return ct(e&&e.fieldKind=="scalar"&&e.scalar!=Z.BYTES&&e.scalar!=Z.FLOAT&&e.scalar!=Z.DOUBLE&&n&&n.fieldKind!="list"&&n.fieldKind!="map"),{key:e,value:n}}function If(t){var e;return uf==tn("enumType",{proto:t.proto,parent:(e=t.parent)!==null&&e!==void 0?e:t.file})}function va(t,e){return t.type==Wn?!0:sf==tn("messageEncoding",{proto:t,parent:e})}function tn(t,e){var n,l;const i=(n=e.proto.options)===null||n===void 0?void 0:n.features;if(i){const r=i[t];if(r!=0)return r}if("kind"in e){if(e.kind=="message")return tn(t,(l=e.parent)!==null&&l!==void 0?l:e.file);const r=os[e.edition];if(!r)throw new Error(`feature default for edition ${e.edition} not found`);return r[t]}return tn(t,e.parent)}function ct(t,e){if(!t)throw new Error(e)}function Rf(t){const e=Ef(t);return e.messageType.forEach(Ir),rs(e,()=>{}).getFile(e.name)}function Ef(t){return Object.assign(Object.create({syntax:"",edition:0}),Object.assign(Object.assign({$typeName:"google.protobuf.FileDescriptorProto",dependency:[],publicDependency:[],weakDependency:[],optionDependency:[],service:[],extension:[]},t),{messageType:t.messageType.map(ds),enumType:t.enumType.map(ss)}))}function ds(t){var e,n,l,i,r,o,a,c;return Object.assign(Object.create({visibility:0}),{$typeName:"google.protobuf.DescriptorProto",name:t.name,field:(n=(e=t.field)===null||e===void 0?void 0:e.map(yf))!==null&&n!==void 0?n:[],extension:[],nestedType:(i=(l=t.nestedType)===null||l===void 0?void 0:l.map(ds))!==null&&i!==void 0?i:[],enumType:(o=(r=t.enumType)===null||r===void 0?void 0:r.map(ss))!==null&&o!==void 0?o:[],extensionRange:(c=(a=t.extensionRange)===null||a===void 0?void 0:a.map(s=>Object.assign({$typeName:"google.protobuf.DescriptorProto.ExtensionRange"},s)))!==null&&c!==void 0?c:[],oneofDecl:[],reservedRange:[],reservedName:[]})}function yf(t){return Object.assign(Object.create({label:1,typeName:"",extendee:"",defaultValue:"",oneofIndex:0,jsonName:"",proto3Optional:!1}),Object.assign(Object.assign({$typeName:"google.protobuf.FieldDescriptorProto"},t),{options:t.options?vf(t.options):void 0}))}function vf(t){var e,n,l;return Object.assign(Object.create({ctype:0,packed:!1,jstype:0,lazy:!1,unverifiedLazy:!1,deprecated:!1,weak:!1,debugRedact:!1,retention:0}),Object.assign(Object.assign({$typeName:"google.protobuf.FieldOptions"},t),{targets:(e=t.targets)!==null&&e!==void 0?e:[],editionDefaults:(l=(n=t.editionDefaults)===null||n===void 0?void 0:n.map(r=>Object.assign({$typeName:"google.protobuf.FieldOptions.EditionDefault"},r)))!==null&&l!==void 0?l:[],uninterpretedOption:[]}))}function ss(t){return Object.assign(Object.create({visibility:0}),{$typeName:"google.protobuf.EnumDescriptorProto",name:t.name,reservedName:[],reservedRange:[],value:t.value.map(n=>Object.assign({$typeName:"google.protobuf.EnumValueDescriptorProto"},n))})}function Qn(t,e,...n){return n.reduce((l,i)=>l.nestedMessages[i],t.messages[e])}const us=Rf({name:"google/protobuf/descriptor.proto",package:"google.protobuf",messageType:[{name:"FileDescriptorSet",field:[{name:"file",number:1,type:11,label:3,typeName:".google.protobuf.FileDescriptorProto"}],extensionRange:[{start:536e6,end:536000001}]},{name:"FileDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"package",number:2,type:9,label:1},{name:"dependency",number:3,type:9,label:3},{name:"public_dependency",number:10,type:5,label:3},{name:"weak_dependency",number:11,type:5,label:3},{name:"option_dependency",number:15,type:9,label:3},{name:"message_type",number:4,type:11,label:3,typeName:".google.protobuf.DescriptorProto"},{name:"enum_type",number:5,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto"},{name:"service",number:6,type:11,label:3,typeName:".google.protobuf.ServiceDescriptorProto"},{name:"extension",number:7,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"options",number:8,type:11,label:1,typeName:".google.protobuf.FileOptions"},{name:"source_code_info",number:9,type:11,label:1,typeName:".google.protobuf.SourceCodeInfo"},{name:"syntax",number:12,type:9,label:1},{name:"edition",number:14,type:14,label:1,typeName:".google.protobuf.Edition"}]},{name:"DescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"field",number:2,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"extension",number:6,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"nested_type",number:3,type:11,label:3,typeName:".google.protobuf.DescriptorProto"},{name:"enum_type",number:4,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto"},{name:"extension_range",number:5,type:11,label:3,typeName:".google.protobuf.DescriptorProto.ExtensionRange"},{name:"oneof_decl",number:8,type:11,label:3,typeName:".google.protobuf.OneofDescriptorProto"},{name:"options",number:7,type:11,label:1,typeName:".google.protobuf.MessageOptions"},{name:"reserved_range",number:9,type:11,label:3,typeName:".google.protobuf.DescriptorProto.ReservedRange"},{name:"reserved_name",number:10,type:9,label:3},{name:"visibility",number:11,type:14,label:1,typeName:".google.protobuf.SymbolVisibility"}],nestedType:[{name:"ExtensionRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.ExtensionRangeOptions"}]},{name:"ReservedRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1}]}]},{name:"ExtensionRangeOptions",field:[{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"},{name:"declaration",number:2,type:11,label:3,typeName:".google.protobuf.ExtensionRangeOptions.Declaration",options:{retention:2}},{name:"features",number:50,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"verification",number:3,type:14,label:1,typeName:".google.protobuf.ExtensionRangeOptions.VerificationState",defaultValue:"UNVERIFIED",options:{retention:2}}],nestedType:[{name:"Declaration",field:[{name:"number",number:1,type:5,label:1},{name:"full_name",number:2,type:9,label:1},{name:"type",number:3,type:9,label:1},{name:"reserved",number:5,type:8,label:1},{name:"repeated",number:6,type:8,label:1}]}],enumType:[{name:"VerificationState",value:[{name:"DECLARATION",number:0},{name:"UNVERIFIED",number:1}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"FieldDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"number",number:3,type:5,label:1},{name:"label",number:4,type:14,label:1,typeName:".google.protobuf.FieldDescriptorProto.Label"},{name:"type",number:5,type:14,label:1,typeName:".google.protobuf.FieldDescriptorProto.Type"},{name:"type_name",number:6,type:9,label:1},{name:"extendee",number:2,type:9,label:1},{name:"default_value",number:7,type:9,label:1},{name:"oneof_index",number:9,type:5,label:1},{name:"json_name",number:10,type:9,label:1},{name:"options",number:8,type:11,label:1,typeName:".google.protobuf.FieldOptions"},{name:"proto3_optional",number:17,type:8,label:1}],enumType:[{name:"Type",value:[{name:"TYPE_DOUBLE",number:1},{name:"TYPE_FLOAT",number:2},{name:"TYPE_INT64",number:3},{name:"TYPE_UINT64",number:4},{name:"TYPE_INT32",number:5},{name:"TYPE_FIXED64",number:6},{name:"TYPE_FIXED32",number:7},{name:"TYPE_BOOL",number:8},{name:"TYPE_STRING",number:9},{name:"TYPE_GROUP",number:10},{name:"TYPE_MESSAGE",number:11},{name:"TYPE_BYTES",number:12},{name:"TYPE_UINT32",number:13},{name:"TYPE_ENUM",number:14},{name:"TYPE_SFIXED32",number:15},{name:"TYPE_SFIXED64",number:16},{name:"TYPE_SINT32",number:17},{name:"TYPE_SINT64",number:18}]},{name:"Label",value:[{name:"LABEL_OPTIONAL",number:1},{name:"LABEL_REPEATED",number:3},{name:"LABEL_REQUIRED",number:2}]}]},{name:"OneofDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"options",number:2,type:11,label:1,typeName:".google.protobuf.OneofOptions"}]},{name:"EnumDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"value",number:2,type:11,label:3,typeName:".google.protobuf.EnumValueDescriptorProto"},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.EnumOptions"},{name:"reserved_range",number:4,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto.EnumReservedRange"},{name:"reserved_name",number:5,type:9,label:3},{name:"visibility",number:6,type:14,label:1,typeName:".google.protobuf.SymbolVisibility"}],nestedType:[{name:"EnumReservedRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1}]}]},{name:"EnumValueDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"number",number:2,type:5,label:1},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.EnumValueOptions"}]},{name:"ServiceDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"method",number:2,type:11,label:3,typeName:".google.protobuf.MethodDescriptorProto"},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.ServiceOptions"}]},{name:"MethodDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"input_type",number:2,type:9,label:1},{name:"output_type",number:3,type:9,label:1},{name:"options",number:4,type:11,label:1,typeName:".google.protobuf.MethodOptions"},{name:"client_streaming",number:5,type:8,label:1,defaultValue:"false"},{name:"server_streaming",number:6,type:8,label:1,defaultValue:"false"}]},{name:"FileOptions",field:[{name:"java_package",number:1,type:9,label:1},{name:"java_outer_classname",number:8,type:9,label:1},{name:"java_multiple_files",number:10,type:8,label:1,defaultValue:"false"},{name:"java_generate_equals_and_hash",number:20,type:8,label:1,options:{deprecated:!0}},{name:"java_string_check_utf8",number:27,type:8,label:1,defaultValue:"false"},{name:"optimize_for",number:9,type:14,label:1,typeName:".google.protobuf.FileOptions.OptimizeMode",defaultValue:"SPEED"},{name:"go_package",number:11,type:9,label:1},{name:"cc_generic_services",number:16,type:8,label:1,defaultValue:"false"},{name:"java_generic_services",number:17,type:8,label:1,defaultValue:"false"},{name:"py_generic_services",number:18,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:23,type:8,label:1,defaultValue:"false"},{name:"cc_enable_arenas",number:31,type:8,label:1,defaultValue:"true"},{name:"objc_class_prefix",number:36,type:9,label:1},{name:"csharp_namespace",number:37,type:9,label:1},{name:"swift_prefix",number:39,type:9,label:1},{name:"php_class_prefix",number:40,type:9,label:1},{name:"php_namespace",number:41,type:9,label:1},{name:"php_metadata_namespace",number:44,type:9,label:1},{name:"ruby_package",number:45,type:9,label:1},{name:"features",number:50,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],enumType:[{name:"OptimizeMode",value:[{name:"SPEED",number:1},{name:"CODE_SIZE",number:2},{name:"LITE_RUNTIME",number:3}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"MessageOptions",field:[{name:"message_set_wire_format",number:1,type:8,label:1,defaultValue:"false"},{name:"no_standard_descriptor_accessor",number:2,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"map_entry",number:7,type:8,label:1},{name:"deprecated_legacy_json_field_conflicts",number:11,type:8,label:1,options:{deprecated:!0}},{name:"features",number:12,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"FieldOptions",field:[{name:"ctype",number:1,type:14,label:1,typeName:".google.protobuf.FieldOptions.CType",defaultValue:"STRING"},{name:"packed",number:2,type:8,label:1},{name:"jstype",number:6,type:14,label:1,typeName:".google.protobuf.FieldOptions.JSType",defaultValue:"JS_NORMAL"},{name:"lazy",number:5,type:8,label:1,defaultValue:"false"},{name:"unverified_lazy",number:15,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"weak",number:10,type:8,label:1,defaultValue:"false",options:{deprecated:!0}},{name:"debug_redact",number:16,type:8,label:1,defaultValue:"false"},{name:"retention",number:17,type:14,label:1,typeName:".google.protobuf.FieldOptions.OptionRetention"},{name:"targets",number:19,type:14,label:3,typeName:".google.protobuf.FieldOptions.OptionTargetType"},{name:"edition_defaults",number:20,type:11,label:3,typeName:".google.protobuf.FieldOptions.EditionDefault"},{name:"features",number:21,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"feature_support",number:22,type:11,label:1,typeName:".google.protobuf.FieldOptions.FeatureSupport"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],nestedType:[{name:"EditionDefault",field:[{name:"edition",number:3,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"value",number:2,type:9,label:1}]},{name:"FeatureSupport",field:[{name:"edition_introduced",number:1,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"edition_deprecated",number:2,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"deprecation_warning",number:3,type:9,label:1},{name:"edition_removed",number:4,type:14,label:1,typeName:".google.protobuf.Edition"}]}],enumType:[{name:"CType",value:[{name:"STRING",number:0},{name:"CORD",number:1},{name:"STRING_PIECE",number:2}]},{name:"JSType",value:[{name:"JS_NORMAL",number:0},{name:"JS_STRING",number:1},{name:"JS_NUMBER",number:2}]},{name:"OptionRetention",value:[{name:"RETENTION_UNKNOWN",number:0},{name:"RETENTION_RUNTIME",number:1},{name:"RETENTION_SOURCE",number:2}]},{name:"OptionTargetType",value:[{name:"TARGET_TYPE_UNKNOWN",number:0},{name:"TARGET_TYPE_FILE",number:1},{name:"TARGET_TYPE_EXTENSION_RANGE",number:2},{name:"TARGET_TYPE_MESSAGE",number:3},{name:"TARGET_TYPE_FIELD",number:4},{name:"TARGET_TYPE_ONEOF",number:5},{name:"TARGET_TYPE_ENUM",number:6},{name:"TARGET_TYPE_ENUM_ENTRY",number:7},{name:"TARGET_TYPE_SERVICE",number:8},{name:"TARGET_TYPE_METHOD",number:9}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"OneofOptions",field:[{name:"features",number:1,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"EnumOptions",field:[{name:"allow_alias",number:2,type:8,label:1},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"deprecated_legacy_json_field_conflicts",number:6,type:8,label:1,options:{deprecated:!0}},{name:"features",number:7,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"EnumValueOptions",field:[{name:"deprecated",number:1,type:8,label:1,defaultValue:"false"},{name:"features",number:2,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"debug_redact",number:3,type:8,label:1,defaultValue:"false"},{name:"feature_support",number:4,type:11,label:1,typeName:".google.protobuf.FieldOptions.FeatureSupport"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"ServiceOptions",field:[{name:"features",number:34,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"deprecated",number:33,type:8,label:1,defaultValue:"false"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"MethodOptions",field:[{name:"deprecated",number:33,type:8,label:1,defaultValue:"false"},{name:"idempotency_level",number:34,type:14,label:1,typeName:".google.protobuf.MethodOptions.IdempotencyLevel",defaultValue:"IDEMPOTENCY_UNKNOWN"},{name:"features",number:35,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],enumType:[{name:"IdempotencyLevel",value:[{name:"IDEMPOTENCY_UNKNOWN",number:0},{name:"NO_SIDE_EFFECTS",number:1},{name:"IDEMPOTENT",number:2}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"UninterpretedOption",field:[{name:"name",number:2,type:11,label:3,typeName:".google.protobuf.UninterpretedOption.NamePart"},{name:"identifier_value",number:3,type:9,label:1},{name:"positive_int_value",number:4,type:4,label:1},{name:"negative_int_value",number:5,type:3,label:1},{name:"double_value",number:6,type:1,label:1},{name:"string_value",number:7,type:12,label:1},{name:"aggregate_value",number:8,type:9,label:1}],nestedType:[{name:"NamePart",field:[{name:"name_part",number:1,type:9,label:2},{name:"is_extension",number:2,type:8,label:2}]}]},{name:"FeatureSet",field:[{name:"field_presence",number:1,type:14,label:1,typeName:".google.protobuf.FeatureSet.FieldPresence",options:{retention:1,targets:[4,1],editionDefaults:[{value:"EXPLICIT",edition:900},{value:"IMPLICIT",edition:999},{value:"EXPLICIT",edition:1e3}]}},{name:"enum_type",number:2,type:14,label:1,typeName:".google.protobuf.FeatureSet.EnumType",options:{retention:1,targets:[6,1],editionDefaults:[{value:"CLOSED",edition:900},{value:"OPEN",edition:999}]}},{name:"repeated_field_encoding",number:3,type:14,label:1,typeName:".google.protobuf.FeatureSet.RepeatedFieldEncoding",options:{retention:1,targets:[4,1],editionDefaults:[{value:"EXPANDED",edition:900},{value:"PACKED",edition:999}]}},{name:"utf8_validation",number:4,type:14,label:1,typeName:".google.protobuf.FeatureSet.Utf8Validation",options:{retention:1,targets:[4,1],editionDefaults:[{value:"NONE",edition:900},{value:"VERIFY",edition:999}]}},{name:"message_encoding",number:5,type:14,label:1,typeName:".google.protobuf.FeatureSet.MessageEncoding",options:{retention:1,targets:[4,1],editionDefaults:[{value:"LENGTH_PREFIXED",edition:900}]}},{name:"json_format",number:6,type:14,label:1,typeName:".google.protobuf.FeatureSet.JsonFormat",options:{retention:1,targets:[3,6,1],editionDefaults:[{value:"LEGACY_BEST_EFFORT",edition:900},{value:"ALLOW",edition:999}]}},{name:"enforce_naming_style",number:7,type:14,label:1,typeName:".google.protobuf.FeatureSet.EnforceNamingStyle",options:{retention:2,targets:[1,2,3,4,5,6,7,8,9],editionDefaults:[{value:"STYLE_LEGACY",edition:900},{value:"STYLE2024",edition:1001}]}},{name:"default_symbol_visibility",number:8,type:14,label:1,typeName:".google.protobuf.FeatureSet.VisibilityFeature.DefaultSymbolVisibility",options:{retention:2,targets:[1],editionDefaults:[{value:"EXPORT_ALL",edition:900},{value:"EXPORT_TOP_LEVEL",edition:1001}]}}],nestedType:[{name:"VisibilityFeature",enumType:[{name:"DefaultSymbolVisibility",value:[{name:"DEFAULT_SYMBOL_VISIBILITY_UNKNOWN",number:0},{name:"EXPORT_ALL",number:1},{name:"EXPORT_TOP_LEVEL",number:2},{name:"LOCAL_ALL",number:3},{name:"STRICT",number:4}]}]}],enumType:[{name:"FieldPresence",value:[{name:"FIELD_PRESENCE_UNKNOWN",number:0},{name:"EXPLICIT",number:1},{name:"IMPLICIT",number:2},{name:"LEGACY_REQUIRED",number:3}]},{name:"EnumType",value:[{name:"ENUM_TYPE_UNKNOWN",number:0},{name:"OPEN",number:1},{name:"CLOSED",number:2}]},{name:"RepeatedFieldEncoding",value:[{name:"REPEATED_FIELD_ENCODING_UNKNOWN",number:0},{name:"PACKED",number:1},{name:"EXPANDED",number:2}]},{name:"Utf8Validation",value:[{name:"UTF8_VALIDATION_UNKNOWN",number:0},{name:"VERIFY",number:2},{name:"NONE",number:3}]},{name:"MessageEncoding",value:[{name:"MESSAGE_ENCODING_UNKNOWN",number:0},{name:"LENGTH_PREFIXED",number:1},{name:"DELIMITED",number:2}]},{name:"JsonFormat",value:[{name:"JSON_FORMAT_UNKNOWN",number:0},{name:"ALLOW",number:1},{name:"LEGACY_BEST_EFFORT",number:2}]},{name:"EnforceNamingStyle",value:[{name:"ENFORCE_NAMING_STYLE_UNKNOWN",number:0},{name:"STYLE2024",number:1},{name:"STYLE_LEGACY",number:2}]}],extensionRange:[{start:1e3,end:9995},{start:9995,end:1e4},{start:1e4,end:10001}]},{name:"FeatureSetDefaults",field:[{name:"defaults",number:1,type:11,label:3,typeName:".google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault"},{name:"minimum_edition",number:4,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"maximum_edition",number:5,type:14,label:1,typeName:".google.protobuf.Edition"}],nestedType:[{name:"FeatureSetEditionDefault",field:[{name:"edition",number:3,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"overridable_features",number:4,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"fixed_features",number:5,type:11,label:1,typeName:".google.protobuf.FeatureSet"}]}]},{name:"SourceCodeInfo",field:[{name:"location",number:1,type:11,label:3,typeName:".google.protobuf.SourceCodeInfo.Location"}],nestedType:[{name:"Location",field:[{name:"path",number:1,type:5,label:3,options:{packed:!0}},{name:"span",number:2,type:5,label:3,options:{packed:!0}},{name:"leading_comments",number:3,type:9,label:1},{name:"trailing_comments",number:4,type:9,label:1},{name:"leading_detached_comments",number:6,type:9,label:3}]}],extensionRange:[{start:536e6,end:536000001}]},{name:"GeneratedCodeInfo",field:[{name:"annotation",number:1,type:11,label:3,typeName:".google.protobuf.GeneratedCodeInfo.Annotation"}],nestedType:[{name:"Annotation",field:[{name:"path",number:1,type:5,label:3,options:{packed:!0}},{name:"source_file",number:2,type:9,label:1},{name:"begin",number:3,type:5,label:1},{name:"end",number:4,type:5,label:1},{name:"semantic",number:5,type:14,label:1,typeName:".google.protobuf.GeneratedCodeInfo.Annotation.Semantic"}],enumType:[{name:"Semantic",value:[{name:"NONE",number:0},{name:"SET",number:1},{name:"ALIAS",number:2}]}]}]}],enumType:[{name:"Edition",value:[{name:"EDITION_UNKNOWN",number:0},{name:"EDITION_LEGACY",number:900},{name:"EDITION_PROTO2",number:998},{name:"EDITION_PROTO3",number:999},{name:"EDITION_2023",number:1e3},{name:"EDITION_2024",number:1001},{name:"EDITION_1_TEST_ONLY",number:1},{name:"EDITION_2_TEST_ONLY",number:2},{name:"EDITION_99997_TEST_ONLY",number:99997},{name:"EDITION_99998_TEST_ONLY",number:99998},{name:"EDITION_99999_TEST_ONLY",number:99999},{name:"EDITION_MAX",number:2147483647}]},{name:"SymbolVisibility",value:[{name:"VISIBILITY_UNSET",number:0},{name:"VISIBILITY_LOCAL",number:1},{name:"VISIBILITY_EXPORT",number:2}]}]}),Sf=Qn(us,1);var Sa;(function(t){t[t.DECLARATION=0]="DECLARATION",t[t.UNVERIFIED=1]="UNVERIFIED"})(Sa||(Sa={}));var Ca;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.GROUP=10]="GROUP",t[t.MESSAGE=11]="MESSAGE",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.ENUM=14]="ENUM",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(Ca||(Ca={}));var Wa;(function(t){t[t.OPTIONAL=1]="OPTIONAL",t[t.REPEATED=3]="REPEATED",t[t.REQUIRED=2]="REQUIRED"})(Wa||(Wa={}));var Ba;(function(t){t[t.SPEED=1]="SPEED",t[t.CODE_SIZE=2]="CODE_SIZE",t[t.LITE_RUNTIME=3]="LITE_RUNTIME"})(Ba||(Ba={}));var Na;(function(t){t[t.STRING=0]="STRING",t[t.CORD=1]="CORD",t[t.STRING_PIECE=2]="STRING_PIECE"})(Na||(Na={}));var Fa;(function(t){t[t.JS_NORMAL=0]="JS_NORMAL",t[t.JS_STRING=1]="JS_STRING",t[t.JS_NUMBER=2]="JS_NUMBER"})(Fa||(Fa={}));var Ya;(function(t){t[t.RETENTION_UNKNOWN=0]="RETENTION_UNKNOWN",t[t.RETENTION_RUNTIME=1]="RETENTION_RUNTIME",t[t.RETENTION_SOURCE=2]="RETENTION_SOURCE"})(Ya||(Ya={}));var Ua;(function(t){t[t.TARGET_TYPE_UNKNOWN=0]="TARGET_TYPE_UNKNOWN",t[t.TARGET_TYPE_FILE=1]="TARGET_TYPE_FILE",t[t.TARGET_TYPE_EXTENSION_RANGE=2]="TARGET_TYPE_EXTENSION_RANGE",t[t.TARGET_TYPE_MESSAGE=3]="TARGET_TYPE_MESSAGE",t[t.TARGET_TYPE_FIELD=4]="TARGET_TYPE_FIELD",t[t.TARGET_TYPE_ONEOF=5]="TARGET_TYPE_ONEOF",t[t.TARGET_TYPE_ENUM=6]="TARGET_TYPE_ENUM",t[t.TARGET_TYPE_ENUM_ENTRY=7]="TARGET_TYPE_ENUM_ENTRY",t[t.TARGET_TYPE_SERVICE=8]="TARGET_TYPE_SERVICE",t[t.TARGET_TYPE_METHOD=9]="TARGET_TYPE_METHOD"})(Ua||(Ua={}));var Ui;(function(t){t[t.IDEMPOTENCY_UNKNOWN=0]="IDEMPOTENCY_UNKNOWN",t[t.NO_SIDE_EFFECTS=1]="NO_SIDE_EFFECTS",t[t.IDEMPOTENT=2]="IDEMPOTENT"})(Ui||(Ui={}));var Ja;(function(t){t[t.DEFAULT_SYMBOL_VISIBILITY_UNKNOWN=0]="DEFAULT_SYMBOL_VISIBILITY_UNKNOWN",t[t.EXPORT_ALL=1]="EXPORT_ALL",t[t.EXPORT_TOP_LEVEL=2]="EXPORT_TOP_LEVEL",t[t.LOCAL_ALL=3]="LOCAL_ALL",t[t.STRICT=4]="STRICT"})(Ja||(Ja={}));var xa;(function(t){t[t.FIELD_PRESENCE_UNKNOWN=0]="FIELD_PRESENCE_UNKNOWN",t[t.EXPLICIT=1]="EXPLICIT",t[t.IMPLICIT=2]="IMPLICIT",t[t.LEGACY_REQUIRED=3]="LEGACY_REQUIRED"})(xa||(xa={}));var wa;(function(t){t[t.ENUM_TYPE_UNKNOWN=0]="ENUM_TYPE_UNKNOWN",t[t.OPEN=1]="OPEN",t[t.CLOSED=2]="CLOSED"})(wa||(wa={}));var ka;(function(t){t[t.REPEATED_FIELD_ENCODING_UNKNOWN=0]="REPEATED_FIELD_ENCODING_UNKNOWN",t[t.PACKED=1]="PACKED",t[t.EXPANDED=2]="EXPANDED"})(ka||(ka={}));var za;(function(t){t[t.UTF8_VALIDATION_UNKNOWN=0]="UTF8_VALIDATION_UNKNOWN",t[t.VERIFY=2]="VERIFY",t[t.NONE=3]="NONE"})(za||(za={}));var Qa;(function(t){t[t.MESSAGE_ENCODING_UNKNOWN=0]="MESSAGE_ENCODING_UNKNOWN",t[t.LENGTH_PREFIXED=1]="LENGTH_PREFIXED",t[t.DELIMITED=2]="DELIMITED"})(Qa||(Qa={}));var La;(function(t){t[t.JSON_FORMAT_UNKNOWN=0]="JSON_FORMAT_UNKNOWN",t[t.ALLOW=1]="ALLOW",t[t.LEGACY_BEST_EFFORT=2]="LEGACY_BEST_EFFORT"})(La||(La={}));var Ka;(function(t){t[t.ENFORCE_NAMING_STYLE_UNKNOWN=0]="ENFORCE_NAMING_STYLE_UNKNOWN",t[t.STYLE2024=1]="STYLE2024",t[t.STYLE_LEGACY=2]="STYLE_LEGACY"})(Ka||(Ka={}));var Ta;(function(t){t[t.NONE=0]="NONE",t[t.SET=1]="SET",t[t.ALIAS=2]="ALIAS"})(Ta||(Ta={}));var Ma;(function(t){t[t.EDITION_UNKNOWN=0]="EDITION_UNKNOWN",t[t.EDITION_LEGACY=900]="EDITION_LEGACY",t[t.EDITION_PROTO2=998]="EDITION_PROTO2",t[t.EDITION_PROTO3=999]="EDITION_PROTO3",t[t.EDITION_2023=1e3]="EDITION_2023",t[t.EDITION_2024=1001]="EDITION_2024",t[t.EDITION_1_TEST_ONLY=1]="EDITION_1_TEST_ONLY",t[t.EDITION_2_TEST_ONLY=2]="EDITION_2_TEST_ONLY",t[t.EDITION_99997_TEST_ONLY=99997]="EDITION_99997_TEST_ONLY",t[t.EDITION_99998_TEST_ONLY=99998]="EDITION_99998_TEST_ONLY",t[t.EDITION_99999_TEST_ONLY=99999]="EDITION_99999_TEST_ONLY",t[t.EDITION_MAX=2147483647]="EDITION_MAX"})(Ma||(Ma={}));var Ha;(function(t){t[t.VISIBILITY_UNSET=0]="VISIBILITY_UNSET",t[t.VISIBILITY_LOCAL=1]="VISIBILITY_LOCAL",t[t.VISIBILITY_EXPORT=2]="VISIBILITY_EXPORT"})(Ha||(Ha={}));const Da={readUnknownFields:!0};function Cf(t){return t?Object.assign(Object.assign({},Da),t):Da}function xl(t,e,n){const l=rt(t,void 0,!1);return gs(l,new mr(e),Cf(n),!1,e.byteLength),l.message}function gs(t,e,n,l,i){var r;const o=l?e.len:e.pos+i;let a,c;const d=(r=t.getUnknown())!==null&&r!==void 0?r:[];for(;e.pos<o&&([a,c]=e.tag(),!(l&&c==fe.EndGroup));){const s=t.findNumber(a);if(!s){const u=e.skip(c,a);n.readUnknownFields&&d.push({no:a,wireType:c,data:u});continue}hs(t,e,s,c,n)}if(l&&(c!=fe.EndGroup||a!==i))throw new Error("invalid end group tag");d.length>0&&t.setUnknown(d)}function hs(t,e,n,l,i){var r;switch(n.fieldKind){case"scalar":t.set(n,nn(e,n.scalar));break;case"enum":const o=nn(e,Z.INT32);if(n.enum.open)t.set(n,o);else if(n.enum.values.some(c=>c.number===o))t.set(n,o);else if(i.readUnknownFields){const c=[];Wi(o,c);const d=(r=t.getUnknown())!==null&&r!==void 0?r:[];d.push({no:n.number,wireType:l,data:new Uint8Array(c)}),t.setUnknown(d)}break;case"message":t.set(n,Er(e,i,n,t.get(n)));break;case"list":Bf(e,l,t.get(n),i);break;case"map":Wf(e,t.get(n),i);break}}function Wf(t,e,n){const l=e.field();let i,r;const o=t.uint32(),a=t.pos+o;for(;t.pos<a;){const[c]=t.tag();switch(c){case 1:i=nn(t,l.mapKey);break;case 2:switch(l.mapKind){case"scalar":r=nn(t,l.scalar);break;case"enum":r=t.int32();break;case"message":r=Er(t,n,l);break}break}}if(i===void 0&&(i=Lt(l.mapKey,!1)),r===void 0)switch(l.mapKind){case"scalar":r=Lt(l.scalar,!1);break;case"enum":r=l.enum.values[0].number;break;case"message":r=rt(l.message,void 0,!1);break}e.set(i,r)}function Bf(t,e,n,l){var i;const r=n.field();if(r.listKind==="message"){n.add(Er(t,l,r));return}const o=(i=r.scalar)!==null&&i!==void 0?i:Z.INT32;if(!(e==fe.LengthDelimited&&o!=Z.STRING&&o!=Z.BYTES)){n.add(nn(t,o));return}const c=t.uint32()+t.pos;for(;t.pos<c;)n.add(nn(t,o))}function Er(t,e,n,l){const i=n.delimitedEncoding,r=l??rt(n.message,void 0,!1);return gs(r,t,e,i,i?n.number:t.uint32()),r}function nn(t,e){switch(e){case Z.STRING:return t.string();case Z.BOOL:return t.bool();case Z.DOUBLE:return t.double();case Z.FLOAT:return t.float();case Z.INT32:return t.int32();case Z.INT64:return t.int64();case Z.UINT64:return t.uint64();case Z.FIXED64:return t.fixed64();case Z.BYTES:return t.bytes();case Z.FIXED32:return t.fixed32();case Z.SFIXED32:return t.sfixed32();case Z.SFIXED64:return t.sfixed64();case Z.SINT64:return t.sint64();case Z.UINT32:return t.uint32();case Z.SINT32:return t.sint32()}}function z(t,e){var n;const l=xl(Sf,Xr(t));return l.messageType.forEach(Ir),l.dependency=(n=e==null?void 0:e.map(r=>r.proto.name))!==null&&n!==void 0?n:[],rs(l,r=>e==null?void 0:e.find(o=>o.proto.name===r)).getFile(l.name)}const te=z("Ch9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wLnByb3RvEg9nb29nbGUucHJvdG9idWYiKwoJVGltZXN0YW1wEg8KB3NlY29uZHMYASABKAMSDQoFbmFub3MYAiABKAVChQEKE2NvbS5nb29nbGUucHJvdG9idWZCDlRpbWVzdGFtcFByb3RvUAFaMmdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL3RpbWVzdGFtcHBi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),bs=z("Chlnb29nbGUvcHJvdG9idWYvYW55LnByb3RvEg9nb29nbGUucHJvdG9idWYiJgoDQW55EhAKCHR5cGVfdXJsGAEgASgJEg0KBXZhbHVlGAIgASgMQnYKE2NvbS5nb29nbGUucHJvdG9idWZCCEFueVByb3RvUAFaLGdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL2FueXBiogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),Nf=Qn(bs,0),Ff=3,ja={writeUnknownFields:!0};function Yf(t){return t?Object.assign(Object.assign({},ja),t):ja}function Vs(t,e,n){return Il(new Dd,Yf(n),rt(t,e)).finish()}function Il(t,e,n){var l;for(const i of n.sortedFields){if(!n.isSet(i)){if(i.presence==Ff)throw new Error(`cannot encode ${i} to binary: required field not set`);continue}ms(t,e,n,i)}if(e.writeUnknownFields)for(const{no:i,wireType:r,data:o}of(l=n.getUnknown())!==null&&l!==void 0?l:[])t.tag(i,r).raw(o);return t}function ms(t,e,n,l){var i;switch(l.fieldKind){case"scalar":case"enum":Rl(t,n.desc.typeName,l.name,(i=l.scalar)!==null&&i!==void 0?i:Z.INT32,l.number,n.get(l));break;case"list":Uf(t,e,l,n.get(l));break;case"message":fs(t,e,l,n.get(l));break;case"map":for(const[r,o]of n.get(l))Jf(t,e,l,r,o);break}}function Rl(t,e,n,l,i,r){As(t.tag(i,xf(l)),e,n,l,r)}function fs(t,e,n,l){n.delimitedEncoding?Il(t.tag(n.number,fe.StartGroup),e,l).tag(n.number,fe.EndGroup):Il(t.tag(n.number,fe.LengthDelimited).fork(),e,l).join()}function Uf(t,e,n,l){var i;if(n.listKind=="message"){for(const o of l)fs(t,e,n,o);return}const r=(i=n.scalar)!==null&&i!==void 0?i:Z.INT32;if(n.packed){if(!l.size)return;t.tag(n.number,fe.LengthDelimited).fork();for(const o of l)As(t,n.parent.typeName,n.name,r,o);t.join();return}for(const o of l)Rl(t,n.parent.typeName,n.name,r,n.number,o)}function Jf(t,e,n,l,i){var r;switch(t.tag(n.number,fe.LengthDelimited).fork(),Rl(t,n.parent.typeName,n.name,n.mapKey,1,l),n.mapKind){case"scalar":case"enum":Rl(t,n.parent.typeName,n.name,(r=n.scalar)!==null&&r!==void 0?r:Z.INT32,2,i);break;case"message":Il(t.tag(2,fe.LengthDelimited).fork(),e,i).join();break}t.join()}function As(t,e,n,l,i){try{switch(l){case Z.STRING:t.string(i);break;case Z.BOOL:t.bool(i);break;case Z.DOUBLE:t.double(i);break;case Z.FLOAT:t.float(i);break;case Z.INT32:t.int32(i);break;case Z.INT64:t.int64(i);break;case Z.UINT64:t.uint64(i);break;case Z.FIXED64:t.fixed64(i);break;case Z.BYTES:t.bytes(i);break;case Z.FIXED32:t.fixed32(i);break;case Z.SFIXED32:t.sfixed32(i);break;case Z.SFIXED64:t.sfixed64(i);break;case Z.SINT64:t.sint64(i);break;case Z.UINT32:t.uint32(i);break;case Z.SINT32:t.sint32(i);break}}catch(r){throw r instanceof Error?new Error(`cannot encode field ${e}.${n} to binary: ${r.message}`):r}}function xf(t){switch(t){case Z.BYTES:case Z.STRING:return fe.LengthDelimited;case Z.DOUBLE:case Z.FIXED64:case Z.SFIXED64:return fe.Bit64;case Z.FIXED32:case Z.SFIXED32:case Z.FLOAT:return fe.Bit32;default:return fe.Varint}}function wf(t,e,n){let l=!1;return n||(n=dt(Nf),l=!0),n.value=Vs(t,e),n.typeUrl=Qf(e.$typeName),l?n:void 0}function kf(t,e){if(t.typeUrl==="")return!1;const n=typeof e=="string"?e:e.typeName,l=ps(t.typeUrl);return n===l}function zf(t,e){if(t.typeUrl==="")return;const n=e.kind=="message"?e:e.getMessage(ps(t.typeUrl));if(!(!n||!kf(t,n)))return xl(n,t.value)}function Qf(t){return`type.googleapis.com/${t}`}function ps(t){const e=t.lastIndexOf("/"),n=e>=0?t.substring(e+1):t;if(!n.length)throw new Error(`invalid type url: ${t}`);return n}const Lf=z("Ch5nb29nbGUvcHJvdG9idWYvZHVyYXRpb24ucHJvdG8SD2dvb2dsZS5wcm90b2J1ZiIqCghEdXJhdGlvbhIPCgdzZWNvbmRzGAEgASgDEg0KBW5hbm9zGAIgASgFQoMBChNjb20uZ29vZ2xlLnByb3RvYnVmQg1EdXJhdGlvblByb3RvUAFaMWdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL2R1cmF0aW9ucGL4AQGiAgNHUEKqAh5Hb29nbGUuUHJvdG9idWYuV2VsbEtub3duVHlwZXNiBnByb3RvMw"),Kf=z("Chtnb29nbGUvcHJvdG9idWYvZW1wdHkucHJvdG8SD2dvb2dsZS5wcm90b2J1ZiIHCgVFbXB0eUJ9ChNjb20uZ29vZ2xlLnByb3RvYnVmQgpFbXB0eVByb3RvUAFaLmdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL2VtcHR5cGL4AQGiAgNHUEKqAh5Hb29nbGUuUHJvdG9idWYuV2VsbEtub3duVHlwZXNiBnByb3RvMw"),He=z("Chxnb29nbGUvcHJvdG9idWYvc3RydWN0LnByb3RvEg9nb29nbGUucHJvdG9idWYihAEKBlN0cnVjdBIzCgZmaWVsZHMYASADKAsyIy5nb29nbGUucHJvdG9idWYuU3RydWN0LkZpZWxkc0VudHJ5GkUKC0ZpZWxkc0VudHJ5EgsKA2tleRgBIAEoCRIlCgV2YWx1ZRgCIAEoCzIWLmdvb2dsZS5wcm90b2J1Zi5WYWx1ZToCOAEi6gEKBVZhbHVlEjAKCm51bGxfdmFsdWUYASABKA4yGi5nb29nbGUucHJvdG9idWYuTnVsbFZhbHVlSAASFgoMbnVtYmVyX3ZhbHVlGAIgASgBSAASFgoMc3RyaW5nX3ZhbHVlGAMgASgJSAASFAoKYm9vbF92YWx1ZRgEIAEoCEgAEi8KDHN0cnVjdF92YWx1ZRgFIAEoCzIXLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3RIABIwCgpsaXN0X3ZhbHVlGAYgASgLMhouZ29vZ2xlLnByb3RvYnVmLkxpc3RWYWx1ZUgAQgYKBGtpbmQiMwoJTGlzdFZhbHVlEiYKBnZhbHVlcxgBIAMoCzIWLmdvb2dsZS5wcm90b2J1Zi5WYWx1ZSobCglOdWxsVmFsdWUSDgoKTlVMTF9WQUxVRRAAQn8KE2NvbS5nb29nbGUucHJvdG9idWZCC1N0cnVjdFByb3RvUAFaL2dvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL3N0cnVjdHBi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),Tf=Qn(He,0),Zs=Qn(He,1),Mf=Qn(He,2);var Ji;(function(t){t[t.NULL_VALUE=0]="NULL_VALUE"})(Ji||(Ji={}));function Hf(t,e){Gs(e,t);const n=jf(t.$unknown,e),[l,i,r]=wl(e);for(const o of n)hs(l,new mr(o.data),i,o.wireType,{readUnknownFields:!0});return r()}function Df(t,e,n){var l;Gs(e,t);const i=((l=t.$unknown)!==null&&l!==void 0?l:[]).filter(d=>d.no!==e.number),[r,o]=wl(e,n),a=new Dd;ms(a,{writeUnknownFields:!0},r,o);const c=new mr(a.finish());for(;c.pos<c.len;){const[d,s]=c.tag(),u=c.skip(s,d);i.push({no:d,wireType:s,data:u})}t.$unknown=i}function jf(t,e){if(t===void 0)return[];if(e.fieldKind==="enum"||e.fieldKind==="scalar"){for(let n=t.length-1;n>=0;--n)if(t[n].no==e.number)return[t[n]];return[]}return t.filter(n=>n.no===e.number)}function wl(t,e){const n=t.typeName,l=Object.assign(Object.assign({},t),{kind:"field",parent:t.extendee,localName:n}),i=Object.assign(Object.assign({},t.extendee),{fields:[l],members:[l],oneofs:[]}),r=dt(i,e!==void 0?{[n]:e}:void 0);return[rt(i,r),l,()=>{const o=r[n];if(o===void 0){const a=t.message;return zn(a)?Lt(a.fields[0].scalar,a.fields[0].longAsString):dt(a)}return o}]}function Gs(t,e){if(t.extendee.typeName!=e.$typeName)throw new Error(`extension ${t.typeName} can only be applied to message ${t.extendee.typeName}`)}const _f=3,Of=2,_a={alwaysEmitImplicit:!1,enumAsInteger:!1,useProtoFieldName:!1};function Pf(t){return t?Object.assign(Object.assign({},_a),t):_a}function $f(t,e,n){return Ln(rt(t,e),Pf(n))}function qf(t,e,n){var l;const i=$f(t,e,n);return JSON.stringify(i,null,(l=n==null?void 0:n.prettySpaces)!==null&&l!==void 0?l:0)}function Ln(t,e){var n;const l=lA(t,e);if(l!==void 0)return l;const i={};for(const r of t.sortedFields){if(!t.isSet(r)){if(r.presence==_f)throw new Error(`cannot encode ${r} to JSON: required field not set`);if(!e.alwaysEmitImplicit||r.presence!==Of)continue}const o=Oa(r,t.get(r),e);o!==void 0&&(i[nA(r,e)]=o)}if(e.registry){const r=new Set;for(const{no:o}of(n=t.getUnknown())!==null&&n!==void 0?n:[])if(!r.has(o)){r.add(o);const a=e.registry.getExtensionFor(t.desc,o);if(!a)continue;const c=Hf(t.message,a),[d,s]=wl(a,c),u=Oa(s,d.get(s),e);u!==void 0&&(i[a.jsonName]=u)}}return i}function Oa(t,e,n){switch(t.fieldKind){case"scalar":return kl(t,e);case"message":return Ln(e,n);case"enum":return yr(t.enum,e,n.enumAsInteger);case"list":return tA(e,n);case"map":return eA(e,n)}}function eA(t,e){const n=t.field(),l={};switch(n.mapKind){case"scalar":for(const[i,r]of t)l[i]=kl(n,r);break;case"message":for(const[i,r]of t)l[i]=Ln(r,e);break;case"enum":for(const[i,r]of t)l[i]=yr(n.enum,r,e.enumAsInteger);break}return e.alwaysEmitImplicit||t.size>0?l:void 0}function tA(t,e){const n=t.field(),l=[];switch(n.listKind){case"scalar":for(const i of t)l.push(kl(n,i));break;case"enum":for(const i of t)l.push(yr(n.enum,i,e.enumAsInteger));break;case"message":for(const i of t)l.push(Ln(i,e));break}return e.alwaysEmitImplicit||l.length>0?l:void 0}function yr(t,e,n){var l;if(typeof e!="number")throw new Error(`cannot encode ${t} to JSON: expected number, got ${Ce(e)}`);if(t.typeName=="google.protobuf.NullValue")return null;if(n)return e;const i=t.value[e];return(l=i==null?void 0:i.name)!==null&&l!==void 0?l:e}function kl(t,e){var n,l,i,r,o,a;switch(t.scalar){case Z.INT32:case Z.SFIXED32:case Z.SINT32:case Z.FIXED32:case Z.UINT32:if(typeof e!="number")throw new Error(`cannot encode ${t} to JSON: ${(n=Yt(t,e))===null||n===void 0?void 0:n.message}`);return e;case Z.FLOAT:case Z.DOUBLE:if(typeof e!="number")throw new Error(`cannot encode ${t} to JSON: ${(l=Yt(t,e))===null||l===void 0?void 0:l.message}`);return Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case Z.STRING:if(typeof e!="string")throw new Error(`cannot encode ${t} to JSON: ${(i=Yt(t,e))===null||i===void 0?void 0:i.message}`);return e;case Z.BOOL:if(typeof e!="boolean")throw new Error(`cannot encode ${t} to JSON: ${(r=Yt(t,e))===null||r===void 0?void 0:r.message}`);return e;case Z.UINT64:case Z.FIXED64:case Z.INT64:case Z.SFIXED64:case Z.SINT64:if(typeof e!="bigint"&&typeof e!="string")throw new Error(`cannot encode ${t} to JSON: ${(o=Yt(t,e))===null||o===void 0?void 0:o.message}`);return e.toString();case Z.BYTES:if(e instanceof Uint8Array)return ls(e);throw new Error(`cannot encode ${t} to JSON: ${(a=Yt(t,e))===null||a===void 0?void 0:a.message}`)}}function nA(t,e){return e.useProtoFieldName?t.name:t.jsonName}function lA(t,e){if(t.desc.typeName.startsWith("google.protobuf."))switch(t.desc.typeName){case"google.protobuf.Any":return iA(t.message,e);case"google.protobuf.Timestamp":return aA(t.message);case"google.protobuf.Duration":return rA(t.message);case"google.protobuf.FieldMask":return oA(t.message);case"google.protobuf.Struct":return Xs(t.message);case"google.protobuf.Value":return vr(t.message);case"google.protobuf.ListValue":return Is(t.message);default:if(zn(t.desc)){const n=t.desc.fields[0];return kl(n,t.get(n))}return}}function iA(t,e){if(t.typeUrl==="")return{};const{registry:n}=e;let l,i;if(n&&(l=zf(t,n),l&&(i=n.getMessage(l.$typeName))),!i||!l)throw new Error(`cannot encode message ${t.$typeName} to JSON: "${t.typeUrl}" is not in the type registry`);let r=Ln(rt(i,l),e);return(i.typeName.startsWith("google.protobuf.")||r===null||Array.isArray(r)||typeof r!="object")&&(r={value:r}),r["@type"]=t.typeUrl,r}function rA(t){if(Number(t.seconds)>315576e6||Number(t.seconds)<-315576e6)throw new Error(`cannot encode message ${t.$typeName} to JSON: value out of range`);let e=t.seconds.toString();if(t.nanos!==0){let n=Math.abs(t.nanos).toString();n="0".repeat(9-n.length)+n,n.substring(3)==="000000"?n=n.substring(0,3):n.substring(6)==="000"&&(n=n.substring(0,6)),e+="."+n,t.nanos<0&&Number(t.seconds)==0&&(e="-"+e)}return e+"s"}function oA(t){return t.paths.map(e=>{if(e.match(/_[0-9]?_/g)||e.match(/[A-Z]/g))throw new Error(`cannot encode message ${t.$typeName} to JSON: lowerCamelCase of path name "`+e+'" is irreversible');return Sn(e)}).join(",")}function Xs(t){const e={};for(const[n,l]of Object.entries(t.fields))e[n]=vr(l);return e}function vr(t){switch(t.kind.case){case"nullValue":return null;case"numberValue":if(!Number.isFinite(t.kind.value))throw new Error(`${t.$typeName} cannot be NaN or Infinity`);return t.kind.value;case"boolValue":return t.kind.value;case"stringValue":return t.kind.value;case"structValue":return Xs(t.kind.value);case"listValue":return Is(t.kind.value);default:throw new Error(`${t.$typeName} must have a value`)}}function Is(t){return t.values.map(vr)}function aA(t){const e=Number(t.seconds)*1e3;if(e<Date.parse("0001-01-01T00:00:00Z")||e>Date.parse("9999-12-31T23:59:59Z"))throw new Error(`cannot encode message ${t.$typeName} to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive`);if(t.nanos<0)throw new Error(`cannot encode message ${t.$typeName} to JSON: nanos must not be negative`);let n="Z";if(t.nanos>0){const l=(t.nanos+1e9).toString().substring(1);l.substring(3)==="000000"?n="."+l.substring(0,3)+"Z":l.substring(6)==="000"?n="."+l.substring(0,6)+"Z":n="."+l+"Z"}return new Date(e).toISOString().replace(".000Z",n)}const Pa={ignoreUnknownFields:!1};function cA(t){return t?Object.assign(Object.assign({},Pa),t):Pa}function dA(t,e,n){return Rs(t,mA(e,t.typeName),n)}function Rs(t,e,n){const l=rt(t);try{ln(l,e,cA(n))}catch(i){throw Lm(i)?new Error(`cannot decode ${i.field()} from JSON: ${i.message}`,{cause:i}):i}return l.message}function ln(t,e,n){var l;if(fA(t,e,n))return;if(e==null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode ${t.desc} from JSON: ${Ce(e)}`);const i=new Map,r=new Map;for(const o of t.desc.fields)r.set(o.name,o).set(o.jsonName,o);for(const[o,a]of Object.entries(e)){const c=r.get(o);if(c){if(c.oneof){if(a===null&&c.fieldKind=="scalar")continue;const d=i.get(c.oneof);if(d!==void 0)throw new Pe(c.oneof,`oneof set multiple times by ${d.name} and ${c.name}`);i.set(c.oneof,c)}$a(t,c,a,n)}else{let d;if(o.startsWith("[")&&o.endsWith("]")&&(d=(l=n.registry)===null||l===void 0?void 0:l.getExtension(o.substring(1,o.length-1)))&&d.extendee.typeName===t.desc.typeName){const[s,u,h]=wl(d);$a(s,u,a,n),Df(t.message,d,h())}if(!d&&!n.ignoreUnknownFields)throw new Error(`cannot decode ${t.desc} from JSON: key "${o}" is unknown`)}}}function $a(t,e,n,l){switch(e.fieldKind){case"scalar":bA(t,e,n);break;case"enum":hA(t,e,n,l);break;case"message":gA(t,e,n,l);break;case"list":uA(t.get(e),n,l);break;case"map":sA(t.get(e),n,l);break}}function sA(t,e,n){if(e===null)return;const l=t.field();if(typeof e!="object"||Array.isArray(e))throw new Pe(l,"expected object, got "+Ce(e));for(const[i,r]of Object.entries(e)){if(r===null)throw new Pe(l,"map value must not be null");let o;switch(l.mapKind){case"message":const c=rt(l.message);ln(c,r,n),o=c;break;case"enum":if(o=Sr(l.enum,r,n.ignoreUnknownFields,!0),o===zl)return;break;case"scalar":o=Ll(l,r,!0);break}const a=VA(l.mapKey,i);t.set(a,o)}}function uA(t,e,n){if(e===null)return;const l=t.field();if(!Array.isArray(e))throw new Pe(l,"expected Array, got "+Ce(e));for(const i of e){if(i===null)throw new Pe(l,"list item must not be null");switch(l.listKind){case"message":const r=rt(l.message);ln(r,i,n),t.add(r);break;case"enum":const o=Sr(l.enum,i,n.ignoreUnknownFields,!0);o!==zl&&t.add(o);break;case"scalar":t.add(Ll(l,i,!0));break}}}function gA(t,e,n,l){if(n===null&&e.message.typeName!="google.protobuf.Value"){t.clear(e);return}const i=t.isSet(e)?t.get(e):rt(e.message);ln(i,n,l),t.set(e,i)}function hA(t,e,n,l){const i=Sr(e.enum,n,l.ignoreUnknownFields,!1);i===Ql?t.clear(e):i!==zl&&t.set(e,i)}function bA(t,e,n){const l=Ll(e,n,!1);l===Ql?t.clear(e):t.set(e,l)}const zl=Symbol();function Sr(t,e,n,l){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:l?t.values[0].number:Ql;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const i=t.values.find(r=>r.name===e);if(i!==void 0)return i.number;if(n)return zl;break}throw new Error(`cannot decode ${t} from JSON: ${Ce(e)}`)}const Ql=Symbol();function Ll(t,e,n){if(e===null)return n?Lt(t.scalar,!1):Ql;switch(t.scalar){case Z.DOUBLE:case Z.FLOAT:if(e==="NaN")return NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(typeof e=="number"){if(Number.isNaN(e))throw new Pe(t,"unexpected NaN number");if(!Number.isFinite(e))throw new Pe(t,"unexpected infinite number");break}if(typeof e=="string"){if(e===""||e.trim().length!==e.length)break;const l=Number(e);if(!Number.isFinite(l))break;return l}break;case Z.INT32:case Z.FIXED32:case Z.SFIXED32:case Z.SINT32:case Z.UINT32:return Es(e);case Z.BYTES:if(typeof e=="string"){if(e==="")return new Uint8Array(0);try{return Xr(e)}catch(l){const i=l instanceof Error?l.message:String(l);throw new Pe(t,i)}}break}return e}function VA(t,e){switch(t){case Z.BOOL:switch(e){case"true":return!0;case"false":return!1}return e;case Z.INT32:case Z.FIXED32:case Z.UINT32:case Z.SFIXED32:case Z.SINT32:return Es(e);default:return e}}function Es(t){if(typeof t=="string"){if(t===""||t.trim().length!==t.length)return t;const e=Number(t);return Number.isNaN(e)?t:e}return t}function mA(t,e){try{return JSON.parse(t)}catch(n){const l=n instanceof Error?n.message:String(n);throw new Error(`cannot decode message ${e} from JSON: ${l}`,{cause:n})}}function fA(t,e,n){if(!t.desc.typeName.startsWith("google.protobuf."))return!1;switch(t.desc.typeName){case"google.protobuf.Any":return AA(t.message,e,n),!0;case"google.protobuf.Timestamp":return pA(t.message,e),!0;case"google.protobuf.Duration":return ZA(t.message,e),!0;case"google.protobuf.FieldMask":return GA(t.message,e),!0;case"google.protobuf.Struct":return ys(t.message,e),!0;case"google.protobuf.Value":return Cr(t.message,e),!0;case"google.protobuf.ListValue":return vs(t.message,e),!0;default:if(zn(t.desc)){const l=t.desc.fields[0];return e===null?t.clear(l):t.set(l,Ll(l,e,!0)),!0}return!1}}function AA(t,e,n){var l;if(e===null||Array.isArray(e)||typeof e!="object")throw new Error(`cannot decode message ${t.$typeName} from JSON: expected object but got ${Ce(e)}`);if(Object.keys(e).length==0)return;const i=e["@type"];if(typeof i!="string"||i=="")throw new Error(`cannot decode message ${t.$typeName} from JSON: "@type" is empty`);const r=i.includes("/")?i.substring(i.lastIndexOf("/")+1):i;if(!r.length)throw new Error(`cannot decode message ${t.$typeName} from JSON: "@type" is invalid`);const o=(l=n.registry)===null||l===void 0?void 0:l.getMessage(r);if(!o)throw new Error(`cannot decode message ${t.$typeName} from JSON: ${i} is not in the type registry`);const a=rt(o);if(r.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(e,"value")){const c=e.value;ln(a,c,n)}else{const c=Object.assign({},e);delete c["@type"],ln(a,c,n)}wf(a.desc,a.message,t)}function pA(t,e){if(typeof e!="string")throw new Error(`cannot decode message ${t.$typeName} from JSON: ${Ce(e)}`);const n=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\.([0-9]{1,9}))?(?:Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw new Error(`cannot decode message ${t.$typeName} from JSON: invalid RFC 3339 string`);const l=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(l))throw new Error(`cannot decode message ${t.$typeName} from JSON: invalid RFC 3339 string`);if(l<Date.parse("0001-01-01T00:00:00Z")||l>Date.parse("9999-12-31T23:59:59Z"))throw new Error(`cannot decode message ${t.$typeName} from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive`);t.seconds=de.parse(l/1e3),t.nanos=0,n[7]&&(t.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9)}function ZA(t,e){if(typeof e!="string")throw new Error(`cannot decode message ${t.$typeName} from JSON: ${Ce(e)}`);const n=e.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(n===null)throw new Error(`cannot decode message ${t.$typeName} from JSON: ${Ce(e)}`);const l=Number(n[1]);if(l>315576e6||l<-315576e6)throw new Error(`cannot decode message ${t.$typeName} from JSON: ${Ce(e)}`);if(t.seconds=de.parse(l),typeof n[2]!="string")return;const i=n[2]+"0".repeat(9-n[2].length);t.nanos=parseInt(i),(l<0||Object.is(l,-0))&&(t.nanos=-t.nanos)}function GA(t,e){if(typeof e!="string")throw new Error(`cannot decode message ${t.$typeName} from JSON: ${Ce(e)}`);if(e==="")return;function n(l){if(l.includes("_"))throw new Error(`cannot decode message ${t.$typeName} from JSON: path names must be lowerCamelCase`);const i=l.replace(/[A-Z]/g,r=>"_"+r.toLowerCase());return i[0]==="_"?i.substring(1):i}t.paths=e.split(",").map(n)}function ys(t,e){if(typeof e!="object"||e==null||Array.isArray(e))throw new Error(`cannot decode message ${t.$typeName} from JSON ${Ce(e)}`);for(const[n,l]of Object.entries(e)){const i=dt(Zs);Cr(i,l),t.fields[n]=i}}function Cr(t,e){switch(typeof e){case"number":t.kind={case:"numberValue",value:e};break;case"string":t.kind={case:"stringValue",value:e};break;case"boolean":t.kind={case:"boolValue",value:e};break;case"object":if(e===null)t.kind={case:"nullValue",value:Ji.NULL_VALUE};else if(Array.isArray(e)){const n=dt(Mf);vs(n,e),t.kind={case:"listValue",value:n}}else{const n=dt(Tf);ys(n,e),t.kind={case:"structValue",value:n}}break;default:throw new Error(`cannot decode message ${t.$typeName} from JSON ${Ce(e)}`)}return t}function vs(t,e){if(!Array.isArray(e))throw new Error(`cannot decode message ${t.$typeName} from JSON ${Ce(e)}`);for(const n of e){const l=dt(Zs);Cr(l,n),t.values.push(l)}}function xi(t){const e=P[t];return typeof e!="string"?t.toString():e[0].toLowerCase()+e.substring(1).replace(/[A-Z]/g,n=>"_"+n.toLowerCase())}let tl;function XA(t){if(!tl){tl={};for(const e of Object.values(P))typeof e!="string"&&(tl[xi(e)]=e)}return tl[t]}class se extends Error{constructor(e,n=P.Unknown,l,i,r){super(IA(e,n)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=n,this.metadata=new Headers(l??{}),this.details=i??[],this.cause=r}static from(e,n=P.Unknown){return e instanceof se?e:e instanceof Error?e.name=="AbortError"||e.name=="TimeoutError"?new se(e.message,P.Canceled):new se(e.message,n,void 0,void 0,e):new se(String(e),n,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error?Object.getPrototypeOf(e)===se.prototype?!0:e.name==="ConnectError"&&"code"in e&&typeof e.code=="number"&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&typeof e.rawMessage=="string"&&"cause"in e:!1}findDetails(e){const n=e.kind==="message"?{getMessage:i=>i===e.typeName?e:void 0}:e,l=[];for(const i of this.details){if("desc"in i){n.getMessage(i.desc.typeName)&&l.push(dt(i.desc,i.value));continue}const r=n.getMessage(i.type);if(r)try{l.push(xl(r,i.value))}catch{}}return l}}function IA(t,e){return t.length?`[${xi(e)}] ${t}`:`[${xi(e)}]`}function RA(...t){const e=new Headers;for(const n of t)n.forEach((l,i)=>{e.append(i,l)});return e}function EA(t,e){const n={};for(const l of t.methods){const i=e(l);i!=null&&(n[l.localName]=i)}return n}const qa=1;function yA(t,e,n=!1){if(e>t){let l=`message size is larger than configured readMaxBytes ${t}`;throw n&&(l=`message size ${e} is larger than configured readMaxBytes ${t}`),new se(l,P.ResourceExhausted)}}function vA(t){return new SA(t)}class SA{constructor(e){this.readMaxBytes=e,this.header=new Uint8Array(5),this.headerView=new DataView(this.header.buffer),this.buf=[]}get byteLength(){return this.buf.reduce((e,n)=>e+n.byteLength,0)}decode(e){this.buf.push(e);const n=[];for(;;){let l=this.pop();if(!l)break;n.push(l)}return n}pop(){if(!(!this.env&&(this.env=this.head(),!this.env))&&this.cons(this.env.data)){const e=this.env;return this.env=void 0,e}}head(){if(!this.cons(this.header))return;const e=this.headerView.getUint8(0),n=this.headerView.getUint32(1);return yA(this.readMaxBytes,n,!0),{flags:e,data:new Uint8Array(n)}}cons(e){const n=e.byteLength;if(this.byteLength<n)return!1;let l=0;for(;l<n;){const i=this.buf.shift();i.byteLength>n-l?(e.set(i.subarray(0,n-l),l),this.buf.unshift(i.subarray(n-l)),l+=n-l):(e.set(i,l),l+=i.byteLength)}return!0}}function CA(t){let e;const n=vA(4294967295);return new ReadableStream({start(){e=t.getReader()},async pull(l){let i=!1;for(;!i;){const r=await e.read();if(r.done)n.byteLength>0&&l.error(new se("protocol error: incomplete envelope",P.InvalidArgument)),l.close();else for(const o of n.decode(r.value))l.enqueue(o),i=!0}}})}function WA(t,e){const n=new Uint8Array(e.length+5);n.set(e,5);const l=new DataView(n.buffer,n.byteOffset,n.byteLength);return l.setUint8(0,t),l.setUint32(1,e.length),n}var BA=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),n={},l("next"),l("throw"),l("return"),n[Symbol.asyncIterator]=function(){return this},n);function l(r){n[r]=t[r]&&function(o){return new Promise(function(a,c){o=t[r](o),i(a,c,o.done,o.value)})}}function i(r,o,a,c){Promise.resolve(c).then(function(d){r({value:d,done:a})},o)}},Bn=function(t){return this instanceof Bn?(this.v=t,this):new Bn(t)},NA=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=n.apply(t,e||[]),i,r=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(b){return Promise.resolve(b).then(g,u)}}function a(g,b){l[g]&&(i[g]=function(m){return new Promise(function(f,p){r.push([g,m,f,p])>1||c(g,m)})},b&&(i[g]=b(i[g])))}function c(g,b){try{d(l[g](b))}catch(m){h(r[0][3],m)}}function d(g){g.value instanceof Bn?Promise.resolve(g.value.v).then(s,u):h(r[0][2],g)}function s(g){c("next",g)}function u(g){c("throw",g)}function h(g,b){g(b),r.shift(),r.length&&c(r[0][0],r[0][1])}},FA=function(t){var e,n;return e={},l("next"),l("throw",function(i){throw i}),l("return"),e[Symbol.iterator]=function(){return this},e;function l(i,r){e[i]=t[i]?function(o){return(n=!n)?{value:Bn(t[i](o)),done:!1}:r?r(o):o}:r}};function YA(t){return NA(this,arguments,function*(){yield Bn(yield*FA(BA(t)))})}var Ss=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),n={},l("next"),l("throw"),l("return"),n[Symbol.asyncIterator]=function(){return this},n);function l(r){n[r]=t[r]&&function(o){return new Promise(function(a,c){o=t[r](o),i(a,c,o.done,o.value)})}}function i(r,o,a,c){Promise.resolve(c).then(function(d){r({value:d,done:a})},o)}},rn=function(t){return this instanceof rn?(this.v=t,this):new rn(t)},UA=function(t){var e,n;return e={},l("next"),l("throw",function(i){throw i}),l("return"),e[Symbol.iterator]=function(){return this},e;function l(i,r){e[i]=t[i]?function(o){return(n=!n)?{value:rn(t[i](o)),done:!1}:r?r(o):o}:r}},JA=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=n.apply(t,e||[]),i,r=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(b){return Promise.resolve(b).then(g,u)}}function a(g,b){l[g]&&(i[g]=function(m){return new Promise(function(f,p){r.push([g,m,f,p])>1||c(g,m)})},b&&(i[g]=b(i[g])))}function c(g,b){try{d(l[g](b))}catch(m){h(r[0][3],m)}}function d(g){g.value instanceof rn?Promise.resolve(g.value.v).then(s,u):h(r[0][2],g)}function s(g){c("next",g)}function u(g){c("throw",g)}function h(g,b){g(b),r.shift(),r.length&&c(r[0][0],r[0][1])}};function K(t,e){return EA(t,n=>{switch(n.methodKind){case"unary":return xA(e,n);case"server_streaming":return wA(e,n);case"client_streaming":return kA(e,n);case"bidi_streaming":return zA(e,n);default:return null}})}function xA(t,e){return async(n,l)=>{var i,r;const o=await t.unary(e,l==null?void 0:l.signal,l==null?void 0:l.timeoutMs,l==null?void 0:l.headers,n,l==null?void 0:l.contextValues);return(i=l==null?void 0:l.onHeader)===null||i===void 0||i.call(l,o.header),(r=l==null?void 0:l.onTrailer)===null||r===void 0||r.call(l,o.trailer),o.message}}function wA(t,e){return(n,l)=>Cs(t.stream(e,l==null?void 0:l.signal,l==null?void 0:l.timeoutMs,l==null?void 0:l.headers,YA([n]),l==null?void 0:l.contextValues),l)}function kA(t,e){return async(n,l)=>{var i,r,o,a,c,d;const s=await t.stream(e,l==null?void 0:l.signal,l==null?void 0:l.timeoutMs,l==null?void 0:l.headers,n,l==null?void 0:l.contextValues);(c=l==null?void 0:l.onHeader)===null||c===void 0||c.call(l,s.header);let u,h=0;try{for(var g=!0,b=Ss(s.message),m;m=await b.next(),i=m.done,!i;g=!0)a=m.value,g=!1,u=a,h++}catch(f){r={error:f}}finally{try{!g&&!i&&(o=b.return)&&await o.call(b)}finally{if(r)throw r.error}}if(!u)throw new se("protocol error: missing response message",P.Unimplemented);if(h>1)throw new se("protocol error: received extra messages for client streaming method",P.Unimplemented);return(d=l==null?void 0:l.onTrailer)===null||d===void 0||d.call(l,s.trailer),u}}function zA(t,e){return(n,l)=>Cs(t.stream(e,l==null?void 0:l.signal,l==null?void 0:l.timeoutMs,l==null?void 0:l.headers,n,l==null?void 0:l.contextValues),l)}function Cs(t,e){const n=(function(){return JA(this,arguments,function*(){var l,i;const r=yield rn(t);(l=e==null?void 0:e.onHeader)===null||l===void 0||l.call(e,r.header),yield rn(yield*UA(Ss(r.message))),(i=e==null?void 0:e.onTrailer)===null||i===void 0||i.call(e,r.trailer)})})()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>n.next()})}}function QA(...t){const e=new AbortController,n=t.filter(i=>i!==void 0).concat(e.signal);for(const i of n){if(i.aborted){l.apply(i);break}i.addEventListener("abort",l)}function l(){e.signal.aborted||e.abort(Ws(this));for(const i of n)i.removeEventListener("abort",l)}return e}function LA(t){const e=new AbortController,n=()=>{e.abort(new se("the operation timed out",P.DeadlineExceeded))};let l;return t!==void 0&&(t<=0?n():l=setTimeout(n,t)),{signal:e.signal,cleanup:()=>clearTimeout(l)}}function Ws(t){if(!t.aborted)return;if(t.reason!==void 0)return t.reason;const e=new Error("This operation was aborted");return e.name="AbortError",e}function ec(){return{get(t){return t.id in this?this[t.id]:t.defaultValue},set(t,e){return this[t.id]=e,this},delete(t){return delete this[t.id],this}}}function tc(t,e){return t.toString().replace(/\/?$/,`/${e.parent.typeName}/${e.name}`)}function Bs(t,e){return dt(t,e)}function KA(t,e){function n(l){return l.done===!0?l:{done:l.done,value:Bs(t,l.value)}}return{[Symbol.asyncIterator](){const l=e[Symbol.asyncIterator](),i={next:()=>l.next().then(n)};return l.throw!==void 0&&(i.throw=r=>l.throw(r).then(n)),l.return!==void 0&&(i.return=r=>l.return(r).then(n)),i}}}function Ns(t,e){if(!e)return t;for(const n of e.concat().reverse())t=n(t);return t}function Fs(t){var e;const n=Object.assign({},t);return(e=n.ignoreUnknownFields)!==null&&e!==void 0||(n.ignoreUnknownFields=!0),n}function nc(t,e,n,l){const i=e?lc(t.input,l):ic(t.input,n);return{parse:(e?lc(t.output,l):ic(t.output,n)).parse,serialize:i.serialize}}function lc(t,e){return{parse(n){try{return xl(t,n,e)}catch(l){const i=l instanceof Error?l.message:String(l);throw new se(`parse binary: ${i}`,P.Internal)}},serialize(n){try{return Vs(t,n,e)}catch(l){const i=l instanceof Error?l.message:String(l);throw new se(`serialize binary: ${i}`,P.Internal)}}}}function ic(t,e){var n,l;const i=(n=e==null?void 0:e.textEncoder)!==null&&n!==void 0?n:new TextEncoder,r=(l=e==null?void 0:e.textDecoder)!==null&&l!==void 0?l:new TextDecoder,o=Fs(e);return{parse(a){try{const c=r.decode(a);return dA(t,c,o)}catch(c){throw se.from(c,P.InvalidArgument)}},serialize(a){try{const c=qf(t,a,o);return i.encode(c)}catch(c){throw se.from(c,P.Internal)}}}}const TA=/^application\/(connect\+)?(?:(json)(?:; ?charset=utf-?8)?|(proto))$/i,MA="application/proto",HA="application/json",DA="application/connect+proto",jA="application/connect+json";function _A(t){const e=t==null?void 0:t.match(TA);if(!e)return;const n=!!e[1],l=!!e[3];return{stream:n,binary:l}}function Ys(t,e,n){var l;if(e&&new Headers(e).forEach((a,c)=>n.metadata.append(c,a)),typeof t!="object"||t==null||Array.isArray(t))throw n;let i=n.code;"code"in t&&typeof t.code=="string"&&(i=(l=XA(t.code))!==null&&l!==void 0?l:i);const r=t.message;if(r!=null&&typeof r!="string")throw n;const o=new se(r??"",i,e);if("details"in t&&Array.isArray(t.details))for(const a of t.details){if(a===null||typeof a!="object"||Array.isArray(a)||typeof a.type!="string"||typeof a.value!="string")throw n;try{o.details.push({type:a.type,value:Xr(a.value),debug:a.debug})}catch{throw n}}return o}const rc=2;function OA(t){const e=new se("invalid end stream",P.Unknown);let n;try{n=JSON.parse(typeof t=="string"?t:new TextDecoder().decode(t))}catch{throw e}if(typeof n!="object"||n==null||Array.isArray(n))throw e;const l=new Headers;if("metadata"in n){if(typeof n.metadata!="object"||n.metadata==null||Array.isArray(n.metadata))throw e;for(const[r,o]of Object.entries(n.metadata)){if(!Array.isArray(o)||o.some(a=>typeof a!="string"))throw e;for(const a of o)l.append(r,a)}}const i="error"in n&&n.error!=null?Ys(n.error,l,e):void 0;return{metadata:l,error:i}}const El="Content-Type",PA="Content-Length",oc="Content-Encoding",$A="Accept-Encoding",qA="Connect-Timeout-Ms",Us="Connect-Protocol-Version",e2="User-Agent";function t2(t){switch(t){case 400:return P.Internal;case 401:return P.Unauthenticated;case 403:return P.PermissionDenied;case 404:return P.Unimplemented;case 429:return P.Unavailable;case 502:return P.Unavailable;case 503:return P.Unavailable;case 504:return P.Unavailable;default:return P.Unknown}}function ac(t){const e=new Headers,n=new Headers;return t.forEach((l,i)=>{i.toLowerCase().startsWith("trailer-")?n.append(i.substring(8),l):e.append(i,l)}),[e,n]}const Js="1";function cc(t,e,n,l,i){const r=new Headers(l??{});return n!==void 0&&r.set(qA,`${n}`),r.set(El,t=="unary"?e?MA:HA:e?DA:jA),r.set(Us,Js),r.has(e2),r}function dc(t,e,n,l){const i=l.get(El),r=_A(i);if(n!==200){const a=new se(`HTTP ${n}`,t2(n),l);if(t=="unary"&&r&&!r.binary)return{isUnaryError:!0,unaryError:a};throw a}const o={binary:e,stream:t!=="unary"};if((r==null?void 0:r.binary)!==o.binary||r.stream!==o.stream)throw new se(`unsupported content type ${i}`,r===void 0?P.Unknown:P.Internal,l);return{isUnaryError:!1}}const sc="application/";function n2(t,e){return e?ls(t,"url"):encodeURIComponent(new TextDecoder().decode(t))}function l2(t,e,n){let l=`?connect=v${Js}`;const i=t.header.get(El);(i==null?void 0:i.indexOf(sc))===0&&(l+="&encoding="+encodeURIComponent(i.slice(sc.length)));const r=t.header.get(oc);r!==null&&r!=="identity"&&(l+="&compression="+encodeURIComponent(r),n=!0),n&&(l+="&base64=1"),l+="&message="+n2(e,n);const o=t.url+l,a=new Headers(t.header);for(const c of[Us,El,PA,oc,$A])a.delete(c);return Object.assign(Object.assign({},t),{requestMethod:"GET",url:o,header:a})}function i2(t){const e=Ns(t.next,t.interceptors),[n,l,i]=xs(t),r=Object.assign(Object.assign({},t.req),{message:Bs(t.req.method.input,t.req.message),signal:n});return e(r).then(o=>(i(),o),l)}function r2(t){const e=Ns(t.next,t.interceptors),[n,l,i]=xs(t),r=Object.assign(Object.assign({},t.req),{message:KA(t.req.method.input,t.req.message),signal:n});let o=!1;return n.addEventListener("abort",function(){var a,c;const d=t.req.message[Symbol.asyncIterator]();o||(a=d.throw)===null||a===void 0||a.call(d,this.reason).catch(()=>{}),(c=d.return)===null||c===void 0||c.call(d).catch(()=>{})}),e(r).then(a=>Object.assign(Object.assign({},a),{message:{[Symbol.asyncIterator](){const c=a.message[Symbol.asyncIterator]();return{next(){return c.next().then(d=>(d.done==!0&&(o=!0,i()),d),l)}}}}}),l)}function xs(t){const{signal:e,cleanup:n}=LA(t.timeoutMs),l=QA(t.signal,e);return[l.signal,function(r){const o=se.from(e.aborted?Ws(e):r);return l.abort(o),n(),Promise.reject(o)},function(){n(),l.abort()}]}function o2(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}var Nn=function(t){return this instanceof Nn?(this.v=t,this):new Nn(t)},a2=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=n.apply(t,e||[]),i,r=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(b){return Promise.resolve(b).then(g,u)}}function a(g,b){l[g]&&(i[g]=function(m){return new Promise(function(f,p){r.push([g,m,f,p])>1||c(g,m)})},b&&(i[g]=b(i[g])))}function c(g,b){try{d(l[g](b))}catch(m){h(r[0][3],m)}}function d(g){g.value instanceof Nn?Promise.resolve(g.value.v).then(s,u):h(r[0][2],g)}function s(g){c("next",g)}function u(g){c("throw",g)}function h(g,b){g(b),r.shift(),r.length&&c(r[0][0],r[0][1])}};const uc={redirect:"error"};function c2(t){var e;o2();const n=(e=t.useBinaryFormat)!==null&&e!==void 0?e:!1;return{async unary(l,i,r,o,a,c){const{serialize:d,parse:s}=nc(l,n,t.jsonOptions,t.binaryOptions);return r=r===void 0?t.defaultTimeoutMs:r<=0?void 0:r,await i2({interceptors:t.interceptors,signal:i,timeoutMs:r,req:{stream:!1,service:l.parent,method:l,requestMethod:"POST",url:tc(t.baseUrl,l),header:cc(l.methodKind,n,r,o,!1),contextValues:c??ec(),message:a},next:async u=>{var h;const g=t.useHttpGet===!0&&l.idempotency===Ui.NO_SIDE_EFFECTS;let b=null;g?u=l2(u,d(u.message),n):b=d(u.message);const f=await((h=t.fetch)!==null&&h!==void 0?h:globalThis.fetch)(u.url,Object.assign(Object.assign({},uc),{method:u.requestMethod,headers:u.header,signal:u.signal,body:b})),{isUnaryError:p,unaryError:A}=dc(l.methodKind,n,f.status,f.headers);if(p)throw Ys(await f.json(),RA(...ac(f.headers)),A);const[X,y]=ac(f.headers);return{stream:!1,service:l.parent,method:l,header:X,message:n?s(new Uint8Array(await f.arrayBuffer())):Rs(l.output,await f.json(),Fs(t.jsonOptions)),trailer:y}}})},async stream(l,i,r,o,a,c){const{serialize:d,parse:s}=nc(l,n,t.jsonOptions,t.binaryOptions);function u(g,b,m,f){return a2(this,arguments,function*(){const A=CA(g).getReader();let X=!1;for(;;){const y=yield Nn(A.read());if(y.done)break;const{flags:I,data:S}=y.value;if((I&qa)===qa)throw new se("protocol error: received unsupported compressed output",P.Internal);if((I&rc)===rc){X=!0;const G=OA(S);if(G.error){const B=G.error;throw m.forEach((v,J)=>{B.metadata.append(J,v)}),B}G.metadata.forEach((B,v)=>b.set(v,B));continue}yield yield Nn(s(S))}if("throwIfAborted"in f&&f.throwIfAborted(),!X)throw"missing EndStreamResponse"})}async function h(g){if(l.methodKind!="server_streaming")throw"The fetch API does not support streaming request bodies";const b=await g[Symbol.asyncIterator]().next();if(b.done==!0)throw"missing request message";return WA(0,d(b.value))}return r=r===void 0?t.defaultTimeoutMs:r<=0?void 0:r,await r2({interceptors:t.interceptors,timeoutMs:r,signal:i,req:{stream:!0,service:l.parent,method:l,requestMethod:"POST",url:tc(t.baseUrl,l),header:cc(l.methodKind,n,r,o,!1),contextValues:c??ec(),message:a},next:async g=>{var b;const f=await((b=t.fetch)!==null&&b!==void 0?b:globalThis.fetch)(g.url,Object.assign(Object.assign({},uc),{method:g.requestMethod,headers:g.header,signal:g.signal,body:await h(g.message)}));if(dc(l.methodKind,n,f.status,f.headers),f.body===null)throw"missing response body";const p=new Headers;return Object.assign(Object.assign({},g),{header:f.headers,trailer:p,message:u(f.body,p,f.headers,g.signal)})}})}}}function M(t,e,...n){if(n.length>0)throw new Error;return t.services[e]}const ws=z("ChxvcGVyYXRpb24vdjEvcGxheV9jYXJkLnByb3RvEgxvcGVyYXRpb24udjEiOAoVR2V0Q3VyUGxheUNhcmRSZXF1ZXN0Eg8KB3VzZXJfaWQYASABKAkSDgoGbG9jYWxlGAIgASgJIkwKFkdldEN1clBsYXlDYXJkUmVzcG9uc2USMgoOcGxheV9jYXJkX2luZm8YASABKAsyGi5vcGVyYXRpb24udjEuUGxheUNhcmRJbmZvIroDCgxQbGF5Q2FyZEluZm8SCgoCaWQYASABKAMSDAoEbmFtZRgCIAEoCRINCgV0aXRsZRgDIAEoCRIMCgRkZXNjGAQgASgJEi4KC2FjdGlvbl90eXBlGAUgASgOMhkub3BlcmF0aW9uLnYxLkFDVElPTl9UWVBFEhIKCmV4dHJhX2RhdGEYBiABKAkSLgoKY3JlYXRlZF9hdBgHIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASLgoKdXBkYXRlZF9hdBgIIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASLgoGc3RhdHVzGAkgASgOMh4ub3BlcmF0aW9uLnYxLlBMQVlfQ0FSRF9TVEFUVVMSLQoIcGxhdGZvcm0YCiABKA4yGy5vcGVyYXRpb24udjEuUExBVEZPUk1fVFlQRRI0CgVpbWFnZRgLIAMoCzIlLm9wZXJhdGlvbi52MS5QbGF5Q2FyZEluZm8uSW1hZ2VFbnRyeRIMCgRJMThuGAwgASgJGiwKCkltYWdlRW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4ASp2Cg1QTEFURk9STV9UWVBFEh0KGVBMQVRGT1JNX1RZUEVfVU5TUEVDSUZJRUQQABIVChFQTEFURk9STV9UWVBFX0FMTBABEhgKFFBMQVRGT1JNX1RZUEVfTU9CSUxFEAISFQoRUExBVEZPUk1fVFlQRV9XRUIQAypWCgtBQ1RJT05fVFlQRRIbChdBQ1RJT05fVFlQRV9VTlNQRUNJRklFRBAAEhUKEUFDVElPTl9UWVBFX1BPUFVQEAESEwoPQUNUSU9OX1RZUEVfVVJMEAIqZwoQUExBWV9DQVJEX1NUQVRVUxIgChxQTEFZX0NBUkRfU1RBVFVTX1VOU1BFQ0lGSUVEEAASFwoTUExBWV9DQVJEX1NUQVRVU19PThABEhgKFFBMQVlfQ0FSRF9TVEFUVVNfT0ZGEAIyaQoIUGxheUNhcmQSXQoOR2V0Q3VyUGxheUNhcmQSIy5vcGVyYXRpb24udjEuR2V0Q3VyUGxheUNhcmRSZXF1ZXN0GiQub3BlcmF0aW9uLnYxLkdldEN1clBsYXlDYXJkUmVzcG9uc2UiAEK3AQoQY29tLm9wZXJhdGlvbi52MUINUGxheUNhcmRQcm90b1ABWkNnaXRsYWIubW9uaWNhLmNuL3ZpZGEvc2RrL2JpenNlcnZlci1nby5naXQvb3BlcmF0aW9uL3YxO29wZXJhdGlvbnYxogIDT1hYqgIMT3BlcmF0aW9uLlYxygIMT3BlcmF0aW9uXFYx4gIYT3BlcmF0aW9uXFYxXEdQQk1ldGFkYXRh6gINT3BlcmF0aW9uOjpWMWIGcHJvdG8z",[te]),d2=M(ws,0),s2=z("CiJvcGVyYXRpb24vdjEvcGxheV9jYXJkX2FkbWluLnByb3RvEgxvcGVyYXRpb24udjEi6gIKFUNyZWF0ZVBsYXlDYXJkUmVxdWVzdBIMCgRuYW1lGAEgASgJEg0KBXRpdGxlGAIgASgJEgwKBGRlc2MYAyABKAkSLgoLYWN0aW9uX3R5cGUYBCABKA4yGS5vcGVyYXRpb24udjEuQUNUSU9OX1RZUEUSEgoKZXh0cmFfZGF0YRgFIAEoCRIuCgZzdGF0dXMYBiABKA4yHi5vcGVyYXRpb24udjEuUExBWV9DQVJEX1NUQVRVUxItCghwbGF0Zm9ybRgIIAEoDjIbLm9wZXJhdGlvbi52MS5QTEFURk9STV9UWVBFEj0KBWltYWdlGAkgAygLMi4ub3BlcmF0aW9uLnYxLkNyZWF0ZVBsYXlDYXJkUmVxdWVzdC5JbWFnZUVudHJ5EhYKDnRyYW5zbGF0ZV9qc29uGAogASgJGiwKCkltYWdlRW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4ASI2ChZDcmVhdGVQbGF5Q2FyZFJlc3BvbnNlEg8KB3N1Y2Nlc3MYASABKAgSCwoDbXNnGAIgASgJIoQEChVVcGRhdGVQbGF5Q2FyZFJlcXVlc3QSCgoCaWQYASABKAMSEQoEbmFtZRgCIAEoCUgAiAEBEhIKBXRpdGxlGAMgASgJSAGIAQESEQoEZGVzYxgEIAEoCUgCiAEBEjMKC2FjdGlvbl90eXBlGAUgASgOMhkub3BlcmF0aW9uLnYxLkFDVElPTl9UWVBFSAOIAQESFwoKZXh0cmFfZGF0YRgHIAEoCUgEiAEBEjMKBnN0YXR1cxgIIAEoDjIeLm9wZXJhdGlvbi52MS5QTEFZX0NBUkRfU1RBVFVTSAWIAQESMgoIcGxhdGZvcm0YCiABKA4yGy5vcGVyYXRpb24udjEuUExBVEZPUk1fVFlQRUgGiAEBEj0KBWltYWdlGAsgAygLMi4ub3BlcmF0aW9uLnYxLlVwZGF0ZVBsYXlDYXJkUmVxdWVzdC5JbWFnZUVudHJ5EhsKDnRyYW5zbGF0ZV9qc29uGAwgASgJSAeIAQEaLAoKSW1hZ2VFbnRyeRILCgNrZXkYASABKAkSDQoFdmFsdWUYAiABKAk6AjgBQgcKBV9uYW1lQggKBl90aXRsZUIHCgVfZGVzY0IOCgxfYWN0aW9uX3R5cGVCDQoLX2V4dHJhX2RhdGFCCQoHX3N0YXR1c0ILCglfcGxhdGZvcm1CEQoPX3RyYW5zbGF0ZV9qc29uIjYKFlVwZGF0ZVBsYXlDYXJkUmVzcG9uc2USDwoHc3VjY2VzcxgBIAEoCBILCgNtc2cYAiABKAkiIwoVRGVsZXRlUGxheUNhcmRSZXF1ZXN0EgoKAmlkGAEgASgDIjYKFkRlbGV0ZVBsYXlDYXJkUmVzcG9uc2USDwoHc3VjY2VzcxgBIAEoCBILCgNtc2cYAiABKAki/gEKE0xpc3RQbGF5Q2FyZFJlcXVlc3QSDAoEcGFnZRgBIAEoBRIRCglwYWdlX3NpemUYAiABKAUSFAoHa2V5d29yZBgDIAEoCUgAiAEBEhMKBmxvY2FsZRgEIAEoCUgBiAEBEjIKCHBsYXRmb3JtGAUgASgOMhsub3BlcmF0aW9uLnYxLlBMQVRGT1JNX1RZUEVIAogBARIzCgthY3Rpb25fdHlwZRgGIAEoDjIZLm9wZXJhdGlvbi52MS5BQ1RJT05fVFlQRUgDiAEBQgoKCF9rZXl3b3JkQgkKB19sb2NhbGVCCwoJX3BsYXRmb3JtQg4KDF9hY3Rpb25fdHlwZSJzChRMaXN0UGxheUNhcmRSZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIEgsKA21zZxgCIAEoCRIuCgpwbGF5X2NhcmRzGAMgAygLMhoub3BlcmF0aW9uLnYxLlBsYXlDYXJkSW5mbxINCgV0b3RhbBgEIAEoAzKFAwoNUGxheUNhcmRBZG1pbhJdCg5DcmVhdGVQbGF5Q2FyZBIjLm9wZXJhdGlvbi52MS5DcmVhdGVQbGF5Q2FyZFJlcXVlc3QaJC5vcGVyYXRpb24udjEuQ3JlYXRlUGxheUNhcmRSZXNwb25zZSIAEl0KDlVwZGF0ZVBsYXlDYXJkEiMub3BlcmF0aW9uLnYxLlVwZGF0ZVBsYXlDYXJkUmVxdWVzdBokLm9wZXJhdGlvbi52MS5VcGRhdGVQbGF5Q2FyZFJlc3BvbnNlIgASXQoORGVsZXRlUGxheUNhcmQSIy5vcGVyYXRpb24udjEuRGVsZXRlUGxheUNhcmRSZXF1ZXN0GiQub3BlcmF0aW9uLnYxLkRlbGV0ZVBsYXlDYXJkUmVzcG9uc2UiABJXCgxMaXN0UGxheUNhcmQSIS5vcGVyYXRpb24udjEuTGlzdFBsYXlDYXJkUmVxdWVzdBoiLm9wZXJhdGlvbi52MS5MaXN0UGxheUNhcmRSZXNwb25zZSIAQrwBChBjb20ub3BlcmF0aW9uLnYxQhJQbGF5Q2FyZEFkbWluUHJvdG9QAVpDZ2l0bGFiLm1vbmljYS5jbi92aWRhL3Nkay9iaXpzZXJ2ZXItZ28uZ2l0L29wZXJhdGlvbi92MTtvcGVyYXRpb252MaICA09YWKoCDE9wZXJhdGlvbi5WMcoCDE9wZXJhdGlvblxWMeICGE9wZXJhdGlvblxWMVxHUEJNZXRhZGF0YeoCDU9wZXJhdGlvbjo6VjFiBnByb3RvMw",[te,ws]),u2=M(s2,0),Ye=z("ChtidWYvdmFsaWRhdGUvdmFsaWRhdGUucHJvdG8SDGJ1Zi52YWxpZGF0ZSI9CgpDb25zdHJhaW50EgoKAmlkGAEgASgJEg8KB21lc3NhZ2UYAiABKAkSEgoKZXhwcmVzc2lvbhgDIAEoCSJNChJNZXNzYWdlQ29uc3RyYWludHMSEAoIZGlzYWJsZWQYASABKAgSJQoDY2VsGAMgAygLMhguYnVmLnZhbGlkYXRlLkNvbnN0cmFpbnQiJAoQT25lb2ZDb25zdHJhaW50cxIQCghyZXF1aXJlZBgBIAEoCCLXCAoQRmllbGRDb25zdHJhaW50cxIlCgNjZWwYFyADKAsyGC5idWYudmFsaWRhdGUuQ29uc3RyYWludBIQCghyZXF1aXJlZBgZIAEoCBIkCgZpZ25vcmUYGyABKA4yFC5idWYudmFsaWRhdGUuSWdub3JlEikKBWZsb2F0GAEgASgLMhguYnVmLnZhbGlkYXRlLkZsb2F0UnVsZXNIABIrCgZkb3VibGUYAiABKAsyGS5idWYudmFsaWRhdGUuRG91YmxlUnVsZXNIABIpCgVpbnQzMhgDIAEoCzIYLmJ1Zi52YWxpZGF0ZS5JbnQzMlJ1bGVzSAASKQoFaW50NjQYBCABKAsyGC5idWYudmFsaWRhdGUuSW50NjRSdWxlc0gAEisKBnVpbnQzMhgFIAEoCzIZLmJ1Zi52YWxpZGF0ZS5VSW50MzJSdWxlc0gAEisKBnVpbnQ2NBgGIAEoCzIZLmJ1Zi52YWxpZGF0ZS5VSW50NjRSdWxlc0gAEisKBnNpbnQzMhgHIAEoCzIZLmJ1Zi52YWxpZGF0ZS5TSW50MzJSdWxlc0gAEisKBnNpbnQ2NBgIIAEoCzIZLmJ1Zi52YWxpZGF0ZS5TSW50NjRSdWxlc0gAEi0KB2ZpeGVkMzIYCSABKAsyGi5idWYudmFsaWRhdGUuRml4ZWQzMlJ1bGVzSAASLQoHZml4ZWQ2NBgKIAEoCzIaLmJ1Zi52YWxpZGF0ZS5GaXhlZDY0UnVsZXNIABIvCghzZml4ZWQzMhgLIAEoCzIbLmJ1Zi52YWxpZGF0ZS5TRml4ZWQzMlJ1bGVzSAASLwoIc2ZpeGVkNjQYDCABKAsyGy5idWYudmFsaWRhdGUuU0ZpeGVkNjRSdWxlc0gAEicKBGJvb2wYDSABKAsyFy5idWYudmFsaWRhdGUuQm9vbFJ1bGVzSAASKwoGc3RyaW5nGA4gASgLMhkuYnVmLnZhbGlkYXRlLlN0cmluZ1J1bGVzSAASKQoFYnl0ZXMYDyABKAsyGC5idWYudmFsaWRhdGUuQnl0ZXNSdWxlc0gAEicKBGVudW0YECABKAsyFy5idWYudmFsaWRhdGUuRW51bVJ1bGVzSAASLwoIcmVwZWF0ZWQYEiABKAsyGy5idWYudmFsaWRhdGUuUmVwZWF0ZWRSdWxlc0gAEiUKA21hcBgTIAEoCzIWLmJ1Zi52YWxpZGF0ZS5NYXBSdWxlc0gAEiUKA2FueRgUIAEoCzIWLmJ1Zi52YWxpZGF0ZS5BbnlSdWxlc0gAEi8KCGR1cmF0aW9uGBUgASgLMhsuYnVmLnZhbGlkYXRlLkR1cmF0aW9uUnVsZXNIABIxCgl0aW1lc3RhbXAYFiABKAsyHC5idWYudmFsaWRhdGUuVGltZXN0YW1wUnVsZXNIABITCgdza2lwcGVkGBggASgIQgIYARIYCgxpZ25vcmVfZW1wdHkYGiABKAhCAhgBQgYKBHR5cGUiPgoVUHJlZGVmaW5lZENvbnN0cmFpbnRzEiUKA2NlbBgBIAMoCzIYLmJ1Zi52YWxpZGF0ZS5Db25zdHJhaW50IrUXCgpGbG9hdFJ1bGVzEmkKBWNvbnN0GAEgASgCQlrCSFcKVQoLZmxvYXQuY29uc3QaRnRoaXMgIT0gcnVsZXMuY29uc3QgPyAndmFsdWUgbXVzdCBlcXVhbCAlcycuZm9ybWF0KFtydWxlcy5jb25zdF0pIDogJycSnwEKAmx0GAIgASgCQpABwkiMAQqJAQoIZmxvYXQubHQafSFoYXMocnVsZXMuZ3RlKSAmJiAhaGFzKHJ1bGVzLmd0KSAmJiAodGhpcy5pc05hbigpIHx8IHRoaXMgPj0gcnVsZXMubHQpPyAndmFsdWUgbXVzdCBiZSBsZXNzIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMubHRdKSA6ICcnSAASrwEKA2x0ZRgDIAEoAkKfAcJImwEKmAEKCWZsb2F0Lmx0ZRqKASFoYXMocnVsZXMuZ3RlKSAmJiAhaGFzKHJ1bGVzLmd0KSAmJiAodGhpcy5pc05hbigpIHx8IHRoaXMgPiBydWxlcy5sdGUpPyAndmFsdWUgbXVzdCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMubHRlXSkgOiAnJ0gAEu8HCgJndBgEIAEoAkLgB8JI3AcKjQEKCGZsb2F0Lmd0GoABIWhhcyhydWxlcy5sdCkgJiYgIWhhcyhydWxlcy5sdGUpICYmICh0aGlzLmlzTmFuKCkgfHwgdGhpcyA8PSBydWxlcy5ndCk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndF0pIDogJycKwwEKC2Zsb2F0Lmd0X2x0GrMBaGFzKHJ1bGVzLmx0KSAmJiBydWxlcy5sdCA+PSBydWxlcy5ndCAmJiAodGhpcy5pc05hbigpIHx8IHRoaXMgPj0gcnVsZXMubHQgfHwgdGhpcyA8PSBydWxlcy5ndCk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcyBhbmQgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0LCBydWxlcy5sdF0pIDogJycKzQEKFWZsb2F0Lmd0X2x0X2V4Y2x1c2l2ZRqzAWhhcyhydWxlcy5sdCkgJiYgcnVsZXMubHQgPCBydWxlcy5ndCAmJiAodGhpcy5pc05hbigpIHx8IChydWxlcy5sdCA8PSB0aGlzICYmIHRoaXMgPD0gcnVsZXMuZ3QpKT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuICVzIG9yIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndCwgcnVsZXMubHRdKSA6ICcnCtMBCgxmbG9hdC5ndF9sdGUawgFoYXMocnVsZXMubHRlKSAmJiBydWxlcy5sdGUgPj0gcnVsZXMuZ3QgJiYgKHRoaXMuaXNOYW4oKSB8fCB0aGlzID4gcnVsZXMubHRlIHx8IHRoaXMgPD0gcnVsZXMuZ3QpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndCwgcnVsZXMubHRlXSkgOiAnJwrdAQoWZmxvYXQuZ3RfbHRlX2V4Y2x1c2l2ZRrCAWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA8IHJ1bGVzLmd0ICYmICh0aGlzLmlzTmFuKCkgfHwgKHJ1bGVzLmx0ZSA8IHRoaXMgJiYgdGhpcyA8PSBydWxlcy5ndCkpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgb3IgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0LCBydWxlcy5sdGVdKSA6ICcnSAESuggKA2d0ZRgFIAEoAkKqCMJIpggKmwEKCWZsb2F0Lmd0ZRqNASFoYXMocnVsZXMubHQpICYmICFoYXMocnVsZXMubHRlKSAmJiAodGhpcy5pc05hbigpIHx8IHRoaXMgPCBydWxlcy5ndGUpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMuZ3RlXSkgOiAnJwrSAQoMZmxvYXQuZ3RlX2x0GsEBaGFzKHJ1bGVzLmx0KSAmJiBydWxlcy5sdCA+PSBydWxlcy5ndGUgJiYgKHRoaXMuaXNOYW4oKSB8fCB0aGlzID49IHJ1bGVzLmx0IHx8IHRoaXMgPCBydWxlcy5ndGUpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJXMgYW5kIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndGUsIHJ1bGVzLmx0XSkgOiAnJwrcAQoWZmxvYXQuZ3RlX2x0X2V4Y2x1c2l2ZRrBAWhhcyhydWxlcy5sdCkgJiYgcnVsZXMubHQgPCBydWxlcy5ndGUgJiYgKHRoaXMuaXNOYW4oKSB8fCAocnVsZXMubHQgPD0gdGhpcyAmJiB0aGlzIDwgcnVsZXMuZ3RlKSk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcyBvciBsZXNzIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMuZ3RlLCBydWxlcy5sdF0pIDogJycK4gEKDWZsb2F0Lmd0ZV9sdGUa0AFoYXMocnVsZXMubHRlKSAmJiBydWxlcy5sdGUgPj0gcnVsZXMuZ3RlICYmICh0aGlzLmlzTmFuKCkgfHwgdGhpcyA+IHJ1bGVzLmx0ZSB8fCB0aGlzIDwgcnVsZXMuZ3RlKT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzIGFuZCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMuZ3RlLCBydWxlcy5sdGVdKSA6ICcnCuwBChdmbG9hdC5ndGVfbHRlX2V4Y2x1c2l2ZRrQAWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA8IHJ1bGVzLmd0ZSAmJiAodGhpcy5pc05hbigpIHx8IChydWxlcy5sdGUgPCB0aGlzICYmIHRoaXMgPCBydWxlcy5ndGUpKT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzIG9yIGxlc3MgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndGUsIHJ1bGVzLmx0ZV0pIDogJydIARJ1CgJpbhgGIAMoAkJpwkhmCmQKCGZsb2F0LmluGlghKHRoaXMgaW4gZHluKHJ1bGVzKVsnaW4nXSkgPyAndmFsdWUgbXVzdCBiZSBpbiBsaXN0ICVzJy5mb3JtYXQoW2R5bihydWxlcylbJ2luJ11dKSA6ICcnEnYKBm5vdF9pbhgHIAMoAkJmwkhjCmEKDGZsb2F0Lm5vdF9pbhpRdGhpcyBpbiBydWxlcy5ub3RfaW4gPyAndmFsdWUgbXVzdCBub3QgYmUgaW4gbGlzdCAlcycuZm9ybWF0KFtydWxlcy5ub3RfaW5dKSA6ICcnEnUKBmZpbml0ZRgIIAEoCEJlwkhiCmAKDGZsb2F0LmZpbml0ZRpQcnVsZXMuZmluaXRlID8gKHRoaXMuaXNOYW4oKSB8fCB0aGlzLmlzSW5mKCkgPyAndmFsdWUgbXVzdCBiZSBmaW5pdGUnIDogJycpIDogJycSKwoHZXhhbXBsZRgJIAMoAkIawkgXChUKDWZsb2F0LmV4YW1wbGUaBHRydWUqCQjoBxCAgICAAkILCglsZXNzX3RoYW5CDgoMZ3JlYXRlcl90aGFuIscXCgtEb3VibGVSdWxlcxJqCgVjb25zdBgBIAEoAUJbwkhYClYKDGRvdWJsZS5jb25zdBpGdGhpcyAhPSBydWxlcy5jb25zdCA/ICd2YWx1ZSBtdXN0IGVxdWFsICVzJy5mb3JtYXQoW3J1bGVzLmNvbnN0XSkgOiAnJxKgAQoCbHQYAiABKAFCkQHCSI0BCooBCglkb3VibGUubHQafSFoYXMocnVsZXMuZ3RlKSAmJiAhaGFzKHJ1bGVzLmd0KSAmJiAodGhpcy5pc05hbigpIHx8IHRoaXMgPj0gcnVsZXMubHQpPyAndmFsdWUgbXVzdCBiZSBsZXNzIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMubHRdKSA6ICcnSAASsAEKA2x0ZRgDIAEoAUKgAcJInAEKmQEKCmRvdWJsZS5sdGUaigEhaGFzKHJ1bGVzLmd0ZSkgJiYgIWhhcyhydWxlcy5ndCkgJiYgKHRoaXMuaXNOYW4oKSB8fCB0aGlzID4gcnVsZXMubHRlKT8gJ3ZhbHVlIG11c3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmx0ZV0pIDogJydIABL0BwoCZ3QYBCABKAFC5QfCSOEHCo4BCglkb3VibGUuZ3QagAEhaGFzKHJ1bGVzLmx0KSAmJiAhaGFzKHJ1bGVzLmx0ZSkgJiYgKHRoaXMuaXNOYW4oKSB8fCB0aGlzIDw9IHJ1bGVzLmd0KT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0XSkgOiAnJwrEAQoMZG91YmxlLmd0X2x0GrMBaGFzKHJ1bGVzLmx0KSAmJiBydWxlcy5sdCA+PSBydWxlcy5ndCAmJiAodGhpcy5pc05hbigpIHx8IHRoaXMgPj0gcnVsZXMubHQgfHwgdGhpcyA8PSBydWxlcy5ndCk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcyBhbmQgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0LCBydWxlcy5sdF0pIDogJycKzgEKFmRvdWJsZS5ndF9sdF9leGNsdXNpdmUaswFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0IDwgcnVsZXMuZ3QgJiYgKHRoaXMuaXNOYW4oKSB8fCAocnVsZXMubHQgPD0gdGhpcyAmJiB0aGlzIDw9IHJ1bGVzLmd0KSk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcyBvciBsZXNzIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMuZ3QsIHJ1bGVzLmx0XSkgOiAnJwrUAQoNZG91YmxlLmd0X2x0ZRrCAWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA+PSBydWxlcy5ndCAmJiAodGhpcy5pc05hbigpIHx8IHRoaXMgPiBydWxlcy5sdGUgfHwgdGhpcyA8PSBydWxlcy5ndCk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcyBhbmQgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0LCBydWxlcy5sdGVdKSA6ICcnCt4BChdkb3VibGUuZ3RfbHRlX2V4Y2x1c2l2ZRrCAWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA8IHJ1bGVzLmd0ICYmICh0aGlzLmlzTmFuKCkgfHwgKHJ1bGVzLmx0ZSA8IHRoaXMgJiYgdGhpcyA8PSBydWxlcy5ndCkpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgb3IgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0LCBydWxlcy5sdGVdKSA6ICcnSAESvwgKA2d0ZRgFIAEoAUKvCMJIqwgKnAEKCmRvdWJsZS5ndGUajQEhaGFzKHJ1bGVzLmx0KSAmJiAhaGFzKHJ1bGVzLmx0ZSkgJiYgKHRoaXMuaXNOYW4oKSB8fCB0aGlzIDwgcnVsZXMuZ3RlKT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0ZV0pIDogJycK0wEKDWRvdWJsZS5ndGVfbHQawQFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0ID49IHJ1bGVzLmd0ZSAmJiAodGhpcy5pc05hbigpIHx8IHRoaXMgPj0gcnVsZXMubHQgfHwgdGhpcyA8IHJ1bGVzLmd0ZSk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcyBhbmQgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0ZSwgcnVsZXMubHRdKSA6ICcnCt0BChdkb3VibGUuZ3RlX2x0X2V4Y2x1c2l2ZRrBAWhhcyhydWxlcy5sdCkgJiYgcnVsZXMubHQgPCBydWxlcy5ndGUgJiYgKHRoaXMuaXNOYW4oKSB8fCAocnVsZXMubHQgPD0gdGhpcyAmJiB0aGlzIDwgcnVsZXMuZ3RlKSk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcyBvciBsZXNzIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMuZ3RlLCBydWxlcy5sdF0pIDogJycK4wEKDmRvdWJsZS5ndGVfbHRlGtABaGFzKHJ1bGVzLmx0ZSkgJiYgcnVsZXMubHRlID49IHJ1bGVzLmd0ZSAmJiAodGhpcy5pc05hbigpIHx8IHRoaXMgPiBydWxlcy5sdGUgfHwgdGhpcyA8IHJ1bGVzLmd0ZSk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcyBhbmQgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0ZSwgcnVsZXMubHRlXSkgOiAnJwrtAQoYZG91YmxlLmd0ZV9sdGVfZXhjbHVzaXZlGtABaGFzKHJ1bGVzLmx0ZSkgJiYgcnVsZXMubHRlIDwgcnVsZXMuZ3RlICYmICh0aGlzLmlzTmFuKCkgfHwgKHJ1bGVzLmx0ZSA8IHRoaXMgJiYgdGhpcyA8IHJ1bGVzLmd0ZSkpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJXMgb3IgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0ZSwgcnVsZXMubHRlXSkgOiAnJ0gBEnYKAmluGAYgAygBQmrCSGcKZQoJZG91YmxlLmluGlghKHRoaXMgaW4gZHluKHJ1bGVzKVsnaW4nXSkgPyAndmFsdWUgbXVzdCBiZSBpbiBsaXN0ICVzJy5mb3JtYXQoW2R5bihydWxlcylbJ2luJ11dKSA6ICcnEncKBm5vdF9pbhgHIAMoAUJnwkhkCmIKDWRvdWJsZS5ub3RfaW4aUXRoaXMgaW4gcnVsZXMubm90X2luID8gJ3ZhbHVlIG11c3Qgbm90IGJlIGluIGxpc3QgJXMnLmZvcm1hdChbcnVsZXMubm90X2luXSkgOiAnJxJ2CgZmaW5pdGUYCCABKAhCZsJIYwphCg1kb3VibGUuZmluaXRlGlBydWxlcy5maW5pdGUgPyAodGhpcy5pc05hbigpIHx8IHRoaXMuaXNJbmYoKSA/ICd2YWx1ZSBtdXN0IGJlIGZpbml0ZScgOiAnJykgOiAnJxIsCgdleGFtcGxlGAkgAygBQhvCSBgKFgoOZG91YmxlLmV4YW1wbGUaBHRydWUqCQjoBxCAgICAAkILCglsZXNzX3RoYW5CDgoMZ3JlYXRlcl90aGFuIucUCgpJbnQzMlJ1bGVzEmkKBWNvbnN0GAEgASgFQlrCSFcKVQoLaW50MzIuY29uc3QaRnRoaXMgIT0gcnVsZXMuY29uc3QgPyAndmFsdWUgbXVzdCBlcXVhbCAlcycuZm9ybWF0KFtydWxlcy5jb25zdF0pIDogJycSigEKAmx0GAIgASgFQnzCSHkKdwoIaW50MzIubHQaayFoYXMocnVsZXMuZ3RlKSAmJiAhaGFzKHJ1bGVzLmd0KSAmJiB0aGlzID49IHJ1bGVzLmx0PyAndmFsdWUgbXVzdCBiZSBsZXNzIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMubHRdKSA6ICcnSAASnAEKA2x0ZRgDIAEoBUKMAcJIiAEKhQEKCWludDMyLmx0ZRp4IWhhcyhydWxlcy5ndGUpICYmICFoYXMocnVsZXMuZ3QpICYmIHRoaXMgPiBydWxlcy5sdGU/ICd2YWx1ZSBtdXN0IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5sdGVdKSA6ICcnSAASlwcKAmd0GAQgASgFQogHwkiEBwp6CghpbnQzMi5ndBpuIWhhcyhydWxlcy5sdCkgJiYgIWhhcyhydWxlcy5sdGUpICYmIHRoaXMgPD0gcnVsZXMuZ3Q/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndF0pIDogJycKswEKC2ludDMyLmd0X2x0GqMBaGFzKHJ1bGVzLmx0KSAmJiBydWxlcy5sdCA+PSBydWxlcy5ndCAmJiAodGhpcyA+PSBydWxlcy5sdCB8fCB0aGlzIDw9IHJ1bGVzLmd0KT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuICVzIGFuZCBsZXNzIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMuZ3QsIHJ1bGVzLmx0XSkgOiAnJwq7AQoVaW50MzIuZ3RfbHRfZXhjbHVzaXZlGqEBaGFzKHJ1bGVzLmx0KSAmJiBydWxlcy5sdCA8IHJ1bGVzLmd0ICYmIChydWxlcy5sdCA8PSB0aGlzICYmIHRoaXMgPD0gcnVsZXMuZ3QpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgb3IgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0LCBydWxlcy5sdF0pIDogJycKwwEKDGludDMyLmd0X2x0ZRqyAWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA+PSBydWxlcy5ndCAmJiAodGhpcyA+IHJ1bGVzLmx0ZSB8fCB0aGlzIDw9IHJ1bGVzLmd0KT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuICVzIGFuZCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMuZ3QsIHJ1bGVzLmx0ZV0pIDogJycKywEKFmludDMyLmd0X2x0ZV9leGNsdXNpdmUasAFoYXMocnVsZXMubHRlKSAmJiBydWxlcy5sdGUgPCBydWxlcy5ndCAmJiAocnVsZXMubHRlIDwgdGhpcyAmJiB0aGlzIDw9IHJ1bGVzLmd0KT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuICVzIG9yIGxlc3MgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndCwgcnVsZXMubHRlXSkgOiAnJ0gBEuMHCgNndGUYBSABKAVC0wfCSM8HCogBCglpbnQzMi5ndGUaeyFoYXMocnVsZXMubHQpICYmICFoYXMocnVsZXMubHRlKSAmJiB0aGlzIDwgcnVsZXMuZ3RlPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMuZ3RlXSkgOiAnJwrCAQoMaW50MzIuZ3RlX2x0GrEBaGFzKHJ1bGVzLmx0KSAmJiBydWxlcy5sdCA+PSBydWxlcy5ndGUgJiYgKHRoaXMgPj0gcnVsZXMubHQgfHwgdGhpcyA8IHJ1bGVzLmd0ZSk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcyBhbmQgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0ZSwgcnVsZXMubHRdKSA6ICcnCsoBChZpbnQzMi5ndGVfbHRfZXhjbHVzaXZlGq8BaGFzKHJ1bGVzLmx0KSAmJiBydWxlcy5sdCA8IHJ1bGVzLmd0ZSAmJiAocnVsZXMubHQgPD0gdGhpcyAmJiB0aGlzIDwgcnVsZXMuZ3RlKT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzIG9yIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndGUsIHJ1bGVzLmx0XSkgOiAnJwrSAQoNaW50MzIuZ3RlX2x0ZRrAAWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA+PSBydWxlcy5ndGUgJiYgKHRoaXMgPiBydWxlcy5sdGUgfHwgdGhpcyA8IHJ1bGVzLmd0ZSk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcyBhbmQgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0ZSwgcnVsZXMubHRlXSkgOiAnJwraAQoXaW50MzIuZ3RlX2x0ZV9leGNsdXNpdmUavgFoYXMocnVsZXMubHRlKSAmJiBydWxlcy5sdGUgPCBydWxlcy5ndGUgJiYgKHJ1bGVzLmx0ZSA8IHRoaXMgJiYgdGhpcyA8IHJ1bGVzLmd0ZSk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcyBvciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMuZ3RlLCBydWxlcy5sdGVdKSA6ICcnSAESdQoCaW4YBiADKAVCacJIZgpkCghpbnQzMi5pbhpYISh0aGlzIGluIGR5bihydWxlcylbJ2luJ10pID8gJ3ZhbHVlIG11c3QgYmUgaW4gbGlzdCAlcycuZm9ybWF0KFtkeW4ocnVsZXMpWydpbiddXSkgOiAnJxJ2CgZub3RfaW4YByADKAVCZsJIYwphCgxpbnQzMi5ub3RfaW4aUXRoaXMgaW4gcnVsZXMubm90X2luID8gJ3ZhbHVlIG11c3Qgbm90IGJlIGluIGxpc3QgJXMnLmZvcm1hdChbcnVsZXMubm90X2luXSkgOiAnJxIrCgdleGFtcGxlGAggAygFQhrCSBcKFQoNaW50MzIuZXhhbXBsZRoEdHJ1ZSoJCOgHEICAgIACQgsKCWxlc3NfdGhhbkIOCgxncmVhdGVyX3RoYW4i5xQKCkludDY0UnVsZXMSaQoFY29uc3QYASABKANCWsJIVwpVCgtpbnQ2NC5jb25zdBpGdGhpcyAhPSBydWxlcy5jb25zdCA/ICd2YWx1ZSBtdXN0IGVxdWFsICVzJy5mb3JtYXQoW3J1bGVzLmNvbnN0XSkgOiAnJxKKAQoCbHQYAiABKANCfMJIeQp3CghpbnQ2NC5sdBprIWhhcyhydWxlcy5ndGUpICYmICFoYXMocnVsZXMuZ3QpICYmIHRoaXMgPj0gcnVsZXMubHQ/ICd2YWx1ZSBtdXN0IGJlIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5sdF0pIDogJydIABKcAQoDbHRlGAMgASgDQowBwkiIAQqFAQoJaW50NjQubHRlGnghaGFzKHJ1bGVzLmd0ZSkgJiYgIWhhcyhydWxlcy5ndCkgJiYgdGhpcyA+IHJ1bGVzLmx0ZT8gJ3ZhbHVlIG11c3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmx0ZV0pIDogJydIABKXBwoCZ3QYBCABKANCiAfCSIQHCnoKCGludDY0Lmd0Gm4haGFzKHJ1bGVzLmx0KSAmJiAhaGFzKHJ1bGVzLmx0ZSkgJiYgdGhpcyA8PSBydWxlcy5ndD8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0XSkgOiAnJwqzAQoLaW50NjQuZ3RfbHQaowFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0ID49IHJ1bGVzLmd0ICYmICh0aGlzID49IHJ1bGVzLmx0IHx8IHRoaXMgPD0gcnVsZXMuZ3QpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgYW5kIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndCwgcnVsZXMubHRdKSA6ICcnCrsBChVpbnQ2NC5ndF9sdF9leGNsdXNpdmUaoQFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0IDwgcnVsZXMuZ3QgJiYgKHJ1bGVzLmx0IDw9IHRoaXMgJiYgdGhpcyA8PSBydWxlcy5ndCk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcyBvciBsZXNzIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMuZ3QsIHJ1bGVzLmx0XSkgOiAnJwrDAQoMaW50NjQuZ3RfbHRlGrIBaGFzKHJ1bGVzLmx0ZSkgJiYgcnVsZXMubHRlID49IHJ1bGVzLmd0ICYmICh0aGlzID4gcnVsZXMubHRlIHx8IHRoaXMgPD0gcnVsZXMuZ3QpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndCwgcnVsZXMubHRlXSkgOiAnJwrLAQoWaW50NjQuZ3RfbHRlX2V4Y2x1c2l2ZRqwAWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA8IHJ1bGVzLmd0ICYmIChydWxlcy5sdGUgPCB0aGlzICYmIHRoaXMgPD0gcnVsZXMuZ3QpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgb3IgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0LCBydWxlcy5sdGVdKSA6ICcnSAES4wcKA2d0ZRgFIAEoA0LTB8JIzwcKiAEKCWludDY0Lmd0ZRp7IWhhcyhydWxlcy5sdCkgJiYgIWhhcyhydWxlcy5sdGUpICYmIHRoaXMgPCBydWxlcy5ndGU/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndGVdKSA6ICcnCsIBCgxpbnQ2NC5ndGVfbHQasQFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0ID49IHJ1bGVzLmd0ZSAmJiAodGhpcyA+PSBydWxlcy5sdCB8fCB0aGlzIDwgcnVsZXMuZ3RlKT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzIGFuZCBsZXNzIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMuZ3RlLCBydWxlcy5sdF0pIDogJycKygEKFmludDY0Lmd0ZV9sdF9leGNsdXNpdmUarwFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0IDwgcnVsZXMuZ3RlICYmIChydWxlcy5sdCA8PSB0aGlzICYmIHRoaXMgPCBydWxlcy5ndGUpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJXMgb3IgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0ZSwgcnVsZXMubHRdKSA6ICcnCtIBCg1pbnQ2NC5ndGVfbHRlGsABaGFzKHJ1bGVzLmx0ZSkgJiYgcnVsZXMubHRlID49IHJ1bGVzLmd0ZSAmJiAodGhpcyA+IHJ1bGVzLmx0ZSB8fCB0aGlzIDwgcnVsZXMuZ3RlKT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzIGFuZCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMuZ3RlLCBydWxlcy5sdGVdKSA6ICcnCtoBChdpbnQ2NC5ndGVfbHRlX2V4Y2x1c2l2ZRq+AWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA8IHJ1bGVzLmd0ZSAmJiAocnVsZXMubHRlIDwgdGhpcyAmJiB0aGlzIDwgcnVsZXMuZ3RlKT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzIG9yIGxlc3MgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndGUsIHJ1bGVzLmx0ZV0pIDogJydIARJ1CgJpbhgGIAMoA0JpwkhmCmQKCGludDY0LmluGlghKHRoaXMgaW4gZHluKHJ1bGVzKVsnaW4nXSkgPyAndmFsdWUgbXVzdCBiZSBpbiBsaXN0ICVzJy5mb3JtYXQoW2R5bihydWxlcylbJ2luJ11dKSA6ICcnEnYKBm5vdF9pbhgHIAMoA0JmwkhjCmEKDGludDY0Lm5vdF9pbhpRdGhpcyBpbiBydWxlcy5ub3RfaW4gPyAndmFsdWUgbXVzdCBub3QgYmUgaW4gbGlzdCAlcycuZm9ybWF0KFtydWxlcy5ub3RfaW5dKSA6ICcnEisKB2V4YW1wbGUYCSADKANCGsJIFwoVCg1pbnQ2NC5leGFtcGxlGgR0cnVlKgkI6AcQgICAgAJCCwoJbGVzc190aGFuQg4KDGdyZWF0ZXJfdGhhbiL4FAoLVUludDMyUnVsZXMSagoFY29uc3QYASABKA1CW8JIWApWCgx1aW50MzIuY29uc3QaRnRoaXMgIT0gcnVsZXMuY29uc3QgPyAndmFsdWUgbXVzdCBlcXVhbCAlcycuZm9ybWF0KFtydWxlcy5jb25zdF0pIDogJycSiwEKAmx0GAIgASgNQn3CSHoKeAoJdWludDMyLmx0GmshaGFzKHJ1bGVzLmd0ZSkgJiYgIWhhcyhydWxlcy5ndCkgJiYgdGhpcyA+PSBydWxlcy5sdD8gJ3ZhbHVlIG11c3QgYmUgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmx0XSkgOiAnJ0gAEp0BCgNsdGUYAyABKA1CjQHCSIkBCoYBCgp1aW50MzIubHRlGnghaGFzKHJ1bGVzLmd0ZSkgJiYgIWhhcyhydWxlcy5ndCkgJiYgdGhpcyA+IHJ1bGVzLmx0ZT8gJ3ZhbHVlIG11c3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmx0ZV0pIDogJydIABKcBwoCZ3QYBCABKA1CjQfCSIkHCnsKCXVpbnQzMi5ndBpuIWhhcyhydWxlcy5sdCkgJiYgIWhhcyhydWxlcy5sdGUpICYmIHRoaXMgPD0gcnVsZXMuZ3Q/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndF0pIDogJycKtAEKDHVpbnQzMi5ndF9sdBqjAWhhcyhydWxlcy5sdCkgJiYgcnVsZXMubHQgPj0gcnVsZXMuZ3QgJiYgKHRoaXMgPj0gcnVsZXMubHQgfHwgdGhpcyA8PSBydWxlcy5ndCk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcyBhbmQgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0LCBydWxlcy5sdF0pIDogJycKvAEKFnVpbnQzMi5ndF9sdF9leGNsdXNpdmUaoQFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0IDwgcnVsZXMuZ3QgJiYgKHJ1bGVzLmx0IDw9IHRoaXMgJiYgdGhpcyA8PSBydWxlcy5ndCk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcyBvciBsZXNzIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMuZ3QsIHJ1bGVzLmx0XSkgOiAnJwrEAQoNdWludDMyLmd0X2x0ZRqyAWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA+PSBydWxlcy5ndCAmJiAodGhpcyA+IHJ1bGVzLmx0ZSB8fCB0aGlzIDw9IHJ1bGVzLmd0KT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuICVzIGFuZCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMuZ3QsIHJ1bGVzLmx0ZV0pIDogJycKzAEKF3VpbnQzMi5ndF9sdGVfZXhjbHVzaXZlGrABaGFzKHJ1bGVzLmx0ZSkgJiYgcnVsZXMubHRlIDwgcnVsZXMuZ3QgJiYgKHJ1bGVzLmx0ZSA8IHRoaXMgJiYgdGhpcyA8PSBydWxlcy5ndCk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcyBvciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMuZ3QsIHJ1bGVzLmx0ZV0pIDogJydIARLoBwoDZ3RlGAUgASgNQtgHwkjUBwqJAQoKdWludDMyLmd0ZRp7IWhhcyhydWxlcy5sdCkgJiYgIWhhcyhydWxlcy5sdGUpICYmIHRoaXMgPCBydWxlcy5ndGU/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndGVdKSA6ICcnCsMBCg11aW50MzIuZ3RlX2x0GrEBaGFzKHJ1bGVzLmx0KSAmJiBydWxlcy5sdCA+PSBydWxlcy5ndGUgJiYgKHRoaXMgPj0gcnVsZXMubHQgfHwgdGhpcyA8IHJ1bGVzLmd0ZSk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcyBhbmQgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0ZSwgcnVsZXMubHRdKSA6ICcnCssBChd1aW50MzIuZ3RlX2x0X2V4Y2x1c2l2ZRqvAWhhcyhydWxlcy5sdCkgJiYgcnVsZXMubHQgPCBydWxlcy5ndGUgJiYgKHJ1bGVzLmx0IDw9IHRoaXMgJiYgdGhpcyA8IHJ1bGVzLmd0ZSk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcyBvciBsZXNzIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMuZ3RlLCBydWxlcy5sdF0pIDogJycK0wEKDnVpbnQzMi5ndGVfbHRlGsABaGFzKHJ1bGVzLmx0ZSkgJiYgcnVsZXMubHRlID49IHJ1bGVzLmd0ZSAmJiAodGhpcyA+IHJ1bGVzLmx0ZSB8fCB0aGlzIDwgcnVsZXMuZ3RlKT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzIGFuZCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMuZ3RlLCBydWxlcy5sdGVdKSA6ICcnCtsBChh1aW50MzIuZ3RlX2x0ZV9leGNsdXNpdmUavgFoYXMocnVsZXMubHRlKSAmJiBydWxlcy5sdGUgPCBydWxlcy5ndGUgJiYgKHJ1bGVzLmx0ZSA8IHRoaXMgJiYgdGhpcyA8IHJ1bGVzLmd0ZSk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcyBvciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMuZ3RlLCBydWxlcy5sdGVdKSA6ICcnSAESdgoCaW4YBiADKA1CasJIZwplCgl1aW50MzIuaW4aWCEodGhpcyBpbiBkeW4ocnVsZXMpWydpbiddKSA/ICd2YWx1ZSBtdXN0IGJlIGluIGxpc3QgJXMnLmZvcm1hdChbZHluKHJ1bGVzKVsnaW4nXV0pIDogJycSdwoGbm90X2luGAcgAygNQmfCSGQKYgoNdWludDMyLm5vdF9pbhpRdGhpcyBpbiBydWxlcy5ub3RfaW4gPyAndmFsdWUgbXVzdCBub3QgYmUgaW4gbGlzdCAlcycuZm9ybWF0KFtydWxlcy5ub3RfaW5dKSA6ICcnEiwKB2V4YW1wbGUYCCADKA1CG8JIGAoWCg51aW50MzIuZXhhbXBsZRoEdHJ1ZSoJCOgHEICAgIACQgsKCWxlc3NfdGhhbkIOCgxncmVhdGVyX3RoYW4i+BQKC1VJbnQ2NFJ1bGVzEmoKBWNvbnN0GAEgASgEQlvCSFgKVgoMdWludDY0LmNvbnN0GkZ0aGlzICE9IHJ1bGVzLmNvbnN0ID8gJ3ZhbHVlIG11c3QgZXF1YWwgJXMnLmZvcm1hdChbcnVsZXMuY29uc3RdKSA6ICcnEosBCgJsdBgCIAEoBEJ9wkh6CngKCXVpbnQ2NC5sdBprIWhhcyhydWxlcy5ndGUpICYmICFoYXMocnVsZXMuZ3QpICYmIHRoaXMgPj0gcnVsZXMubHQ/ICd2YWx1ZSBtdXN0IGJlIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5sdF0pIDogJydIABKdAQoDbHRlGAMgASgEQo0BwkiJAQqGAQoKdWludDY0Lmx0ZRp4IWhhcyhydWxlcy5ndGUpICYmICFoYXMocnVsZXMuZ3QpICYmIHRoaXMgPiBydWxlcy5sdGU/ICd2YWx1ZSBtdXN0IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5sdGVdKSA6ICcnSAASnAcKAmd0GAQgASgEQo0HwkiJBwp7Cgl1aW50NjQuZ3QabiFoYXMocnVsZXMubHQpICYmICFoYXMocnVsZXMubHRlKSAmJiB0aGlzIDw9IHJ1bGVzLmd0PyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMuZ3RdKSA6ICcnCrQBCgx1aW50NjQuZ3RfbHQaowFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0ID49IHJ1bGVzLmd0ICYmICh0aGlzID49IHJ1bGVzLmx0IHx8IHRoaXMgPD0gcnVsZXMuZ3QpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgYW5kIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndCwgcnVsZXMubHRdKSA6ICcnCrwBChZ1aW50NjQuZ3RfbHRfZXhjbHVzaXZlGqEBaGFzKHJ1bGVzLmx0KSAmJiBydWxlcy5sdCA8IHJ1bGVzLmd0ICYmIChydWxlcy5sdCA8PSB0aGlzICYmIHRoaXMgPD0gcnVsZXMuZ3QpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgb3IgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0LCBydWxlcy5sdF0pIDogJycKxAEKDXVpbnQ2NC5ndF9sdGUasgFoYXMocnVsZXMubHRlKSAmJiBydWxlcy5sdGUgPj0gcnVsZXMuZ3QgJiYgKHRoaXMgPiBydWxlcy5sdGUgfHwgdGhpcyA8PSBydWxlcy5ndCk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcyBhbmQgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0LCBydWxlcy5sdGVdKSA6ICcnCswBChd1aW50NjQuZ3RfbHRlX2V4Y2x1c2l2ZRqwAWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA8IHJ1bGVzLmd0ICYmIChydWxlcy5sdGUgPCB0aGlzICYmIHRoaXMgPD0gcnVsZXMuZ3QpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgb3IgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0LCBydWxlcy5sdGVdKSA6ICcnSAES6AcKA2d0ZRgFIAEoBELYB8JI1AcKiQEKCnVpbnQ2NC5ndGUaeyFoYXMocnVsZXMubHQpICYmICFoYXMocnVsZXMubHRlKSAmJiB0aGlzIDwgcnVsZXMuZ3RlPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMuZ3RlXSkgOiAnJwrDAQoNdWludDY0Lmd0ZV9sdBqxAWhhcyhydWxlcy5sdCkgJiYgcnVsZXMubHQgPj0gcnVsZXMuZ3RlICYmICh0aGlzID49IHJ1bGVzLmx0IHx8IHRoaXMgPCBydWxlcy5ndGUpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJXMgYW5kIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndGUsIHJ1bGVzLmx0XSkgOiAnJwrLAQoXdWludDY0Lmd0ZV9sdF9leGNsdXNpdmUarwFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0IDwgcnVsZXMuZ3RlICYmIChydWxlcy5sdCA8PSB0aGlzICYmIHRoaXMgPCBydWxlcy5ndGUpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJXMgb3IgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0ZSwgcnVsZXMubHRdKSA6ICcnCtMBCg51aW50NjQuZ3RlX2x0ZRrAAWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA+PSBydWxlcy5ndGUgJiYgKHRoaXMgPiBydWxlcy5sdGUgfHwgdGhpcyA8IHJ1bGVzLmd0ZSk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcyBhbmQgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0ZSwgcnVsZXMubHRlXSkgOiAnJwrbAQoYdWludDY0Lmd0ZV9sdGVfZXhjbHVzaXZlGr4BaGFzKHJ1bGVzLmx0ZSkgJiYgcnVsZXMubHRlIDwgcnVsZXMuZ3RlICYmIChydWxlcy5sdGUgPCB0aGlzICYmIHRoaXMgPCBydWxlcy5ndGUpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJXMgb3IgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0ZSwgcnVsZXMubHRlXSkgOiAnJ0gBEnYKAmluGAYgAygEQmrCSGcKZQoJdWludDY0LmluGlghKHRoaXMgaW4gZHluKHJ1bGVzKVsnaW4nXSkgPyAndmFsdWUgbXVzdCBiZSBpbiBsaXN0ICVzJy5mb3JtYXQoW2R5bihydWxlcylbJ2luJ11dKSA6ICcnEncKBm5vdF9pbhgHIAMoBEJnwkhkCmIKDXVpbnQ2NC5ub3RfaW4aUXRoaXMgaW4gcnVsZXMubm90X2luID8gJ3ZhbHVlIG11c3Qgbm90IGJlIGluIGxpc3QgJXMnLmZvcm1hdChbcnVsZXMubm90X2luXSkgOiAnJxIsCgdleGFtcGxlGAggAygEQhvCSBgKFgoOdWludDY0LmV4YW1wbGUaBHRydWUqCQjoBxCAgICAAkILCglsZXNzX3RoYW5CDgoMZ3JlYXRlcl90aGFuIvgUCgtTSW50MzJSdWxlcxJqCgVjb25zdBgBIAEoEUJbwkhYClYKDHNpbnQzMi5jb25zdBpGdGhpcyAhPSBydWxlcy5jb25zdCA/ICd2YWx1ZSBtdXN0IGVxdWFsICVzJy5mb3JtYXQoW3J1bGVzLmNvbnN0XSkgOiAnJxKLAQoCbHQYAiABKBFCfcJIegp4CglzaW50MzIubHQaayFoYXMocnVsZXMuZ3RlKSAmJiAhaGFzKHJ1bGVzLmd0KSAmJiB0aGlzID49IHJ1bGVzLmx0PyAndmFsdWUgbXVzdCBiZSBsZXNzIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMubHRdKSA6ICcnSAASnQEKA2x0ZRgDIAEoEUKNAcJIiQEKhgEKCnNpbnQzMi5sdGUaeCFoYXMocnVsZXMuZ3RlKSAmJiAhaGFzKHJ1bGVzLmd0KSAmJiB0aGlzID4gcnVsZXMubHRlPyAndmFsdWUgbXVzdCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMubHRlXSkgOiAnJ0gAEpwHCgJndBgEIAEoEUKNB8JIiQcKewoJc2ludDMyLmd0Gm4haGFzKHJ1bGVzLmx0KSAmJiAhaGFzKHJ1bGVzLmx0ZSkgJiYgdGhpcyA8PSBydWxlcy5ndD8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0XSkgOiAnJwq0AQoMc2ludDMyLmd0X2x0GqMBaGFzKHJ1bGVzLmx0KSAmJiBydWxlcy5sdCA+PSBydWxlcy5ndCAmJiAodGhpcyA+PSBydWxlcy5sdCB8fCB0aGlzIDw9IHJ1bGVzLmd0KT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuICVzIGFuZCBsZXNzIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMuZ3QsIHJ1bGVzLmx0XSkgOiAnJwq8AQoWc2ludDMyLmd0X2x0X2V4Y2x1c2l2ZRqhAWhhcyhydWxlcy5sdCkgJiYgcnVsZXMubHQgPCBydWxlcy5ndCAmJiAocnVsZXMubHQgPD0gdGhpcyAmJiB0aGlzIDw9IHJ1bGVzLmd0KT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuICVzIG9yIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndCwgcnVsZXMubHRdKSA6ICcnCsQBCg1zaW50MzIuZ3RfbHRlGrIBaGFzKHJ1bGVzLmx0ZSkgJiYgcnVsZXMubHRlID49IHJ1bGVzLmd0ICYmICh0aGlzID4gcnVsZXMubHRlIHx8IHRoaXMgPD0gcnVsZXMuZ3QpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndCwgcnVsZXMubHRlXSkgOiAnJwrMAQoXc2ludDMyLmd0X2x0ZV9leGNsdXNpdmUasAFoYXMocnVsZXMubHRlKSAmJiBydWxlcy5sdGUgPCBydWxlcy5ndCAmJiAocnVsZXMubHRlIDwgdGhpcyAmJiB0aGlzIDw9IHJ1bGVzLmd0KT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuICVzIG9yIGxlc3MgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndCwgcnVsZXMubHRlXSkgOiAnJ0gBEugHCgNndGUYBSABKBFC2AfCSNQHCokBCgpzaW50MzIuZ3RlGnshaGFzKHJ1bGVzLmx0KSAmJiAhaGFzKHJ1bGVzLmx0ZSkgJiYgdGhpcyA8IHJ1bGVzLmd0ZT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0ZV0pIDogJycKwwEKDXNpbnQzMi5ndGVfbHQasQFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0ID49IHJ1bGVzLmd0ZSAmJiAodGhpcyA+PSBydWxlcy5sdCB8fCB0aGlzIDwgcnVsZXMuZ3RlKT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzIGFuZCBsZXNzIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMuZ3RlLCBydWxlcy5sdF0pIDogJycKywEKF3NpbnQzMi5ndGVfbHRfZXhjbHVzaXZlGq8BaGFzKHJ1bGVzLmx0KSAmJiBydWxlcy5sdCA8IHJ1bGVzLmd0ZSAmJiAocnVsZXMubHQgPD0gdGhpcyAmJiB0aGlzIDwgcnVsZXMuZ3RlKT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzIG9yIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndGUsIHJ1bGVzLmx0XSkgOiAnJwrTAQoOc2ludDMyLmd0ZV9sdGUawAFoYXMocnVsZXMubHRlKSAmJiBydWxlcy5sdGUgPj0gcnVsZXMuZ3RlICYmICh0aGlzID4gcnVsZXMubHRlIHx8IHRoaXMgPCBydWxlcy5ndGUpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJXMgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndGUsIHJ1bGVzLmx0ZV0pIDogJycK2wEKGHNpbnQzMi5ndGVfbHRlX2V4Y2x1c2l2ZRq+AWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA8IHJ1bGVzLmd0ZSAmJiAocnVsZXMubHRlIDwgdGhpcyAmJiB0aGlzIDwgcnVsZXMuZ3RlKT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzIG9yIGxlc3MgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndGUsIHJ1bGVzLmx0ZV0pIDogJydIARJ2CgJpbhgGIAMoEUJqwkhnCmUKCXNpbnQzMi5pbhpYISh0aGlzIGluIGR5bihydWxlcylbJ2luJ10pID8gJ3ZhbHVlIG11c3QgYmUgaW4gbGlzdCAlcycuZm9ybWF0KFtkeW4ocnVsZXMpWydpbiddXSkgOiAnJxJ3CgZub3RfaW4YByADKBFCZ8JIZApiCg1zaW50MzIubm90X2luGlF0aGlzIGluIHJ1bGVzLm5vdF9pbiA/ICd2YWx1ZSBtdXN0IG5vdCBiZSBpbiBsaXN0ICVzJy5mb3JtYXQoW3J1bGVzLm5vdF9pbl0pIDogJycSLAoHZXhhbXBsZRgIIAMoEUIbwkgYChYKDnNpbnQzMi5leGFtcGxlGgR0cnVlKgkI6AcQgICAgAJCCwoJbGVzc190aGFuQg4KDGdyZWF0ZXJfdGhhbiL4FAoLU0ludDY0UnVsZXMSagoFY29uc3QYASABKBJCW8JIWApWCgxzaW50NjQuY29uc3QaRnRoaXMgIT0gcnVsZXMuY29uc3QgPyAndmFsdWUgbXVzdCBlcXVhbCAlcycuZm9ybWF0KFtydWxlcy5jb25zdF0pIDogJycSiwEKAmx0GAIgASgSQn3CSHoKeAoJc2ludDY0Lmx0GmshaGFzKHJ1bGVzLmd0ZSkgJiYgIWhhcyhydWxlcy5ndCkgJiYgdGhpcyA+PSBydWxlcy5sdD8gJ3ZhbHVlIG11c3QgYmUgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmx0XSkgOiAnJ0gAEp0BCgNsdGUYAyABKBJCjQHCSIkBCoYBCgpzaW50NjQubHRlGnghaGFzKHJ1bGVzLmd0ZSkgJiYgIWhhcyhydWxlcy5ndCkgJiYgdGhpcyA+IHJ1bGVzLmx0ZT8gJ3ZhbHVlIG11c3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmx0ZV0pIDogJydIABKcBwoCZ3QYBCABKBJCjQfCSIkHCnsKCXNpbnQ2NC5ndBpuIWhhcyhydWxlcy5sdCkgJiYgIWhhcyhydWxlcy5sdGUpICYmIHRoaXMgPD0gcnVsZXMuZ3Q/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndF0pIDogJycKtAEKDHNpbnQ2NC5ndF9sdBqjAWhhcyhydWxlcy5sdCkgJiYgcnVsZXMubHQgPj0gcnVsZXMuZ3QgJiYgKHRoaXMgPj0gcnVsZXMubHQgfHwgdGhpcyA8PSBydWxlcy5ndCk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcyBhbmQgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0LCBydWxlcy5sdF0pIDogJycKvAEKFnNpbnQ2NC5ndF9sdF9leGNsdXNpdmUaoQFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0IDwgcnVsZXMuZ3QgJiYgKHJ1bGVzLmx0IDw9IHRoaXMgJiYgdGhpcyA8PSBydWxlcy5ndCk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcyBvciBsZXNzIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMuZ3QsIHJ1bGVzLmx0XSkgOiAnJwrEAQoNc2ludDY0Lmd0X2x0ZRqyAWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA+PSBydWxlcy5ndCAmJiAodGhpcyA+IHJ1bGVzLmx0ZSB8fCB0aGlzIDw9IHJ1bGVzLmd0KT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuICVzIGFuZCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMuZ3QsIHJ1bGVzLmx0ZV0pIDogJycKzAEKF3NpbnQ2NC5ndF9sdGVfZXhjbHVzaXZlGrABaGFzKHJ1bGVzLmx0ZSkgJiYgcnVsZXMubHRlIDwgcnVsZXMuZ3QgJiYgKHJ1bGVzLmx0ZSA8IHRoaXMgJiYgdGhpcyA8PSBydWxlcy5ndCk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcyBvciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMuZ3QsIHJ1bGVzLmx0ZV0pIDogJydIARLoBwoDZ3RlGAUgASgSQtgHwkjUBwqJAQoKc2ludDY0Lmd0ZRp7IWhhcyhydWxlcy5sdCkgJiYgIWhhcyhydWxlcy5sdGUpICYmIHRoaXMgPCBydWxlcy5ndGU/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndGVdKSA6ICcnCsMBCg1zaW50NjQuZ3RlX2x0GrEBaGFzKHJ1bGVzLmx0KSAmJiBydWxlcy5sdCA+PSBydWxlcy5ndGUgJiYgKHRoaXMgPj0gcnVsZXMubHQgfHwgdGhpcyA8IHJ1bGVzLmd0ZSk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcyBhbmQgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0ZSwgcnVsZXMubHRdKSA6ICcnCssBChdzaW50NjQuZ3RlX2x0X2V4Y2x1c2l2ZRqvAWhhcyhydWxlcy5sdCkgJiYgcnVsZXMubHQgPCBydWxlcy5ndGUgJiYgKHJ1bGVzLmx0IDw9IHRoaXMgJiYgdGhpcyA8IHJ1bGVzLmd0ZSk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcyBvciBsZXNzIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMuZ3RlLCBydWxlcy5sdF0pIDogJycK0wEKDnNpbnQ2NC5ndGVfbHRlGsABaGFzKHJ1bGVzLmx0ZSkgJiYgcnVsZXMubHRlID49IHJ1bGVzLmd0ZSAmJiAodGhpcyA+IHJ1bGVzLmx0ZSB8fCB0aGlzIDwgcnVsZXMuZ3RlKT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzIGFuZCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMuZ3RlLCBydWxlcy5sdGVdKSA6ICcnCtsBChhzaW50NjQuZ3RlX2x0ZV9leGNsdXNpdmUavgFoYXMocnVsZXMubHRlKSAmJiBydWxlcy5sdGUgPCBydWxlcy5ndGUgJiYgKHJ1bGVzLmx0ZSA8IHRoaXMgJiYgdGhpcyA8IHJ1bGVzLmd0ZSk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcyBvciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMuZ3RlLCBydWxlcy5sdGVdKSA6ICcnSAESdgoCaW4YBiADKBJCasJIZwplCglzaW50NjQuaW4aWCEodGhpcyBpbiBkeW4ocnVsZXMpWydpbiddKSA/ICd2YWx1ZSBtdXN0IGJlIGluIGxpc3QgJXMnLmZvcm1hdChbZHluKHJ1bGVzKVsnaW4nXV0pIDogJycSdwoGbm90X2luGAcgAygSQmfCSGQKYgoNc2ludDY0Lm5vdF9pbhpRdGhpcyBpbiBydWxlcy5ub3RfaW4gPyAndmFsdWUgbXVzdCBub3QgYmUgaW4gbGlzdCAlcycuZm9ybWF0KFtydWxlcy5ub3RfaW5dKSA6ICcnEiwKB2V4YW1wbGUYCCADKBJCG8JIGAoWCg5zaW50NjQuZXhhbXBsZRoEdHJ1ZSoJCOgHEICAgIACQgsKCWxlc3NfdGhhbkIOCgxncmVhdGVyX3RoYW4iiRUKDEZpeGVkMzJSdWxlcxJrCgVjb25zdBgBIAEoB0JcwkhZClcKDWZpeGVkMzIuY29uc3QaRnRoaXMgIT0gcnVsZXMuY29uc3QgPyAndmFsdWUgbXVzdCBlcXVhbCAlcycuZm9ybWF0KFtydWxlcy5jb25zdF0pIDogJycSjAEKAmx0GAIgASgHQn7CSHsKeQoKZml4ZWQzMi5sdBprIWhhcyhydWxlcy5ndGUpICYmICFoYXMocnVsZXMuZ3QpICYmIHRoaXMgPj0gcnVsZXMubHQ/ICd2YWx1ZSBtdXN0IGJlIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5sdF0pIDogJydIABKeAQoDbHRlGAMgASgHQo4BwkiKAQqHAQoLZml4ZWQzMi5sdGUaeCFoYXMocnVsZXMuZ3RlKSAmJiAhaGFzKHJ1bGVzLmd0KSAmJiB0aGlzID4gcnVsZXMubHRlPyAndmFsdWUgbXVzdCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMubHRlXSkgOiAnJ0gAEqEHCgJndBgEIAEoB0KSB8JIjgcKfAoKZml4ZWQzMi5ndBpuIWhhcyhydWxlcy5sdCkgJiYgIWhhcyhydWxlcy5sdGUpICYmIHRoaXMgPD0gcnVsZXMuZ3Q/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndF0pIDogJycKtQEKDWZpeGVkMzIuZ3RfbHQaowFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0ID49IHJ1bGVzLmd0ICYmICh0aGlzID49IHJ1bGVzLmx0IHx8IHRoaXMgPD0gcnVsZXMuZ3QpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgYW5kIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndCwgcnVsZXMubHRdKSA6ICcnCr0BChdmaXhlZDMyLmd0X2x0X2V4Y2x1c2l2ZRqhAWhhcyhydWxlcy5sdCkgJiYgcnVsZXMubHQgPCBydWxlcy5ndCAmJiAocnVsZXMubHQgPD0gdGhpcyAmJiB0aGlzIDw9IHJ1bGVzLmd0KT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuICVzIG9yIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndCwgcnVsZXMubHRdKSA6ICcnCsUBCg5maXhlZDMyLmd0X2x0ZRqyAWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA+PSBydWxlcy5ndCAmJiAodGhpcyA+IHJ1bGVzLmx0ZSB8fCB0aGlzIDw9IHJ1bGVzLmd0KT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuICVzIGFuZCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMuZ3QsIHJ1bGVzLmx0ZV0pIDogJycKzQEKGGZpeGVkMzIuZ3RfbHRlX2V4Y2x1c2l2ZRqwAWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA8IHJ1bGVzLmd0ICYmIChydWxlcy5sdGUgPCB0aGlzICYmIHRoaXMgPD0gcnVsZXMuZ3QpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgb3IgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0LCBydWxlcy5sdGVdKSA6ICcnSAES7QcKA2d0ZRgFIAEoB0LdB8JI2QcKigEKC2ZpeGVkMzIuZ3RlGnshaGFzKHJ1bGVzLmx0KSAmJiAhaGFzKHJ1bGVzLmx0ZSkgJiYgdGhpcyA8IHJ1bGVzLmd0ZT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0ZV0pIDogJycKxAEKDmZpeGVkMzIuZ3RlX2x0GrEBaGFzKHJ1bGVzLmx0KSAmJiBydWxlcy5sdCA+PSBydWxlcy5ndGUgJiYgKHRoaXMgPj0gcnVsZXMubHQgfHwgdGhpcyA8IHJ1bGVzLmd0ZSk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcyBhbmQgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0ZSwgcnVsZXMubHRdKSA6ICcnCswBChhmaXhlZDMyLmd0ZV9sdF9leGNsdXNpdmUarwFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0IDwgcnVsZXMuZ3RlICYmIChydWxlcy5sdCA8PSB0aGlzICYmIHRoaXMgPCBydWxlcy5ndGUpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJXMgb3IgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0ZSwgcnVsZXMubHRdKSA6ICcnCtQBCg9maXhlZDMyLmd0ZV9sdGUawAFoYXMocnVsZXMubHRlKSAmJiBydWxlcy5sdGUgPj0gcnVsZXMuZ3RlICYmICh0aGlzID4gcnVsZXMubHRlIHx8IHRoaXMgPCBydWxlcy5ndGUpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJXMgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndGUsIHJ1bGVzLmx0ZV0pIDogJycK3AEKGWZpeGVkMzIuZ3RlX2x0ZV9leGNsdXNpdmUavgFoYXMocnVsZXMubHRlKSAmJiBydWxlcy5sdGUgPCBydWxlcy5ndGUgJiYgKHJ1bGVzLmx0ZSA8IHRoaXMgJiYgdGhpcyA8IHJ1bGVzLmd0ZSk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcyBvciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMuZ3RlLCBydWxlcy5sdGVdKSA6ICcnSAESdwoCaW4YBiADKAdCa8JIaApmCgpmaXhlZDMyLmluGlghKHRoaXMgaW4gZHluKHJ1bGVzKVsnaW4nXSkgPyAndmFsdWUgbXVzdCBiZSBpbiBsaXN0ICVzJy5mb3JtYXQoW2R5bihydWxlcylbJ2luJ11dKSA6ICcnEngKBm5vdF9pbhgHIAMoB0JowkhlCmMKDmZpeGVkMzIubm90X2luGlF0aGlzIGluIHJ1bGVzLm5vdF9pbiA/ICd2YWx1ZSBtdXN0IG5vdCBiZSBpbiBsaXN0ICVzJy5mb3JtYXQoW3J1bGVzLm5vdF9pbl0pIDogJycSLQoHZXhhbXBsZRgIIAMoB0IcwkgZChcKD2ZpeGVkMzIuZXhhbXBsZRoEdHJ1ZSoJCOgHEICAgIACQgsKCWxlc3NfdGhhbkIOCgxncmVhdGVyX3RoYW4iiRUKDEZpeGVkNjRSdWxlcxJrCgVjb25zdBgBIAEoBkJcwkhZClcKDWZpeGVkNjQuY29uc3QaRnRoaXMgIT0gcnVsZXMuY29uc3QgPyAndmFsdWUgbXVzdCBlcXVhbCAlcycuZm9ybWF0KFtydWxlcy5jb25zdF0pIDogJycSjAEKAmx0GAIgASgGQn7CSHsKeQoKZml4ZWQ2NC5sdBprIWhhcyhydWxlcy5ndGUpICYmICFoYXMocnVsZXMuZ3QpICYmIHRoaXMgPj0gcnVsZXMubHQ/ICd2YWx1ZSBtdXN0IGJlIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5sdF0pIDogJydIABKeAQoDbHRlGAMgASgGQo4BwkiKAQqHAQoLZml4ZWQ2NC5sdGUaeCFoYXMocnVsZXMuZ3RlKSAmJiAhaGFzKHJ1bGVzLmd0KSAmJiB0aGlzID4gcnVsZXMubHRlPyAndmFsdWUgbXVzdCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMubHRlXSkgOiAnJ0gAEqEHCgJndBgEIAEoBkKSB8JIjgcKfAoKZml4ZWQ2NC5ndBpuIWhhcyhydWxlcy5sdCkgJiYgIWhhcyhydWxlcy5sdGUpICYmIHRoaXMgPD0gcnVsZXMuZ3Q/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndF0pIDogJycKtQEKDWZpeGVkNjQuZ3RfbHQaowFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0ID49IHJ1bGVzLmd0ICYmICh0aGlzID49IHJ1bGVzLmx0IHx8IHRoaXMgPD0gcnVsZXMuZ3QpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgYW5kIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndCwgcnVsZXMubHRdKSA6ICcnCr0BChdmaXhlZDY0Lmd0X2x0X2V4Y2x1c2l2ZRqhAWhhcyhydWxlcy5sdCkgJiYgcnVsZXMubHQgPCBydWxlcy5ndCAmJiAocnVsZXMubHQgPD0gdGhpcyAmJiB0aGlzIDw9IHJ1bGVzLmd0KT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuICVzIG9yIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndCwgcnVsZXMubHRdKSA6ICcnCsUBCg5maXhlZDY0Lmd0X2x0ZRqyAWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA+PSBydWxlcy5ndCAmJiAodGhpcyA+IHJ1bGVzLmx0ZSB8fCB0aGlzIDw9IHJ1bGVzLmd0KT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuICVzIGFuZCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMuZ3QsIHJ1bGVzLmx0ZV0pIDogJycKzQEKGGZpeGVkNjQuZ3RfbHRlX2V4Y2x1c2l2ZRqwAWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA8IHJ1bGVzLmd0ICYmIChydWxlcy5sdGUgPCB0aGlzICYmIHRoaXMgPD0gcnVsZXMuZ3QpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgb3IgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0LCBydWxlcy5sdGVdKSA6ICcnSAES7QcKA2d0ZRgFIAEoBkLdB8JI2QcKigEKC2ZpeGVkNjQuZ3RlGnshaGFzKHJ1bGVzLmx0KSAmJiAhaGFzKHJ1bGVzLmx0ZSkgJiYgdGhpcyA8IHJ1bGVzLmd0ZT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0ZV0pIDogJycKxAEKDmZpeGVkNjQuZ3RlX2x0GrEBaGFzKHJ1bGVzLmx0KSAmJiBydWxlcy5sdCA+PSBydWxlcy5ndGUgJiYgKHRoaXMgPj0gcnVsZXMubHQgfHwgdGhpcyA8IHJ1bGVzLmd0ZSk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcyBhbmQgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0ZSwgcnVsZXMubHRdKSA6ICcnCswBChhmaXhlZDY0Lmd0ZV9sdF9leGNsdXNpdmUarwFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0IDwgcnVsZXMuZ3RlICYmIChydWxlcy5sdCA8PSB0aGlzICYmIHRoaXMgPCBydWxlcy5ndGUpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJXMgb3IgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0ZSwgcnVsZXMubHRdKSA6ICcnCtQBCg9maXhlZDY0Lmd0ZV9sdGUawAFoYXMocnVsZXMubHRlKSAmJiBydWxlcy5sdGUgPj0gcnVsZXMuZ3RlICYmICh0aGlzID4gcnVsZXMubHRlIHx8IHRoaXMgPCBydWxlcy5ndGUpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJXMgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndGUsIHJ1bGVzLmx0ZV0pIDogJycK3AEKGWZpeGVkNjQuZ3RlX2x0ZV9leGNsdXNpdmUavgFoYXMocnVsZXMubHRlKSAmJiBydWxlcy5sdGUgPCBydWxlcy5ndGUgJiYgKHJ1bGVzLmx0ZSA8IHRoaXMgJiYgdGhpcyA8IHJ1bGVzLmd0ZSk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcyBvciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMuZ3RlLCBydWxlcy5sdGVdKSA6ICcnSAESdwoCaW4YBiADKAZCa8JIaApmCgpmaXhlZDY0LmluGlghKHRoaXMgaW4gZHluKHJ1bGVzKVsnaW4nXSkgPyAndmFsdWUgbXVzdCBiZSBpbiBsaXN0ICVzJy5mb3JtYXQoW2R5bihydWxlcylbJ2luJ11dKSA6ICcnEngKBm5vdF9pbhgHIAMoBkJowkhlCmMKDmZpeGVkNjQubm90X2luGlF0aGlzIGluIHJ1bGVzLm5vdF9pbiA/ICd2YWx1ZSBtdXN0IG5vdCBiZSBpbiBsaXN0ICVzJy5mb3JtYXQoW3J1bGVzLm5vdF9pbl0pIDogJycSLQoHZXhhbXBsZRgIIAMoBkIcwkgZChcKD2ZpeGVkNjQuZXhhbXBsZRoEdHJ1ZSoJCOgHEICAgIACQgsKCWxlc3NfdGhhbkIOCgxncmVhdGVyX3RoYW4imhUKDVNGaXhlZDMyUnVsZXMSbAoFY29uc3QYASABKA9CXcJIWgpYCg5zZml4ZWQzMi5jb25zdBpGdGhpcyAhPSBydWxlcy5jb25zdCA/ICd2YWx1ZSBtdXN0IGVxdWFsICVzJy5mb3JtYXQoW3J1bGVzLmNvbnN0XSkgOiAnJxKNAQoCbHQYAiABKA9Cf8JIfAp6CgtzZml4ZWQzMi5sdBprIWhhcyhydWxlcy5ndGUpICYmICFoYXMocnVsZXMuZ3QpICYmIHRoaXMgPj0gcnVsZXMubHQ/ICd2YWx1ZSBtdXN0IGJlIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5sdF0pIDogJydIABKfAQoDbHRlGAMgASgPQo8BwkiLAQqIAQoMc2ZpeGVkMzIubHRlGnghaGFzKHJ1bGVzLmd0ZSkgJiYgIWhhcyhydWxlcy5ndCkgJiYgdGhpcyA+IHJ1bGVzLmx0ZT8gJ3ZhbHVlIG11c3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmx0ZV0pIDogJydIABKmBwoCZ3QYBCABKA9ClwfCSJMHCn0KC3NmaXhlZDMyLmd0Gm4haGFzKHJ1bGVzLmx0KSAmJiAhaGFzKHJ1bGVzLmx0ZSkgJiYgdGhpcyA8PSBydWxlcy5ndD8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0XSkgOiAnJwq2AQoOc2ZpeGVkMzIuZ3RfbHQaowFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0ID49IHJ1bGVzLmd0ICYmICh0aGlzID49IHJ1bGVzLmx0IHx8IHRoaXMgPD0gcnVsZXMuZ3QpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgYW5kIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndCwgcnVsZXMubHRdKSA6ICcnCr4BChhzZml4ZWQzMi5ndF9sdF9leGNsdXNpdmUaoQFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0IDwgcnVsZXMuZ3QgJiYgKHJ1bGVzLmx0IDw9IHRoaXMgJiYgdGhpcyA8PSBydWxlcy5ndCk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcyBvciBsZXNzIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMuZ3QsIHJ1bGVzLmx0XSkgOiAnJwrGAQoPc2ZpeGVkMzIuZ3RfbHRlGrIBaGFzKHJ1bGVzLmx0ZSkgJiYgcnVsZXMubHRlID49IHJ1bGVzLmd0ICYmICh0aGlzID4gcnVsZXMubHRlIHx8IHRoaXMgPD0gcnVsZXMuZ3QpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndCwgcnVsZXMubHRlXSkgOiAnJwrOAQoZc2ZpeGVkMzIuZ3RfbHRlX2V4Y2x1c2l2ZRqwAWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA8IHJ1bGVzLmd0ICYmIChydWxlcy5sdGUgPCB0aGlzICYmIHRoaXMgPD0gcnVsZXMuZ3QpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgb3IgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0LCBydWxlcy5sdGVdKSA6ICcnSAES8gcKA2d0ZRgFIAEoD0LiB8JI3gcKiwEKDHNmaXhlZDMyLmd0ZRp7IWhhcyhydWxlcy5sdCkgJiYgIWhhcyhydWxlcy5sdGUpICYmIHRoaXMgPCBydWxlcy5ndGU/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndGVdKSA6ICcnCsUBCg9zZml4ZWQzMi5ndGVfbHQasQFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0ID49IHJ1bGVzLmd0ZSAmJiAodGhpcyA+PSBydWxlcy5sdCB8fCB0aGlzIDwgcnVsZXMuZ3RlKT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzIGFuZCBsZXNzIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMuZ3RlLCBydWxlcy5sdF0pIDogJycKzQEKGXNmaXhlZDMyLmd0ZV9sdF9leGNsdXNpdmUarwFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0IDwgcnVsZXMuZ3RlICYmIChydWxlcy5sdCA8PSB0aGlzICYmIHRoaXMgPCBydWxlcy5ndGUpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJXMgb3IgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0ZSwgcnVsZXMubHRdKSA6ICcnCtUBChBzZml4ZWQzMi5ndGVfbHRlGsABaGFzKHJ1bGVzLmx0ZSkgJiYgcnVsZXMubHRlID49IHJ1bGVzLmd0ZSAmJiAodGhpcyA+IHJ1bGVzLmx0ZSB8fCB0aGlzIDwgcnVsZXMuZ3RlKT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzIGFuZCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMuZ3RlLCBydWxlcy5sdGVdKSA6ICcnCt0BChpzZml4ZWQzMi5ndGVfbHRlX2V4Y2x1c2l2ZRq+AWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA8IHJ1bGVzLmd0ZSAmJiAocnVsZXMubHRlIDwgdGhpcyAmJiB0aGlzIDwgcnVsZXMuZ3RlKT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzIG9yIGxlc3MgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndGUsIHJ1bGVzLmx0ZV0pIDogJydIARJ4CgJpbhgGIAMoD0JswkhpCmcKC3NmaXhlZDMyLmluGlghKHRoaXMgaW4gZHluKHJ1bGVzKVsnaW4nXSkgPyAndmFsdWUgbXVzdCBiZSBpbiBsaXN0ICVzJy5mb3JtYXQoW2R5bihydWxlcylbJ2luJ11dKSA6ICcnEnkKBm5vdF9pbhgHIAMoD0JpwkhmCmQKD3NmaXhlZDMyLm5vdF9pbhpRdGhpcyBpbiBydWxlcy5ub3RfaW4gPyAndmFsdWUgbXVzdCBub3QgYmUgaW4gbGlzdCAlcycuZm9ybWF0KFtydWxlcy5ub3RfaW5dKSA6ICcnEi4KB2V4YW1wbGUYCCADKA9CHcJIGgoYChBzZml4ZWQzMi5leGFtcGxlGgR0cnVlKgkI6AcQgICAgAJCCwoJbGVzc190aGFuQg4KDGdyZWF0ZXJfdGhhbiKaFQoNU0ZpeGVkNjRSdWxlcxJsCgVjb25zdBgBIAEoEEJdwkhaClgKDnNmaXhlZDY0LmNvbnN0GkZ0aGlzICE9IHJ1bGVzLmNvbnN0ID8gJ3ZhbHVlIG11c3QgZXF1YWwgJXMnLmZvcm1hdChbcnVsZXMuY29uc3RdKSA6ICcnEo0BCgJsdBgCIAEoEEJ/wkh8CnoKC3NmaXhlZDY0Lmx0GmshaGFzKHJ1bGVzLmd0ZSkgJiYgIWhhcyhydWxlcy5ndCkgJiYgdGhpcyA+PSBydWxlcy5sdD8gJ3ZhbHVlIG11c3QgYmUgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmx0XSkgOiAnJ0gAEp8BCgNsdGUYAyABKBBCjwHCSIsBCogBCgxzZml4ZWQ2NC5sdGUaeCFoYXMocnVsZXMuZ3RlKSAmJiAhaGFzKHJ1bGVzLmd0KSAmJiB0aGlzID4gcnVsZXMubHRlPyAndmFsdWUgbXVzdCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMubHRlXSkgOiAnJ0gAEqYHCgJndBgEIAEoEEKXB8JIkwcKfQoLc2ZpeGVkNjQuZ3QabiFoYXMocnVsZXMubHQpICYmICFoYXMocnVsZXMubHRlKSAmJiB0aGlzIDw9IHJ1bGVzLmd0PyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMuZ3RdKSA6ICcnCrYBCg5zZml4ZWQ2NC5ndF9sdBqjAWhhcyhydWxlcy5sdCkgJiYgcnVsZXMubHQgPj0gcnVsZXMuZ3QgJiYgKHRoaXMgPj0gcnVsZXMubHQgfHwgdGhpcyA8PSBydWxlcy5ndCk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcyBhbmQgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0LCBydWxlcy5sdF0pIDogJycKvgEKGHNmaXhlZDY0Lmd0X2x0X2V4Y2x1c2l2ZRqhAWhhcyhydWxlcy5sdCkgJiYgcnVsZXMubHQgPCBydWxlcy5ndCAmJiAocnVsZXMubHQgPD0gdGhpcyAmJiB0aGlzIDw9IHJ1bGVzLmd0KT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuICVzIG9yIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndCwgcnVsZXMubHRdKSA6ICcnCsYBCg9zZml4ZWQ2NC5ndF9sdGUasgFoYXMocnVsZXMubHRlKSAmJiBydWxlcy5sdGUgPj0gcnVsZXMuZ3QgJiYgKHRoaXMgPiBydWxlcy5sdGUgfHwgdGhpcyA8PSBydWxlcy5ndCk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcyBhbmQgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0LCBydWxlcy5sdGVdKSA6ICcnCs4BChlzZml4ZWQ2NC5ndF9sdGVfZXhjbHVzaXZlGrABaGFzKHJ1bGVzLmx0ZSkgJiYgcnVsZXMubHRlIDwgcnVsZXMuZ3QgJiYgKHJ1bGVzLmx0ZSA8IHRoaXMgJiYgdGhpcyA8PSBydWxlcy5ndCk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcyBvciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMuZ3QsIHJ1bGVzLmx0ZV0pIDogJydIARLyBwoDZ3RlGAUgASgQQuIHwkjeBwqLAQoMc2ZpeGVkNjQuZ3RlGnshaGFzKHJ1bGVzLmx0KSAmJiAhaGFzKHJ1bGVzLmx0ZSkgJiYgdGhpcyA8IHJ1bGVzLmd0ZT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0ZV0pIDogJycKxQEKD3NmaXhlZDY0Lmd0ZV9sdBqxAWhhcyhydWxlcy5sdCkgJiYgcnVsZXMubHQgPj0gcnVsZXMuZ3RlICYmICh0aGlzID49IHJ1bGVzLmx0IHx8IHRoaXMgPCBydWxlcy5ndGUpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJXMgYW5kIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndGUsIHJ1bGVzLmx0XSkgOiAnJwrNAQoZc2ZpeGVkNjQuZ3RlX2x0X2V4Y2x1c2l2ZRqvAWhhcyhydWxlcy5sdCkgJiYgcnVsZXMubHQgPCBydWxlcy5ndGUgJiYgKHJ1bGVzLmx0IDw9IHRoaXMgJiYgdGhpcyA8IHJ1bGVzLmd0ZSk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcyBvciBsZXNzIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMuZ3RlLCBydWxlcy5sdF0pIDogJycK1QEKEHNmaXhlZDY0Lmd0ZV9sdGUawAFoYXMocnVsZXMubHRlKSAmJiBydWxlcy5sdGUgPj0gcnVsZXMuZ3RlICYmICh0aGlzID4gcnVsZXMubHRlIHx8IHRoaXMgPCBydWxlcy5ndGUpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJXMgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndGUsIHJ1bGVzLmx0ZV0pIDogJycK3QEKGnNmaXhlZDY0Lmd0ZV9sdGVfZXhjbHVzaXZlGr4BaGFzKHJ1bGVzLmx0ZSkgJiYgcnVsZXMubHRlIDwgcnVsZXMuZ3RlICYmIChydWxlcy5sdGUgPCB0aGlzICYmIHRoaXMgPCBydWxlcy5ndGUpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJXMgb3IgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0ZSwgcnVsZXMubHRlXSkgOiAnJ0gBEngKAmluGAYgAygQQmzCSGkKZwoLc2ZpeGVkNjQuaW4aWCEodGhpcyBpbiBkeW4ocnVsZXMpWydpbiddKSA/ICd2YWx1ZSBtdXN0IGJlIGluIGxpc3QgJXMnLmZvcm1hdChbZHluKHJ1bGVzKVsnaW4nXV0pIDogJycSeQoGbm90X2luGAcgAygQQmnCSGYKZAoPc2ZpeGVkNjQubm90X2luGlF0aGlzIGluIHJ1bGVzLm5vdF9pbiA/ICd2YWx1ZSBtdXN0IG5vdCBiZSBpbiBsaXN0ICVzJy5mb3JtYXQoW3J1bGVzLm5vdF9pbl0pIDogJycSLgoHZXhhbXBsZRgIIAMoEEIdwkgaChgKEHNmaXhlZDY0LmV4YW1wbGUaBHRydWUqCQjoBxCAgICAAkILCglsZXNzX3RoYW5CDgoMZ3JlYXRlcl90aGFuIqwBCglCb29sUnVsZXMSaAoFY29uc3QYASABKAhCWcJIVgpUCgpib29sLmNvbnN0GkZ0aGlzICE9IHJ1bGVzLmNvbnN0ID8gJ3ZhbHVlIG11c3QgZXF1YWwgJXMnLmZvcm1hdChbcnVsZXMuY29uc3RdKSA6ICcnEioKB2V4YW1wbGUYAiADKAhCGcJIFgoUCgxib29sLmV4YW1wbGUaBHRydWUqCQjoBxCAgICAAiLgNgoLU3RyaW5nUnVsZXMSbAoFY29uc3QYASABKAlCXcJIWgpYCgxzdHJpbmcuY29uc3QaSHRoaXMgIT0gcnVsZXMuY29uc3QgPyAndmFsdWUgbXVzdCBlcXVhbCBgJXNgJy5mb3JtYXQoW3J1bGVzLmNvbnN0XSkgOiAnJxJ+CgNsZW4YEyABKARCccJIbgpsCgpzdHJpbmcubGVuGl51aW50KHRoaXMuc2l6ZSgpKSAhPSBydWxlcy5sZW4gPyAndmFsdWUgbGVuZ3RoIG11c3QgYmUgJXMgY2hhcmFjdGVycycuZm9ybWF0KFtydWxlcy5sZW5dKSA6ICcnEpkBCgdtaW5fbGVuGAIgASgEQocBwkiDAQqAAQoOc3RyaW5nLm1pbl9sZW4abnVpbnQodGhpcy5zaXplKCkpIDwgcnVsZXMubWluX2xlbiA/ICd2YWx1ZSBsZW5ndGggbXVzdCBiZSBhdCBsZWFzdCAlcyBjaGFyYWN0ZXJzJy5mb3JtYXQoW3J1bGVzLm1pbl9sZW5dKSA6ICcnEpcBCgdtYXhfbGVuGAMgASgEQoUBwkiBAQp/Cg5zdHJpbmcubWF4X2xlbhptdWludCh0aGlzLnNpemUoKSkgPiBydWxlcy5tYXhfbGVuID8gJ3ZhbHVlIGxlbmd0aCBtdXN0IGJlIGF0IG1vc3QgJXMgY2hhcmFjdGVycycuZm9ybWF0KFtydWxlcy5tYXhfbGVuXSkgOiAnJxKbAQoJbGVuX2J5dGVzGBQgASgEQocBwkiDAQqAAQoQc3RyaW5nLmxlbl9ieXRlcxpsdWludChieXRlcyh0aGlzKS5zaXplKCkpICE9IHJ1bGVzLmxlbl9ieXRlcyA/ICd2YWx1ZSBsZW5ndGggbXVzdCBiZSAlcyBieXRlcycuZm9ybWF0KFtydWxlcy5sZW5fYnl0ZXNdKSA6ICcnEqMBCgltaW5fYnl0ZXMYBCABKARCjwHCSIsBCogBChBzdHJpbmcubWluX2J5dGVzGnR1aW50KGJ5dGVzKHRoaXMpLnNpemUoKSkgPCBydWxlcy5taW5fYnl0ZXMgPyAndmFsdWUgbGVuZ3RoIG11c3QgYmUgYXQgbGVhc3QgJXMgYnl0ZXMnLmZvcm1hdChbcnVsZXMubWluX2J5dGVzXSkgOiAnJxKiAQoJbWF4X2J5dGVzGAUgASgEQo4BwkiKAQqHAQoQc3RyaW5nLm1heF9ieXRlcxpzdWludChieXRlcyh0aGlzKS5zaXplKCkpID4gcnVsZXMubWF4X2J5dGVzID8gJ3ZhbHVlIGxlbmd0aCBtdXN0IGJlIGF0IG1vc3QgJXMgYnl0ZXMnLmZvcm1hdChbcnVsZXMubWF4X2J5dGVzXSkgOiAnJxKNAQoHcGF0dGVybhgGIAEoCUJ8wkh5CncKDnN0cmluZy5wYXR0ZXJuGmUhdGhpcy5tYXRjaGVzKHJ1bGVzLnBhdHRlcm4pID8gJ3ZhbHVlIGRvZXMgbm90IG1hdGNoIHJlZ2V4IHBhdHRlcm4gYCVzYCcuZm9ybWF0KFtydWxlcy5wYXR0ZXJuXSkgOiAnJxKEAQoGcHJlZml4GAcgASgJQnTCSHEKbwoNc3RyaW5nLnByZWZpeBpeIXRoaXMuc3RhcnRzV2l0aChydWxlcy5wcmVmaXgpID8gJ3ZhbHVlIGRvZXMgbm90IGhhdmUgcHJlZml4IGAlc2AnLmZvcm1hdChbcnVsZXMucHJlZml4XSkgOiAnJxKCAQoGc3VmZml4GAggASgJQnLCSG8KbQoNc3RyaW5nLnN1ZmZpeBpcIXRoaXMuZW5kc1dpdGgocnVsZXMuc3VmZml4KSA/ICd2YWx1ZSBkb2VzIG5vdCBoYXZlIHN1ZmZpeCBgJXNgJy5mb3JtYXQoW3J1bGVzLnN1ZmZpeF0pIDogJycSkAEKCGNvbnRhaW5zGAkgASgJQn7CSHsKeQoPc3RyaW5nLmNvbnRhaW5zGmYhdGhpcy5jb250YWlucyhydWxlcy5jb250YWlucykgPyAndmFsdWUgZG9lcyBub3QgY29udGFpbiBzdWJzdHJpbmcgYCVzYCcuZm9ybWF0KFtydWxlcy5jb250YWluc10pIDogJycSmAEKDG5vdF9jb250YWlucxgXIAEoCUKBAcJIfgp8ChNzdHJpbmcubm90X2NvbnRhaW5zGmV0aGlzLmNvbnRhaW5zKHJ1bGVzLm5vdF9jb250YWlucykgPyAndmFsdWUgY29udGFpbnMgc3Vic3RyaW5nIGAlc2AnLmZvcm1hdChbcnVsZXMubm90X2NvbnRhaW5zXSkgOiAnJxJ2CgJpbhgKIAMoCUJqwkhnCmUKCXN0cmluZy5pbhpYISh0aGlzIGluIGR5bihydWxlcylbJ2luJ10pID8gJ3ZhbHVlIG11c3QgYmUgaW4gbGlzdCAlcycuZm9ybWF0KFtkeW4ocnVsZXMpWydpbiddXSkgOiAnJxJ3CgZub3RfaW4YCyADKAlCZ8JIZApiCg1zdHJpbmcubm90X2luGlF0aGlzIGluIHJ1bGVzLm5vdF9pbiA/ICd2YWx1ZSBtdXN0IG5vdCBiZSBpbiBsaXN0ICVzJy5mb3JtYXQoW3J1bGVzLm5vdF9pbl0pIDogJycS3wEKBWVtYWlsGAwgASgIQs0BwkjJAQphCgxzdHJpbmcuZW1haWwSI3ZhbHVlIG11c3QgYmUgYSB2YWxpZCBlbWFpbCBhZGRyZXNzGiwhcnVsZXMuZW1haWwgfHwgdGhpcyA9PSAnJyB8fCB0aGlzLmlzRW1haWwoKQpkChJzdHJpbmcuZW1haWxfZW1wdHkSMnZhbHVlIGlzIGVtcHR5LCB3aGljaCBpcyBub3QgYSB2YWxpZCBlbWFpbCBhZGRyZXNzGhohcnVsZXMuZW1haWwgfHwgdGhpcyAhPSAnJ0gAEucBCghob3N0bmFtZRgNIAEoCELSAcJIzgEKZQoPc3RyaW5nLmhvc3RuYW1lEh52YWx1ZSBtdXN0IGJlIGEgdmFsaWQgaG9zdG5hbWUaMiFydWxlcy5ob3N0bmFtZSB8fCB0aGlzID09ICcnIHx8IHRoaXMuaXNIb3N0bmFtZSgpCmUKFXN0cmluZy5ob3N0bmFtZV9lbXB0eRItdmFsdWUgaXMgZW1wdHksIHdoaWNoIGlzIG5vdCBhIHZhbGlkIGhvc3RuYW1lGh0hcnVsZXMuaG9zdG5hbWUgfHwgdGhpcyAhPSAnJ0gAEscBCgJpcBgOIAEoCEK4AcJItAEKVQoJc3RyaW5nLmlwEiB2YWx1ZSBtdXN0IGJlIGEgdmFsaWQgSVAgYWRkcmVzcxomIXJ1bGVzLmlwIHx8IHRoaXMgPT0gJycgfHwgdGhpcy5pc0lwKCkKWwoPc3RyaW5nLmlwX2VtcHR5Ei92YWx1ZSBpcyBlbXB0eSwgd2hpY2ggaXMgbm90IGEgdmFsaWQgSVAgYWRkcmVzcxoXIXJ1bGVzLmlwIHx8IHRoaXMgIT0gJydIABLWAQoEaXB2NBgPIAEoCELFAcJIwQEKXAoLc3RyaW5nLmlwdjQSInZhbHVlIG11c3QgYmUgYSB2YWxpZCBJUHY0IGFkZHJlc3MaKSFydWxlcy5pcHY0IHx8IHRoaXMgPT0gJycgfHwgdGhpcy5pc0lwKDQpCmEKEXN0cmluZy5pcHY0X2VtcHR5EjF2YWx1ZSBpcyBlbXB0eSwgd2hpY2ggaXMgbm90IGEgdmFsaWQgSVB2NCBhZGRyZXNzGhkhcnVsZXMuaXB2NCB8fCB0aGlzICE9ICcnSAAS1gEKBGlwdjYYECABKAhCxQHCSMEBClwKC3N0cmluZy5pcHY2EiJ2YWx1ZSBtdXN0IGJlIGEgdmFsaWQgSVB2NiBhZGRyZXNzGikhcnVsZXMuaXB2NiB8fCB0aGlzID09ICcnIHx8IHRoaXMuaXNJcCg2KQphChFzdHJpbmcuaXB2Nl9lbXB0eRIxdmFsdWUgaXMgZW1wdHksIHdoaWNoIGlzIG5vdCBhIHZhbGlkIElQdjYgYWRkcmVzcxoZIXJ1bGVzLmlwdjYgfHwgdGhpcyAhPSAnJ0gAEr8BCgN1cmkYESABKAhCrwHCSKsBClEKCnN0cmluZy51cmkSGXZhbHVlIG11c3QgYmUgYSB2YWxpZCBVUkkaKCFydWxlcy51cmkgfHwgdGhpcyA9PSAnJyB8fCB0aGlzLmlzVXJpKCkKVgoQc3RyaW5nLnVyaV9lbXB0eRIodmFsdWUgaXMgZW1wdHksIHdoaWNoIGlzIG5vdCBhIHZhbGlkIFVSSRoYIXJ1bGVzLnVyaSB8fCB0aGlzICE9ICcnSAASZgoHdXJpX3JlZhgSIAEoCEJTwkhQCk4KDnN0cmluZy51cmlfcmVmEhl2YWx1ZSBtdXN0IGJlIGEgdmFsaWQgVVJJGiEhcnVsZXMudXJpX3JlZiB8fCB0aGlzLmlzVXJpUmVmKClIABKQAgoHYWRkcmVzcxgVIAEoCEL8AcJI+AEKgQEKDnN0cmluZy5hZGRyZXNzEi12YWx1ZSBtdXN0IGJlIGEgdmFsaWQgaG9zdG5hbWUsIG9yIGlwIGFkZHJlc3MaQCFydWxlcy5hZGRyZXNzIHx8IHRoaXMgPT0gJycgfHwgdGhpcy5pc0hvc3RuYW1lKCkgfHwgdGhpcy5pc0lwKCkKcgoUc3RyaW5nLmFkZHJlc3NfZW1wdHkSPHZhbHVlIGlzIGVtcHR5LCB3aGljaCBpcyBub3QgYSB2YWxpZCBob3N0bmFtZSwgb3IgaXAgYWRkcmVzcxocIXJ1bGVzLmFkZHJlc3MgfHwgdGhpcyAhPSAnJ0gAEpgCCgR1dWlkGBYgASgIQocCwkiDAgqlAQoLc3RyaW5nLnV1aWQSGnZhbHVlIG11c3QgYmUgYSB2YWxpZCBVVUlEGnohcnVsZXMudXVpZCB8fCB0aGlzID09ICcnIHx8IHRoaXMubWF0Y2hlcygnXlswLTlhLWZBLUZdezh9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezR9LVswLTlhLWZBLUZdezEyfSQnKQpZChFzdHJpbmcudXVpZF9lbXB0eRIpdmFsdWUgaXMgZW1wdHksIHdoaWNoIGlzIG5vdCBhIHZhbGlkIFVVSUQaGSFydWxlcy51dWlkIHx8IHRoaXMgIT0gJydIABLwAQoFdHV1aWQYISABKAhC3gHCSNoBCnMKDHN0cmluZy50dXVpZBIidmFsdWUgbXVzdCBiZSBhIHZhbGlkIHRyaW1tZWQgVVVJRBo/IXJ1bGVzLnR1dWlkIHx8IHRoaXMgPT0gJycgfHwgdGhpcy5tYXRjaGVzKCdeWzAtOWEtZkEtRl17MzJ9JCcpCmMKEnN0cmluZy50dXVpZF9lbXB0eRIxdmFsdWUgaXMgZW1wdHksIHdoaWNoIGlzIG5vdCBhIHZhbGlkIHRyaW1tZWQgVVVJRBoaIXJ1bGVzLnR1dWlkIHx8IHRoaXMgIT0gJydIABKWAgoRaXBfd2l0aF9wcmVmaXhsZW4YGiABKAhC+AHCSPQBCngKGHN0cmluZy5pcF93aXRoX3ByZWZpeGxlbhIfdmFsdWUgbXVzdCBiZSBhIHZhbGlkIElQIHByZWZpeBo7IXJ1bGVzLmlwX3dpdGhfcHJlZml4bGVuIHx8IHRoaXMgPT0gJycgfHwgdGhpcy5pc0lwUHJlZml4KCkKeAoec3RyaW5nLmlwX3dpdGhfcHJlZml4bGVuX2VtcHR5Ei52YWx1ZSBpcyBlbXB0eSwgd2hpY2ggaXMgbm90IGEgdmFsaWQgSVAgcHJlZml4GiYhcnVsZXMuaXBfd2l0aF9wcmVmaXhsZW4gfHwgdGhpcyAhPSAnJ0gAEs8CChNpcHY0X3dpdGhfcHJlZml4bGVuGBsgASgIQq8CwkirAgqTAQoac3RyaW5nLmlwdjRfd2l0aF9wcmVmaXhsZW4SNXZhbHVlIG11c3QgYmUgYSB2YWxpZCBJUHY0IGFkZHJlc3Mgd2l0aCBwcmVmaXggbGVuZ3RoGj4hcnVsZXMuaXB2NF93aXRoX3ByZWZpeGxlbiB8fCB0aGlzID09ICcnIHx8IHRoaXMuaXNJcFByZWZpeCg0KQqSAQogc3RyaW5nLmlwdjRfd2l0aF9wcmVmaXhsZW5fZW1wdHkSRHZhbHVlIGlzIGVtcHR5LCB3aGljaCBpcyBub3QgYSB2YWxpZCBJUHY0IGFkZHJlc3Mgd2l0aCBwcmVmaXggbGVuZ3RoGighcnVsZXMuaXB2NF93aXRoX3ByZWZpeGxlbiB8fCB0aGlzICE9ICcnSAASzwIKE2lwdjZfd2l0aF9wcmVmaXhsZW4YHCABKAhCrwLCSKsCCpMBChpzdHJpbmcuaXB2Nl93aXRoX3ByZWZpeGxlbhI1dmFsdWUgbXVzdCBiZSBhIHZhbGlkIElQdjYgYWRkcmVzcyB3aXRoIHByZWZpeCBsZW5ndGgaPiFydWxlcy5pcHY2X3dpdGhfcHJlZml4bGVuIHx8IHRoaXMgPT0gJycgfHwgdGhpcy5pc0lwUHJlZml4KDYpCpIBCiBzdHJpbmcuaXB2Nl93aXRoX3ByZWZpeGxlbl9lbXB0eRJEdmFsdWUgaXMgZW1wdHksIHdoaWNoIGlzIG5vdCBhIHZhbGlkIElQdjYgYWRkcmVzcyB3aXRoIHByZWZpeCBsZW5ndGgaKCFydWxlcy5pcHY2X3dpdGhfcHJlZml4bGVuIHx8IHRoaXMgIT0gJydIABLyAQoJaXBfcHJlZml4GB0gASgIQtwBwkjYAQpsChBzdHJpbmcuaXBfcHJlZml4Eh92YWx1ZSBtdXN0IGJlIGEgdmFsaWQgSVAgcHJlZml4GjchcnVsZXMuaXBfcHJlZml4IHx8IHRoaXMgPT0gJycgfHwgdGhpcy5pc0lwUHJlZml4KHRydWUpCmgKFnN0cmluZy5pcF9wcmVmaXhfZW1wdHkSLnZhbHVlIGlzIGVtcHR5LCB3aGljaCBpcyBub3QgYSB2YWxpZCBJUCBwcmVmaXgaHiFydWxlcy5pcF9wcmVmaXggfHwgdGhpcyAhPSAnJ0gAEoMCCgtpcHY0X3ByZWZpeBgeIAEoCELrAcJI5wEKdQoSc3RyaW5nLmlwdjRfcHJlZml4EiF2YWx1ZSBtdXN0IGJlIGEgdmFsaWQgSVB2NCBwcmVmaXgaPCFydWxlcy5pcHY0X3ByZWZpeCB8fCB0aGlzID09ICcnIHx8IHRoaXMuaXNJcFByZWZpeCg0LCB0cnVlKQpuChhzdHJpbmcuaXB2NF9wcmVmaXhfZW1wdHkSMHZhbHVlIGlzIGVtcHR5LCB3aGljaCBpcyBub3QgYSB2YWxpZCBJUHY0IHByZWZpeBogIXJ1bGVzLmlwdjRfcHJlZml4IHx8IHRoaXMgIT0gJydIABKDAgoLaXB2Nl9wcmVmaXgYHyABKAhC6wHCSOcBCnUKEnN0cmluZy5pcHY2X3ByZWZpeBIhdmFsdWUgbXVzdCBiZSBhIHZhbGlkIElQdjYgcHJlZml4GjwhcnVsZXMuaXB2Nl9wcmVmaXggfHwgdGhpcyA9PSAnJyB8fCB0aGlzLmlzSXBQcmVmaXgoNiwgdHJ1ZSkKbgoYc3RyaW5nLmlwdjZfcHJlZml4X2VtcHR5EjB2YWx1ZSBpcyBlbXB0eSwgd2hpY2ggaXMgbm90IGEgdmFsaWQgSVB2NiBwcmVmaXgaICFydWxlcy5pcHY2X3ByZWZpeCB8fCB0aGlzICE9ICcnSAAStQIKDWhvc3RfYW5kX3BvcnQYICABKAhCmwLCSJcCCpkBChRzdHJpbmcuaG9zdF9hbmRfcG9ydBJBdmFsdWUgbXVzdCBiZSBhIHZhbGlkIGhvc3QgKGhvc3RuYW1lIG9yIElQIGFkZHJlc3MpIGFuZCBwb3J0IHBhaXIaPiFydWxlcy5ob3N0X2FuZF9wb3J0IHx8IHRoaXMgPT0gJycgfHwgdGhpcy5pc0hvc3RBbmRQb3J0KHRydWUpCnkKGnN0cmluZy5ob3N0X2FuZF9wb3J0X2VtcHR5Ejd2YWx1ZSBpcyBlbXB0eSwgd2hpY2ggaXMgbm90IGEgdmFsaWQgaG9zdCBhbmQgcG9ydCBwYWlyGiIhcnVsZXMuaG9zdF9hbmRfcG9ydCB8fCB0aGlzICE9ICcnSAASqAUKEHdlbGxfa25vd25fcmVnZXgYGCABKA4yGC5idWYudmFsaWRhdGUuS25vd25SZWdleELxBMJI7QQK8AEKI3N0cmluZy53ZWxsX2tub3duX3JlZ2V4LmhlYWRlcl9uYW1lEiZ2YWx1ZSBtdXN0IGJlIGEgdmFsaWQgSFRUUCBoZWFkZXIgbmFtZRqgAXJ1bGVzLndlbGxfa25vd25fcmVnZXggIT0gMSB8fCB0aGlzID09ICcnIHx8IHRoaXMubWF0Y2hlcyghaGFzKHJ1bGVzLnN0cmljdCkgfHwgcnVsZXMuc3RyaWN0ID8nXjo/WzAtOWEtekEtWiEjJCUmXCcqKy0uXl98flx4NjBdKyQnIDonXlteXHUwMDAwXHUwMDBBXHUwMDBEXSskJykKjQEKKXN0cmluZy53ZWxsX2tub3duX3JlZ2V4LmhlYWRlcl9uYW1lX2VtcHR5EjV2YWx1ZSBpcyBlbXB0eSwgd2hpY2ggaXMgbm90IGEgdmFsaWQgSFRUUCBoZWFkZXIgbmFtZRopcnVsZXMud2VsbF9rbm93bl9yZWdleCAhPSAxIHx8IHRoaXMgIT0gJycK5wEKJHN0cmluZy53ZWxsX2tub3duX3JlZ2V4LmhlYWRlcl92YWx1ZRIndmFsdWUgbXVzdCBiZSBhIHZhbGlkIEhUVFAgaGVhZGVyIHZhbHVlGpUBcnVsZXMud2VsbF9rbm93bl9yZWdleCAhPSAyIHx8IHRoaXMubWF0Y2hlcyghaGFzKHJ1bGVzLnN0cmljdCkgfHwgcnVsZXMuc3RyaWN0ID8nXlteXHUwMDAwLVx1MDAwOFx1MDAwQS1cdTAwMUZcdTAwN0ZdKiQnIDonXlteXHUwMDAwXHUwMDBBXHUwMDBEXSokJylIABIOCgZzdHJpY3QYGSABKAgSLAoHZXhhbXBsZRgiIAMoCUIbwkgYChYKDnN0cmluZy5leGFtcGxlGgR0cnVlKgkI6AcQgICAgAJCDAoKd2VsbF9rbm93biK/EAoKQnl0ZXNSdWxlcxJmCgVjb25zdBgBIAEoDEJXwkhUClIKC2J5dGVzLmNvbnN0GkN0aGlzICE9IHJ1bGVzLmNvbnN0ID8gJ3ZhbHVlIG11c3QgYmUgJXgnLmZvcm1hdChbcnVsZXMuY29uc3RdKSA6ICcnEngKA2xlbhgNIAEoBEJrwkhoCmYKCWJ5dGVzLmxlbhpZdWludCh0aGlzLnNpemUoKSkgIT0gcnVsZXMubGVuID8gJ3ZhbHVlIGxlbmd0aCBtdXN0IGJlICVzIGJ5dGVzJy5mb3JtYXQoW3J1bGVzLmxlbl0pIDogJycSkAEKB21pbl9sZW4YAiABKARCf8JIfAp6Cg1ieXRlcy5taW5fbGVuGml1aW50KHRoaXMuc2l6ZSgpKSA8IHJ1bGVzLm1pbl9sZW4gPyAndmFsdWUgbGVuZ3RoIG11c3QgYmUgYXQgbGVhc3QgJXMgYnl0ZXMnLmZvcm1hdChbcnVsZXMubWluX2xlbl0pIDogJycSiAEKB21heF9sZW4YAyABKARCd8JIdApyCg1ieXRlcy5tYXhfbGVuGmF1aW50KHRoaXMuc2l6ZSgpKSA+IHJ1bGVzLm1heF9sZW4gPyAndmFsdWUgbXVzdCBiZSBhdCBtb3N0ICVzIGJ5dGVzJy5mb3JtYXQoW3J1bGVzLm1heF9sZW5dKSA6ICcnEpABCgdwYXR0ZXJuGAQgASgJQn/CSHwKegoNYnl0ZXMucGF0dGVybhppIXN0cmluZyh0aGlzKS5tYXRjaGVzKHJ1bGVzLnBhdHRlcm4pID8gJ3ZhbHVlIG11c3QgbWF0Y2ggcmVnZXggcGF0dGVybiBgJXNgJy5mb3JtYXQoW3J1bGVzLnBhdHRlcm5dKSA6ICcnEoEBCgZwcmVmaXgYBSABKAxCccJIbgpsCgxieXRlcy5wcmVmaXgaXCF0aGlzLnN0YXJ0c1dpdGgocnVsZXMucHJlZml4KSA/ICd2YWx1ZSBkb2VzIG5vdCBoYXZlIHByZWZpeCAleCcuZm9ybWF0KFtydWxlcy5wcmVmaXhdKSA6ICcnEn8KBnN1ZmZpeBgGIAEoDEJvwkhsCmoKDGJ5dGVzLnN1ZmZpeBpaIXRoaXMuZW5kc1dpdGgocnVsZXMuc3VmZml4KSA/ICd2YWx1ZSBkb2VzIG5vdCBoYXZlIHN1ZmZpeCAleCcuZm9ybWF0KFtydWxlcy5zdWZmaXhdKSA6ICcnEoMBCghjb250YWlucxgHIAEoDEJxwkhuCmwKDmJ5dGVzLmNvbnRhaW5zGlohdGhpcy5jb250YWlucyhydWxlcy5jb250YWlucykgPyAndmFsdWUgZG9lcyBub3QgY29udGFpbiAleCcuZm9ybWF0KFtydWxlcy5jb250YWluc10pIDogJycSlwEKAmluGAggAygMQooBwkiGAQqDAQoIYnl0ZXMuaW4ad2R5bihydWxlcylbJ2luJ10uc2l6ZSgpID4gMCAmJiAhKHRoaXMgaW4gZHluKHJ1bGVzKVsnaW4nXSkgPyAndmFsdWUgbXVzdCBiZSBpbiBsaXN0ICVzJy5mb3JtYXQoW2R5bihydWxlcylbJ2luJ11dKSA6ICcnEnYKBm5vdF9pbhgJIAMoDEJmwkhjCmEKDGJ5dGVzLm5vdF9pbhpRdGhpcyBpbiBydWxlcy5ub3RfaW4gPyAndmFsdWUgbXVzdCBub3QgYmUgaW4gbGlzdCAlcycuZm9ybWF0KFtydWxlcy5ub3RfaW5dKSA6ICcnEusBCgJpcBgKIAEoCELcAcJI2AEKdAoIYnl0ZXMuaXASIHZhbHVlIG11c3QgYmUgYSB2YWxpZCBJUCBhZGRyZXNzGkYhcnVsZXMuaXAgfHwgdGhpcy5zaXplKCkgPT0gMCB8fCB0aGlzLnNpemUoKSA9PSA0IHx8IHRoaXMuc2l6ZSgpID09IDE2CmAKDmJ5dGVzLmlwX2VtcHR5Ei92YWx1ZSBpcyBlbXB0eSwgd2hpY2ggaXMgbm90IGEgdmFsaWQgSVAgYWRkcmVzcxodIXJ1bGVzLmlwIHx8IHRoaXMuc2l6ZSgpICE9IDBIABLkAQoEaXB2NBgLIAEoCELTAcJIzwEKZQoKYnl0ZXMuaXB2NBIidmFsdWUgbXVzdCBiZSBhIHZhbGlkIElQdjQgYWRkcmVzcxozIXJ1bGVzLmlwdjQgfHwgdGhpcy5zaXplKCkgPT0gMCB8fCB0aGlzLnNpemUoKSA9PSA0CmYKEGJ5dGVzLmlwdjRfZW1wdHkSMXZhbHVlIGlzIGVtcHR5LCB3aGljaCBpcyBub3QgYSB2YWxpZCBJUHY0IGFkZHJlc3MaHyFydWxlcy5pcHY0IHx8IHRoaXMuc2l6ZSgpICE9IDBIABLlAQoEaXB2NhgMIAEoCELUAcJI0AEKZgoKYnl0ZXMuaXB2NhIidmFsdWUgbXVzdCBiZSBhIHZhbGlkIElQdjYgYWRkcmVzcxo0IXJ1bGVzLmlwdjYgfHwgdGhpcy5zaXplKCkgPT0gMCB8fCB0aGlzLnNpemUoKSA9PSAxNgpmChBieXRlcy5pcHY2X2VtcHR5EjF2YWx1ZSBpcyBlbXB0eSwgd2hpY2ggaXMgbm90IGEgdmFsaWQgSVB2NiBhZGRyZXNzGh8hcnVsZXMuaXB2NiB8fCB0aGlzLnNpemUoKSAhPSAwSAASKwoHZXhhbXBsZRgOIAMoDEIawkgXChUKDWJ5dGVzLmV4YW1wbGUaBHRydWUqCQjoBxCAgICAAkIMCgp3ZWxsX2tub3duIq8DCglFbnVtUnVsZXMSaAoFY29uc3QYASABKAVCWcJIVgpUCgplbnVtLmNvbnN0GkZ0aGlzICE9IHJ1bGVzLmNvbnN0ID8gJ3ZhbHVlIG11c3QgZXF1YWwgJXMnLmZvcm1hdChbcnVsZXMuY29uc3RdKSA6ICcnEhQKDGRlZmluZWRfb25seRgCIAEoCBJ0CgJpbhgDIAMoBUJowkhlCmMKB2VudW0uaW4aWCEodGhpcyBpbiBkeW4ocnVsZXMpWydpbiddKSA/ICd2YWx1ZSBtdXN0IGJlIGluIGxpc3QgJXMnLmZvcm1hdChbZHluKHJ1bGVzKVsnaW4nXV0pIDogJycSdQoGbm90X2luGAQgAygFQmXCSGIKYAoLZW51bS5ub3RfaW4aUXRoaXMgaW4gcnVsZXMubm90X2luID8gJ3ZhbHVlIG11c3Qgbm90IGJlIGluIGxpc3QgJXMnLmZvcm1hdChbcnVsZXMubm90X2luXSkgOiAnJxIqCgdleGFtcGxlGAUgAygFQhnCSBYKFAoMZW51bS5leGFtcGxlGgR0cnVlKgkI6AcQgICAgAIigQQKDVJlcGVhdGVkUnVsZXMSngEKCW1pbl9pdGVtcxgBIAEoBEKKAcJIhgEKgwEKEnJlcGVhdGVkLm1pbl9pdGVtcxptdWludCh0aGlzLnNpemUoKSkgPCBydWxlcy5taW5faXRlbXMgPyAndmFsdWUgbXVzdCBjb250YWluIGF0IGxlYXN0ICVkIGl0ZW0ocyknLmZvcm1hdChbcnVsZXMubWluX2l0ZW1zXSkgOiAnJxKiAQoJbWF4X2l0ZW1zGAIgASgEQo4BwkiKAQqHAQoScmVwZWF0ZWQubWF4X2l0ZW1zGnF1aW50KHRoaXMuc2l6ZSgpKSA+IHJ1bGVzLm1heF9pdGVtcyA/ICd2YWx1ZSBtdXN0IGNvbnRhaW4gbm8gbW9yZSB0aGFuICVzIGl0ZW0ocyknLmZvcm1hdChbcnVsZXMubWF4X2l0ZW1zXSkgOiAnJxJwCgZ1bmlxdWUYAyABKAhCYMJIXQpbCg9yZXBlYXRlZC51bmlxdWUSKHJlcGVhdGVkIHZhbHVlIG11c3QgY29udGFpbiB1bmlxdWUgaXRlbXMaHiFydWxlcy51bmlxdWUgfHwgdGhpcy51bmlxdWUoKRItCgVpdGVtcxgEIAEoCzIeLmJ1Zi52YWxpZGF0ZS5GaWVsZENvbnN0cmFpbnRzKgkI6AcQgICAgAIilgMKCE1hcFJ1bGVzEo8BCgltaW5fcGFpcnMYASABKARCfMJIeQp3Cg1tYXAubWluX3BhaXJzGmZ1aW50KHRoaXMuc2l6ZSgpKSA8IHJ1bGVzLm1pbl9wYWlycyA/ICdtYXAgbXVzdCBiZSBhdCBsZWFzdCAlZCBlbnRyaWVzJy5mb3JtYXQoW3J1bGVzLm1pbl9wYWlyc10pIDogJycSjgEKCW1heF9wYWlycxgCIAEoBEJ7wkh4CnYKDW1hcC5tYXhfcGFpcnMaZXVpbnQodGhpcy5zaXplKCkpID4gcnVsZXMubWF4X3BhaXJzID8gJ21hcCBtdXN0IGJlIGF0IG1vc3QgJWQgZW50cmllcycuZm9ybWF0KFtydWxlcy5tYXhfcGFpcnNdKSA6ICcnEiwKBGtleXMYBCABKAsyHi5idWYudmFsaWRhdGUuRmllbGRDb25zdHJhaW50cxIuCgZ2YWx1ZXMYBSABKAsyHi5idWYudmFsaWRhdGUuRmllbGRDb25zdHJhaW50cyoJCOgHEICAgIACIiYKCEFueVJ1bGVzEgoKAmluGAIgAygJEg4KBm5vdF9pbhgDIAMoCSL1FgoNRHVyYXRpb25SdWxlcxKHAQoFY29uc3QYAiABKAsyGS5nb29nbGUucHJvdG9idWYuRHVyYXRpb25CXcJIWgpYCg5kdXJhdGlvbi5jb25zdBpGdGhpcyAhPSBydWxlcy5jb25zdCA/ICd2YWx1ZSBtdXN0IGVxdWFsICVzJy5mb3JtYXQoW3J1bGVzLmNvbnN0XSkgOiAnJxKoAQoCbHQYAyABKAsyGS5nb29nbGUucHJvdG9idWYuRHVyYXRpb25Cf8JIfAp6CgtkdXJhdGlvbi5sdBprIWhhcyhydWxlcy5ndGUpICYmICFoYXMocnVsZXMuZ3QpICYmIHRoaXMgPj0gcnVsZXMubHQ/ICd2YWx1ZSBtdXN0IGJlIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5sdF0pIDogJydIABK6AQoDbHRlGAQgASgLMhkuZ29vZ2xlLnByb3RvYnVmLkR1cmF0aW9uQo8BwkiLAQqIAQoMZHVyYXRpb24ubHRlGnghaGFzKHJ1bGVzLmd0ZSkgJiYgIWhhcyhydWxlcy5ndCkgJiYgdGhpcyA+IHJ1bGVzLmx0ZT8gJ3ZhbHVlIG11c3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmx0ZV0pIDogJydIABLBBwoCZ3QYBSABKAsyGS5nb29nbGUucHJvdG9idWYuRHVyYXRpb25ClwfCSJMHCn0KC2R1cmF0aW9uLmd0Gm4haGFzKHJ1bGVzLmx0KSAmJiAhaGFzKHJ1bGVzLmx0ZSkgJiYgdGhpcyA8PSBydWxlcy5ndD8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0XSkgOiAnJwq2AQoOZHVyYXRpb24uZ3RfbHQaowFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0ID49IHJ1bGVzLmd0ICYmICh0aGlzID49IHJ1bGVzLmx0IHx8IHRoaXMgPD0gcnVsZXMuZ3QpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgYW5kIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndCwgcnVsZXMubHRdKSA6ICcnCr4BChhkdXJhdGlvbi5ndF9sdF9leGNsdXNpdmUaoQFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0IDwgcnVsZXMuZ3QgJiYgKHJ1bGVzLmx0IDw9IHRoaXMgJiYgdGhpcyA8PSBydWxlcy5ndCk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcyBvciBsZXNzIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMuZ3QsIHJ1bGVzLmx0XSkgOiAnJwrGAQoPZHVyYXRpb24uZ3RfbHRlGrIBaGFzKHJ1bGVzLmx0ZSkgJiYgcnVsZXMubHRlID49IHJ1bGVzLmd0ICYmICh0aGlzID4gcnVsZXMubHRlIHx8IHRoaXMgPD0gcnVsZXMuZ3QpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndCwgcnVsZXMubHRlXSkgOiAnJwrOAQoZZHVyYXRpb24uZ3RfbHRlX2V4Y2x1c2l2ZRqwAWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA8IHJ1bGVzLmd0ICYmIChydWxlcy5sdGUgPCB0aGlzICYmIHRoaXMgPD0gcnVsZXMuZ3QpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgb3IgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0LCBydWxlcy5sdGVdKSA6ICcnSAESjQgKA2d0ZRgGIAEoCzIZLmdvb2dsZS5wcm90b2J1Zi5EdXJhdGlvbkLiB8JI3gcKiwEKDGR1cmF0aW9uLmd0ZRp7IWhhcyhydWxlcy5sdCkgJiYgIWhhcyhydWxlcy5sdGUpICYmIHRoaXMgPCBydWxlcy5ndGU/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndGVdKSA6ICcnCsUBCg9kdXJhdGlvbi5ndGVfbHQasQFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0ID49IHJ1bGVzLmd0ZSAmJiAodGhpcyA+PSBydWxlcy5sdCB8fCB0aGlzIDwgcnVsZXMuZ3RlKT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzIGFuZCBsZXNzIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMuZ3RlLCBydWxlcy5sdF0pIDogJycKzQEKGWR1cmF0aW9uLmd0ZV9sdF9leGNsdXNpdmUarwFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0IDwgcnVsZXMuZ3RlICYmIChydWxlcy5sdCA8PSB0aGlzICYmIHRoaXMgPCBydWxlcy5ndGUpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJXMgb3IgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0ZSwgcnVsZXMubHRdKSA6ICcnCtUBChBkdXJhdGlvbi5ndGVfbHRlGsABaGFzKHJ1bGVzLmx0ZSkgJiYgcnVsZXMubHRlID49IHJ1bGVzLmd0ZSAmJiAodGhpcyA+IHJ1bGVzLmx0ZSB8fCB0aGlzIDwgcnVsZXMuZ3RlKT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzIGFuZCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gJXMnLmZvcm1hdChbcnVsZXMuZ3RlLCBydWxlcy5sdGVdKSA6ICcnCt0BChpkdXJhdGlvbi5ndGVfbHRlX2V4Y2x1c2l2ZRq+AWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA8IHJ1bGVzLmd0ZSAmJiAocnVsZXMubHRlIDwgdGhpcyAmJiB0aGlzIDwgcnVsZXMuZ3RlKT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzIG9yIGxlc3MgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndGUsIHJ1bGVzLmx0ZV0pIDogJydIARKTAQoCaW4YByADKAsyGS5nb29nbGUucHJvdG9idWYuRHVyYXRpb25CbMJIaQpnCgtkdXJhdGlvbi5pbhpYISh0aGlzIGluIGR5bihydWxlcylbJ2luJ10pID8gJ3ZhbHVlIG11c3QgYmUgaW4gbGlzdCAlcycuZm9ybWF0KFtkeW4ocnVsZXMpWydpbiddXSkgOiAnJxKUAQoGbm90X2luGAggAygLMhkuZ29vZ2xlLnByb3RvYnVmLkR1cmF0aW9uQmnCSGYKZAoPZHVyYXRpb24ubm90X2luGlF0aGlzIGluIHJ1bGVzLm5vdF9pbiA/ICd2YWx1ZSBtdXN0IG5vdCBiZSBpbiBsaXN0ICVzJy5mb3JtYXQoW3J1bGVzLm5vdF9pbl0pIDogJycSSQoHZXhhbXBsZRgJIAMoCzIZLmdvb2dsZS5wcm90b2J1Zi5EdXJhdGlvbkIdwkgaChgKEGR1cmF0aW9uLmV4YW1wbGUaBHRydWUqCQjoBxCAgICAAkILCglsZXNzX3RoYW5CDgoMZ3JlYXRlcl90aGFuIvgXCg5UaW1lc3RhbXBSdWxlcxKJAQoFY29uc3QYAiABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wQl7CSFsKWQoPdGltZXN0YW1wLmNvbnN0GkZ0aGlzICE9IHJ1bGVzLmNvbnN0ID8gJ3ZhbHVlIG11c3QgZXF1YWwgJXMnLmZvcm1hdChbcnVsZXMuY29uc3RdKSA6ICcnEqsBCgJsdBgDIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXBCgAHCSH0KewoMdGltZXN0YW1wLmx0GmshaGFzKHJ1bGVzLmd0ZSkgJiYgIWhhcyhydWxlcy5ndCkgJiYgdGhpcyA+PSBydWxlcy5sdD8gJ3ZhbHVlIG11c3QgYmUgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmx0XSkgOiAnJ0gAErwBCgNsdGUYBCABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wQpABwkiMAQqJAQoNdGltZXN0YW1wLmx0ZRp4IWhhcyhydWxlcy5ndGUpICYmICFoYXMocnVsZXMuZ3QpICYmIHRoaXMgPiBydWxlcy5sdGU/ICd2YWx1ZSBtdXN0IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5sdGVdKSA6ICcnSAASbAoGbHRfbm93GAcgASgIQlrCSFcKVQoQdGltZXN0YW1wLmx0X25vdxpBKHJ1bGVzLmx0X25vdyAmJiB0aGlzID4gbm93KSA/ICd2YWx1ZSBtdXN0IGJlIGxlc3MgdGhhbiBub3cnIDogJydIABLHBwoCZ3QYBSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wQpwHwkiYBwp+Cgx0aW1lc3RhbXAuZ3QabiFoYXMocnVsZXMubHQpICYmICFoYXMocnVsZXMubHRlKSAmJiB0aGlzIDw9IHJ1bGVzLmd0PyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMuZ3RdKSA6ICcnCrcBCg90aW1lc3RhbXAuZ3RfbHQaowFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0ID49IHJ1bGVzLmd0ICYmICh0aGlzID49IHJ1bGVzLmx0IHx8IHRoaXMgPD0gcnVsZXMuZ3QpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgYW5kIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndCwgcnVsZXMubHRdKSA6ICcnCr8BChl0aW1lc3RhbXAuZ3RfbHRfZXhjbHVzaXZlGqEBaGFzKHJ1bGVzLmx0KSAmJiBydWxlcy5sdCA8IHJ1bGVzLmd0ICYmIChydWxlcy5sdCA8PSB0aGlzICYmIHRoaXMgPD0gcnVsZXMuZ3QpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgb3IgbGVzcyB0aGFuICVzJy5mb3JtYXQoW3J1bGVzLmd0LCBydWxlcy5sdF0pIDogJycKxwEKEHRpbWVzdGFtcC5ndF9sdGUasgFoYXMocnVsZXMubHRlKSAmJiBydWxlcy5sdGUgPj0gcnVsZXMuZ3QgJiYgKHRoaXMgPiBydWxlcy5sdGUgfHwgdGhpcyA8PSBydWxlcy5ndCk/ICd2YWx1ZSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAlcyBhbmQgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0LCBydWxlcy5sdGVdKSA6ICcnCs8BChp0aW1lc3RhbXAuZ3RfbHRlX2V4Y2x1c2l2ZRqwAWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA8IHJ1bGVzLmd0ICYmIChydWxlcy5sdGUgPCB0aGlzICYmIHRoaXMgPD0gcnVsZXMuZ3QpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gJXMgb3IgbGVzcyB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0LCBydWxlcy5sdGVdKSA6ICcnSAESkwgKA2d0ZRgGIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXBC5wfCSOMHCowBCg10aW1lc3RhbXAuZ3RlGnshaGFzKHJ1bGVzLmx0KSAmJiAhaGFzKHJ1bGVzLmx0ZSkgJiYgdGhpcyA8IHJ1bGVzLmd0ZT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzJy5mb3JtYXQoW3J1bGVzLmd0ZV0pIDogJycKxgEKEHRpbWVzdGFtcC5ndGVfbHQasQFoYXMocnVsZXMubHQpICYmIHJ1bGVzLmx0ID49IHJ1bGVzLmd0ZSAmJiAodGhpcyA+PSBydWxlcy5sdCB8fCB0aGlzIDwgcnVsZXMuZ3RlKT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzIGFuZCBsZXNzIHRoYW4gJXMnLmZvcm1hdChbcnVsZXMuZ3RlLCBydWxlcy5sdF0pIDogJycKzgEKGnRpbWVzdGFtcC5ndGVfbHRfZXhjbHVzaXZlGq8BaGFzKHJ1bGVzLmx0KSAmJiBydWxlcy5sdCA8IHJ1bGVzLmd0ZSAmJiAocnVsZXMubHQgPD0gdGhpcyAmJiB0aGlzIDwgcnVsZXMuZ3RlKT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzIG9yIGxlc3MgdGhhbiAlcycuZm9ybWF0KFtydWxlcy5ndGUsIHJ1bGVzLmx0XSkgOiAnJwrWAQoRdGltZXN0YW1wLmd0ZV9sdGUawAFoYXMocnVsZXMubHRlKSAmJiBydWxlcy5sdGUgPj0gcnVsZXMuZ3RlICYmICh0aGlzID4gcnVsZXMubHRlIHx8IHRoaXMgPCBydWxlcy5ndGUpPyAndmFsdWUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJXMgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndGUsIHJ1bGVzLmx0ZV0pIDogJycK3gEKG3RpbWVzdGFtcC5ndGVfbHRlX2V4Y2x1c2l2ZRq+AWhhcyhydWxlcy5sdGUpICYmIHJ1bGVzLmx0ZSA8IHJ1bGVzLmd0ZSAmJiAocnVsZXMubHRlIDwgdGhpcyAmJiB0aGlzIDwgcnVsZXMuZ3RlKT8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICVzIG9yIGxlc3MgdGhhbiBvciBlcXVhbCB0byAlcycuZm9ybWF0KFtydWxlcy5ndGUsIHJ1bGVzLmx0ZV0pIDogJydIARJvCgZndF9ub3cYCCABKAhCXcJIWgpYChB0aW1lc3RhbXAuZ3Rfbm93GkQocnVsZXMuZ3Rfbm93ICYmIHRoaXMgPCBub3cpID8gJ3ZhbHVlIG11c3QgYmUgZ3JlYXRlciB0aGFuIG5vdycgOiAnJ0gBErgBCgZ3aXRoaW4YCSABKAsyGS5nb29nbGUucHJvdG9idWYuRHVyYXRpb25CjAHCSIgBCoUBChB0aW1lc3RhbXAud2l0aGluGnF0aGlzIDwgbm93LXJ1bGVzLndpdGhpbiB8fCB0aGlzID4gbm93K3J1bGVzLndpdGhpbiA/ICd2YWx1ZSBtdXN0IGJlIHdpdGhpbiAlcyBvZiBub3cnLmZvcm1hdChbcnVsZXMud2l0aGluXSkgOiAnJxJLCgdleGFtcGxlGAogAygLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcEIewkgbChkKEXRpbWVzdGFtcC5leGFtcGxlGgR0cnVlKgkI6AcQgICAgAJCCwoJbGVzc190aGFuQg4KDGdyZWF0ZXJfdGhhbiI5CgpWaW9sYXRpb25zEisKCnZpb2xhdGlvbnMYASADKAsyFy5idWYudmFsaWRhdGUuVmlvbGF0aW9uIqsBCglWaW9sYXRpb24SJgoFZmllbGQYBSABKAsyFy5idWYudmFsaWRhdGUuRmllbGRQYXRoEiUKBHJ1bGUYBiABKAsyFy5idWYudmFsaWRhdGUuRmllbGRQYXRoEhYKCmZpZWxkX3BhdGgYASABKAlCAhgBEhUKDWNvbnN0cmFpbnRfaWQYAiABKAkSDwoHbWVzc2FnZRgDIAEoCRIPCgdmb3Jfa2V5GAQgASgIIj0KCUZpZWxkUGF0aBIwCghlbGVtZW50cxgBIAMoCzIeLmJ1Zi52YWxpZGF0ZS5GaWVsZFBhdGhFbGVtZW50IukCChBGaWVsZFBhdGhFbGVtZW50EhQKDGZpZWxkX251bWJlchgBIAEoBRISCgpmaWVsZF9uYW1lGAIgASgJEj4KCmZpZWxkX3R5cGUYAyABKA4yKi5nb29nbGUucHJvdG9idWYuRmllbGREZXNjcmlwdG9yUHJvdG8uVHlwZRI8CghrZXlfdHlwZRgEIAEoDjIqLmdvb2dsZS5wcm90b2J1Zi5GaWVsZERlc2NyaXB0b3JQcm90by5UeXBlEj4KCnZhbHVlX3R5cGUYBSABKA4yKi5nb29nbGUucHJvdG9idWYuRmllbGREZXNjcmlwdG9yUHJvdG8uVHlwZRIPCgVpbmRleBgGIAEoBEgAEhIKCGJvb2xfa2V5GAcgASgISAASEQoHaW50X2tleRgIIAEoA0gAEhIKCHVpbnRfa2V5GAkgASgESAASFAoKc3RyaW5nX2tleRgKIAEoCUgAQgsKCXN1YnNjcmlwdCqdAQoGSWdub3JlEhYKEklHTk9SRV9VTlNQRUNJRklFRBAAEhkKFUlHTk9SRV9JRl9VTlBPUFVMQVRFRBABEhsKF0lHTk9SRV9JRl9ERUZBVUxUX1ZBTFVFEAISEQoNSUdOT1JFX0FMV0FZUxADEhQKDElHTk9SRV9FTVBUWRABGgIIARIWCg5JR05PUkVfREVGQVVMVBACGgIIARoCEAEqbgoKS25vd25SZWdleBIbChdLTk9XTl9SRUdFWF9VTlNQRUNJRklFRBAAEiAKHEtOT1dOX1JFR0VYX0hUVFBfSEVBREVSX05BTUUQARIhCh1LTk9XTl9SRUdFWF9IVFRQX0hFQURFUl9WQUxVRRACOlwKB21lc3NhZ2USHy5nb29nbGUucHJvdG9idWYuTWVzc2FnZU9wdGlvbnMYhwkgASgLMiAuYnVmLnZhbGlkYXRlLk1lc3NhZ2VDb25zdHJhaW50c1IHbWVzc2FnZTpUCgVvbmVvZhIdLmdvb2dsZS5wcm90b2J1Zi5PbmVvZk9wdGlvbnMYhwkgASgLMh4uYnVmLnZhbGlkYXRlLk9uZW9mQ29uc3RyYWludHNSBW9uZW9mOlQKBWZpZWxkEh0uZ29vZ2xlLnByb3RvYnVmLkZpZWxkT3B0aW9ucxiHCSABKAsyHi5idWYudmFsaWRhdGUuRmllbGRDb25zdHJhaW50c1IFZmllbGQ6YwoKcHJlZGVmaW5lZBIdLmdvb2dsZS5wcm90b2J1Zi5GaWVsZE9wdGlvbnMYiAkgASgLMiMuYnVmLnZhbGlkYXRlLlByZWRlZmluZWRDb25zdHJhaW50c1IKcHJlZGVmaW5lZEJuChJidWlsZC5idWYudmFsaWRhdGVCDVZhbGlkYXRlUHJvdG9QAVpHYnVmLmJ1aWxkL2dlbi9nby9idWZidWlsZC9wcm90b3ZhbGlkYXRlL3Byb3RvY29sYnVmZmVycy9nby9idWYvdmFsaWRhdGU",[us,Lf,te]),g2=z("CippMThuX3RlbXBsYXRlL3YxL2kxOG5fdGVtcGxhdGVfYWRtaW4ucHJvdG8SEGkxOG5fdGVtcGxhdGUudjEiHQobR2V0VGVtcGxhdGVGaWVsZEluZm9SZXF1ZXN0IlcKHEdldFRlbXBsYXRlRmllbGRJbmZvUmVzcG9uc2USNwoOdGFza190ZW1wbGF0ZXMYASADKAsyHy5pMThuX3RlbXBsYXRlLnYxLlRhc2tUZW1wbGF0ZXMicAoNVGFza1RlbXBsYXRlcxIKCgJpZBgBIAEoCRIMCgRuYW1lGAIgASgJEhMKC2Rlc2NyaXB0aW9uGAMgASgJEjAKC2ZpZWxkX2luZm9zGAQgAygLMhsuaTE4bl90ZW1wbGF0ZS52MS5GaWVsZEluZm8icwoJRmllbGRJbmZvEhAKCGkxOG5fa2V5GAEgASgJEhIKCmkxOG5fdmFsdWUYAiABKAkSDAoEZGVzYxgDIAEoCRIWCg5uZWVkX3RyYW5zbGF0ZRgEIAEoCRIMCgR0eXBlGAUgASgJEgwKBGVudW0YBiABKAkiIgoRTWFya2V0aW5nQ2FyZExpbmsSDQoFdGl0bGUYASABKAkiigMKFk1hcmtldGluZ0NhcmRQb3B1cEZpdmUSDQoFdGl0bGUYASABKAkSEwoLcG9wdXBfdGl0bGUYAiABKAkSFAoMcGFnZV8xX3RpdGxlGAMgASgJEhoKEnBhZ2VfMV9kZXNjcmlwdGlvbhgEIAEoCRIUCgxwYWdlXzJfdGl0bGUYBSABKAkSGgoScGFnZV8yX2Rlc2NyaXB0aW9uGAYgASgJEhQKDHBhZ2VfM190aXRsZRgHIAEoCRIaChJwYWdlXzNfZGVzY3JpcHRpb24YCCABKAkSFAoMcGFnZV80X3RpdGxlGAkgASgJEhoKEnBhZ2VfNF9kZXNjcmlwdGlvbhgKIAEoCRIUCgxwYWdlXzVfdGl0bGUYCyABKAkSGgoScGFnZV81X2Rlc2NyaXB0aW9uGAwgASgJEhIKCmJ0bl8xX3RleHQYDSABKAkSFAoMYnRuXzFfcHJvbXB0GA4gASgJEhIKCmJ0bl8yX3RleHQYDyABKAkSFAoMYnRuXzJfcHJvbXB0GBAgASgJMpEBChhJMThuVGVtcGxhdGVBZG1pblNlcnZpY2USdQoUR2V0VGVtcGxhdGVGaWVsZEluZm8SLS5pMThuX3RlbXBsYXRlLnYxLkdldFRlbXBsYXRlRmllbGRJbmZvUmVxdWVzdBouLmkxOG5fdGVtcGxhdGUudjEuR2V0VGVtcGxhdGVGaWVsZEluZm9SZXNwb25zZULYAQoUY29tLmkxOG5fdGVtcGxhdGUudjFCFkkxOG5UZW1wbGF0ZUFkbWluUHJvdG9QAVpLZ2l0bGFiLm1vbmljYS5jbi92aWRhL3Nkay9iaXpzZXJ2ZXItZ28uZ2l0L2kxOG5fdGVtcGxhdGUvdjE7aTE4bl90ZW1wbGF0ZXYxogIDSVhYqgIPSTE4blRlbXBsYXRlLlYxygIPSTE4blRlbXBsYXRlXFYx4gIbSTE4blRlbXBsYXRlXFYxXEdQQk1ldGFkYXRh6gIQSTE4blRlbXBsYXRlOjpWMWIGcHJvdG8z",[Ye,bs,He,te]),h2=M(g2,0),b2=z("ChJmaWxlL3YxL2ZpbGUucHJvdG8SB2ZpbGUudjEiSgoOU2lnblVybFJlcXVlc3QSEAoIZmlsZW5hbWUYASABKAkSJgoGbW9kdWxlGAIgASgOMhYuZmlsZS52MS5QcmVTaWduTW9kdWxlIl4KD1NpZ25VcmxSZXNwb25zZRIUCgxwcmVfc2lnbl91cmwYASABKAkSEgoKb2JqZWN0X3VybBgCIAEoCRIPCgdjZG5fdXJsGAMgASgJEhAKCGZpbGVuYW1lGAQgASgJIjwKE0JhdGNoU2lnblVybFJlcXVlc3QSJQoEdXJscxgBIAMoCzIXLmZpbGUudjEuU2lnblVybFJlcXVlc3QiRwoUQmF0Y2hTaWduVXJsUmVzcG9uc2USLwoNc2lnbl91cmxfbGlzdBgBIAMoCzIYLmZpbGUudjEuU2lnblVybFJlc3BvbnNlKpYBCg1QcmVTaWduTW9kdWxlEh8KG1BSRV9TSUdOX01PRFVMRV9VTlNQRUNJRklFRBAAEiAKHFBSRV9TSUdOX01PRFVMRV9TRVNTSU9OX0ZJTEUQARIkCiBQUkVfU0lHTl9NT0RVTEVfU0VTU0lPTl9GRUVEQkFDSxACEhwKGFBSRV9TSUdOX01PRFVMRV9NQVJLRE9XThADMpgBCgtGaWxlU2VydmljZRI8CgdTaWduVXJsEhcuZmlsZS52MS5TaWduVXJsUmVxdWVzdBoYLmZpbGUudjEuU2lnblVybFJlc3BvbnNlEksKDEJhdGNoU2lnblVybBIcLmZpbGUudjEuQmF0Y2hTaWduVXJsUmVxdWVzdBodLmZpbGUudjEuQmF0Y2hTaWduVXJsUmVzcG9uc2VCkAEKC2NvbS5maWxlLnYxQglGaWxlUHJvdG9QAVo5Z2l0bGFiLm1vbmljYS5jbi92aWRhL3Nkay9iaXpzZXJ2ZXItZ28uZ2l0L2ZpbGUvdjE7ZmlsZXYxogIDRlhYqgIHRmlsZS5WMcoCB0ZpbGVcVjHiAhNGaWxlXFYxXEdQQk1ldGFkYXRh6gIIRmlsZTo6VjFiBnByb3RvMw"),V2=M(b2,0),m2=z("ChhmaWxlL3YxL2FkbWluX2ZpbGUucHJvdG8SB2ZpbGUudjEiVAoTQWRtaW5TaWduVXJsUmVxdWVzdBIQCghmaWxlbmFtZRgBIAEoCRIrCgZtb2R1bGUYAiABKA4yGy5maWxlLnYxLkFkbWluUHJlU2lnbk1vZHVsZSJjChRBZG1pblNpZ25VcmxSZXNwb25zZRIUCgxwcmVfc2lnbl91cmwYASABKAkSEgoKb2JqZWN0X3VybBgCIAEoCRIPCgdjZG5fdXJsGAMgASgJEhAKCGZpbGVuYW1lGAQgASgJIkYKGEFkbWluQmF0Y2hTaWduVXJsUmVxdWVzdBIqCgR1cmxzGAEgAygLMhwuZmlsZS52MS5BZG1pblNpZ25VcmxSZXF1ZXN0IlEKGUFkbWluQmF0Y2hTaWduVXJsUmVzcG9uc2USNAoNc2lnbl91cmxfbGlzdBgBIAMoCzIdLmZpbGUudjEuQWRtaW5TaWduVXJsUmVzcG9uc2UqmAEKEkFkbWluUHJlU2lnbk1vZHVsZRIlCiFBRE1JTl9QUkVfU0lHTl9NT0RVTEVfVU5TUEVDSUZJRUQQABIuCipBRE1JTl9QUkVfU0lHTl9NT0RVTEVfQVBQX0hPTUVfUkVDT01NRU5ERUQQARIrCidBRE1JTl9QUkVfU0lHTl9NT0RVTEVfTk9USUZJQ0FUSU9OX0ZJTEUQAjK7AQoQQWRtaW5GaWxlU2VydmljZRJLCgxBZG1pblNpZ25VcmwSHC5maWxlLnYxLkFkbWluU2lnblVybFJlcXVlc3QaHS5maWxlLnYxLkFkbWluU2lnblVybFJlc3BvbnNlEloKEUFkbWluQmF0Y2hTaWduVXJsEiEuZmlsZS52MS5BZG1pbkJhdGNoU2lnblVybFJlcXVlc3QaIi5maWxlLnYxLkFkbWluQmF0Y2hTaWduVXJsUmVzcG9uc2VClQEKC2NvbS5maWxlLnYxQg5BZG1pbkZpbGVQcm90b1ABWjlnaXRsYWIubW9uaWNhLmNuL3ZpZGEvc2RrL2JpenNlcnZlci1nby5naXQvZmlsZS92MTtmaWxldjGiAgNGWFiqAgdGaWxlLlYxygIHRmlsZVxWMeICE0ZpbGVcVjFcR1BCTWV0YWRhdGHqAghGaWxlOjpWMWIGcHJvdG8z"),f2=M(m2,0),A2=z("Chpub3RpZmllci92MS9ub3RpZmllci5wcm90bxILbm90aWZpZXIudjEiKwoNTG9nb3V0UmVxdWVzdBIaCglkZXZpY2VfaWQYASABKAlCB7pIBHICEAEiEAoOTG9nb3V0UmVzcG9uc2UijAIKFVJlZ2lzdGVyRGV2aWNlUmVxdWVzdBIYCgd1c2VyX2lkGAEgASgJQge6SARyAhABEhoKCWRldmljZV9pZBgCIAEoCUIHukgEcgIQARIxCgtkZXZpY2VfdHlwZRgDIAEoCUIcukgZchdSB0JST1dTRVJSB0FORFJPSURSA0lPUxIYCgdvc190eXBlGAQgASgJQge6SARyAhABEhwKC2NsaWVudF90eXBlGAUgASgJQge6SARyAhABEh8KDmNsaWVudF92ZXJzaW9uGAYgASgJQge6SARyAhABEh4KDWNsaWVudF9sb2NhbGUYByABKAlCB7pIBHICEAESEQoJZmNtX3Rva2VuGAggASgJIhgKFlJlZ2lzdGVyRGV2aWNlUmVzcG9uc2UiNQoXRGVyZWdpc3RlckRldmljZVJlcXVlc3QSGgoJZGV2aWNlX2lkGAEgASgJQge6SARyAhABIhoKGERlcmVnaXN0ZXJEZXZpY2VSZXNwb25zZTKWAgoPTm90aWZpZXJTZXJ2aWNlElsKDlJlZ2lzdGVyRGV2aWNlEiIubm90aWZpZXIudjEuUmVnaXN0ZXJEZXZpY2VSZXF1ZXN0GiMubm90aWZpZXIudjEuUmVnaXN0ZXJEZXZpY2VSZXNwb25zZSIAEmEKEERlcmVnaXN0ZXJEZXZpY2USJC5ub3RpZmllci52MS5EZXJlZ2lzdGVyRGV2aWNlUmVxdWVzdBolLm5vdGlmaWVyLnYxLkRlcmVnaXN0ZXJEZXZpY2VSZXNwb25zZSIAEkMKBkxvZ291dBIaLm5vdGlmaWVyLnYxLkxvZ291dFJlcXVlc3QaGy5ub3RpZmllci52MS5Mb2dvdXRSZXNwb25zZSIAQrABCg9jb20ubm90aWZpZXIudjFCDU5vdGlmaWVyUHJvdG9QAVpBZ2l0bGFiLm1vbmljYS5jbi92aWRhL3Nkay9iaXpzZXJ2ZXItZ28uZ2l0L25vdGlmaWVyL3YxO25vdGlmaWVydjGiAgNOWFiqAgtOb3RpZmllci5WMcoCC05vdGlmaWVyXFYx4gIXTm90aWZpZXJcVjFcR1BCTWV0YWRhdGHqAgxOb3RpZmllcjo6VjFiBnByb3RvMw",[Ye]),p2=M(A2,0),ks=z("Ch5ub3RpZmllci92MS9ub3RpZmljYXRpb24ucHJvdG8SC25vdGlmaWVyLnYxIuUBChBOb3RpZmljYXRpb25JdGVtEgsKA3VpZBgBIAEoCRI5CgZkZXRhaWwYAyADKAsyKS5ub3RpZmllci52MS5Ob3RpZmljYXRpb25JdGVtLkRldGFpbEVudHJ5EisKBHR5cGUYBCABKA4yHS5ub3RpZmllci52MS5Ob3RpZmljYXRpb25UeXBlEi0KCWNyZWF0ZV9hdBgHIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAaLQoLRGV0YWlsRW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4ASJeChpHZXROb3RpZmljYXRpb25MaXN0UmVxdWVzdBIXCgpsYXRlc3RfdWlkGAEgASgJSACIAQESGAoFbGltaXQYAiABKAVCCbpIBhoEGAooAUINCgtfbGF0ZXN0X3VpZCJ8ChtHZXROb3RpZmljYXRpb25MaXN0UmVzcG9uc2USDwoHc3VjY2VzcxgBIAEoCBIrCgRkYXRhGAIgAygLMh0ubm90aWZpZXIudjEuTm90aWZpY2F0aW9uSXRlbRINCgV0b3RhbBgDIAEoAxIQCghoYXNfbmV4dBgEIAEoCCLxAQoWTm90aWZpY2F0aW9uSXRlbURldGFpbBINCgV0aXRsZRgBIAEoCRIPCgdjb250ZW50GAIgASgJEicKBmJ1dHRvbhgDIAEoCzIXLm5vdGlmaWVyLnYxLkJ1dHRvbkluZm8SJQoFbWVkaWEYBCABKAsyFi5ub3RpZmllci52MS5NZWRpYUluZm8SMQoMbW9iaWxlX21lZGlhGAUgASgLMhYubm90aWZpZXIudjEuTWVkaWFJbmZvSACIAQESIwoEZGF0YRgGIAMoCzIVLm5vdGlmaWVyLnYxLlBhZ2VEYXRhQg8KDV9tb2JpbGVfbWVkaWEiJgoIUGFnZURhdGESCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJIj8KCkJ1dHRvbkluZm8SEwoLYnV0dG9uX3RleHQYASABKAkSDAoEdHlwZRgCIAEoCRIOCgZ0YXJnZXQYAyABKAkiTAoJTWVkaWFJbmZvEgwKBHR5cGUYASABKAkSCwoDdXJsGAIgASgJEhYKCWNvdmVyX3VybBgDIAEoCUgAiAEBQgwKCl9jb3Zlcl91cmwisgEKEk5vdGlmaWNhdGlvbkl0ZW1WMhILCgN1aWQYASABKAkSMwoGZGV0YWlsGAMgASgLMiMubm90aWZpZXIudjEuTm90aWZpY2F0aW9uSXRlbURldGFpbBIrCgR0eXBlGAQgASgOMh0ubm90aWZpZXIudjEuTm90aWZpY2F0aW9uVHlwZRItCgljcmVhdGVfYXQYByABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wIoABCh1HZXROb3RpZmljYXRpb25MaXN0UmVzcG9uc2VWMhIPCgdzdWNjZXNzGAEgASgIEi0KBGRhdGEYAiADKAsyHy5ub3RpZmllci52MS5Ob3RpZmljYXRpb25JdGVtVjISDQoFdG90YWwYAyABKAMSEAoIaGFzX25leHQYBCABKAgqgQEKEk5vdGlmaWNhdGlvblN0YXR1cxIjCh9OT1RJRklDQVRJT05fU1RBVFVTX1VOU1BFQ0lGSUVEEAASIQodTk9USUZJQ0FUSU9OX1NUQVRVU19QVUJMSVNIRUQQARIjCh9OT1RJRklDQVRJT05fU1RBVFVTX1VOUFVCTElTSEVEEAIqkgEKEE5vdGlmaWNhdGlvblR5cGUSIQodTk9USUZJQ0FUSU9OX1RZUEVfVU5TUEVDSUZJRUQQABIcChhOT1RJRklDQVRJT05fVFlQRV9TWVNURU0QARIaChZOT1RJRklDQVRJT05fVFlQRV9VU0VSEAISIQodTk9USUZJQ0FUSU9OX1RZUEVfTkVXX1ZFUlNJT04QAzLtAQoTTm90aWZpY2F0aW9uU2VydmljZRJoChNHZXROb3RpZmljYXRpb25MaXN0Eicubm90aWZpZXIudjEuR2V0Tm90aWZpY2F0aW9uTGlzdFJlcXVlc3QaKC5ub3RpZmllci52MS5HZXROb3RpZmljYXRpb25MaXN0UmVzcG9uc2USbAoVR2V0Tm90aWZpY2F0aW9uTGlzdFYyEicubm90aWZpZXIudjEuR2V0Tm90aWZpY2F0aW9uTGlzdFJlcXVlc3QaKi5ub3RpZmllci52MS5HZXROb3RpZmljYXRpb25MaXN0UmVzcG9uc2VWMkK0AQoPY29tLm5vdGlmaWVyLnYxQhFOb3RpZmljYXRpb25Qcm90b1ABWkFnaXRsYWIubW9uaWNhLmNuL3ZpZGEvc2RrL2JpenNlcnZlci1nby5naXQvbm90aWZpZXIvdjE7bm90aWZpZXJ2MaICA05YWKoCC05vdGlmaWVyLlYxygILTm90aWZpZXJcVjHiAhdOb3RpZmllclxWMVxHUEJNZXRhZGF0YeoCDE5vdGlmaWVyOjpWMWIGcHJvdG8z",[Ye,te]),Z2=M(ks,0),G2=z("CiRub3RpZmllci92MS9ub3RpZmljYXRpb25fYWRtaW4ucHJvdG8SC25vdGlmaWVyLnYxItwBCiBBZGROZXdWZXJzaW9uTm90aWZpY2F0aW9uUmVxdWVzdBINCgV0aXRsZRgBIAEoCRITCgt0ZW1wbGF0ZV9pZBgDIAEoCRJcChBwbGFjZWhvbGRlcl9kYXRhGAQgAygLMkIubm90aWZpZXIudjEuQWRkTmV3VmVyc2lvbk5vdGlmaWNhdGlvblJlcXVlc3QuUGxhY2Vob2xkZXJEYXRhRW50cnkaNgoUUGxhY2Vob2xkZXJEYXRhRW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4ASI0CiFBZGROZXdWZXJzaW9uTm90aWZpY2F0aW9uUmVzcG9uc2USDwoHc3VjY2VzcxgBIAEoCCKaAQofVXBkYXRlU3lzdGVtTm90aWZpY2F0aW9uUmVxdWVzdBIYChBub3RpZmljYXRpb25fdWlkGAEgASgJEjQKBnN0YXR1cxgCIAEoDjIfLm5vdGlmaWVyLnYxLk5vdGlmaWNhdGlvblN0YXR1c0gAiAEBEhIKBXRpdGxlGAMgASgJSAGIAQFCCQoHX3N0YXR1c0IICgZfdGl0bGUiMwogVXBkYXRlU3lzdGVtTm90aWZpY2F0aW9uUmVzcG9uc2USDwoHc3VjY2VzcxgBIAEoCCL3AQoVQWRtaW5Ob3RpZmljYXRpb25JdGVtEgsKA3VpZBgBIAEoCRINCgV0aXRsZRgCIAEoCRIMCgRkZXNjGAMgASgJEicKBmRldGFpbBgEIAEoCzIXLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3QSKwoEdHlwZRgFIAEoDjIdLm5vdGlmaWVyLnYxLk5vdGlmaWNhdGlvblR5cGUSLwoGc3RhdHVzGAYgASgOMh8ubm90aWZpZXIudjEuTm90aWZpY2F0aW9uU3RhdHVzEi0KCWNyZWF0ZV9hdBgHIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAi7gIKG1BhZ2VOb3RpZmljYXRpb25MaXN0UmVxdWVzdBIVCgRwYWdlGAEgASgFQge6SAQaAigBEhwKCXBhZ2Vfc2l6ZRgCIAEoBUIJukgGGgQYZCgBEj0KEW5vdGlmaWNhdGlvbl90eXBlGAMgASgOMh0ubm90aWZpZXIudjEuTm90aWZpY2F0aW9uVHlwZUgAiAEBEkEKE25vdGlmaWNhdGlvbl9zdGF0dXMYBCABKA4yHy5ub3RpZmllci52MS5Ob3RpZmljYXRpb25TdGF0dXNIAYgBARIdChBub3RpZmljYXRpb25fdWlkGAUgASgJSAKIAQESHwoSbm90aWZpY2F0aW9uX3RpdGxlGAYgASgJSAOIAQFCFAoSX25vdGlmaWNhdGlvbl90eXBlQhYKFF9ub3RpZmljYXRpb25fc3RhdHVzQhMKEV9ub3RpZmljYXRpb25fdWlkQhUKE19ub3RpZmljYXRpb25fdGl0bGUicAocUGFnZU5vdGlmaWNhdGlvbkxpc3RSZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIEjAKBGRhdGEYAiADKAsyIi5ub3RpZmllci52MS5BZG1pbk5vdGlmaWNhdGlvbkl0ZW0SDQoFdG90YWwYAyABKAMi1AEKHEFkZFN5c3RlbU5vdGlmaWNhdGlvblJlcXVlc3QSDQoFdGl0bGUYASABKAkSEwoLdGVtcGxhdGVfaWQYAyABKAkSWAoQcGxhY2Vob2xkZXJfZGF0YRgEIAMoCzI+Lm5vdGlmaWVyLnYxLkFkZFN5c3RlbU5vdGlmaWNhdGlvblJlcXVlc3QuUGxhY2Vob2xkZXJEYXRhRW50cnkaNgoUUGxhY2Vob2xkZXJEYXRhRW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4ASIwCh1BZGRTeXN0ZW1Ob3RpZmljYXRpb25SZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIIikKEkdldFRlbXBsYXRlUmVxdWVzdBITCgt0ZW1wbGF0ZV9pZBgBIAEoCSKJAQoTR2V0VGVtcGxhdGVSZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIEioKCWkxOG5fZGF0YRgCIAEoCzIXLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3QSNQoIdGVtcGxhdGUYBSABKAsyIy5ub3RpZmllci52MS5Ob3RpZmljYXRpb25JdGVtRGV0YWlsItkBChJBZGRUZW1wbGF0ZVJlcXVlc3QSDAoEbmFtZRgBIAEoCRITCgtkZXNjcmlwdGlvbhgCIAEoCRIqCglpMThuX2RhdGEYAyABKAsyFy5nb29nbGUucHJvdG9idWYuU3RydWN0EgsKA3VpZBgEIAEoCRI1Cgh0ZW1wbGF0ZRgFIAEoCzIjLm5vdGlmaWVyLnYxLk5vdGlmaWNhdGlvbkl0ZW1EZXRhaWwSMAoNdGVtcGxhdGVfdHlwZRgGIAEoDjIZLm5vdGlmaWVyLnYxLlRlbXBsYXRlVHlwZSKzAQoeQWRkTm90aWZpY2F0aW9uVGVtcGxhdGVSZXF1ZXN0EgwKBG5hbWUYASABKAkSEwoLZGVzY3JpcHRpb24YAiABKAkSKgoJaTE4bl9kYXRhGAMgASgLMhcuZ29vZ2xlLnByb3RvYnVmLlN0cnVjdBILCgN1aWQYBCABKAkSNQoIdGVtcGxhdGUYBSABKAsyIy5ub3RpZmllci52MS5Ob3RpZmljYXRpb25JdGVtRGV0YWlsIjsKE0FkZFRlbXBsYXRlUmVzcG9uc2USDwoHc3VjY2VzcxgBIAEoCBITCgt0ZW1wbGF0ZV9pZBgCIAEoCSKhAQoMVGVtcGxhdGVJdGVtEgsKA3VpZBgBIAEoCRIMCgRuYW1lGAIgASgJEhMKC2Rlc2NyaXB0aW9uGAMgASgJEioKCWkxOG5fZGF0YRgEIAEoCzIXLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3QSNQoIdGVtcGxhdGUYBSABKAsyIy5ub3RpZmllci52MS5Ob3RpZmljYXRpb25JdGVtRGV0YWlsIpsBChZHZXRUZW1wbGF0ZUxpc3RSZXF1ZXN0EhUKBHBhZ2UYASABKAVCB7pIBBoCKAESHAoJcGFnZV9zaXplGAIgASgFQgm6SAYaBBhkKAESEQoEbmFtZRgDIAEoCUgAiAEBEjAKDXRlbXBsYXRlX3R5cGUYBCABKA4yGS5ub3RpZmllci52MS5UZW1wbGF0ZVR5cGVCBwoFX25hbWUiYgoXR2V0VGVtcGxhdGVMaXN0UmVzcG9uc2USDwoHc3VjY2VzcxgBIAEoCBInCgRkYXRhGAIgAygLMhkubm90aWZpZXIudjEuVGVtcGxhdGVJdGVtEg0KBXRvdGFsGAMgASgDIu0SChBUZW1wbGF0ZUkxOG5EYXRhEjEKAmFyGAEgAygLMiUubm90aWZpZXIudjEuVGVtcGxhdGVJMThuRGF0YS5BckVudHJ5EjEKAmNzGAIgAygLMiUubm90aWZpZXIudjEuVGVtcGxhdGVJMThuRGF0YS5Dc0VudHJ5EjEKAmRlGAMgAygLMiUubm90aWZpZXIudjEuVGVtcGxhdGVJMThuRGF0YS5EZUVudHJ5EjEKAmVuGAQgAygLMiUubm90aWZpZXIudjEuVGVtcGxhdGVJMThuRGF0YS5FbkVudHJ5EjEKAmVzGAUgAygLMiUubm90aWZpZXIudjEuVGVtcGxhdGVJMThuRGF0YS5Fc0VudHJ5EjgKBmVzXzQxORgGIAMoCzIoLm5vdGlmaWVyLnYxLlRlbXBsYXRlSTE4bkRhdGEuRXM0MTlFbnRyeRIxCgJmYRgHIAMoCzIlLm5vdGlmaWVyLnYxLlRlbXBsYXRlSTE4bkRhdGEuRmFFbnRyeRIxCgJmchgIIAMoCzIlLm5vdGlmaWVyLnYxLlRlbXBsYXRlSTE4bkRhdGEuRnJFbnRyeRIxCgJoaRgJIAMoCzIlLm5vdGlmaWVyLnYxLlRlbXBsYXRlSTE4bkRhdGEuSGlFbnRyeRIxCgJpZBgKIAMoCzIlLm5vdGlmaWVyLnYxLlRlbXBsYXRlSTE4bkRhdGEuSWRFbnRyeRIxCgJpdBgLIAMoCzIlLm5vdGlmaWVyLnYxLlRlbXBsYXRlSTE4bkRhdGEuSXRFbnRyeRIxCgJqYRgMIAMoCzIlLm5vdGlmaWVyLnYxLlRlbXBsYXRlSTE4bkRhdGEuSmFFbnRyeRIxCgJrbxgNIAMoCzIlLm5vdGlmaWVyLnYxLlRlbXBsYXRlSTE4bkRhdGEuS29FbnRyeRIxCgJubBgOIAMoCzIlLm5vdGlmaWVyLnYxLlRlbXBsYXRlSTE4bkRhdGEuTmxFbnRyeRIxCgJwbBgPIAMoCzIlLm5vdGlmaWVyLnYxLlRlbXBsYXRlSTE4bkRhdGEuUGxFbnRyeRI2CgVwdF9CUhgQIAMoCzInLm5vdGlmaWVyLnYxLlRlbXBsYXRlSTE4bkRhdGEuUHRCUkVudHJ5EjYKBXB0X1BUGBEgAygLMicubm90aWZpZXIudjEuVGVtcGxhdGVJMThuRGF0YS5QdFBURW50cnkSMQoCcnUYEiADKAsyJS5ub3RpZmllci52MS5UZW1wbGF0ZUkxOG5EYXRhLlJ1RW50cnkSMQoCdGgYEyADKAsyJS5ub3RpZmllci52MS5UZW1wbGF0ZUkxOG5EYXRhLlRoRW50cnkSMQoCdHIYFCADKAsyJS5ub3RpZmllci52MS5UZW1wbGF0ZUkxOG5EYXRhLlRyRW50cnkSMQoCdWsYFSADKAsyJS5ub3RpZmllci52MS5UZW1wbGF0ZUkxOG5EYXRhLlVrRW50cnkSMQoCdmkYFiADKAsyJS5ub3RpZmllci52MS5UZW1wbGF0ZUkxOG5EYXRhLlZpRW50cnkSNgoFemhfQ04YFyADKAsyJy5ub3RpZmllci52MS5UZW1wbGF0ZUkxOG5EYXRhLlpoQ05FbnRyeRI2CgV6aF9ISxgYIAMoCzInLm5vdGlmaWVyLnYxLlRlbXBsYXRlSTE4bkRhdGEuWmhIS0VudHJ5EjYKBXpoX1RXGBkgAygLMicubm90aWZpZXIudjEuVGVtcGxhdGVJMThuRGF0YS5aaFRXRW50cnkaKQoHQXJFbnRyeRILCgNrZXkYASABKAkSDQoFdmFsdWUYAiABKAk6AjgBGikKB0NzRW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4ARopCgdEZUVudHJ5EgsKA2tleRgBIAEoCRINCgV2YWx1ZRgCIAEoCToCOAEaKQoHRW5FbnRyeRILCgNrZXkYASABKAkSDQoFdmFsdWUYAiABKAk6AjgBGikKB0VzRW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4ARosCgpFczQxOUVudHJ5EgsKA2tleRgBIAEoCRINCgV2YWx1ZRgCIAEoCToCOAEaKQoHRmFFbnRyeRILCgNrZXkYASABKAkSDQoFdmFsdWUYAiABKAk6AjgBGikKB0ZyRW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4ARopCgdIaUVudHJ5EgsKA2tleRgBIAEoCRINCgV2YWx1ZRgCIAEoCToCOAEaKQoHSWRFbnRyeRILCgNrZXkYASABKAkSDQoFdmFsdWUYAiABKAk6AjgBGikKB0l0RW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4ARopCgdKYUVudHJ5EgsKA2tleRgBIAEoCRINCgV2YWx1ZRgCIAEoCToCOAEaKQoHS29FbnRyeRILCgNrZXkYASABKAkSDQoFdmFsdWUYAiABKAk6AjgBGikKB05sRW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4ARopCgdQbEVudHJ5EgsKA2tleRgBIAEoCRINCgV2YWx1ZRgCIAEoCToCOAEaKwoJUHRCUkVudHJ5EgsKA2tleRgBIAEoCRINCgV2YWx1ZRgCIAEoCToCOAEaKwoJUHRQVEVudHJ5EgsKA2tleRgBIAEoCRINCgV2YWx1ZRgCIAEoCToCOAEaKQoHUnVFbnRyeRILCgNrZXkYASABKAkSDQoFdmFsdWUYAiABKAk6AjgBGikKB1RoRW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4ARopCgdUckVudHJ5EgsKA2tleRgBIAEoCRINCgV2YWx1ZRgCIAEoCToCOAEaKQoHVWtFbnRyeRILCgNrZXkYASABKAkSDQoFdmFsdWUYAiABKAk6AjgBGikKB1ZpRW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4ARorCglaaENORW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4ARorCglaaEhLRW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4ARorCglaaFRXRW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4ASJECiREZWxldGVOb3RpZmljYXRpb25BbmRUZW1wbGF0ZVJlcXVlc3QSHAoLdGVtcGxhdGVfaWQYASABKAlCB7pIBHICEAEiOAolRGVsZXRlTm90aWZpY2F0aW9uQW5kVGVtcGxhdGVSZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIKlsKDFRlbXBsYXRlVHlwZRIZChVURU1QTEFURV9UWVBFX1VOS05PV04QABIYChRURU1QTEFURV9UWVBFX1NZU1RFTRABEhYKElRFTVBMQVRFX1RZUEVfVVNFUhACMvYGChhOb3RpZmljYXRpb25BZG1pblNlcnZpY2USbgoVQWRkU3lzdGVtTm90aWZpY2F0aW9uEikubm90aWZpZXIudjEuQWRkU3lzdGVtTm90aWZpY2F0aW9uUmVxdWVzdBoqLm5vdGlmaWVyLnYxLkFkZFN5c3RlbU5vdGlmaWNhdGlvblJlc3BvbnNlEmoKE0dldE5vdGlmaWNhdGlvbkxpc3QSKC5ub3RpZmllci52MS5QYWdlTm90aWZpY2F0aW9uTGlzdFJlcXVlc3QaKS5ub3RpZmllci52MS5QYWdlTm90aWZpY2F0aW9uTGlzdFJlc3BvbnNlEncKGFVwZGF0ZVN5c3RlbU5vdGlmaWNhdGlvbhIsLm5vdGlmaWVyLnYxLlVwZGF0ZVN5c3RlbU5vdGlmaWNhdGlvblJlcXVlc3QaLS5ub3RpZmllci52MS5VcGRhdGVTeXN0ZW1Ob3RpZmljYXRpb25SZXNwb25zZRJ6ChlBZGROZXdWZXJzaW9uTm90aWZpY2F0aW9uEi0ubm90aWZpZXIudjEuQWRkTmV3VmVyc2lvbk5vdGlmaWNhdGlvblJlcXVlc3QaLi5ub3RpZmllci52MS5BZGROZXdWZXJzaW9uTm90aWZpY2F0aW9uUmVzcG9uc2USUAoLQWRkVGVtcGxhdGUSHy5ub3RpZmllci52MS5BZGRUZW1wbGF0ZVJlcXVlc3QaIC5ub3RpZmllci52MS5BZGRUZW1wbGF0ZVJlc3BvbnNlElwKD0dldFRlbXBsYXRlTGlzdBIjLm5vdGlmaWVyLnYxLkdldFRlbXBsYXRlTGlzdFJlcXVlc3QaJC5ub3RpZmllci52MS5HZXRUZW1wbGF0ZUxpc3RSZXNwb25zZRJQCgtHZXRUZW1wbGF0ZRIfLm5vdGlmaWVyLnYxLkdldFRlbXBsYXRlUmVxdWVzdBogLm5vdGlmaWVyLnYxLkdldFRlbXBsYXRlUmVzcG9uc2UShgEKHURlbGV0ZU5vdGlmaWNhdGlvbkFuZFRlbXBsYXRlEjEubm90aWZpZXIudjEuRGVsZXRlTm90aWZpY2F0aW9uQW5kVGVtcGxhdGVSZXF1ZXN0GjIubm90aWZpZXIudjEuRGVsZXRlTm90aWZpY2F0aW9uQW5kVGVtcGxhdGVSZXNwb25zZUK5AQoPY29tLm5vdGlmaWVyLnYxQhZOb3RpZmljYXRpb25BZG1pblByb3RvUAFaQWdpdGxhYi5tb25pY2EuY24vdmlkYS9zZGsvYml6c2VydmVyLWdvLmdpdC9ub3RpZmllci92MTtub3RpZmllcnYxogIDTlhYqgILTm90aWZpZXIuVjHKAgtOb3RpZmllclxWMeICF05vdGlmaWVyXFYxXEdQQk1ldGFkYXRh6gIMTm90aWZpZXI6OlYxYgZwcm90bzM",[Ye,te,He,ks]),X2=M(G2,0),I2=z("ChZjb25maWcvdjEvY29uZmlnLnByb3RvEgljb25maWcudjEidAoJRTJCQ29uZmlnEhIKCmNsdXN0ZXJfaWQYASABKAkSEwoLZTJiX2FwaV9rZXkYAiABKAkSEgoKZTJiX2RvbWFpbhgDIAEoCRIOCgZ3ZWlnaHQYBSABKA0SGgoSbm9ybWFsX3VzZXJfd2VpZ2h0GAYgASgNIisKFUdldEJ5Q2x1c3RlcklEUmVxdWVzdBISCgpjbHVzdGVyX2lkGAEgASgJImoKFkdldEJ5Q2x1c3RlcklEUmVzcG9uc2USKAoKZTJiX2NvbmZpZxgBIAEoCzIULmNvbmZpZy52MS5FMkJDb25maWcSDwoHc3VjY2VzcxgCIAEoCBIVCg1lcnJvcl9tZXNzYWdlGAMgASgJIiwKE0dldEF2YWlsYWJsZVJlcXVlc3QSFQoNaXNfbWVtYmVyc2hpcBgBIAEoCCJoChRHZXRBdmFpbGFibGVSZXNwb25zZRIoCgplMmJfY29uZmlnGAEgASgLMhQuY29uZmlnLnYxLkUyQkNvbmZpZxIPCgdzdWNjZXNzGAIgASgIEhUKDWVycm9yX21lc3NhZ2UYAyABKAkiEAoOTGlzdEFsbFJlcXVlc3QiZAoPTGlzdEFsbFJlc3BvbnNlEikKC2UyYl9jb25maWdzGAEgAygLMhQuY29uZmlnLnYxLkUyQkNvbmZpZxIPCgdzdWNjZXNzGAIgASgIEhUKDWVycm9yX21lc3NhZ2UYAyABKAky/AEKEEUyQkNvbmZpZ1NlcnZpY2USVQoOR2V0QnlDbHVzdGVySUQSIC5jb25maWcudjEuR2V0QnlDbHVzdGVySURSZXF1ZXN0GiEuY29uZmlnLnYxLkdldEJ5Q2x1c3RlcklEUmVzcG9uc2USTwoMR2V0QXZhaWxhYmxlEh4uY29uZmlnLnYxLkdldEF2YWlsYWJsZVJlcXVlc3QaHy5jb25maWcudjEuR2V0QXZhaWxhYmxlUmVzcG9uc2USQAoHTGlzdEFsbBIZLmNvbmZpZy52MS5MaXN0QWxsUmVxdWVzdBoaLmNvbmZpZy52MS5MaXN0QWxsUmVzcG9uc2VCoAEKDWNvbS5jb25maWcudjFCC0NvbmZpZ1Byb3RvUAFaPWdpdGxhYi5tb25pY2EuY24vdmlkYS9zZGsvYml6c2VydmVyLWdvLmdpdC9jb25maWcvdjE7Y29uZmlndjGiAgNDWFiqAglDb25maWcuVjHKAglDb25maWdcVjHiAhVDb25maWdcVjFcR1BCTWV0YWRhdGHqAgpDb25maWc6OlYxYgZwcm90bzM"),R2=M(I2,0),zs=z("Ch9hY3Rpdml0eS92MS9hY3Rpdml0eV9iYXNlLnByb3RvEgthY3Rpdml0eS52MSKsAQoNVXNlckNvdW50SW5mbxINCgV0b3RhbBgBIAEoAxJBCgxkb21haW5fY291bnQYAiADKAsyKy5hY3Rpdml0eS52MS5Vc2VyQ291bnRJbmZvLkRvbWFpbkNvdW50RW50cnkSFQoNYmxvY2tlZF9jb3VudBgDIAEoAxoyChBEb21haW5Db3VudEVudHJ5EgsKA2tleRgBIAEoCRINCgV2YWx1ZRgCIAEoAzoCOAEixwQKFEFjdGl2aXR5T3JnYW5pemF0aW9uEgoKAmlkGAEgASgDEgsKA3VpZBgCIAEoCRIMCgRuYW1lGAMgASgJEg4KBmF2YXRhchgEIAEoCRINCgV0aXRsZRgFIAEoCRITCgtkZXNjcmlwdGlvbhgGIAEoCRIvCghvcmdfdHlwZRgHIAEoDjIdLmFjdGl2aXR5LnYxLk9yZ2FuaXphdGlvblR5cGUSIwoGc3RhdHVzGAggASgOMhMuYWN0aXZpdHkudjEuU3RhdHVzEh4KFnJlY29tbWVuZF91c2VjYXNlX2xpc3QYCSADKAkSGQoRZW1haWxfZG9tYWluX2xpc3QYCiADKAkSDgoGbG9jYWxlGAsgASgJEhIKCmV4dHJhX2RhdGEYDSABKAkSEwoLdW5pcXVlX25hbWUYDiABKAkSLgoKY3JlYXRlZF9hdBgPIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASLgoKdXBkYXRlZF9hdBgQIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASLgoKZGVsZXRlZF9hdBgRIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASEgoKdXNlcl90b3RhbBgSIAEoAxIZChFyZWNvbW1lbmRfY3JlZGl0cxgTIAEoBRIYChByZWdpc3Rlcl9jcmVkaXRzGBQgASgFEg8KB2NvdW50cnkYFSABKAkSDAoEY2l0eRgWIAEoCRISCgphbGlhc19saXN0GBcgAygJItgBChNBY3Rpdml0eUVtYWlsRG9tYWluEgoKAmlkGAEgASgDEg8KB29yZ191aWQYAiABKAkSFAoMZW1haWxfZG9tYWluGAMgASgJEi4KCmNyZWF0ZWRfYXQYBCABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEi4KCnVwZGF0ZWRfYXQYBSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEi4KCmRlbGV0ZWRfYXQYBiABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wIv4BCgxBY3Rpdml0eVVzZXISCgoCaWQYASABKAMSDwoHb3JnX3VpZBgCIAEoCRIPCgd1c2VyX2lkGAMgASgJEjAKDWFjdGl2aXR5X3R5cGUYBCABKA4yGS5hY3Rpdml0eS52MS5BY3Rpdml0eVR5cGUSLgoKY3JlYXRlZF9hdBgFIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASLgoKdXBkYXRlZF9hdBgGIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASLgoKZGVsZXRlZF9hdBgHIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAigwQKEEFjdGl2aXR5VXNlckluZm8SDwoHdXNlcl9pZBgBIAEoCRINCgVlbWFpbBgCIAEoCRIRCglmaXJzdG5hbWUYAyABKAkSEAoIbGFzdG5hbWUYBCABKAkSEwoLZGlzcGxheW5hbWUYBSABKAkSEAoIbmlja25hbWUYBiABKAkSDgoGYXZhdGFyGAcgASgJEhAKCGlzX2FscGhhGAggASgIEhMKC2luX3dhaXRsaXN0GAkgASgIEhMKC3ZpcF92ZXJzaW9uGAogASgJEhQKDHZpcF9pbnRlcnZhbBgLIAEoCRIaChJjdXJyZW50X3BlcmlvZF9lbmQYDCABKAMSHAoUY2FuY2VsX2F0X3BlcmlvZF9lbmQYDSABKAgSDwoHaXNfYmV0YRgOIAEoCBIYChBwYXltZW50X3BsYXRmb3JtGA8gASgJEgsKA3VpZBgQIAEoCRIbChNjb25jdXJyZW50X3Nlc3Npb25zGBEgASgFEhUKDXBsYXRmb3JtX2xpc3QYEiADKAkSGgoSbWVtYmVyc2hpcF92ZXJzaW9uGB4gASgJEhsKE21lbWJlcnNoaXBfaW50ZXJ2YWwYHyABKAkSEgoKaXNfYmxvY2tlZBggIAEoCBIuCgpjcmVhdGVkX2F0GCMgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCKXAQobTGlzdE9yZ2FuaXphdGlvblVzZXJSZXF1ZXN0EgwKBHBhZ2UYASABKAUSEQoJcGFnZV9zaXplGAIgASgFEhQKB29yZ191aWQYAyABKAlIAIgBARIRCgR1c2VyGAQgASgJSAGIAQESGQoRZW1haWxfZG9tYWluX2xpc3QYBSADKAlCCgoIX29yZ191aWRCBwoFX3VzZXIiWgocTGlzdE9yZ2FuaXphdGlvblVzZXJSZXNwb25zZRINCgV0b3RhbBgBIAEoBRIrCgRsaXN0GAIgAygLMh0uYWN0aXZpdHkudjEuQWN0aXZpdHlVc2VySW5mbyKgAwofTGlzdEFjdGl2aXR5T3JnYW5pemF0aW9uUmVxdWVzdBIMCgRwYWdlGAEgASgFEhEKCXBhZ2Vfc2l6ZRgCIAEoBRIPCgJpZBgDIAEoA0gAiAEBEhAKA3VpZBgEIAEoCUgBiAEBEhEKBG5hbWUYBSABKAlIAogBARI0CghvcmdfdHlwZRgGIAEoDjIdLmFjdGl2aXR5LnYxLk9yZ2FuaXphdGlvblR5cGVIA4gBARITCgZsb2NhbGUYByABKAlIBIgBARIZCgxlbWFpbF9kb21haW4YCCABKAlIBYgBARIoCgZzdGF0dXMYCSABKA4yEy5hY3Rpdml0eS52MS5TdGF0dXNIBogBARIUCgdrZXl3b3JkGAogASgJSAeIAQESGAoLdW5pcXVlX25hbWUYCyABKAlICIgBAUIFCgNfaWRCBgoEX3VpZEIHCgVfbmFtZUILCglfb3JnX3R5cGVCCQoHX2xvY2FsZUIPCg1fZW1haWxfZG9tYWluQgkKB19zdGF0dXNCCgoIX2tleXdvcmRCDgoMX3VuaXF1ZV9uYW1lImIKIExpc3RBY3Rpdml0eU9yZ2FuaXphdGlvblJlc3BvbnNlEg0KBXRvdGFsGAEgASgFEi8KBGRhdGEYAiADKAsyIS5hY3Rpdml0eS52MS5BY3Rpdml0eU9yZ2FuaXphdGlvbipNCgxBY3Rpdml0eVR5cGUSHQoZQUNUSVZJVFlfVFlQRV9VTlNQRUNJRklFRBAAEh4KGkFDVElWSVRZX1RZUEVfT1JHQU5JWkFUSU9OEAEqkwEKEE9yZ2FuaXphdGlvblR5cGUSIQodT1JHQU5JWkFUSU9OX1RZUEVfVU5TUEVDSUZJRUQQABIdChlPUkdBTklaQVRJT05fVFlQRV9DT01QQU5ZEAESHAoYT1JHQU5JWkFUSU9OX1RZUEVfU0NIT09MEAISHwobT1JHQU5JWkFUSU9OX1RZUEVfQ09NTVVOSVRZEAMqSAoGU3RhdHVzEhYKElNUQVRVU19VTlNQRUNJRklFRBAAEhEKDVNUQVRVU19BQ1RJVkUQARITCg9TVEFUVVNfSU5BQ1RJVkUQAipiCg9Vc2VyQmxvY2tlZFR5cGUSHAoYQkxPQ0tFRF9UWVBFX1VOU1BFQ0lGSUVEEAASGAoUQkxPQ0tFRF9UWVBFX0FDQ09VTlQQARIXChNCTE9DS0VEX1RZUEVfU0hVVFVQEAJCtAEKD2NvbS5hY3Rpdml0eS52MUIRQWN0aXZpdHlCYXNlUHJvdG9QAVpBZ2l0bGFiLm1vbmljYS5jbi92aWRhL3Nkay9iaXpzZXJ2ZXItZ28uZ2l0L2FjdGl2aXR5L3YxO2FjdGl2aXR5djGiAgNBWFiqAgtBY3Rpdml0eS5WMcoCC0FjdGl2aXR5XFYx4gIXQWN0aXZpdHlcVjFcR1BCTWV0YWRhdGHqAgxBY3Rpdml0eTo6VjFiBnByb3RvMw",[He,te]),E2=z("ChphY3Rpdml0eS92MS9hY3Rpdml0eS5wcm90bxILYWN0aXZpdHkudjEiMgofR2V0T3JnYW5pemF0aW9uSW5mb0J5VUlEUmVxdWVzdBIPCgdvcmdfdWlkGAEgASgJIlcKIEdldE9yZ2FuaXphdGlvbkluZm9CeVVJRFJlc3BvbnNlEjMKCG9yZ19pbmZvGAEgASgLMiEuYWN0aXZpdHkudjEuQWN0aXZpdHlPcmdhbml6YXRpb24iMgohR2V0T3JnYW5pemF0aW9uSW5mb0J5RW1haWxSZXF1ZXN0Eg0KBWVtYWlsGAEgASgJIlkKIkdldE9yZ2FuaXphdGlvbkluZm9CeUVtYWlsUmVzcG9uc2USMwoIb3JnX2luZm8YASABKAsyIS5hY3Rpdml0eS52MS5BY3Rpdml0eU9yZ2FuaXphdGlvbiI9CiZHZXRPcmdhbml6YXRpb25JbmZvQnlVbmlxdWVOYW1lUmVxdWVzdBITCgt1bmlxdWVfbmFtZRgBIAEoCSJeCidHZXRPcmdhbml6YXRpb25JbmZvQnlVbmlxdWVOYW1lUmVzcG9uc2USMwoIb3JnX2luZm8YASABKAsyIS5hY3Rpdml0eS52MS5BY3Rpdml0eU9yZ2FuaXphdGlvbjKXBAoVUHVibGljQWN0aXZpdHlTZXJ2aWNlEncKGEdldE9yZ2FuaXphdGlvbkluZm9CeVVJRBIsLmFjdGl2aXR5LnYxLkdldE9yZ2FuaXphdGlvbkluZm9CeVVJRFJlcXVlc3QaLS5hY3Rpdml0eS52MS5HZXRPcmdhbml6YXRpb25JbmZvQnlVSURSZXNwb25zZRJ3ChhMaXN0QWN0aXZpdHlPcmdhbml6YXRpb24SLC5hY3Rpdml0eS52MS5MaXN0QWN0aXZpdHlPcmdhbml6YXRpb25SZXF1ZXN0Gi0uYWN0aXZpdHkudjEuTGlzdEFjdGl2aXR5T3JnYW5pemF0aW9uUmVzcG9uc2USfQoaR2V0T3JnYW5pemF0aW9uSW5mb0J5RW1haWwSLi5hY3Rpdml0eS52MS5HZXRPcmdhbml6YXRpb25JbmZvQnlFbWFpbFJlcXVlc3QaLy5hY3Rpdml0eS52MS5HZXRPcmdhbml6YXRpb25JbmZvQnlFbWFpbFJlc3BvbnNlEowBCh9HZXRPcmdhbml6YXRpb25JbmZvQnlVbmlxdWVOYW1lEjMuYWN0aXZpdHkudjEuR2V0T3JnYW5pemF0aW9uSW5mb0J5VW5pcXVlTmFtZVJlcXVlc3QaNC5hY3Rpdml0eS52MS5HZXRPcmdhbml6YXRpb25JbmZvQnlVbmlxdWVOYW1lUmVzcG9uc2VCsAEKD2NvbS5hY3Rpdml0eS52MUINQWN0aXZpdHlQcm90b1ABWkFnaXRsYWIubW9uaWNhLmNuL3ZpZGEvc2RrL2JpenNlcnZlci1nby5naXQvYWN0aXZpdHkvdjE7YWN0aXZpdHl2MaICA0FYWKoCC0FjdGl2aXR5LlYxygILQWN0aXZpdHlcVjHiAhdBY3Rpdml0eVxWMVxHUEJNZXRhZGF0YeoCDEFjdGl2aXR5OjpWMWIGcHJvdG8z",[zs,He,te]),y2=M(E2,0),v2=z("CiBhY3Rpdml0eS92MS9hY3Rpdml0eV9hZG1pbi5wcm90bxILYWN0aXZpdHkudjEilAUKIVVwZGF0ZUFjdGl2aXR5T3JnYW5pemF0aW9uUmVxdWVzdBIKCgJpZBgBIAEoAxIYCgt1bmlxdWVfbmFtZRgCIAEoCUgAiAEBEhEKBG5hbWUYAyABKAlIAYgBARI0CghvcmdfdHlwZRgEIAEoDjIdLmFjdGl2aXR5LnYxLk9yZ2FuaXphdGlvblR5cGVIAogBARITCgZsb2NhbGUYBSABKAlIA4gBARISCgV0aXRsZRgGIAEoCUgEiAEBEhgKC2Rlc2NyaXB0aW9uGAcgASgJSAWIAQESEwoGYXZhdGFyGAggASgJSAaIAQESGQoRZW1haWxfZG9tYWluX2xpc3QYCSADKAkSKAoGc3RhdHVzGAogASgOMhMuYWN0aXZpdHkudjEuU3RhdHVzSAeIAQESHgoWcmVjb21tZW5kX3VzZWNhc2VfbGlzdBgLIAMoCRIXCgpleHRyYV9kYXRhGAwgASgJSAiIAQESHgoRcmVjb21tZW5kX2NyZWRpdHMYDSABKAVICYgBARIdChByZWdpc3Rlcl9jcmVkaXRzGA4gASgFSAqIAQESFAoHY291bnRyeRgPIAEoCUgLiAEBEhEKBGNpdHkYECABKAlIDIgBARISCgphbGlhc19saXN0GBEgAygJQg4KDF91bmlxdWVfbmFtZUIHCgVfbmFtZUILCglfb3JnX3R5cGVCCQoHX2xvY2FsZUIICgZfdGl0bGVCDgoMX2Rlc2NyaXB0aW9uQgkKB19hdmF0YXJCCQoHX3N0YXR1c0INCgtfZXh0cmFfZGF0YUIUChJfcmVjb21tZW5kX2NyZWRpdHNCEwoRX3JlZ2lzdGVyX2NyZWRpdHNCCgoIX2NvdW50cnlCBwoFX2NpdHkiRgoiVXBkYXRlQWN0aXZpdHlPcmdhbml6YXRpb25SZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIEg8KB21lc3NhZ2UYAiABKAkipwMKIUNyZWF0ZUFjdGl2aXR5T3JnYW5pemF0aW9uUmVxdWVzdBITCgt1bmlxdWVfbmFtZRgBIAEoCRIMCgRuYW1lGAIgASgJEhMKBmF2YXRhchgDIAEoCUgAiAEBEg0KBXRpdGxlGAQgASgJEhMKC2Rlc2NyaXB0aW9uGAUgASgJEi8KCG9yZ190eXBlGAYgASgOMh0uYWN0aXZpdHkudjEuT3JnYW5pemF0aW9uVHlwZRIjCgZzdGF0dXMYByABKA4yEy5hY3Rpdml0eS52MS5TdGF0dXMSHgoWcmVjb21tZW5kX3VzZWNhc2VfbGlzdBgIIAMoCRIZChFlbWFpbF9kb21haW5fbGlzdBgJIAMoCRIOCgZsb2NhbGUYCiABKAkSEgoKZXh0cmFfZGF0YRgLIAEoCRIZChFyZWNvbW1lbmRfY3JlZGl0cxgMIAEoBRIYChByZWdpc3Rlcl9jcmVkaXRzGA0gASgFEg8KB2NvdW50cnkYDiABKAkSDAoEY2l0eRgPIAEoCRISCgphbGlhc19saXN0GBAgAygJQgkKB19hdmF0YXIidwoiQ3JlYXRlQWN0aXZpdHlPcmdhbml6YXRpb25SZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIEg8KB21lc3NhZ2UYAiABKAkSLwoEZGF0YRgDIAEoCzIhLmFjdGl2aXR5LnYxLkFjdGl2aXR5T3JnYW5pemF0aW9uIh4KEERlbGV0ZU9yZ1JlcXVlc3QSCgoCaWQYASABKAMiNAoQRGVsZXRlT3JnUmVzb25zZRIPCgdzdWNjZXNzGAEgASgIEg8KB21lc3NhZ2UYAiABKAkiLQoaR2V0T3JnVXNlckNvdW50SW5mb1JlcXVlc3QSDwoHb3JnX3VpZBgBIAEoCSLeAQobR2V0T3JnVXNlckNvdW50SW5mb1Jlc3BvbnNlEg0KBXRvdGFsGAEgASgDEk8KDGRvbWFpbl9jb3VudBgCIAMoCzI5LmFjdGl2aXR5LnYxLkdldE9yZ1VzZXJDb3VudEluZm9SZXNwb25zZS5Eb21haW5Db3VudEVudHJ5EhUKDWJsb2NrZWRfY291bnQYAyABKAMSFAoMYWN0aXZlX2NvdW50GAQgASgDGjIKEERvbWFpbkNvdW50RW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgDOgI4ASIpChZJbXBvcnREYXRhQnlDc3ZSZXF1ZXN0Eg8KB2Nzdl9zdHIYASABKAkifQoXSW1wb3J0RGF0YUJ5Q3N2UmVzcG9uc2USDwoHc3VjY2VzcxgBIAEoCBIPCgdtZXNzYWdlGAIgASgJEhUKDXN1Y2Nlc3NfY291bnQYBCABKAMSFAoMZmFpbGVkX2NvdW50GAUgASgDEhMKC2ZhaWxlZF9saXN0GAYgAygJMo0GChRBY3Rpdml0eUFkbWluU2VydmljZRJ3ChhMaXN0QWN0aXZpdHlPcmdhbml6YXRpb24SLC5hY3Rpdml0eS52MS5MaXN0QWN0aXZpdHlPcmdhbml6YXRpb25SZXF1ZXN0Gi0uYWN0aXZpdHkudjEuTGlzdEFjdGl2aXR5T3JnYW5pemF0aW9uUmVzcG9uc2USfQoaVXBkYXRlQWN0aXZpdHlPcmdhbml6YXRpb24SLi5hY3Rpdml0eS52MS5VcGRhdGVBY3Rpdml0eU9yZ2FuaXphdGlvblJlcXVlc3QaLy5hY3Rpdml0eS52MS5VcGRhdGVBY3Rpdml0eU9yZ2FuaXphdGlvblJlc3BvbnNlEn0KGkNyZWF0ZUFjdGl2aXR5T3JnYW5pemF0aW9uEi4uYWN0aXZpdHkudjEuQ3JlYXRlQWN0aXZpdHlPcmdhbml6YXRpb25SZXF1ZXN0Gi8uYWN0aXZpdHkudjEuQ3JlYXRlQWN0aXZpdHlPcmdhbml6YXRpb25SZXNwb25zZRJrChRMaXN0T3JnYW5pemF0aW9uVXNlchIoLmFjdGl2aXR5LnYxLkxpc3RPcmdhbml6YXRpb25Vc2VyUmVxdWVzdBopLmFjdGl2aXR5LnYxLkxpc3RPcmdhbml6YXRpb25Vc2VyUmVzcG9uc2USaAoTR2V0T3JnVXNlckNvdW50SW5mbxInLmFjdGl2aXR5LnYxLkdldE9yZ1VzZXJDb3VudEluZm9SZXF1ZXN0GiguYWN0aXZpdHkudjEuR2V0T3JnVXNlckNvdW50SW5mb1Jlc3BvbnNlEkkKCURlbGV0ZU9yZxIdLmFjdGl2aXR5LnYxLkRlbGV0ZU9yZ1JlcXVlc3QaHS5hY3Rpdml0eS52MS5EZWxldGVPcmdSZXNvbnNlElwKD0ltcG9ydERhdGFCeUNzdhIjLmFjdGl2aXR5LnYxLkltcG9ydERhdGFCeUNzdlJlcXVlc3QaJC5hY3Rpdml0eS52MS5JbXBvcnREYXRhQnlDc3ZSZXNwb25zZUK1AQoPY29tLmFjdGl2aXR5LnYxQhJBY3Rpdml0eUFkbWluUHJvdG9QAVpBZ2l0bGFiLm1vbmljYS5jbi92aWRhL3Nkay9iaXpzZXJ2ZXItZ28uZ2l0L2FjdGl2aXR5L3YxO2FjdGl2aXR5djGiAgNBWFiqAgtBY3Rpdml0eS5WMcoCC0FjdGl2aXR5XFYx4gIXQWN0aXZpdHlcVjFcR1BCTWV0YWRhdGHqAgxBY3Rpdml0eTo6VjFiBnByb3RvMw",[zs,He,te]),S2=M(v2,0),Qs=z("CiNsaXZlX2V2ZW50L3YxL2xpdmVfZXZlbnRfYmFzZS5wcm90bxINbGl2ZV9ldmVudC52MSptCg1QdWJsaXNoU3RhdHVzEh4KGlBVQkxJU0hfU1RBVFVTX1VOU1BFQ0lGSUVEEAASHgoaUFVCTElTSF9TVEFUVVNfVU5QVUJMSVNIRUQQARIcChhQVUJMSVNIX1NUQVRVU19QVUJMSVNIRUQQAkK/AQoRY29tLmxpdmVfZXZlbnQudjFCEkxpdmVFdmVudEJhc2VQcm90b1ABWkVnaXRsYWIubW9uaWNhLmNuL3ZpZGEvc2RrL2JpenNlcnZlci1nby5naXQvbGl2ZV9ldmVudC92MTtsaXZlX2V2ZW50djGiAgNMWFiqAgxMaXZlRXZlbnQuVjHKAgxMaXZlRXZlbnRcVjHiAhhMaXZlRXZlbnRcVjFcR1BCTWV0YWRhdGHqAg1MaXZlRXZlbnQ6OlYxYgZwcm90bzM"),C2=z("CiRsaXZlX2V2ZW50L3YxL2xpdmVfZXZlbnRfYWRtaW4ucHJvdG8SDWxpdmVfZXZlbnQudjEirAMKEkNyZWF0ZUV2ZW50UmVxdWVzdBIQCghldmVudF9pZBgBIAEoCRISCgpldmVudF9uYW1lGAIgASgJEgwKBGhvc3QYAyABKAkSLgoKc3RhcnRfdGltZRgEIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASLAoIZW5kX3RpbWUYBSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEg8KB2NvdW50cnkYBiABKAkSDgoGcmVnaW9uGAcgASgJEg8KB2FkZHJlc3MYCCABKAkSHwoXYWxsb3dfZnJlZV9yZWdpc3RyYXRpb24YCSABKAgSIQoZZ2l2ZV90ZW1wb3JhcnlfbWVtYmVyc2hpcBgKIAEoCBIUCgxmcmVlX2NyZWRpdHMYCyABKAUSFQoNZXZlbnRfY3JlZGl0cxgMIAEoBRIYChBtYXhfcGFydGljaXBhbnRzGA0gASgFEhgKEGdpZnRfaW52aXRlX2NvZGUYDiABKAUSFwoPY291bnRyeV9kaXNwbGF5GA8gASgJEhQKDGNpdHlfZGlzcGxheRgQIAEoCSIVChNDcmVhdGVFdmVudFJlc3BvbnNlIu4DChJVcGRhdGVFdmVudFJlcXVlc3QSCgoCaWQYASABKAUSEAoIZXZlbnRfaWQYAiABKAkSEgoKZXZlbnRfbmFtZRgDIAEoCRIMCgRob3N0GAQgASgJEi4KCnN0YXJ0X3RpbWUYBSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEiwKCGVuZF90aW1lGAYgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIPCgdjb3VudHJ5GAcgASgJEg4KBnJlZ2lvbhgIIAEoCRIPCgdhZGRyZXNzGAkgASgJEh8KF2FsbG93X2ZyZWVfcmVnaXN0cmF0aW9uGAogASgIEiEKGWdpdmVfdGVtcG9yYXJ5X21lbWJlcnNoaXAYCyABKAgSFAoMZnJlZV9jcmVkaXRzGAwgASgFEhUKDWV2ZW50X2NyZWRpdHMYDSABKAUSGAoQbWF4X3BhcnRpY2lwYW50cxgOIAEoBRI0Cg5wdWJsaXNoX3N0YXR1cxgPIAEoDjIcLmxpdmVfZXZlbnQudjEuUHVibGlzaFN0YXR1cxIYChBnaWZ0X2ludml0ZV9jb2RlGBAgASgFEhcKD2NvdW50cnlfZGlzcGxheRgRIAEoCRIUCgxjaXR5X2Rpc3BsYXkYEiABKAkiFQoTVXBkYXRlRXZlbnRSZXNwb25zZSJyChFMaXN0RXZlbnRzUmVxdWVzdBIQCghldmVudF9pZBgBIAEoCRIqCgZzdGF0dXMYAiABKA4yGi5saXZlX2V2ZW50LnYxLkV2ZW50U3RhdHVzEgwKBHBhZ2UYAyABKAUSEQoJcGFnZV9zaXplGAQgASgFIk0KEkxpc3RFdmVudHNSZXNwb25zZRIoCgZldmVudHMYASADKAsyGC5saXZlX2V2ZW50LnYxLkV2ZW50SW5mbxINCgV0b3RhbBgCIAEoBSImChJEZWxldGVFdmVudFJlcXVlc3QSEAoIZXZlbnRfaWQYASABKAkiJgoTRGVsZXRlRXZlbnRSZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIIisKF0dldEV2ZW50T3ZlcnZpZXdSZXF1ZXN0EhAKCGV2ZW50X2lkGAEgASgJIpoBChhHZXRFdmVudE92ZXJ2aWV3UmVzcG9uc2USGgoSdG90YWxfcGFydGljaXBhbnRzGAEgASgFEhYKDm5ld191c2VyX2NvdW50GAIgASgFEhsKE2V4aXN0aW5nX3VzZXJfY291bnQYAyABKAUSFQoNc2Vzc2lvbl9jb3VudBgEIAEoBRIWCg5jcmVkaXRzX2Nvc3RlZBgFIAEoBSJsChVMaXN0RXZlbnRVc2Vyc1JlcXVlc3QSEAoIZXZlbnRfaWQYASABKAkSFAoHdXNlcl9pZBgCIAEoCUgAiAEBEgwKBHBhZ2UYAyABKAUSEQoJcGFnZV9zaXplGAQgASgFQgoKCF91c2VyX2lkIlAKFkxpc3RFdmVudFVzZXJzUmVzcG9uc2USJwoFdXNlcnMYASADKAsyGC5saXZlX2V2ZW50LnYxLkV2ZW50VXNlchINCgV0b3RhbBgCIAEoBSKRAQoYTGlzdEV2ZW50U2Vzc2lvbnNSZXF1ZXN0EhAKCGV2ZW50X2lkGAEgASgJEhcKCnNlc3Npb25faWQYAiABKAlIAIgBARIMCgRwYWdlGAMgASgFEhEKCXBhZ2Vfc2l6ZRgEIAEoBRIRCgR1c2VyGAUgASgJSAGIAQFCDQoLX3Nlc3Npb25faWRCBwoFX3VzZXIiWQoZTGlzdEV2ZW50U2Vzc2lvbnNSZXNwb25zZRItCghzZXNzaW9ucxgBIAMoCzIbLmxpdmVfZXZlbnQudjEuRXZlbnRTZXNzaW9uEg0KBXRvdGFsGAIgASgFIp8FCglFdmVudEluZm8SCgoCaWQYASABKAUSEAoIZXZlbnRfaWQYAiABKAkSEgoKZXZlbnRfbmFtZRgDIAEoCRIMCgRob3N0GAQgASgJEi4KCnN0YXJ0X3RpbWUYBSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEiwKCGVuZF90aW1lGAYgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIPCgdjb3VudHJ5GAcgASgJEg4KBnJlZ2lvbhgIIAEoCRIPCgdhZGRyZXNzGAkgASgJEh8KF2FsbG93X2ZyZWVfcmVnaXN0cmF0aW9uGAogASgIEiEKGWdpdmVfdGVtcG9yYXJ5X21lbWJlcnNoaXAYCyABKAgSFAoMZnJlZV9jcmVkaXRzGAwgASgFEhUKDWV2ZW50X2NyZWRpdHMYDSABKAUSGAoQbWF4X3BhcnRpY2lwYW50cxgOIAEoBRIcChRjdXJyZW50X3BhcnRpY2lwYW50cxgPIAEoBRIqCgZzdGF0dXMYECABKA4yGi5saXZlX2V2ZW50LnYxLkV2ZW50U3RhdHVzEjQKDnB1Ymxpc2hfc3RhdHVzGBEgASgOMhwubGl2ZV9ldmVudC52MS5QdWJsaXNoU3RhdHVzEi4KCmNyZWF0ZWRfYXQYEiABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEi4KCnVwZGF0ZWRfYXQYEyABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEg4KBnFyY29kZRgUIAEoCRIYChBnaWZ0X2ludml0ZV9jb2RlGBUgASgFEhcKD2NvdW50cnlfZGlzcGxheRgWIAEoCRIUCgxjaXR5X2Rpc3BsYXkYFyABKAkigAEKCUV2ZW50VXNlchIPCgd1c2VyX2lkGAEgASgJEg0KBWVtYWlsGAIgASgJEhAKCHVzZXJuYW1lGAMgASgJEjEKDXJlZ2lzdGVyX3RpbWUYBCABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEg4KBmlzX25ldxgFIAEoCCKdAQoMRXZlbnRTZXNzaW9uEhIKCnNlc3Npb25faWQYASABKAkSDQoFdGl0bGUYAiABKAkSFgoOY3JlZGl0c19jb3N0ZWQYAyABKAUSLgoKY3JlYXRlZF9hdBgEIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASEQoJaXNfc2hhcmVkGAUgASgIEg8KB3VzZXJfaWQYBiABKAkqeAoLRXZlbnRTdGF0dXMSHAoYRVZFTlRfU1RBVFVTX1VOU1BFQ0lGSUVEEAASGQoVRVZFTlRfU1RBVFVTX1VQQ09NSU5HEAESGAoURVZFTlRfU1RBVFVTX09OR09JTkcQAhIWChJFVkVOVF9TVEFUVVNfRU5ERUQQAzKmBQoVTGl2ZUV2ZW50QWRtaW5TZXJ2aWNlElYKC0NyZWF0ZUV2ZW50EiEubGl2ZV9ldmVudC52MS5DcmVhdGVFdmVudFJlcXVlc3QaIi5saXZlX2V2ZW50LnYxLkNyZWF0ZUV2ZW50UmVzcG9uc2UiABJWCgtVcGRhdGVFdmVudBIhLmxpdmVfZXZlbnQudjEuVXBkYXRlRXZlbnRSZXF1ZXN0GiIubGl2ZV9ldmVudC52MS5VcGRhdGVFdmVudFJlc3BvbnNlIgASUwoKTGlzdEV2ZW50cxIgLmxpdmVfZXZlbnQudjEuTGlzdEV2ZW50c1JlcXVlc3QaIS5saXZlX2V2ZW50LnYxLkxpc3RFdmVudHNSZXNwb25zZSIAElYKC0RlbGV0ZUV2ZW50EiEubGl2ZV9ldmVudC52MS5EZWxldGVFdmVudFJlcXVlc3QaIi5saXZlX2V2ZW50LnYxLkRlbGV0ZUV2ZW50UmVzcG9uc2UiABJlChBHZXRFdmVudE92ZXJ2aWV3EiYubGl2ZV9ldmVudC52MS5HZXRFdmVudE92ZXJ2aWV3UmVxdWVzdBonLmxpdmVfZXZlbnQudjEuR2V0RXZlbnRPdmVydmlld1Jlc3BvbnNlIgASXwoOTGlzdEV2ZW50VXNlcnMSJC5saXZlX2V2ZW50LnYxLkxpc3RFdmVudFVzZXJzUmVxdWVzdBolLmxpdmVfZXZlbnQudjEuTGlzdEV2ZW50VXNlcnNSZXNwb25zZSIAEmgKEUxpc3RFdmVudFNlc3Npb25zEicubGl2ZV9ldmVudC52MS5MaXN0RXZlbnRTZXNzaW9uc1JlcXVlc3QaKC5saXZlX2V2ZW50LnYxLkxpc3RFdmVudFNlc3Npb25zUmVzcG9uc2UiAELAAQoRY29tLmxpdmVfZXZlbnQudjFCE0xpdmVFdmVudEFkbWluUHJvdG9QAVpFZ2l0bGFiLm1vbmljYS5jbi92aWRhL3Nkay9iaXpzZXJ2ZXItZ28uZ2l0L2xpdmVfZXZlbnQvdjE7bGl2ZV9ldmVudHYxogIDTFhYqgIMTGl2ZUV2ZW50LlYxygIMTGl2ZUV2ZW50XFYx4gIYTGl2ZUV2ZW50XFYxXEdQQk1ldGFkYXRh6gINTGl2ZUV2ZW50OjpWMWIGcHJvdG8z",[te,Qs]),W2=M(C2,0),B2=z("Ch5saXZlX2V2ZW50L3YxL2xpdmVfZXZlbnQucHJvdG8SDWxpdmVfZXZlbnQudjEiQQoVQ2hlY2tMaXZlRXZlbnRSZXF1ZXN0EhUKDWxpdmVfZXZlbnRfaWQYASABKAkSEQoJZGV2aWNlX2lkGAIgASgJIhgKFkNoZWNrTGl2ZUV2ZW50UmVzcG9uc2UycwoQTGl2ZUV2ZW50U2VydmljZRJfCg5DaGVja0xpdmVFdmVudBIkLmxpdmVfZXZlbnQudjEuQ2hlY2tMaXZlRXZlbnRSZXF1ZXN0GiUubGl2ZV9ldmVudC52MS5DaGVja0xpdmVFdmVudFJlc3BvbnNlIgBCuwEKEWNvbS5saXZlX2V2ZW50LnYxQg5MaXZlRXZlbnRQcm90b1ABWkVnaXRsYWIubW9uaWNhLmNuL3ZpZGEvc2RrL2JpenNlcnZlci1nby5naXQvbGl2ZV9ldmVudC92MTtsaXZlX2V2ZW50djGiAgNMWFiqAgxMaXZlRXZlbnQuVjHKAgxMaXZlRXZlbnRcVjHiAhhMaXZlRXZlbnRcVjFcR1BCTWV0YWRhdGHqAg1MaXZlRXZlbnQ6OlYxYgZwcm90bzM"),N2=M(B2,0),F2=z("CiVsaXZlX2V2ZW50L3YxL2xpdmVfZXZlbnRfcHVibGljLnByb3RvEg1saXZlX2V2ZW50LnYxIicKE0dldExpdmVFdmVudFJlcXVlc3QSEAoIZXZlbnRfaWQYASABKAkiqQMKFEdldExpdmVFdmVudFJlc3BvbnNlEhAKCGV2ZW50X2lkGAEgASgJEhIKCmV2ZW50X25hbWUYAiABKAkSDAoEaG9zdBgDIAEoCRIuCgpzdGFydF90aW1lGAQgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIsCghlbmRfdGltZRgFIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASDwoHYWRkcmVzcxgGIAEoCRIfChdhbGxvd19mcmVlX3JlZ2lzdHJhdGlvbhgHIAEoCBIhChlnaXZlX3RlbXBvcmFyeV9tZW1iZXJzaGlwGAggASgIEhQKDGZyZWVfY3JlZGl0cxgJIAEoBRIVCg1ldmVudF9jcmVkaXRzGAogASgFEhgKEG1heF9wYXJ0aWNpcGFudHMYCyABKAUSNAoOcHVibGlzaF9zdGF0dXMYDCABKA4yHC5saXZlX2V2ZW50LnYxLlB1Ymxpc2hTdGF0dXMSFwoPY291bnRyeV9kaXNwbGF5GA0gASgJEhQKDGNpdHlfZGlzcGxheRgOIAEoCTJzChZMaXZlRXZlbnRQdWJsaWNTZXJ2aWNlElkKDEdldExpdmVFdmVudBIiLmxpdmVfZXZlbnQudjEuR2V0TGl2ZUV2ZW50UmVxdWVzdBojLmxpdmVfZXZlbnQudjEuR2V0TGl2ZUV2ZW50UmVzcG9uc2UiAELBAQoRY29tLmxpdmVfZXZlbnQudjFCFExpdmVFdmVudFB1YmxpY1Byb3RvUAFaRWdpdGxhYi5tb25pY2EuY24vdmlkYS9zZGsvYml6c2VydmVyLWdvLmdpdC9saXZlX2V2ZW50L3YxO2xpdmVfZXZlbnR2MaICA0xYWKoCDExpdmVFdmVudC5WMcoCDExpdmVFdmVudFxWMeICGExpdmVFdmVudFxWMVxHUEJNZXRhZGF0YeoCDUxpdmVFdmVudDo6VjFiBnByb3RvMw",[te,Qs]),Y2=M(F2,0),Ls=z("Chd1c2VyL3YxL3VzZXJfYXV0aC5wcm90bxIHdXNlci52MSJDChVVcGRhdGVQYXNzd29yZFJlcXVlc3QSFAoMb2xkX3Bhc3N3b3JkGAEgASgJEhQKDG5ld19wYXNzd29yZBgCIAEoCSIYChZVcGRhdGVQYXNzd29yZFJlc3BvbnNlIg8KDUxvZ291dFJlcXVlc3QiEAoOTG9nb3V0UmVzcG9uc2UiKAoRRGVsZXRlVXNlclJlcXVlc3QSEwoLdmVyaWZ5X2NvZGUYASABKAkiFAoSRGVsZXRlVXNlclJlc3BvbnNlIk4KIlNlbmRFbWFpbFZlcmlmeUNvZGVXaXRoQXV0aFJlcXVlc3QSKAoGYWN0aW9uGAEgASgOMhgudXNlci52MS5TZW5kRW1haWxBY3Rpb24iJQojU2VuZEVtYWlsVmVyaWZ5Q29kZVdpdGhBdXRoUmVzcG9uc2UiRQocUmVzZXRQYXNzd29yZFdpdGhBdXRoUmVxdWVzdBITCgt2ZXJpZnlfY29kZRgBIAEoCRIQCghwYXNzd29yZBgCIAEoCSIfCh1SZXNldFBhc3N3b3JkV2l0aEF1dGhSZXNwb25zZSIdChtHZW5lcmF0ZVRlbXBBdXRoQ29kZVJlcXVlc3QiLQocR2VuZXJhdGVUZW1wQXV0aENvZGVSZXNwb25zZRINCgV0b2tlbhgBIAEoCSq8AQoPU2VuZEVtYWlsQWN0aW9uEiEKHVNFTkRfRU1BSUxfQUNUSU9OX1VOU1BFQ0lGSUVEEAASHgoaU0VORF9FTUFJTF9BQ1RJT05fUkVHSVNURVIQARIkCiBTRU5EX0VNQUlMX0FDVElPTl9SRVNFVF9QQVNTV09SRBACEhwKGFNFTkRfRU1BSUxfQUNUSU9OX0xPR09GRhADEiIKHlNFTkRfRU1BSUxfQUNUSU9OX0RJU01JU1NfVEVBTRAEMtoDCg9Vc2VyQXV0aFNlcnZpY2USOQoGTG9nb3V0EhYudXNlci52MS5Mb2dvdXRSZXF1ZXN0GhcudXNlci52MS5Mb2dvdXRSZXNwb25zZRJFCgpEZWxldGVVc2VyEhoudXNlci52MS5EZWxldGVVc2VyUmVxdWVzdBobLnVzZXIudjEuRGVsZXRlVXNlclJlc3BvbnNlEngKG1NlbmRFbWFpbFZlcmlmeUNvZGVXaXRoQXV0aBIrLnVzZXIudjEuU2VuZEVtYWlsVmVyaWZ5Q29kZVdpdGhBdXRoUmVxdWVzdBosLnVzZXIudjEuU2VuZEVtYWlsVmVyaWZ5Q29kZVdpdGhBdXRoUmVzcG9uc2USZgoVUmVzZXRQYXNzd29yZFdpdGhBdXRoEiUudXNlci52MS5SZXNldFBhc3N3b3JkV2l0aEF1dGhSZXF1ZXN0GiYudXNlci52MS5SZXNldFBhc3N3b3JkV2l0aEF1dGhSZXNwb25zZRJjChRHZW5lcmF0ZVRlbXBBdXRoQ29kZRIkLnVzZXIudjEuR2VuZXJhdGVUZW1wQXV0aENvZGVSZXF1ZXN0GiUudXNlci52MS5HZW5lcmF0ZVRlbXBBdXRoQ29kZVJlc3BvbnNlQpQBCgtjb20udXNlci52MUINVXNlckF1dGhQcm90b1ABWjlnaXRsYWIubW9uaWNhLmNuL3ZpZGEvc2RrL2JpenNlcnZlci1nby5naXQvdXNlci92MTt1c2VydjGiAgNVWFiqAgdVc2VyLlYxygIHVXNlclxWMeICE1VzZXJcVjFcR1BCTWV0YWRhdGHqAghVc2VyOjpWMWIGcHJvdG8z"),U2=M(Ls,0),Wr=z("Chd1c2VyL3YxL3VzZXJfYmFzZS5wcm90bxIHdXNlci52MSqJAQoPTWFudXNWaXBWZXJzaW9uEiEKHU1BTlVTX1ZJUF9WRVJTSU9OX1VOU1BFQ0lGSUVEEAASGgoWTUFOVVNfVklQX1ZFUlNJT05fRlJFRRABEhwKGE1BTlVTX1ZJUF9WRVJTSU9OX0NBU1VBTBACEhkKFU1BTlVTX1ZJUF9WRVJTSU9OX1BSTxADKuUCChJJbnZpdGF0aW9uQ29kZUtpbmQSJAogSU5WSVRBVElPTl9DT0RFX0tJTkRfVU5TUEVDSUZJRUQQABIgChxJTlZJVEFUSU9OX0NPREVfS0lORF9CVUlMVElOEAESHQoZSU5WSVRBVElPTl9DT0RFX0tJTkRfVVNFUhACEiIKHklOVklUQVRJT05fQ09ERV9LSU5EX0xJTktfRk9STRADEiIKHklOVklUQVRJT05fQ09ERV9LSU5EX0xJTktfVVNFUhAEEiUKIUlOVklUQVRJT05fQ09ERV9LSU5EX0xJTktfQ0hBTk5FTBAFEiYKIklOVklUQVRJT05fQ09ERV9LSU5EX0xJTktfV0FJVExJU1QQBhIkCiBJTlZJVEFUSU9OX0NPREVfS0lORF9GSVNTSU9OQUJMRRAHEisKJ0lOVklUQVRJT05fQ09ERV9LSU5EX0NBTVBVU19GSVNTSU9OQUJMRRAIKl4KC0Jsb2NrZWRUeXBlEhwKGEJMT0NLRURfVFlQRV9VTlNQRUNJRklFRBAAEhgKFEJMT0NLRURfVFlQRV9BQ0NPVU5UEAESFwoTQkxPQ0tFRF9UWVBFX1NIVVRVUBACKqYECg9CbG9ja1JlYXNvblR5cGUSIQodQkxPQ0tfUkVBU09OX1RZUEVfVU5TUEVDSUZJRUQQABIbChdCTE9DS19SRUFTT05fVFlQRV9PVEhFUhABEiEKHUJMT0NLX1JFQVNPTl9UWVBFX1BPUk5PR1JBUEhZEAISHgoaQkxPQ0tfUkVBU09OX1RZUEVfUE9MSVRJQ1MQAxIfChtCTE9DS19SRUFTT05fVFlQRV9URVJST1JJU00QBBIbChdCTE9DS19SRUFTT05fVFlQRV9EUlVHUxAFEiMKH0JMT0NLX1JFQVNPTl9UWVBFX0FUVEFDS19TWVNURU0QBhIhCh1CTE9DS19SRUFTT05fVFlQRV9SRVBPUlRfTUFOWRAHEiIKHkJMT0NLX1JFQVNPTl9UWVBFX1NFTExfQUNDT1VOVBAIEhsKF0JMT0NLX1JFQVNPTl9UWVBFX0ZSQVVEEAkSGgoWQkxPQ0tfUkVBU09OX1RZUEVfU1BBTRAKEiQKIEJMT0NLX1JFQVNPTl9UWVBFX0lMTEVHQUxfUkVHSU9OEAsSJwojQkxPQ0tfUkVBU09OX1RZUEVfSUxMRUdBTF9USU1FX1pPTkUQDBIgChxCTE9DS19SRUFTT05fVFlQRV9JTExFR0FMX1VBEA0SIAocQkxPQ0tfUkVBU09OX1RZUEVfSUxMRUdBTF9JUBAOEhoKFkJMT0NLX1JFQVNPTl9UWVBFX1JJU0sQDyqmAwoOTGlzdFJlY29yZFR5cGUSIAocTElTVF9SRUNPUkRfVFlQRV9VTlNQRUNJRklFRBAAEhkKFUxJU1RfUkVDT1JEX1RZUEVfR0lGVBABEhsKF0xJU1RfUkVDT1JEX1RZUEVfREVEVUNUEAISGwoXTElTVF9SRUNPUkRfVFlQRV9DSEFSR0UQAxIhCh1MSVNUX1JFQ09SRF9UWVBFX1VTRVJfRElTUExBWRAEEiIKHkxJU1RfUkVDT1JEX1RZUEVfQURNSU5fRElTUExBWRAFEhkKFUxJU1RfUkVDT1JEX1RZUEVfQ09TVBAGEh0KGUxJU1RfUkVDT1JEX1RZUEVfUk9MTEJBQ0sQBxIeChpMSVNUX1JFQ09SRF9UWVBFX1JBVEVfR0lGVBAIEhsKF0xJU1RfUkVDT1JEX1RZUEVfUkVGVU5EEAkSIAocTElTVF9SRUNPUkRfVFlQRV9JTlZJVEVfR0lGVBAKEh8KG0xJU1RfUkVDT1JEX1RZUEVfTElWRV9FVkVOVBALEhwKGExJU1RfUkVDT1JEX1RZUEVfUkVGUkVTSBAMKqABCgpDcmVkaXRUeXBlEhsKF0NSRURJVF9UWVBFX1VOU1BFQ0lGSUVEEAASFAoQQ1JFRElUX1RZUEVfRlJFRRABEhgKFENSRURJVF9UWVBFX1BFUklPRElDEAISFQoRQ1JFRElUX1RZUEVfQURET04QAxIVChFDUkVESVRfVFlQRV9FVkVOVBAEEhcKE0NSRURJVF9UWVBFX1JFRlJFU0gQBSrzAgoNQ3JlZGl0TG9nVHlwZRIfChtDUkVESVRfTE9HX1RZUEVfVU5TUEVDSUZJRUQQABIYChRDUkVESVRfTE9HX1RZUEVfQ09TVBABEhwKGENSRURJVF9MT0dfVFlQRV9ST0xMQkFDSxACEiQKIENSRURJVF9MT0dfVFlQRV9TVUJTQ1JJQkVfQ0FTVUFMEAMSIQodQ1JFRElUX0xPR19UWVBFX1NVQlNDUklCRV9QUk8QBBIfChtDUkVESVRfTE9HX1RZUEVfVVBHUkFERV9QUk8QBRIeChpDUkVESVRfTE9HX1RZUEVfQURET05fMTkwMBAGEh4KGkNSRURJVF9MT0dfVFlQRV9BRERPTl85OTAwEAcSHQoZQ1JFRElUX0xPR19UWVBFX0FETUlOX0FERBAIEiAKHENSRURJVF9MT0dfVFlQRV9BRE1JTl9ERURVQ1QQCRIeChpDUkVESVRfTE9HX1RZUEVfQ1JFRElUX0FMTBAKKkYKDEFjdGl2aXR5VHlwZRIdChlBQ1RJVklUWV9UWVBFX1VOU1BFQ0lGSUVEEAASFwoTQUNUSVZJVFlfVFlQRV9QRVJLUxABKlUKDFVzZXJUeXBlRW51bRIZChVVU0VSX1RZUEVfVU5TUEVDSUZJRUQQABIWChJVU0VSX1RZUEVfUEVSU09OQUwQARISCg5VU0VSX1RZUEVfVEVBTRACQpQBCgtjb20udXNlci52MUINVXNlckJhc2VQcm90b1ABWjlnaXRsYWIubW9uaWNhLmNuL3ZpZGEvc2RrL2JpenNlcnZlci1nby5naXQvdXNlci92MTt1c2VydjGiAgNVWFiqAgdVc2VyLlYxygIHVXNlclxWMeICE1VzZXJcVjFcR1BCTWV0YWRhdGHqAghVc2VyOjpWMWIGcHJvdG8z"),J2=z("Chh1c2VyL3YxL3VzZXJfYWRtaW4ucHJvdG8SB3VzZXIudjEiiQEKIkxvb3BVcGRhdGVVc2VyQ3JlZGl0U3RhdHVzUmVzcG9uc2USDQoFY291bnQYASABKAUSDQoFdG90YWwYAiABKAUSLwoGc3RhdHVzGAMgASgOMh8udXNlci52MS5VcGRhdGVVc2VyQ3JlZGl0U3RhdHVzEhQKDGZhaWxlZF91c2VycxgEIAMoCSI0CiFMb29wVXBkYXRlVXNlckNyZWRpdFN0YXR1c1JlcXVlc3QSDwoHdGFza19pZBgBIAEoCSJJChVMaXN0VXNlclZpcExvZ1JlcXVlc3QSDwoHdXNlcl9pZBgBIAEoCRIMCgRwYWdlGAIgASgFEhEKCXBhZ2Vfc2l6ZRgDIAEoBSJGChZMaXN0VXNlclZpcExvZ1Jlc3BvbnNlEh0KBGxvZ3MYASADKAsyDy51c2VyLnYxLlZpcExvZxINCgV0b3RhbBgCIAEoBSJ6CgZWaXBMb2cSDwoHdXNlcl9pZBgBIAEoCRITCgt2aXBfdmVyc2lvbhgCIAEoCRIUCgxwZXJpb2Rfc3RhcnQYAyABKAUSEgoKcGVyaW9kX2VuZBgEIAEoBRIQCghvcGVyYXRvchgFIAEoCRIOCgZyZWFzb24YBiABKAkicgoEVXNlchIKCgJpZBgBIAEoCRIMCgRuYW1lGAIgASgJEg0KBWVtYWlsGAMgASgJEhMKC3ZpcF92ZXJzaW9uGAQgASgJEhoKEmN1cnJlbnRfcGVyaW9kX2VuZBgFIAEoAxIQCghpc190cmlhbBgGIAEoCCI/ChBMaXN0VXNlclJlc3BvbnNlEhwKBXVzZXJzGAEgAygLMg0udXNlci52MS5Vc2VyEg0KBXRvdGFsGAIgASgFIkMKD0xpc3RVc2VyUmVxdWVzdBIPCgd1c2VyX2lkGAEgASgJEgwKBHBhZ2UYAiABKAUSEQoJcGFnZV9zaXplGAMgASgFIhYKFEFkbWluR2lmdFZpcFJlc3BvbnNlIoEBChNBZG1pbkdpZnRWaXBSZXF1ZXN0Eg8KB3VzZXJfaWQYASABKAkSLQoLdmlwX3ZlcnNpb24YAiABKA4yGC51c2VyLnYxLk1hbnVzVmlwVmVyc2lvbhIaChJjdXJyZW50X3BlcmlvZF9lbmQYAyABKAMSDgoGcmVhc29uGAQgASgJIjcKFEdldFVzZXJRdW90YVJlc3BvbnNlEhIKCmxlZnRfcXVvdGEYASABKAUSCwoDdHRsGAIgASgDIiYKE0dldFVzZXJRdW90YVJlcXVlc3QSDwoHdXNlcl9pZBgBIAEoCSJZChxMaXN0VXNlckNyZWRpdFJlY29yZFJlc3BvbnNlEioKB3JlY29yZHMYASADKAsyGS51c2VyLnYxLlVzZXJDcmVkaXRSZWNvcmQSDQoFdG90YWwYAiABKAUi4wIKEFVzZXJDcmVkaXRSZWNvcmQSDwoHdXNlcl9pZBgBIAEoCRIMCgRuYW1lGAIgASgJEg8KB2NyZWRpdHMYBSABKAUSKAoLY3JlZGl0X3R5cGUYBiABKA4yEy51c2VyLnYxLkNyZWRpdFR5cGUSDQoFZW1haWwYByABKAkSEAoIb3BlcmF0b3IYCCABKAkSLgoKY3JlYXRlZF9hdBgJIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASKgoEdHlwZRgKIAEoDjIcLnVzZXIudjEuVXBkYXRlQ3JlZGl0T3BlcmF0ZRIOCgZyZWFzb24YCyABKAkSFAoMc2Vzc2lvblRpdGxlGAwgASgJEhEKCXNlc3Npb25JZBgNIAEoCRIfChdzeXN0ZW1fcm9sbGJhY2tfY3JlZGl0cxgOIAEoBRIeChZhZG1pbl9yb2xsYmFja19jcmVkaXRzGA8gASgFIpQBChtMaXN0VXNlckNyZWRpdFJlY29yZFJlcXVlc3QSFAoHdXNlcl9pZBgBIAEoCUgAiAEBEjIKDHJlY29yZF90eXBlcxgCIAMoDjIcLnVzZXIudjEuVXBkYXRlQ3JlZGl0T3BlcmF0ZRIMCgRwYWdlGAMgASgFEhEKCXBhZ2Vfc2l6ZRgEIAEoBUIKCghfdXNlcl9pZCI4ChhVcGRhdGVVc2VyQ3JlZGl0UmVzcG9uc2USCwoDbXNnGAEgASgJEg8KB3Rhc2tfaWQYAiABKAkiuwEKF1VwZGF0ZVVzZXJDcmVkaXRSZXF1ZXN0Eg8KB3VzZXJfaWQYASABKAkSDwoHY3JlZGl0cxgCIAEoBRIhCgR0eXBlGAMgASgOMhMudXNlci52MS5DcmVkaXRUeXBlEg4KBnJlYXNvbhgEIAEoCRItCgdvcGVyYXRlGAUgASgOMhwudXNlci52MS5VcGRhdGVDcmVkaXRPcGVyYXRlEg0KBXVzZXJzGAYgAygJEg0KBWVtYWlsGAsgASgJIlYKFkxpc3RVc2VyQ3JlZGl0UmVzcG9uc2USLQoMdXNlcl9jcmVkaXRzGAEgAygLMhcudXNlci52MS5Vc2VyQ3JlZGl0SW5mbxINCgV0b3RhbBgCIAEoBSLKAQoOVXNlckNyZWRpdEluZm8SDwoHdXNlcl9pZBgBIAEoCRIMCgRuYW1lGAIgASgJEhQKDGZyZWVfY3JlZGl0cxgDIAEoBRIYChBwZXJpb2RpY19jcmVkaXRzGAQgASgFEhUKDWFkZG9uX2NyZWRpdHMYBSABKAUSFQoNdG90YWxfY3JlZGl0cxgGIAEoBRINCgVlbWFpbBgHIAEoCRITCgt2aXBfdmVyc2lvbhgIIAEoCRIXCg9yZWZyZXNoX2NyZWRpdHMYCSABKAUiewoVTGlzdFVzZXJDcmVkaXRSZXF1ZXN0EhQKB3VzZXJfaWQYASABKAlIAIgBARIRCgRwYWdlGAIgASgFSAGIAQESFgoJcGFnZV9zaXplGAMgASgFSAKIAQFCCgoIX3VzZXJfaWRCBwoFX3BhZ2VCDAoKX3BhZ2Vfc2l6ZSK6AgobQ3JlYXRlSW52aXRhdGlvbkNvZGVSZXF1ZXN0Ei4KBGtpbmQYASABKA4yGy51c2VyLnYxLkludml0YXRpb25Db2RlS2luZEgAiAEBEhAKCG1heF91c2VzGAIgASgFEhgKBWNvdW50GAMgASgFQgm6SAYaBBhkKAESGQoFdXNlcnMYBCADKAlCCrpIB5IBBBDQhgMSFAoDdGFnGAUgASgJQge6SARyAhhAEiMKC2ludml0ZV9jb2RlGAYgASgJQgm6SAZyBBAGGCBIAYgBARIOCgZyZW1hcmsYCCABKAkSHgoNZmlzc2lvbl9jb3VudBgJIAEoBUIHukgEGgIYZBIUCgdjcmVkaXRzGAogASgFSAKIAQFCBwoFX2tpbmRCDgoMX2ludml0ZV9jb2RlQgoKCF9jcmVkaXRzIlUKHENyZWF0ZUludml0YXRpb25Db2RlUmVzcG9uc2USNQoQaW52aXRhdGlvbl9jb2RlcxgBIAMoCzIbLnVzZXIudjEuSW52aXRhdGlvbkNvZGVJbmZvIrYCChJJbnZpdGF0aW9uQ29kZUluZm8SCgoCaWQYASABKAMSDwoHdXNlcl9pZBgCIAEoCRITCgtpbnZpdGVfY29kZRgDIAEoCRIpCgRraW5kGAQgASgOMhsudXNlci52MS5JbnZpdGF0aW9uQ29kZUtpbmQSFAoMaXNfYWN0aXZhdGVkGAUgASgIEhAKCG1heF91c2VzGAYgASgFEhIKCnVzZWRfY291bnQYByABKAUSEgoKY3JlYXRlZF9ieRgIIAEoCRIuCgpjcmVhdGVkX2F0GAkgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBILCgN0YWcYCiABKAkSDgoGcmVtYXJrGAsgASgJEhUKDWZpc3Npb25fY291bnQYDCABKAUSDwoHY3JlZGl0cxgNIAEoBSKwAQoaTGlzdEludml0YXRpb25Db2Rlc1JlcXVlc3QSFQoEcGFnZRgBIAEoBUIHukgEGgIgABIcCglwYWdlX3NpemUYAiABKAVCCbpIBhoEGGQgABIqCgVraW5kcxgDIAMoDjIbLnVzZXIudjEuSW52aXRhdGlvbkNvZGVLaW5kEg8KB3VzZXJfaWQYBCABKAkSEwoLaW52aXRlX2NvZGUYBSABKAkSCwoDdGFnGAYgASgJImMKG0xpc3RJbnZpdGF0aW9uQ29kZXNSZXNwb25zZRI1ChBpbnZpdGF0aW9uX2NvZGVzGAEgAygLMhsudXNlci52MS5JbnZpdGF0aW9uQ29kZUluZm8SDQoFdG90YWwYAiABKAMiNwodR2V0SW52aXRhdGlvbkNvZGVVc2FnZVJlcXVlc3QSFgoOaW52aXRlX2NvZGVfaWQYAiABKAMikQEKFkludml0YXRpb25SZWxhdGlvbkluZm8SCgoCaWQYASABKAMSEgoKaW52aXRlcl9pZBgCIAEoCRISCgppbnZpdGVlX2lkGAMgASgJEhMKC2ludml0ZV9jb2RlGAQgASgJEi4KCmNyZWF0ZWRfYXQYBSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wIooBCh5HZXRJbnZpdGF0aW9uQ29kZVVzYWdlUmVzcG9uc2USNAoPaW52aXRhdGlvbl9jb2RlGAEgASgLMhsudXNlci52MS5JbnZpdGF0aW9uQ29kZUluZm8SMgoJcmVsYXRpb25zGAIgAygLMh8udXNlci52MS5JbnZpdGF0aW9uUmVsYXRpb25JbmZvItwCChtVcGRhdGVJbnZpdGF0aW9uQ29kZVJlcXVlc3QSMgoGc3RhdHVzGAIgASgOMh0udXNlci52MS5JbnZpdGF0aW9uQ29kZVN0YXR1c0gAiAEBEiIKCG1heF91c2VzGAMgASgFQgu6SAgaBhigjQYoAEgBiAEBEhYKDmludml0ZV9jb2RlX2lkGAQgASgDEg4KBnJlbWFyaxgFIAEoCRIlCg1maXNzaW9uX2NvdW50GAYgASgFQgm6SAYaBBhkIABIAogBARIuCgRraW5kGAcgASgOMhsudXNlci52MS5JbnZpdGF0aW9uQ29kZUtpbmRIA4gBARIUCgdjcmVkaXRzGAggASgFSASIAQFCCQoHX3N0YXR1c0ILCglfbWF4X3VzZXNCEAoOX2Zpc3Npb25fY291bnRCBwoFX2tpbmRCCgoIX2NyZWRpdHNKBAgBEAJSC2ludml0ZV9jb2RlIh4KHFVwZGF0ZUludml0YXRpb25Db2RlUmVzcG9uc2UizAIKHkdldEludml0YXRpb25TdGF0aXN0aWNzUmVxdWVzdBIuCgpzdGFydF90aW1lGAEgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIsCghlbmRfdGltZRgCIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASFAoMaW52aXRlX2NvZGVzGAMgAygJEkwKC2dyYW51bGFyaXR5GAQgASgOMjcudXNlci52MS5HZXRJbnZpdGF0aW9uU3RhdGlzdGljc1JlcXVlc3QuVGltZUdyYW51bGFyaXR5ImgKD1RpbWVHcmFudWxhcml0eRIgChxUSU1FX0dSQU5VTEFSSVRZX1VOU1BFQ0lGSUVEEAASGAoUVElNRV9HUkFOVUxBUklUWV9EQVkQARIZChVUSU1FX0dSQU5VTEFSSVRZX0hPVVIQAiLMAQoUSW52aXRhdGlvblN0YXRpc3RpY3MSEwoLdG90YWxfY29kZXMYASABKAMSEgoKdXNlZF9jb2RlcxgCIAEoAxIUCgx1bnVzZWRfY29kZXMYAyABKAMSFgoOdG90YWxfaW52aXRlZXMYBCABKAMSMQoLZGFpbHlfc3RhdHMYBSADKAsyHC51c2VyLnYxLkRhaWx5SW52aXRhdGlvblN0YXQSKgoMdG9wX2ludml0ZXJzGAYgAygLMhQudXNlci52MS5JbnZpdGVyU3RhdCJrChNEYWlseUludml0YXRpb25TdGF0EgwKBGRhdGUYASABKAkSFQoNaW52aXRlZV9jb3VudBgCIAEoBRIaChJjb2RlX2NyZWF0ZWRfY291bnQYAyABKAUSEwoLaW52aXRlX2NvZGUYBCABKAkiSgoLSW52aXRlclN0YXQSEgoKaW52aXRlcl9pZBgBIAEoCRIQCghuaWNrbmFtZRgCIAEoCRIVCg1pbnZpdGVlX2NvdW50GAMgASgFIlQKH0dldEludml0YXRpb25TdGF0aXN0aWNzUmVzcG9uc2USMQoKc3RhdGlzdGljcxgBIAEoCzIdLnVzZXIudjEuSW52aXRhdGlvblN0YXRpc3RpY3MimwQKDFdhaXRsaXN0SW5mbxIKCgJpZBgBIAEoAxIUCgxjb250YWN0X3R5cGUYAiABKAkSFQoNY29udGFjdF92YWx1ZRgDIAEoCRIOCgZyZWFzb24YBCABKAkSKwoKZXh0cmFfZGF0YRgFIAEoCzIXLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3QSJwoGc3RhdHVzGAYgASgOMhcudXNlci52MS5XYWl0bGlzdFN0YXR1cxIPCgd1c2VyX2lkGAcgASgJEi4KCmNyZWF0ZWRfYXQYCCABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEi4KCnVwZGF0ZWRfYXQYCSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEhcKD2FwcHJvdmVfdXNlcl9pZBgKIAEoCRITCgtjb3VudHJ5X2lzbxgLIAEoCRIvCgthcHByb3ZlZF9hdBgMIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASEgoKd29ya19lbWFpbBgNIAEoCRISCgpwcm9mZXNzaW9uGA4gASgJEhwKFHNvY2lhbF9tZWRpYV9hY2NvdW50GA8gASgJEhAKCGluZHVzdHJ5GBAgASgJEhcKD2ludml0YXRpb25fY29kZRgRIAEoCRIRCgl0aW1lX3pvbmUYEiABKAkSGAoQdGltZV96b25lX29mZnNldBgTIAEoCSKAAwoTTGlzdFdhaXRsaXN0UmVxdWVzdBIVCgRwYWdlGAEgASgFQge6SAQaAigBEhwKCXBhZ2Vfc2l6ZRgCIAEoBUIJukgGGgQYZCgBEiwKBnN0YXR1cxgDIAEoDjIXLnVzZXIudjEuV2FpdGxpc3RTdGF0dXNIAIgBARIVCg1jb250YWN0X3ZhbHVlGAQgASgJEhUKDWxhbmd1YWdlX2xpc3QYBSADKAkSIAoTZXhjbHVkZV96aF9jbl91c2VycxgGIAEoCEgBiAEBEhkKEWVtYWlsX2RvbWFpbl9saXN0GAcgAygJEhgKEGNvdW50cnlfaXNvX2xpc3QYCCADKAkSHgoWd29ya19lbWFpbF9kb21haW5fbGlzdBgJIAMoCRIjChZleGNsdWRlX2NoaW5lc2VfcmVhc29uGAogASgISAKIAQFCCQoHX3N0YXR1c0IWChRfZXhjbHVkZV96aF9jbl91c2Vyc0IZChdfZXhjbHVkZV9jaGluZXNlX3JlYXNvbiJUChRMaXN0V2FpdGxpc3RSZXNwb25zZRItCg53YWl0bGlzdF9pdGVtcxgBIAMoCzIVLnVzZXIudjEuV2FpdGxpc3RJbmZvEg0KBXRvdGFsGAIgASgDInIKG1VwZGF0ZVdhaXRsaXN0U3RhdHVzUmVxdWVzdBIzCgZzdGF0dXMYAiABKA4yFy51c2VyLnYxLldhaXRsaXN0U3RhdHVzQgq6SAeCAQQQASAAEh4KDHdhaXRsaXN0X2lkcxgDIAMoA0IIukgFkgECEGQiHgocVXBkYXRlV2FpdGxpc3RTdGF0dXNSZXNwb25zZSI5ChNHZXRBZG1pbkluZm9SZXF1ZXN0EhUKCGFkbWluX2lkGAEgASgJSACIAQFCCwoJX2FkbWluX2lkIpgCCglBZG1pbkluZm8SDwoHdXNlcl9pZBgBIAEoCRIMCgRuYW1lGAIgASgJEg0KBWVtYWlsGAMgASgJEhEKCXJvbGVfa2V5cxgEIAMoCRIOCgZhdmF0YXIYBSABKAkSMwoPbGFzdF9sb2dpbl90aW1lGAYgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIuCgpjcmVhdGVkX2F0GAcgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIrCgpleHRyYV9kYXRhGAggASgLMhcuZ29vZ2xlLnByb3RvYnVmLlN0cnVjdBIoCgtwZXJtaXNzaW9ucxgJIAMoCzITLnVzZXIudjEuUGVybWlzc2lvbiKqAQoKUGVybWlzc2lvbhImCgRyb2xlGAEgASgOMhgudXNlci52MS5QZXJtaXNzaW9uLlJvbGUSFAoMcHJvZHVjdF9uYW1lGAIgASgJEg4KBm1vZHVsZRgDIAEoCSJOCgRSb2xlEhQKEFJPTEVfVU5TUEVDSUZJRUQQABIOCgpST0xFX0FETUlOEAESDwoLUk9MRV9FRElUT1IQAhIPCgtST0xFX1ZJRVdFUhADIj4KFEdldEFkbWluSW5mb1Jlc3BvbnNlEiYKCmFkbWluX2luZm8YASABKAsyEi51c2VyLnYxLkFkbWluSW5mbyKmAQoMV2FpdGxpc3RSdWxlEicKBHR5cGUYASABKA4yGS51c2VyLnYxLldhaXRsaXN0UnVsZVR5cGUSFQoNc3RyaW5nX3ZhbHVlcxgCIAMoCRIRCglpbnRfdmFsdWUYAyABKAUSLgoKdGltZV92YWx1ZRgEIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASEwoLZmxvYXRfdmFsdWUYBSABKAEirwIKHUNyZWF0ZVdhaXRsaXN0QXV0b1Rhc2tSZXF1ZXN0Eg8KAmlkGAEgASgDSACIAQESFwoEbmFtZRgCIAEoCUIJukgGcgQQARhAEiQKBXJ1bGVzGAMgAygLMhUudXNlci52MS5XYWl0bGlzdFJ1bGUSKwoGYWN0aW9uGAQgASgOMhsudXNlci52MS5XYWl0bGlzdEF1dG9BY3Rpb24SLwoGc3RhdHVzGAUgASgOMh8udXNlci52MS5XYWl0bGlzdEF1dG9UYXNrU3RhdHVzEhUKDWFwcHJvdmFsX3JhdGUYBiABKAUSIQoZYXBwcm92YWxfaW50ZXJ2YWxfbWludXRlcxgHIAEoBRIfChdvcmRlcl9ieV9jcmVhdGVkX2F0X2FzYxgIIAEoCEIFCgNfaWQiLAoeQ3JlYXRlV2FpdGxpc3RBdXRvVGFza1Jlc3BvbnNlEgoKAmlkGAEgASgDIpwDChRXYWl0bGlzdEF1dG9UYXNrSW5mbxIKCgJpZBgBIAEoAxIMCgRuYW1lGAIgASgJEiQKBXJ1bGVzGAMgAygLMhUudXNlci52MS5XYWl0bGlzdFJ1bGUSKwoGYWN0aW9uGAQgASgOMhsudXNlci52MS5XYWl0bGlzdEF1dG9BY3Rpb24SLwoGc3RhdHVzGAUgASgOMh8udXNlci52MS5XYWl0bGlzdEF1dG9UYXNrU3RhdHVzEhUKDWFwcHJvdmFsX3JhdGUYBiABKAUSIQoZYXBwcm92YWxfaW50ZXJ2YWxfbWludXRlcxgHIAEoBRISCgpjcmVhdGVkX2J5GAggASgJEi4KCmNyZWF0ZWRfYXQYCSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEi4KCnVwZGF0ZWRfYXQYCiABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEhcKD3Byb2Nlc3NlZF9jb3VudBgLIAEoAxIfChdvcmRlcl9ieV9jcmVhdGVkX2F0X2FzYxgMIAEoCCLQAQobTGlzdFdhaXRsaXN0QXV0b1Rhc2tSZXF1ZXN0EhUKBHBhZ2UYASABKAVCB7pIBBoCKAESHAoJcGFnZV9zaXplGAIgASgFQgm6SAYaBBhkKAESNAoGc3RhdHVzGAMgASgOMh8udXNlci52MS5XYWl0bGlzdEF1dG9UYXNrU3RhdHVzSACIAQESMAoGYWN0aW9uGAQgASgOMhsudXNlci52MS5XYWl0bGlzdEF1dG9BY3Rpb25IAYgBAUIJCgdfc3RhdHVzQgkKB19hY3Rpb24iWwocTGlzdFdhaXRsaXN0QXV0b1Rhc2tSZXNwb25zZRIsCgV0YXNrcxgBIAMoCzIdLnVzZXIudjEuV2FpdGxpc3RBdXRvVGFza0luZm8SDQoFdG90YWwYAiABKAMiwwIKEVF1ZXN0aW9ubmFpcmVJbmZvEgoKAmlkGAEgASgDEg8KB3VzZXJfaWQYAiABKAkSDQoFZW1haWwYAyABKAkSDgoGcmVhc29uGAQgASgJEhIKCnByb2Zlc3Npb24YBSABKAkSHAoUc29jaWFsX21lZGlhX2FjY291bnQYBiABKAkSEAoIaW5kdXN0cnkYByABKAkSDAoEbmFtZRgIIAEoCRITCgtjb3VudHJ5X2lzbxgJIAEoCRIrCgpleHRyYV9kYXRhGAogASgLMhcuZ29vZ2xlLnByb3RvYnVmLlN0cnVjdBIuCgpjcmVhdGVkX2F0GAsgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIuCgp1cGRhdGVkX2F0GAwgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCKVAgoYTGlzdFF1ZXN0aW9ubmFpcmVSZXF1ZXN0EhUKBHBhZ2UYASABKAVCB7pIBBoCKAESHAoJcGFnZV9zaXplGAIgASgFQgm6SAYaBBhkKAESFAoHdXNlcl9pZBgDIAEoCUgAiAEBEhIKBWVtYWlsGAQgASgJSAGIAQESGQoRZW1haWxfZG9tYWluX2xpc3QYBSADKAkSFQoNbGFuZ3VhZ2VfbGlzdBgGIAMoCRIgChNleGNsdWRlX3poX2NuX3VzZXJzGAcgASgISAKIAQESGAoQY291bnRyeV9pc29fbGlzdBgIIAMoCUIKCghfdXNlcl9pZEIICgZfZW1haWxCFgoUX2V4Y2x1ZGVfemhfY25fdXNlcnMiVQoZTGlzdFF1ZXN0aW9ubmFpcmVSZXNwb25zZRIpCgVpdGVtcxgBIAMoCzIaLnVzZXIudjEuUXVlc3Rpb25uYWlyZUluZm8SDQoFdG90YWwYAiABKAMiHgocR2V0U3lzdGVtTm90aWZpY2F0aW9uUmVxdWVzdCK7AQodR2V0U3lzdGVtTm90aWZpY2F0aW9uUmVzcG9uc2USCgoCaWQYASABKAUSDwoHdmVyc2lvbhgCIAEoBRITCgthbGxvd19jbG9zZRgDIAEoCBIsCghzdGFydF9hdBgEIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASKgoGZW5kX2F0GAUgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIOCgZlbmFibGUYBiABKAgioQIKH1VwZGF0ZVN5c3RlbU5vdGlmaWNhdGlvblJlcXVlc3QSDwoCaWQYASABKAVIAIgBARIUCgd2ZXJzaW9uGAIgASgFSAGIAQESGAoLYWxsb3dfY2xvc2UYAyABKAhIAogBARIxCghzdGFydF9hdBgEIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXBIA4gBARIvCgZlbmRfYXQYBSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wSASIAQESEwoGZW5hYmxlGAYgASgISAWIAQFCBQoDX2lkQgoKCF92ZXJzaW9uQg4KDF9hbGxvd19jbG9zZUILCglfc3RhcnRfYXRCCQoHX2VuZF9hdEIJCgdfZW5hYmxlIiIKIFVwZGF0ZVN5c3RlbU5vdGlmaWNhdGlvblJlc3BvbnNlIhsKGUdldFBheW1lbnRTZXR0aW5nc1JlcXVlc3QiOAoaR2V0UGF5bWVudFNldHRpbmdzUmVzcG9uc2USGgoSZGlzYWJsaW5nX3BheW1lbnRzGAEgASgIIjoKHFVwZGF0ZVBheW1lbnRTZXR0aW5nc1JlcXVlc3QSGgoSZGlzYWJsaW5nX3BheW1lbnRzGAEgASgIIh8KHVVwZGF0ZVBheW1lbnRTZXR0aW5nc1Jlc3BvbnNlIhoKGEdldENOVGltZVpvbmVMaXN0UmVxdWVzdCJSChlHZXRDTlRpbWVab25lTGlzdFJlc3BvbnNlEhoKEmRlZmF1bHRfdGltZV96b25lcxgBIAMoCRIZChFlZGl0ZWRfdGltZV96b25lcxgCIAMoCSIxChtVcGRhdGVDTlRpbWVab25lTGlzdFJlcXVlc3QSEgoKdGltZV96b25lcxgBIAMoCSIeChxVcGRhdGVDTlRpbWVab25lTGlzdFJlc3BvbnNlIkIKHUJhbkludml0YXRpb25Db2Rlc0J5SVBSZXF1ZXN0EiEKDGlwX2FkZHJlc3NlcxgBIAMoCUILukgIkgEFCAEQ6AciTAoeQmFuSW52aXRhdGlvbkNvZGVzQnlJUFJlc3BvbnNlEhQKDGJhbm5lZF9jb2RlcxgBIAMoCRIUCgxiYW5uZWRfY291bnQYAiABKAUiFwoVR2V0SVBCbGFja2xpc3RSZXF1ZXN0Ii4KFkdldElQQmxhY2tsaXN0UmVzcG9uc2USFAoMaXBfYWRkcmVzc2VzGAEgAygJIjsKGFVwZGF0ZUlQQmxhY2tsaXN0UmVxdWVzdBIfCgxpcF9hZGRyZXNzZXMYASADKAlCCbpIBpIBAxDoByIbChlVcGRhdGVJUEJsYWNrbGlzdFJlc3BvbnNlIvwCCg9CbG9ja2VkVXNlckluZm8SCgoCaWQYASABKAMSDwoHdXNlcl9pZBgCIAEoCRIOCgZyZWFzb24YAyABKAkSDQoFZW1haWwYBCABKAkSFwoPYXBwcm92ZV91c2VyX2lkGAUgASgJEi4KCmNyZWF0ZWRfYXQYBiABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEi4KCnVwZGF0ZWRfYXQYByABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEioKDGJsb2NrZWRfdHlwZRgIIAEoDjIULnVzZXIudjEuQmxvY2tlZFR5cGUSMwoRYmxvY2tfcmVhc29uX3R5cGUYCSABKA4yGC51c2VyLnYxLkJsb2NrUmVhc29uVHlwZRImCgZzdGF0dXMYCiABKA4yFi51c2VyLnYxLkJsb2NrZWRTdGF0dXMSKwoKZXh0cmFfZGF0YRgLIAEoCzIXLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3Qi5QEKIENyZWF0ZU9yVXBkYXRlQmxvY2tlZFVzZXJSZXF1ZXN0EhgKBXVzZXJzGAEgAygJQgm6SAaSAQMQiCcSJgoGc3RhdHVzGAIgASgOMhYudXNlci52MS5CbG9ja2VkU3RhdHVzEhMKBnJlYXNvbhgDIAEoCUgAiAEBEioKDGJsb2NrZWRfdHlwZRgEIAEoDjIULnVzZXIudjEuQmxvY2tlZFR5cGUSMwoRYmxvY2tfcmVhc29uX3R5cGUYBSABKA4yGC51c2VyLnYxLkJsb2NrUmVhc29uVHlwZUIJCgdfcmVhc29uIkkKIUNyZWF0ZU9yVXBkYXRlQmxvY2tlZFVzZXJSZXNwb25zZRIVCg1zdWNjZXNzX3VzZXJzGAEgAygJEg0KBXRvdGFsGAIgASgFIqgBChdMaXN0QmxvY2tlZFVzZXJzUmVxdWVzdBIVCgRwYWdlGAEgASgFQge6SAQaAigBEhwKCXBhZ2Vfc2l6ZRgCIAEoBUIJukgGGgQYZCgBEhQKB3VzZXJfaWQYAyABKAlIAIgBARIrCgZzdGF0dXMYBCABKA4yFi51c2VyLnYxLkJsb2NrZWRTdGF0dXNIAYgBAUIKCghfdXNlcl9pZEIJCgdfc3RhdHVzIloKGExpc3RCbG9ja2VkVXNlcnNSZXNwb25zZRIvCg1ibG9ja2VkX3VzZXJzGAEgAygLMhgudXNlci52MS5CbG9ja2VkVXNlckluZm8SDQoFdG90YWwYAiABKAMiKgoXQWRtaW5HZXRVc2VySW5mb1JlcXVlc3QSDwoHdXNlcl9pZBgBIAEoCSKOAwoYQWRtaW5HZXRVc2VySW5mb1Jlc3BvbnNlEg8KB3VzZXJfaWQYASABKAkSDQoFZW1haWwYAiABKAkSEQoJZmlyc3RuYW1lGAMgASgJEhAKCGxhc3RuYW1lGAQgASgJEhMKC2Rpc3BsYXluYW1lGAUgASgJEhAKCG5pY2tuYW1lGAYgASgJEg4KBmF2YXRhchgHIAEoCRIQCghpc19hbHBoYRgIIAEoCBITCgtpbl93YWl0bGlzdBgJIAEoCBITCgt2aXBfdmVyc2lvbhgKIAEoCRIUCgx2aXBfaW50ZXJ2YWwYCyABKAkSGgoSY3VycmVudF9wZXJpb2RfZW5kGAwgASgDEhwKFGNhbmNlbF9hdF9wZXJpb2RfZW5kGA0gASgIEg8KB2lzX2JldGEYDiABKAgSGAoQcGF5bWVudF9wbGF0Zm9ybRgPIAEoCRILCgN1aWQYECABKAkSGwoTY29uY3VycmVudF9zZXNzaW9ucxgRIAEoBRIVCg1wbGF0Zm9ybV9saXN0GBIgAygJIkoKGkdldFVzZXJMb2dvZmZTdGF0dXNSZXF1ZXN0EgsKA2lkcxgBIAMoCRIMCgRwYWdlGAIgASgFEhEKCXBhZ2Vfc2l6ZRgDIAEoBSKBAQoQVXNlckxvZ29mZlN0YXR1cxIKCgJpZBgBIAEoCRINCgVlbWFpbBgCIAEoCRIjCgZzdGF0dXMYAyABKA4yEy51c2VyLnYxLlVzZXJTdGF0dXMSLQoJdXBkYXRlX2F0GAQgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCJWChtHZXRVc2VyTG9nb2ZmU3RhdHVzUmVzcG9uc2USKAoFdXNlcnMYASADKAsyGS51c2VyLnYxLlVzZXJMb2dvZmZTdGF0dXMSDQoFdG90YWwYAiABKAUibQouQmF0Y2hBZGRBY3Rpdml0eVF1ZXN0aW9ubmFpcmVQZXJtaXNzaW9uUmVxdWVzdBIsCg1hY3Rpdml0eV90eXBlGAEgASgOMhUudXNlci52MS5BY3Rpdml0eVR5cGUSDQoFdXNlcnMYAiADKAkiXgovQmF0Y2hBZGRBY3Rpdml0eVF1ZXN0aW9ubmFpcmVQZXJtaXNzaW9uUmVzcG9uc2USFgoOYWRkZWRfdXNlcl9pZHMYASADKAkSEwoLYWRkZWRfY291bnQYAiABKAUi9AEKEFJpc2tJbnRlbGxpZ2VuY2USCgoCaWQYASABKAMSDwoHdXNlcl9pZBgCIAEoCRIxCgppbnRlbF90eXBlGAMgASgOMh0udXNlci52MS5SaXNrSW50ZWxsaWdlbmNlVHlwZRISCgppbnRlbF9kYXRhGAQgASgJEi8KBnN0YXR1cxgFIAEoDjIfLnVzZXIudjEuUmlza0ludGVsbGlnZW5jZVN0YXR1cxIOCgZzb3VyY2UYBiABKAkSCwoDdGFnGAcgASgJEi4KCmNyZWF0ZWRfYXQYCCABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wIrEBChpBZGRSaXNrSW50ZWxsaWdlbmNlUmVxdWVzdBIxCgppbnRlbF90eXBlGAEgASgOMh0udXNlci52MS5SaXNrSW50ZWxsaWdlbmNlVHlwZRISCgppbnRlbF9kYXRhGAIgAygJEi8KBnN0YXR1cxgDIAEoDjIfLnVzZXIudjEuUmlza0ludGVsbGlnZW5jZVN0YXR1cxIOCgZzb3VyY2UYBCABKAkSCwoDdGFnGAUgASgJIh0KG0FkZFJpc2tJbnRlbGxpZ2VuY2VSZXNwb25zZSLeAgobTGlzdFJpc2tJbnRlbGxpZ2VuY2VSZXF1ZXN0EjYKCmludGVsX3R5cGUYASABKA4yHS51c2VyLnYxLlJpc2tJbnRlbGxpZ2VuY2VUeXBlSACIAQESNAoGc3RhdHVzGAIgASgOMh8udXNlci52MS5SaXNrSW50ZWxsaWdlbmNlU3RhdHVzSAGIAQESEwoGc291cmNlGAMgASgJSAKIAQESFAoHdXNlcl9pZBgEIAEoCUgDiAEBEhAKA3RhZxgFIAEoCUgEiAEBEhcKCmludGVsX2RhdGEYBiABKAlIBYgBARIVCgRwYWdlGAcgASgFQge6SAQaAigBEhwKCXBhZ2Vfc2l6ZRgIIAEoBUIJukgGGgQYZCgBQg0KC19pbnRlbF90eXBlQgkKB19zdGF0dXNCCQoHX3NvdXJjZUIKCghfdXNlcl9pZEIGCgRfdGFnQg0KC19pbnRlbF9kYXRhIl4KHExpc3RSaXNrSW50ZWxsaWdlbmNlUmVzcG9uc2USLwoMaW50ZWxsaWdlbmNlGAEgAygLMhkudXNlci52MS5SaXNrSW50ZWxsaWdlbmNlEg0KBXRvdGFsGAIgASgFIqUCCh1VcGRhdGVSaXNrSW50ZWxsaWdlbmNlUmVxdWVzdBIKCgJpZBgBIAEoAxI0CgZzdGF0dXMYAiABKA4yHy51c2VyLnYxLlJpc2tJbnRlbGxpZ2VuY2VTdGF0dXNIAIgBARIQCgN0YWcYAyABKAlIAYgBARITCgZzb3VyY2UYBCABKAlIAogBARIXCgppbnRlbF9kYXRhGAUgASgJSAOIAQESNgoKaW50ZWxfdHlwZRgGIAEoDjIdLnVzZXIudjEuUmlza0ludGVsbGlnZW5jZVR5cGVIBIgBARIOCgZyZWFzb24YByABKAlCCQoHX3N0YXR1c0IGCgRfdGFnQgkKB19zb3VyY2VCDQoLX2ludGVsX2RhdGFCDQoLX2ludGVsX3R5cGUiIAoeVXBkYXRlUmlza0ludGVsbGlnZW5jZVJlc3BvbnNlIjIKI0Rpc2FibGVSaXNrSW50ZWxsaWdlbmNlQnlUYWdSZXF1ZXN0EgsKA3RhZxgBIAEoCSImCiREaXNhYmxlUmlza0ludGVsbGlnZW5jZUJ5VGFnUmVzcG9uc2UqiAEKFlVwZGF0ZVVzZXJDcmVkaXRTdGF0dXMSIgoeVXBkYXRlVXNlckNyZWRpdFN0YXR1c19Vbmtub3duEAASJQohVXBkYXRlVXNlckNyZWRpdFN0YXR1c19Qcm9jZXNzaW5nEAESIwofVXBkYXRlVXNlckNyZWRpdFN0YXR1c19GaW5pc2hlZBACKpsDChNVcGRhdGVDcmVkaXRPcGVyYXRlEiUKIVVQREFURV9DUkVESVRfT1BFUkFURV9VTlNQRUNJRklFRBAAEh4KGlVQREFURV9DUkVESVRfT1BFUkFURV9HSUZUEAESIAocVVBEQVRFX0NSRURJVF9PUEVSQVRFX0RFRFVDVBACEiAKHFVQREFURV9DUkVESVRfT1BFUkFURV9DSEFSR0UQAxIeChpVUERBVEVfQ1JFRElUX09QRVJBVEVfQ09TVBAEEiIKHlVQREFURV9DUkVESVRfT1BFUkFURV9ST0xMQkFDSxAFEiMKH1VQREFURV9DUkVESVRfT1BFUkFURV9SQVRFX0dJRlQQBhIgChxVUERBVEVfQ1JFRElUX09QRVJBVEVfUkVGVU5EEAcSJQohVVBEQVRFX0NSRURJVF9PUEVSQVRFX0lOVklURV9HSUZUEAgSJAogVVBEQVRFX0NSRURJVF9PUEVSQVRFX0xJVkVfRVZFTlQQCRIhCh1VUERBVEVfQ1JFRElUX09QRVJBVEVfUkVGUkVTSBAKKoYBChRJbnZpdGF0aW9uQ29kZVN0YXR1cxImCiJJTlZJVEFUSU9OX0NPREVfU1RBVFVTX1VOU1BFQ0lGSUVEEAASIQodSU5WSVRBVElPTl9DT0RFX1NUQVRVU19BQ1RJVkUQARIjCh9JTlZJVEFUSU9OX0NPREVfU1RBVFVTX0RJU0FCTEVEEAIqigEKDldhaXRsaXN0U3RhdHVzEh8KG1dBSVRMSVNUX1NUQVRVU19VTlNQRUNJRklFRBAAEhsKF1dBSVRMSVNUX1NUQVRVU19QRU5ESU5HEAESHAoYV0FJVExJU1RfU1RBVFVTX0FQUFJPVkVEEAISHAoYV0FJVExJU1RfU1RBVFVTX1JFSkVDVEVEEAMqmgMKEFdhaXRsaXN0UnVsZVR5cGUSIgoeV0FJVExJU1RfUlVMRV9UWVBFX1VOU1BFQ0lGSUVEEAASIwofV0FJVExJU1RfUlVMRV9UWVBFX0JST1dTRVJfTEFORxABEiMKH1dBSVRMSVNUX1JVTEVfVFlQRV9FTUFJTF9ET01BSU4QAhIiCh5XQUlUTElTVF9SVUxFX1RZUEVfQ09VTlRSWV9JU08QAxIkCiBXQUlUTElTVF9SVUxFX1RZUEVfUkVBU09OX0xFTkdUSBAEEi0KKVdBSVRMSVNUX1JVTEVfVFlQRV9FWENMVURFX0NISU5FU0VfUkVBU09OEAUSKAokV0FJVExJU1RfUlVMRV9UWVBFX0VYQ0xVREVfVElNRV9aT05FEAYSJwojV0FJVExJU1RfUlVMRV9UWVBFX1JFUVVFU1RfVElNRV9HVEUQBxInCiNXQUlUTElTVF9SVUxFX1RZUEVfUkVRVUVTVF9USU1FX0xURRAIEiMKH1dBSVRMSVNUX1JVTEVfVFlQRV9BSV9TQ09SRV9HVEUQCSp9ChJXYWl0bGlzdEF1dG9BY3Rpb24SJAogV0FJVExJU1RfQVVUT19BQ1RJT05fVU5TUEVDSUZJRUQQABIgChxXQUlUTElTVF9BVVRPX0FDVElPTl9BUFBST1ZFEAESHwobV0FJVExJU1RfQVVUT19BQ1RJT05fUkVKRUNUEAIqkgEKFldhaXRsaXN0QXV0b1Rhc2tTdGF0dXMSKQolV0FJVExJU1RfQVVUT19UQVNLX1NUQVRVU19VTlNQRUNJRklFRBAAEiUKIVdBSVRMSVNUX0FVVE9fVEFTS19TVEFUVVNfRU5BQkxFRBABEiYKIldBSVRMSVNUX0FVVE9fVEFTS19TVEFUVVNfRElTQUJMRUQQAippCg1CbG9ja2VkU3RhdHVzEh4KGkJMT0NLRURfU1RBVFVTX1VOU1BFQ0lGSUVEEAASGgoWQkxPQ0tFRF9TVEFUVVNfQkxPQ0tFRBABEhwKGEJMT0NLRURfU1RBVFVTX1VOQkxPQ0tFRBACKnEKClVzZXJTdGF0dXMSGwoXVVNFUl9TVEFUVVNfVU5TUEVDSUZJRUQQABIWChJVU0VSX1NUQVRVU19BQ1RJVkUQARIWChJVU0VSX1NUQVRVU19CQU5ORUQQAhIWChJVU0VSX1NUQVRVU19MT0dPRkYQAyrTAQoUUmlza0ludGVsbGlnZW5jZVR5cGUSJgoiVVNFUl9JTlRFTExJR0VOQ0VfVFlQRV9VTlNQRUNJRklFRBAAEh0KGVVTRVJfSU5URUxMSUdFTkNFX1RZUEVfSVAQARIpCiVVU0VSX0lOVEVMTElHRU5DRV9UWVBFX0VNQUlMX1BST1ZJREVSEAISJwojVVNFUl9JTlRFTExJR0VOQ0VfVFlQRV9FTUFJTF9TVUZGSVgQAxIgChxVU0VSX0lOVEVMTElHRU5DRV9UWVBFX1BIT05FEAQqkAEKFlJpc2tJbnRlbGxpZ2VuY2VTdGF0dXMSKAokVVNFUl9JTlRFTExJR0VOQ0VfU1RBVFVTX1VOU1BFQ0lGSUVEEAASJgoiVVNFUl9JTlRFTExJR0VOQ0VfU1RBVFVTX0VGRkVDVElWRRABEiQKIFVTRVJfSU5URUxMSUdFTkNFX1NUQVRVU19JTlZBTElEEAIyjhwKEFVzZXJBZG1pblNlcnZpY2USYwoUQ3JlYXRlSW52aXRhdGlvbkNvZGUSJC51c2VyLnYxLkNyZWF0ZUludml0YXRpb25Db2RlUmVxdWVzdBolLnVzZXIudjEuQ3JlYXRlSW52aXRhdGlvbkNvZGVSZXNwb25zZRJgChNMaXN0SW52aXRhdGlvbkNvZGVzEiMudXNlci52MS5MaXN0SW52aXRhdGlvbkNvZGVzUmVxdWVzdBokLnVzZXIudjEuTGlzdEludml0YXRpb25Db2Rlc1Jlc3BvbnNlEmkKFkdldEludml0YXRpb25Db2RlVXNhZ2USJi51c2VyLnYxLkdldEludml0YXRpb25Db2RlVXNhZ2VSZXF1ZXN0GicudXNlci52MS5HZXRJbnZpdGF0aW9uQ29kZVVzYWdlUmVzcG9uc2USYwoUVXBkYXRlSW52aXRhdGlvbkNvZGUSJC51c2VyLnYxLlVwZGF0ZUludml0YXRpb25Db2RlUmVxdWVzdBolLnVzZXIudjEuVXBkYXRlSW52aXRhdGlvbkNvZGVSZXNwb25zZRJsChdHZXRJbnZpdGF0aW9uU3RhdGlzdGljcxInLnVzZXIudjEuR2V0SW52aXRhdGlvblN0YXRpc3RpY3NSZXF1ZXN0GigudXNlci52MS5HZXRJbnZpdGF0aW9uU3RhdGlzdGljc1Jlc3BvbnNlEksKDExpc3RXYWl0bGlzdBIcLnVzZXIudjEuTGlzdFdhaXRsaXN0UmVxdWVzdBodLnVzZXIudjEuTGlzdFdhaXRsaXN0UmVzcG9uc2USYwoUVXBkYXRlV2FpdGxpc3RTdGF0dXMSJC51c2VyLnYxLlVwZGF0ZVdhaXRsaXN0U3RhdHVzUmVxdWVzdBolLnVzZXIudjEuVXBkYXRlV2FpdGxpc3RTdGF0dXNSZXNwb25zZRJpChZDcmVhdGVXYWl0bGlzdEF1dG9UYXNrEiYudXNlci52MS5DcmVhdGVXYWl0bGlzdEF1dG9UYXNrUmVxdWVzdBonLnVzZXIudjEuQ3JlYXRlV2FpdGxpc3RBdXRvVGFza1Jlc3BvbnNlEmMKFExpc3RXYWl0bGlzdEF1dG9UYXNrEiQudXNlci52MS5MaXN0V2FpdGxpc3RBdXRvVGFza1JlcXVlc3QaJS51c2VyLnYxLkxpc3RXYWl0bGlzdEF1dG9UYXNrUmVzcG9uc2USWgoRTGlzdFF1ZXN0aW9ubmFpcmUSIS51c2VyLnYxLkxpc3RRdWVzdGlvbm5haXJlUmVxdWVzdBoiLnVzZXIudjEuTGlzdFF1ZXN0aW9ubmFpcmVSZXNwb25zZRJmChVHZXRTeXN0ZW1Ob3RpZmljYXRpb24SJS51c2VyLnYxLkdldFN5c3RlbU5vdGlmaWNhdGlvblJlcXVlc3QaJi51c2VyLnYxLkdldFN5c3RlbU5vdGlmaWNhdGlvblJlc3BvbnNlEm8KGFVwZGF0ZVN5c3RlbU5vdGlmaWNhdGlvbhIoLnVzZXIudjEuVXBkYXRlU3lzdGVtTm90aWZpY2F0aW9uUmVxdWVzdBopLnVzZXIudjEuVXBkYXRlU3lzdGVtTm90aWZpY2F0aW9uUmVzcG9uc2USXQoSR2V0UGF5bWVudFNldHRpbmdzEiIudXNlci52MS5HZXRQYXltZW50U2V0dGluZ3NSZXF1ZXN0GiMudXNlci52MS5HZXRQYXltZW50U2V0dGluZ3NSZXNwb25zZRJmChVVcGRhdGVQYXltZW50U2V0dGluZ3MSJS51c2VyLnYxLlVwZGF0ZVBheW1lbnRTZXR0aW5nc1JlcXVlc3QaJi51c2VyLnYxLlVwZGF0ZVBheW1lbnRTZXR0aW5nc1Jlc3BvbnNlEloKEUdldENOVGltZVpvbmVMaXN0EiEudXNlci52MS5HZXRDTlRpbWVab25lTGlzdFJlcXVlc3QaIi51c2VyLnYxLkdldENOVGltZVpvbmVMaXN0UmVzcG9uc2USYwoUVXBkYXRlQ05UaW1lWm9uZUxpc3QSJC51c2VyLnYxLlVwZGF0ZUNOVGltZVpvbmVMaXN0UmVxdWVzdBolLnVzZXIudjEuVXBkYXRlQ05UaW1lWm9uZUxpc3RSZXNwb25zZRJpChZCYW5JbnZpdGF0aW9uQ29kZXNCeUlQEiYudXNlci52MS5CYW5JbnZpdGF0aW9uQ29kZXNCeUlQUmVxdWVzdBonLnVzZXIudjEuQmFuSW52aXRhdGlvbkNvZGVzQnlJUFJlc3BvbnNlElEKDkdldElQQmxhY2tsaXN0Eh4udXNlci52MS5HZXRJUEJsYWNrbGlzdFJlcXVlc3QaHy51c2VyLnYxLkdldElQQmxhY2tsaXN0UmVzcG9uc2USWgoRVXBkYXRlSVBCbGFja2xpc3QSIS51c2VyLnYxLlVwZGF0ZUlQQmxhY2tsaXN0UmVxdWVzdBoiLnVzZXIudjEuVXBkYXRlSVBCbGFja2xpc3RSZXNwb25zZRJRCg5MaXN0VXNlckNyZWRpdBIeLnVzZXIudjEuTGlzdFVzZXJDcmVkaXRSZXF1ZXN0Gh8udXNlci52MS5MaXN0VXNlckNyZWRpdFJlc3BvbnNlElcKEFVwZGF0ZVVzZXJDcmVkaXQSIC51c2VyLnYxLlVwZGF0ZVVzZXJDcmVkaXRSZXF1ZXN0GiEudXNlci52MS5VcGRhdGVVc2VyQ3JlZGl0UmVzcG9uc2USdQoaTG9vcFVwZGF0ZVVzZXJDcmVkaXRTdGF0dXMSKi51c2VyLnYxLkxvb3BVcGRhdGVVc2VyQ3JlZGl0U3RhdHVzUmVxdWVzdBorLnVzZXIudjEuTG9vcFVwZGF0ZVVzZXJDcmVkaXRTdGF0dXNSZXNwb25zZRJjChRMaXN0VXNlckNyZWRpdFJlY29yZBIkLnVzZXIudjEuTGlzdFVzZXJDcmVkaXRSZWNvcmRSZXF1ZXN0GiUudXNlci52MS5MaXN0VXNlckNyZWRpdFJlY29yZFJlc3BvbnNlElcKEExpc3RCbG9ja2VkVXNlcnMSIC51c2VyLnYxLkxpc3RCbG9ja2VkVXNlcnNSZXF1ZXN0GiEudXNlci52MS5MaXN0QmxvY2tlZFVzZXJzUmVzcG9uc2UScgoZQ3JlYXRlT3JVcGRhdGVCbG9ja2VkVXNlchIpLnVzZXIudjEuQ3JlYXRlT3JVcGRhdGVCbG9ja2VkVXNlclJlcXVlc3QaKi51c2VyLnYxLkNyZWF0ZU9yVXBkYXRlQmxvY2tlZFVzZXJSZXNwb25zZRJLCgxHZXRVc2VyUXVvdGESHC51c2VyLnYxLkdldFVzZXJRdW90YVJlcXVlc3QaHS51c2VyLnYxLkdldFVzZXJRdW90YVJlc3BvbnNlElkKEEFkbWluR2V0VXNlckluZm8SIC51c2VyLnYxLkFkbWluR2V0VXNlckluZm9SZXF1ZXN0GiEudXNlci52MS5BZG1pbkdldFVzZXJJbmZvUmVzcG9uc2UiABJgChNHZXRVc2VyTG9nb2ZmU3RhdHVzEiMudXNlci52MS5HZXRVc2VyTG9nb2ZmU3RhdHVzUmVxdWVzdBokLnVzZXIudjEuR2V0VXNlckxvZ29mZlN0YXR1c1Jlc3BvbnNlEkEKCExpc3RVc2VyEhgudXNlci52MS5MaXN0VXNlclJlcXVlc3QaGS51c2VyLnYxLkxpc3RVc2VyUmVzcG9uc2UiABJTCg5MaXN0VXNlclZpcExvZxIeLnVzZXIudjEuTGlzdFVzZXJWaXBMb2dSZXF1ZXN0Gh8udXNlci52MS5MaXN0VXNlclZpcExvZ1Jlc3BvbnNlIgASTQoMQWRtaW5HaWZ0VmlwEhwudXNlci52MS5BZG1pbkdpZnRWaXBSZXF1ZXN0Gh0udXNlci52MS5BZG1pbkdpZnRWaXBSZXNwb25zZSIAEp4BCidCYXRjaEFkZEFjdGl2aXR5UXVlc3Rpb25uYWlyZVBlcm1pc3Npb24SNy51c2VyLnYxLkJhdGNoQWRkQWN0aXZpdHlRdWVzdGlvbm5haXJlUGVybWlzc2lvblJlcXVlc3QaOC51c2VyLnYxLkJhdGNoQWRkQWN0aXZpdHlRdWVzdGlvbm5haXJlUGVybWlzc2lvblJlc3BvbnNlIgASYgoTQWRkUmlza0ludGVsbGlnZW5jZRIjLnVzZXIudjEuQWRkUmlza0ludGVsbGlnZW5jZVJlcXVlc3QaJC51c2VyLnYxLkFkZFJpc2tJbnRlbGxpZ2VuY2VSZXNwb25zZSIAEmUKFExpc3RSaXNrSW50ZWxsaWdlbmNlEiQudXNlci52MS5MaXN0Umlza0ludGVsbGlnZW5jZVJlcXVlc3QaJS51c2VyLnYxLkxpc3RSaXNrSW50ZWxsaWdlbmNlUmVzcG9uc2UiABJrChZVcGRhdGVSaXNrSW50ZWxsaWdlbmNlEiYudXNlci52MS5VcGRhdGVSaXNrSW50ZWxsaWdlbmNlUmVxdWVzdBonLnVzZXIudjEuVXBkYXRlUmlza0ludGVsbGlnZW5jZVJlc3BvbnNlIgASfQocRGlzYWJsZVJpc2tJbnRlbGxpZ2VuY2VCeVRhZxIsLnVzZXIudjEuRGlzYWJsZVJpc2tJbnRlbGxpZ2VuY2VCeVRhZ1JlcXVlc3QaLS51c2VyLnYxLkRpc2FibGVSaXNrSW50ZWxsaWdlbmNlQnlUYWdSZXNwb25zZSIAQpUBCgtjb20udXNlci52MUIOVXNlckFkbWluUHJvdG9QAVo5Z2l0bGFiLm1vbmljYS5jbi92aWRhL3Nkay9iaXpzZXJ2ZXItZ28uZ2l0L3VzZXIvdjE7dXNlcnYxogIDVVhYqgIHVXNlci5WMcoCB1VzZXJcVjHiAhNVc2VyXFYxXEdQQk1ldGFkYXRh6gIIVXNlcjo6VjFiBnByb3RvMw",[Ye,He,te,Wr]),x2=M(J2,0),Ks=z("Chp1c2VyL3YxL3N1YnNjcmlwdGlvbi5wcm90bxIHdXNlci52MSJECh1Mb29wVGVhbVVwZ3JhZGVTdGF0dXNSZXNwb25zZRIjCgZzdGF0dXMYASABKA4yEy51c2VyLnYxLkxvb3BTdGF0dXMiRAocTG9vcFRlYW1VcGdyYWRlU3RhdHVzUmVxdWVzdBIQCgh0ZWFtX3VpZBgBIAEoCRISCgppbnZvaWNlX2lkGAIgASgJIkAKD1ByZXZpZXdSZXNwb25zZRIRCglzdWJfdG90YWwYASABKAkSCwoDdGF4GAIgASgJEg0KBXRvdGFsGAMgASgJIjUKDlByZXZpZXdSZXF1ZXN0EiMKCHBsYW5fa2V5GAEgASgOMhEudXNlci52MS5QbGFuX0tleSIQCg5VcGRhdGVSZXNwb25zZSI0Cg1VcGRhdGVSZXF1ZXN0EiMKCHBsYW5fa2V5GAEgASgOMhEudXNlci52MS5QbGFuX0tleSJWCh1UZWFtU3Vic2NyaXB0aW9uVXBkYXRlUmVxdWVzdBIjCghwbGFuX2tleRgBIAEoDjIRLnVzZXIudjEuUGxhbl9LZXkSEAoIcXVhbnRpdHkYAiABKAUiSAoeVGVhbVN1YnNjcmlwdGlvblVwZGF0ZVJlc3BvbnNlEhIKCklzX3VwZ3JhZGUYASABKAgSEgoKaW52b2ljZV9pZBgCIAEoCSJXCh5UZWFtU3Vic2NyaXB0aW9uUHJldmlld1JlcXVlc3QSIwoIcGxhbl9rZXkYASABKA4yES51c2VyLnYxLlBsYW5fS2V5EhAKCHF1YW50aXR5GAIgASgFIqwBCh9UZWFtU3Vic2NyaXB0aW9uUHJldmlld1Jlc3BvbnNlEhEKCXN1Yl90b3RhbBgBIAEoCRILCgN0YXgYAiABKAkSDQoFdG90YWwYAyABKAkSHAoUbmV4dF9wYXltZW50X2F0dGVtcHQYBCABKAMSFgoObmV4dF9zdWJfdG90YWwYBSABKAkSEAoIbmV4dF90YXgYBiABKAkSEgoKbmV4dF90b3RhbBgHIAEoCSJzCg9DaGVja291dFJlcXVlc3QSIwoIcGxhbl9rZXkYASABKA4yES51c2VyLnYxLlBsYW5fS2V5EhIKCmNhbmNlbF91cmwYAiABKAkSEwoLc3VjY2Vzc191cmwYAyABKAkSEgoKbW90aXZhdGlvbhgEIAEoCSI8ChBDaGVja291dFJlc3BvbnNlEhIKCnNlc3Npb25faWQYASABKAkSFAoMY2hlY2tvdXRfdXJsGAIgASgJIpMBCh9UZWFtU3Vic2NyaXB0aW9uQ2hlY2tvdXRSZXF1ZXN0EhAKCHRlYW1fdWlkGAEgASgJEiMKCHBsYW5fa2V5GAIgASgOMhEudXNlci52MS5QbGFuX0tleRIQCghxdWFudGl0eRgDIAEoBRISCgpjYW5jZWxfdXJsGAQgASgJEhMKC3N1Y2Nlc3NfdXJsGAUgASgJIkwKIFRlYW1TdWJzY3JpcHRpb25DaGVja291dFJlc3BvbnNlEhIKCnNlc3Npb25faWQYASABKAkSFAoMY2hlY2tvdXRfdXJsGAIgASgJIk4KDUNhbmNlbFJlcXVlc3QSLAoNY2FuY2VsX3JlYXNvbhgBIAEoDjIVLnVzZXIudjEuQ2FuY2VsUmVhc29uEg8KB2NvbW1lbnQYAiABKAkiEAoOQ2FuY2VsUmVzcG9uc2UiDwoNUmVzdW1lUmVxdWVzdCIQCg5SZXN1bWVSZXNwb25zZSIiCgxRdWVyeVJlcXVlc3QSEgoKc2Vzc2lvbl9pZBgBIAEoCSI6Cg1RdWVyeVJlc3BvbnNlEhcKD3N1YnNjcmlwdGlvbl9pZBgBIAEoCRIQCgh0ZWFtX3VpZBgCIAEoCSIUChJCaWxsaW5nUGFnZVJlcXVlc3QiIgoTQmlsbGluZ1BhZ2VSZXNwb25zZRILCgN1cmwYASABKAkiIAoeUmV2ZW51ZWNhdFN5bmNDdXN0b21lclJlcXVlc3RfIiEKH1JldmVudWVjYXRTeW5jQ3VzdG9tZXJSZXNwb25zZV8qbgoKTG9vcFN0YXR1cxIWChJMb29wU3RhdHVzX1Vua25vd24QABIZChVMb29wU3RhdHVzX1Byb2Nlc3NpbmcQARIWChJMb29wU3RhdHVzX1N1Y2Nlc3MQAhIVChFMb29wU3RhdHVzX0ZhaWxlZBADKoUCCghQbGFuX0tleRILCgdVTktOT1dOEAASDwoLUFJPX01PTlRITFkQARISCg5DQVNVQUxfTU9OVEhMWRACEg4KClBST19ZRUFSTFkQAxIRCg1DQVNVQUxfWUVBUkxZEAQSEAoMTElURV9NT05USExZEAUSDwoLTElURV9ZRUFSTFkQBhIQCgxDUkVESVRTXzIwMDAQZRIRCg1DUkVESVRTXzEwMDAwEGYSEQoNQ1JFRElUU18xOTkwMBBnEhEKDFRFQU1fTU9OVEhMWRDJARIQCgtURUFNX1lFQVJMWRDKARIPCgpURUFNX0FERE9OEMsBEhMKDlRFQU1fREVEVUNUSU9OEMwBKsoCCgxDYW5jZWxSZWFzb24SGAoUQ2FuY2VsUmVhc29uX1Vua25vd24QABIdChlDYW5jZWxSZWFzb25fVG9vRXhwZW5zaXZlEAESHwobQ2FuY2VsUmVhc29uX05vTG9uZ2VyTmVlZEl0EAISIwofQ2FuY2VsUmVhc29uX0ZvdW5kQW5BbHRlcm5hdGl2ZRADEh8KG0NhbmNlbFJlYXNvbl9EaWZmaWN1bHRUb1VzZRAEEiYKIkNhbmNlbFJlYXNvbl9EaWRudE1lZXRFeHBlY3RhdGlvbnMQBRIcChhDYW5jZWxSZWFzb25fT3RoZXJSZWFzb24QBhIvCitDYW5jZWxSZWFzb25fU3RpbGxEZWNpZGluZ0F2b2lkaW5nQXV0b1JlbmV3EAcSIwofQ2FuY2VsUmVhc29uX0RhdGFQcml2YWN5Q29uY2VybhAIMv4HChNTdWJzY3JpcHRpb25TZXJ2aWNlEjgKBVF1ZXJ5EhUudXNlci52MS5RdWVyeVJlcXVlc3QaFi51c2VyLnYxLlF1ZXJ5UmVzcG9uc2UiABI7CgZVcGRhdGUSFi51c2VyLnYxLlVwZGF0ZVJlcXVlc3QaFy51c2VyLnYxLlVwZGF0ZVJlc3BvbnNlIgASPgoHUHJldmlldxIXLnVzZXIudjEuUHJldmlld1JlcXVlc3QaGC51c2VyLnYxLlByZXZpZXdSZXNwb25zZSIAEkEKCENoZWNrb3V0EhgudXNlci52MS5DaGVja291dFJlcXVlc3QaGS51c2VyLnYxLkNoZWNrb3V0UmVzcG9uc2UiABJxChhUZWFtU3Vic2NyaXB0aW9uQ2hlY2tvdXQSKC51c2VyLnYxLlRlYW1TdWJzY3JpcHRpb25DaGVja291dFJlcXVlc3QaKS51c2VyLnYxLlRlYW1TdWJzY3JpcHRpb25DaGVja291dFJlc3BvbnNlIgASawoWVGVhbVN1YnNjcmlwdGlvblVwZGF0ZRImLnVzZXIudjEuVGVhbVN1YnNjcmlwdGlvblVwZGF0ZVJlcXVlc3QaJy51c2VyLnYxLlRlYW1TdWJzY3JpcHRpb25VcGRhdGVSZXNwb25zZSIAEm4KF1RlYW1TdWJzY3JpcHRpb25QcmV2aWV3EicudXNlci52MS5UZWFtU3Vic2NyaXB0aW9uUHJldmlld1JlcXVlc3QaKC51c2VyLnYxLlRlYW1TdWJzY3JpcHRpb25QcmV2aWV3UmVzcG9uc2UiABI7CgZDYW5jZWwSFi51c2VyLnYxLkNhbmNlbFJlcXVlc3QaFy51c2VyLnYxLkNhbmNlbFJlc3BvbnNlIgASOwoGUmVzdW1lEhYudXNlci52MS5SZXN1bWVSZXF1ZXN0GhcudXNlci52MS5SZXN1bWVSZXNwb25zZSIAEkoKC0JpbGxpbmdQYWdlEhsudXNlci52MS5CaWxsaW5nUGFnZVJlcXVlc3QaHC51c2VyLnYxLkJpbGxpbmdQYWdlUmVzcG9uc2UiABJtChZSZXZlbnVlY2F0U3luY0N1c3RvbWVyEicudXNlci52MS5SZXZlbnVlY2F0U3luY0N1c3RvbWVyUmVxdWVzdF8aKC51c2VyLnYxLlJldmVudWVjYXRTeW5jQ3VzdG9tZXJSZXNwb25zZV8iABJoChVMb29wVGVhbVVwZ3JhZGVTdGF0dXMSJS51c2VyLnYxLkxvb3BUZWFtVXBncmFkZVN0YXR1c1JlcXVlc3QaJi51c2VyLnYxLkxvb3BUZWFtVXBncmFkZVN0YXR1c1Jlc3BvbnNlIgBCmAEKC2NvbS51c2VyLnYxQhFTdWJzY3JpcHRpb25Qcm90b1ABWjlnaXRsYWIubW9uaWNhLmNuL3ZpZGEvc2RrL2JpenNlcnZlci1nby5naXQvdXNlci92MTt1c2VydjGiAgNVWFiqAgdVc2VyLlYxygIHVXNlclxWMeICE1VzZXJcVjFcR1BCTWV0YWRhdGHqAghVc2VyOjpWMWIGcHJvdG8z"),w2=M(Ks,0),k2=z("Chl1c2VyL3YxL3VzZXJfcHVibGljLnByb3RvEgd1c2VyLnYxInwKF0dldEV4Y2hhbmdlSW5mb1Jlc3BvbnNlEi8KDWFkZG9uX2NyZWRpdHMYASADKAsyGC51c2VyLnYxLkFkZG9uQ3JlZGl0SW5mbxIwCg1zdWJzY3JpcHRpb25zGAIgAygLMhkudXNlci52MS5TdWJzY3JpcHRpb25JbmZvImsKEFN1YnNjcmlwdGlvbkluZm8SHwoEcGxhbhgBIAEoDjIRLnVzZXIudjEuUGxhbl9LZXkSDQoFcHJpY2UYAiABKAUSFgoOZGlzY291bnRfcHJpY2UYAyABKAUSDwoHY3JlZGl0cxgEIAEoBSJSCg9BZGRvbkNyZWRpdEluZm8SHwoEcGxhbhgBIAEoDjIRLnVzZXIudjEuUGxhbl9LZXkSDQoFcHJpY2UYAiABKAUSDwoHY3JlZGl0cxgDIAEoBSIYChZHZXRFeGNoYW5nZUluZm9SZXF1ZXN0IvICChNKb2luV2FpdGxpc3RSZXF1ZXN0EioKBWVtYWlsGAEgASgJQhu6SBhyFjIUXlteQF0rQFteQF0rXC5bXkBdKyQSDgoGcmVhc29uGAIgASgJEisKCmV4dHJhX2RhdGEYAyABKAsyFy5nb29nbGUucHJvdG9idWYuU3RydWN0Eh0KFWNmX2NoYWxsZW5nZV9yZXNwb25zZRgEIAEoCRIjChtoY2FwdGNoYV9jaGFsbGVuZ2VfcmVzcG9uc2UYBSABKAkSFwoKd29ya19lbWFpbBgGIAEoCUgAiAEBEhcKCnByb2Zlc3Npb24YByABKAlIAYgBARIhChRzb2NpYWxfbWVkaWFfYWNjb3VudBgIIAEoCUgCiAEBEhUKCGluZHVzdHJ5GAkgASgJSAOIAQFCDQoLX3dvcmtfZW1haWxCDQoLX3Byb2Zlc3Npb25CFwoVX3NvY2lhbF9tZWRpYV9hY2NvdW50QgsKCV9pbmR1c3RyeSJPChRKb2luV2FpdGxpc3RSZXNwb25zZRIVCg1hdXRvX2FwcHJvdmVkGAEgASgIEhQKB29yZ191aWQYAiABKAlIAIgBAUIKCghfb3JnX3VpZCJtChFTdGFydE9hdXRoUmVxdWVzdBIZCgZpZHBfaWQYAiABKAlCCbpIBnIEEAEYIBIfCgtzdWNjZXNzX3VybBgDIAEoCUIKukgHcgUQARiACBIcCghmYWlsX3VybBgEIAEoCUIKukgHcgUQARiACCIhChJTdGFydE9hdXRoUmVzcG9uc2USCwoDdXJsGAEgASgJInMKE09hdXRoU3VjY2Vzc1JlcXVlc3QSCgoCaWQYASABKAkSDQoFdG9rZW4YAiABKAkSDwoHdXNlcl9pZBgDIAEoCRIcCg9hdXRoX3JlcXVlc3RfaWQYBCABKAlIAIgBAUISChBfYXV0aF9yZXF1ZXN0X2lkIiUKFE9hdXRoU3VjY2Vzc1Jlc3BvbnNlEg0KBXRva2VuGAEgASgJIkAKCkF0dGFjaG1lbnQSEQoJZmlsZV9uYW1lGAEgASgJEhEKCW1pbWVfdHlwZRgCIAEoCRIMCgRkYXRhGAMgASgJIpECChVTdWJtaXRGZWVkYmFja1JlcXVlc3QSIwoEdHlwZRgBIAEoDjIVLnVzZXIudjEuRmVlZGJhY2tUeXBlEg0KBXRpdGxlGAIgASgJEhsKB2NvbnRlbnQYAyABKAlCCrpIB3IFEAEYkE4SKgoFZW1haWwYBCABKAlCG7pIGHIWMhReW15AXStAW15AXStcLlteQF0rJBINCgVyZWZlchgFIAEoCRIVCg1vcmlnaW5fZG9tYWluGAYgASgJEisKCmV4dHJhX2RhdGEYByABKAsyFy5nb29nbGUucHJvdG9idWYuU3RydWN0EigKC2F0dGFjaG1lbnRzGAggAygLMhMudXNlci52MS5BdHRhY2htZW50Ii0KFlN1Ym1pdEZlZWRiYWNrUmVzcG9uc2USEwoLZmVlZGJhY2tfaWQYASABKAMifAodUHJlQ2hlY2tJbnZpdGF0aW9uQ29kZVJlcXVlc3QSFwoEY29kZRgBIAEoCUIJukgGcgQQBhggEh0KFWNmX2NoYWxsZW5nZV9yZXNwb25zZRgCIAEoCRIjChtoY2FwdGNoYV9jaGFsbGVuZ2VfcmVzcG9uc2UYAyABKAkiIAoeUHJlQ2hlY2tJbnZpdGF0aW9uQ29kZVJlc3BvbnNlIhQKEkNoZWNrUmVnaW9uUmVxdWVzdCJjChNDaGVja1JlZ2lvblJlc3BvbnNlEhYKDmlzX3Vuc3VwcG9ydGVkGAEgASgIEhkKEWlzX3Vuc3VwcG9ydGVkX3YyGAIgASgIEgsKA2lzbxgDIAEoCRIMCgRjb2RlGAQgASgJIjsKIUNoZWNrSW52aXRhdGlvbkNvZGVSZW1haW5zUmVxdWVzdBIWCg5pbnZpdGVfY29kZV9pZBgBIAEoCSLwAQoiQ2hlY2tJbnZpdGF0aW9uQ29kZVJlbWFpbnNSZXNwb25zZRIQCghtYXhfdXNlcxgBIAEoAxIPCgdyZW1haW5zGAIgASgDEg4KBnJlbWFyaxgDIAEoCRIMCgRraW5kGAQgASgFEhEKCXVzZXJfbmFtZRgFIAEoCRIWCg5lZHVfZW1haWxfbGlzdBgHIAMoCRIQCghlZHVfbmFtZRgIIAEoCRIXCg9lZHVfdW5pcXVlX25hbWUYCSABKAkSGQoRcmVjb21tZW5kX2NyZWRpdHMYCiABKAUSGAoQcmVnaXN0ZXJfY3JlZGl0cxgLIAEoBSIaChhHZXRHbG9iYWxTZXR0aW5nc1JlcXVlc3QinQEKD0dsb2JhbEVycm9ySW5mbxIKCgJpZBgBIAEoBRIPCgd2ZXJzaW9uGAIgASgFEhMKC2FsbG93X2Nsb3NlGAMgASgIEiwKCHN0YXJ0X2F0GAQgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIqCgZlbmRfYXQYBSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wImcKGUdldEdsb2JhbFNldHRpbmdzUmVzcG9uc2USGgoSZGlzYWJsaW5nX3BheW1lbnRzGAEgASgIEi4KDGdsb2JhbF9lcnJvchgCIAEoCzIYLnVzZXIudjEuR2xvYmFsRXJyb3JJbmZvIloKHlZlcmlmeU9yZ2FuaXphdGlvbkVtYWlsUmVxdWVzdBISCgVlbWFpbBgCIAEoCUgAiAEBEhEKBGNvZGUYAyABKAlIAYgBAUIICgZfZW1haWxCBwoFX2NvZGUiXgofVmVyaWZ5T3JnYW5pemF0aW9uRW1haWxSZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIEgsKA21zZxgCIAEoCRIPCgdvcmdfdWlkGAMgASgJEgwKBGNvZGUYBCABKAUiVAojR2V0Q2FtcHVzSW52aXRhdGlvbkNvZGVVc2FnZVJlcXVlc3QSDAoEcGFnZRgBIAEoBRIRCglwYWdlX3NpemUYAiABKAUSDAoEY29kZRgDIAEoCSK2AQokR2V0Q2FtcHVzSW52aXRhdGlvbkNvZGVVc2FnZVJlc3BvbnNlEi8KBGNvZGUYASABKAsyIS51c2VyLnYxLkNhbXB1c0ludml0YXRpb25Db2RlSW5mbxI4CglyZWxhdGlvbnMYAiADKAsyJS51c2VyLnYxLkNhbXB1c0ludml0YXRpb25SZWxhdGlvbkluZm8SDQoFdG90YWwYAyABKAUSFAoMdG90YWxfZWFybmVkGAQgASgFIqsCChhDYW1wdXNJbnZpdGF0aW9uQ29kZUluZm8SCgoCaWQYASABKAMSDwoHdXNlcl9pZBgCIAEoCRITCgtpbnZpdGVfY29kZRgDIAEoCRIpCgRraW5kGAQgASgOMhsudXNlci52MS5JbnZpdGF0aW9uQ29kZUtpbmQSFAoMaXNfYWN0aXZhdGVkGAUgASgIEhAKCG1heF91c2VzGAYgASgFEhIKCnVzZWRfY291bnQYByABKAUSEgoKY3JlYXRlZF9ieRgIIAEoCRIuCgpjcmVhdGVkX2F0GAkgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBILCgN0YWcYCiABKAkSDgoGcmVtYXJrGAsgASgJEhUKDWZpc3Npb25fY291bnQYDCABKAUihAIKHENhbXB1c0ludml0YXRpb25SZWxhdGlvbkluZm8SCgoCaWQYASABKAMSEgoKaW52aXRlcl9pZBgCIAEoCRIVCg1pbnZpdGVlX2VtYWlsGAMgASgJEhMKC2ludml0ZV9jb2RlGAQgASgJEjcKBnN0YXR1cxgFIAEoDjInLnVzZXIudjEuQ2FtcHVzSW52aXRhdGlvblJlbGF0aW9uU3RhdHVzEi4KCmNyZWF0ZWRfYXQYBiABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEi8KC2FjY2VwdGVkX2F0GAcgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCI5CihTZW5kQ2FtcHVzRW1haWxWZXJpZnlDb2RlV2l0aEF1dGhSZXF1ZXN0Eg0KBWVtYWlsGAIgASgJIkkKKVNlbmRDYW1wdXNFbWFpbFZlcmlmeUNvZGVXaXRoQXV0aFJlc3BvbnNlEg8KB3N1Y2Nlc3MYASABKAgSCwoDbXNnGAIgASgJKqYCCgxGZWVkYmFja1R5cGUSHQoZRkVFREJBQ0tfVFlQRV9VTlNQRUNJRklFRBAAEhUKEUZFRURCQUNLX1RZUEVfQlVHEAESKAokRkVFREJBQ0tfVFlQRV9GRUFUVVJFX1ZJUF9PUl9QQVlNRU5UEAISHwobRkVFREJBQ0tfVFlQRV9BQ0NPVU5UX0lTU1VFEAMSHAoYRkVFREJBQ0tfVFlQRV9URUFNX0lTU1VFEAQSIgoeRkVFREJBQ0tfVFlQRV9TTVNfVkVSSUZJQ0FUSU9OEAUSIQodRkVFREJBQ0tfVFlQRV9GRUFUVVJFX1JFUVVFU1QQBhIXChNGRUVEQkFDS19UWVBFX09USEVSEAcSFwoTRkVFREJBQ0tfVFlQRV9FTUFJTBAIKjsKHkNhbXB1c0ludml0YXRpb25SZWxhdGlvblN0YXR1cxILCgdQRU5ESU5HEAASDAoIQWNjZXB0ZWQQATKXCQoRVXNlclB1YmxpY1NlcnZpY2USSwoMSm9pbldhaXRsaXN0EhwudXNlci52MS5Kb2luV2FpdGxpc3RSZXF1ZXN0Gh0udXNlci52MS5Kb2luV2FpdGxpc3RSZXNwb25zZRJFCgpTdGFydE9hdXRoEhoudXNlci52MS5TdGFydE9hdXRoUmVxdWVzdBobLnVzZXIudjEuU3RhcnRPYXV0aFJlc3BvbnNlEksKDE9hdXRoU3VjY2VzcxIcLnVzZXIudjEuT2F1dGhTdWNjZXNzUmVxdWVzdBodLnVzZXIudjEuT2F1dGhTdWNjZXNzUmVzcG9uc2USUQoOU3VibWl0RmVlZGJhY2sSHi51c2VyLnYxLlN1Ym1pdEZlZWRiYWNrUmVxdWVzdBofLnVzZXIudjEuU3VibWl0RmVlZGJhY2tSZXNwb25zZRJpChZQcmVDaGVja0ludml0YXRpb25Db2RlEiYudXNlci52MS5QcmVDaGVja0ludml0YXRpb25Db2RlUmVxdWVzdBonLnVzZXIudjEuUHJlQ2hlY2tJbnZpdGF0aW9uQ29kZVJlc3BvbnNlEkgKC0NoZWNrUmVnaW9uEhsudXNlci52MS5DaGVja1JlZ2lvblJlcXVlc3QaHC51c2VyLnYxLkNoZWNrUmVnaW9uUmVzcG9uc2USdQoaQ2hlY2tJbnZpdGF0aW9uQ29kZVJlbWFpbnMSKi51c2VyLnYxLkNoZWNrSW52aXRhdGlvbkNvZGVSZW1haW5zUmVxdWVzdBorLnVzZXIudjEuQ2hlY2tJbnZpdGF0aW9uQ29kZVJlbWFpbnNSZXNwb25zZRJaChFHZXRHbG9iYWxTZXR0aW5ncxIhLnVzZXIudjEuR2V0R2xvYmFsU2V0dGluZ3NSZXF1ZXN0GiIudXNlci52MS5HZXRHbG9iYWxTZXR0aW5nc1Jlc3BvbnNlElQKD0dldEV4Y2hhbmdlSW5mbxIfLnVzZXIudjEuR2V0RXhjaGFuZ2VJbmZvUmVxdWVzdBogLnVzZXIudjEuR2V0RXhjaGFuZ2VJbmZvUmVzcG9uc2USZgoRVmVyaWZ5Q2FtcHVzRW1haWwSJy51c2VyLnYxLlZlcmlmeU9yZ2FuaXphdGlvbkVtYWlsUmVxdWVzdBooLnVzZXIudjEuVmVyaWZ5T3JnYW5pemF0aW9uRW1haWxSZXNwb25zZRJ7ChxHZXRDYW1wdXNJbnZpdGF0aW9uQ29kZVVzYWdlEiwudXNlci52MS5HZXRDYW1wdXNJbnZpdGF0aW9uQ29kZVVzYWdlUmVxdWVzdBotLnVzZXIudjEuR2V0Q2FtcHVzSW52aXRhdGlvbkNvZGVVc2FnZVJlc3BvbnNlEooBCiFTZW5kQ2FtcHVzRW1haWxWZXJpZnlDb2RlV2l0aEF1dGgSMS51c2VyLnYxLlNlbmRDYW1wdXNFbWFpbFZlcmlmeUNvZGVXaXRoQXV0aFJlcXVlc3QaMi51c2VyLnYxLlNlbmRDYW1wdXNFbWFpbFZlcmlmeUNvZGVXaXRoQXV0aFJlc3BvbnNlQpYBCgtjb20udXNlci52MUIPVXNlclB1YmxpY1Byb3RvUAFaOWdpdGxhYi5tb25pY2EuY24vdmlkYS9zZGsvYml6c2VydmVyLWdvLmdpdC91c2VyL3YxO3VzZXJ2MaICA1VYWKoCB1VzZXIuVjHKAgdVc2VyXFYx4gITVXNlclxWMVxHUEJNZXRhZGF0YeoCCFVzZXI6OlYxYgZwcm90bzM",[Wr,Ye,He,te,Ks]),z2=M(k2,0),Q2=z("CiF1c2VyL3YxL3VzZXJfZmVlZGJhY2tfYWRtaW4ucHJvdG8SB3VzZXIudjEixwEKGkxpc3RVc2VyRmVlZEJhY2tUYWdSZXF1ZXN0EhQKB2tleXdvcmQYASABKAlIAIgBARIUCgdpc19wdXNoGAIgASgISAGIAQESEwoGc3RhdHVzGAMgASgISAKIAQESDAoEcGFnZRgEIAEoBRIRCglwYWdlX3NpemUYBSABKAUSFgoJb25seV9yb290GAYgASgISAOIAQFCCgoIX2tleXdvcmRCCgoIX2lzX3B1c2hCCQoHX3N0YXR1c0IMCgpfb25seV9yb290IlQKG0xpc3RVc2VyRmVlZEJhY2tUYWdSZXNwb25zZRImCgR0YWdzGAEgAygLMhgudXNlci52MS5Vc2VyRmVlZEJhY2tUYWcSDQoFdG90YWwYAiABKAUiYAoaTGlzdEZlaXNodUdyb3VwSW5mb1JlcXVlc3QSFAoHY2hhdF9pZBgBIAEoCUgAiAEBEhQKB2tleXdvcmQYAiABKAlIAYgBAUIKCghfY2hhdF9pZEIKCghfa2V5d29yZCJHChtMaXN0RmVpc2h1R3JvdXBJbmZvUmVzcG9uc2USKAoGZ3JvdXBzGAEgAygLMhgudXNlci52MS5GZWlzaHVHcm91cEluZm8iTAoQQXV0b1JlcGx5Q29udGVudBIQCgh1c2Vfd2hlbhgBIAEoCRISCgplbl9jb250ZW50GAIgASgJEhIKCmNuX2NvbnRlbnQYAyABKAkizwIKGUFkZFVzZXJGZWVkQmFja1RhZ1JlcXVlc3QSFwoPdG9waWNfZ3JvdXBfdWlkGAUgASgJEg8KB2lzX3B1c2gYBiABKAgSEAoIcHJpb3JpdHkYByABKAUSDgoGc3RhdHVzGAggASgIEhEKCXBhcmVudF9pZBgJIAEoAxIZChFlbmFibGVfYXV0b19yZXBseRgKIAEoCBI1ChJhdXRvX3JlcGx5X2NvbnRlbnQYCyADKAsyGS51c2VyLnYxLkF1dG9SZXBseUNvbnRlbnQSGAoQZW5hYmxlX2F1dG9fbm90ZRgMIAEoCBIYChBhdXRvX25vdGVfZmllbGRzGA0gAygJEg4KBnByb21wdBgOIAEoCRIXCgRuYW1lGA8gASgJQgm6SAZyBBADGB4SEwoLZGVzY3JpcHRpb24YECABKAkSDwoHaXNfcm9vdBgRIAEoCCI+ChpBZGRVc2VyRmVlZEJhY2tUYWdSZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIEg8KB21lc3NhZ2UYAiABKAkiZQocRGVsZXRlVXNlckZlZWRCYWNrVGFnUmVxdWVzdBIKCgJpZBgBIAEoAxIRCglmaXJzdF90YWcYAiABKAkSFwoKc2Vjb25kX3RhZxgDIAEoCUgAiAEBQg0KC19zZWNvbmRfdGFnIkEKHURlbGV0ZVVzZXJGZWVkQmFja1RhZ1Jlc3BvbnNlEg8KB3N1Y2Nlc3MYASABKAgSDwoHbWVzc2FnZRgCIAEoCSKGBAocVXBkYXRlVXNlckZlZWRCYWNrVGFnUmVxdWVzdBIKCgJpZBgBIAEoAxIcCg90b3BpY19ncm91cF91aWQYBiABKAlIAIgBARIUCgdpc19wdXNoGAcgASgISAGIAQESFQoIcHJpb3JpdHkYCCABKAVIAogBARITCgZzdGF0dXMYCSABKAhIA4gBARIWCglwYXJlbnRfaWQYCiABKANIBIgBARIeChFlbmFibGVfYXV0b19yZXBseRgLIAEoCEgFiAEBEjUKEmF1dG9fcmVwbHlfY29udGVudBgMIAMoCzIZLnVzZXIudjEuQXV0b1JlcGx5Q29udGVudBIdChBlbmFibGVfYXV0b19ub3RlGA0gASgISAaIAQESGAoQYXV0b19ub3RlX2ZpZWxkcxgOIAMoCRITCgZwcm9tcHQYDyABKAlIB4gBARIXCgRuYW1lGBAgASgJQgm6SAZyBBADGB4SGAoLZGVzY3JpcHRpb24YESABKAlICIgBAUISChBfdG9waWNfZ3JvdXBfdWlkQgoKCF9pc19wdXNoQgsKCV9wcmlvcml0eUIJCgdfc3RhdHVzQgwKCl9wYXJlbnRfaWRCFAoSX2VuYWJsZV9hdXRvX3JlcGx5QhMKEV9lbmFibGVfYXV0b19ub3RlQgkKB19wcm9tcHRCDgoMX2Rlc2NyaXB0aW9uIkEKHVVwZGF0ZVVzZXJGZWVkQmFja1RhZ1Jlc3BvbnNlEg8KB3N1Y2Nlc3MYASABKAgSDwoHbWVzc2FnZRgCIAEoCSJjChlBZGRGZWlzaHVHcm91cEluZm9SZXF1ZXN0EhIKCmdyb3VwX3R5cGUYASABKAUSEgoKZ3JvdXBfbmFtZRgCIAEoCRINCgVvd25lchgDIAEoCRIPCgdjaGF0X2lkGAQgASgJIj4KGkFkZEZlaXNodUdyb3VwSW5mb1Jlc3BvbnNlEg8KB3N1Y2Nlc3MYASABKAgSDwoHbWVzc2FnZRgCIAEoCSK6AQocVXBkYXRlRmVpc2h1R3JvdXBJbmZvUmVxdWVzdBIKCgJpZBgBIAEoAxIXCgpncm91cF90eXBlGAMgASgFSACIAQESFwoKZ3JvdXBfbmFtZRgEIAEoCUgBiAEBEhIKBW93bmVyGAUgASgJSAKIAQESFAoHY2hhdF9pZBgGIAEoCUgDiAEBQg0KC19ncm91cF90eXBlQg0KC19ncm91cF9uYW1lQggKBl9vd25lckIKCghfY2hhdF9pZCJBCh1VcGRhdGVGZWlzaHVHcm91cEluZm9SZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIEg8KB21lc3NhZ2UYAiABKAkiKgocRGVsZXRlRmVpc2h1R3JvdXBJbmZvUmVxdWVzdBIKCgJpZBgBIAEoAyJBCh1EZWxldGVGZWlzaHVHcm91cEluZm9SZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIEg8KB21lc3NhZ2UYAiABKAki9wMKD1VzZXJGZWVkQmFja1RhZxIKCgJpZBgBIAEoAxIXCg90b3BpY19ncm91cF91aWQYBiABKAkSDwoHaXNfcHVzaBgHIAEoCBIQCghwcmlvcml0eRgIIAEoBRIuCgpjcmVhdGVkX2F0GAkgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIuCgp1cGRhdGVkX2F0GAogASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIOCgZzdGF0dXMYCyABKAgSEgoKZ3JvdXBfbmFtZRgMIAEoCRIPCgdjaGF0X2lkGA0gASgJEhEKCXBhcmVudF9pZBgOIAEoAxIPCgdpc19yb290GA8gASgIEhkKEWVuYWJsZV9hdXRvX3JlcGx5GBAgASgIEjUKEmF1dG9fcmVwbHlfY29udGVudBgRIAMoCzIZLnVzZXIudjEuQXV0b1JlcGx5Q29udGVudBIYChBlbmFibGVfYXV0b19ub3RlGBIgASgIEhgKEGF1dG9fbm90ZV9maWVsZHMYEyADKAkSDgoGcHJvbXB0GBQgASgJEioKCGNoaWxkcmVuGBUgAygLMhgudXNlci52MS5Vc2VyRmVlZEJhY2tUYWcSDAoEbmFtZRgWIAEoCRITCgtkZXNjcmlwdGlvbhgXIAEoCSLSAQoPRmVpc2h1R3JvdXBJbmZvEgoKAmlkGAEgASgDEi4KCmNyZWF0ZWRfYXQYAiABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEi4KCnVwZGF0ZWRfYXQYAyABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEgsKA3VpZBgFIAEoCRISCgpncm91cF90eXBlGAYgASgFEhIKCmdyb3VwX25hbWUYByABKAkSDQoFb3duZXIYCCABKAkSDwoHY2hhdF9pZBgJIAEoCSI3ChNMaXN0Rmlyc3RUYWdSZXF1ZXN0EhQKB2tleXdvcmQYAyABKAlIAIgBAUIKCghfa2V5d29yZCIzChRMaXN0Rmlyc3RUYWdSZXNwb25zZRIMCgR0YWdzGAEgAygJEg0KBXRvdGFsGAIgASgFIj4KFExpc3RSb290VGFnc1Jlc3BvbnNlEiYKBHRhZ3MYASADKAsyGC51c2VyLnYxLlVzZXJGZWVkQmFja1RhZyItCh9HZXRVc2VyRmVlZEJhY2tUYWdEZXRhaWxSZXF1ZXN0EgoKAmlkGAEgASgDIkkKIEdldFVzZXJGZWVkQmFja1RhZ0RldGFpbFJlc3BvbnNlEiUKA3RhZxgBIAEoCzIYLnVzZXIudjEuVXNlckZlZWRCYWNrVGFnMtMIChRVc2VyRmVlZEJhY2tUYWdBZG1pbhJiChNMaXN0VXNlckZlZWRCYWNrVGFnEiMudXNlci52MS5MaXN0VXNlckZlZWRCYWNrVGFnUmVxdWVzdBokLnVzZXIudjEuTGlzdFVzZXJGZWVkQmFja1RhZ1Jlc3BvbnNlIgASYgoTTGlzdEZlaXNodUdyb3VwSW5mbxIjLnVzZXIudjEuTGlzdEZlaXNodUdyb3VwSW5mb1JlcXVlc3QaJC51c2VyLnYxLkxpc3RGZWlzaHVHcm91cEluZm9SZXNwb25zZSIAEl8KEkFkZFVzZXJGZWVkQmFja1RhZxIiLnVzZXIudjEuQWRkVXNlckZlZWRCYWNrVGFnUmVxdWVzdBojLnVzZXIudjEuQWRkVXNlckZlZWRCYWNrVGFnUmVzcG9uc2UiABJoChVVcGRhdGVVc2VyRmVlZEJhY2tUYWcSJS51c2VyLnYxLlVwZGF0ZVVzZXJGZWVkQmFja1RhZ1JlcXVlc3QaJi51c2VyLnYxLlVwZGF0ZVVzZXJGZWVkQmFja1RhZ1Jlc3BvbnNlIgASaAoVRGVsZXRlVXNlckZlZWRCYWNrVGFnEiUudXNlci52MS5EZWxldGVVc2VyRmVlZEJhY2tUYWdSZXF1ZXN0GiYudXNlci52MS5EZWxldGVVc2VyRmVlZEJhY2tUYWdSZXNwb25zZSIAEl8KEkFkZEZlaXNodUdyb3VwSW5mbxIiLnVzZXIudjEuQWRkRmVpc2h1R3JvdXBJbmZvUmVxdWVzdBojLnVzZXIudjEuQWRkRmVpc2h1R3JvdXBJbmZvUmVzcG9uc2UiABJoChVVcGRhdGVGZWlzaHVHcm91cEluZm8SJS51c2VyLnYxLlVwZGF0ZUZlaXNodUdyb3VwSW5mb1JlcXVlc3QaJi51c2VyLnYxLlVwZGF0ZUZlaXNodUdyb3VwSW5mb1Jlc3BvbnNlIgASaAoVRGVsZXRlRmVpc2h1R3JvdXBJbmZvEiUudXNlci52MS5EZWxldGVGZWlzaHVHcm91cEluZm9SZXF1ZXN0GiYudXNlci52MS5EZWxldGVGZWlzaHVHcm91cEluZm9SZXNwb25zZSIAEk0KDExpc3RGaXJzdFRhZxIcLnVzZXIudjEuTGlzdEZpcnN0VGFnUmVxdWVzdBodLnVzZXIudjEuTGlzdEZpcnN0VGFnUmVzcG9uc2UiABJHCgxMaXN0Um9vdFRhZ3MSFi5nb29nbGUucHJvdG9idWYuRW1wdHkaHS51c2VyLnYxLkxpc3RSb290VGFnc1Jlc3BvbnNlIgAScQoYR2V0VXNlckZlZWRCYWNrVGFnRGV0YWlsEigudXNlci52MS5HZXRVc2VyRmVlZEJhY2tUYWdEZXRhaWxSZXF1ZXN0GikudXNlci52MS5HZXRVc2VyRmVlZEJhY2tUYWdEZXRhaWxSZXNwb25zZSIAQp0BCgtjb20udXNlci52MUIWVXNlckZlZWRiYWNrQWRtaW5Qcm90b1ABWjlnaXRsYWIubW9uaWNhLmNuL3ZpZGEvc2RrL2JpenNlcnZlci1nby5naXQvdXNlci92MTt1c2VydjGiAgNVWFiqAgdVc2VyLlYxygIHVXNlclxWMeICE1VzZXJcVjFcR1BCTWV0YWRhdGHqAghVc2VyOjpWMWIGcHJvdG8z",[Ye,Kf,te]),L2=M(Q2,0),K2=z("ChJ1c2VyL3YxL3VzZXIucHJvdG8SB3VzZXIudjEiWAoaTGlzdFVzZXJDcmVkaXRzTG9nUmVzcG9uc2USKwoEbG9ncxgBIAMoCzIdLnVzZXIudjEuVXNlclNlc3Npb25DcmVkaXRMb2cSDQoFdG90YWwYAiABKAUivgEKFFVzZXJTZXNzaW9uQ3JlZGl0TG9nEhIKCnNlc3Npb25faWQYASABKAkSDQoFdGl0bGUYAiABKAkSEQoJY3JlYXRlX2F0GAMgASgFEg8KB2NyZWRpdHMYBCABKAUSJAoEdHlwZRgFIAEoDjIWLnVzZXIudjEuQ3JlZGl0TG9nVHlwZRI5ChFjb2xsYWJvcmF0ZV9pbmZvcxgGIAMoCzIeLnVzZXIudjEuQ3JlZGl0Q29sbGFib3JhdGVJbmZvImEKFUNyZWRpdENvbGxhYm9yYXRlSW5mbxIPCgd1c2VyX2lkGAEgASgJEhEKCXVzZXJfbmFtZRgCIAEoCRITCgt1c2VyX2F2YXRhchgDIAEoCRIPCgdjcmVkaXRzGAQgASgFIjwKGUxpc3RVc2VyQ3JlZGl0c0xvZ1JlcXVlc3QSDAoEcGFnZRgBIAEoBRIRCglwYWdlX3NpemUYAiABKAUiFQoTR2V0RnJlZVF1b3RhUmVxdWVzdCI3ChRHZXRGcmVlUXVvdGFSZXNwb25zZRISCgpsZWZ0X3F1b3RhGAEgASgFEgsKA3R0bBgCIAEoAyJyCghUZWFtSW5mbxINCgVjb3VudBgBIAEoBRIVCgh0ZWFtX3VpZBgCIAEoCUgAiAEBEhgKEG9yaWdpbmFsX3VzZXJfaWQYAyABKAkSGQoRb3JpZ2luYWxfdXNlcl91aWQYBCABKAlCCwoJX3RlYW1fdWlkIhEKD1VzZXJJbmZvUmVxdWVzdCLgBgoQVXNlckluZm9SZXNwb25zZRIPCgd1c2VyX2lkGAEgASgJEg0KBWVtYWlsGAIgASgJEhEKCWZpcnN0bmFtZRgDIAEoCRIQCghsYXN0bmFtZRgEIAEoCRITCgtkaXNwbGF5bmFtZRgFIAEoCRIQCghuaWNrbmFtZRgGIAEoCRIOCgZhdmF0YXIYByABKAkSEAoIaXNfYWxwaGEYCCABKAgSEwoLaW5fd2FpdGxpc3QYCSABKAgSGgoSY3VycmVudF9wZXJpb2RfZW5kGAwgASgDEhwKFGNhbmNlbF9hdF9wZXJpb2RfZW5kGA0gASgIEg8KB2lzX2JldGEYDiABKAgSGAoQcGF5bWVudF9wbGF0Zm9ybRgPIAEoCRILCgN1aWQYECABKAkSGwoTY29uY3VycmVudF9zZXNzaW9ucxgRIAEoBRIVCg1wbGF0Zm9ybV9saXN0GBIgAygJEi8KJ2Nhbl9yZWNlaXZlX2V4dHJhX2NyZWRpdHNfZm9yX3N1YnNjcmliZRgTIAEoCBItCiVjYW5fcmVjZWl2ZV9leHRyYV9jcmVkaXRzX2Zvcl91cGdyYWRlGBQgASgIEjgKE3N1YnNjcmlwdGlvbl9zdGF0dXMYFSABKA4yGy51c2VyLnYxLlN1YnNjcmlwdGlvblN0YXR1cxIaChJtZW1iZXJzaGlwX3ZlcnNpb24YHiABKAkSGwoTbWVtYmVyc2hpcF9pbnRlcnZhbBgfIAEoCRIfChduZXh0X21lbWJlcnNoaXBfdmVyc2lvbhggIAEoCRIoCgl1c2VyX3R5cGUYKCABKA4yFS51c2VyLnYxLlVzZXJUeXBlRW51bRIkCgl0ZWFtX2luZm8YKSABKAsyES51c2VyLnYxLlRlYW1JbmZvEhsKE2lzX21lbWJlcnNoaXBfdHJpYWwYISABKAgSJwoIZWR1X2luZm8YIiABKAsyEC51c2VyLnYxLkVkdUluZm9IAIgBARIUCgxzbXNfdmVyaWZpZWQYIyABKAgSIAoYbmV4dF9tZW1iZXJzaGlwX2ludGVydmFsGCQgASgJEg0KBXBlcmtzGCUgASgIQgsKCV9lZHVfaW5mb0oECAoQC0oECAsQDFILdmlwX3ZlcnNpb25SDHZpcF9pbnRlcnZhbCKWAQoHRWR1SW5mbxILCgN1aWQYASABKAkSDAoEbmFtZRgCIAEoCRIRCgllZHVfZW1haWwYAyABKAkSGQoRcmVjb21tZW5kX2NyZWRpdHMYBCABKAUSGAoQcmVnaXN0ZXJfY3JlZGl0cxgFIAEoBRITCgtlZHVfZG9tYWlucxgGIAMoCRITCgt1bmlxdWVfbmFtZRgHIAEoCSJ/ChpDaGVja0ludml0YXRpb25Db2RlUmVxdWVzdBIXCgRjb2RlGAEgASgJQgm6SAZyBBAGGCASKAobaGNhcHRjaGFfY2hhbGxlbmdlX3Jlc3BvbnNlGAIgASgJSACIAQFCHgocX2hjYXB0Y2hhX2NoYWxsZW5nZV9yZXNwb25zZSIdChtDaGVja0ludml0YXRpb25Db2RlUmVzcG9uc2UiPAoGQXZhdGFyEhEKCWZpbGVfbmFtZRgBIAEoCRIRCgltaW1lX3R5cGUYAiABKAkSDAoEZGF0YRgDIAEoCSJ2ChhVcGRhdGVVc2VyUHJvZmlsZVJlcXVlc3QSJAoMbmV3X25pY2tuYW1lGAIgASgJQgm6SAZyBBABGCBIAIgBARIjCgpuZXdfYXZhdGFyGAMgASgLMg8udXNlci52MS5BdmF0YXJCDwoNX25ld19uaWNrbmFtZSIbChlVcGRhdGVVc2VyUHJvZmlsZVJlc3BvbnNlIuEBChpDcmVhdGVRdWVzdGlvbm5haXJlUmVxdWVzdBIOCgZyZWFzb24YASABKAkSKwoKZXh0cmFfZGF0YRgCIAEoCzIXLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3QSFwoKcHJvZmVzc2lvbhgDIAEoCUgAiAEBEiEKFHNvY2lhbF9tZWRpYV9hY2NvdW50GAQgASgJSAGIAQESFQoIaW5kdXN0cnkYBSABKAlIAogBAUINCgtfcHJvZmVzc2lvbkIXChVfc29jaWFsX21lZGlhX2FjY291bnRCCwoJX2luZHVzdHJ5Ih0KG0NyZWF0ZVF1ZXN0aW9ubmFpcmVSZXNwb25zZSJPChpHZXRVc2VyQ2xpZW50Q29uZmlnUmVxdWVzdBIxCgtjb25maWdfa2V5cxgBIAMoDjIcLnVzZXIudjEuVXNlckNsaWVudENvbmZpZ0tleSLoAgobR2V0VXNlckNsaWVudENvbmZpZ1Jlc3BvbnNlEiEKFHJlY3ZfbWFya2V0aW5nX2VtYWlsGAEgASgISACIAQESGQoMaGFzX2ludGVyZXN0GAIgASgISAGIAQESJAoXc2Vzc2lvbl93YWl0X2RvbmVfZW1haWwYByABKAhIAogBARI6ChJhZ2VudF9kZXBsb3lfc3BhY2UYCiABKA4yGS51c2VyLnYxLkFnZW50RGVwbG95U3BhY2VIA4gBARIqCh1oYXNfc2hvd25fZWR1X3RlYW1fam9pbl9wb3B1cBgPIAEoCEgEiAEBQhcKFV9yZWN2X21hcmtldGluZ19lbWFpbEIPCg1faGFzX2ludGVyZXN0QhoKGF9zZXNzaW9uX3dhaXRfZG9uZV9lbWFpbEIVChNfYWdlbnRfZGVwbG95X3NwYWNlQiAKHl9oYXNfc2hvd25fZWR1X3RlYW1fam9pbl9wb3B1cCLnAgoaU2V0VXNlckNsaWVudENvbmZpZ1JlcXVlc3QSIQoUcmVjdl9tYXJrZXRpbmdfZW1haWwYASABKAhIAIgBARIZCgxoYXNfaW50ZXJlc3QYAiABKAhIAYgBARIkChdzZXNzaW9uX3dhaXRfZG9uZV9lbWFpbBgHIAEoCEgCiAEBEjoKEmFnZW50X2RlcGxveV9zcGFjZRgKIAEoDjIZLnVzZXIudjEuQWdlbnREZXBsb3lTcGFjZUgDiAEBEioKHWhhc19zaG93bl9lZHVfdGVhbV9qb2luX3BvcHVwGA8gASgISASIAQFCFwoVX3JlY3ZfbWFya2V0aW5nX2VtYWlsQg8KDV9oYXNfaW50ZXJlc3RCGgoYX3Nlc3Npb25fd2FpdF9kb25lX2VtYWlsQhUKE19hZ2VudF9kZXBsb3lfc3BhY2VCIAoeX2hhc19zaG93bl9lZHVfdGVhbV9qb2luX3BvcHVwIh0KG1NldFVzZXJDbGllbnRDb25maWdSZXNwb25zZSIeChxHZXRVc2VyR2xvYmFsU2V0dGluZ3NSZXF1ZXN0IjMKHUdldFVzZXJHbG9iYWxTZXR0aW5nc1Jlc3BvbnNlEhIKCnN1YnNjcmliZWQYASABKAgiHAoaR2V0QXZhaWxhYmxlQ3JlZGl0c1JlcXVlc3QitgIKG0dldEF2YWlsYWJsZUNyZWRpdHNSZXNwb25zZRIVCg10b3RhbF9jcmVkaXRzGAEgASgFEhQKDGZyZWVfY3JlZGl0cxgCIAEoBRIYChBwZXJpb2RpY19jcmVkaXRzGAMgASgFEhUKDWFkZG9uX2NyZWRpdHMYBCABKAUSGwoTcHJvX21vbnRobHlfY3JlZGl0cxgFIAEoBRIVCg1ldmVudF9jcmVkaXRzGAYgASgFEhcKD3JlZnJlc2hfY3JlZGl0cxgUIAEoBRIbChNtYXhfcmVmcmVzaF9jcmVkaXRzGBUgASgFEjUKEW5leHRfcmVmcmVzaF90aW1lGBYgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIYChByZWZyZXNoX2ludGVydmFsGBcgASgJIs8BChpQZXJzb25hbEludml0YXRpb25Db2RlSW5mbxIKCgJpZBgBIAEoAxIpCgRraW5kGAIgASgOMhsudXNlci52MS5JbnZpdGF0aW9uQ29kZUtpbmQSEwoLaW52aXRlX2NvZGUYAyABKAkSEAoIbWF4X3VzZXMYBCABKAUSEgoKdXNlZF9jb3VudBgFIAEoBRIuCgpjcmVhdGVkX2F0GAcgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIPCgdwZW5kaW5nGAggASgIIiMKIUdldFBlcnNvbmFsSW52aXRhdGlvbkNvZGVzUmVxdWVzdCJjCiJHZXRQZXJzb25hbEludml0YXRpb25Db2Rlc1Jlc3BvbnNlEj0KEGludml0YXRpb25fY29kZXMYASADKAsyIy51c2VyLnYxLlBlcnNvbmFsSW52aXRhdGlvbkNvZGVJbmZvIlAKF1NldFVzZXJJbnRlcmVzdHNSZXF1ZXN0EiMKBHRhZ3MYASADKA4yFS51c2VyLnYxLlVzZXJJbnRlcmVzdBIQCghmZWVkYmFjaxgCIAEoCSIaChhTZXRVc2VySW50ZXJlc3RzUmVzcG9uc2UiEgoQR2V0Q29ubmVjdEFQUFJlcSJvCgtDb25uZWN0SW5mbxINCgV0b2tlbhgBIAEoCRIvCgtleHBpcmVfdGltZRgDIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASFAoHd2ViX3VybBgEIAEoCUgAiAEBQgoKCF93ZWJfdXJsIm8KCkNvbm5lY3RBUFASDAoEdHlwZRgBIAEoCRIRCgljb25uZWN0ZWQYAiABKAgSLwoMY29ubmVjdF9pbmZvGAMgASgLMhQudXNlci52MS5Db25uZWN0SW5mb0gAiAEBQg8KDV9jb25uZWN0X2luZm8iPgoSQ29ubmVjdEFQUFJlc3BvbnNlEigKC2Nvbm5lY3RfYXBwGAEgAygLMhMudXNlci52MS5Db25uZWN0QVBQIjUKGEdldEdvb2dsZURyaXZlQXV0aFVybFJlcRIZChFjYWxsYmFja19yZWRpcmVjdBgBIAEoCSIsCh1HZXRHb29nbGVEcml2ZUF1dGhVcmxSZXNwb25zZRILCgN1cmwYASABKAkiIAoQRGlzY29ubmVjdEFQUFJlcRIMCgR0eXBlGAEgASgJIhcKFURpc2Nvbm5lY3RBUFBSZXNwb25zZSKRAQogU2VuZFBob25lVmVyaWZpY2F0aW9uQ29kZVJlcXVlc3QSFAoMcGhvbmVfbnVtYmVyGAEgASgJEhMKC3JlZ2lvbl9jb2RlGAIgASgJEg4KBmxvY2FsZRgDIAEoCRIyCgdjaGFubmVsGAQgASgOMiEudXNlci52MS5QaG9uZVZlcmlmaWNhdGlvbkNoYW5uZWwiIwohU2VuZFBob25lVmVyaWZpY2F0aW9uQ29kZVJlc3BvbnNlIl0KFUJpbmRQaG9uZVRyYWl0UmVxdWVzdBIUCgxwaG9uZV9udW1iZXIYASABKAkSEwoLcmVnaW9uX2NvZGUYAiABKAkSGQoRcGhvbmVfdmVyaWZ5X2NvZGUYAyABKAkiGAoWQmluZFBob25lVHJhaXRSZXNwb25zZSIXChVMaXN0UmVnaW9uQ29kZVJlcXVlc3QiJwoKUmVnaW9uQ29kZRILCgNpc28YASABKAkSDAoEY29kZRgCIAEoCSJDChZMaXN0UmVnaW9uQ29kZVJlc3BvbnNlEikKDHJlZ2lvbl9jb2RlcxgBIAMoCzITLnVzZXIudjEuUmVnaW9uQ29kZSLiAQoVQWN0aXZpdHlUeXBlUGVya3NEYXRhEhEKCWZ1bGxfbmFtZRgBIAEoCRINCgVwaG9uZRgCIAEoCRINCgVlbWFpbBgDIAEoCRIPCgdhZGRyZXNzGAQgASgJEh0KEGFkZHJlc3Nfb3B0aW9uYWwYBSABKAlIAIgBARITCgtjb3VudHJ5X2lzbxgHIAEoCRIMCgRjaXR5GAggASgJEg0KBXN0YXRlGAkgASgJEgsKA3ppcBgKIAEoCRIUCgx0X3NoaXJ0X3NpemUYCyABKAlCEwoRX2FkZHJlc3Nfb3B0aW9uYWwiWworQ2hlY2tBY3Rpdml0eVF1ZXN0aW9ubmFpcmVQZXJtaXNzaW9uUmVxdWVzdBIsCg1hY3Rpdml0eV90eXBlGAEgASgOMhUudXNlci52MS5BY3Rpdml0eVR5cGUiRgosQ2hlY2tBY3Rpdml0eVF1ZXN0aW9ubmFpcmVQZXJtaXNzaW9uUmVzcG9uc2USFgoOaGFzX3Blcm1pc3Npb24YASABKAgimAEKKkNyZWF0ZU9yVXBkYXRlQWN0aXZpdHlRdWVzdGlvbm5haXJlUmVxdWVzdBIsCg1hY3Rpdml0eV90eXBlGAEgASgOMhUudXNlci52MS5BY3Rpdml0eVR5cGUSNAoKcGVya3NfZGF0YRgCIAEoCzIeLnVzZXIudjEuQWN0aXZpdHlUeXBlUGVya3NEYXRhSABCBgoEZGF0YSI6CitDcmVhdGVPclVwZGF0ZUFjdGl2aXR5UXVlc3Rpb25uYWlyZVJlc3BvbnNlEgsKA3VpZBgBIAEoCSJPCh9HZXRBY3Rpdml0eVF1ZXN0aW9ubmFpcmVSZXF1ZXN0EiwKDWFjdGl2aXR5X3R5cGUYASABKA4yFS51c2VyLnYxLkFjdGl2aXR5VHlwZSKdAQogR2V0QWN0aXZpdHlRdWVzdGlvbm5haXJlUmVzcG9uc2USDQoFdmFsaWQYASABKAgSLAoNYWN0aXZpdHlfdHlwZRgCIAEoDjIVLnVzZXIudjEuQWN0aXZpdHlUeXBlEjQKCnBlcmtzX2RhdGEYAyABKAsyHi51c2VyLnYxLkFjdGl2aXR5VHlwZVBlcmtzRGF0YUgAQgYKBGRhdGEiOQoaU2VuZEludml0YXRpb25FbWFpbFJlcXVlc3QSDQoFZW1haWwYASABKAkSDAoEY29kZRgCIAEoCSIuChtTZW5kSW52aXRhdGlvbkVtYWlsUmVzcG9uc2USDwoHcGVuZGluZxgBIAEoCCI6Ch1HZXRPbmVEcml2ZVBlcnNvbmFsQXV0aFVybFJlcRIZChFjYWxsYmFja19yZWRpcmVjdBgBIAEoCSIxCiJHZXRPbmVEcml2ZVBlcnNvbmFsQXV0aFVybFJlc3BvbnNlEgsKA3VybBgBIAEoCSI6Ch1HZXRPbmVEcml2ZUJ1c2luZXNzQXV0aFVybFJlcRIZChFjYWxsYmFja19yZWRpcmVjdBgBIAEoCSIxCiJHZXRPbmVEcml2ZUJ1c2luZXNzQXV0aFVybFJlc3BvbnNlEgsKA3VybBgBIAEoCSJMChhJbkV4cGVyaW1lbnRHcm91cFJlcXVlc3QSMAoPZXhwZXJpbWVudF90eXBlGAEgASgOMhcudXNlci52MS5FeHBlcmltZW50VHlwZSI4ChlJbkV4cGVyaW1lbnRHcm91cFJlc3BvbnNlEhsKE2luX2V4cGVyaW1lbnRfZ3JvdXAYASABKAgiMgohR2V0T25lRHJpdmVCdXNpbmVzc1Njb3BlZFRva2VuUmVxEg0KBXNjb3BlGAEgASgJIksKJkdldE9uZURyaXZlQnVzaW5lc3NTY29wZWRUb2tlblJlc3BvbnNlEg0KBXRva2VuGAEgASgJEhIKCmV4cGlyZXNfaW4YAiABKAUq0wEKElN1YnNjcmlwdGlvblN0YXR1cxIbChdPdGhlclN1YnNjcmlwdGlvblN0YXR1cxAAEhoKFkluaXRTdWJzY3JpcHRpb25TdGF0dXMQARIcChhBY3RpdmVTdWJzY3JpcHRpb25TdGF0dXMQAhIdChlQYXN0RHVlU3Vic2NyaXB0aW9uU3RhdHVzEAMSJwojSW5jb21wbGV0ZUV4cGlyZWRTdWJzY3JpcHRpb25TdGF0dXMQBBIeChpDYW5jZWxlZFN1YnNjcmlwdGlvblN0YXR1cxAFKocEChNVc2VyQ2xpZW50Q29uZmlnS2V5EiYKIlVTRVJfQ0xJRU5UX0NPTkZJR19LRVlfVU5TUEVDSUZJRUQQABIvCitVU0VSX0NMSUVOVF9DT05GSUdfS0VZX1JFQ1ZfTUFSS0VUSU5HX0VNQUlMEAESJwojVVNFUl9DTElFTlRfQ09ORklHX0tFWV9IQVNfSU5URVJFU1QQAhIuCipVU0VSX0NMSUVOVF9DT05GSUdfS0VZX09QRVJBVElPTl9QTEFZX0NBUkQQAxInCiNVU0VSX0NMSUVOVF9DT05GSUdfS0VZX1ZFUklGWV9QSE9ORRAEEiQKIFVTRVJfQ0xJRU5UX0NPTkZJR19LRVlfVElNRV9aT05FEAUSKwonVVNFUl9DTElFTlRfQ09ORklHX0tFWV9USU1FX1pPTkVfT0ZGU0VUEAYSMgouVVNFUl9DTElFTlRfQ09ORklHX0tFWV9TRVNTSU9OX1dBSVRfRE9ORV9FTUFJTBAHEiUKIVVTRVJfQ0xJRU5UX0NPTkZJR19LRVlfT05CT0FSRElORxAIEi0KKVVTRVJfQ0xJRU5UX0NPTkZJR19LRVlfQUdFTlRfREVQTE9ZX1NQQUNFEAoSOAo0VVNFUl9DTElFTlRfQ09ORklHX0tFWV9IQVNfU0hPV05fRURVX1RFQU1fSk9JTl9QT1BVUBAPKoIBChBBZ2VudERlcGxveVNwYWNlEiIKHkFHRU5UX0RFUExPWV9TUEFDRV9VTlNQRUNJRklFRBAAEiUKIUFHRU5UX0RFUExPWV9TUEFDRV9BU0tfRVZFUllfVElNRRABEiMKH0FHRU5UX0RFUExPWV9TUEFDRV9BTFdBWVNfQUxMT1cQAir+BgoMVXNlckludGVyZXN0Eh0KGVVTRVJfSU5URVJFU1RfVU5TUEVDSUZJRUQQABIjCh9VU0VSX0lOVEVSRVNUX0lORFVTVFJZX0FOQUxZU0lTEAESIQodVVNFUl9JTlRFUkVTVF9QT0xJQ1lfUkVTRUFSQ0gQAhIkCiBVU0VSX0lOVEVSRVNUX1BFUlNPTkFfUFJPRklMTElORxADEh8KG1VTRVJfSU5URVJFU1RfREFUQV9JTlNJR0hUUxAEEiUKIVVTRVJfSU5URVJFU1RfV0VCU0lURV9QUk9UT1RZUElORxAKEiIKHlVTRVJfSU5URVJFU1RfR0FNRV9ERVZFTE9QTUVOVBALEhwKGFVTRVJfSU5URVJFU1RfQVBQX0RFU0lHThAMEiMKH1VTRVJfSU5URVJFU1RfSU5URVJBQ1RJVkVfUEFHRVMQDRIgChxVU0VSX0lOVEVSRVNUX0FHRU5UX0JVSUxESU5HEBQSIgoeVVNFUl9JTlRFUkVTVF9UT09MX1BST1RPVFlQSU5HEBUSIQodVVNFUl9JTlRFUkVTVF9BVVRPTUFUSU9OX0ZMT1cQFhIgChxVU0VSX0lOVEVSRVNUX0FJX0lOVEVHUkFUSU9OEBcSIQodVVNFUl9JTlRFUkVTVF9DT1VSU0VfQ1JFQVRJT04QHhIgChxVU0VSX0lOVEVSRVNUX0xFQVJOSU5HX1RPT0xTEB8SIwofVVNFUl9JTlRFUkVTVF9LTk9XTEVER0VfTUFQUElORxAgEiIKHlVTRVJfSU5URVJFU1RfVEVBQ0hJTkdfQ09OVEVOVBAhEiAKHFVTRVJfSU5URVJFU1RfUkVQT1JUX1dSSVRJTkcQKBIgChxVU0VSX0lOVEVSRVNUX1NUT1JZX0NSRUFUSU9OECkSIQodVVNFUl9JTlRFUkVTVF9WSURFT19TQ1JJUFRJTkcQKhIgChxVU0VSX0lOVEVSRVNUX01FRElBX1BMQU5OSU5HECsSIQodVVNFUl9JTlRFUkVTVF9NQVJLRVRfUkVTRUFSQ0gQMhIlCiFVU0VSX0lOVEVSRVNUX0lOVkVTVE1FTlRfQU5BTFlTSVMQMxIkCiBVU0VSX0lOVEVSRVNUX0ZJTkFOQ0lBTF9NT0RFTElORxA0EiAKHFVTRVJfSU5URVJFU1RfREFUQV9SRVBPUlRJTkcQNSq5AQoYUGhvbmVWZXJpZmljYXRpb25DaGFubmVsEioKJlBIT05FX1ZFUklGSUNBVElPTl9DSEFOTkVMX1VOU1BFQ0lGSUVEEAASIgoeUEhPTkVfVkVSSUZJQ0FUSU9OX0NIQU5ORUxfU01TEAESJwojUEhPTkVfVkVSSUZJQ0FUSU9OX0NIQU5ORUxfV0hBVFNBUFAQAhIkCiBQSE9ORV9WRVJJRklDQVRJT05fQ0hBTk5FTF9WT0lDRRADKlEKDkV4cGVyaW1lbnRUeXBlEh8KG0VYUEVSSU1FTlRfVFlQRV9VTlNQRUNJRklFRBAAEh4KGkVYUEVSSU1FTlRfVFlQRV9PTkJPQVJESU5HEAEyzBQKC1VzZXJTZXJ2aWNlEkEKCFVzZXJJbmZvEhgudXNlci52MS5Vc2VySW5mb1JlcXVlc3QaGS51c2VyLnYxLlVzZXJJbmZvUmVzcG9uc2UiABJgChNDaGVja0ludml0YXRpb25Db2RlEiMudXNlci52MS5DaGVja0ludml0YXRpb25Db2RlUmVxdWVzdBokLnVzZXIudjEuQ2hlY2tJbnZpdGF0aW9uQ29kZVJlc3BvbnNlEloKEVVwZGF0ZVVzZXJQcm9maWxlEiEudXNlci52MS5VcGRhdGVVc2VyUHJvZmlsZVJlcXVlc3QaIi51c2VyLnYxLlVwZGF0ZVVzZXJQcm9maWxlUmVzcG9uc2USYAoTQ3JlYXRlUXVlc3Rpb25uYWlyZRIjLnVzZXIudjEuQ3JlYXRlUXVlc3Rpb25uYWlyZVJlcXVlc3QaJC51c2VyLnYxLkNyZWF0ZVF1ZXN0aW9ubmFpcmVSZXNwb25zZRJLCgxHZXRGcmVlUXVvdGESHC51c2VyLnYxLkdldEZyZWVRdW90YVJlcXVlc3QaHS51c2VyLnYxLkdldEZyZWVRdW90YVJlc3BvbnNlEmAKE0dldFVzZXJDbGllbnRDb25maWcSIy51c2VyLnYxLkdldFVzZXJDbGllbnRDb25maWdSZXF1ZXN0GiQudXNlci52MS5HZXRVc2VyQ2xpZW50Q29uZmlnUmVzcG9uc2USYAoTU2V0VXNlckNsaWVudENvbmZpZxIjLnVzZXIudjEuU2V0VXNlckNsaWVudENvbmZpZ1JlcXVlc3QaJC51c2VyLnYxLlNldFVzZXJDbGllbnRDb25maWdSZXNwb25zZRJdChJMaXN0VXNlckNyZWRpdHNMb2cSIi51c2VyLnYxLkxpc3RVc2VyQ3JlZGl0c0xvZ1JlcXVlc3QaIy51c2VyLnYxLkxpc3RVc2VyQ3JlZGl0c0xvZ1Jlc3BvbnNlEmYKFUdldFVzZXJHbG9iYWxTZXR0aW5ncxIlLnVzZXIudjEuR2V0VXNlckdsb2JhbFNldHRpbmdzUmVxdWVzdBomLnVzZXIudjEuR2V0VXNlckdsb2JhbFNldHRpbmdzUmVzcG9uc2USYAoTR2V0QXZhaWxhYmxlQ3JlZGl0cxIjLnVzZXIudjEuR2V0QXZhaWxhYmxlQ3JlZGl0c1JlcXVlc3QaJC51c2VyLnYxLkdldEF2YWlsYWJsZUNyZWRpdHNSZXNwb25zZRJ1ChpHZXRQZXJzb25hbEludml0YXRpb25Db2RlcxIqLnVzZXIudjEuR2V0UGVyc29uYWxJbnZpdGF0aW9uQ29kZXNSZXF1ZXN0GisudXNlci52MS5HZXRQZXJzb25hbEludml0YXRpb25Db2Rlc1Jlc3BvbnNlElcKEFNldFVzZXJJbnRlcmVzdHMSIC51c2VyLnYxLlNldFVzZXJJbnRlcmVzdHNSZXF1ZXN0GiEudXNlci52MS5TZXRVc2VySW50ZXJlc3RzUmVzcG9uc2USRwoNR2V0Q29ubmVjdEFQUBIZLnVzZXIudjEuR2V0Q29ubmVjdEFQUFJlcRobLnVzZXIudjEuQ29ubmVjdEFQUFJlc3BvbnNlEkoKDURpc2Nvbm5lY3RBUFASGS51c2VyLnYxLkRpc2Nvbm5lY3RBUFBSZXEaHi51c2VyLnYxLkRpc2Nvbm5lY3RBUFBSZXNwb25zZRJiChVHZXRHb29nbGVEcml2ZUF1dGhVcmwSIS51c2VyLnYxLkdldEdvb2dsZURyaXZlQXV0aFVybFJlcRomLnVzZXIudjEuR2V0R29vZ2xlRHJpdmVBdXRoVXJsUmVzcG9uc2UScQoaR2V0T25lRHJpdmVQZXJzb25hbEF1dGhVcmwSJi51c2VyLnYxLkdldE9uZURyaXZlUGVyc29uYWxBdXRoVXJsUmVxGisudXNlci52MS5HZXRPbmVEcml2ZVBlcnNvbmFsQXV0aFVybFJlc3BvbnNlEnEKGkdldE9uZURyaXZlQnVzaW5lc3NBdXRoVXJsEiYudXNlci52MS5HZXRPbmVEcml2ZUJ1c2luZXNzQXV0aFVybFJlcRorLnVzZXIudjEuR2V0T25lRHJpdmVCdXNpbmVzc0F1dGhVcmxSZXNwb25zZRJ9Ch5HZXRPbmVEcml2ZUJ1c2luZXNzU2NvcGVkVG9rZW4SKi51c2VyLnYxLkdldE9uZURyaXZlQnVzaW5lc3NTY29wZWRUb2tlblJlcRovLnVzZXIudjEuR2V0T25lRHJpdmVCdXNpbmVzc1Njb3BlZFRva2VuUmVzcG9uc2USYAoTU2VuZEludml0YXRpb25FbWFpbBIjLnVzZXIudjEuU2VuZEludml0YXRpb25FbWFpbFJlcXVlc3QaJC51c2VyLnYxLlNlbmRJbnZpdGF0aW9uRW1haWxSZXNwb25zZRKTAQokQ2hlY2tBY3Rpdml0eVF1ZXN0aW9ubmFpcmVQZXJtaXNzaW9uEjQudXNlci52MS5DaGVja0FjdGl2aXR5UXVlc3Rpb25uYWlyZVBlcm1pc3Npb25SZXF1ZXN0GjUudXNlci52MS5DaGVja0FjdGl2aXR5UXVlc3Rpb25uYWlyZVBlcm1pc3Npb25SZXNwb25zZRKQAQojQ3JlYXRlT3JVcGRhdGVBY3Rpdml0eVF1ZXN0aW9ubmFpcmUSMy51c2VyLnYxLkNyZWF0ZU9yVXBkYXRlQWN0aXZpdHlRdWVzdGlvbm5haXJlUmVxdWVzdBo0LnVzZXIudjEuQ3JlYXRlT3JVcGRhdGVBY3Rpdml0eVF1ZXN0aW9ubmFpcmVSZXNwb25zZRJvChhHZXRBY3Rpdml0eVF1ZXN0aW9ubmFpcmUSKC51c2VyLnYxLkdldEFjdGl2aXR5UXVlc3Rpb25uYWlyZVJlcXVlc3QaKS51c2VyLnYxLkdldEFjdGl2aXR5UXVlc3Rpb25uYWlyZVJlc3BvbnNlEnIKGVNlbmRQaG9uZVZlcmlmaWNhdGlvbkNvZGUSKS51c2VyLnYxLlNlbmRQaG9uZVZlcmlmaWNhdGlvbkNvZGVSZXF1ZXN0GioudXNlci52MS5TZW5kUGhvbmVWZXJpZmljYXRpb25Db2RlUmVzcG9uc2USUQoOQmluZFBob25lVHJhaXQSHi51c2VyLnYxLkJpbmRQaG9uZVRyYWl0UmVxdWVzdBofLnVzZXIudjEuQmluZFBob25lVHJhaXRSZXNwb25zZRJRCg5MaXN0UmVnaW9uQ29kZRIeLnVzZXIudjEuTGlzdFJlZ2lvbkNvZGVSZXF1ZXN0Gh8udXNlci52MS5MaXN0UmVnaW9uQ29kZVJlc3BvbnNlElwKEUluRXhwZXJpbWVudEdyb3VwEiEudXNlci52MS5JbkV4cGVyaW1lbnRHcm91cFJlcXVlc3QaIi51c2VyLnYxLkluRXhwZXJpbWVudEdyb3VwUmVzcG9uc2UiAEKQAQoLY29tLnVzZXIudjFCCVVzZXJQcm90b1ABWjlnaXRsYWIubW9uaWNhLmNuL3ZpZGEvc2RrL2JpenNlcnZlci1nby5naXQvdXNlci92MTt1c2VydjGiAgNVWFiqAgdVc2VyLlYxygIHVXNlclxWMeICE1VzZXJcVjFcR1BCTWV0YWRhdGHqAghVc2VyOjpWMWIGcHJvdG8z",[Ye,He,te,Wr]),T2=M(K2,0),M2=z("Ch51c2VyL3YxL3VzZXJfYXV0aF9wdWJsaWMucHJvdG8SB3VzZXIudjEi5wMKC0F1dGhDb21tYW5kEhAKA3V0bRgBIAEoCUgAiAEBEhIKBXJlZmVyGAIgASgJSAGIAQESGAoLZmlyc3RfZW50cnkYAyABKAlIAogBARIgChNmaXJzdF9mcm9tX3BsYXRmb3JtGAQgASgJSAOIAQESGQoMaW5zdGFsbF9mcm9tGAUgASgJSASIAQESEwoGbG9jYWxlGAYgASgJSAWIAQESFgoJZ3BzX2FkX2lkGAcgASgJSAaIAQESEQoEaWRmYRgIIAEoCUgHiAEBEhIKBWFkX2lkGAkgASgJSAiIAQESFwoKdXRtX3NvdXJjZRgKIAEoCUgJiAEBEhkKDHV0bV9jYW1wYWlnbhgLIAEoCUgKiAEBEg8KAnR6GAwgASgJSAuIAQESFgoJdHpfb2Zmc2V0GA0gASgJSAyIAQFCBgoEX3V0bUIICgZfcmVmZXJCDgoMX2ZpcnN0X2VudHJ5QhYKFF9maXJzdF9mcm9tX3BsYXRmb3JtQg8KDV9pbnN0YWxsX2Zyb21CCQoHX2xvY2FsZUIMCgpfZ3BzX2FkX2lkQgcKBV9pZGZhQggKBl9hZF9pZEINCgtfdXRtX3NvdXJjZUIPCg1fdXRtX2NhbXBhaWduQgUKA190ekIMCgpfdHpfb2Zmc2V0IrsBChZSZWdpc3RlckJ5RW1haWxSZXF1ZXN0EjMKEGF1dGhfY29tbWFuZF9jbWQYASABKAsyFC51c2VyLnYxLkF1dGhDb21tYW5kSACIAQESDQoFZW1haWwYAiABKAkSEwoLdmVyaWZ5X2NvZGUYAyABKAkSDAoEbmFtZRgEIAEoCRIQCghwYXNzd29yZBgFIAEoCRITCgtpbnZpdGVfY29kZRgGIAEoCUITChFfYXV0aF9jb21tYW5kX2NtZCIoChdSZWdpc3RlckJ5RW1haWxSZXNwb25zZRINCgV0b2tlbhgBIAEoCSKoAQoWT2F1dGgyQXV0aG9yaXplUmVxdWVzdBIvCgxhdXRoX2NvbW1hbmQYASABKAsyFC51c2VyLnYxLkF1dGhDb21tYW5kSACIAQESFAoMcmVkaXJlY3RfdXJsGAIgASgJEhMKC2ludml0ZV9jb2RlGAMgASgJEiEKBHR5cGUYBCABKA4yEy51c2VyLnYxLk9BdXRoMlR5cGVCDwoNX2F1dGhfY29tbWFuZCIvChdPYXV0aDJBdXRob3JpemVSZXNwb25zZRIUCgxyZWRpcmVjdF91cmwYASABKAkiTAoTTG9naW5CeUVtYWlsUmVxdWVzdBINCgVlbWFpbBgBIAEoCRIQCghwYXNzd29yZBgCIAEoCRIUCgxjYXB0Y2hhX2NvZGUYAyABKAkiJQoUTG9naW5CeUVtYWlsUmVzcG9uc2USDQoFdG9rZW4YASABKAkibQofUmVzZXRQYXNzd29yZFdpdGhDYXB0Y2hhUmVxdWVzdBINCgVlbWFpbBgBIAEoCRITCgt2ZXJpZnlfY29kZRgCIAEoCRIQCghwYXNzd29yZBgDIAEoCRIUCgxjYXB0Y2hhX2NvZGUYBCABKAkiIgogUmVzZXRQYXNzd29yZFdpdGhDYXB0Y2hhUmVzcG9uc2UiLgodSW50ZXJuYWxHZXRVc2VyQnlFbWFpbFJlcXVlc3QSDQoFZW1haWwYASABKAkiMQoeSW50ZXJuYWxHZXRVc2VyQnlFbWFpbFJlc3BvbnNlEg8KB3VzZXJfaWQYASABKAkidgolU2VuZEVtYWlsVmVyaWZ5Q29kZVdpdGhDYXB0Y2hhUmVxdWVzdBIUCgxjYXB0Y2hhX2NvZGUYASABKAkSDQoFZW1haWwYAiABKAkSKAoGYWN0aW9uGAMgASgOMhgudXNlci52MS5TZW5kRW1haWxBY3Rpb24iSgomU2VuZEVtYWlsVmVyaWZ5Q29kZVdpdGhDYXB0Y2hhUmVzcG9uc2USIAoYcmVnaXN0ZXJlZF9wbGF0Zm9ybV9saXN0GAEgAygJIooBCh1Hb29nbGVBcHBPYXV0aENhbGxiYWNrUmVxdWVzdBIRCglnb29nbGVfaWQYASABKAkSFAoMYWNjZXNzX3Rva2VuGAIgASgJEi8KDGF1dGhfY29tbWFuZBgDIAEoCzIULnVzZXIudjEuQXV0aENvbW1hbmRIAIgBAUIPCg1fYXV0aF9jb21tYW5kIi8KHkdvb2dsZUFwcE9hdXRoQ2FsbGJhY2tSZXNwb25zZRINCgV0b2tlbhgBIAEoCSItChdBcHBsZVNwZWNpYWxBdXRoUmVxdWVzdBISCgpzcGVjaWFsX2lkGAEgASgJIikKGEFwcGxlU3BlY2lhbEF1dGhSZXNwb25zZRINCgV0b2tlbhgBIAEoCSKQAQoNQXBwbGVVc2VySW5mbxIpCgRuYW1lGAEgASgLMhsudXNlci52MS5BcHBsZVVzZXJJbmZvLk5hbWUSDQoFZW1haWwYAiABKAkSFgoOaWRlbnRpdHlfdG9rZW4YAyABKAkaLQoETmFtZRISCgpmaXJzdF9uYW1lGAEgASgJEhEKCWxhc3RfbmFtZRgCIAEoCSJwCh1XZWJBcHBsZU9hdXRoMkNhbGxiYWNrUmVxdWVzdBIMCgRjb2RlGAEgASgJEg0KBXN0YXRlGAIgASgJEikKBHVzZXIYAyABKAsyFi51c2VyLnYxLkFwcGxlVXNlckluZm9IAIgBAUIHCgVfdXNlciJJCh5XZWJBcHBsZU9hdXRoMkNhbGxiYWNrUmVzcG9uc2USFAoMcmVkaXJlY3RfdXJsGAEgASgJEhEKCWp3dF90b2tlbhgCIAEoCSLKAQocSW9zQXBwbGVPYXV0aENhbGxiYWNrUmVxdWVzdBIzChBhdXRoX2NvbW1hbmRfY21kGAEgASgLMhQudXNlci52MS5BdXRoQ29tbWFuZEgAiAEBEg0KBWVtYWlsGAIgASgJEhIKCmdpdmVuX25hbWUYAyABKAkSEwoLZmFtaWx5X25hbWUYBCABKAkSFQoNYXV0aF9hcHBsZV9pZBgFIAEoCRIRCglhdXRoX2NvZGUYBiABKAlCEwoRX2F1dGhfY29tbWFuZF9jbWQiLgodSW9zQXBwbGVPYXV0aENhbGxiYWNrUmVzcG9uc2USDQoFdG9rZW4YASABKAkiJAoRU3dpdGNoVXNlclJlcXVlc3QSDwoHdXNlcl9pZBgBIAEoCSIjChJTd2l0Y2hVc2VyUmVzcG9uc2USDQoFdG9rZW4YASABKAkiKwoaRXhjaGFuZ2VUb2tlbkJ5Q29kZVJlcXVlc3QSDQoFdG9rZW4YASABKAkiHQobRXhjaGFuZ2VUb2tlbkJ5Q29kZVJlc3BvbnNlKlsKCk9BdXRoMlR5cGUSHAoYT19BVVRIMl9UWVBFX1VOU1BFQ0lGSUVEEAASFwoTT19BVVRIMl9UWVBFX0dPT0dMRRABEhYKEk9fQVVUSDJfVFlQRV9BUFBMRRACMuwHChVVc2VyQXV0aFB1YmxpY1NlcnZpY2USVAoPUmVnaXN0ZXJCeUVtYWlsEh8udXNlci52MS5SZWdpc3RlckJ5RW1haWxSZXF1ZXN0GiAudXNlci52MS5SZWdpc3RlckJ5RW1haWxSZXNwb25zZRJUCg9PYXV0aDJBdXRob3JpemUSHy51c2VyLnYxLk9hdXRoMkF1dGhvcml6ZVJlcXVlc3QaIC51c2VyLnYxLk9hdXRoMkF1dGhvcml6ZVJlc3BvbnNlEksKDExvZ2luQnlFbWFpbBIcLnVzZXIudjEuTG9naW5CeUVtYWlsUmVxdWVzdBodLnVzZXIudjEuTG9naW5CeUVtYWlsUmVzcG9uc2USbwoYUmVzZXRQYXNzd29yZFdpdGhDYXB0Y2hhEigudXNlci52MS5SZXNldFBhc3N3b3JkV2l0aENhcHRjaGFSZXF1ZXN0GikudXNlci52MS5SZXNldFBhc3N3b3JkV2l0aENhcHRjaGFSZXNwb25zZRKBAQoeU2VuZEVtYWlsVmVyaWZ5Q29kZVdpdGhDYXB0Y2hhEi4udXNlci52MS5TZW5kRW1haWxWZXJpZnlDb2RlV2l0aENhcHRjaGFSZXF1ZXN0Gi8udXNlci52MS5TZW5kRW1haWxWZXJpZnlDb2RlV2l0aENhcHRjaGFSZXNwb25zZRJpChZHb29nbGVBcHBPYXV0aENhbGxiYWNrEiYudXNlci52MS5Hb29nbGVBcHBPYXV0aENhbGxiYWNrUmVxdWVzdBonLnVzZXIudjEuR29vZ2xlQXBwT2F1dGhDYWxsYmFja1Jlc3BvbnNlEmkKFldlYkFwcGxlT2F1dGgyQ2FsbGJhY2sSJi51c2VyLnYxLldlYkFwcGxlT2F1dGgyQ2FsbGJhY2tSZXF1ZXN0GicudXNlci52MS5XZWJBcHBsZU9hdXRoMkNhbGxiYWNrUmVzcG9uc2USZgoVSW9zQXBwbGVPYXV0aENhbGxiYWNrEiUudXNlci52MS5Jb3NBcHBsZU9hdXRoQ2FsbGJhY2tSZXF1ZXN0GiYudXNlci52MS5Jb3NBcHBsZU9hdXRoQ2FsbGJhY2tSZXNwb25zZRJFCgpTd2l0Y2hVc2VyEhoudXNlci52MS5Td2l0Y2hVc2VyUmVxdWVzdBobLnVzZXIudjEuU3dpdGNoVXNlclJlc3BvbnNlEmAKE0V4Y2hhbmdlVG9rZW5CeUNvZGUSIy51c2VyLnYxLkV4Y2hhbmdlVG9rZW5CeUNvZGVSZXF1ZXN0GiQudXNlci52MS5FeGNoYW5nZVRva2VuQnlDb2RlUmVzcG9uc2VCmgEKC2NvbS51c2VyLnYxQhNVc2VyQXV0aFB1YmxpY1Byb3RvUAFaOWdpdGxhYi5tb25pY2EuY24vdmlkYS9zZGsvYml6c2VydmVyLWdvLmdpdC91c2VyL3YxO3VzZXJ2MaICA1VYWKoCB1VzZXIuVjHKAgdVc2VyXFYx4gITVXNlclxWMVxHUEJNZXRhZGF0YeoCCFVzZXI6OlYxYgZwcm90bzM",[Ls]),H2=M(M2,0),D2=z("CidkYXNoYm9hcmRfdG9vbHMvdjEvZGFzaGJvYXJkX3Rvb2wucHJvdG8SEmRhc2hib2FyZF90b29scy52MSKSAQoiQ3JlYXRlT3JVcGRhdGVUcmFuc2xhdGVUYXNrUmVxdWVzdBIUCgd0YXNrX2lkGAEgASgDSACIAQESDgoGbW9kdWxlGAIgASgJEhMKC2Rlc2NyaXB0aW9uGAMgASgJEiUKBGRhdGEYBCABKAsyFy5nb29nbGUucHJvdG9idWYuU3RydWN0QgoKCF90YXNrX2lkIiUKI0NyZWF0ZU9yVXBkYXRlVHJhbnNsYXRlVGFza1Jlc3BvbnNlIl8KFFRyYW5zbGF0ZVRhc2tSZXF1ZXN0EhQKB3Rhc2tfaWQYASABKANIAIgBARIlCgRkYXRhGAIgASgLMhcuZ29vZ2xlLnByb3RvYnVmLlN0cnVjdEIKCghfdGFza19pZCI+ChVUcmFuc2xhdGVUYXNrUmVzcG9uc2USJQoEZGF0YRgBIAEoCzIXLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3QiYQoZTGlzdFRyYW5zbGF0ZVRhc2tzUmVxdWVzdBIPCgdtb2R1bGVzGAEgAygJEhUKBHBhZ2UYAiABKAVCB7pIBBoCKAESHAoJcGFnZV9zaXplGAMgASgFQgm6SAYaBBhkKAEizAEKDVRyYW5zbGF0ZVRhc2sSDwoHdGFza19pZBgBIAEoAxIOCgZtb2R1bGUYAiABKAkSEwoLZGVzY3JpcHRpb24YAyABKAkSJQoEZGF0YRgEIAEoCzIXLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3QSLgoKY3JlYXRlZF9hdBgFIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASLgoKdXBkYXRlZF9hdBgGIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAiXQoaTGlzdFRyYW5zbGF0ZVRhc2tzUmVzcG9uc2USMAoFdGFza3MYASADKAsyIS5kYXNoYm9hcmRfdG9vbHMudjEuVHJhbnNsYXRlVGFzaxINCgV0b3RhbBgCIAEoAyI7ChdHZXRUcmFuc2xhdGVUYXNrUmVxdWVzdBIUCgd0YXNrX2lkGAEgASgDSACIAQFCCgoIX3Rhc2tfaWQiSwoYR2V0VHJhbnNsYXRlVGFza1Jlc3BvbnNlEi8KBHRhc2sYASABKAsyIS5kYXNoYm9hcmRfdG9vbHMudjEuVHJhbnNsYXRlVGFzayItChpEZWxldGVUcmFuc2xhdGVUYXNrUmVxdWVzdBIPCgd0YXNrX2lkGAEgASgDIh0KG0RlbGV0ZVRyYW5zbGF0ZVRhc2tSZXNwb25zZTLzBAoURGFzaGJvYXJkVG9vbFNlcnZpY2USkAEKG0NyZWF0ZU9yVXBkYXRlVHJhbnNsYXRlVGFzaxI2LmRhc2hib2FyZF90b29scy52MS5DcmVhdGVPclVwZGF0ZVRyYW5zbGF0ZVRhc2tSZXF1ZXN0GjcuZGFzaGJvYXJkX3Rvb2xzLnYxLkNyZWF0ZU9yVXBkYXRlVHJhbnNsYXRlVGFza1Jlc3BvbnNlIgASZgoNVHJhbnNsYXRlVGFzaxIoLmRhc2hib2FyZF90b29scy52MS5UcmFuc2xhdGVUYXNrUmVxdWVzdBopLmRhc2hib2FyZF90b29scy52MS5UcmFuc2xhdGVUYXNrUmVzcG9uc2UiABJ1ChJMaXN0VHJhbnNsYXRlVGFza3MSLS5kYXNoYm9hcmRfdG9vbHMudjEuTGlzdFRyYW5zbGF0ZVRhc2tzUmVxdWVzdBouLmRhc2hib2FyZF90b29scy52MS5MaXN0VHJhbnNsYXRlVGFza3NSZXNwb25zZSIAEm8KEEdldFRyYW5zbGF0ZVRhc2sSKy5kYXNoYm9hcmRfdG9vbHMudjEuR2V0VHJhbnNsYXRlVGFza1JlcXVlc3QaLC5kYXNoYm9hcmRfdG9vbHMudjEuR2V0VHJhbnNsYXRlVGFza1Jlc3BvbnNlIgASeAoTRGVsZXRlVHJhbnNsYXRlVGFzaxIuLmRhc2hib2FyZF90b29scy52MS5EZWxldGVUcmFuc2xhdGVUYXNrUmVxdWVzdBovLmRhc2hib2FyZF90b29scy52MS5EZWxldGVUcmFuc2xhdGVUYXNrUmVzcG9uc2UiAELiAQoWY29tLmRhc2hib2FyZF90b29scy52MUISRGFzaGJvYXJkVG9vbFByb3RvUAFaT2dpdGxhYi5tb25pY2EuY24vdmlkYS9zZGsvYml6c2VydmVyLWdvLmdpdC9kYXNoYm9hcmRfdG9vbHMvdjE7ZGFzaGJvYXJkX3Rvb2xzdjGiAgNEWFiqAhFEYXNoYm9hcmRUb29scy5WMcoCEURhc2hib2FyZFRvb2xzXFYx4gIdRGFzaGJvYXJkVG9vbHNcVjFcR1BCTWV0YWRhdGHqAhJEYXNoYm9hcmRUb29sczo6VjFiBnByb3RvMw",[He,te,Ye]),j2=M(D2,0),Br=z("Ch10ZWFtL3YxL3RlYW1fbWFuYWdlbWVudC5wcm90bxIHdGVhbS52MSI8CgZBdmF0YXISEQoJZmlsZV9uYW1lGAEgASgJEhEKCW1pbWVfdHlwZRgCIAEoCRIMCgRkYXRhGAMgASgJIqsBChFDcmVhdGVUZWFtUmVxdWVzdBIMCgRuYW1lGAEgASgJEg0KBXNlYXRzGAIgASgFEh8KBmF2YXRhchgDIAEoCzIPLnRlYW0udjEuQXZhdGFyEhYKDmF1dG9fZGVkdWN0aW9uGAQgASgIEh8KF3NpbmdsZV9kZWR1Y3Rpb25fYW1vdW50GAUgASgFEh8KF21vbnRobHlfZGVkdWN0aW9uX2xpbWl0GAYgASgFInYKEkNyZWF0ZVRlYW1SZXNwb25zZRIQCgh0ZWFtX3VpZBgBIAEoCRIPCgd1c2VyX2lkGAIgASgJEgwKBG5hbWUYAyABKAkSDgoGYXZhdGFyGAQgASgJEh8KBHN0ZXAYBSABKA4yES50ZWFtLnYxLlRlYW1TdGVwIkYKFVVwZGF0ZVRlYW1JbmZvUmVxdWVzdBIMCgRuYW1lGAEgASgJEh8KBmF2YXRhchgCIAEoCzIPLnRlYW0udjEuQXZhdGFyInMKFlVwZGF0ZVRlYW1JbmZvUmVzcG9uc2USEAoIdGVhbV91aWQYASABKAkSEQoJdGVhbV9uYW1lGAIgASgJEhMKC3RlYW1fYXZhdGFyGAMgASgJEh8KBHN0ZXAYBCABKA4yES50ZWFtLnYxLlRlYW1TdGVwIkIKCkludml0ZVVzZXISDQoFZW1haWwYASABKAkSJQoEcm9sZRgCIAEoDjIXLnRlYW0udjEuVGVhbU1lbWJlclJvbGUiUgoWQmF0Y2hJbnZpdGVVc2VyUmVxdWVzdBIUCgxpc19yZV9pbnZpdGUYASABKAgSIgoFdXNlcnMYAiADKAsyEy50ZWFtLnYxLkludml0ZVVzZXIiGQoXQmF0Y2hJbnZpdGVVc2VyUmVzcG9uc2UiKQoSRGlzbWlzc1RlYW1SZXF1ZXN0EhMKC3ZlcmlmeV9jb2RlGAEgASgJIiYKE0Rpc21pc3NUZWFtUmVzcG9uc2USDwoHdXNlcl9pZBgBIAEoCSIkChNUcmFuc2ZlclRlYW1SZXF1ZXN0Eg0KBWVtYWlsGAEgASgJIhYKFFRyYW5zZmVyVGVhbVJlc3BvbnNlIkEKGEJhdGNoUmVtb3ZlTWVtYmVyUmVxdWVzdBIVCg10ZWFtX3VzZXJfaWRzGAEgAygJEg4KBmVtYWlscxgCIAMoCSIbChlCYXRjaFJlbW92ZU1lbWJlclJlc3BvbnNlIlYKF1VwZGF0ZU1lbWJlclJvbGVSZXF1ZXN0EhQKDHRlYW1fdXNlcl9pZBgBIAEoCRIlCgRyb2xlGAIgASgOMhcudGVhbS52MS5UZWFtTWVtYmVyUm9sZSIaChhVcGRhdGVNZW1iZXJSb2xlUmVzcG9uc2UiOAoVVXBkYXRlVGVhbVN0ZXBSZXF1ZXN0Eh8KBHN0ZXAYASABKA4yES50ZWFtLnYxLlRlYW1TdGVwIhgKFlVwZGF0ZVRlYW1TdGVwUmVzcG9uc2UiTwoXVXBkYXRlSW52aXRlUm9sZVJlcXVlc3QSDQoFZW1haWwYASABKAkSJQoEcm9sZRgCIAEoDjIXLnRlYW0udjEuVGVhbU1lbWJlclJvbGUiGgoYVXBkYXRlSW52aXRlUm9sZVJlc3BvbnNlIn0KIVVwZGF0ZVRlYW1EZWR1Y3Rpb25TZXR0aW5nUmVxdWVzdBIWCg5hdXRvX2RlZHVjdGlvbhgBIAEoCBIfChdzaW5nbGVfZGVkdWN0aW9uX2Ftb3VudBgCIAEoBRIfChdtb250aGx5X2RlZHVjdGlvbl9saW1pdBgDIAEoBSIkCiJVcGRhdGVUZWFtRGVkdWN0aW9uU2V0dGluZ1Jlc3BvbnNlKk4KCFRlYW1UeXBlEhkKFVRFQU1fVFlQRV9VTlNQRUNJRklFRBAAEhQKEFRFQU1fVFlQRV9OT1JNQUwQARIRCg1URUFNX1RZUEVfRURVEAIqiQEKCFRlYW1TdGVwEhkKFVRFQU1fU1RFUF9VTlNQRUNJRklFRBAAEh4KGlRFQU1fU1RFUF9DSE9PU0VfU1VCU0NSSUJFEAESGQoVVEVBTV9TVEVQX1VQREFURV9JTkZPEAISEQoNVEVBTV9TVEVQX1BBWRADEhQKEFRFQU1fU1RFUF9GSU5JU0gQBCqHAQoOVGVhbU1lbWJlclJvbGUSIAocVEVBTV9NRU1CRVJfUk9MRV9VTlNQRUNJRklFRBAAEhoKFlRFQU1fTUVNQkVSX1JPTEVfT1dORVIQARIaChZURUFNX01FTUJFUl9ST0xFX0FETUlOEAISGwoXVEVBTV9NRU1CRVJfUk9MRV9NRU1CRVIQAzL2BgoVVGVhbU1hbmFnZW1lbnRTZXJ2aWNlEkUKCkNyZWF0ZVRlYW0SGi50ZWFtLnYxLkNyZWF0ZVRlYW1SZXF1ZXN0GhsudGVhbS52MS5DcmVhdGVUZWFtUmVzcG9uc2USUQoOVXBkYXRlVGVhbUluZm8SHi50ZWFtLnYxLlVwZGF0ZVRlYW1JbmZvUmVxdWVzdBofLnRlYW0udjEuVXBkYXRlVGVhbUluZm9SZXNwb25zZRJUCg9CYXRjaEludml0ZVVzZXISHy50ZWFtLnYxLkJhdGNoSW52aXRlVXNlclJlcXVlc3QaIC50ZWFtLnYxLkJhdGNoSW52aXRlVXNlclJlc3BvbnNlEkgKC0Rpc21pc3NUZWFtEhsudGVhbS52MS5EaXNtaXNzVGVhbVJlcXVlc3QaHC50ZWFtLnYxLkRpc21pc3NUZWFtUmVzcG9uc2USSwoMVHJhbnNmZXJUZWFtEhwudGVhbS52MS5UcmFuc2ZlclRlYW1SZXF1ZXN0Gh0udGVhbS52MS5UcmFuc2ZlclRlYW1SZXNwb25zZRJaChFCYXRjaFJlbW92ZU1lbWJlchIhLnRlYW0udjEuQmF0Y2hSZW1vdmVNZW1iZXJSZXF1ZXN0GiIudGVhbS52MS5CYXRjaFJlbW92ZU1lbWJlclJlc3BvbnNlElcKEFVwZGF0ZU1lbWJlclJvbGUSIC50ZWFtLnYxLlVwZGF0ZU1lbWJlclJvbGVSZXF1ZXN0GiEudGVhbS52MS5VcGRhdGVNZW1iZXJSb2xlUmVzcG9uc2USUQoOVXBkYXRlVGVhbVN0ZXASHi50ZWFtLnYxLlVwZGF0ZVRlYW1TdGVwUmVxdWVzdBofLnRlYW0udjEuVXBkYXRlVGVhbVN0ZXBSZXNwb25zZRJXChBVcGRhdGVJbnZpdGVSb2xlEiAudGVhbS52MS5VcGRhdGVJbnZpdGVSb2xlUmVxdWVzdBohLnRlYW0udjEuVXBkYXRlSW52aXRlUm9sZVJlc3BvbnNlEnUKGlVwZGF0ZVRlYW1EZWR1Y3Rpb25TZXR0aW5nEioudGVhbS52MS5VcGRhdGVUZWFtRGVkdWN0aW9uU2V0dGluZ1JlcXVlc3QaKy50ZWFtLnYxLlVwZGF0ZVRlYW1EZWR1Y3Rpb25TZXR0aW5nUmVzcG9uc2VCmgEKC2NvbS50ZWFtLnYxQhNUZWFtTWFuYWdlbWVudFByb3RvUAFaOWdpdGxhYi5tb25pY2EuY24vdmlkYS9zZGsvYml6c2VydmVyLWdvLmdpdC90ZWFtL3YxO3RlYW12MaICA1RYWKoCB1RlYW0uVjHKAgdUZWFtXFYx4gITVGVhbVxWMVxHUEJNZXRhZGF0YeoCCFRlYW06OlYxYgZwcm90bzM"),_2=M(Br,0),O2=z("ChJ0ZWFtL3YxL3RlYW0ucHJvdG8SB3RlYW0udjEiUQoYTGlzdFRlYW1JbnZvaWNlc1Jlc3BvbnNlEiYKCGludm9pY2VzGAEgAygLMhQudGVhbS52MS5UZWFtSW52b2ljZRINCgV0b3RhbBgCIAEoBSKDAQoLVGVhbUludm9pY2USEgoKaW52b2ljZV9pZBgBIAEoCRIOCgZhbW91bnQYAiABKAMSEQoJcHVyY2hhc2VyGAMgASgJEhMKC2ludm9pY2VfdXJsGAQgASgJEigKBGRhdGUYBSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wIjoKF0xpc3RUZWFtSW52b2ljZXNSZXF1ZXN0EgwKBHBhZ2UYASABKAUSEQoJcGFnZV9zaXplGAIgASgFIjIKD0xpc3RUZWFtUmVxdWVzdBIMCgRwYWdlGAEgASgFEhEKCXBhZ2Vfc2l6ZRgCIAEoBSK0AQoEVGVhbRIQCgh0ZWFtX3VpZBgBIAEoCRIMCgRuYW1lGAIgASgJEg4KBmF2YXRhchgDIAEoCRIPCgd1c2VyX2lkGAQgASgJEiMKBnN0YXR1cxgFIAEoDjITLnRlYW0udjEuVGVhbVN0YXR1cxIlCgRyb2xlGAYgASgOMhcudGVhbS52MS5UZWFtTWVtYmVyUm9sZRIfCgR0eXBlGAcgASgOMhEudGVhbS52MS5UZWFtVHlwZSJ+ChBMaXN0VGVhbVJlc3BvbnNlEhwKBXRlYW1zGAEgAygLMg0udGVhbS52MS5UZWFtEhMKC3RvdGFsX2NvdW50GAIgASgFEg8KB3VzZXJfaWQYAyABKAkSEQoJdXNlcl9uYW1lGAQgASgJEhMKC3VzZXJfYXZhdGFyGAUgASgJIioKD0pvaW5UZWFtUmVxdWVzdBIXCg9pbnZpdGF0aW9uX2NvZGUYASABKAkidAoQSm9pblRlYW1SZXNwb25zZRIPCgd1c2VyX2lkGAEgASgJEhAKCHRlYW1fdWlkGAIgASgJEgwKBG5hbWUYAyABKAkSDgoGYXZhdGFyGAQgASgJEh8KBHR5cGUYBSABKA4yES50ZWFtLnYxLlRlYW1UeXBlIhEKD0V4aXRUZWFtUmVxdWVzdCISChBFeGl0VGVhbVJlc3BvbnNlIiYKEkdldFRlYW1JbmZvUmVxdWVzdBIQCgh0ZWFtX3VpZBgBIAEoCSLLAwoTR2V0VGVhbUluZm9SZXNwb25zZRIQCgh0ZWFtX3VpZBgBIAEoCRIMCgRuYW1lGAIgASgJEg4KBmF2YXRhchgDIAEoCRINCgVzZWF0cxgEIAEoBRIuCgpjcmVhdGVkX2F0GAUgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIWCg5hdXRvX2RlZHVjdGlvbhgGIAEoCBIfChdzaW5nbGVfZGVkdWN0aW9uX2Ftb3VudBgHIAEoBRIfChdtb250aGx5X2RlZHVjdGlvbl9saW1pdBgIIAEoBRIfCgRzdGVwGAkgASgOMhEudGVhbS52MS5UZWFtU3RlcBIlCgRyb2xlGAogASgOMhcudGVhbS52MS5UZWFtTWVtYmVyUm9sZRIUCgxtZW1iZXJfY291bnQYCyABKAUSEwoLdmlwX3ZlcnNpb24YDCABKAkSGgoSY3VycmVudF9wZXJpb2RfZW5kGA0gASgDEhEKCWlzX3llYXJseRgOIAEoCBIUCgx0ZWFtX3VzZXJfaWQYDyABKAkSEgoKbmV4dF9zZWF0cxgQIAEoBRIfCgR0eXBlGBEgASgOMhEudGVhbS52MS5UZWFtVHlwZSLAAQoZTGlzdFRlYW1DcmVkaXRzTG9nUmVxdWVzdBIzCgpzdGFydF9kYXRlGAEgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcEgAiAEBEjEKCGVuZF9kYXRlGAIgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcEgBiAEBEgwKBHBhZ2UYAyABKAUSEQoJcGFnZV9zaXplGAQgASgFQg0KC19zdGFydF9kYXRlQgsKCV9lbmRfZGF0ZSJRChpMaXN0VGVhbUNyZWRpdHNMb2dSZXNwb25zZRIkCgRsb2dzGAEgAygLMhYudGVhbS52MS5UZWFtQ3JlZGl0TG9nEg0KBXRvdGFsGAIgASgFIogBCg1UZWFtQ3JlZGl0TG9nEg8KB3VzZXJfaWQYASABKAkSEQoJdXNlcl9uYW1lGAIgASgJEhMKC3VzZXJfYXZhdGFyGAMgASgJEg8KB2NyZWRpdHMYBCABKAUSLQoJY3JlYXRlX2F0GAUgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCKlAQofTGlzdFRlYW1DcmVkaXRzU3RhdGlzdGljUmVxdWVzdBIzCgpzdGFydF9kYXRlGAEgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcEgAiAEBEjEKCGVuZF9kYXRlGAIgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcEgBiAEBQg0KC19zdGFydF9kYXRlQgsKCV9lbmRfZGF0ZSJaCiBMaXN0VGVhbUNyZWRpdHNTdGF0aXN0aWNSZXNwb25zZRI2CglzdGF0aXN0aWMYASADKAsyIy50ZWFtLnYxLlRlYW1TZXNzaW9uQ3JlZGl0U3RhdGlzdGljIlcKGlRlYW1TZXNzaW9uQ3JlZGl0U3RhdGlzdGljEigKBGRhdGUYASABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEg8KB2NyZWRpdHMYAiABKAUiigEKFUxpc3RUZWFtTWVtYmVyUmVxdWVzdBIMCgRwYWdlGAEgASgFEhEKCXBhZ2Vfc2l6ZRgCIAEoBRIXCgpzZWFyY2hfa2V5GAMgASgJSACIAQESKAoLZmlsdGVyX3R5cGUYBCABKA4yEy50ZWFtLnYxLkZpbHRlclR5cGVCDQoLX3NlYXJjaF9rZXkimwEKClRlYW1NZW1iZXISEAoIdXNlcl91aWQYASABKAkSDAoEbmFtZRgCIAEoCRINCgVlbWFpbBgDIAEoCRIOCgZhdmF0YXIYBCABKAkSJwoGc3RhdHVzGAUgASgOMhcudGVhbS52MS5UZWFtVXNlclN0YXR1cxIlCgRyb2xlGAYgASgOMhcudGVhbS52MS5UZWFtTWVtYmVyUm9sZSJTChZMaXN0VGVhbU1lbWJlclJlc3BvbnNlEiQKB21lbWJlcnMYASADKAsyEy50ZWFtLnYxLlRlYW1NZW1iZXISEwoLdG90YWxfY291bnQYAiABKAUqngEKClRlYW1TdGF0dXMSGwoXVEVBTV9TVEFUVVNfVU5TUEVDSUZJRUQQABIXChNURUFNX1NUQVRVU19BQ1RJVkVEEAESFwoTVEVBTV9TVEFUVVNfRVhQSVJFRBACEhwKGFRFQU1fU1RBVFVTX05PX1NVQlNDUklCRRADEiMKH1RFQU1fU1RBVFVTX1NVQlNDUklCRV9DQU5DRUxMRUQQBCpbCgpGaWx0ZXJUeXBlEhsKF0ZJTFRFUl9UWVBFX1VOU1BFQ0lGSUVEEAASFwoTRklMVEVSX1RZUEVfQUxMVVNFUhABEhcKE0ZJTFRFUl9UWVBFX1BFTkRJTkcQAiqpAQoOVGVhbVVzZXJTdGF0dXMSIAocVEVBTV9VU0VSX1NUQVRVU19VTlNQRUNJRklFRBAAEhwKGFRFQU1fVVNFUl9TVEFUVVNfUEVORElORxABEh0KGVRFQU1fVVNFUl9TVEFUVVNfQUNDRVBURUQQAhIbChdURUFNX1VTRVJfU1RBVFVTX0VYSVRFRBADEhsKF1RFQU1fVVNFUl9TVEFUVVNfS0lDS0VEEAQylgUKC1RlYW1TZXJ2aWNlEj8KCExpc3RUZWFtEhgudGVhbS52MS5MaXN0VGVhbVJlcXVlc3QaGS50ZWFtLnYxLkxpc3RUZWFtUmVzcG9uc2USPwoISm9pblRlYW0SGC50ZWFtLnYxLkpvaW5UZWFtUmVxdWVzdBoZLnRlYW0udjEuSm9pblRlYW1SZXNwb25zZRI/CghFeGl0VGVhbRIYLnRlYW0udjEuRXhpdFRlYW1SZXF1ZXN0GhkudGVhbS52MS5FeGl0VGVhbVJlc3BvbnNlEkgKC0dldFRlYW1JbmZvEhsudGVhbS52MS5HZXRUZWFtSW5mb1JlcXVlc3QaHC50ZWFtLnYxLkdldFRlYW1JbmZvUmVzcG9uc2USUQoOTGlzdFRlYW1NZW1iZXISHi50ZWFtLnYxLkxpc3RUZWFtTWVtYmVyUmVxdWVzdBofLnRlYW0udjEuTGlzdFRlYW1NZW1iZXJSZXNwb25zZRJdChJMaXN0VGVhbUNyZWRpdHNMb2cSIi50ZWFtLnYxLkxpc3RUZWFtQ3JlZGl0c0xvZ1JlcXVlc3QaIy50ZWFtLnYxLkxpc3RUZWFtQ3JlZGl0c0xvZ1Jlc3BvbnNlEm8KGExpc3RUZWFtQ3JlZGl0c1N0YXRpc3RpYxIoLnRlYW0udjEuTGlzdFRlYW1DcmVkaXRzU3RhdGlzdGljUmVxdWVzdBopLnRlYW0udjEuTGlzdFRlYW1DcmVkaXRzU3RhdGlzdGljUmVzcG9uc2USVwoQTGlzdFRlYW1JbnZvaWNlcxIgLnRlYW0udjEuTGlzdFRlYW1JbnZvaWNlc1JlcXVlc3QaIS50ZWFtLnYxLkxpc3RUZWFtSW52b2ljZXNSZXNwb25zZUKQAQoLY29tLnRlYW0udjFCCVRlYW1Qcm90b1ABWjlnaXRsYWIubW9uaWNhLmNuL3ZpZGEvc2RrL2JpenNlcnZlci1nby5naXQvdGVhbS92MTt0ZWFtdjGiAgNUWFiqAgdUZWFtLlYxygIHVGVhbVxWMeICE1RlYW1cVjFcR1BCTWV0YWRhdGHqAghUZWFtOjpWMWIGcHJvdG8z",[te,Br]),P2=M(O2,0),$2=z("Chx0ZWFtL3YxL2VkdV90ZWFtX2FkbWluLnByb3RvEgd0ZWFtLnYxImEKFENyZWF0ZUVkdVRlYW1SZXF1ZXN0EgwKBG5hbWUYASABKAkSDgoGYXZhdGFyGAIgASgJEhQKDGVtYWlsX3N1ZmZpeBgDIAMoCRIVCg1zZXNzaW9uX2xpbWl0GAQgASgFIhcKFUNyZWF0ZUVkdVRlYW1SZXNwb25zZSJrChhVcGRhdGVFZHVUZWFtSW5mb1JlcXVlc3QSCwoDdWlkGAEgASgJEgwKBG5hbWUYAiABKAkSDgoGYXZhdGFyGAMgASgJEg0KBXNlYXRzGAQgASgFEhUKDXNlc3Npb25fbGltaXQYBSABKAUiGwoZVXBkYXRlRWR1VGVhbUluZm9SZXNwb25zZSKYAQoTTGlzdEVkdVRlYW1zUmVxdWVzdBIQCgN1aWQYASABKAlIAIgBARIRCgRuYW1lGAIgASgJSAGIAQESGQoMZW1haWxfc3VmZml4GAMgASgJSAKIAQESDAoEcGFnZRgEIAEoBRIRCglwYWdlX3NpemUYBSABKAVCBgoEX3VpZEIHCgVfbmFtZUIPCg1fZW1haWxfc3VmZml4Iq8BCgdFZHVUZWFtEgsKA3VpZBgBIAEoCRIMCgRuYW1lGAIgASgJEg4KBmF2YXRhchgDIAEoCRIUCgxlbWFpbF9zdWZmaXgYBCADKAkSFQoNc2Vzc2lvbl9saW1pdBgFIAEoBRIcChRjdXJyZW50X21lbWJlcl9jb3VudBgGIAEoBRIuCgpjcmVhdGVkX2F0GAcgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCJGChRMaXN0RWR1VGVhbXNSZXNwb25zZRIfCgV0ZWFtcxgBIAMoCzIQLnRlYW0udjEuRWR1VGVhbRINCgV0b3RhbBgCIAEoBSKIAQoZTGlzdEVkdVRlYW1NZW1iZXJzUmVxdWVzdBIQCgh0ZWFtX3VpZBgBIAEoCRISCgVlbWFpbBgCIAEoCUgAiAEBEhEKBG5hbWUYAyABKAlIAYgBARIMCgRwYWdlGAQgASgFEhEKCXBhZ2Vfc2l6ZRgFIAEoBUIICgZfZW1haWxCBwoFX25hbWUigQEKDUVkdVRlYW1NZW1iZXISDwoHdXNlcl9pZBgBIAEoCRIMCgRuYW1lGAIgASgJEg0KBWVtYWlsGAMgASgJEhIKCnZpcF9zdGF0dXMYBCABKAkSLgoKY3JlYXRlZF9hdBgFIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAiVAoaTGlzdEVkdVRlYW1NZW1iZXJzUmVzcG9uc2USJwoHbWVtYmVycxgBIAMoCzIWLnRlYW0udjEuRWR1VGVhbU1lbWJlchINCgV0b3RhbBgCIAEoBSIvChtHZXRFZHVUZWFtU3RhdGlzdGljc1JlcXVlc3QSEAoIdGVhbV91aWQYASABKAkigwEKHEdldEVkdVRlYW1TdGF0aXN0aWNzUmVzcG9uc2USHAoUY3VycmVudF9tZW1iZXJfY291bnQYASABKAUSFQoNc2Vzc2lvbl9jb3VudBgCIAEoBRIWCg5yZXNvdXJjZV91c2FnZRgDIAEoBRIWCg5yZXNvdXJjZV9xdW90YRgEIAEoBSJ3ChpMaXN0RWR1VGVhbVNlc3Npb25zUmVxdWVzdBIQCgh0ZWFtX3VpZBgBIAEoCRIXCgpzZXNzaW9uX2lkGAIgASgJSACIAQESDAoEcGFnZRgDIAEoBRIRCglwYWdlX3NpemUYBCABKAVCDQoLX3Nlc3Npb25faWQihwEKDkVkdVRlYW1TZXNzaW9uEhIKCnNlc3Npb25faWQYASABKAkSDQoFdGl0bGUYAiABKAkSEgoKY3JlYXRlcl9pZBgDIAEoCRIWCg5jb25zdW1lX3BvaW50cxgEIAEoBRIRCglpc19zaGFyZWQYBSABKAgSEwoLY3JlYXRlX3RpbWUYBiABKAMiVwobTGlzdEVkdVRlYW1TZXNzaW9uc1Jlc3BvbnNlEikKCHNlc3Npb25zGAEgAygLMhcudGVhbS52MS5FZHVUZWFtU2Vzc2lvbhINCgV0b3RhbBgCIAEoBSIoChREZWxldGVFZHVUZWFtUmVxdWVzdBIQCgh0ZWFtX3VpZBgBIAEoCSIXChVEZWxldGVFZHVUZWFtUmVzcG9uc2UyhAUKE0VkdVRlYW1BZG1pblNlcnZpY2USTgoNQ3JlYXRlRWR1VGVhbRIdLnRlYW0udjEuQ3JlYXRlRWR1VGVhbVJlcXVlc3QaHi50ZWFtLnYxLkNyZWF0ZUVkdVRlYW1SZXNwb25zZRJaChFVcGRhdGVFZHVUZWFtSW5mbxIhLnRlYW0udjEuVXBkYXRlRWR1VGVhbUluZm9SZXF1ZXN0GiIudGVhbS52MS5VcGRhdGVFZHVUZWFtSW5mb1Jlc3BvbnNlEksKDExpc3RFZHVUZWFtcxIcLnRlYW0udjEuTGlzdEVkdVRlYW1zUmVxdWVzdBodLnRlYW0udjEuTGlzdEVkdVRlYW1zUmVzcG9uc2USXQoSTGlzdEVkdVRlYW1NZW1iZXJzEiIudGVhbS52MS5MaXN0RWR1VGVhbU1lbWJlcnNSZXF1ZXN0GiMudGVhbS52MS5MaXN0RWR1VGVhbU1lbWJlcnNSZXNwb25zZRJjChRHZXRFZHVUZWFtU3RhdGlzdGljcxIkLnRlYW0udjEuR2V0RWR1VGVhbVN0YXRpc3RpY3NSZXF1ZXN0GiUudGVhbS52MS5HZXRFZHVUZWFtU3RhdGlzdGljc1Jlc3BvbnNlEmAKE0xpc3RFZHVUZWFtU2Vzc2lvbnMSIy50ZWFtLnYxLkxpc3RFZHVUZWFtU2Vzc2lvbnNSZXF1ZXN0GiQudGVhbS52MS5MaXN0RWR1VGVhbVNlc3Npb25zUmVzcG9uc2USTgoNRGVsZXRlRWR1VGVhbRIdLnRlYW0udjEuRGVsZXRlRWR1VGVhbVJlcXVlc3QaHi50ZWFtLnYxLkRlbGV0ZUVkdVRlYW1SZXNwb25zZUKYAQoLY29tLnRlYW0udjFCEUVkdVRlYW1BZG1pblByb3RvUAFaOWdpdGxhYi5tb25pY2EuY24vdmlkYS9zZGsvYml6c2VydmVyLWdvLmdpdC90ZWFtL3YxO3RlYW12MaICA1RYWKoCB1RlYW0uVjHKAgdUZWFtXFYx4gITVGVhbVxWMVxHUEJNZXRhZGF0YeoCCFRlYW06OlYxYgZwcm90bzM",[te]),q2=M($2,0),ep=z("Chl0ZWFtL3YxL3RlYW1fcHVibGljLnByb3RvEgd0ZWFtLnYxIjcKHEdldFRlYW1JbnZpdGF0aW9uSW5mb1JlcXVlc3QSFwoPaW52aXRhdGlvbl9jb2RlGAEgASgJIqUBCh1HZXRUZWFtSW52aXRhdGlvbkluZm9SZXNwb25zZRIUCgxpbnZpdGVyX25hbWUYASABKAkSFgoOaW52aXRlcl9hdmF0YXIYAiABKAkSEQoJdGVhbV9uYW1lGAMgASgJEhMKC3RlYW1fYXZhdGFyGAQgASgJEg0KBWVtYWlsGAUgASgJEh8KBHR5cGUYBiABKA4yES50ZWFtLnYxLlRlYW1UeXBlMnsKEVRlYW1QdWJsaWNTZXJ2aWNlEmYKFUdldFRlYW1JbnZpdGF0aW9uSW5mbxIlLnRlYW0udjEuR2V0VGVhbUludml0YXRpb25JbmZvUmVxdWVzdBomLnRlYW0udjEuR2V0VGVhbUludml0YXRpb25JbmZvUmVzcG9uc2VClgEKC2NvbS50ZWFtLnYxQg9UZWFtUHVibGljUHJvdG9QAVo5Z2l0bGFiLm1vbmljYS5jbi92aWRhL3Nkay9iaXpzZXJ2ZXItZ28uZ2l0L3RlYW0vdjE7dGVhbXYxogIDVFhYqgIHVGVhbS5WMcoCB1RlYW1cVjHiAhNUZWFtXFYxXEdQQk1ldGFkYXRh6gIIVGVhbTo6VjFiBnByb3RvMw",[Br]),tp=M(ep,0),Ts=z("Chxrbm93bGVkZ2UvdjEva25vd2xlZGdlLnByb3RvEgxrbm93bGVkZ2UudjEi9gIKCUtub3dsZWRnZRILCgN1aWQYASABKAkSDAoEbmFtZRgCIAEoCRIPCgdjb250ZW50GAMgASgJEg8KB3RyaWdnZXIYBCABKAkSDwoHZW5hYmxlZBgFIAEoCBITCgtzZXNzaW9uX3VpZBgGIAEoCRIZChFzZXNzaW9uX2V2ZW50X3VpZBgHIAEoCRIuCgpjcmVhdGVkX2F0GAggASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIuCgp1cGRhdGVkX2F0GAkgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIpCgRraW5kGAogASgOMhsua25vd2xlZGdlLnYxLktub3dsZWRnZUtpbmQSEAoIc2hvcnRfaWQYCyABKAkSNAoKdXNhZ2VfdHlwZRgMIAEoDjIgLmtub3dsZWRnZS52MS5Lbm93bGVkZ2VVc2FnZVR5cGUSGAoQdW5pcXVlX2luY19pbmRleBgNIAEoAyLTAwoOS25vd2xlZGdlRXZlbnQSCwoDdWlkGAEgASgJEgwKBG5hbWUYAiABKAkSDwoHY29udGVudBgDIAEoCRIPCgd0cmlnZ2VyGAQgASgJEjIKBnN0YXR1cxgFIAEoDjIiLmtub3dsZWRnZS52MS5Lbm93bGVkZ2VFdmVudFN0YXR1cxITCgtzZXNzaW9uX3VpZBgGIAEoCRIZChFzZXNzaW9uX2V2ZW50X3VpZBgHIAEoCRIuCgpjcmVhdGVkX2F0GAggASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIuCgp1cGRhdGVkX2F0GAkgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIuCgRraW5kGAogASgOMiAua25vd2xlZGdlLnYxLktub3dsZWRnZUV2ZW50S2luZBIfChJrbm93bGVkZ2Vfc2hvcnRfaWQYCyABKAlIAIgBARIVCghzaG9ydF9pZBgMIAEoCUgBiAEBEjQKCnVzYWdlX3R5cGUYDSABKA4yIC5rbm93bGVkZ2UudjEuS25vd2xlZGdlVXNhZ2VUeXBlQhUKE19rbm93bGVkZ2Vfc2hvcnRfaWRCCwoJX3Nob3J0X2lkItcDChJTdWdnZXN0ZWRLbm93bGVkZ2USCwoDdWlkGAEgASgJEgwKBG5hbWUYAiABKAkSDwoHY29udGVudBgDIAEoCRIPCgd0cmlnZ2VyGAQgASgJEjIKBnN0YXR1cxgFIAEoDjIiLmtub3dsZWRnZS52MS5Lbm93bGVkZ2VFdmVudFN0YXR1cxITCgtzZXNzaW9uX3VpZBgGIAEoCRIZChFzZXNzaW9uX2V2ZW50X3VpZBgHIAEoCRIuCgpjcmVhdGVkX2F0GAggASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIuCgp1cGRhdGVkX2F0GAkgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIuCgRraW5kGAogASgOMiAua25vd2xlZGdlLnYxLktub3dsZWRnZUV2ZW50S2luZBIfChJrbm93bGVkZ2Vfc2hvcnRfaWQYCyABKAlIAIgBARIVCghzaG9ydF9pZBgMIAEoCUgBiAEBEjQKCnVzYWdlX3R5cGUYDSABKA4yIC5rbm93bGVkZ2UudjEuS25vd2xlZGdlVXNhZ2VUeXBlQhUKE19rbm93bGVkZ2Vfc2hvcnRfaWRCCwoJX3Nob3J0X2lkItIBChRMaXN0S25vd2xlZGdlUmVxdWVzdBIOCgZvZmZzZXQYASABKAUSDQoFbGltaXQYAiABKAUSEwoLc2Vzc2lvbl91aWQYAyABKAkSFAoHZW5hYmxlZBgEIAEoCEgAiAEBEhoKEnJlY29tbWVuZF91aWRfbGlzdBgFIAMoCRI5Cgp1c2FnZV90eXBlGAYgASgOMiAua25vd2xlZGdlLnYxLktub3dsZWRnZVVzYWdlVHlwZUgBiAEBQgoKCF9lbmFibGVkQg0KC191c2FnZV90eXBlIp0BChVMaXN0S25vd2xlZGdlUmVzcG9uc2USKgoJa25vd2xlZGdlGAEgAygLMhcua25vd2xlZGdlLnYxLktub3dsZWRnZRINCgV0b3RhbBgCIAEoAxIQCghoYXNfbmV4dBgDIAEoCBIaChJyZWNvbW1lbmRfdWlkX2xpc3QYBSADKAkSGwoTbWF4X2tub3dsZWRnZV9saW1pdBgGIAEoBSKEAQoaTGlzdEtub3dsZWRnZUV2ZW50c1JlcXVlc3QSDgoGb2Zmc2V0GAEgASgFEg0KBWxpbWl0GAIgASgFEjIKBnN0YXR1cxgDIAEoDjIiLmtub3dsZWRnZS52MS5Lbm93bGVkZ2VFdmVudFN0YXR1cxITCgtzZXNzaW9uX3VpZBgEIAEoCSJsChtMaXN0S25vd2xlZGdlRXZlbnRzUmVzcG9uc2USLAoGZXZlbnRzGAEgAygLMhwua25vd2xlZGdlLnYxLktub3dsZWRnZUV2ZW50Eg0KBXRvdGFsGAIgASgDEhAKCGhhc19uZXh0GAMgASgIImoKIVVwZGF0ZUtub3dsZWRnZUV2ZW50U3RhdHVzUmVxdWVzdBIRCglldmVudF91aWQYASABKAkSMgoGc3RhdHVzGAIgASgOMiIua25vd2xlZGdlLnYxLktub3dsZWRnZUV2ZW50U3RhdHVzIjUKIlVwZGF0ZUtub3dsZWRnZUV2ZW50U3RhdHVzUmVzcG9uc2USDwoHc3VjY2VzcxgBIAEoCCLJAQoWQ3JlYXRlS25vd2xlZGdlUmVxdWVzdBIYCgRuYW1lGAEgASgJQgq6SAdyBRABGP8BEg8KB2NvbnRlbnQYAiABKAkSDwoHdHJpZ2dlchgDIAEoCRIPCgdlbmFibGVkGAQgASgIEhoKDXJlY29tbWVuZF91aWQYBSABKAlIAIgBARI0Cgp1c2FnZV90eXBlGAYgASgOMiAua25vd2xlZGdlLnYxLktub3dsZWRnZVVzYWdlVHlwZUIQCg5fcmVjb21tZW5kX3VpZCJFChdDcmVhdGVLbm93bGVkZ2VSZXNwb25zZRIqCglrbm93bGVkZ2UYASABKAsyFy5rbm93bGVkZ2UudjEuS25vd2xlZGdlItUBChZVcGRhdGVLbm93bGVkZ2VSZXF1ZXN0EhUKDWtub3dsZWRnZV91aWQYASABKAkSFgoEbmFtZRgCIAEoCUIIukgFcgMY/wESDwoHY29udGVudBgDIAEoCRIPCgd0cmlnZ2VyGAQgASgJEhQKB2VuYWJsZWQYBSABKAhIAIgBARI5Cgp1c2FnZV90eXBlGAYgASgOMiAua25vd2xlZGdlLnYxLktub3dsZWRnZVVzYWdlVHlwZUgBiAEBQgoKCF9lbmFibGVkQg0KC191c2FnZV90eXBlIkUKF1VwZGF0ZUtub3dsZWRnZVJlc3BvbnNlEioKCWtub3dsZWRnZRgBIAEoCzIXLmtub3dsZWRnZS52MS5Lbm93bGVkZ2UiLwoWRGVsZXRlS25vd2xlZGdlUmVxdWVzdBIVCg1rbm93bGVkZ2VfdWlkGAEgASgJIioKF0RlbGV0ZUtub3dsZWRnZVJlc3BvbnNlEg8KB3N1Y2Nlc3MYASABKAgiRwodVXBkYXRlS25vd2xlZGdlRW5hYmxlZFJlcXVlc3QSFQoNa25vd2xlZGdlX3VpZBgBIAEoCRIPCgdlbmFibGVkGAIgASgIIjEKHlVwZGF0ZUtub3dsZWRnZUVuYWJsZWRSZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIIk4KGUdldEtub3dsZWRnZURldGFpbFJlcXVlc3QSFQoNa25vd2xlZGdlX3VpZBgBIAEoCRIaChJrbm93bGVkZ2Vfc2hvcnRfaWQYAiABKAkiSAoaR2V0S25vd2xlZGdlRGV0YWlsUmVzcG9uc2USKgoJa25vd2xlZGdlGAEgASgLMhcua25vd2xlZGdlLnYxLktub3dsZWRnZSLaAQobVXBkYXRlS25vd2xlZGdlRXZlbnRSZXF1ZXN0EhEKCWV2ZW50X3VpZBgBIAEoCRIRCgRuYW1lGAIgASgJSACIAQESFAoHY29udGVudBgDIAEoCUgBiAEBEhQKB3RyaWdnZXIYBCABKAlIAogBARI5Cgp1c2FnZV90eXBlGAUgASgOMiAua25vd2xlZGdlLnYxLktub3dsZWRnZVVzYWdlVHlwZUgDiAEBQgcKBV9uYW1lQgoKCF9jb250ZW50QgoKCF90cmlnZ2VyQg0KC191c2FnZV90eXBlIksKHFVwZGF0ZUtub3dsZWRnZUV2ZW50UmVzcG9uc2USKwoFZXZlbnQYASABKAsyHC5rbm93bGVkZ2UudjEuS25vd2xlZGdlRXZlbnQiLgoaR2V0QnVpbHRpbktub3dsZWRnZVJlcXVlc3QSEAoIc2hvcnRfaWQYASABKAkiSQobR2V0QnVpbHRpbktub3dsZWRnZVJlc3BvbnNlEioKCWtub3dsZWRnZRgBIAEoCzIXLmtub3dsZWRnZS52MS5Lbm93bGVkZ2UqrAEKFEtub3dsZWRnZUV2ZW50U3RhdHVzEiYKIktOT1dMRURHRV9FVkVOVF9TVEFUVVNfVU5TUEVDSUZJRUQQABIiCh5LTk9XTEVER0VfRVZFTlRfU1RBVFVTX1BFTkRJTkcQARIjCh9LTk9XTEVER0VfRVZFTlRfU1RBVFVTX0FDQ0VQVEVEEAISIwofS05PV0xFREdFX0VWRU5UX1NUQVRVU19SRUpFQ1RFRBADKmQKDUtub3dsZWRnZUtpbmQSHgoaS05PV0xFREdFX0tJTkRfVU5TUEVDSUZJRUQQABIXChNLTk9XTEVER0VfS0lORF9VU0VSEAESGgoWS05PV0xFREdFX0tJTkRfQlVJTFRJThACKoIBChJLbm93bGVkZ2VVc2FnZVR5cGUSJAogS05PV0xFREdFX1VTQUdFX1RZUEVfVU5TUEVDSUZJRUQQABIhCh1LTk9XTEVER0VfVVNBR0VfVFlQRV9VU0VfV0hFThABEiMKH0tOT1dMRURHRV9VU0FHRV9UWVBFX0FMV0FZU19VU0UQAiqdAQoSS25vd2xlZGdlRXZlbnRLaW5kEiQKIEtOT1dMRURHRV9FVkVOVF9LSU5EX1VOU1BFQ0lGSUVEEAASHwobS05PV0xFREdFX0VWRU5UX0tJTkRfQ1JFQVRFEAESHwobS05PV0xFREdFX0VWRU5UX0tJTkRfVVBEQVRFEAISHwobS05PV0xFREdFX0VWRU5UX0tJTkRfREVMRVRFEAMysggKEEtub3dsZWRnZVNlcnZpY2USWAoNTGlzdEtub3dsZWRnZRIiLmtub3dsZWRnZS52MS5MaXN0S25vd2xlZGdlUmVxdWVzdBojLmtub3dsZWRnZS52MS5MaXN0S25vd2xlZGdlUmVzcG9uc2USagoTTGlzdEtub3dsZWRnZUV2ZW50cxIoLmtub3dsZWRnZS52MS5MaXN0S25vd2xlZGdlRXZlbnRzUmVxdWVzdBopLmtub3dsZWRnZS52MS5MaXN0S25vd2xlZGdlRXZlbnRzUmVzcG9uc2USfwoaVXBkYXRlS25vd2xlZGdlRXZlbnRTdGF0dXMSLy5rbm93bGVkZ2UudjEuVXBkYXRlS25vd2xlZGdlRXZlbnRTdGF0dXNSZXF1ZXN0GjAua25vd2xlZGdlLnYxLlVwZGF0ZUtub3dsZWRnZUV2ZW50U3RhdHVzUmVzcG9uc2USXgoPQ3JlYXRlS25vd2xlZGdlEiQua25vd2xlZGdlLnYxLkNyZWF0ZUtub3dsZWRnZVJlcXVlc3QaJS5rbm93bGVkZ2UudjEuQ3JlYXRlS25vd2xlZGdlUmVzcG9uc2USXgoPVXBkYXRlS25vd2xlZGdlEiQua25vd2xlZGdlLnYxLlVwZGF0ZUtub3dsZWRnZVJlcXVlc3QaJS5rbm93bGVkZ2UudjEuVXBkYXRlS25vd2xlZGdlUmVzcG9uc2USXgoPRGVsZXRlS25vd2xlZGdlEiQua25vd2xlZGdlLnYxLkRlbGV0ZUtub3dsZWRnZVJlcXVlc3QaJS5rbm93bGVkZ2UudjEuRGVsZXRlS25vd2xlZGdlUmVzcG9uc2UScwoWVXBkYXRlS25vd2xlZGdlRW5hYmxlZBIrLmtub3dsZWRnZS52MS5VcGRhdGVLbm93bGVkZ2VFbmFibGVkUmVxdWVzdBosLmtub3dsZWRnZS52MS5VcGRhdGVLbm93bGVkZ2VFbmFibGVkUmVzcG9uc2USZwoSR2V0S25vd2xlZGdlRGV0YWlsEicua25vd2xlZGdlLnYxLkdldEtub3dsZWRnZURldGFpbFJlcXVlc3QaKC5rbm93bGVkZ2UudjEuR2V0S25vd2xlZGdlRGV0YWlsUmVzcG9uc2USbQoUVXBkYXRlS25vd2xlZGdlRXZlbnQSKS5rbm93bGVkZ2UudjEuVXBkYXRlS25vd2xlZGdlRXZlbnRSZXF1ZXN0Gioua25vd2xlZGdlLnYxLlVwZGF0ZUtub3dsZWRnZUV2ZW50UmVzcG9uc2USagoTR2V0QnVpbHRpbktub3dsZWRnZRIoLmtub3dsZWRnZS52MS5HZXRCdWlsdGluS25vd2xlZGdlUmVxdWVzdBopLmtub3dsZWRnZS52MS5HZXRCdWlsdGluS25vd2xlZGdlUmVzcG9uc2VCuAEKEGNvbS5rbm93bGVkZ2UudjFCDktub3dsZWRnZVByb3RvUAFaQ2dpdGxhYi5tb25pY2EuY24vdmlkYS9zZGsvYml6c2VydmVyLWdvLmdpdC9rbm93bGVkZ2UvdjE7a25vd2xlZGdldjGiAgNLWFiqAgxLbm93bGVkZ2UuVjHKAgxLbm93bGVkZ2VcVjHiAhhLbm93bGVkZ2VcVjFcR1BCTWV0YWRhdGHqAg1Lbm93bGVkZ2U6OlYxYgZwcm90bzM",[Ye,te]),np=M(Ts,0),lp=z("CiJrbm93bGVkZ2UvdjEva25vd2xlZGdlX2FkbWluLnByb3RvEgxrbm93bGVkZ2UudjEiOwoaTGlzdFN5c3RlbUtub3dsZWRnZVJlcXVlc3QSDgoGb2Zmc2V0GAEgASgFEg0KBWxpbWl0GAIgASgFImoKG0xpc3RTeXN0ZW1Lbm93bGVkZ2VSZXNwb25zZRIqCglrbm93bGVkZ2UYASADKAsyFy5rbm93bGVkZ2UudjEuS25vd2xlZGdlEg0KBXRvdGFsGAIgASgDEhAKCGhhc19uZXh0GAMgASgIIpgBChxDcmVhdGVTeXN0ZW1Lbm93bGVkZ2VSZXF1ZXN0EgwKBG5hbWUYASABKAkSDwoHY29udGVudBgCIAEoCRIPCgd0cmlnZ2VyGAMgASgJEjkKCnVzYWdlX3R5cGUYBCABKA4yIC5rbm93bGVkZ2UudjEuS25vd2xlZGdlVXNhZ2VUeXBlSACIAQFCDQoLX3VzYWdlX3R5cGUiSwodQ3JlYXRlU3lzdGVtS25vd2xlZGdlUmVzcG9uc2USKgoJa25vd2xlZGdlGAEgASgLMhcua25vd2xlZGdlLnYxLktub3dsZWRnZSK/AgocVXBkYXRlU3lzdGVtS25vd2xlZGdlUmVxdWVzdBIVCg1rbm93bGVkZ2VfdWlkGAEgASgJEhEKBG5hbWUYAiABKAlIAIgBARIUCgdjb250ZW50GAMgASgJSAGIAQESFAoHdHJpZ2dlchgEIAEoCUgCiAEBEjkKCnVzYWdlX3R5cGUYBSABKA4yIC5rbm93bGVkZ2UudjEuS25vd2xlZGdlVXNhZ2VUeXBlSAOIAQESGQoMaWRfZm9yX21hbnVzGAYgASgFSASIAQESHQoQdW5pcXVlX2luY19pbmRleBgHIAEoBUgFiAEBQgcKBV9uYW1lQgoKCF9jb250ZW50QgoKCF90cmlnZ2VyQg0KC191c2FnZV90eXBlQg8KDV9pZF9mb3JfbWFudXNCEwoRX3VuaXF1ZV9pbmNfaW5kZXgiSwodVXBkYXRlU3lzdGVtS25vd2xlZGdlUmVzcG9uc2USKgoJa25vd2xlZGdlGAEgASgLMhcua25vd2xlZGdlLnYxLktub3dsZWRnZSI1ChxEZWxldGVTeXN0ZW1Lbm93bGVkZ2VSZXF1ZXN0EhUKDWtub3dsZWRnZV91aWQYASABKAkiMAodRGVsZXRlU3lzdGVtS25vd2xlZGdlUmVzcG9uc2USDwoHc3VjY2VzcxgBIAEoCDLZAwoVS25vd2xlZGdlQWRtaW5TZXJ2aWNlEmoKE0xpc3RTeXN0ZW1Lbm93bGVkZ2USKC5rbm93bGVkZ2UudjEuTGlzdFN5c3RlbUtub3dsZWRnZVJlcXVlc3QaKS5rbm93bGVkZ2UudjEuTGlzdFN5c3RlbUtub3dsZWRnZVJlc3BvbnNlEnAKFUNyZWF0ZVN5c3RlbUtub3dsZWRnZRIqLmtub3dsZWRnZS52MS5DcmVhdGVTeXN0ZW1Lbm93bGVkZ2VSZXF1ZXN0Gisua25vd2xlZGdlLnYxLkNyZWF0ZVN5c3RlbUtub3dsZWRnZVJlc3BvbnNlEnAKFVVwZGF0ZVN5c3RlbUtub3dsZWRnZRIqLmtub3dsZWRnZS52MS5VcGRhdGVTeXN0ZW1Lbm93bGVkZ2VSZXF1ZXN0Gisua25vd2xlZGdlLnYxLlVwZGF0ZVN5c3RlbUtub3dsZWRnZVJlc3BvbnNlEnAKFURlbGV0ZVN5c3RlbUtub3dsZWRnZRIqLmtub3dsZWRnZS52MS5EZWxldGVTeXN0ZW1Lbm93bGVkZ2VSZXF1ZXN0Gisua25vd2xlZGdlLnYxLkRlbGV0ZVN5c3RlbUtub3dsZWRnZVJlc3BvbnNlQr0BChBjb20ua25vd2xlZGdlLnYxQhNLbm93bGVkZ2VBZG1pblByb3RvUAFaQ2dpdGxhYi5tb25pY2EuY24vdmlkYS9zZGsvYml6c2VydmVyLWdvLmdpdC9rbm93bGVkZ2UvdjE7a25vd2xlZGdldjGiAgNLWFiqAgxLbm93bGVkZ2UuVjHKAgxLbm93bGVkZ2VcVjHiAhhLbm93bGVkZ2VcVjFcR1BCTWV0YWRhdGHqAg1Lbm93bGVkZ2U6OlYxYgZwcm90bzM",[Ts]),ip=M(lp,0),Nr=z("ChRzcGFjZS92MS9zcGFjZS5wcm90bxIIc3BhY2UudjEiZgoVU2V0U3BhY2VTdGF0dXNSZXF1ZXN0EhMKC3Nlc3Npb25fdWlkGAEgASgJEhEKCWV2ZW50X3VpZBgCIAEoCRIlCgZzdGF0dXMYAyABKA4yFS5zcGFjZS52MS5TcGFjZVN0YXR1cyIpChZTZXRTcGFjZVN0YXR1c1Jlc3BvbnNlEg8KB1N1Y2Nlc3MYASABKAgikgQKD1NwYWNlU3RhdHVzSW5mbxIqCgZzdGF0dXMYASABKA4yFS5zcGFjZS52MS5TcGFjZVN0YXR1c0gAiAEBEhEKCXNwYWNlX3VpZBgCIAEoCRIRCglzcGFjZV9VcmwYAyABKAkSHgoWcHVibGlzaGVkX3RvX2NvbW11bml0eRgEIAEoCBJAChdzdWJfZG9tYWluX2F1ZGl0X3N0YXR1cxgFIAEoDjIaLnNwYWNlLnYxLlNwYWNlQXVkaXRTdGF0dXNIAYgBARIxCg1kZXBsb3llZF90aW1lGAYgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIXCgpzdWJfZG9tYWluGAcgASgJSAKIAQESDQoFdGl0bGUYCCABKAkSEwoLc2Vzc2lvbl91aWQYCSABKAkSEQoJZXZlbnRfdWlkGAogASgJEh0KEHN1Yl9kb21haW5fYXVkaXQYCyABKAlIA4gBARIrCgxhdWRpdF9zdGF0dXMYDCABKA4yFS5zcGFjZS52MS5BdWRpdFN0YXR1cxIxCgxSaXNrQ2F0ZWdvcnkYDSADKA4yGy5zcGFjZS52MS5TcGFjZVJpc2tDYXRlZ29yeUIJCgdfc3RhdHVzQhoKGF9zdWJfZG9tYWluX2F1ZGl0X3N0YXR1c0INCgtfc3ViX2RvbWFpbkITChFfc3ViX2RvbWFpbl9hdWRpdCJZChlQYWdlR2V0VXNlclNwYWNlc1Jlc3BvbnNlEi0KCnNwYWNlX2luZm8YAiADKAsyGS5zcGFjZS52MS5TcGFjZVN0YXR1c0luZm8SDQoFdG90YWwYAyABKAUiLAoVR2V0U3BhY2VTdGF0dXNSZXF1ZXN0EhMKC3Nlc3Npb25fdWlkGAEgASgJIl8KFkdldFNwYWNlU3RhdHVzUmVzcG9uc2USDwoHc3VjY2VzcxgBIAEoCBI0ChFzcGFjZV9zdGF0dXNfaW5mbxgCIAMoCzIZLnNwYWNlLnYxLlNwYWNlU3RhdHVzSW5mbyI1ChRQYWdlR2V0VXNlclNwYWNlc1JlcRIOCgZvZmZzZXQYASABKAUSDQoFbGltaXQYAiABKAUiPgoVRWRpdFNwYWNlU3ViRG9tYWluUmVxEhEKCXNwYWNlX3VpZBgBIAEoCRISCgpzdWJfZG9tYWluGAIgASgJIhwKGkVkaXRTcGFjZVN1YkRvbWFpblJlc3BvbnNlIhkKF0dldEVkaXRTcGFjZVNpdGVDb2RlUmVxIk8KHEdldEVkaXRTcGFjZVNpdGVDb2RlUmVzcG9uc2USFwoPZWRpdF9zcGFjZV9jb2RlGAEgASgJEhYKDnZhbGlkX2R1cmF0aW9uGAIgASgDIjEKHUhhc1NwYWNlRWRpdFBlcm1pc3Npb25SZXF1ZXN0EhAKCHNwYWNlX2lkGAEgASgJIjIKHkhhc1NwYWNlRWRpdFBlcm1pc3Npb25SZXNwb25zZRIQCghjYW5fZWRpdBgBIAEoCCIvChpSZXN0b3JlT3JpZ2luYWxTaXRlUmVxdWVzdBIRCglzcGFjZV91aWQYASABKAkiLgobUmVzdG9yZU9yaWdpbmFsU2l0ZVJlc3BvbnNlEg8KB3N1Y2Nlc3MYASABKAgiRgobU2F2ZVNwYWNlU2l0ZVJhd0RhdGFSZXF1ZXN0EhEKCXNwYWNlX3VpZBgBIAEoCRIUCgx3ZWJfcmF3X2RhdGEYAiABKAkiLwocU2F2ZVNwYWNlU2l0ZVJhd0RhdGFSZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIKlkKC1NwYWNlU3RhdHVzEhoKFlNQQUNFX1NUQVRVU19JTlZJU0lCTEUQABIYChRTUEFDRV9TVEFUVVNfVklTSUJMRRABEhQKEFNQQUNFX1NUQVRVU19CQU4QAipHCg5TcGFjZVN5c1N0YXR1cxIbChdTUEFDRV9TWVNfU1RBVFVTX05PUk1BTBAAEhgKFFNQQUNFX1NZU19TVEFUVVNfQkFOEAEqXQoLQXVkaXRTdGF0dXMSGAoUQVVESVRfU1RBVFVTX1BFTkRJTkcQABIZChVBVURJVF9TVEFUVVNfQVBQUk9WRUQQARIZChVBVURJVF9TVEFUVVNfUkVKRUNURUQQAiqYAQoQU3BhY2VBdWRpdFN0YXR1cxIdChlTUEFDRV9BVURJVF9TVEFUVVNfQ09NTUlUEAASGwoXU1BBQ0VfQVVESVRfU1RBVFVTX1BBU1MQARIdChlTUEFDRV9BVURJVF9TVEFUVVNfUkVKRUNUEAISKQolU1BBQ0VfQVVESVRfU1RBVFVTX05FRURfTUFOVUFMX1JFVklFVxAEKpIIChFTcGFjZVJpc2tDYXRlZ29yeRIlCiFDT05URU5UX1JJU0tfQ0FURUdPUllfVU5TUEVDSUZJRUQQABIPCgtTWVNURU1fUEFUSBABEhUKEUNPTU1BTkRfSU5KRUNUSU9OEAISFgoSU1BFQ0lBTF9DSEFSX0FCVVNFEAMSFAoQUkVTRVJWRURfS0VZV09SRBAEEg4KCkJSQU5EX05BTUUQBRINCglDT1BZUklHSFQQBhISCg5DRUxFQlJJVFlfTkFNRRAHEhQKEFBST1RFQ1RFRF9ET01BSU4QCBIOCgpMRUdBTF9SSVNLEAkSEwoPQ09OVFJPTExFRF9JVEVNEAoSEwoPRklOQU5DSUFMX0ZSQVVEEAsSFQoRRkFMU0VfQURWRVJUSVNJTkcQDBIWChJSRUdJT05BTF9TRU5TSVRJVkUQDRISCg5QUk9GQU5JVFlfTUlMRBAOEhYKElBST0ZBTklUWV9NT0RFUkFURRAPEhQKEFBST0ZBTklUWV9TRVZFUkUQEBIZChVESVNDUklNSU5BVElPTl9SQUNJQUwQERIZChVESVNDUklNSU5BVElPTl9HRU5ERVIQEhIcChhESVNDUklNSU5BVElPTl9SRUxJR0lPVVMQExIWChJESVNDUklNSU5BVElPTl9BR0UQFBIdChlESVNDUklNSU5BVElPTl9ESVNBQklMSVRZEBUSFQoRU0VYVUFMX1NVR0dFU1RJVkUQFhITCg9TRVhVQUxfRVhQTElDSVQQFxIQCgxTRVhVQUxfTUlOT1IQGBIUChBWSU9MRU5DRV9HRU5FUkFMEBkSFAoQVklPTEVOQ0VfRVhUUkVNRRAaEhQKEFZJT0xFTkNFX1dFQVBPTlMQGxIWChJWSU9MRU5DRV9URVJST1JJU00QHBISCg5NSVNJTkZPUk1BVElPThAdEgwKCFBISVNISU5HEB4SEQoNSU1QRVJTT05BVElPThAfEhQKEERFQ0VQVElWRV9ET01BSU4QIBISCg5DVUxUVVJBTF9UQUJPTxAhEhQKEE1VTFRJTElOR1VBTF9QVU4QIhIWChJJTVBMSUNJVF9SRUZFUkVOQ0UQIxISCg5FTUVSR0lOR19TTEFORxAkEggKBFNQQU0QJRIWChJNRUFOSU5HTEVTU19TVFJJTkcQJhIYChRFWENFU1NJVkVfUkVQRVRJVElPThAnEhAKDFNQRUNJQUxfQ0FTRRAoEhIKDkVWQVNJT05fUElOWUlOECkSFwoTRVZBU0lPTl9QSU5ZSU5fQUJCUhAqEhgKFEVWQVNJT05fTUlYRURfU0NSSVBUECsSFQoRRVZBU0lPTl9IT01PR1JBUEgQLBIcChhFVkFTSU9OX0NIQVJfUkVQTEFDRU1FTlQQLTKKBgoMU3BhY2VTZXJ2aWNlElMKDlNldFNwYWNlU3RhdHVzEh8uc3BhY2UudjEuU2V0U3BhY2VTdGF0dXNSZXF1ZXN0GiAuc3BhY2UudjEuU2V0U3BhY2VTdGF0dXNSZXNwb25zZRJTCg5HZXRTcGFjZVN0YXR1cxIfLnNwYWNlLnYxLkdldFNwYWNlU3RhdHVzUmVxdWVzdBogLnNwYWNlLnYxLkdldFNwYWNlU3RhdHVzUmVzcG9uc2USWAoRUGFnZUdldFVzZXJTcGFjZXMSHi5zcGFjZS52MS5QYWdlR2V0VXNlclNwYWNlc1JlcRojLnNwYWNlLnYxLlBhZ2VHZXRVc2VyU3BhY2VzUmVzcG9uc2USWwoSRWRpdFNwYWNlU3ViRG9tYWluEh8uc3BhY2UudjEuRWRpdFNwYWNlU3ViRG9tYWluUmVxGiQuc3BhY2UudjEuRWRpdFNwYWNlU3ViRG9tYWluUmVzcG9uc2USYQoUR2V0RWRpdFNwYWNlU2l0ZUNvZGUSIS5zcGFjZS52MS5HZXRFZGl0U3BhY2VTaXRlQ29kZVJlcRomLnNwYWNlLnYxLkdldEVkaXRTcGFjZVNpdGVDb2RlUmVzcG9uc2USawoWSGFzU3BhY2VFZGl0UGVybWlzc2lvbhInLnNwYWNlLnYxLkhhc1NwYWNlRWRpdFBlcm1pc3Npb25SZXF1ZXN0Giguc3BhY2UudjEuSGFzU3BhY2VFZGl0UGVybWlzc2lvblJlc3BvbnNlEmUKFFNhdmVTcGFjZVNpdGVSYXdEYXRhEiUuc3BhY2UudjEuU2F2ZVNwYWNlU2l0ZVJhd0RhdGFSZXF1ZXN0GiYuc3BhY2UudjEuU2F2ZVNwYWNlU2l0ZVJhd0RhdGFSZXNwb25zZRJiChNSZXN0b3JlT3JpZ2luYWxTaXRlEiQuc3BhY2UudjEuUmVzdG9yZU9yaWdpbmFsU2l0ZVJlcXVlc3QaJS5zcGFjZS52MS5SZXN0b3JlT3JpZ2luYWxTaXRlUmVzcG9uc2VCmAEKDGNvbS5zcGFjZS52MUIKU3BhY2VQcm90b1ABWjtnaXRsYWIubW9uaWNhLmNuL3ZpZGEvc2RrL2JpenNlcnZlci1nby5naXQvc3BhY2UvdjE7c3BhY2V2MaICA1NYWKoCCFNwYWNlLlYxygIIU3BhY2VcVjHiAhRTcGFjZVxWMVxHUEJNZXRhZGF0YeoCCVNwYWNlOjpWMWIGcHJvdG8z",[te]),rp=M(Nr,0),op=z("ChtzcGFjZS92MS9zcGFjZV9wdWJsaWMucHJvdG8SCHNwYWNlLnYxIioKFUdldFNwYWNlRGV0YWlsUmVxdWVzdBIRCglzcGFjZV91aWQYASABKAkingEKFkdldFNwYWNlRGV0YWlsUmVzcG9uc2USKgoGc3RhdHVzGAEgASgOMhUuc3BhY2UudjEuU3BhY2VTdGF0dXNIAIgBARIRCglzcGFjZV91cmwYAiABKAkSIQoUc2l0ZV9yYXdfZGF0YV9zM191cmwYAyABKAlIAYgBAUIJCgdfc3RhdHVzQhcKFV9zaXRlX3Jhd19kYXRhX3MzX3VybCI3ChxHZXRFZGl0U3BhY2VTaXRlVG9rZW5SZXF1ZXN0EhcKD2VkaXRfc3BhY2VfY29kZRgBIAEoCSI1Ch1HZXRFZGl0U3BhY2VTaXRlVG9rZW5SZXNwb25zZRIUCgxhY2Nlc3NfdG9rZW4YASABKAkyqAIKElNwYWNlUHVibGljU2VydmljZRJTCg5HZXRTcGFjZURldGFpbBIfLnNwYWNlLnYxLkdldFNwYWNlRGV0YWlsUmVxdWVzdBogLnNwYWNlLnYxLkdldFNwYWNlRGV0YWlsUmVzcG9uc2USUwoOR2V0U3BhY2VTdGF0dXMSHy5zcGFjZS52MS5HZXRTcGFjZVN0YXR1c1JlcXVlc3QaIC5zcGFjZS52MS5HZXRTcGFjZVN0YXR1c1Jlc3BvbnNlEmgKFUdldEVkaXRTcGFjZVNpdGVUb2tlbhImLnNwYWNlLnYxLkdldEVkaXRTcGFjZVNpdGVUb2tlblJlcXVlc3QaJy5zcGFjZS52MS5HZXRFZGl0U3BhY2VTaXRlVG9rZW5SZXNwb25zZUKeAQoMY29tLnNwYWNlLnYxQhBTcGFjZVB1YmxpY1Byb3RvUAFaO2dpdGxhYi5tb25pY2EuY24vdmlkYS9zZGsvYml6c2VydmVyLWdvLmdpdC9zcGFjZS92MTtzcGFjZXYxogIDU1hYqgIIU3BhY2UuVjHKAghTcGFjZVxWMeICFFNwYWNlXFYxXEdQQk1ldGFkYXRh6gIJU3BhY2U6OlYxYgZwcm90bzM",[Ye,te,Nr]),ap=M(op,0),cp=z("ChpzcGFjZS92MS9zcGFjZV9hZG1pbi5wcm90bxIIc3BhY2UudjEiNgoRQmxvY2tTcGFjZVJlcXVlc3QSEQoJc3BhY2VfdWlkGAEgASgJEg4KBnJlbWFyaxgCIAEoCSIlChJCbG9ja1NwYWNlUmVzcG9uc2USDwoHU3VjY2VzcxgBIAEoCCKBAQoOU3BhY2VCbG9ja0luZm8SCgoCaWQYASABKAMSEQoJc3BhY2VfdWlkGAIgASgJEg4KBnJlbWFyaxgDIAEoCRIQCghvcGVyYXRvchgEIAEoCRIuCgpjcmVhdGVkX2F0GAUgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCIpChRVbmJsb2NrU3BhY2VzUmVxdWVzdBIRCglzcGFjZV91aWQYASABKAkiJwoUVW5ibG9ja1NwYWNlUmVzcG9uc2USDwoHc3VjY2VzcxgBIAEoCCJyChVTcGFjZUJsb2NrTGlzdFJlcXVlc3QSFQoEcGFnZRgBIAEoBUIHukgEGgIoARIcCglwYWdlX3NpemUYAiABKAVCCbpIBhoEGGQoARIWCglzcGFjZV91aWQYAyABKAlIAIgBAUIMCgpfc3BhY2VfdWlkIlsKFlNwYWNlQmxvY2tMaXN0UmVzcG9uc2USMgoQc3BhY2VfYmxvY2tfbGlzdBgBIAMoCzIYLnNwYWNlLnYxLlNwYWNlQmxvY2tJbmZvEg0KBXRvdGFsGAIgASgDIpECChZBdWRpdFNwYWNlU3ViRG9tYWluUmVxEgoKAmlkGAEgASgDEhEKCXNwYWNlX3VpZBgCIAEoCRISCgpzdWJfZG9tYWluGAMgASgJEioKBnN0YXR1cxgEIAEoDjIaLnNwYWNlLnYxLlNwYWNlQXVkaXRTdGF0dXMSGgoNcmVqZWN0X3JlYXNvbhgFIAEoCUgAiAEBEh4KEWFkZF9ibG9ja19jb250ZW50GAYgASgJSAGIAQESNAoPcmlza19jYXRlZ29yaWVzGAcgAygOMhsuc3BhY2UudjEuU3BhY2VSaXNrQ2F0ZWdvcnlCEAoOX3JlamVjdF9yZWFzb25CFAoSX2FkZF9ibG9ja19jb250ZW50Ih0KG0F1ZGl0U3BhY2VTdWJEb21haW5SZXNwb25zZSKgAQodUGFnZUdldEF1ZGl0U3BhY2VTdWJEb21haW5SZXESDgoGb2Zmc2V0GAEgASgFEg0KBWxpbWl0GAIgASgFEhYKCXNwYWNlX3VpZBgDIAEoCUgAiAEBEi8KBnN0YXR1cxgEIAEoDjIaLnNwYWNlLnYxLlNwYWNlQXVkaXRTdGF0dXNIAYgBAUIMCgpfc3BhY2VfdWlkQgkKB19zdGF0dXMitQMKF0F1ZGl0U3BhY2VTdWJEb21haW5JbmZvEgoKAmlkGAEgASgDEhEKCXNwYWNlX3VpZBgCIAEoCRISCgpzdWJfZG9tYWluGAMgASgJEioKBnN0YXR1cxgEIAEoDjIaLnNwYWNlLnYxLlNwYWNlQXVkaXRTdGF0dXMSEwoLc2Vzc2lvbl91aWQYBSABKAkSEQoJZXZlbnRfdWlkGAYgASgJEg8KB3VzZXJfaWQYByABKAkSLgoKY3JlYXRlZF9hdBgIIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASEgoKYXVkaXRvcl9pZBgJIAEoCRIVCg1yZWplY3RfcmVhc29uGAogASgJEi4KCnVwZGF0ZWRfYXQYCyABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEjAKDHNwYWNlX3N0YXR1cxgMIAEoDjIVLnNwYWNlLnYxLlNwYWNlU3RhdHVzSACIAQESNAoPcmlza19jYXRlZ29yaWVzGA0gAygOMhsuc3BhY2UudjEuU3BhY2VSaXNrQ2F0ZWdvcnlCDwoNX3NwYWNlX3N0YXR1cyJ7CiJQYWdlR2V0QXVkaXRTcGFjZVN1YkRvbWFpblJlc3BvbnNlEkYKG2F1ZGl0X3NwYWNlX3N1Yl9kb21haW5faW5mbxgBIAMoCzIhLnNwYWNlLnYxLkF1ZGl0U3BhY2VTdWJEb21haW5JbmZvEg0KBXRvdGFsGAIgASgFIj8KHlBhZ2VTcGFjZVN1YkRvbWFpbkJsb2NrV29yZFJlcRIOCgZvZmZzZXQYASABKAUSDQoFbGltaXQYAiABKAUiXQojUGFnZVNwYWNlU3ViRG9tYWluQmxvY2tXb3JkUmVzcG9uc2USJwoKYmxvY2tfd29yZBgBIAMoCzITLnNwYWNlLnYxLkJsb2NrV29yZBINCgV0b3RhbBgCIAEoBSKjAQoJQmxvY2tXb3JkEgoKAmlkGAEgASgFEhIKCmJsb2NrX3dvcmQYAiABKAkSLgoKY3JlYXRlZF9hdBgDIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASEAoIb3BlcmF0b3IYBCABKAkSNAoPcmlza19jYXRlZ29yaWVzGAcgAygOMhsuc3BhY2UudjEuU3BhY2VSaXNrQ2F0ZWdvcnkiaQodQWRkU3BhY2VTdWJEb21haW5CbG9ja1dvcmRSZXESEgoKYmxvY2tfd29yZBgBIAEoCRI0Cg9yaXNrX2NhdGVnb3JpZXMYByADKA4yGy5zcGFjZS52MS5TcGFjZVJpc2tDYXRlZ29yeSIzCh1EZWxTcGFjZVN1YkRvbWFpbkJsb2NrV29yZFJlcRISCgpibG9ja193b3JkGAEgASgJIiQKIkFkZFNwYWNlU3ViRG9tYWluQmxvY2tXb3JkUmVzcG9uc2UiJAoiRGVsU3BhY2VTdWJEb21haW5CbG9ja1dvcmRSZXNwb25zZTK4BgoRU3BhY2VBZG1pblNlcnZpY2USRwoKQmxvY2tTcGFjZRIbLnNwYWNlLnYxLkJsb2NrU3BhY2VSZXF1ZXN0Ghwuc3BhY2UudjEuQmxvY2tTcGFjZVJlc3BvbnNlEk4KDFVuYmxvY2tTcGFjZRIeLnNwYWNlLnYxLlVuYmxvY2tTcGFjZXNSZXF1ZXN0Gh4uc3BhY2UudjEuVW5ibG9ja1NwYWNlUmVzcG9uc2USUwoOU3BhY2VCbG9ja0xpc3QSHy5zcGFjZS52MS5TcGFjZUJsb2NrTGlzdFJlcXVlc3QaIC5zcGFjZS52MS5TcGFjZUJsb2NrTGlzdFJlc3BvbnNlEnMKGlBhZ2VHZXRBdWRpdFNwYWNlU3ViRG9tYWluEicuc3BhY2UudjEuUGFnZUdldEF1ZGl0U3BhY2VTdWJEb21haW5SZXEaLC5zcGFjZS52MS5QYWdlR2V0QXVkaXRTcGFjZVN1YkRvbWFpblJlc3BvbnNlEl4KE0F1ZGl0U3BhY2VTdWJEb21haW4SIC5zcGFjZS52MS5BdWRpdFNwYWNlU3ViRG9tYWluUmVxGiUuc3BhY2UudjEuQXVkaXRTcGFjZVN1YkRvbWFpblJlc3BvbnNlEnYKG1BhZ2VTcGFjZVN1YkRvbWFpbkJsb2NrV29yZBIoLnNwYWNlLnYxLlBhZ2VTcGFjZVN1YkRvbWFpbkJsb2NrV29yZFJlcRotLnNwYWNlLnYxLlBhZ2VTcGFjZVN1YkRvbWFpbkJsb2NrV29yZFJlc3BvbnNlEnMKGkRlbFNwYWNlU3ViRG9tYWluQmxvY2tXb3JkEicuc3BhY2UudjEuRGVsU3BhY2VTdWJEb21haW5CbG9ja1dvcmRSZXEaLC5zcGFjZS52MS5EZWxTcGFjZVN1YkRvbWFpbkJsb2NrV29yZFJlc3BvbnNlEnMKGkFkZFNwYWNlU3ViRG9tYWluQmxvY2tXb3JkEicuc3BhY2UudjEuQWRkU3BhY2VTdWJEb21haW5CbG9ja1dvcmRSZXEaLC5zcGFjZS52MS5BZGRTcGFjZVN1YkRvbWFpbkJsb2NrV29yZFJlc3BvbnNlQp0BCgxjb20uc3BhY2UudjFCD1NwYWNlQWRtaW5Qcm90b1ABWjtnaXRsYWIubW9uaWNhLmNuL3ZpZGEvc2RrL2JpenNlcnZlci1nby5naXQvc3BhY2UvdjE7c3BhY2V2MaICA1NYWKoCCFNwYWNlLlYxygIIU3BhY2VcVjHiAhRTcGFjZVxWMVxHUEJNZXRhZGF0YeoCCVNwYWNlOjpWMWIGcHJvdG8z",[te,Ye,Nr]),dp=M(cp,0),sp=z("Ch9hcGlwcm94eS92MS9hcGlwcm94eV9iYXNlLnByb3RvEgthcGlwcm94eS52MSKxAgoKQXBpRXhhbXBsZRIMCgRuYW1lGAEgASgJEg4KBmFwaV9pZBgCIAEoCRIxCgVxdWVyeRgDIAMoCzIiLmFwaXByb3h5LnYxLkFwaUV4YW1wbGUuUXVlcnlFbnRyeRIqCgRib2R5GAQgASgLMhcuZ29vZ2xlLnByb3RvYnVmLlN0cnVjdEgAiAEBEjwKC3BhdGhfcGFyYW1zGAYgAygLMicuYXBpcHJveHkudjEuQXBpRXhhbXBsZS5QYXRoUGFyYW1zRW50cnkaLAoKUXVlcnlFbnRyeRILCgNrZXkYASABKAkSDQoFdmFsdWUYAiABKAk6AjgBGjEKD1BhdGhQYXJhbXNFbnRyeRILCgNrZXkYASABKAkSDQoFdmFsdWUYAiABKAk6AjgBQgcKBV9ib2R5Il0KCUFwaURldGFpbBIQCghzaG9ydF9pZBgBIAEoCRIMCgRuYW1lGAIgASgJEgwKBGRvY3MYAyABKAkSEAoIYXBpX25hbWUYBCABKAkSEAoIdXNlX3doZW4YBSABKAkiuwIKDkFwaVJlcXVlc3RJbmZvEgwKBGhvc3QYASABKAkSDAoEcGF0aBgCIAEoCRIOCgZtZXRob2QYAyABKAkSSAoPZGVmYXVsdF9oZWFkZXJzGAUgAygLMi8uYXBpcHJveHkudjEuQXBpUmVxdWVzdEluZm8uRGVmYXVsdEhlYWRlcnNFbnRyeRJGCg5kZWZhdWx0X3BhcmFtcxgGIAMoCzIuLmFwaXByb3h5LnYxLkFwaVJlcXVlc3RJbmZvLkRlZmF1bHRQYXJhbXNFbnRyeRo1ChNEZWZhdWx0SGVhZGVyc0VudHJ5EgsKA2tleRgBIAEoCRINCgV2YWx1ZRgCIAEoCToCOAEaNAoSRGVmYXVsdFBhcmFtc0VudHJ5EgsKA2tleRgBIAEoCRINCgV2YWx1ZRgCIAEoCToCOAEiuAEKB0FwaUluZm8SDAoEbmFtZRgBIAEoCRIQCghhcGlfbmFtZRgCIAEoCRIQCghwcm92aWRlchgDIAEoCRIQCgh1c2Vfd2hlbhgEIAEoCRILCgNkb2MYBSABKAkSMQoMcmVxdWVzdF9pbmZvGAYgASgLMhsuYXBpcHJveHkudjEuQXBpUmVxdWVzdEluZm8SKQoIZXhhbXBsZXMYByADKAsyFy5hcGlwcm94eS52MS5BcGlFeGFtcGxlIpEFCglBcGlTZWNyZXQSMgoJYXV0aF90eXBlGAEgASgOMh8uYXBpcHJveHkudjEuQXBpU2VjcmV0LkF1dGhUeXBlEjIKB2FwaV9rZXkYAiABKAsyIS5hcGlwcm94eS52MS5BcGlTZWNyZXQuQXBpS2V5QXV0aBIvCgViYXNpYxgDIAEoCzIgLmFwaXByb3h5LnYxLkFwaVNlY3JldC5CYXNpY0F1dGgSMQoGb2F1dGgyGAQgASgLMiEuYXBpcHJveHkudjEuQXBpU2VjcmV0Lk9BdXRoMkF1dGgaOQoKQXBpS2V5QXV0aBILCgNrZXkYASABKAkSDAoEbmFtZRgCIAEoCRIQCghpbl9xdWVyeRgDIAEoCBovCglCYXNpY0F1dGgSEAoIdXNlcm5hbWUYASABKAkSEAoIcGFzc3dvcmQYAiABKAka3QEKCk9BdXRoMkF1dGgSEQoJY2xpZW50X2lkGAEgASgJEhUKDWNsaWVudF9zZWNyZXQYAiABKAkSEQoJdG9rZW5fdXJsGAMgASgJEhQKDGFjY2Vzc190b2tlbhgEIAEoCRJICgxleHRyYV9wYXJhbXMYBSADKAsyMi5hcGlwcm94eS52MS5BcGlTZWNyZXQuT0F1dGgyQXV0aC5FeHRyYVBhcmFtc0VudHJ5GjIKEEV4dHJhUGFyYW1zRW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4ASJsCghBdXRoVHlwZRIZChVBVVRIX1RZUEVfVU5TUEVDSUZJRUQQABIVChFBVVRIX1RZUEVfQVBJX0tFWRABEhgKFEFVVEhfVFlQRV9CQVNJQ19BVVRIEAISFAoQQVVUSF9UWVBFX09BVVRIMhADQrQBCg9jb20uYXBpcHJveHkudjFCEUFwaXByb3h5QmFzZVByb3RvUAFaQWdpdGxhYi5tb25pY2EuY24vdmlkYS9zZGsvYml6c2VydmVyLWdvLmdpdC9hcGlwcm94eS92MTthcGlwcm94eXYxogIDQVhYqgILQXBpcHJveHkuVjHKAgtBcGlwcm94eVxWMeICF0FwaXByb3h5XFYxXEdQQk1ldGFkYXRh6gIMQXBpcHJveHk6OlYxYgZwcm90bzM",[He]),Ms=z("ChphcGlwcm94eS92MS9hcGlwcm94eS5wcm90bxILYXBpcHJveHkudjEirwIKDkNhbGxBcGlSZXF1ZXN0Eg4KBmFwaV9pZBgBIAEoCRI1CgVxdWVyeRgCIAMoCzImLmFwaXByb3h5LnYxLkNhbGxBcGlSZXF1ZXN0LlF1ZXJ5RW50cnkSKgoEYm9keRgDIAEoCzIXLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3RIAIgBARJACgtwYXRoX3BhcmFtcxgFIAMoCzIrLmFwaXByb3h5LnYxLkNhbGxBcGlSZXF1ZXN0LlBhdGhQYXJhbXNFbnRyeRosCgpRdWVyeUVudHJ5EgsKA2tleRgBIAEoCRINCgV2YWx1ZRgCIAEoCToCOAEaMQoPUGF0aFBhcmFtc0VudHJ5EgsKA2tleRgBIAEoCRINCgV2YWx1ZRgCIAEoCToCOAFCBwoFX2JvZHkijwEKD0NhbGxBcGlSZXNwb25zZRIRCglqc29uX2RhdGEYASABKAkSKgoEZGF0YRgCIAEoCzIXLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3RIAIgBARIRCgRjb2RlGAMgASgFSAGIAQESEAoDbXNnGAQgASgJSAKIAQFCBwoFX2RhdGFCBwoFX2NvZGVCBgoEX21zZzJZCg9BcGlQcm94eVNlcnZpY2USRgoHQ2FsbEFwaRIbLmFwaXByb3h5LnYxLkNhbGxBcGlSZXF1ZXN0GhwuYXBpcHJveHkudjEuQ2FsbEFwaVJlc3BvbnNlIgBCsAEKD2NvbS5hcGlwcm94eS52MUINQXBpcHJveHlQcm90b1ABWkFnaXRsYWIubW9uaWNhLmNuL3ZpZGEvc2RrL2JpenNlcnZlci1nby5naXQvYXBpcHJveHkvdjE7YXBpcHJveHl2MaICA0FYWKoCC0FwaXByb3h5LlYxygILQXBpcHJveHlcVjHiAhdBcGlwcm94eVxWMVxHUEJNZXRhZGF0YeoCDEFwaXByb3h5OjpWMWIGcHJvdG8z",[He]),up=M(Ms,0),gp=z("CiBhcGlwcm94eS92MS9hcGlwcm94eV9hZG1pbi5wcm90bxILYXBpcHJveHkudjEijQEKEENyZWF0ZUFwaVJlcXVlc3QSJgoIYXBpX2luZm8YASABKAsyFC5hcGlwcm94eS52MS5BcGlJbmZvEiYKBnNlY3JldBgCIAEoCzIWLmFwaXByb3h5LnYxLkFwaVNlY3JldBIpCghleGFtcGxlcxgDIAMoCzIXLmFwaXByb3h5LnYxLkFwaUV4YW1wbGUiIwoRQ3JlYXRlQXBpUmVzcG9uc2USDgoGYXBpX2lkGAEgASgJIp0BChBVcGRhdGVBcGlSZXF1ZXN0Eg4KBmFwaV9pZBgBIAEoCRImCghhcGlfaW5mbxgCIAEoCzIULmFwaXByb3h5LnYxLkFwaUluZm8SJgoGc2VjcmV0GAMgASgLMhYuYXBpcHJveHkudjEuQXBpU2VjcmV0EikKCGV4YW1wbGVzGAQgAygLMhcuYXBpcHJveHkudjEuQXBpRXhhbXBsZSIkChFVcGRhdGVBcGlSZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIIiIKEERlbGV0ZUFwaVJlcXVlc3QSDgoGYXBpX2lkGAEgASgJIiQKEURlbGV0ZUFwaVJlc3BvbnNlEg8KB3N1Y2Nlc3MYASABKAgiHwoNR2V0QXBpUmVxdWVzdBIOCgZhcGlfaWQYASABKAki+wEKDkdldEFwaVJlc3BvbnNlEg4KBmFwaV9pZBgBIAEoCRImCghhcGlfaW5mbxgCIAEoCzIULmFwaXByb3h5LnYxLkFwaUluZm8SJgoGc2VjcmV0GAMgASgLMhYuYXBpcHJveHkudjEuQXBpU2VjcmV0Ei4KCmNyZWF0ZWRfYXQYBCABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEi4KCnVwZGF0ZWRfYXQYBSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEikKCGV4YW1wbGVzGAYgAygLMhcuYXBpcHJveHkudjEuQXBpRXhhbXBsZSJRCg5MaXN0QXBpUmVxdWVzdBIOCgZvZmZzZXQYASABKAUSDQoFbGltaXQYAiABKAUSFAoHa2V5d29yZBgDIAEoCUgAiAEBQgoKCF9rZXl3b3JkIksKD0xpc3RBcGlSZXNwb25zZRINCgV0b3RhbBgBIAEoBRIpCgRhcGlzGAIgAygLMhsuYXBpcHJveHkudjEuR2V0QXBpUmVzcG9uc2UiVQoYVXBkYXRlQXBpRXhhbXBsZXNSZXF1ZXN0Eg4KBmFwaV9pZBgBIAEoCRIpCghleGFtcGxlcxgCIAMoCzIXLmFwaXByb3h5LnYxLkFwaUV4YW1wbGUiLAoZVXBkYXRlQXBpRXhhbXBsZXNSZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIMr0EChRBcGlQcm94eUFkbWluU2VydmljZRJMCglDcmVhdGVBcGkSHS5hcGlwcm94eS52MS5DcmVhdGVBcGlSZXF1ZXN0Gh4uYXBpcHJveHkudjEuQ3JlYXRlQXBpUmVzcG9uc2UiABJMCglVcGRhdGVBcGkSHS5hcGlwcm94eS52MS5VcGRhdGVBcGlSZXF1ZXN0Gh4uYXBpcHJveHkudjEuVXBkYXRlQXBpUmVzcG9uc2UiABJMCglEZWxldGVBcGkSHS5hcGlwcm94eS52MS5EZWxldGVBcGlSZXF1ZXN0Gh4uYXBpcHJveHkudjEuRGVsZXRlQXBpUmVzcG9uc2UiABJDCgZHZXRBcGkSGi5hcGlwcm94eS52MS5HZXRBcGlSZXF1ZXN0GhsuYXBpcHJveHkudjEuR2V0QXBpUmVzcG9uc2UiABJGCgdMaXN0QXBpEhsuYXBpcHJveHkudjEuTGlzdEFwaVJlcXVlc3QaHC5hcGlwcm94eS52MS5MaXN0QXBpUmVzcG9uc2UiABJkChFVcGRhdGVBcGlFeGFtcGxlcxIlLmFwaXByb3h5LnYxLlVwZGF0ZUFwaUV4YW1wbGVzUmVxdWVzdBomLmFwaXByb3h5LnYxLlVwZGF0ZUFwaUV4YW1wbGVzUmVzcG9uc2UiABJICglQcm94eUNhbGwSGy5hcGlwcm94eS52MS5DYWxsQXBpUmVxdWVzdBocLmFwaXByb3h5LnYxLkNhbGxBcGlSZXNwb25zZSIAQrUBCg9jb20uYXBpcHJveHkudjFCEkFwaXByb3h5QWRtaW5Qcm90b1ABWkFnaXRsYWIubW9uaWNhLmNuL3ZpZGEvc2RrL2JpenNlcnZlci1nby5naXQvYXBpcHJveHkvdjE7YXBpcHJveHl2MaICA0FYWKoCC0FwaXByb3h5LlYxygILQXBpcHJveHlcVjHiAhdBcGlwcm94eVxWMVxHUEJNZXRhZGF0YeoCDEFwaXByb3h5OjpWMWIGcHJvdG8z",[sp,Ms,te]),hp=M(gp,0),bp=z("Ch5zZXNzaW9uL3YxL3Nlc3Npb25fYWRtaW4ucHJvdG8SCnNlc3Npb24udjEiIAoeUm9sbGJhY2tTZXNzaW9uQ3JlZGl0c1Jlc3BvbnNlIkQKHVJvbGxiYWNrU2Vzc2lvbkNyZWRpdHNSZXF1ZXN0EhIKCnNlc3Npb25faWQYASABKAkSDwoHY3JlZGl0cxgCIAEoBSJUChNMaXN0U2Vzc2lvblJlc3BvbnNlEi4KCHNlc3Npb25zGAEgAygLMhwuc2Vzc2lvbi52MS5BZG1pblNlc3Npb25JbmZvEg0KBXRvdGFsGAIgASgFIpICChBBZG1pblNlc3Npb25JbmZvEhIKCnNlc3Npb25faWQYASABKAkSFgoOY29zdGVkX2NyZWRpdHMYAiABKAUSOQoPcm9sbGJhY2tfc3RhdHVzGAMgASgOMiAuc2Vzc2lvbi52MS5DcmVkaXRSb2xsYmFja1N0YXR1cxIWCg5ibG9ja2VkX3N0YXR1cxgEIAEoCBIPCgd1c2VyX2lkGAUgASgJEg0KBWVtYWlsGAYgASgJEhEKCWlzX3NoYXJlZBgHIAEoCBIuCgpjcmVhdGVkX2F0GAggASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIcChRjYW5fcm9sbGJhY2tfY3JlZGl0cxgJIAEoBSKmAQoSTGlzdFNlc3Npb25SZXF1ZXN0EhUKBHBhZ2UYASABKAVCB7pIBBoCKAESEQoJcGFnZV9zaXplGAIgASgFEgwKBHVzZXIYAyABKAkSEwoLc2Vzc2lvbl91aWQYBCABKAkSMgoMY3JlZGl0X3JhbmdlGAkgASgLMhcuc2Vzc2lvbi52MS5DcmVkaXRSYW5nZUgAiAEBQg8KDV9jcmVkaXRfcmFuZ2UiJQojVXBkYXRlU2Vzc2lvbkZlZWRiYWNrU3RhdHVzUmVzcG9uc2UibAoiVXBkYXRlU2Vzc2lvbkZlZWRiYWNrU3RhdHVzUmVxdWVzdBITCgtzZXNzaW9uX3VpZBgBIAEoCRIxCgZzdGF0dXMYAiABKA4yIS5zZXNzaW9uLnYxLlNlc3Npb25GZWVkYmFja1N0YXR1cyInCiVSb2xsYmFja1Nlc3Npb25GZWVkYmFja0NyZWRpdFJlc3BvbnNlIkwKJFJvbGxiYWNrU2Vzc2lvbkZlZWRiYWNrQ3JlZGl0UmVxdWVzdBITCgtzZXNzaW9uX3VpZBgBIAEoCRIPCgdjcmVkaXRzGAIgASgFIrcDCgtVc2VjYXNlSW5mbxIKCgJpZBgBIAEoAxIPCgd1c2VyX2lkGAIgASgJEg0KBWVtYWlsGAMgASgJEg8KB2NvbnRlbnQYBCABKAkSEwoLc2Vzc2lvbl91aWQYBSABKAkSFQoNc2hvd19ob21lcGFnZRgGIAEoCBIWCg5vcmRlcl9ob21lcGFnZRgHIAEoBRIUCgxzaG93X3VzZWNhc2UYCCABKAgSFQoNb3JkZXJfdXNlY2FzZRgJIAEoBRIpCgZzdGF0dXMYCiABKA4yGS5zZXNzaW9uLnYxLlVzZWNhc2VTdGF0dXMSDgoGcmVtYXJrGAsgASgJEikKBnNvdXJjZRgMIAEoDjIZLnNlc3Npb24udjEuU2Vzc2lvblNvdXJjZRIcChRzZXNzaW9uX2Zyb21fdXNlcl9pZBgNIAEoCRIuCgpjcmVhdGVkX2F0GA4gASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIuCgp1cGRhdGVkX2F0GA8gASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIWCg5sYW5ndWFnZV9ncm91cBgQIAEoCSLYAwoSTGlzdFVzZWNhc2VSZXF1ZXN0EhUKBHBhZ2UYASABKAVCB7pIBBoCKAESHAoJcGFnZV9zaXplGAIgASgFQgm6SAYaBBhkKAESFAoHdXNlcl9pZBgDIAEoCUgAiAEBEhIKBWVtYWlsGAQgASgJSAGIAQESGgoNc2hvd19ob21lcGFnZRgFIAEoCEgCiAEBEhkKDHNob3dfdXNlY2FzZRgGIAEoCEgDiAEBEi4KC3N0YXR1c19saXN0GAcgAygOMhkuc2Vzc2lvbi52MS5Vc2VjYXNlU3RhdHVzEi4KBnNvdXJjZRgIIAEoDjIZLnNlc3Npb24udjEuU2Vzc2lvblNvdXJjZUgEiAEBEiEKFHNlc3Npb25fZnJvbV91c2VyX2lkGAkgASgJSAWIAQESGwoObGFuZ3VhZ2VfZ3JvdXAYCiABKAlIBogBARIcChRtdXN0X3dpdGhfc2Vzc2lvbl9pZBgLIAEoCEIKCghfdXNlcl9pZEIICgZfZW1haWxCEAoOX3Nob3dfaG9tZXBhZ2VCDwoNX3Nob3dfdXNlY2FzZUIJCgdfc291cmNlQhcKFV9zZXNzaW9uX2Zyb21fdXNlcl9pZEIRCg9fbGFuZ3VhZ2VfZ3JvdXAiTwoTTGlzdFVzZWNhc2VSZXNwb25zZRIpCgh1c2VjYXNlcxgBIAMoCzIXLnNlc3Npb24udjEuVXNlY2FzZUluZm8SDQoFdG90YWwYAiABKAMilwQKFFVwZGF0ZVVzZWNhc2VSZXF1ZXN0EhsKCnVzZWNhc2VfaWQYASABKANCB7pIBCICIAASGAoLc2Vzc2lvbl91aWQYAiABKAlIAIgBARIaCg1zaG93X2hvbWVwYWdlGAMgASgISAGIAQESGwoOb3JkZXJfaG9tZXBhZ2UYBCABKAVIAogBARIZCgxzaG93X3VzZWNhc2UYBSABKAhIA4gBARIaCg1vcmRlcl91c2VjYXNlGAYgASgFSASIAQESEwoGcmVtYXJrGAcgASgJSAWIAQESLgoGc3RhdHVzGAggASgOMhkuc2Vzc2lvbi52MS5Vc2VjYXNlU3RhdHVzSAaIAQESLgoGc291cmNlGAkgASgOMhkuc2Vzc2lvbi52MS5TZXNzaW9uU291cmNlSAeIAQESIQoUc2Vzc2lvbl9mcm9tX3VzZXJfaWQYCiABKAlICIgBARIbCg5sYW5ndWFnZV9ncm91cBgLIAEoCUgJiAEBQg4KDF9zZXNzaW9uX3VpZEIQCg5fc2hvd19ob21lcGFnZUIRCg9fb3JkZXJfaG9tZXBhZ2VCDwoNX3Nob3dfdXNlY2FzZUIQCg5fb3JkZXJfdXNlY2FzZUIJCgdfcmVtYXJrQgkKB19zdGF0dXNCCQoHX3NvdXJjZUIXChVfc2Vzc2lvbl9mcm9tX3VzZXJfaWRCEQoPX2xhbmd1YWdlX2dyb3VwIhcKFVVwZGF0ZVVzZWNhc2VSZXNwb25zZSK2AQoSQmxvY2tlZFNlc3Npb25JbmZvEgoKAmlkGAEgASgDEhMKC3Nlc3Npb25fdWlkGAIgASgJEg8KB3VzZXJfaWQYAyABKAkSDgoGcmVhc29uGAQgASgJEi4KCmNyZWF0ZWRfYXQYBSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEi4KCnVwZGF0ZWRfYXQYBiABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wIp0BChpMaXN0QmxvY2tlZFNlc3Npb25zUmVxdWVzdBIVCgRwYWdlGAEgASgFQge6SAQaAigBEhwKCXBhZ2Vfc2l6ZRgCIAEoBUIJukgGGgQYZCgBEhgKC3Nlc3Npb25fdWlkGAMgASgJSACIAQESFAoHdXNlcl9pZBgEIAEoCUgBiAEBQg4KDF9zZXNzaW9uX3VpZEIKCghfdXNlcl9pZCJmChtMaXN0QmxvY2tlZFNlc3Npb25zUmVzcG9uc2USOAoQYmxvY2tlZF9zZXNzaW9ucxgBIAMoCzIeLnNlc3Npb24udjEuQmxvY2tlZFNlc3Npb25JbmZvEg0KBXRvdGFsGAIgASgDInMKH1VwZGF0ZVNlc3Npb25CbG9ja1N0YXR1c1JlcXVlc3QSHAoLc2Vzc2lvbl91aWQYASABKAlCB7pIBHICEAESEgoKaXNfYmxvY2tlZBgCIAEoCBITCgZyZWFzb24YAyABKAlIAIgBAUIJCgdfcmVhc29uIiIKIFVwZGF0ZVNlc3Npb25CbG9ja1N0YXR1c1Jlc3BvbnNlIhsKGUdldE5ld1Nlc3Npb25MaW1pdFJlcXVlc3QiMAoPTmV3U2Vzc2lvbkNvdW50Eg4KBm1pbnV0ZRgBIAEoCRINCgVjb3VudBgCIAEoAyKKAQoaR2V0TmV3U2Vzc2lvbkxpbWl0UmVzcG9uc2USGwoTbmV3X3Nlc3Npb25fcGVyX21pbhgBIAEoAxIWCg53aGl0ZV91c2VyX2lkcxgCIAMoCRI3ChJuZXdfc2Vzc2lvbl9jb3VudHMYAyADKAsyGy5zZXNzaW9uLnYxLk5ld1Nlc3Npb25Db3VudCJQChxVcGRhdGVOZXdTZXNzaW9uTGltaXRSZXF1ZXN0EhsKE25ld19zZXNzaW9uX3Blcl9taW4YASABKAMSEwoLd2hpdGVfdXNlcnMYAiADKAkiHwodVXBkYXRlTmV3U2Vzc2lvbkxpbWl0UmVzcG9uc2UiFQoTR2V0UXVldWVJbmZvUmVxdWVzdCJlCglRdWV1ZUluZm8SKQoKcXVldWVfdHlwZRgBIAEoDjIVLnNlc3Npb24udjEuUXVldWVUeXBlEhQKDHF1ZXVlX2xlbmd0aBgCIAEoAxIXCg9tYXhfY29uY3VycmVuY2UYAyABKAMiMQoPUXVldWVDb25maWdJbmZvEh4KFmdsb2JhbF9tYXhfY29uY3VycmVuY2UYASABKAMidAoUR2V0UXVldWVJbmZvUmVzcG9uc2USKQoKcXVldWVfaW5mbxgBIAMoCzIVLnNlc3Npb24udjEuUXVldWVJbmZvEjEKDHF1ZXVlX2NvbmZpZxgCIAEoCzIbLnNlc3Npb24udjEuUXVldWVDb25maWdJbmZvImwKHVNldFF1ZXVlTWF4Q29uY3VycmVuY2VSZXF1ZXN0EikKCnF1ZXVlX3R5cGUYASABKA4yFS5zZXNzaW9uLnYxLlF1ZXVlVHlwZRIgCg9tYXhfY29uY3VycmVuY2UYAiABKANCB7pIBCICIAAiUwoeU2V0UXVldWVNYXhDb25jdXJyZW5jZVJlc3BvbnNlEjEKDHF1ZXVlX2NvbmZpZxgBIAEoCzIbLnNlc3Npb24udjEuUXVldWVDb25maWdJbmZvIkkKHlNldEdsb2JhbE1heENvbmN1cnJlbmNlUmVxdWVzdBInChZnbG9iYWxfbWF4X2NvbmN1cnJlbmNlGAEgASgDQge6SAQiAiAAIlQKH1NldEdsb2JhbE1heENvbmN1cnJlbmNlUmVzcG9uc2USMQoMcXVldWVfY29uZmlnGAEgASgLMhsuc2Vzc2lvbi52MS5RdWV1ZUNvbmZpZ0luZm8iPgoRQ2xlYXJRdWV1ZVJlcXVlc3QSKQoKcXVldWVfdHlwZRgBIAEoDjIVLnNlc3Npb24udjEuUXVldWVUeXBlIl4KEkNsZWFyUXVldWVSZXNwb25zZRIVCg10YXNrc19yZW1vdmVkGAEgASgDEjEKDHF1ZXVlX2NvbmZpZxgCIAEoCzIbLnNlc3Npb24udjEuUXVldWVDb25maWdJbmZvImEKJUJhdGNoVXBkYXRlUXVldWVNYXhDb25jdXJyZW5jZVJlcXVlc3QSOAoNcXVldWVfdXBkYXRlcxgBIAMoCzIXLnNlc3Npb24udjEuUXVldWVVcGRhdGVCCLpIBZIBAggBIloKC1F1ZXVlVXBkYXRlEikKCnF1ZXVlX3R5cGUYASABKA4yFS5zZXNzaW9uLnYxLlF1ZXVlVHlwZRIgCg9tYXhfY29uY3VycmVuY2UYAiABKANCB7pIBCICIAAiUwomQmF0Y2hVcGRhdGVRdWV1ZU1heENvbmN1cnJlbmNlUmVzcG9uc2USKQoKcXVldWVfaW5mbxgBIAMoCzIVLnNlc3Npb24udjEuUXVldWVJbmZvIhkKF0dldFF1ZXVlU2V0dGluZ3NSZXF1ZXN0InoKDFF1ZXVlU2V0dGluZxIpCgpxdWV1ZV90eXBlGAEgASgOMhUuc2Vzc2lvbi52MS5RdWV1ZVR5cGUSJgoeY29uc3VtcHRpb25fc3BlZWRfdGFza19wZXJfbWluGAIgASgBEhcKD21heF93YWl0aW5nX21pbhgDIAEoBSJMChhHZXRRdWV1ZVNldHRpbmdzUmVzcG9uc2USMAoOcXVldWVfc2V0dGluZ3MYASADKAsyGC5zZXNzaW9uLnYxLlF1ZXVlU2V0dGluZyJLChdTZXRRdWV1ZVNldHRpbmdzUmVxdWVzdBIwCg5xdWV1ZV9zZXR0aW5ncxgBIAMoCzIYLnNlc3Npb24udjEuUXVldWVTZXR0aW5nIhoKGFNldFF1ZXVlU2V0dGluZ3NSZXNwb25zZSKXAwoaTGlzdFNlc3Npb25GZWVkYmFja1JlcXVlc3QSFQoEcGFnZRgBIAEoBUIHukgEGgIoARIcCglwYWdlX3NpemUYAiABKAVCCbpIBhoEGGQoBRINCgVzY29yZRgDIAMoBRIMCgR1c2VyGAQgASgJEhMKC3Nlc3Npb25fdWlkGAUgASgJEjYKBnN0YXR1cxgGIAEoDjIhLnNlc3Npb24udjEuU2Vzc2lvbkZlZWRiYWNrU3RhdHVzSACIAQESHwoSYWxsb3dfY29sbGVjdF9pbmZvGAcgASgISAGIAQESPgoPcm9sbGJhY2tfc3RhdHVzGAggASgOMiAuc2Vzc2lvbi52MS5DcmVkaXRSb2xsYmFja1N0YXR1c0gCiAEBEjIKDGNyZWRpdF9yYW5nZRgJIAEoCzIXLnNlc3Npb24udjEuQ3JlZGl0UmFuZ2VIA4gBAUIJCgdfc3RhdHVzQhUKE19hbGxvd19jb2xsZWN0X2luZm9CEgoQX3JvbGxiYWNrX3N0YXR1c0IPCg1fY3JlZGl0X3JhbmdlIkEKC0NyZWRpdFJhbmdlEhAKA21pbhgBIAEoBUgAiAEBEhAKA21heBgCIAEoBUgBiAEBQgYKBF9taW5CBgoEX21heCJbChtMaXN0U2Vzc2lvbkZlZWRiYWNrUmVzcG9uc2USLQoIZmVlZGJhY2sYASADKAsyGy5zZXNzaW9uLnYxLlNlc3Npb25GZWVkYmFjaxINCgV0b3RhbBgCIAEoAyK/AwoPU2Vzc2lvbkZlZWRiYWNrEg0KBXNjb3JlGAEgASgFEg8KB2NvbnRlbnQYAiABKAkSEwoLc2Vzc2lvbl91aWQYAyABKAkSGgoSYWxsb3dfY29sbGVjdF9pbmZvGAQgASgIEjEKBnN0YXR1cxgFIAEoDjIhLnNlc3Npb24udjEuU2Vzc2lvbkZlZWRiYWNrU3RhdHVzEg8KB3VzZXJfaWQYBiABKAkSEQoJdXNlcl9uYW1lGAcgASgJEg0KBWVtYWlsGAggASgJEi4KCmNyZWF0ZWRfYXQYCSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEi4KCnVwZGF0ZWRfYXQYCiABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEhYKCWlzX3NoYXJlZBgLIAEoCEgAiAEBEjkKD3JvbGxiYWNrX3N0YXR1cxgMIAEoDjIgLnNlc3Npb24udjEuQ3JlZGl0Um9sbGJhY2tTdGF0dXMSFgoOY29zdGVkX2NyZWRpdHMYDSABKAUSHAoUY2FuX3JvbGxiYWNrX2NyZWRpdHMYDiABKAVCDAoKX2lzX3NoYXJlZCIuChdTaWduYXR1cmVTZXNzaW9uUmVxdWVzdBITCgtzZXNzaW9uX3VpZBgBIAEoCSIpChhTaWduYXR1cmVTZXNzaW9uUmVzcG9uc2USDQoFdG9rZW4YASABKAkqegoNVXNlY2FzZVN0YXR1cxIeChpVU0VDQVNFX1NUQVRVU19VTlNQRUNJRklFRBAAEhcKE1VTRUNBU0VfU1RBVFVTX1BBU1MQARIXChNVU0VDQVNFX1NUQVRVU19ERU5ZEAISFwoTVVNFQ0FTRV9TVEFUVVNfVE9ETxADKmUKDVNlc3Npb25Tb3VyY2USHgoaU0VTU0lPTl9TT1VSQ0VfVU5TUEVDSUZJRUQQABIXChNTRVNTSU9OX1NPVVJDRV9VU0VSEAESGwoXU0VTU0lPTl9TT1VSQ0VfT0ZGSUNJQUwQAiqXAQoJUXVldWVUeXBlEhoKFlFVRVVFX1RZUEVfVU5TUEVDSUZJRUQQABISCg5RVUVVRV9UWVBFX0FMTBABEhYKElFVRVVFX1RZUEVfREVGQVVMVBACEhIKDlFVRVVFX1RZUEVfVklQEAMSFQoRUVVFVUVfVFlQRV9CVUZGRVIQBBIXChNRVUVVRV9UWVBFX0VEVV9URUFNEAUqYAoUQ3JlZGl0Um9sbGJhY2tTdGF0dXMSIgoeQ1JFRElUX1JPTExCQUNLX1NUQVRVU19QRU5ESU5HEAASJAogQ1JFRElUX1JPTExCQUNLX1NUQVRVU19QUk9DRVNTRUQQASquAQoVU2Vzc2lvbkZlZWRiYWNrU3RhdHVzEiMKH1NFU1NJT05fRkVFREJBQ0tfU1RBVFVTX1BFTkRJTkcQABImCiJTRVNTSU9OX0ZFRURCQUNLX1NUQVRVU19QUk9DRVNTSU5HEAESJAogU0VTU0lPTl9GRUVEQkFDS19TVEFUVVNfUkVTT0xWRUQQAhIiCh5TRVNTSU9OX0ZFRURCQUNLX1NUQVRVU19DTE9TRUQQAzLJDwoTU2Vzc2lvbkFkbWluU2VydmljZRJOCgtMaXN0VXNlY2FzZRIeLnNlc3Npb24udjEuTGlzdFVzZWNhc2VSZXF1ZXN0Gh8uc2Vzc2lvbi52MS5MaXN0VXNlY2FzZVJlc3BvbnNlElQKDVVwZGF0ZVVzZWNhc2USIC5zZXNzaW9uLnYxLlVwZGF0ZVVzZWNhc2VSZXF1ZXN0GiEuc2Vzc2lvbi52MS5VcGRhdGVVc2VjYXNlUmVzcG9uc2USZgoTTGlzdEJsb2NrZWRTZXNzaW9ucxImLnNlc3Npb24udjEuTGlzdEJsb2NrZWRTZXNzaW9uc1JlcXVlc3QaJy5zZXNzaW9uLnYxLkxpc3RCbG9ja2VkU2Vzc2lvbnNSZXNwb25zZRJ1ChhVcGRhdGVTZXNzaW9uQmxvY2tTdGF0dXMSKy5zZXNzaW9uLnYxLlVwZGF0ZVNlc3Npb25CbG9ja1N0YXR1c1JlcXVlc3QaLC5zZXNzaW9uLnYxLlVwZGF0ZVNlc3Npb25CbG9ja1N0YXR1c1Jlc3BvbnNlEmMKEkdldE5ld1Nlc3Npb25MaW1pdBIlLnNlc3Npb24udjEuR2V0TmV3U2Vzc2lvbkxpbWl0UmVxdWVzdBomLnNlc3Npb24udjEuR2V0TmV3U2Vzc2lvbkxpbWl0UmVzcG9uc2USbAoVVXBkYXRlTmV3U2Vzc2lvbkxpbWl0Eiguc2Vzc2lvbi52MS5VcGRhdGVOZXdTZXNzaW9uTGltaXRSZXF1ZXN0Gikuc2Vzc2lvbi52MS5VcGRhdGVOZXdTZXNzaW9uTGltaXRSZXNwb25zZRJRCgxHZXRRdWV1ZUluZm8SHy5zZXNzaW9uLnYxLkdldFF1ZXVlSW5mb1JlcXVlc3QaIC5zZXNzaW9uLnYxLkdldFF1ZXVlSW5mb1Jlc3BvbnNlEm8KFlNldFF1ZXVlTWF4Q29uY3VycmVuY2USKS5zZXNzaW9uLnYxLlNldFF1ZXVlTWF4Q29uY3VycmVuY2VSZXF1ZXN0Giouc2Vzc2lvbi52MS5TZXRRdWV1ZU1heENvbmN1cnJlbmNlUmVzcG9uc2UScgoXU2V0R2xvYmFsTWF4Q29uY3VycmVuY2USKi5zZXNzaW9uLnYxLlNldEdsb2JhbE1heENvbmN1cnJlbmNlUmVxdWVzdBorLnNlc3Npb24udjEuU2V0R2xvYmFsTWF4Q29uY3VycmVuY2VSZXNwb25zZRKHAQoeQmF0Y2hVcGRhdGVRdWV1ZU1heENvbmN1cnJlbmNlEjEuc2Vzc2lvbi52MS5CYXRjaFVwZGF0ZVF1ZXVlTWF4Q29uY3VycmVuY2VSZXF1ZXN0GjIuc2Vzc2lvbi52MS5CYXRjaFVwZGF0ZVF1ZXVlTWF4Q29uY3VycmVuY2VSZXNwb25zZRJLCgpDbGVhclF1ZXVlEh0uc2Vzc2lvbi52MS5DbGVhclF1ZXVlUmVxdWVzdBoeLnNlc3Npb24udjEuQ2xlYXJRdWV1ZVJlc3BvbnNlEl0KEEdldFF1ZXVlU2V0dGluZ3MSIy5zZXNzaW9uLnYxLkdldFF1ZXVlU2V0dGluZ3NSZXF1ZXN0GiQuc2Vzc2lvbi52MS5HZXRRdWV1ZVNldHRpbmdzUmVzcG9uc2USXQoQU2V0UXVldWVTZXR0aW5ncxIjLnNlc3Npb24udjEuU2V0UXVldWVTZXR0aW5nc1JlcXVlc3QaJC5zZXNzaW9uLnYxLlNldFF1ZXVlU2V0dGluZ3NSZXNwb25zZRJmChNMaXN0U2Vzc2lvbkZlZWRiYWNrEiYuc2Vzc2lvbi52MS5MaXN0U2Vzc2lvbkZlZWRiYWNrUmVxdWVzdBonLnNlc3Npb24udjEuTGlzdFNlc3Npb25GZWVkYmFja1Jlc3BvbnNlEk4KC0xpc3RTZXNzaW9uEh4uc2Vzc2lvbi52MS5MaXN0U2Vzc2lvblJlcXVlc3QaHy5zZXNzaW9uLnYxLkxpc3RTZXNzaW9uUmVzcG9uc2USbwoWUm9sbGJhY2tTZXNzaW9uQ3JlZGl0cxIpLnNlc3Npb24udjEuUm9sbGJhY2tTZXNzaW9uQ3JlZGl0c1JlcXVlc3QaKi5zZXNzaW9uLnYxLlJvbGxiYWNrU2Vzc2lvbkNyZWRpdHNSZXNwb25zZRKEAQodUm9sbGJhY2tTZXNzaW9uRmVlZGJhY2tDcmVkaXQSMC5zZXNzaW9uLnYxLlJvbGxiYWNrU2Vzc2lvbkZlZWRiYWNrQ3JlZGl0UmVxdWVzdBoxLnNlc3Npb24udjEuUm9sbGJhY2tTZXNzaW9uRmVlZGJhY2tDcmVkaXRSZXNwb25zZRJ+ChtVcGRhdGVTZXNzaW9uRmVlZGJhY2tTdGF0dXMSLi5zZXNzaW9uLnYxLlVwZGF0ZVNlc3Npb25GZWVkYmFja1N0YXR1c1JlcXVlc3QaLy5zZXNzaW9uLnYxLlVwZGF0ZVNlc3Npb25GZWVkYmFja1N0YXR1c1Jlc3BvbnNlEl0KEFNpZ25hdHVyZVNlc3Npb24SIy5zZXNzaW9uLnYxLlNpZ25hdHVyZVNlc3Npb25SZXF1ZXN0GiQuc2Vzc2lvbi52MS5TaWduYXR1cmVTZXNzaW9uUmVzcG9uc2VCrQEKDmNvbS5zZXNzaW9uLnYxQhFTZXNzaW9uQWRtaW5Qcm90b1ABWj9naXRsYWIubW9uaWNhLmNuL3ZpZGEvc2RrL2JpenNlcnZlci1nby5naXQvc2Vzc2lvbi92MTtzZXNzaW9udjGiAgNTWFiqAgpTZXNzaW9uLlYxygIKU2Vzc2lvblxWMeICFlNlc3Npb25cVjFcR1BCTWV0YWRhdGHqAgtTZXNzaW9uOjpWMWIGcHJvdG8z",[Ye,te]),Vp=M(bp,0),mp=z("CiZzZXNzaW9uL3YxL2NvbW11bml0eV9JbnRlcmFjdGlvbi5wcm90bxIKc2Vzc2lvbi52MSJsChtDb21tdW5pdHlVc2VjYXNlTGlrZVJlcXVlc3QSEQoJY2xpZW50X2lkGAEgASgJEhEKCXJlY29yZF9pZBgCIAEoCRInCglsaWtlX3R5cGUYAyABKA4yFC5zZXNzaW9uLnYxLkxpa2VUeXBlIk8KHENvbW11bml0eVVzZWNhc2VMaWtlUmVzcG9uc2USDwoHc3VjY2VzcxgBIAEoCBIPCgdtZXNzYWdlGAIgASgJEg0KBWNvdW50GAMgASgDKlAKCExpa2VUeXBlEhkKFUxJS0VfVFlQRV9VTlNQRUNJRklFRBAAEhIKDkxJS0VfVFlQRV9MSUtFEAESFQoRTElLRV9UWVBFX0RJU0xJS0UQAjJ4ChtDb21tdW5pdHlJbnRlcmFjdGlvblNlcnZpY2USWQoETGlrZRInLnNlc3Npb24udjEuQ29tbXVuaXR5VXNlY2FzZUxpa2VSZXF1ZXN0Giguc2Vzc2lvbi52MS5Db21tdW5pdHlVc2VjYXNlTGlrZVJlc3BvbnNlQrUBCg5jb20uc2Vzc2lvbi52MUIZQ29tbXVuaXR5SW50ZXJhY3Rpb25Qcm90b1ABWj9naXRsYWIubW9uaWNhLmNuL3ZpZGEvc2RrL2JpenNlcnZlci1nby5naXQvc2Vzc2lvbi92MTtzZXNzaW9udjGiAgNTWFiqAgpTZXNzaW9uLlYxygIKU2Vzc2lvblxWMeICFlNlc3Npb25cVjFcR1BCTWV0YWRhdGHqAgtTZXNzaW9uOjpWMWIGcHJvdG8z",[te]),fp=M(mp,0),Kn=z("Ch1zZXNzaW9uL3YxL3Nlc3Npb25fYmFzZS5wcm90bxIKc2Vzc2lvbi52MSIzCgtTZXNzaW9uSW5mbxINCgV0aXRsZRgBIAEoCRIVCg11c2VyX3F1ZXN0aW9uGAIgASgJIlwKCVNwYWNlSW5mbxINCgV0aXRsZRgBIAEoCRISCgpzY3JlZW5zaG90GAIgASgJEhEKCXNwYWNlX3VybBgDIAEoCRIZChFpc19zZXNzaW9uX3B1YmxpYxgEIAEoCCJyCgdDcmVhdG9yEgwKBG5hbWUYASABKAkSDQoFZW1haWwYAiABKAkSDgoGYXZhdGFyGAMgASgJEiwKCXVzZXJfdHlwZRgEIAEoDjIULnNlc3Npb24udjEuVXNlclR5cGVIAIgBAUIMCgpfdXNlcl90eXBlIq8DChRDb21tdW5pdHlVc2VjYXNlSW5mbxIkCgdjcmVhdG9yGAEgASgLMhMuc2Vzc2lvbi52MS5DcmVhdG9yEhIKCnJlY29yZF91aWQYAiABKAkSEwoLc2Vzc2lvbl91aWQYAyABKAkSLwoNcmVzb3VyY2VfdHlwZRgEIAEoDjIYLnNlc3Npb24udjEuUmVzb3VyY2VUeXBlEhMKC3Jlc291cmNlX2lkGAUgASgJEg0KBWdyb3VwGAYgASgJEg4KBmxvY2FsZRgHIAEoCRIzCg9yZXNvdXJjZV9zb3VyY2UYCCABKA4yGi5zZXNzaW9uLnYxLlJlc291cmNlU291cmNlEhYKDmZhdm9yaXRlX2NvdW50GAkgASgDEjIKDHNlc3Npb25faW5mbxgKIAEoCzIXLnNlc3Npb24udjEuU2Vzc2lvbkluZm9IAIgBARIuCgpzcGFjZV9pbmZvGAsgASgLMhUuc2Vzc2lvbi52MS5TcGFjZUluZm9IAYgBARISCgpsaWtlX2NvdW50GAwgASgDQg8KDV9zZXNzaW9uX2luZm9CDQoLX3NwYWNlX2luZm8i9QEKDENvbGxhYm9yYXRvchIUCgd1c2VyX2lkGAEgASgJSACIAQESDQoFZW1haWwYAiABKAkSEQoEbmFtZRgDIAEoCUgBiAEBEhMKBmF2YXRhchgEIAEoCUgCiAEBEjYKCnBlcm1pc3Npb24YBSABKA4yIi5zZXNzaW9uLnYxLkNvbGxhYm9yYXRvclBlcm1pc3Npb24SEAoIaXNfb3duZXIYBiABKAgSLgoGc3RhdHVzGAcgASgOMh4uc2Vzc2lvbi52MS5Db2xsYWJvcmF0b3JTdGF0dXNCCgoIX3VzZXJfaWRCBwoFX25hbWVCCQoHX2F2YXRhciL2AQoPU2Vzc2lvbkZpbGVJdGVtEhQKDHNhbmRib3hfcGF0aBgBIAEoCRIQCghmaWxlX3VybBgCIAEoCRIwCgpmaWxlX3N0YWdlGAQgASgOMhwuc2Vzc2lvbi52MS5TZXNzaW9uRmlsZVN0YWdlEi4KCWZpbGVfdHlwZRgFIAEoDjIbLnNlc3Npb24udjEuU2Vzc2lvbkZpbGVUeXBlEjIKC2ZpbGVfZWRpdG9yGAYgASgOMh0uc2Vzc2lvbi52MS5TZXNzaW9uRmlsZUVkaXRvchITCgtzZXNzaW9uX3VpZBgHIAEoCRIQCghldmVudF9pZBgIIAEoCSKvAgofU2Vzc2lvbkZpbGVJdGVtV2l0aFNlc3Npb25UaXRsZRIuCglmaWxlX2l0ZW0YASABKAsyGy5zZXNzaW9uLnYxLlNlc3Npb25GaWxlSXRlbRIVCg1zZXNzaW9uX3RpdGxlGAIgASgJEhUKCHNoYXJlX2lkGAMgASgJSACIAQESMwoPbGFzdF91cGRhdGVkX2F0GAQgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIRCglmaWxlX25hbWUYBSABKAkSEwoLdmVyc2lvbl91aWQYBiABKAkSGgoSaXNfbG9hZF90b19zYW5kYm94GAcgASgIEhgKC3NoYXJlX3RpdGxlGAggASgJSAGIAQFCCwoJX3NoYXJlX2lkQg4KDF9zaGFyZV90aXRsZSqmAQoNQWdlbnRUYXNrTW9kZRIfChtBR0VOVF9UQVNLX01PREVfVU5TUEVDSUZJRUQQABIcChhBR0VOVF9UQVNLX01PREVfU1RBTkRBUkQQARIfChtBR0VOVF9UQVNLX01PREVfSElHSF9FRkZPUlQQAhIYChRBR0VOVF9UQVNLX01PREVfTElURRADEhsKF0FHRU5UX1RBU0tfTU9ERV9ESVNDVVNTEAQqXQoLQXVkaXRTdGF0dXMSGAoUQVVESVRfU1RBVFVTX1BFTkRJTkcQABIZChVBVURJVF9TVEFUVVNfQVBQUk9WRUQQARIZChVBVURJVF9TVEFUVVNfUkVKRUNURUQQAiphCgxSZXNvdXJjZVR5cGUSHQoZUkVTT1VSQ0VfVFlQRV9VTlNQRUNJRklFRBAAEhkKFVJFU09VUkNFX1RZUEVfU0VTU0lPThABEhcKE1JFU09VUkNFX1RZUEVfU1BBQ0UQAippCg5SZXNvdXJjZVNvdXJjZRIfChtSRVNPVVJDRV9TT1VSQ0VfVU5TUEVDSUZJRUQQABIcChhSRVNPVVJDRV9TT1VSQ0VfT0ZGSUNJQUwQARIYChRSRVNPVVJDRV9TT1VSQ0VfVVNFUhACKlEKCFVzZXJUeXBlEhkKFVVTRVJfVFlQRV9VTlNQRUNJRklFRBAAEhYKElVTRVJfVFlQRV9PRkZJQ0lBTBABEhIKDlVTRVJfVFlQRV9VU0VSEAIqewoSQ29sbGFib3JhdG9yU3RhdHVzEiMKH0NPTExBQk9SQVRPUl9TVEFUVVNfVU5TUEVDSUZJRUQQABIfChtDT0xMQUJPUkFUT1JfU1RBVFVTX1JFTU9WRUQQARIfChtDT0xMQUJPUkFUT1JfU1RBVFVTX0RFTEVURUQQAiqQAQoWQ29sbGFib3JhdG9yUGVybWlzc2lvbhInCiNDT0xMQUJPUkFUT1JfUEVSTUlTU0lPTl9VTlNQRUNJRklFRBAAEiUKIUNPTExBQk9SQVRPUl9QRVJNSVNTSU9OX1JFQURfT05MWRABEiYKIkNPTExBQk9SQVRPUl9QRVJNSVNTSU9OX1JFQURfV1JJVEUQAipRCg5FeHBlcmltZW50VHlwZRIfChtFWFBFUklNRU5UX1RZUEVfVU5TUEVDSUZJRUQQABIeChpFWFBFUklNRU5UX1RZUEVfT05CT0FSRElORxABKooBCg9TZXNzaW9uRmlsZVR5cGUSIQodU0VTU0lPTl9GSUxFX1RZUEVfVU5TUEVDSUZJRUQQABIaChZTRVNTSU9OX0ZJTEVfVFlQRV9GSUxFEAESGwoXU0VTU0lPTl9GSUxFX1RZUEVfSU1BR0UQAhIbChdTRVNTSU9OX0ZJTEVfVFlQRV9TTElERRADKnYKEFNlc3Npb25GaWxlU3RhZ2USIgoeU0VTU0lPTl9GSUxFX1NUQUdFX1VOU1BFQ0lGSUVEEAASHgoaU0VTU0lPTl9GSUxFX1NUQUdFX1BST0NFU1MQARIeChpTRVNTSU9OX0ZJTEVfU1RBR0VfUFJPRFVDVBACKngKEVNlc3Npb25GaWxlRWRpdG9yEiMKH1NFU1NJT05fRklMRV9FRElUT1JfVU5TUEVDSUZJRUQQABIaChZTRVNTSU9OX0ZJTEVfRURJVE9SX0FJEAESIgoeU0VTU0lPTl9GSUxFX0VESVRPUl9VU0VSX09XTkVSEAIqmQEKFlNlc3Npb25GaWxlQ29udmVydFR5cGUSKQolU0VTU0lPTl9GSUxFX0NPTlZFUlRfVFlQRV9VTlNQRUNJRklFRBAAEikKJVNFU1NJT05fRklMRV9DT05WRVJUX1RZUEVfSFRNTF9UT19QREYQARIpCiVTRVNTSU9OX0ZJTEVfQ09OVkVSVF9UWVBFX0hUTUxfVE9fUFBUEAIq7QEKGFNlc3Npb25GaWxlQ29udmVydFN0YXR1cxIrCidTRVNTSU9OX0ZJTEVfQ09OVkVSVF9TVEFUVVNfVU5TUEVDSUZJRUQQABInCiNTRVNTSU9OX0ZJTEVfQ09OVkVSVF9TVEFUVVNfUEVORElORxABEioKJlNFU1NJT05fRklMRV9DT05WRVJUX1NUQVRVU19DT05WRVJUSU5HEAISJwojU0VTU0lPTl9GSUxFX0NPTlZFUlRfU1RBVFVTX1NVQ0NFU1MQAxImCiJTRVNTSU9OX0ZJTEVfQ09OVkVSVF9TVEFUVVNfRkFJTEVEEARCrAEKDmNvbS5zZXNzaW9uLnYxQhBTZXNzaW9uQmFzZVByb3RvUAFaP2dpdGxhYi5tb25pY2EuY24vdmlkYS9zZGsvYml6c2VydmVyLWdvLmdpdC9zZXNzaW9uL3YxO3Nlc3Npb252MaICA1NYWKoCClNlc3Npb24uVjHKAgpTZXNzaW9uXFYx4gIWU2Vzc2lvblxWMVxHUEJNZXRhZGF0YeoCC1Nlc3Npb246OlYxYgZwcm90bzM",[te]),Ap=z("CiRzZXNzaW9uL3YxL3Nlc3Npb25fY29sbGFib3JhdGUucHJvdG8SCnNlc3Npb24udjEiTQoYTGlzdENvbGxhYm9yYXRvcnNSZXF1ZXN0EiEKC3Nlc3Npb25fdWlkGAEgASgJQge6SARyAhABSACIAQFCDgoMX3Nlc3Npb25fdWlkIkwKGUxpc3RDb2xsYWJvcmF0b3JzUmVzcG9uc2USLwoNY29sbGFib3JhdG9ycxgBIAMoCzIYLnNlc3Npb24udjEuQ29sbGFib3JhdG9yIjIKGENoZWNrQWxwaGFCeUVtYWlsUmVxdWVzdBIWCgVlbWFpbBgBIAEoCUIHukgEcgIQASItChlDaGVja0FscGhhQnlFbWFpbFJlc3BvbnNlEhAKCGlzX2FscGhhGAEgASgIImgKFFNlbmRWaWV3RW1haWxSZXF1ZXN0EhwKC3Nlc3Npb25fdWlkGAEgASgJQge6SARyAhABEhYKBWVtYWlsGAIgASgJQge6SARyAhABEhoKCXZpZXdfbGluaxgDIAEoCUIHukgEcgIQASIXChVTZW5kVmlld0VtYWlsUmVzcG9uc2UipwEKGUludml0ZUNvbGxhYm9yYXRvclJlcXVlc3QSHAoLc2Vzc2lvbl91aWQYASABKAlCB7pIBHICEAESFgoFZW1haWwYAiABKAlCB7pIBHICEAESNgoKcGVybWlzc2lvbhgDIAEoDjIiLnNlc3Npb24udjEuQ29sbGFib3JhdG9yUGVybWlzc2lvbhIcCgtpbnZpdGVfbGluaxgEIAEoCUIHukgEcgIQASJjChpJbnZpdGVDb2xsYWJvcmF0b3JSZXNwb25zZRIVCg1pc19hbHBoYV91c2VyGAEgASgIEi4KDGNvbGxhYm9yYXRvchgCIAEoCzIYLnNlc3Npb24udjEuQ29sbGFib3JhdG9yIkcKGVJlbW92ZUNvbGxhYm9yYXRvclJlcXVlc3QSHAoLc2Vzc2lvbl91aWQYASABKAlCB7pIBHICEAESDAoEdXNlchgCIAEoCSIcChpSZW1vdmVDb2xsYWJvcmF0b3JSZXNwb25zZSKJAQojVXBkYXRlQ29sbGFib3JhdG9yUGVybWlzc2lvblJlcXVlc3QSHAoLc2Vzc2lvbl91aWQYASABKAlCB7pIBHICEAESDAoEdXNlchgCIAEoCRI2CgpwZXJtaXNzaW9uGAMgASgOMiIuc2Vzc2lvbi52MS5Db2xsYWJvcmF0b3JQZXJtaXNzaW9uIiYKJFVwZGF0ZUNvbGxhYm9yYXRvclBlcm1pc3Npb25SZXNwb25zZSIzChNBY2NlcHRJbnZpdGVSZXF1ZXN0EhwKC3Nlc3Npb25fdWlkGAEgASgJQge6SARyAhABIhYKFEFjY2VwdEludml0ZVJlc3BvbnNlIjMKE1JlamVjdEludml0ZVJlcXVlc3QSHAoLc2Vzc2lvbl91aWQYASABKAlCB7pIBHICEAEiFgoUUmVqZWN0SW52aXRlUmVzcG9uc2UyuQYKGVNlc3Npb25Db2xsYWJvcmF0ZVNlcnZpY2USYgoRTGlzdENvbGxhYm9yYXRvcnMSJC5zZXNzaW9uLnYxLkxpc3RDb2xsYWJvcmF0b3JzUmVxdWVzdBolLnNlc3Npb24udjEuTGlzdENvbGxhYm9yYXRvcnNSZXNwb25zZSIAEmIKEUNoZWNrQWxwaGFCeUVtYWlsEiQuc2Vzc2lvbi52MS5DaGVja0FscGhhQnlFbWFpbFJlcXVlc3QaJS5zZXNzaW9uLnYxLkNoZWNrQWxwaGFCeUVtYWlsUmVzcG9uc2UiABJWCg1TZW5kVmlld0VtYWlsEiAuc2Vzc2lvbi52MS5TZW5kVmlld0VtYWlsUmVxdWVzdBohLnNlc3Npb24udjEuU2VuZFZpZXdFbWFpbFJlc3BvbnNlIgASZQoSSW52aXRlQ29sbGFib3JhdG9yEiUuc2Vzc2lvbi52MS5JbnZpdGVDb2xsYWJvcmF0b3JSZXF1ZXN0GiYuc2Vzc2lvbi52MS5JbnZpdGVDb2xsYWJvcmF0b3JSZXNwb25zZSIAEmUKElJlbW92ZUNvbGxhYm9yYXRvchIlLnNlc3Npb24udjEuUmVtb3ZlQ29sbGFib3JhdG9yUmVxdWVzdBomLnNlc3Npb24udjEuUmVtb3ZlQ29sbGFib3JhdG9yUmVzcG9uc2UiABKDAQocVXBkYXRlQ29sbGFib3JhdG9yUGVybWlzc2lvbhIvLnNlc3Npb24udjEuVXBkYXRlQ29sbGFib3JhdG9yUGVybWlzc2lvblJlcXVlc3QaMC5zZXNzaW9uLnYxLlVwZGF0ZUNvbGxhYm9yYXRvclBlcm1pc3Npb25SZXNwb25zZSIAElMKDEFjY2VwdEludml0ZRIfLnNlc3Npb24udjEuQWNjZXB0SW52aXRlUmVxdWVzdBogLnNlc3Npb24udjEuQWNjZXB0SW52aXRlUmVzcG9uc2UiABJTCgxSZWplY3RJbnZpdGUSHy5zZXNzaW9uLnYxLlJlamVjdEludml0ZVJlcXVlc3QaIC5zZXNzaW9uLnYxLlJlamVjdEludml0ZVJlc3BvbnNlIgBCswEKDmNvbS5zZXNzaW9uLnYxQhdTZXNzaW9uQ29sbGFib3JhdGVQcm90b1ABWj9naXRsYWIubW9uaWNhLmNuL3ZpZGEvc2RrL2JpenNlcnZlci1nby5naXQvc2Vzc2lvbi92MTtzZXNzaW9udjGiAgNTWFiqAgpTZXNzaW9uLlYxygIKU2Vzc2lvblxWMeICFlNlc3Npb25cVjFcR1BCTWV0YWRhdGHqAgtTZXNzaW9uOjpWMWIGcHJvdG8z",[Ye,Kn]),pp=M(Ap,0),Zp=z("Ch9zZXNzaW9uL3YxL3Nlc3Npb25fcHVibGljLnByb3RvEgpzZXNzaW9uLnYxIokBChRTdWJtaXRVc2VjYXNlUmVxdWVzdBIqCgVlbWFpbBgBIAEoCUIbukgYchYyFF5bXkBdK0BbXkBdK1wuW15AXSskEhsKB2NvbnRlbnQYAiABKAlCCrpIB3IFEAEYkE4SGAoLc2Vzc2lvbl91aWQYAyABKAlIAIgBAUIOCgxfc2Vzc2lvbl91aWQiKwoVU3VibWl0VXNlY2FzZVJlc3BvbnNlEhIKCnVzZWNhc2VfaWQYASABKAMi2wEKElVzZWNhc2VTZXNzaW9uSW5mbxITCgtzZXNzaW9uX3VpZBgBIAEoCRIVCg1zZXNzaW9uX3RpdGxlGAIgASgJEhQKDHNlc3Npb25faWNvbhgDIAEoCRIPCgd1c2VyX2lkGAQgASgJEhIKCnVzZXJfZW1haWwYBSABKAkSDwoHY29udGVudBgGIAEoCRINCgVvcmRlchgHIAEoBRIuCgpjcmVhdGVkX2F0GAggASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIOCgZsb2NhbGUYCSABKAkieAoaTGlzdFVzZWNhc2VTZXNzaW9uc1JlcXVlc3QSFQoNc2hvd19ob21lcGFnZRgBIAEoCBIUCgxzaG93X3VzZWNhc2UYAiABKAgSDgoGbG9jYWxlGAMgASgJEg0KBWxpbWl0GAQgASgDEg4KBm9mZnNldBgFIAEoAyJPChtMaXN0VXNlY2FzZVNlc3Npb25zUmVzcG9uc2USMAoIc2Vzc2lvbnMYASADKAsyHi5zZXNzaW9uLnYxLlVzZWNhc2VTZXNzaW9uSW5mbyK/AgocTGlzdENvbW11bml0eVVzZWNhc2VzUmVxdWVzdBIYCgVsaW1pdBgBIAEoA0IJukgGIgQYZCAAEhcKBm9mZnNldBgCIAEoA0IHukgEIgIoABI0Cg1yZXNvdXJjZV90eXBlGAMgASgOMhguc2Vzc2lvbi52MS5SZXNvdXJjZVR5cGVIAIgBARI4Cg9yZXNvdXJjZV9zb3VyY2UYBCABKA4yGi5zZXNzaW9uLnYxLlJlc291cmNlU291cmNlSAGIAQESEwoGbG9jYWxlGAUgASgJSAKIAQESEgoFZ3JvdXAYBiABKAlIA4gBARIQCgN0YWcYByABKAlIBIgBAUIQCg5fcmVzb3VyY2VfdHlwZUISChBfcmVzb3VyY2Vfc291cmNlQgkKB19sb2NhbGVCCAoGX2dyb3VwQgYKBF90YWciYgodTGlzdENvbW11bml0eVVzZWNhc2VzUmVzcG9uc2USMgoIdXNlY2FzZXMYASADKAsyIC5zZXNzaW9uLnYxLkNvbW11bml0eVVzZWNhc2VJbmZvEg0KBXRvdGFsGAIgASgDIjoKH0JhdGNoR2V0Q29tbXVuaXR5VXNlY2FzZVJlcXVlc3QSFwoPcmVjb3JkX3VpZF9saXN0GAEgAygJIloKIEJhdGNoR2V0Q29tbXVuaXR5VXNlY2FzZVJlc3BvbnNlEjYKDHVzZWNhc2VfbGlzdBgBIAMoCzIgLnNlc3Npb24udjEuQ29tbXVuaXR5VXNlY2FzZUluZm8iLwobR2V0U2hhcmVkU2Vzc2lvbkZpbGVSZXF1ZXN0EhAKCHNoYXJlX2lkGAEgASgJIpUBChxHZXRTaGFyZWRTZXNzaW9uRmlsZVJlc3BvbnNlEhMKC3Nlc3Npb25fdWlkGAEgASgJEhQKDHNhbmRib3hfcGF0aBgCIAEoCRIQCghmaWxlX3VybBgDIAEoCRIRCglmaWxlX25hbWUYBCABKAkSEAoIZWRpdGFibGUYBSABKAgSEwoLc2hhcmVfdGl0bGUYBiABKAkypgQKFFNlc3Npb25QdWJsaWNTZXJ2aWNlElQKDVN1Ym1pdFVzZWNhc2USIC5zZXNzaW9uLnYxLlN1Ym1pdFVzZWNhc2VSZXF1ZXN0GiEuc2Vzc2lvbi52MS5TdWJtaXRVc2VjYXNlUmVzcG9uc2USZgoTTGlzdFVzZWNhc2VTZXNzaW9ucxImLnNlc3Npb24udjEuTGlzdFVzZWNhc2VTZXNzaW9uc1JlcXVlc3QaJy5zZXNzaW9uLnYxLkxpc3RVc2VjYXNlU2Vzc2lvbnNSZXNwb25zZRJsChVMaXN0Q29tbXVuaXR5VXNlY2FzZXMSKC5zZXNzaW9uLnYxLkxpc3RDb21tdW5pdHlVc2VjYXNlc1JlcXVlc3QaKS5zZXNzaW9uLnYxLkxpc3RDb21tdW5pdHlVc2VjYXNlc1Jlc3BvbnNlEnUKGEJhdGNoR2V0Q29tbXVuaXR5VXNlY2FzZRIrLnNlc3Npb24udjEuQmF0Y2hHZXRDb21tdW5pdHlVc2VjYXNlUmVxdWVzdBosLnNlc3Npb24udjEuQmF0Y2hHZXRDb21tdW5pdHlVc2VjYXNlUmVzcG9uc2USawoUR2V0U2hhcmVkU2Vzc2lvbkZpbGUSJy5zZXNzaW9uLnYxLkdldFNoYXJlZFNlc3Npb25GaWxlUmVxdWVzdBooLnNlc3Npb24udjEuR2V0U2hhcmVkU2Vzc2lvbkZpbGVSZXNwb25zZSIAQq4BCg5jb20uc2Vzc2lvbi52MUISU2Vzc2lvblB1YmxpY1Byb3RvUAFaP2dpdGxhYi5tb25pY2EuY24vdmlkYS9zZGsvYml6c2VydmVyLWdvLmdpdC9zZXNzaW9uL3YxO3Nlc3Npb252MaICA1NYWKoCClNlc3Npb24uVjHKAgpTZXNzaW9uXFYx4gIWU2Vzc2lvblxWMVxHUEJNZXRhZGF0YeoCC1Nlc3Npb246OlYxYgZwcm90bzM",[Ye,te,Kn]),Gp=M(Zp,0),Xp=z("CipzZXNzaW9uL3YxL3Nlc3Npb25fY29sbGFib3JhdF9wdWJsaWMucHJvdG8SCnNlc3Npb24udjEiUwoeTGlzdFB1YmxpY0NvbGxhYm9yYXRvcnNSZXF1ZXN0EiEKC3Nlc3Npb25fdWlkGAEgASgJQge6SARyAhABSACIAQFCDgoMX3Nlc3Npb25fdWlkIoUBChJQdWJsaWNDb2xsYWJvcmF0b3ISDwoHdXNlcl9pZBgBIAEoCRIMCgRuYW1lGAMgASgJEg4KBmF2YXRhchgEIAEoCRIQCghpc19vd25lchgGIAEoCBIuCgZzdGF0dXMYByABKA4yHi5zZXNzaW9uLnYxLkNvbGxhYm9yYXRvclN0YXR1cyJYCh9MaXN0UHVibGljQ29sbGFib3JhdG9yc1Jlc3BvbnNlEjUKDWNvbGxhYm9yYXRvcnMYASADKAsyHi5zZXNzaW9uLnYxLlB1YmxpY0NvbGxhYm9yYXRvcjKXAQofU2Vzc2lvbkNvbGxhYm9yYXRlUHVibGljU2VydmljZRJ0ChdMaXN0UHVibGljQ29sbGFib3JhdG9ycxIqLnNlc3Npb24udjEuTGlzdFB1YmxpY0NvbGxhYm9yYXRvcnNSZXF1ZXN0Gisuc2Vzc2lvbi52MS5MaXN0UHVibGljQ29sbGFib3JhdG9yc1Jlc3BvbnNlIgBCuAEKDmNvbS5zZXNzaW9uLnYxQhxTZXNzaW9uQ29sbGFib3JhdFB1YmxpY1Byb3RvUAFaP2dpdGxhYi5tb25pY2EuY24vdmlkYS9zZGsvYml6c2VydmVyLWdvLmdpdC9zZXNzaW9uL3YxO3Nlc3Npb252MaICA1NYWKoCClNlc3Npb24uVjHKAgpTZXNzaW9uXFYx4gIWU2Vzc2lvblxWMVxHUEJNZXRhZGF0YeoCC1Nlc3Npb246OlYxYgZwcm90bzM",[Ye,Kn]),Ip=M(Xp,0),Rp=z("CiBzZXNzaW9uL3YxL2NvbW11bml0eV9hZG1pbi5wcm90bxIKc2Vzc2lvbi52MSL/BAoVQXVkaXRDb21tdW5pdHlVc2VjYXNlEicKBnN0YXR1cxgBIAEoDjIXLnNlc3Npb24udjEuQXVkaXRTdGF0dXMSDgoGcmVtYXJrGAIgASgJEhMKC3Jldmlld2VyX2lkGAMgASgJEi8KC3Jldmlld2VkX2F0GAQgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIMCgR0YWdzGAUgAygJEgoKAmlkGAYgASgDEi4KCmNyZWF0ZWRfYXQYByABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEi4KCnVwZGF0ZWRfYXQYCCABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEi4KCmRlbGV0ZWRfYXQYCSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEg8KB3VzZXJfaWQYCiABKAkSDQoFZW1haWwYCyABKAkSEgoKcmVjb3JkX3VpZBgMIAEoCRIvCg1yZXNvdXJjZV90eXBlGA0gASgOMhguc2Vzc2lvbi52MS5SZXNvdXJjZVR5cGUSEwoLcmVzb3VyY2VfaWQYDiABKAkSDQoFZ3JvdXAYDyABKAkSDgoGbG9jYWxlGBAgASgJEg4KBmF2YXRhchgRIAEoCRINCgV0aXRsZRgSIAEoCRITCgtkZXNjcmlwdGlvbhgTIAEoCRIzCg9yZXNvdXJjZV9zb3VyY2UYFCABKA4yGi5zZXNzaW9uLnYxLlJlc291cmNlU291cmNlEg0KBW9yZGVyGBUgASgFEhIKCmlzX3B1Ymxpc2gYFiABKAgSGAoQcmVjb21tZW5kX3JlYXNvbhgXIAEoCSLbAwoZUmVjb21tZW5kQ29tbXVuaXR5VXNlY2FzZRIKCgJpZBgBIAEoAxIMCgR0YWdzGAIgAygJEi4KCmNyZWF0ZWRfYXQYAyABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEi4KCnVwZGF0ZWRfYXQYBCABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEi4KCmRlbGV0ZWRfYXQYBSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEg8KB3VzZXJfaWQYBiABKAkSEgoKcmVjb3JkX3VpZBgIIAEoCRIvCg1yZXNvdXJjZV90eXBlGAkgASgOMhguc2Vzc2lvbi52MS5SZXNvdXJjZVR5cGUSEwoLcmVzb3VyY2VfaWQYCiABKAkSDQoFZ3JvdXAYCyABKAkSDgoGbG9jYWxlGAwgASgJEg4KBmF2YXRhchgNIAEoCRINCgV0aXRsZRgOIAEoCRITCgtkZXNjcmlwdGlvbhgPIAEoCRIzCg9yZXNvdXJjZV9zb3VyY2UYECABKA4yGi5zZXNzaW9uLnYxLlJlc291cmNlU291cmNlEg0KBW9yZGVyGBEgASgFEhIKCmlzX3B1Ymxpc2gYEiABKAgiJwoKVXNlY2FzZVRhZxILCgN1aWQYASABKAkSDAoEbmFtZRgCIAEoCSIpCgxVc2VjYXNlR3JvdXASCwoDdWlkGAEgASgJEgwKBG5hbWUYAiABKAkitwMKIExpc3RBdWRpdENvbW11bml0eVVzZWNhc2VSZXF1ZXN0EgwKBHBhZ2UYASABKAUSEQoJcGFnZV9zaXplGAIgASgFEiwKBnN0YXR1cxgDIAEoDjIXLnNlc3Npb24udjEuQXVkaXRTdGF0dXNIAIgBARI0Cg1yZXNvdXJjZV90eXBlGAQgASgOMhguc2Vzc2lvbi52MS5SZXNvdXJjZVR5cGVIAYgBARIYCgtyZXNvdXJjZV9pZBgFIAEoCUgCiAEBEhEKBHVzZXIYBiABKAlIA4gBARIMCgR0YWdzGAcgAygJEhIKBWdyb3VwGAggASgJSASIAQESLgoKb3JkZXJfdHlwZRgJIAEoDjIVLnNlc3Npb24udjEuT3JkZXJUeXBlSAWIAQESFAoHa2V5d29yZBgKIAEoCUgGiAEBEhMKBmxvY2FsZRgLIAEoCUgHiAEBQgkKB19zdGF0dXNCEAoOX3Jlc291cmNlX3R5cGVCDgoMX3Jlc291cmNlX2lkQgcKBV91c2VyQggKBl9ncm91cEINCgtfb3JkZXJfdHlwZUIKCghfa2V5d29yZEIJCgdfbG9jYWxlImMKIUxpc3RBdWRpdENvbW11bml0eVVzZWNhc2VSZXNwb25zZRIvCgRsaXN0GAEgAygLMiEuc2Vzc2lvbi52MS5BdWRpdENvbW11bml0eVVzZWNhc2USDQoFdG90YWwYAiABKAUi1AMKJExpc3RSZWNvbW1lbmRDb21tdW5pdHlVc2VjYXNlUmVxdWVzdBIMCgRwYWdlGAEgASgFEhEKCXBhZ2Vfc2l6ZRgCIAEoBRI0Cg1yZXNvdXJjZV90eXBlGAMgASgOMhguc2Vzc2lvbi52MS5SZXNvdXJjZVR5cGVIAIgBARIYCgtyZXNvdXJjZV9pZBgEIAEoCUgBiAEBEhEKBHVzZXIYBSABKAlIAogBARIMCgR0YWdzGAYgAygJEhIKBWdyb3VwGAcgASgJSAOIAQESFwoKaXNfcHVibGlzaBgIIAEoCEgEiAEBEhgKC2lzX2ZlYXR1cmVkGAkgASgISAWIAQESLgoKb3JkZXJfdHlwZRgKIAEoDjIVLnNlc3Npb24udjEuT3JkZXJUeXBlSAaIAQESFAoHa2V5d29yZBgLIAEoCUgHiAEBEhMKBmxvY2FsZRgMIAEoCUgIiAEBQhAKDl9yZXNvdXJjZV90eXBlQg4KDF9yZXNvdXJjZV9pZEIHCgVfdXNlckIICgZfZ3JvdXBCDQoLX2lzX3B1Ymxpc2hCDgoMX2lzX2ZlYXR1cmVkQg0KC19vcmRlcl90eXBlQgoKCF9rZXl3b3JkQgkKB19sb2NhbGUiawolTGlzdFJlY29tbWVuZENvbW11bml0eVVzZWNhc2VSZXNwb25zZRIzCgRsaXN0GAEgAygLMiUuc2Vzc2lvbi52MS5SZWNvbW1lbmRDb21tdW5pdHlVc2VjYXNlEg0KBXRvdGFsGAIgASgFIqwCCiZVcGRhdGVSZWNvbW1lbmRDb21tdW5pdHlVc2VjYXNlUmVxdWVzdBIKCgJpZBgBIAEoAxISCgVncm91cBgFIAEoCUgAiAEBEgwKBHRhZ3MYBiADKAkSFwoKaXNfcHVibGlzaBgHIAEoCEgBiAEBEhIKBW9yZGVyGAggASgFSAKIAQESEgoFaW1hZ2UYCSABKAlIA4gBARITCgZsb2NhbGUYCiABKAlIBIgBARISCgV0aXRsZRgLIAEoCUgFiAEBEhgKC2Rlc2NyaXB0aW9uGAwgASgJSAaIAQFCCAoGX2dyb3VwQg0KC19pc19wdWJsaXNoQggKBl9vcmRlckIICgZfaW1hZ2VCCQoHX2xvY2FsZUIICgZfdGl0bGVCDgoMX2Rlc2NyaXB0aW9uIksKJ1VwZGF0ZVJlY29tbWVuZENvbW11bml0eVVzZWNhc2VSZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIEg8KB21lc3NhZ2UYAiABKAkiqwMKIlVwZGF0ZUF1ZGl0Q29tbXVuaXR5VXNlY2FzZVJlcXVlc3QSCgoCaWQYASABKAMSLAoGc3RhdHVzGAIgASgOMhcuc2Vzc2lvbi52MS5BdWRpdFN0YXR1c0gAiAEBEhMKBnJlbWFyaxgDIAEoCUgBiAEBEhgKC3Jldmlld2VyX2lkGAQgASgJSAKIAQESEgoFZ3JvdXAYBSABKAlIA4gBARIMCgR0YWdzGAYgAygJEhcKCmlzX3B1Ymxpc2gYByABKAhIBIgBARISCgVvcmRlchgIIAEoBUgFiAEBEhIKBWltYWdlGAkgASgJSAaIAQESEwoGbG9jYWxlGAogASgJSAeIAQESEgoFdGl0bGUYCyABKAlICIgBARIYCgtkZXNjcmlwdGlvbhgMIAEoCUgJiAEBQgkKB19zdGF0dXNCCQoHX3JlbWFya0IOCgxfcmV2aWV3ZXJfaWRCCAoGX2dyb3VwQg0KC19pc19wdWJsaXNoQggKBl9vcmRlckIICgZfaW1hZ2VCCQoHX2xvY2FsZUIICgZfdGl0bGVCDgoMX2Rlc2NyaXB0aW9uIkcKI1VwZGF0ZUF1ZGl0Q29tbXVuaXR5VXNlY2FzZVJlc3BvbnNlEg8KB3N1Y2Nlc3MYASABKAgSDwoHbWVzc2FnZRgCIAEoCSIeCg5MaXN0VGFnUmVxdWVzdBIMCgR0YWdzGAEgAygJIjcKD0xpc3RUYWdSZXNwb25zZRIkCgR0YWdzGAEgAygLMhYuc2Vzc2lvbi52MS5Vc2VjYXNlVGFnIhIKEExpc3RHcm91cFJlcXVlc3QiPQoRTGlzdEdyb3VwUmVzcG9uc2USKAoGZ3JvdXBzGAEgAygLMhguc2Vzc2lvbi52MS5Vc2VjYXNlR3JvdXAiLgoZR2VuZXJhdGVTY3JlZW5zaG90UmVxdWVzdBIRCglzcGFjZV91aWQYASABKAkiKQoaR2VuZXJhdGVTY3JlZW5zaG90UmVzcG9uc2USCwoDdXJsGAEgASgJIisKHURlbGV0ZUNvbW11bml0eVVzZWNhc2VSZXF1ZXN0EgoKAmlkGAEgASgDIkIKHkRlbGV0ZUNvbW11bml0eVVzZWNhc2VSZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIEg8KB21lc3NhZ2UYAiABKAkqPAoJT3JkZXJUeXBlEhkKFU9SREVSX1RZUEVfQ1JFQVRFRF9BVBAAEhQKEE9SREVSX1RZUEVfT1JERVIQATKJBwoVQ29tbXVuaXR5QWRtaW5TZXJ2aWNlEoQBCh1MaXN0UmVjb21tZW5kQ29tbXVuaXR5VXNlY2FzZRIwLnNlc3Npb24udjEuTGlzdFJlY29tbWVuZENvbW11bml0eVVzZWNhc2VSZXF1ZXN0GjEuc2Vzc2lvbi52MS5MaXN0UmVjb21tZW5kQ29tbXVuaXR5VXNlY2FzZVJlc3BvbnNlEngKGUxpc3RBdWRpdENvbW11bml0eVVzZWNhc2USLC5zZXNzaW9uLnYxLkxpc3RBdWRpdENvbW11bml0eVVzZWNhc2VSZXF1ZXN0Gi0uc2Vzc2lvbi52MS5MaXN0QXVkaXRDb21tdW5pdHlVc2VjYXNlUmVzcG9uc2USigEKH1VwZGF0ZVJlY29tbWVuZENvbW11bml0eVVzZWNhc2USMi5zZXNzaW9uLnYxLlVwZGF0ZVJlY29tbWVuZENvbW11bml0eVVzZWNhc2VSZXF1ZXN0GjMuc2Vzc2lvbi52MS5VcGRhdGVSZWNvbW1lbmRDb21tdW5pdHlVc2VjYXNlUmVzcG9uc2USfgobVXBkYXRlQXVkaXRDb21tdW5pdHlVc2VjYXNlEi4uc2Vzc2lvbi52MS5VcGRhdGVBdWRpdENvbW11bml0eVVzZWNhc2VSZXF1ZXN0Gi8uc2Vzc2lvbi52MS5VcGRhdGVBdWRpdENvbW11bml0eVVzZWNhc2VSZXNwb25zZRJCCgdMaXN0VGFnEhouc2Vzc2lvbi52MS5MaXN0VGFnUmVxdWVzdBobLnNlc3Npb24udjEuTGlzdFRhZ1Jlc3BvbnNlEmMKEkdlbmVyYXRlU2NyZWVuc2hvdBIlLnNlc3Npb24udjEuR2VuZXJhdGVTY3JlZW5zaG90UmVxdWVzdBomLnNlc3Npb24udjEuR2VuZXJhdGVTY3JlZW5zaG90UmVzcG9uc2USSAoJTGlzdEdyb3VwEhwuc2Vzc2lvbi52MS5MaXN0R3JvdXBSZXF1ZXN0Gh0uc2Vzc2lvbi52MS5MaXN0R3JvdXBSZXNwb25zZRJvChZEZWxldGVDb21tdW5pdHlVc2VjYXNlEikuc2Vzc2lvbi52MS5EZWxldGVDb21tdW5pdHlVc2VjYXNlUmVxdWVzdBoqLnNlc3Npb24udjEuRGVsZXRlQ29tbXVuaXR5VXNlY2FzZVJlc3BvbnNlQq8BCg5jb20uc2Vzc2lvbi52MUITQ29tbXVuaXR5QWRtaW5Qcm90b1ABWj9naXRsYWIubW9uaWNhLmNuL3ZpZGEvc2RrL2JpenNlcnZlci1nby5naXQvc2Vzc2lvbi92MTtzZXNzaW9udjGiAgNTWFiqAgpTZXNzaW9uLlYxygIKU2Vzc2lvblxWMeICFlNlc3Npb25cVjFcR1BCTWV0YWRhdGHqAgtTZXNzaW9uOjpWMWIGcHJvdG8z",[te,Kn]),Ep=M(Rp,0),yp=z("ChhzZXNzaW9uL3YxL3Nlc3Npb24ucHJvdG8SCnNlc3Npb24udjEinAEKBFRhc2sSDwoHdGFza19pZBgBIAEoCRITCgtkZXNjcmlwdGlvbhgCIAEoCRIOCgZzdGF0dXMYAyABKAkSLgoKY3JlYXRlZF9hdBgEIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASLgoKdXBkYXRlZF9hdBgFIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAimwEKC1NhbmRib3hJbmZvEhIKCnNhbmRib3hfaWQYASABKAkSDgoGc3RhdHVzGAIgASgJEjcKCG1ldGFkYXRhGAMgAygLMiUuc2Vzc2lvbi52MS5TYW5kYm94SW5mby5NZXRhZGF0YUVudHJ5Gi8KDU1ldGFkYXRhRW50cnkSCwoDa2V5GAEgASgJEg0KBXZhbHVlGAIgASgJOgI4ASJVCghTdGVwUGxhbhIPCgdwbGFuX2lkGAEgASgJEhMKC2Rlc2NyaXB0aW9uGAIgASgJEg0KBXN0ZXBzGAMgAygJEhQKDGN1cnJlbnRfc3RlcBgEIAEoBSKFAwoTQWdlbnRTZXNzaW9uUnVudGltZRILCgN1aWQYASABKAkSDwoHdXNlcl9pZBgCIAEoCRIvCg5oYW5kbGVyX3N0b3JlcxgDIAEoCzIXLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3QSHwoFdGFza3MYBCADKAsyEC5zZXNzaW9uLnYxLlRhc2sSJwoJc3RlcF9wbGFuGAUgASgLMhQuc2Vzc2lvbi52MS5TdGVwUGxhbhIeChZpbnN0YWxsZWRfZGF0YV9hcGlfaWRzGAYgAygJEiYKHmluc3RhbGxlZF9zeXN0ZW1fa25vd2xlZGdlX2lkcxgHIAMoCRItCgxzYW5kYm94X2luZm8YCCABKAsyFy5zZXNzaW9uLnYxLlNhbmRib3hJbmZvEi4KCmNyZWF0ZWRfYXQYCSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEi4KCnVwZGF0ZWRfYXQYCiABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wIkYKCEljb25JbmZvEgsKA3VybBgBIAEoCRIWCg5iZ19jb2xvcl9saWdodBgCIAEoCRIVCg1iZ19jb2xvcl9kYXJrGAMgASgJIt0GCgxBZ2VudFNlc3Npb24SCwoDdWlkGAEgASgJEg8KB3VzZXJfaWQYAiABKAkSDQoFdGl0bGUYAyABKAkSDAoEaWNvbhgEIAEoCRI1ChFsYXN0X21lc3NhZ2VfdGltZRgFIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASHAoUbGFzdF9kaXNwbGF5X21lc3NhZ2UYBiABKAkSMAoMbGFzdF9yZWFkX2F0GAcgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcBIpCgZzdGF0dXMYCSABKA4yGS5zZXNzaW9uLnYxLlNlc3Npb25TdGF0dXMSLgoKY3JlYXRlZF9hdBgKIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASLgoKdXBkYXRlZF9hdBgLIAEoCzIaLmdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXASHAoUdW5yZWFkX21lc3NhZ2VfY291bnQYDCABKAUSEwoLaXNfZmF2b3JpdGUYDSABKAgSJwoJaWNvbl9pbmZvGA4gASgLMhQuc2Vzc2lvbi52MS5JY29uSW5mbxIRCglpc19zaGFyZWQYDyABKAgSMgoPYWdlbnRfdGFza19tb2RlGBAgASgOMhkuc2Vzc2lvbi52MS5BZ2VudFRhc2tNb2RlEhYKDmNvc3RlZF9jcmVkaXRzGBEgASgFEhoKEmZlZWRiYWNrX3N1Ym1pdHRlZBgSIAEoCBIeChZwdWJsaXNoZWRfdG9fY29tbXVuaXR5GBYgASgIEhwKD2Rpc3BsYXlfY29udGVudBgTIAEoCUgAiAEBEh0KEGRpc3BsYXlfZXZlbnRfaWQYFCABKAlIAYgBARIaCg1kaXNwbGF5X3RpdGxlGBUgASgJSAKIAQESLwoNY29sbGFib3JhdG9ycxgXIAMoCzIYLnNlc3Npb24udjEuQ29sbGFib3JhdG9yEi0KDGF1ZGl0X3N0YXR1cxgYIAEoDjIXLnNlc3Npb24udjEuQXVkaXRTdGF0dXNCEgoQX2Rpc3BsYXlfY29udGVudEITChFfZGlzcGxheV9ldmVudF9pZEIQCg5fZGlzcGxheV90aXRsZUoECAgQCVIPbGFzdF9yZWFkX2luZGV4IigKEUdldFNlc3Npb25SZXF1ZXN0EhMKC3Nlc3Npb25fdWlkGAEgASgJInEKEkdldFNlc3Npb25SZXNwb25zZRIpCgdzZXNzaW9uGAEgASgLMhguc2Vzc2lvbi52MS5BZ2VudFNlc3Npb24SMAoHcnVudGltZRgCIAEoCzIfLnNlc3Npb24udjEuQWdlbnRTZXNzaW9uUnVudGltZSLqAQoTTGlzdFNlc3Npb25zUmVxdWVzdBINCgVsaW1pdBgBIAEoBRIOCgZvZmZzZXQYAiABKAUSDwoHa2V5d29yZBgDIAEoCRIpCgZzdGF0dXMYBCADKA4yGS5zZXNzaW9uLnYxLlNlc3Npb25TdGF0dXMSGAoLaXNfZmF2b3JpdGUYBSABKAhIAIgBARIWCglpc19zaGFyZWQYBiABKAhIAYgBARIoCgVtb2RlcxgHIAMoDjIZLnNlc3Npb24udjEuQWdlbnRUYXNrTW9kZUIOCgxfaXNfZmF2b3JpdGVCDAoKX2lzX3NoYXJlZCJjChRMaXN0U2Vzc2lvbnNSZXNwb25zZRIqCghzZXNzaW9ucxgBIAMoCzIYLnNlc3Npb24udjEuQWdlbnRTZXNzaW9uEhAKCGhhc19uZXh0GAIgASgIEg0KBXRvdGFsGAMgASgDImIKGVVwZGF0ZVJlYWRQb3NpdGlvblJlcXVlc3QSEwoLc2Vzc2lvbl91aWQYASABKAkSMAoMbGFzdF9yZWFkX2F0GAIgASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCItChpVcGRhdGVSZWFkUG9zaXRpb25SZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIIjsKFkZhdm9yaXRlU2Vzc2lvblJlcXVlc3QSEwoLc2Vzc2lvbl91aWQYASABKAkSDAoEbm90ZRgCIAEoCSIqChdGYXZvcml0ZVNlc3Npb25SZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIIi8KGFVuRmF2b3JpdGVTZXNzaW9uUmVxdWVzdBITCgtzZXNzaW9uX3VpZBgBIAEoCSIsChlVbkZhdm9yaXRlU2Vzc2lvblJlc3BvbnNlEg8KB3N1Y2Nlc3MYASABKAgirwEKFFVwZGF0ZVNlc3Npb25SZXF1ZXN0EhMKC3Nlc3Npb25fdWlkGAEgASgJEg0KBXRpdGxlGAIgASgJEgwKBGljb24YAyABKAkSKQoGc3RhdHVzGAQgASgOMhkuc2Vzc2lvbi52MS5TZXNzaW9uU3RhdHVzEiwKCWljb25faW5mbxgFIAEoCzIULnNlc3Npb24udjEuSWNvbkluZm9IAIgBAUIMCgpfaWNvbl9pbmZvIigKFVVwZGF0ZVNlc3Npb25SZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIIisKFERlbGV0ZVNlc3Npb25SZXF1ZXN0EhMKC3Nlc3Npb25fdWlkGAEgASgJIigKFURlbGV0ZVNlc3Npb25SZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIIioKE1NoYXJlU2Vzc2lvblJlcXVlc3QSEwoLc2Vzc2lvbl91aWQYASABKAkiJwoUU2hhcmVTZXNzaW9uUmVzcG9uc2USDwoHc3VjY2VzcxgBIAEoCCIsChVVbnNoYXJlU2Vzc2lvblJlcXVlc3QSEwoLc2Vzc2lvbl91aWQYASABKAkiKQoWVW5zaGFyZVNlc3Npb25SZXNwb25zZRIPCgdzdWNjZXNzGAEgASgIIoQBChZTZXNzaW9uRmVlZGJhY2tSZXF1ZXN0Eh4KBXNjb3JlGAEgASgFQg+6SAwaCjABMAIwAzAEMAUSGQoHY29udGVudBgCIAEoCUIIukgFcgMY0A8SEwoLc2Vzc2lvbl91aWQYAyABKAkSGgoSYWxsb3dfY29sbGVjdF9pbmZvGAQgASgIIi4KF1Nlc3Npb25GZWVkYmFja1Jlc3BvbnNlEhMKC2ZlZWRiYWNrX2lkGAEgASgDIj8KF0dldFRhc2tRdWV1ZUluZm9SZXF1ZXN0EhMKC3Nlc3Npb25fdWlkGAEgASgJEg8KB3VzZXJfaWQYAiABKAkipQEKGEdldFRhc2tRdWV1ZUluZm9SZXNwb25zZRIjChtlc3RpbWF0ZWRfd2FpdF90aW1lX21pbnV0ZXMYASABKAUSFAoHbWVzc2FnZRgCIAEoCUgAiAEBEiMKG2VzdGltYXRlZF93YWl0X3RpbWVfc2Vjb25kcxgDIAEoBRIdChVuZXh0X2ludGVydmFsX3NlY29uZHMYBCABKAVCCgoIX21lc3NhZ2UipQIKHExpc3RSZWNvbW1lbmRVc2VjYXNlc1JlcXVlc3QSGAoFbGltaXQYASABKANCCbpIBiIEGGQgABIXCgZvZmZzZXQYAiABKANCB7pIBCICKAASNAoNcmVzb3VyY2VfdHlwZRgDIAEoDjIYLnNlc3Npb24udjEuUmVzb3VyY2VUeXBlSACIAQESOAoPcmVzb3VyY2Vfc291cmNlGAQgASgOMhouc2Vzc2lvbi52MS5SZXNvdXJjZVNvdXJjZUgBiAEBEhMKBmxvY2FsZRgFIAEoCUgCiAEBEhIKBWdyb3VwGAYgASgJSAOIAQFCEAoOX3Jlc291cmNlX3R5cGVCEgoQX3Jlc291cmNlX3NvdXJjZUIJCgdfbG9jYWxlQggKBl9ncm91cCJiCh1MaXN0UmVjb21tZW5kVXNlY2FzZXNSZXNwb25zZRIyCgh1c2VjYXNlcxgBIAMoCzIgLnNlc3Npb24udjEuQ29tbXVuaXR5VXNlY2FzZUluZm8SDQoFdG90YWwYAiABKAMingEKHlNoYXJlU2Vzc2lvblRvQ29tbXVuaXR5UmVxdWVzdBIcCgtzZXNzaW9uX3VpZBgBIAEoCUIHukgEcgIQARIZCgV0aXRsZRgCIAEoCUIKukgHcgUQARj/ARIfCg11c2VyX3F1ZXN0aW9uGAMgASgJQgi6SAVyAxiQThIiChByZWNvbW1lbmRfcmVhc29uGAQgASgJQgi6SAVyAxiQTiI1Ch9TaGFyZVNlc3Npb25Ub0NvbW11bml0eVJlc3BvbnNlEhIKCnJlY29yZF91aWQYASABKAkiQgoiVW5zaGFyZVNlc3Npb25Gcm9tQ29tbXVuaXR5UmVxdWVzdBIcCgtzZXNzaW9uX3VpZBgBIAEoCUIHukgEcgIQASIlCiNVbnNoYXJlU2Vzc2lvbkZyb21Db21tdW5pdHlSZXNwb25zZSKqAQocU2hhcmVTcGFjZVRvQ29tbXVuaXR5UmVxdWVzdBIaCglzcGFjZV91aWQYASABKAlCB7pIBHICEAESHAoLc2Vzc2lvbl91aWQYAiABKAlCB7pIBHICEAESGQoFdGl0bGUYAyABKAlCCrpIB3IFEAEY/wESEQoJc3BhY2VfdXJsGAQgASgJEiIKEHJlY29tbWVuZF9yZWFzb24YBSABKAlCCLpIBXIDGJBOIjMKHVNoYXJlU3BhY2VUb0NvbW11bml0eVJlc3BvbnNlEhIKCnJlY29yZF91aWQYASABKAkiXAogVW5zaGFyZVNwYWNlRnJvbUNvbW11bml0eVJlcXVlc3QSGgoJc3BhY2VfdWlkGAEgASgJQge6SARyAhABEhwKC3Nlc3Npb25fdWlkGAIgASgJQge6SARyAhABIiMKIVVuc2hhcmVTcGFjZUZyb21Db21tdW5pdHlSZXNwb25zZSI9Cg1TZWFyY2hSZXF1ZXN0EhwKC3Nlc3Npb25fdWlkGAEgASgJQge6SARyAhABEg4KBnF1ZXJ5cxgCIAMoCSLBAQoMU2VhcmNoUmVzdWx0EhAKCHBvc2l0aW9uGAEgASgDEhUKDXJlZGlyZWN0X2xpbmsYAiABKAkSIQoZc25pcHBldF9oaWdobGlnaHRlZF93b3JkcxgDIAMoCRINCgV0aXRsZRgEIAEoCRIMCgRsaW5rGAUgASgJEhYKDmRpc3BsYXllZF9saW5rGAYgASgJEg8KB2Zhdmljb24YByABKAkSDwoHc25pcHBldBgIIAEoCRIOCgZzb3VyY2UYCSABKAkiPAoRU2VhcmNoUmVzdWx0R3JvdXASJwoFaXRlbXMYASADKAsyGC5zZXNzaW9uLnYxLlNlYXJjaFJlc3VsdCKvAQoOU2VhcmNoUmVzcG9uc2USRwoPb3JnYW5pY19yZXN1bHRzGAEgAygLMi4uc2Vzc2lvbi52MS5TZWFyY2hSZXNwb25zZS5PcmdhbmljUmVzdWx0c0VudHJ5GlQKE09yZ2FuaWNSZXN1bHRzRW50cnkSCwoDa2V5GAEgASgJEiwKBXZhbHVlGAIgASgLMh0uc2Vzc2lvbi52MS5TZWFyY2hSZXN1bHRHcm91cDoCOAEiOwokQ29tbXVuaXR5U2Vzc2lvblNoYXJlZFByZXZpZXdSZXF1ZXN0EhMKC3Nlc3Npb25fdWlkGAEgASgJIrcBCiVDb21tdW5pdHlTZXNzaW9uU2hhcmVkUHJldmlld1Jlc3BvbnNlEhIKCnJlY29yZF91aWQYASABKAkSEwoLc2Vzc2lvbl91aWQYAiABKAkSDQoFdGl0bGUYAyABKAkSGAoQcmVjb21tZW5kX3JlYXNvbhgEIAEoCRITCgtkZXNjcmlwdGlvbhgFIAEoCRInCgZzdGF0dXMYBiABKA4yFy5zZXNzaW9uLnYxLkF1ZGl0U3RhdHVzIkwKIkNvbW11bml0eVNwYWNlU2hhcmVkUHJldmlld1JlcXVlc3QSEwoLc2Vzc2lvbl91aWQYASABKAkSEQoJc3BhY2VfdWlkGAIgASgJIrMBCiNDb21tdW5pdHlTcGFjZVNoYXJlZFByZXZpZXdSZXNwb25zZRISCgpyZWNvcmRfdWlkGAEgASgJEhEKCXNwYWNlX3VpZBgCIAEoCRINCgV0aXRsZRgDIAEoCRIYChByZWNvbW1lbmRfcmVhc29uGAQgASgJEhMKC2Rlc2NyaXB0aW9uGAUgASgJEicKBnN0YXR1cxgGIAEoDjIXLnNlc3Npb24udjEuQXVkaXRTdGF0dXMiQwoWU3luY1Nlc3Npb25GaWxlUmVxdWVzdBIpCgRmaWxlGAEgASgLMhsuc2Vzc2lvbi52MS5TZXNzaW9uRmlsZUl0ZW0iGQoXU3luY1Nlc3Npb25GaWxlUmVzcG9uc2UiVwoYVXBkYXRlU2Vzc2lvbkZpbGVSZXF1ZXN0EhMKC3Nlc3Npb25fdWlkGAEgASgJEhQKDHNhbmRib3hfcGF0aBgCIAEoCRIQCghmaWxlX3VybBgDIAEoCSIbChlVcGRhdGVTZXNzaW9uRmlsZVJlc3BvbnNlIoABChdMaXN0U2Vzc2lvbkZpbGVzUmVxdWVzdBIXCgpzZXNzaW9uX2lkGAEgASgJSACIAQESEwoGc2hhcmVkGAIgASgISAGIAQESDgoGb2Zmc2V0GAMgASgFEg0KBWxpbWl0GAQgASgFQg0KC19zZXNzaW9uX2lkQgkKB19zaGFyZWQiZQoYTGlzdFNlc3Npb25GaWxlc1Jlc3BvbnNlEjoKBWZpbGVzGAEgAygLMisuc2Vzc2lvbi52MS5TZXNzaW9uRmlsZUl0ZW1XaXRoU2Vzc2lvblRpdGxlEg0KBXRvdGFsGAIgASgDIlkKF1NoYXJlU2Vzc2lvbkZpbGVSZXF1ZXN0EhMKC3Nlc3Npb25fdWlkGAEgASgJEhQKDHNhbmRib3hfcGF0aBgCIAEoCRITCgtzaGFyZV90aXRsZRgDIAEoCSIsChhTaGFyZVNlc3Npb25GaWxlUmVzcG9uc2USEAoIc2hhcmVfaWQYASABKAkiRgoZVW5zaGFyZVNlc3Npb25GaWxlUmVxdWVzdBITCgtzZXNzaW9uX3VpZBgBIAEoCRIUCgxzYW5kYm94X3BhdGgYAiABKAkiHAoaVW5zaGFyZVNlc3Npb25GaWxlUmVzcG9uc2UiSwoeR2V0U2Vzc2lvbkZpbGVVcGxvYWRVcmxSZXF1ZXN0EhMKC3Nlc3Npb25fdWlkGAEgASgJEhQKDHNhbmRib3hfcGF0aBgCIAEoCSJGCh9HZXRTZXNzaW9uRmlsZVVwbG9hZFVybFJlc3BvbnNlEhIKCnVwbG9hZF91cmwYASABKAkSDwoHY2RuX3VybBgCIAEoCSJDChZHZXRPcmlnaW5hbEZpbGVSZXF1ZXN0EhMKC3Nlc3Npb25fdWlkGAEgASgJEhQKDHNhbmRib3hfcGF0aBgCIAEoCSIrChdHZXRPcmlnaW5hbEZpbGVSZXNwb25zZRIQCghmaWxlX3VybBgBIAEoCSJHChpSZXN0b3JlT3JpZ2luYWxGaWxlUmVxdWVzdBITCgtzZXNzaW9uX3VpZBgBIAEoCRIUCgxzYW5kYm94X3BhdGgYAiABKAkiHQobUmVzdG9yZU9yaWdpbmFsRmlsZVJlc3BvbnNlInIKI0NyZWF0ZVNlc3Npb25GaWxlQ29udmVydFRhc2tSZXF1ZXN0EjgKDGNvbnZlcnRfdHlwZRgBIAEoDjIiLnNlc3Npb24udjEuU2Vzc2lvbkZpbGVDb252ZXJ0VHlwZRIRCglmcm9tX3VybHMYAiADKAkibgokQ3JlYXRlU2Vzc2lvbkZpbGVDb252ZXJ0VGFza1Jlc3BvbnNlEhAKCHRhc2tfdWlkGAEgASgJEjQKBnN0YXR1cxgCIAEoDjIkLnNlc3Npb24udjEuU2Vzc2lvbkZpbGVDb252ZXJ0U3RhdHVzIjUKIUxvb3BTZXNzaW9uRmlsZUNvbnZlcnRUYXNrUmVxdWVzdBIQCgh0YXNrX3VpZBgBIAEoCSLIAQoiTG9vcFNlc3Npb25GaWxlQ29udmVydFRhc2tSZXNwb25zZRIQCgh0YXNrX3VpZBgBIAEoCRI0CgZzdGF0dXMYAiABKA4yJC5zZXNzaW9uLnYxLlNlc3Npb25GaWxlQ29udmVydFN0YXR1cxIZCgxzdGF0dXNfZXJyb3IYAyABKAlIAIgBARIPCgd0b191cmxzGAQgAygJEh0KFW5leHRfaW50ZXJ2YWxfc2Vjb25kcxgFIAEoBUIPCg1fc3RhdHVzX2Vycm9yKpEDCg1TZXNzaW9uU3RhdHVzEh4KGlNFU1NJT05fU1RBVFVTX1VOU1BFQ0lGSUVEEAASGgoWU0VTU0lPTl9TVEFUVVNfQ1JFQVRFRBABEhsKF1NFU1NJT05fU1RBVFVTX0FSQ0hJVkVEEAISGgoWU0VTU0lPTl9TVEFUVVNfREVMRVRFRBADEhoKFlNFU1NJT05fU1RBVFVTX1dBSVRJTkcQBRIaChZTRVNTSU9OX1NUQVRVU19SVU5OSU5HEAYSGgoWU0VTU0lPTl9TVEFUVVNfU1RPUFBFRBAHEhgKFFNFU1NJT05fU1RBVFVTX0VSUk9SEAgSGwoXU0VTU0lPTl9TVEFUVVNfSU5fUVVFVUUQCRIzCi9TRVNTSU9OX1NUQVRVU19DT0xMQUJPUkFUSU9OX1BFUk1JU1NJT05fQ0hBTkdFRBAKEiMKH1NFU1NJT05fU1RBVFVTX05FV19DT0xMQUJPUkFUT1IQCxImCiJTRVNTSU9OX1NUQVRVU19SRU1PVkVfQ09MTEFCT1JBVE9SEAwyyhcKDlNlc3Npb25TZXJ2aWNlEk0KCkdldFNlc3Npb24SHS5zZXNzaW9uLnYxLkdldFNlc3Npb25SZXF1ZXN0Gh4uc2Vzc2lvbi52MS5HZXRTZXNzaW9uUmVzcG9uc2UiABJTCgxMaXN0U2Vzc2lvbnMSHy5zZXNzaW9uLnYxLkxpc3RTZXNzaW9uc1JlcXVlc3QaIC5zZXNzaW9uLnYxLkxpc3RTZXNzaW9uc1Jlc3BvbnNlIgASZQoSVXBkYXRlUmVhZFBvc2l0aW9uEiUuc2Vzc2lvbi52MS5VcGRhdGVSZWFkUG9zaXRpb25SZXF1ZXN0GiYuc2Vzc2lvbi52MS5VcGRhdGVSZWFkUG9zaXRpb25SZXNwb25zZSIAElwKD0Zhdm9yaXRlU2Vzc2lvbhIiLnNlc3Npb24udjEuRmF2b3JpdGVTZXNzaW9uUmVxdWVzdBojLnNlc3Npb24udjEuRmF2b3JpdGVTZXNzaW9uUmVzcG9uc2UiABJiChFVbkZhdm9yaXRlU2Vzc2lvbhIkLnNlc3Npb24udjEuVW5GYXZvcml0ZVNlc3Npb25SZXF1ZXN0GiUuc2Vzc2lvbi52MS5VbkZhdm9yaXRlU2Vzc2lvblJlc3BvbnNlIgASVgoNVXBkYXRlU2Vzc2lvbhIgLnNlc3Npb24udjEuVXBkYXRlU2Vzc2lvblJlcXVlc3QaIS5zZXNzaW9uLnYxLlVwZGF0ZVNlc3Npb25SZXNwb25zZSIAElYKDURlbGV0ZVNlc3Npb24SIC5zZXNzaW9uLnYxLkRlbGV0ZVNlc3Npb25SZXF1ZXN0GiEuc2Vzc2lvbi52MS5EZWxldGVTZXNzaW9uUmVzcG9uc2UiABJTCgxTaGFyZVNlc3Npb24SHy5zZXNzaW9uLnYxLlNoYXJlU2Vzc2lvblJlcXVlc3QaIC5zZXNzaW9uLnYxLlNoYXJlU2Vzc2lvblJlc3BvbnNlIgASWQoOVW5zaGFyZVNlc3Npb24SIS5zZXNzaW9uLnYxLlVuc2hhcmVTZXNzaW9uUmVxdWVzdBoiLnNlc3Npb24udjEuVW5zaGFyZVNlc3Npb25SZXNwb25zZSIAEloKD1Nlc3Npb25GZWVkYmFjaxIiLnNlc3Npb24udjEuU2Vzc2lvbkZlZWRiYWNrUmVxdWVzdBojLnNlc3Npb24udjEuU2Vzc2lvbkZlZWRiYWNrUmVzcG9uc2USXwoQR2V0VGFza1F1ZXVlSW5mbxIjLnNlc3Npb24udjEuR2V0VGFza1F1ZXVlSW5mb1JlcXVlc3QaJC5zZXNzaW9uLnYxLkdldFRhc2tRdWV1ZUluZm9SZXNwb25zZSIAEmwKFUxpc3RSZWNvbW1lbmRVc2VjYXNlcxIoLnNlc3Npb24udjEuTGlzdFJlY29tbWVuZFVzZWNhc2VzUmVxdWVzdBopLnNlc3Npb24udjEuTGlzdFJlY29tbWVuZFVzZWNhc2VzUmVzcG9uc2USdAoXU2hhcmVTZXNzaW9uVG9Db21tdW5pdHkSKi5zZXNzaW9uLnYxLlNoYXJlU2Vzc2lvblRvQ29tbXVuaXR5UmVxdWVzdBorLnNlc3Npb24udjEuU2hhcmVTZXNzaW9uVG9Db21tdW5pdHlSZXNwb25zZSIAEoABChtVbnNoYXJlU2Vzc2lvbkZyb21Db21tdW5pdHkSLi5zZXNzaW9uLnYxLlVuc2hhcmVTZXNzaW9uRnJvbUNvbW11bml0eVJlcXVlc3QaLy5zZXNzaW9uLnYxLlVuc2hhcmVTZXNzaW9uRnJvbUNvbW11bml0eVJlc3BvbnNlIgASbgoVU2hhcmVTcGFjZVRvQ29tbXVuaXR5Eiguc2Vzc2lvbi52MS5TaGFyZVNwYWNlVG9Db21tdW5pdHlSZXF1ZXN0Gikuc2Vzc2lvbi52MS5TaGFyZVNwYWNlVG9Db21tdW5pdHlSZXNwb25zZSIAEnoKGVVuc2hhcmVTcGFjZUZyb21Db21tdW5pdHkSLC5zZXNzaW9uLnYxLlVuc2hhcmVTcGFjZUZyb21Db21tdW5pdHlSZXF1ZXN0Gi0uc2Vzc2lvbi52MS5VbnNoYXJlU3BhY2VGcm9tQ29tbXVuaXR5UmVzcG9uc2UiABJBCgZTZWFyY2gSGS5zZXNzaW9uLnYxLlNlYXJjaFJlcXVlc3QaGi5zZXNzaW9uLnYxLlNlYXJjaFJlc3BvbnNlIgAShgEKHUNvbW11bml0eVVzZUNhc2VTaGFyZWRQcmV2aWV3EjAuc2Vzc2lvbi52MS5Db21tdW5pdHlTZXNzaW9uU2hhcmVkUHJldmlld1JlcXVlc3QaMS5zZXNzaW9uLnYxLkNvbW11bml0eVNlc3Npb25TaGFyZWRQcmV2aWV3UmVzcG9uc2UiABKAAQobQ29tbXVuaXR5U3BhY2VTaGFyZWRQcmV2aWV3Ei4uc2Vzc2lvbi52MS5Db21tdW5pdHlTcGFjZVNoYXJlZFByZXZpZXdSZXF1ZXN0Gi8uc2Vzc2lvbi52MS5Db21tdW5pdHlTcGFjZVNoYXJlZFByZXZpZXdSZXNwb25zZSIAElwKD1N5bmNTZXNzaW9uRmlsZRIiLnNlc3Npb24udjEuU3luY1Nlc3Npb25GaWxlUmVxdWVzdBojLnNlc3Npb24udjEuU3luY1Nlc3Npb25GaWxlUmVzcG9uc2UiABJiChFVcGRhdGVTZXNzaW9uRmlsZRIkLnNlc3Npb24udjEuVXBkYXRlU2Vzc2lvbkZpbGVSZXF1ZXN0GiUuc2Vzc2lvbi52MS5VcGRhdGVTZXNzaW9uRmlsZVJlc3BvbnNlIgASXwoQTGlzdFNlc3Npb25GaWxlcxIjLnNlc3Npb24udjEuTGlzdFNlc3Npb25GaWxlc1JlcXVlc3QaJC5zZXNzaW9uLnYxLkxpc3RTZXNzaW9uRmlsZXNSZXNwb25zZSIAEl8KEFNoYXJlU2Vzc2lvbkZpbGUSIy5zZXNzaW9uLnYxLlNoYXJlU2Vzc2lvbkZpbGVSZXF1ZXN0GiQuc2Vzc2lvbi52MS5TaGFyZVNlc3Npb25GaWxlUmVzcG9uc2UiABJlChJVbnNoYXJlU2Vzc2lvbkZpbGUSJS5zZXNzaW9uLnYxLlVuc2hhcmVTZXNzaW9uRmlsZVJlcXVlc3QaJi5zZXNzaW9uLnYxLlVuc2hhcmVTZXNzaW9uRmlsZVJlc3BvbnNlIgASdAoXR2V0U2Vzc2lvbkZpbGVVcGxvYWRVcmwSKi5zZXNzaW9uLnYxLkdldFNlc3Npb25GaWxlVXBsb2FkVXJsUmVxdWVzdBorLnNlc3Npb24udjEuR2V0U2Vzc2lvbkZpbGVVcGxvYWRVcmxSZXNwb25zZSIAElwKD0dldE9yaWdpbmFsRmlsZRIiLnNlc3Npb24udjEuR2V0T3JpZ2luYWxGaWxlUmVxdWVzdBojLnNlc3Npb24udjEuR2V0T3JpZ2luYWxGaWxlUmVzcG9uc2UiABJoChNSZXN0b3JlT3JpZ2luYWxGaWxlEiYuc2Vzc2lvbi52MS5SZXN0b3JlT3JpZ2luYWxGaWxlUmVxdWVzdBonLnNlc3Npb24udjEuUmVzdG9yZU9yaWdpbmFsRmlsZVJlc3BvbnNlIgASgwEKHENyZWF0ZVNlc3Npb25GaWxlQ29udmVydFRhc2sSLy5zZXNzaW9uLnYxLkNyZWF0ZVNlc3Npb25GaWxlQ29udmVydFRhc2tSZXF1ZXN0GjAuc2Vzc2lvbi52MS5DcmVhdGVTZXNzaW9uRmlsZUNvbnZlcnRUYXNrUmVzcG9uc2UiABJ9ChpMb29wU2Vzc2lvbkZpbGVDb252ZXJ0VGFzaxItLnNlc3Npb24udjEuTG9vcFNlc3Npb25GaWxlQ29udmVydFRhc2tSZXF1ZXN0Gi4uc2Vzc2lvbi52MS5Mb29wU2Vzc2lvbkZpbGVDb252ZXJ0VGFza1Jlc3BvbnNlIgBCqAEKDmNvbS5zZXNzaW9uLnYxQgxTZXNzaW9uUHJvdG9QAVo/Z2l0bGFiLm1vbmljYS5jbi92aWRhL3Nkay9iaXpzZXJ2ZXItZ28uZ2l0L3Nlc3Npb24vdjE7c2Vzc2lvbnYxogIDU1hYqgIKU2Vzc2lvbi5WMcoCClNlc3Npb25cVjHiAhZTZXNzaW9uXFYxXEdQQk1ldGFkYXRh6gILU2Vzc2lvbjo6VjFiBnByb3RvMw",[Ye,He,te,Kn]),vp=M(yp,0),Sp=(t,{handleUnauth:e,beforeRequest:n,handlePermissionDenied:l}={})=>c2({baseUrl:t,interceptors:[i=>async r=>{try{return await(n==null?void 0:n(r.header)),await i(r)}catch(o){throw o instanceof se&&o.code===P.Unauthenticated&&(e==null||e()),o instanceof se&&o.code===P.PermissionDenied&&(l==null||l(o)),o}}]}),Cp=(t,e)=>{const n=Sp(t,e);return{PlayCard:K(d2,n),PlayCardAdmin:K(u2,n),I18nTemplateAdminService:K(h2,n),FileService:K(V2,n),AdminFileService:K(f2,n),NotifierService:K(p2,n),NotificationService:K(Z2,n),NotificationAdminService:K(X2,n),E2BConfigService:K(R2,n),PublicActivityService:K(y2,n),ActivityAdminService:K(S2,n),LiveEventAdminService:K(W2,n),LiveEventService:K(N2,n),LiveEventPublicService:K(Y2,n),UserAuthService:K(U2,n),UserAdminService:K(x2,n),UserPublicService:K(z2,n),UserFeedBackTagAdmin:K(L2,n),SubscriptionService:K(w2,n),UserService:K(T2,n),UserAuthPublicService:K(H2,n),DashboardToolService:K(j2,n),TeamManagementService:K(_2,n),TeamService:K(P2,n),EduTeamAdminService:K(q2,n),TeamPublicService:K(tp,n),KnowledgeAdminService:K(ip,n),KnowledgeService:K(np,n),SpacePublicService:K(ap,n),SpaceAdminService:K(dp,n),SpaceService:K(rp,n),ApiProxyAdminService:K(hp,n),ApiProxyService:K(up,n),SessionAdminService:K(Vp,n),CommunityInteractionService:K(fp,n),SessionCollaborateService:K(pp,n),SessionPublicService:K(Gp,n),SessionCollaboratePublicService:K(Ip,n),CommunityAdminService:K(Ep,n),SessionService:K(vp,n)}},Wp=Se.apiHost,Ht=Wu();let Ut,Bp=new Promise(t=>{Ut=t});const yl=Cp(Wp,{beforeRequest:async t=>{const e=document.cookie.split(";");let n="";for(let l=0;l<e.length;l++){const i=e[l],[r,o]=i.split("=");if((r==null?void 0:r.trim())===Vn.accessToken){n=o;break}}n&&(t.set("authorization",`Bearer ${n}`),t.set("X-Api-Key",n)),t.set("x-client-type","space")}});async function Np(){const e=new URL(window.location.href).searchParams.get("code");bi(["code"]);const n=async i=>{try{const{accessToken:r}=await yl.SpacePublicService.getEditSpaceSiteToken({editSpaceCode:i}),o=new URL(window.location.href);let a;const c=o.hostname.split(".");c.shift(),c.length>0&&(a="."+c.join(".")),$n.setCookie(Vn.accessToken,r,{daysToExpire:365,domain:a}),Ut(!0)}catch{$n.deleteCookie(Vn.accessToken),Ut(!1);return}finally{Ht.markReady()}};if($n.getCookie(Vn.accessToken))try{const{canEdit:i}=await yl.SpaceService.hasSpaceEditPermission({spaceId:Se.spaceId});i?(Ht.markReady(),Ut(!0)):e?await n(e):(Ht.markReady(),Ut(!1))}catch{$n.deleteCookie(Vn.accessToken),e?await n(e):(Ht.markReady(),Ut(!1))}else e?await n(e):(Ht.markReady(),Ut(!1))}var nl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fp(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gi,gc;function Yp(){if(gc)return gi;gc=1;var t="Expected a function",e=NaN,n="[object Symbol]",l=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,c=typeof nl=="object"&&nl&&nl.Object===Object&&nl,d=typeof self=="object"&&self&&self.Object===Object&&self,s=c||d||Function("return this")(),u=Object.prototype,h=u.toString,g=Math.max,b=Math.min,m=function(){return s.Date.now()};function f(I,S,G){var B,v,J,w,L,$,q=0,Ae=!1,pe=!1,We=!0;if(typeof I!="function")throw new TypeError(t);S=y(S)||0,p(G)&&(Ae=!!G.leading,pe="maxWait"in G,J=pe?g(y(G.maxWait)||0,S):J,We="trailing"in G?!!G.trailing:We);function Ue(le){var Le=B,ot=v;return B=v=void 0,q=le,w=I.apply(ot,Le),w}function ye(le){return q=le,L=setTimeout(Ve,S),Ae?Ue(le):w}function Be(le){var Le=le-$,ot=le-q,je=S-Le;return pe?b(je,J-ot):je}function x(le){var Le=le-$,ot=le-q;return $===void 0||Le>=S||Le<0||pe&&ot>=J}function Ve(){var le=m();if(x(le))return ee(le);L=setTimeout(Ve,Be(le))}function ee(le){return L=void 0,We&&B?Ue(le):(B=v=void 0,w)}function De(){L!==void 0&&clearTimeout(L),q=0,B=$=v=L=void 0}function $e(){return L===void 0?w:ee(m())}function me(){var le=m(),Le=x(le);if(B=arguments,v=this,$=le,Le){if(L===void 0)return ye($);if(pe)return L=setTimeout(Ve,S),Ue($)}return L===void 0&&(L=setTimeout(Ve,S)),w}return me.cancel=De,me.flush=$e,me}function p(I){var S=typeof I;return!!I&&(S=="object"||S=="function")}function A(I){return!!I&&typeof I=="object"}function X(I){return typeof I=="symbol"||A(I)&&h.call(I)==n}function y(I){if(typeof I=="number")return I;if(X(I))return e;if(p(I)){var S=typeof I.valueOf=="function"?I.valueOf():I;I=p(S)?S+"":S}if(typeof I!="string")return I===0?I:+I;I=I.replace(l,"");var G=r.test(I);return G||o.test(I)?a(I.slice(2),G?2:8):i.test(I)?e:+I}return gi=f,gi}var Up=Yp();const Jp=Fp(Up),Hs=`.clr-picker {
  display: none;
  flex-wrap: wrap;
  position: absolute;
  width: 200px;
  z-index: 1000;
  border-radius: 10px;
  background-color: #fff;
  justify-content: flex-end;
  direction: ltr;
  box-shadow: 0 0 5px rgba(0,0,0,.05), 0 5px 20px rgba(0,0,0,.1);
  -moz-user-select: none;
  -webkit-user-select: none;
  user-select: none;
}

.clr-picker.clr-open,
.clr-picker[data-inline="true"] {
  display: flex;
}

.clr-picker[data-inline="true"] {
  position: relative;
}

.clr-gradient {
  position: relative;
  width: 100%;
  height: 100px;
  margin-bottom: 15px;
  border-radius: 3px 3px 0 0;
  background-image: linear-gradient(rgba(0,0,0,0), #000), linear-gradient(90deg, #fff, currentColor);
  cursor: pointer;
}

.clr-marker {
  position: absolute;
  width: 12px;
  height: 12px;
  margin: -6px 0 0 -6px;
  border: 1px solid #fff;
  border-radius: 50%;
  background-color: currentColor;
  cursor: pointer;
}

.clr-picker input[type="range"]::-webkit-slider-runnable-track {
  width: 100%;
  height: 16px;
}

.clr-picker input[type="range"]::-webkit-slider-thumb {
  width: 16px;
  height: 16px;
  -webkit-appearance: none;
}

.clr-picker input[type="range"]::-moz-range-track {
  width: 100%;
  height: 16px;
  border: 0;
}

.clr-picker input[type="range"]::-moz-range-thumb {
  width: 16px;
  height: 16px;
  border: 0;
}

.clr-hue {
  background-image: linear-gradient(to right, #f00 0%, #ff0 16.66%, #0f0 33.33%, #0ff 50%, #00f 66.66%, #f0f 83.33%, #f00 100%);
}

.clr-hue,
.clr-alpha {
  position: relative;
  width: calc(100% - 40px);
  height: 8px;
  margin: 5px 20px;
  border-radius: 4px;
}

.clr-alpha span {
  display: block;
  height: 100%;
  width: 100%;
  border-radius: inherit;
  background-image: linear-gradient(90deg, rgba(0,0,0,0), currentColor);
}

.clr-hue input[type="range"],
.clr-alpha input[type="range"] {
  position: absolute;
  width: calc(100% + 32px);
  height: 16px;
  left: -16px;
  top: -4px;
  margin: 0;
  background-color: transparent;
  opacity: 0;
  cursor: pointer;
  appearance: none;
  -webkit-appearance: none;
}

.clr-hue div,
.clr-alpha div {
  position: absolute;
  width: 16px;
  height: 16px;
  left: 0;
  top: 50%;
  margin-left: -8px;
  transform: translateY(-50%);
  border: 2px solid #fff;
  border-radius: 50%;
  background-color: currentColor;
  box-shadow: 0 0 1px #888;
  pointer-events: none;
}

.clr-alpha div:before {
  content: '';
  position: absolute;
  height: 100%;
  width: 100%;
  left: 0;
  top: 0;
  border-radius: 50%;
  background-color: currentColor;
}

.clr-format {
  display: none;
  order: 1;
  width: calc(100% - 40px);
  margin: 0 20px 20px;
}

.clr-segmented {
  display: flex;
  position: relative;
  width: 100%;
  margin: 0;
  padding: 0;
  border: 1px solid #ddd;
  border-radius: 15px;
  box-sizing: border-box;
  color: #999;
  font-size: 12px;
}

.clr-segmented input,
.clr-segmented legend {
  position: absolute;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  border: 0;
  left: 0;
  top: 0;
  opacity: 0;
  pointer-events: none;
}

.clr-segmented label {
  flex-grow: 1;
  margin: 0;
  padding: 4px 0;
  font-size: inherit;
  font-weight: normal;
  line-height: initial;
  text-align: center;
  cursor: pointer;
}

.clr-segmented label:first-of-type {
  border-radius: 10px 0 0 10px;
}

.clr-segmented label:last-of-type {
  border-radius: 0 10px 10px 0;
}

.clr-segmented input:checked + label {
  color: #fff;
  background-color: #666;
}

.clr-swatches {
  order: 2;
  width: calc(100% - 32px);
  margin: 0 16px;
}

.clr-swatches div {
  display: flex;
  flex-wrap: wrap;
  padding-bottom: 12px;
  justify-content: center;
}

.clr-swatches button {
  position: relative;
  width: 20px;
  height: 20px;
  margin: 0 4px 6px 4px;
  padding: 0;
  border: 0;
  border-radius: 50%;
  color: inherit;
  text-indent: -1000px;
  white-space: nowrap;
  overflow: hidden;
  cursor: pointer;
}

.clr-swatches button:after {
  content: '';
  display: block;
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
  border-radius: inherit;
  background-color: currentColor;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.1);
}

input.clr-color {
  order: 1;
  width: calc(100% - 80px);
  height: 32px;
  margin: 15px 20px 20px auto;
  padding: 0 10px;
  border: 1px solid #ddd;
  border-radius: 16px;
  color: #444;
  background-color: #fff;
  font-family: sans-serif;
  font-size: 14px;
  text-align: center;
  box-shadow: none;
}

input.clr-color:focus {
  outline: none;
  border: 1px solid #1e90ff;
}

.clr-close,
.clr-clear {
  display: none;
  order: 2;
  height: 24px;
  margin: 0 20px 20px;
  padding: 0 20px;
  border: 0;
  border-radius: 12px;
  color: #fff;
  background-color: #666;
  font-family: inherit;
  font-size: 12px;
  font-weight: 400;
  cursor: pointer;
}

.clr-close {
  display: block;
  margin: 0 20px 20px auto;
}

.clr-preview {
  position: relative;
  width: 32px;
  height: 32px;
  margin: 15px 0 20px 20px;
  border-radius: 50%;
  overflow: hidden;
}

.clr-preview:before,
.clr-preview:after {
  content: '';
  position: absolute;
  height: 100%;
  width: 100%;
  left: 0;
  top: 0;
  border: 1px solid #fff;
  border-radius: 50%;
}

.clr-preview:after {
  border: 0;
  background-color: currentColor;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.1);
}

.clr-preview button {
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: 1;
  margin: 0;
  padding: 0;
  border: 0;
  border-radius: 50%;
  outline-offset: -2px;
  background-color: transparent;
  text-indent: -9999px;
  cursor: pointer;
  overflow: hidden;
}

.clr-marker,
.clr-hue div,
.clr-alpha div,
.clr-color {
  box-sizing: border-box;
}

.clr-field {
  display: inline-block;
  position: relative;
  color: transparent;
}

.clr-field input {
  margin: 0;
  direction: ltr;
}

.clr-field.clr-rtl input {
  text-align: right;
}

.clr-field button {
  position: absolute;
  width: 30px;
  height: 100%;
  right: 0;
  top: 50%;
  transform: translateY(-50%);
  margin: 0;
  padding: 0;
  border: 0;
  color: inherit;
  text-indent: -1000px;
  white-space: nowrap;
  overflow: hidden;
  pointer-events: none;
}

.clr-field.clr-rtl button {
  right: auto;
  left: 0;
}

.clr-field button:after {
  content: '';
  display: block;
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0;
  top: 0;
  border-radius: inherit;
  background-color: currentColor;
  box-shadow: inset 0 0 1px rgba(0,0,0,.5);
}

.clr-alpha,
.clr-alpha div,
.clr-swatches button,
.clr-preview:before,
.clr-field button {
  background-image: repeating-linear-gradient(45deg, #aaa 25%, transparent 25%, transparent 75%, #aaa 75%, #aaa), repeating-linear-gradient(45deg, #aaa 25%, #fff 25%, #fff 75%, #aaa 75%, #aaa);
  background-position: 0 0, 4px 4px;
  background-size: 8px 8px;
}

.clr-marker:focus {
  outline: none;
}

.clr-keyboard-nav .clr-marker:focus,
.clr-keyboard-nav .clr-hue input:focus + div,
.clr-keyboard-nav .clr-alpha input:focus + div,
.clr-keyboard-nav .clr-segmented input:focus + label {
  outline: none;
  box-shadow: 0 0 0 2px #1e90ff, 0 0 2px 2px #fff;
}

.clr-picker[data-alpha="false"] .clr-alpha {
  display: none;
}

.clr-picker[data-minimal="true"] {
  padding-top: 16px;
}

.clr-picker[data-minimal="true"] .clr-gradient,
.clr-picker[data-minimal="true"] .clr-hue,
.clr-picker[data-minimal="true"] .clr-alpha,
.clr-picker[data-minimal="true"] .clr-color,
.clr-picker[data-minimal="true"] .clr-preview {
  display: none;
}

/** Dark theme **/

.clr-dark {
  background-color: #444;
}

.clr-dark .clr-segmented {
  border-color: #777;
}

.clr-dark .clr-swatches button:after {
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.3);
}

.clr-dark input.clr-color {
  color: #fff;
  border-color: #777;
  background-color: #555;
}

.clr-dark input.clr-color:focus {
  border-color: #1e90ff;
}

.clr-dark .clr-preview:after {
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.5);
}

.clr-dark .clr-alpha,
.clr-dark .clr-alpha div,
.clr-dark .clr-swatches button,
.clr-dark .clr-preview:before {
  background-image: repeating-linear-gradient(45deg, #666 25%, transparent 25%, transparent 75%, #888 75%, #888), repeating-linear-gradient(45deg, #888 25%, #444 25%, #444 75%, #888 75%, #888);
}

/** Polaroid theme **/

.clr-picker.clr-polaroid {
  border-radius: 6px;
  box-shadow: 0 0 5px rgba(0,0,0,.1), 0 5px 30px rgba(0,0,0,.2);
}

.clr-picker.clr-polaroid:before {
  content: '';
  display: block;
  position: absolute;
  width: 16px;
  height: 10px;
  left: 20px;
  top: -10px;
  border: solid transparent;
  border-width: 0 8px 10px 8px;
  border-bottom-color: currentColor;
  box-sizing: border-box;
  color: #fff;
  filter: drop-shadow(0 -4px 3px rgba(0,0,0,.1));
  pointer-events: none;
}

.clr-picker.clr-polaroid.clr-dark:before {
  color: #444;
}

.clr-picker.clr-polaroid.clr-left:before {
  left: auto;
  right: 20px;
}

.clr-picker.clr-polaroid.clr-top:before {
  top: auto;
  bottom: -10px;
  transform: rotateZ(180deg);
}

.clr-polaroid .clr-gradient {
  width: calc(100% - 20px);
  height: 120px;
  margin: 10px;
  border-radius: 3px;
}

.clr-polaroid .clr-hue,
.clr-polaroid .clr-alpha {
  width: calc(100% - 30px);
  height: 10px;
  margin: 6px 15px;
  border-radius: 5px;
}

.clr-polaroid .clr-hue div,
.clr-polaroid .clr-alpha div {
  box-shadow: 0 0 5px rgba(0,0,0,.2);
}

.clr-polaroid .clr-format {
  width: calc(100% - 20px);
  margin: 0 10px 15px;
}

.clr-polaroid .clr-swatches {
  width: calc(100% - 12px);
  margin: 0 6px;
}
.clr-polaroid .clr-swatches div {
  padding-bottom: 10px;
}

.clr-polaroid .clr-swatches button {
  width: 22px;
  height: 22px;
}

.clr-polaroid input.clr-color {
  width: calc(100% - 60px);
  margin: 10px 10px 15px auto;
}

.clr-polaroid .clr-clear {
  margin: 0 10px 15px 10px;
}

.clr-polaroid .clr-close {
  margin: 0 10px 15px auto;
}

.clr-polaroid .clr-preview {
  margin: 10px 0 15px 10px;
}

/** Large theme **/

.clr-picker.clr-large {
  width: 275px;
}

.clr-large .clr-gradient {
  height: 150px;
}

.clr-large .clr-swatches button {
  width: 22px;
  height: 22px;
}

/** Pill (horizontal) theme **/

.clr-picker.clr-pill {
  width: 380px;
  padding-left: 180px;
  box-sizing: border-box;
}

.clr-pill .clr-gradient {
  position: absolute;
  width: 180px;
  height: 100%;
  left: 0;
  top: 0;
  margin-bottom: 0;
  border-radius: 3px 0 0 3px;
}

.clr-pill .clr-hue {
  margin-top: 20px;
}`,Mt=t=>{var e;return(e=t.textContent)==null?void 0:e.trim()},xp=["video","iframe","audio"],hc="__manus_style-id";class wp{constructor(){this.debugMode=!1,this.editMode="normal",this.debouncedAddPatched=Jp(e=>{e.forEach(n=>{this.addPatch(n)})},1e3,{leading:!0}),this.originalElementStyle=new Map,this.patchList=[],this.textSplitMode=!0,this._boundHandlePreEditHover=()=>{},this._boundHandlePreEditOut=()=>{},this._boundHandleEditSelect=()=>{},this._boundHandleKeydown=()=>{},this.hoveringElement=null,this.activeElement=null,this.savedElements=new Map,this.filterClasses=[Q.spaceEditorHighlight,Q.virtualTextNode,Q.onlyTextNode,Q.textNodeActive,Q.colorPicker],this.retryPatchIndexList=[]}init(){this.injectGlobalStyle(),this.patchList=Se.patchList??[],this.applyPatches()}initWithoutApplyPatches(){this.injectGlobalStyle(),this.patchList=Se.patchList??[]}destroy(){var e;(e=document.querySelector("#"+hc))==null||e.remove(),this.onExitEdit()}registerViews(e){e.textEditPanelView&&(this.textEditPanelView=e.textEditPanelView),e.elementEditPanelView&&(this.elementEditPanelView=e.elementEditPanelView)}createPatch(e,n){const l=e.classList.contains(Q.virtualTextNode);let i=[];const r=Date.now();if(l){const o=this.getNodeToElementSelector(e);if(o&&!this.patchList.some(c=>c.type==="nodeToElement"&&c.selector===o.selector&&c.nodeIndex===o.nodeIndex)){const c={type:"nodeToElement",nodeIndex:o.nodeIndex,selector:o.selector,timestamp:r};i.push(c)}}if(n==="copy"){const o=e.cloneNode(!0);this.filterClasses.forEach(c=>{o.classList.remove(c)}),o.classList.add(Q.copyNode);const a={type:"copy",selector:this.generateSelector(e),timestamp:Date.now(),outerHtml:o.outerHTML};i.push(a)}else{const o={type:"style",selector:this.generateSelector(e),elementType:e.tagName.toLowerCase(),innerText:l?e.textContent??void 0:e.innerHTML,style:e.getAttribute("style")||"",timestamp:r};i.push(o)}return i}getNodeToElementSelector(e){if(!e.classList.contains(Q.virtualTextNode))return null;const n=e.parentElement;if(!n)return null;const l=this.generateSelector(n);let i=-1;return Array.from(n.childNodes).forEach((r,o)=>{r===e&&(i=o)}),i===-1?null:{selector:l,nodeIndex:i}}generateSelector(e){if(e.id)return`#${e.id}`;function n(r){return r.replace(/:/g,"\\:").replace(/\//g,"\\/").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/%/g,"\\%").replace(/\./g,"\\.")}let l=[],i=e;for(;i&&i!==document.body&&i!==document.documentElement;){let r=i.tagName.toLowerCase();if(i.className&&typeof i.className=="string"){const o=i.className.split(" ").filter(a=>a&&this.filterClasses.every(c=>c!==a)).map(a=>`.${n(a)}`).join("");o&&(r+=o)}if(i.parentNode){const o=Array.from(i.parentNode.children).filter(c=>!c.closest(`.${Q.virtualTextNode}`)),a=o.indexOf(i)+1;o.length>1&&(r+=`:nth-child(${a})`)}l.unshift(r),i=i.parentNode}return i&&l.unshift(i.tagName.toLowerCase()),l.join(" > ")}addPatch(e){this.patchList.push(e),this.savePatchesToServer(),Rn.emit("patchListChange",{})}undoPatch(){if(this.patchList.length>0){const e=this.patchList.pop();if(e){const n=document.querySelector(e.selector);if(n){if(e.type==="nodeToElement"){const l=n.childNodes[e.nodeIndex];if(l&&l instanceof HTMLElement&&l.classList.contains(Q.virtualTextNode)){const i=l.textContent;if(i){const r=document.createTextNode(i);n.replaceChild(l,r)}}}else if((e==null?void 0:e.type)==="style"){let l;for(let r=this.patchList.length-1;r>=0;r--){const o=this.patchList[r];if(o.type==="style"&&o.selector===e.selector){l=o;break}}const i=this.originalElementStyle.get(n);l?(n.setAttribute("style",l.style),n.textContent=l.innerText??""):i&&(n.setAttribute("style",i.style),n.textContent=i.textContent)}else if((e==null?void 0:e.type)==="copy"){const l=document.querySelector(e.selector);l&&l.nextElementSibling instanceof HTMLElement&&(l.nextElementSibling.style.display="none")}}}this.savePatchesToServer()}Rn.emit("patchListChange",{})}savePatchesToServer(){try{const e=this.optimizePatches();yl.SpaceService.saveSpaceSiteRawData({webRawData:JSON.stringify(e),spaceUid:Se.spaceId})}catch(e){console.error(e)}}applyPatches(){if(this.patchList.length!==0){this.retryPatchIndexList=[];for(let e=0;e<this.patchList.length;e++)this.applyPatch(e),this.retryPatchList()}}retryPatchList(){if(this.retryPatchIndexList.length===0)return;const e=new MutationObserver(n=>{const l=[...this.retryPatchIndexList];this.retryPatchIndexList=[],l.forEach(i=>{this.applyPatch(i)}),this.retryPatchIndexList.length===0&&e.disconnect()});e.observe(document.body,{subtree:!0,childList:!0})}applyPatch(e){if(e<0||e>=this.patchList.length)return;const n=this.patchList[e];if(n)try{const l=document.querySelector(n.selector);if(!l){console.warn(`Patch target not found. ${n.selector}`),this.retryPatchIndexList.push(e);return}if(n.type==="style"&&(this.setOriginStyle(l),n.innerText&&(l.classList&&l.classList.contains(Q.virtualTextNode)?l.textContent!==n.innerText&&(l.textContent=n.innerText):l.innerHTML!==n.innerText&&(l.innerHTML=n.innerText)),n.style?(l.getAttribute("style")!==n.style&&l.setAttribute("style",n.style),n.style.includes("display: none")&&l instanceof HTMLElement&&(l.style.display="none")):l.removeAttribute("style")),n.type==="copy"){const i=l.parentNode;if(i){const r=document.createElement("div");r.innerHTML=n.outerHtml;const o=r.children[0];i&&o&&i.insertBefore(o,l.nextSibling)}}if(n.type==="nodeToElement"){const i=l.childNodes.item(n.nodeIndex);if(i&&i.nodeType===Node.TEXT_NODE){const r=document.createElement("span");r.className=Q.virtualTextNode,r.textContent=i.textContent,l.replaceChild(r,i)}}}catch(l){console.error(l)}}restoreToOriginal(){window.location.reload()}toggleEditMode(){this.editMode==="normal"?this.toggleToEditMode():this.toggleToEditMode()}toggleToEditMode(){this.editMode="edit",this.editInit(),document.body.classList.add(Q.editModeActive)}toggleToPreviewMode(){this.editMode="normal",this.onExitEdit(),document.body.classList.remove(Q.editModeActive)}editInit(){this._boundHandlePreEditHover=e=>this.handlePreEditHover(e),this._boundHandlePreEditOut=e=>this.handlePreEditOut(e),this._boundHandleEditSelect=e=>this.handleEditSelect(e),this._boundHandleKeydown=e=>this.handleKeydown(e),document.addEventListener("mouseover",this._boundHandlePreEditHover),document.addEventListener("mouseout",this._boundHandlePreEditOut),document.addEventListener("click",this._boundHandleEditSelect),document.addEventListener("keydown",this._boundHandleKeydown),this.textSplitMode&&this.wrapperTextNode()}handleKeydown(e){const n=e.composedPath()[0];n instanceof HTMLElement&&this.isEditorUIElement(n)||Cu(e)&&this.undoPatch()}onExitEdit(){var e,n;document.removeEventListener("mouseover",this._boundHandlePreEditHover),document.removeEventListener("mouseout",this._boundHandlePreEditOut),document.removeEventListener("click",this._boundHandleEditSelect),document.removeEventListener("keydown",this._boundHandleKeydown),(e=this.textEditPanelView)==null||e.destroy(),(n=this.elementEditPanelView)==null||n.destroy(),this.hoveringElement=null,this.activeElement=null}optimizePatches(){if(this.patchList.length<=1)return this.patchList;const e=[];return this.patchList.forEach(n=>{if(n.type!=="style")e.push(n);else{const l=e.findIndex(i=>i.selector===n.selector);l===-1?e.push(n):e[l]=n}}),e}isEditorUIElement(e){return[`.${Q.spaceControlView}`,`.${Q.textEditorPanelView}`,`.${Q.elementEditorPanelView}`,`.${Q.footerToolbarView}`,`.${Q.colorPicker}`].some(i=>e.closest(i))}handlePreEditHover(e){if(this.editMode!=="edit")return;const n=e.composedPath(),l=n.flatMap(r=>r instanceof HTMLElement?[r]:[]),i=n[0];if(!i||!(i instanceof HTMLElement)||i===document.documentElement||i===document.body)return null;l.some(r=>this.isEditorUIElement(r))||(this.hoveringElement&&this.hoveringElement.classList.remove(Q.spaceEditorHighlight),this.elementEditPanelView.destroy(),this.hoveringElement=i,this.elementEditPanelView.show(i,e),this.setOriginStyle(i))}handlePreEditOut(e){if(this.editMode!=="edit")return;const n=e.composedPath(),l=n.flatMap(o=>o instanceof HTMLElement?[o]:[]),i=n[0];if(!i||!(i instanceof HTMLElement)||l.some(o=>this.isEditorUIElement(o)))return;const r=e.relatedTarget;(r===document.documentElement||r===document.body)&&this.elementEditPanelView.destroy()}handleEditSelect(e){if(this.editMode!=="edit")return;const n=e.target;if(!n||!(n instanceof HTMLElement))return;const l=n.tagName.toLowerCase();xp.includes(l)||this.isEditorUIElement(n)||this.hasDirectTextContent(n)&&(e.stopPropagation(),e.preventDefault(),this.activeElement&&this.activeElement.classList.remove(Q.spaceEditorHighlight),this.activeElement=n,this.setOriginStyle(n),this.textEditPanelView.show(n,e))}wrapperTextNode(){const e=new Set,n=o=>{let a=!1;for(let c=0;c<o.childNodes.length;c++){const d=o.childNodes[c];if(d.nodeType===Node.ELEMENT_NODE)return!1;d.nodeType===Node.TEXT_NODE&&Mt(d)&&(a=!0)}return a},l=o=>{let a=!1,c=!1;for(let d=0;d<o.childNodes.length;d++){const s=o.childNodes[d];if(s.nodeType===Node.TEXT_NODE&&Mt(s)?a=!0:s.nodeType===Node.ELEMENT_NODE&&(c=!0),a&&c)return!0}return!1},i=o=>["STRONG","EM","U","B","I","MARK","SPAN"].includes(o.tagName),r=o=>{if(!(o.nodeType===Node.ELEMENT_NODE&&o instanceof Element&&this.isEditorUIElement(o))){if(o.nodeType===Node.TEXT_NODE&&Mt(o)){if(o.parentNode&&o.parentNode.nodeType===Node.ELEMENT_NODE){const a=o.parentNode;if(!(a instanceof HTMLElement)||i(a)||n(a))return;if(l(a)){e.add(a);const c=document.createElement("span");c.className=Q.virtualTextNode,c.textContent=o.textContent,a.replaceChild(c,o)}}}else if(o.nodeType===Node.ELEMENT_NODE&&o instanceof Element){if(o.classList&&o.classList.contains(Q.virtualTextNode))return;Array.from(o.childNodes).forEach(c=>r(c))}}};r(document.body),e.forEach(o=>{this.savedElements.has(o)||this.savedElements.set(o,o.innerHTML)})}setOriginStyle(e){if(!this.originalElementStyle.has(e)){const n=e.getAttribute("style")||"",l=e.textContent||"";this.originalElementStyle.set(e,{style:n,textContent:l})}}hasDirectTextContent(e){var i,r,o,a;if(["BR","HR","IMG","INPUT","TEXTAREA","SELECT","BUTTON"].includes(e.tagName))return!1;if(e.classList.contains(Q.virtualTextNode))return!!Mt(e);let l=!1;for(let c=0;c<e.childNodes.length;c++){const d=e.childNodes[c];if(d.nodeType===Node.TEXT_NODE&&Mt(d)){l=!0;break}}if(l||e.children.length===0&&Mt(e))return!0;if(e.children.length>0){const c=document.createElement("div");for(c.innerHTML=e.innerHTML;c.firstElementChild;)c.removeChild(c.firstElementChild);if((((i=c.textContent)==null?void 0:i.trim())??"")!=="")return!0;let s=!1,u=!1,h=!1;for(let g=0;g<e.childNodes.length;g++){const b=e.childNodes[g];if(b.nodeType===Node.TEXT_NODE&&((r=b.textContent)!=null&&r.trim())?u=!0:b.nodeType===Node.ELEMENT_NODE&&(h=!0),u&&h){s=!0;break}}return s?!0:(["DIV","SECTION","ARTICLE","ASIDE","NAV","MAIN","HEADER","FOOTER"].includes(e.tagName)&&!((o=e.textContent)!=null&&o.trim()),!1)}return!!((a=e.textContent)!=null&&a.trim())}injectGlobalStyle(){const e=document.createElement("style");e.id=hc,e.textContent=`
      .${Q.spaceEditorHighlight} {
        outline: 1px dashed #0081F2;
        cursor: pointer;
				border-radius: 12px;
      }
			.${Q.virtualTextNode}.${Q.spaceEditorHighlight}{
				outline: none;
				text-decoration: underline;
				border-radius:unset;
			}
			.${Q.onlyTextNode}{
				text-decoration: underline;
				cursor: pointer!important;
				border-radius: 12px;
				outline: 1px dashed #0081F2;
			}
			.${Q.textNodeActive}{
				border-radius: 6px;
				outline: 1px solid  #0081F2;
				background: rgba(0, 129, 242, 0.08);
				text-decoration: none;
			}
      /* 编辑模式下通用光标样式 */
      body.${Q.editModeActive} * {
        cursor: default;
      }
      /* 可编辑元素的光标样式 */
      body.${Q.editModeActive} .${Q.virtualTextNode},
      body.${Q.editModeActive} .${Q.spaceEditorHighlight} {
        cursor: pointer;
      }

			.${Q.hidden}{
			opacity:0
			}

	${Hs}
    `,document.head.appendChild(e)}logElementInfo(e,n){var l,i;console.log(`[Element Info] ${n}`,{tagName:e.tagName,id:e.id||"无",class:e.className||"无",childElementCount:e.childElementCount,hasChildNodes:e.hasChildNodes(),textContent:(((l=e.textContent)==null?void 0:l.length)??0)>50?((i=e.textContent)==null?void 0:i.substring(0,47))+"...":e.textContent})}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ds="important",kp=" !"+Ds,zp=Li(class extends Ki{constructor(t){var e;if(super(t),t.type!==Qi.ATTRIBUTE||t.name!=="style"||((e=t.strings)==null?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,n)=>{const l=t[n];return l==null?e:e+`${n=n.includes("-")?n:n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${l};`}),"")}update(t,[e]){const{style:n}=t.element;if(this.ft===void 0)return this.ft=new Set(Object.keys(e)),this.render(e);for(const l of this.ft)e[l]==null&&(this.ft.delete(l),l.includes("-")?n.removeProperty(l):n[l]=null);for(const l in e){const i=e[l];if(i!=null){this.ft.add(l);const r=typeof i=="string"&&i.endsWith(kp);l.includes("-")||r?n.setProperty(l,r?i.slice(0,-11):i,r?Ds:""):n[l]=i}}return zt}});var we=(t=>(t.BOLD="bold",t.ITALIC="italic",t.UNDERLINE="underline",t.COLOR="color",t.COPY="copy",t.DELETE="delete",t))(we||{});const Qp=[{type:"bold",label:"Bold"},{type:"italic",label:"Italic"},{type:"underline",label:"Underline"},{type:"color"},{type:"copy"},{type:"delete"}];class ve{constructor(e,n){this.targetElement=e,this.se=n}static isTextBolded(e){return e==="bold"||e==="700"}static isTextUnderlined(e){return e==="underline"}static isTextItalic(e){return e==="italic"}static isDomDeleted(e){return e==="none"}handleQuickActionClick(e,n){const l=a=>{var d;const c=(d=this.se.originalElementStyle.get(this.targetElement))==null?void 0:d.style;if(c){const s=document.createElement("div");return s.style.cssText=c,s.style[a]}return null},i=getComputedStyle(this.targetElement),r=this.targetElement.cloneNode();r.style="";const o=getComputedStyle(r);switch(e){case"bold":{if(ve.isTextBolded(i.fontWeight)){const a=l("fontWeight");a?ve.isTextBolded(a)?this.targetElement.style.fontWeight="normal":this.targetElement.style.fontWeight=a:ve.isTextBolded(o.fontWeight)?this.targetElement.style.removeProperty("font-weight"):this.targetElement.style.fontWeight="normal"}else this.targetElement.style.fontWeight="bold";break}case"underline":{if(ve.isTextUnderlined(i.textDecorationLine)){const a=l("textDecorationLine");a?ve.isTextUnderlined(a)?this.targetElement.style.textDecorationLine="none":this.targetElement.style.textDecorationLine=a:ve.isTextUnderlined(o.textDecorationLine)?this.targetElement.style.removeProperty("text-decoration-line"):this.targetElement.style.textDecorationLine="none"}else this.targetElement.style.textDecorationLine="underline";break}case"italic":{if(ve.isTextItalic(i.fontStyle)){const a=l("fontStyle");a?ve.isTextItalic(a)?this.targetElement.style.fontStyle="normal":this.targetElement.style.fontStyle=a:ve.isTextItalic(o.fontStyle)?this.targetElement.style.removeProperty("font-style"):this.targetElement.style.fontStyle="normal"}else this.targetElement.style.fontStyle="italic";break}case"delete":{if(ve.isDomDeleted(i.display)){const a=l("display");a?ve.isDomDeleted(a)?this.targetElement.style.display="":this.targetElement.style.display=a:ve.isDomDeleted(o.display)?this.targetElement.style.removeProperty("display"):this.targetElement.style.display=""}else this.targetElement.style.display="none";break}case"color":{n&&(this.targetElement.style.color=n);break}}}updateTextContent(e){const n=this.targetElement;n.classList.contains(Q.virtualTextNode)?n.textContent=e:this.updateElementTextWithFormattingPreserved(n,e),e.trim()&&n.style.display==="none"&&(n.style.display="")}copyElement(e){if(e)try{const n=e.parentNode;if(!n){console.error("无法复制元素: 未找到父元素");return}const l=e.cloneNode(!0);return l instanceof HTMLElement?(l.id&&l.removeAttribute("id"),l.style.display==="none"&&(l.style.display=""),l.classList.add(Q.copyNode),e.nextSibling?n.insertBefore(l,e.nextSibling):n.appendChild(l),l):void 0}catch(n){console.error(n)}}removeFormatting(e,n){for(const l of n)e.querySelectorAll(l).forEach(r=>{var d;const o=r.innerHTML,a=r.getAttribute("style")||"",c=document.createElement("span");if(c.innerHTML=o,l.toLowerCase()==="strong"||l.toLowerCase()==="b"?c.style.fontWeight="bold":l.toLowerCase()==="em"||l.toLowerCase()==="i"?c.style.fontStyle="italic":l.toLowerCase()==="u"&&(c.style.textDecoration="underline"),a){const s=c.getAttribute("style")||"";c.setAttribute("style",`${s}; ${a}`)}(d=r.parentNode)==null||d.replaceChild(c,r)})}updateElementTextWithFormattingPreserved(e,n){e.querySelector("strong, em, u, b, i")&&this.removeFormatting(e,["strong","em","u","b","i"]),e.textContent=n}}const Lp=Ee`<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
  <path d="M4.5 9H11.25C12.0456 9 12.8087 9.31607 13.3713 9.87868C13.9339 10.4413 14.25 11.2044 14.25 12C14.25 12.7956 13.9339 13.5587 13.3713 14.1213C12.8087 14.6839 12.0456 15 11.25 15H5.25C5.05109 15 4.86032 14.921 4.71967 14.7803C4.57902 14.6397 4.5 14.4489 4.5 14.25V3.75C4.5 3.55109 4.57902 3.36032 4.71967 3.21967C4.86032 3.07902 5.05109 3 5.25 3H10.5C11.2956 3 12.0587 3.31607 12.6213 3.87868C13.1839 4.44129 13.5 5.20435 13.5 6C13.5 6.79565 13.1839 7.55871 12.6213 8.12132C12.0587 8.68393 11.2956 9 10.5 9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,Kp=Ee`<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
  <path d="M4.5 3V7.5C4.5 8.69347 4.97411 9.83807 5.81802 10.682C6.66193 11.5259 7.80653 12 9 12C10.1935 12 11.3381 11.5259 12.182 10.682C13.0259 9.83807 13.5 8.69347 13.5 7.5V3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M3 15H15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,Tp=Ee`<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
  <path d="M14.25 3H7.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M10.5 15H3.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M11.25 3L6.75 15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,Mp=t=>Ee`<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
  <path d="M4.5 12L9 3L13.5 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <path d="M5.99951 9H11.9995" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
  <rect x="2.25" y="14.625" width="13.5" height="3.375" rx="1.125" fill=${t}/>
</svg>`,Hp=Ee`<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
  <path d="M12.2482 5.83594C12.2482 5.51377 11.987 5.2526 11.6649 5.2526H5.83154C5.50938 5.2526 5.24821 5.51377 5.24821 5.83594V11.6693C5.24821 11.9914 5.50938 12.2526 5.83154 12.2526H11.6649C11.987 12.2526 12.2482 11.9914 12.2482 11.6693V5.83594ZM8.74821 2.33594C8.74821 2.01644 8.48438 1.7526 8.16488 1.7526H2.33154C2.01204 1.7526 1.74821 2.01644 1.74821 2.33594V8.16927C1.74821 8.4688 1.98006 8.71959 2.2723 8.74976L2.39136 8.75545C2.68543 8.7854 2.91488 9.03396 2.91488 9.33594C2.91488 9.63792 2.68543 9.88648 2.39136 9.91642L2.33154 9.91927L2.24154 9.91699C1.31924 9.86987 0.581543 9.10292 0.581543 8.16927V2.33594C0.581543 1.3721 1.36771 0.585938 2.33154 0.585938H8.16488C9.12871 0.585938 9.91488 1.3721 9.91488 2.33594C9.91488 2.6581 9.65371 2.91927 9.33154 2.91927C9.00938 2.91927 8.74821 2.6581 8.74821 2.33594ZM13.4149 11.6693C13.4149 12.6358 12.6314 13.4193 11.6649 13.4193H5.83154C4.86504 13.4193 4.08154 12.6358 4.08154 11.6693V5.83594C4.08154 4.86944 4.86504 4.08594 5.83154 4.08594H11.6649C12.6314 4.08594 13.4149 4.86944 13.4149 5.83594V11.6693Z" fill="currentColor"/>
</svg>`,Dp=Ee`<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" style="min-width:14px;min-height:14px;" viewBox="0 0 14 14" fill="none">
  <path d="M10.4998 4.08594H3.49984V11.6693C3.49984 11.7712 3.55664 11.922 3.69352 12.0589C3.8304 12.1958 3.98122 12.2526 4.08317 12.2526H9.9165C10.0185 12.2526 10.1693 12.1957 10.3062 12.0589C10.4429 11.9221 10.4998 11.7712 10.4998 11.6693V4.08594ZM5.24984 9.91927V6.41927C5.24984 6.09715 5.51106 5.83601 5.83317 5.83594C6.15534 5.83594 6.4165 6.09711 6.4165 6.41927V9.91927C6.4165 10.2414 6.15534 10.5026 5.83317 10.5026C5.51106 10.5025 5.24984 10.2414 5.24984 9.91927ZM7.58317 9.91927V6.41927C7.58317 6.09711 7.84434 5.83594 8.1665 5.83594C8.48861 5.83601 8.74984 6.09715 8.74984 6.41927V9.91927C8.74984 10.2414 8.48861 10.5025 8.1665 10.5026C7.84434 10.5026 7.58317 10.2414 7.58317 9.91927ZM8.74984 2.33594C8.74984 2.23399 8.69303 2.08317 8.55615 1.94629C8.4193 1.80949 8.26842 1.7526 8.1665 1.7526H5.83317C5.73123 1.75269 5.5803 1.80951 5.44352 1.94629C5.30672 2.08314 5.24984 2.23402 5.24984 2.33594V2.91927H8.74984V2.33594ZM9.9165 2.91927H12.2498L12.3097 2.92269C12.6037 2.95265 12.8331 3.2007 12.8332 3.5026C12.8332 3.80458 12.6037 4.05314 12.3097 4.08309L12.2498 4.08594H11.6665V11.6693C11.6665 12.1506 11.4316 12.5832 11.131 12.8838C10.8304 13.1844 10.3978 13.4192 9.9165 13.4193H4.08317C3.60179 13.4193 3.16927 13.1844 2.86865 12.8838C2.56803 12.5832 2.33317 12.1507 2.33317 11.6693V4.08594H1.74984C1.42767 4.08594 1.1665 3.82477 1.1665 3.5026C1.16657 3.1805 1.42771 2.91927 1.74984 2.91927H4.08317V2.33594C4.08317 1.85461 4.31809 1.42203 4.61865 1.12142C4.91922 0.820847 5.35187 0.58601 5.83317 0.585938H8.1665C8.64783 0.585938 9.08041 0.820854 9.38102 1.12142C9.68164 1.42204 9.9165 1.85455 9.9165 2.33594V2.91927Z" fill="currentColor"/>
</svg>`,vl=Ee`<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
										<path
											d="M13.2251 16.9379C14.4717 16.147 15.3336 11.9052 15.144 10.6421C15.144 10.6421 14.9464 9.96396 14.4643 9.96394C13.9821 9.96391 13.7815 10.4719 13.7815 10.4719C13.7815 10.4719 13.6546 10.9409 13.4555 11.5313C13.1474 12.4447 13.0178 13.5718 12.2143 13.8571C11.4107 14.1425 10.6071 13.8725 10.6071 13.8725C11.1535 15.9448 11.9785 17.7288 13.2251 16.9379Z"
											fill="white"
										/>
										<path
											fill-rule="evenodd"
											clip-rule="evenodd"
											d="M7.04826 9.17689C6.59029 9.22824 6.34906 9.40136 6.26768 9.48274C5.94625 9.80417 5.78554 10.1256 5.78554 10.2863C5.78554 10.447 5.40745 9.53393 5.32437 9.44837C5.07703 9.19366 5.083 8.78667 5.33771 8.53933C5.69527 8.19212 6.28003 7.96925 6.90502 7.89918C7.55323 7.82651 8.3219 7.9075 9.09971 8.25205C10.0075 8.65415 10.4937 9.50199 10.6773 10.2768C10.7705 10.6701 10.7943 11.0743 10.7466 11.4426C10.7002 11.8002 10.5781 12.1826 10.3242 12.4736C9.79525 13.0799 9.01508 13.0116 8.593 12.9221C8.35518 12.8716 8.14542 12.7975 7.99786 12.738C7.92303 12.7079 7.86158 12.6804 7.81747 12.6597C7.79535 12.6493 7.77743 12.6406 7.7642 12.6341C7.75757 12.6308 7.75211 12.628 7.74786 12.6259L7.7424 12.6231L7.74037 12.622L7.73915 12.6214C7.73915 12.6214 7.7388 12.6212 8.03568 12.051L7.7388 12.6212C7.42389 12.4573 7.30152 12.069 7.46548 11.7541C7.62912 11.4398 8.01612 11.3173 8.3307 11.4798M8.3307 11.4798L8.33145 11.4802L8.3307 11.4798ZM8.3307 11.4798L8.33531 11.4822C8.34052 11.4847 8.3498 11.4893 8.36271 11.4953C8.38864 11.5075 8.42852 11.5254 8.4788 11.5457C8.58146 11.5871 8.71705 11.6341 8.85982 11.6644C9.19892 11.7363 9.32081 11.668 9.3554 11.6284C9.38325 11.5965 9.44396 11.4899 9.47154 11.2773C9.49771 11.0755 9.48663 10.8281 9.42625 10.5733C9.30267 10.0519 9.00685 9.61712 8.57899 9.42759C8.02117 9.1805 7.48301 9.12815 7.04826 9.17689"
											fill="white"
										/>
										<path
											fill-rule="evenodd"
											clip-rule="evenodd"
											d="M2.79812 2.53348C2.64176 2.85224 2.7734 3.2374 3.09216 3.39376C3.55 3.61834 3.94731 3.83979 4.34068 4.28331C4.57627 4.54892 4.98258 4.57326 5.2482 4.33767C5.51381 4.10208 5.53815 3.69577 5.30256 3.43016C4.742 2.79815 4.16499 2.48794 3.65839 2.23944C3.33963 2.08308 2.95448 2.21473 2.79812 2.53348Z"
											fill="white"
										/>
										<path
											fill-rule="evenodd"
											clip-rule="evenodd"
											d="M6.27275 0.662519C5.92831 0.748629 5.71889 1.09766 5.805 1.4421C5.86516 1.68274 5.92127 1.8885 5.97263 2.07686C6.07093 2.43738 6.15185 2.73415 6.21054 3.08969C6.26837 3.43999 6.59923 3.67708 6.94952 3.61926C7.29982 3.56143 7.53692 3.23058 7.47909 2.88028C7.40972 2.46006 7.3017 2.06246 7.19328 1.66338C7.14526 1.48666 7.09717 1.30966 7.05233 1.13027C6.96622 0.785827 6.61719 0.57641 6.27275 0.662519Z"
											fill="white"
										/>
										<path
											d="M8.99979 3.21456C9.16051 2.57171 9.32122 2.08956 9.61377 1.60742"
											stroke="white"
											stroke-width="1.28571"
											stroke-miterlimit="10"
											stroke-linecap="round"
										/>
										<path
											fill-rule="evenodd"
											clip-rule="evenodd"
											d="M11.3613 6.26832C12.6366 6.52316 12.6368 6.52221 12.6368 6.52221L12.637 6.52126L12.6373 6.51931L12.6381 6.51527L12.6396 6.50658C12.6407 6.50054 12.6418 6.49395 12.6429 6.48687C12.6452 6.47271 12.6476 6.45641 12.65 6.43816C12.6548 6.40191 12.6596 6.35662 12.6628 6.30419C12.6689 6.20315 12.6702 6.05635 12.6443 5.88608C12.5954 5.56354 12.4075 4.95215 11.7455 4.59774L11.6146 4.52762L11.4715 4.48801L11.1424 5.7144C11.4358 5.8715 11.3613 6.26832 11.3613 6.26832ZM11.1573 7.07742L11.3613 6.26832L12.6366 6.52316L12.6296 6.56049L12.4237 7.37732C12.3841 7.57807 12.3789 7.69285 12.381 7.75349C12.3828 7.80284 12.3892 7.81904 12.3924 7.82698L12.3927 7.8279C12.4008 7.84841 12.4216 7.89289 12.4977 8.00832C12.5287 8.05537 12.561 8.10252 12.6021 8.1626C12.613 8.1785 12.6245 8.19531 12.6367 8.21327C12.6919 8.29416 12.7565 8.38953 12.825 8.49621C13.2527 9.16281 13.2947 9.80259 13.2925 10.2126C13.2924 10.2186 13.2924 10.2246 13.2923 10.2305C13.3435 10.2481 13.3978 10.2658 13.4555 10.2841C13.4745 10.2902 13.4997 10.2982 13.5262 10.3065C13.5634 10.3183 13.6031 10.3308 13.6314 10.3399C13.6872 10.3577 13.7584 10.381 13.8272 10.4067C13.8751 10.4245 13.9211 10.4423 13.9644 10.4603C14.0059 10.4775 14.0566 10.4995 14.1099 10.5264C14.1513 10.5473 14.2186 10.5831 14.2948 10.6359L14.9647 10.9242L14.955 11.7823C14.9493 12.2868 14.7463 12.8187 14.6023 13.148C14.4436 13.5111 14.2339 13.8983 14.0408 14.1556C13.7712 14.515 13.4657 14.8945 13.0981 15.1372C12.8815 15.2802 12.6198 15.394 12.3111 15.4313C12.0361 15.4645 11.7981 15.4277 11.6232 15.3851L11.5717 15.3745C11.5199 15.3639 11.4456 15.3486 11.3553 15.3298C11.1748 15.2922 10.9287 15.2404 10.6678 15.1837C10.1867 15.0793 9.53471 14.9331 9.22715 14.8311L9.20492 14.8237L9.18296 14.8155C9.04655 14.7649 8.81591 14.7081 8.43387 14.621C8.41077 14.6157 8.38722 14.6103 8.36328 14.6049C8.03371 14.5299 7.6281 14.4376 7.24401 14.3212C6.8462 14.2008 6.35418 14.0216 5.9364 13.7296C5.4979 13.4232 4.99936 12.8829 4.9716 12.0723C4.96744 11.951 4.97023 11.8337 4.97774 11.7224C4.78027 11.5084 4.61454 11.2286 4.53078 10.8703C4.44918 10.5212 4.49431 10.2118 4.55156 9.99459C4.60897 9.7768 4.69617 9.58643 4.76904 9.44413C4.79364 9.3961 4.81915 9.34874 4.8446 9.30298C4.60356 9.22692 4.3313 9.13294 4.06631 9.01999C3.72023 8.87246 3.22918 8.62908 2.86258 8.2362C2.66514 8.0246 2.4584 7.72132 2.37481 7.3248C2.28733 6.90985 2.36002 6.51171 2.53036 6.1708C2.94502 5.34093 3.73706 5.04773 4.44152 5.02237C5.07762 4.99946 5.75449 5.17745 6.36097 5.39016C6.91355 5.58397 7.70443 5.94444 8.3763 6.25842C8.5976 5.89554 8.88932 5.48549 9.16548 5.15432L9.22034 5.08854L9.28382 5.03075C9.75896 4.59828 10.2927 4.45288 10.6994 4.42169C10.8988 4.4064 11.0705 4.41781 11.1989 4.43448C11.2638 4.44291 11.3198 4.45295 11.3652 4.46245C11.388 4.46721 11.4083 4.47188 11.426 4.4762C11.4349 4.47837 11.4431 4.48045 11.4507 4.48243L11.4616 4.48531L11.4666 4.48668L11.4691 4.48735L11.4703 4.48768C11.4703 4.48768 11.4715 4.48801 11.1424 5.7144C11.1424 5.7144 10.6292 5.57232 10.188 5.96175C10.1836 5.96567 10.1792 5.96965 10.1747 5.97368C10.161 5.99009 10.1473 6.0067 10.1336 6.02351C10.1139 6.04768 10.0941 6.07224 10.0743 6.09711C10.0685 6.10441 10.0627 6.11174 10.0569 6.1191C9.61666 6.67768 9.64277 6.91103 8.83914 7.87543C8.83914 7.87543 8.4205 7.68157 8.1701 7.56386C7.9983 7.48311 7.81669 7.39774 7.63164 7.31169C7.03464 7.03411 6.40173 6.74946 5.94628 6.58972C4.82494 6.19643 3.99821 6.14651 3.69645 6.75042C3.29839 7.54707 4.9148 8.00866 5.72705 8.24061C5.8981 8.28945 6.03349 8.32811 6.10689 8.35758C6.52348 8.52479 6.55255 8.86031 6.42848 9.16103C6.35609 9.33651 6.31482 9.43541 6.10706 9.64317C5.78563 9.9646 5.73292 10.3452 5.7943 10.6078C5.82503 10.7392 5.88582 10.8348 5.95809 10.9044C6.15197 11.0909 6.42842 11.0897 6.42842 11.0897C6.42842 11.0897 6.25016 11.5453 6.26759 12.0541C6.27143 12.1661 6.30155 12.268 6.35346 12.3612C6.66163 12.9145 7.73774 13.1596 8.64189 13.3655C9.02162 13.452 9.37102 13.5316 9.62046 13.6242C10.0676 13.7726 11.8925 14.1433 11.8925 14.1433C12.2292 14.2317 12.438 14.1247 12.9919 13.3864C13.2219 13.0797 13.653 12.2123 13.6583 11.7435C13.5884 11.7134 13.5835 11.7029 13.5786 11.6924C13.5718 11.6779 13.565 11.6633 13.3882 11.5974C13.329 11.5754 13.2499 11.5504 13.1593 11.5218C12.7822 11.4029 12.2071 11.2215 12.0534 10.929C11.9788 10.787 11.9846 10.5964 11.9915 10.3736C12.0022 10.0271 12.0153 9.60261 11.732 9.16115C11.6624 9.05276 11.5957 8.95523 11.5333 8.864C11.1781 8.34469 10.9626 8.0296 11.1573 7.07742ZM5.21736 8.64574C5.21818 8.64341 5.21787 8.64394 5.21684 8.64717L5.21736 8.64574ZM13.2859 10.6214C13.2859 10.6214 13.2859 10.6164 13.2849 10.6077C13.2852 10.6173 13.2859 10.6214 13.2859 10.6214Z"
											fill="white"
										/>
									</svg>`;Ee`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
  <path d="M17.6334 22.5838C19.2956 21.5293 20.4448 15.8736 20.192 14.1894C20.192 14.1894 19.9285 13.2853 19.2857 13.2853C18.6428 13.2852 18.3754 13.9625 18.3754 13.9625C18.3754 13.9625 18.2062 14.5878 17.9406 15.3751C17.5298 16.593 17.3571 18.0957 16.2857 18.4762C15.2143 18.8566 14.1429 18.4966 14.1429 18.4966C14.8714 21.2597 15.9713 23.6384 17.6334 22.5838Z" fill="#34322D"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M9.39785 12.2385C8.78721 12.3069 8.46558 12.5378 8.35707 12.6463C7.9285 13.0748 7.71422 13.5034 7.71422 13.7177C7.71422 13.932 7.21009 12.7145 7.09932 12.6004C6.76953 12.2608 6.7775 11.7182 7.11711 11.3884C7.59386 10.9254 8.37354 10.6283 9.20685 10.5348C10.0711 10.438 11.096 10.5459 12.1331 11.0053C13.3435 11.5415 13.9917 12.6719 14.2366 13.705C14.3609 14.2294 14.3926 14.7683 14.3289 15.2595C14.2671 15.7362 14.1043 16.2461 13.7658 16.6341C13.0605 17.4425 12.0203 17.3515 11.4575 17.2321C11.1404 17.1648 10.8607 17.066 10.664 16.9866C10.5642 16.9464 10.4823 16.9097 10.4235 16.8822C10.394 16.8684 10.3701 16.8568 10.3524 16.848C10.3436 16.8436 10.3363 16.84 10.3306 16.8371L10.3234 16.8334L10.3207 16.832L10.319 16.8311C10.319 16.8311 10.3186 16.8309 10.7144 16.0706L10.3186 16.8309C9.89868 16.6123 9.73553 16.0947 9.95414 15.6748C10.1723 15.2557 10.6883 15.0924 11.1078 15.3091M11.1078 15.3091L11.1088 15.3096L11.1078 15.3091ZM11.1078 15.3091L11.1139 15.3121C11.1209 15.3156 11.1332 15.3216 11.1504 15.3297C11.185 15.3459 11.2382 15.3698 11.3052 15.3968C11.4421 15.452 11.6229 15.5147 11.8133 15.5551C12.2654 15.651 12.4279 15.56 12.474 15.5071C12.5112 15.4646 12.5921 15.3225 12.6289 15.039C12.6638 14.7699 12.649 14.4401 12.5685 14.1004C12.4037 13.4052 12.0093 12.8254 11.4388 12.5727C10.6951 12.2433 9.9775 12.1735 9.39785 12.2385" fill="#34322D"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M3.73099 3.38058C3.52251 3.80559 3.69804 4.31913 4.12304 4.52761C4.73349 4.82706 5.26324 5.12233 5.78774 5.71368C6.10186 6.06783 6.6436 6.10028 6.99776 5.78617C7.35191 5.47205 7.38436 4.9303 7.07024 4.57615C6.32282 3.73348 5.55348 3.31986 4.87802 2.98852C4.45301 2.78004 3.93947 2.95558 3.73099 3.38058Z" fill="#34322D"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.3635 0.883359C7.90425 0.998172 7.62503 1.46354 7.73984 1.9228C7.82005 2.24365 7.89486 2.518 7.96334 2.76915C8.09441 3.24984 8.20231 3.64553 8.28056 4.11959C8.35767 4.58665 8.7988 4.90278 9.26587 4.82568C9.73293 4.74857 10.0491 4.30743 9.97196 3.84037C9.87946 3.28007 9.73543 2.74994 9.59087 2.21784C9.52686 1.98222 9.46274 1.74621 9.40294 1.50702C9.28813 1.04777 8.82275 0.768546 8.3635 0.883359Z" fill="#34322D"/>
  <path d="M12.0002 4.28348C12.2145 3.42634 12.4288 2.78348 12.8188 2.14062" stroke="#34322D" stroke-width="1.71429" stroke-miterlimit="10" stroke-linecap="round"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M15.1487 8.35776C16.8491 8.69754 16.8494 8.69629 16.8494 8.69629L16.8496 8.69501L16.8501 8.69242L16.8511 8.68702L16.8531 8.67544C16.8545 8.66738 16.856 8.65861 16.8575 8.64916C16.8606 8.63029 16.8638 8.60854 16.867 8.58421C16.8734 8.53588 16.8798 8.47549 16.884 8.40558C16.8922 8.27087 16.8939 8.07513 16.8594 7.8481C16.7941 7.41805 16.5437 6.60287 15.661 6.13031L15.4864 6.03683L15.2956 5.98401L14.8568 7.6192C15.2481 7.82866 15.1487 8.35776 15.1487 8.35776ZM14.8768 9.43656L15.1487 8.35776L16.8491 8.69754L16.8398 8.74733L16.5653 9.83643C16.5124 10.1041 16.5055 10.2571 16.5084 10.338C16.5107 10.4038 16.5193 10.4254 16.5235 10.436L16.524 10.4372C16.5347 10.4646 16.5625 10.5238 16.664 10.6778C16.7053 10.7405 16.7483 10.8034 16.8031 10.8835C16.8176 10.9047 16.8329 10.9271 16.8493 10.951C16.9229 11.0589 17.009 11.186 17.1003 11.3283C17.6706 12.2171 17.7266 13.0701 17.7236 13.6167C17.7236 13.6248 17.7235 13.6328 17.7234 13.6407C17.7916 13.6641 17.864 13.6877 17.9409 13.7122C17.9663 13.7202 18 13.7309 18.0353 13.742C18.0849 13.7577 18.1378 13.7744 18.1756 13.7865C18.2499 13.8103 18.3448 13.8414 18.4366 13.8756C18.5005 13.8994 18.5618 13.9231 18.6195 13.947C18.6748 13.9699 18.7424 13.9994 18.8136 14.0353C18.8687 14.0631 18.9585 14.1108 19.0601 14.1813L19.9532 14.5656L19.9403 15.7098C19.9327 16.3825 19.662 17.0917 19.4701 17.5307C19.2584 18.0148 18.9788 18.531 18.7214 18.8741C18.3619 19.3533 17.9545 19.8593 17.4645 20.1829C17.1756 20.3736 16.8268 20.5253 16.4152 20.575C16.0485 20.6193 15.7311 20.5702 15.498 20.5135L15.4292 20.4994C15.3601 20.4852 15.2612 20.4648 15.1407 20.4397C14.9 20.3896 14.572 20.3205 14.2241 20.245C13.5827 20.1057 12.7133 19.9109 12.3032 19.7748L12.2735 19.7649L12.2443 19.7541C12.0624 19.6865 11.7549 19.6108 11.2455 19.4946C11.2147 19.4876 11.1833 19.4804 11.1514 19.4732C10.7119 19.3732 10.1711 19.2501 9.659 19.095C9.1286 18.9344 8.47257 18.6955 7.91553 18.3062C7.33086 17.8976 6.66614 17.1772 6.62912 16.0964C6.62358 15.9347 6.6273 15.7783 6.63731 15.6299C6.37402 15.3445 6.15304 14.9715 6.04136 14.4937C5.93256 14.0283 5.99274 13.6157 6.06907 13.3261C6.14561 13.0357 6.26188 12.7819 6.35905 12.5922C6.39184 12.5281 6.42586 12.465 6.4598 12.404C6.1384 12.3026 5.77539 12.1773 5.42208 12.0266C4.96063 11.83 4.3059 11.5054 3.8171 10.9816C3.55384 10.6995 3.27819 10.2951 3.16674 9.7664C3.0501 9.21313 3.14702 8.68228 3.37414 8.22774C3.92702 7.12125 4.98308 6.73031 5.92235 6.69649C6.77048 6.66595 7.67298 6.90327 8.48162 7.18689C9.21839 7.44529 10.2729 7.92592 11.1687 8.34456C11.4638 7.86071 11.8527 7.31399 12.221 6.87243L12.2941 6.78472L12.3788 6.70767C13.0123 6.13104 13.7239 5.93717 14.2662 5.89559C14.5321 5.87521 14.761 5.89041 14.9322 5.91264C15.0187 5.92388 15.0933 5.93727 15.1539 5.94993C15.1843 5.95628 15.2114 5.9625 15.235 5.96827C15.2469 5.97116 15.2578 5.97394 15.2679 5.97657L15.2824 5.98041L15.2892 5.98224L15.2924 5.98313L15.294 5.98357C15.294 5.98357 15.2956 5.98401 14.8568 7.6192C14.8568 7.6192 14.1726 7.42977 13.5844 7.949C13.5785 7.95423 13.5725 7.95953 13.5666 7.96491C13.5484 7.98678 13.5301 8.00894 13.5118 8.03134C13.4855 8.06357 13.4591 8.09631 13.4328 8.12948C13.425 8.13922 13.4173 8.14899 13.4096 8.1588C12.8225 8.90357 12.8574 9.21471 11.7858 10.5006C11.7858 10.5006 11.2277 10.2421 10.8938 10.0852C10.6647 9.97747 10.4226 9.86365 10.1758 9.74892C9.37984 9.37881 8.53597 8.99928 7.9287 8.78629C6.43357 8.26191 5.33127 8.19535 4.92892 9.00056C4.39818 10.0628 6.5534 10.6782 7.63639 10.9875C7.86446 11.0526 8.04497 11.1042 8.14284 11.1434C8.69829 11.3664 8.73705 11.8137 8.57164 12.2147C8.47511 12.4487 8.42008 12.5805 8.14307 12.8576C7.71449 13.2861 7.64421 13.7936 7.72606 14.1437C7.76703 14.319 7.84809 14.4464 7.94445 14.5391C8.20295 14.7878 8.57155 14.7863 8.57155 14.7863C8.57155 14.7863 8.33388 15.3937 8.35711 16.0721C8.36223 16.2214 8.40239 16.3573 8.47161 16.4816C8.88249 17.2193 10.3173 17.5461 11.5228 17.8207C12.0292 17.936 12.495 18.0422 12.8276 18.1656C13.4238 18.3635 15.857 18.8577 15.857 18.8577C16.306 18.9756 16.5844 18.833 17.3228 17.8485C17.6295 17.4397 18.2043 16.2831 18.2114 15.658C18.1181 15.6179 18.1116 15.6039 18.1051 15.5898C18.0961 15.5705 18.087 15.5511 17.8512 15.4632C17.7724 15.4338 17.6668 15.4006 17.546 15.3624C17.0432 15.2039 16.2764 14.9621 16.0715 14.572C15.972 14.3827 15.9798 14.1286 15.989 13.8315C16.0032 13.3695 16.0207 12.8035 15.643 12.2149C15.5503 12.0703 15.4613 11.9403 15.3781 11.8187C14.9045 11.1263 14.6172 10.7061 14.8768 9.43656ZM6.95681 11.5277C6.9579 11.5245 6.95748 11.5253 6.95612 11.5296L6.95681 11.5277ZM17.7149 14.1619C17.7149 14.1619 17.7148 14.1552 17.7135 14.1436C17.714 14.1564 17.7149 14.1619 17.7149 14.1619Z" fill="#34322D"/>
</svg>`;const jp=Ee`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
  <path d="M11.6766 1.33594C12.3517 1.33606 12.9993 1.60455 13.4767 2.08203C13.954 2.55952 14.2222 3.20702 14.2221 3.88216C14.222 4.51523 13.9863 5.12416 13.5633 5.59114L13.476 5.68229L12.0841 7.07422C12.0665 7.09721 12.0479 7.12022 12.0268 7.14127C12.0055 7.16259 11.9825 7.18139 11.9591 7.19922L5.91166 13.248L5.91101 13.2487C5.67921 13.4798 5.39408 13.6508 5.08094 13.7461H5.08029L2.17863 14.6263L2.17667 14.6269C2.00393 14.6788 1.82035 14.6826 1.64543 14.6387C1.47046 14.5947 1.31026 14.5044 1.18254 14.3769C1.05479 14.2494 0.963819 14.0891 0.919524 13.9141C0.875316 13.7392 0.878989 13.5556 0.930592 13.3828L0.931894 13.3802L1.81209 10.4785L1.81274 10.4766L1.85246 10.3607C1.93852 10.1312 2.06617 9.91968 2.22876 9.73632L2.31274 9.64648L8.36151 3.59505C8.37855 3.57308 8.39733 3.55209 8.4175 3.5319C8.43806 3.51133 8.45953 3.49192 8.48195 3.47461L9.87582 2.08138L9.96761 1.99414C10.4347 1.57138 11.0436 1.33586 11.6766 1.33594ZM3.25479 10.5905L3.25414 10.5911C3.17682 10.6683 3.11949 10.7634 3.08747 10.8678L2.38826 13.1686L4.69292 12.47L4.7691 12.4421C4.84355 12.409 4.91161 12.3625 4.96961 12.3047L10.6076 6.66471L8.89275 4.94987L3.25479 10.5905ZM11.6766 2.66927C11.3551 2.66923 11.0459 2.79625 10.8185 3.02344L10.8192 3.02409L9.83545 4.00716L11.5503 5.722L12.5333 4.73958L12.6141 4.65039C12.7908 4.43469 12.8887 4.16347 12.8888 3.88216C12.8888 3.56056 12.7607 3.25217 12.5333 3.02474C12.306 2.79741 11.998 2.66939 11.6766 2.66927Z" fill="currentColor"/>
</svg>`,_p=Ee`<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none">
<path d="M12 16.4922H13.5C13.8978 16.4922 14.2794 16.3342 14.5607 16.0528C14.842 15.7715 15 15.39 15 14.9922V5.24219L11.25 1.49219H4.5C4.10218 1.49219 3.72064 1.65022 3.43934 1.93153C3.15804 2.21283 3 2.59436 3 2.99219V5.24219" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M10.5 1.49219V4.49219C10.5 4.89001 10.658 5.27154 10.9393 5.55285C11.2206 5.83415 11.6022 5.99219 12 5.99219H15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M6 16.5078C8.48528 16.5078 10.5 14.4931 10.5 12.0078C10.5 9.52253 8.48528 7.50781 6 7.50781C3.51472 7.50781 1.5 9.52253 1.5 12.0078C1.5 14.4931 3.51472 16.5078 6 16.5078Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M7.125 13.1172L6 12.1797V10.4922" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`;Ee`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
  <path d="M12.6666 9.66651C12.6666 9.27261 12.5888 8.88265 12.4381 8.51872C12.2873 8.15475 12.0663 7.82399 11.7877 7.54542C11.5091 7.26684 11.1784 7.04579 10.8144 6.89503C10.4505 6.74431 10.0605 6.66651 9.66662 6.66651H4.27599L6.4713 8.86182L6.51688 8.9126C6.73044 9.17445 6.71538 9.56045 6.4713 9.80453C6.22723 10.0486 5.84123 10.0637 5.57938 9.8501L5.5286 9.80453L2.19526 6.4712C1.93491 6.21085 1.93491 5.78884 2.19526 5.52849L5.5286 2.19516L5.57938 2.14958C5.84123 1.93602 6.22723 1.95108 6.4713 2.19516C6.71538 2.43923 6.73044 2.82523 6.51688 3.08708L6.4713 3.13786L4.27599 5.33318H9.66662C10.2357 5.33318 10.7991 5.44548 11.3248 5.66326C11.8506 5.88103 12.3287 6.19967 12.7311 6.60206C13.1335 7.00444 13.4521 7.48256 13.6699 8.00831C13.8876 8.53405 13.9999 9.09745 13.9999 9.66651L13.9947 9.8794C13.9703 10.3757 13.8604 10.8646 13.6699 11.3247C13.4521 11.8505 13.1335 12.3286 12.7311 12.731C12.3287 13.1334 11.8506 13.452 11.3248 13.6698C10.7991 13.8875 10.2357 13.9998 9.66662 13.9998H7.33328C6.96509 13.9998 6.66662 13.7014 6.66662 13.3332C6.66662 12.965 6.96509 12.6665 7.33328 12.6665H9.66662C10.0605 12.6665 10.4505 12.5887 10.8144 12.438C11.1784 12.2872 11.5091 12.0662 11.7877 11.7876C12.0663 11.509 12.2873 11.1783 12.4381 10.8143C12.5699 10.496 12.6458 10.1577 12.6627 9.8143L12.6666 9.66651Z" fill="currentColor"/>
</svg>`;Ee`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
  <path d="M8.00013 1.33594C9.74121 1.33594 11.4063 1.98365 12.7013 3.11589L12.9552 3.34896L12.965 3.35807L13.3335 3.72656V2.0026C13.3335 1.63442 13.6319 1.33594 14.0001 1.33594C14.3683 1.33594 14.6668 1.63441 14.6668 2.0026V5.33594C14.6668 5.70413 14.3683 6.0026 14.0001 6.0026H10.6668C10.2986 6.0026 10.0001 5.70413 10.0001 5.33594C10.0001 4.96775 10.2986 4.66927 10.6668 4.66927H12.3908L12.0314 4.3099L11.8237 4.11914C10.7648 3.19338 9.40895 2.66927 8.00013 2.66927C6.9453 2.66927 5.9143 2.98233 5.03724 3.56836C4.16022 4.15437 3.47672 4.98711 3.07305 5.96159C2.6694 6.93608 2.56327 8.00845 2.76901 9.04297C2.9748 10.0775 3.48276 11.0282 4.22864 11.7741C4.97452 12.52 5.9252 13.0279 6.95976 13.2337C7.99428 13.4395 9.06666 13.3333 10.0411 12.9297C11.0156 12.526 11.8484 11.8425 12.4344 10.9655C13.0204 10.0884 13.3335 9.05744 13.3335 8.0026C13.3335 7.63442 13.6319 7.33594 14.0001 7.33594C14.3683 7.33594 14.6668 7.63441 14.6668 8.0026C14.6668 9.32115 14.2756 10.6101 13.5431 11.7064C12.8106 12.8027 11.7697 13.6575 10.5516 14.1621C9.33339 14.6667 7.99255 14.7983 6.69935 14.541C5.40622 14.2838 4.21824 13.6491 3.28594 12.7168C2.35364 11.7845 1.71898 10.5965 1.46172 9.30339C1.20448 8.01018 1.33604 6.66935 1.84062 5.45117C2.3452 4.23305 3.20007 3.19216 4.29635 2.45964C5.39268 1.72709 6.68159 1.33594 8.00013 1.33594Z" fill="currentColor" fill-opacity="0.6"/>
</svg>`;const Op=Ee`<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 14 14" fill="none">
  <path d="M12.2502 7.0026C12.2502 4.10311 9.89966 1.7526 7.00016 1.7526C4.10067 1.7526 1.75016 4.10311 1.75016 7.0026C1.75016 9.9021 4.10067 12.2526 7.00016 12.2526C9.89966 12.2526 12.2502 9.9021 12.2502 7.0026ZM6.41683 9.33594V7.0026C6.41683 6.68045 6.67801 6.41929 7.00016 6.41927C7.32233 6.41927 7.5835 6.68044 7.5835 7.0026V9.33594C7.58349 9.6581 7.32232 9.91927 7.00016 9.91927C6.67801 9.91926 6.41684 9.65809 6.41683 9.33594ZM7.00586 4.08594L7.06567 4.08879C7.35983 4.11865 7.58919 4.36724 7.58919 4.66927C7.58919 4.97131 7.35983 5.21989 7.06567 5.24976L7.00586 5.2526H7.00016C6.67801 5.25259 6.41683 4.99143 6.41683 4.66927C6.41683 4.34711 6.67801 4.08595 7.00016 4.08594H7.00586ZM13.4168 7.0026C13.4168 10.5464 10.544 13.4193 7.00016 13.4193C3.45634 13.4193 0.583496 10.5464 0.583496 7.0026C0.583496 3.45878 3.45634 0.585938 7.00016 0.585938C10.544 0.585938 13.4168 3.45878 13.4168 7.0026Z" fill="currentColor" />
</svg>`;Ee`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
  <path d="M6.3999 13.1969L10.3999 7.99687L6.3999 2.79688" stroke="currentColor" stroke-width="1.33333" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`;Ee`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
  <path d="M7.99996 2.66406C9.55119 2.66412 11.0676 3.12483 12.3567 3.98763C13.5653 4.79652 14.5232 5.92468 15.1256 7.24414L15.2415 7.51107L15.25 7.5332C15.3472 7.79515 15.3594 8.08 15.2864 8.34766L15.25 8.46094C15.2472 8.46833 15.2445 8.47578 15.2415 8.48307C14.65 9.91721 13.6459 11.1436 12.3567 12.0065C11.1482 12.8154 9.73981 13.2704 8.29033 13.3242L7.99996 13.3301C6.44863 13.3301 4.93177 12.8694 3.64254 12.0065C2.43385 11.1975 1.47603 10.069 0.873661 8.74935L0.757776 8.48307C0.754772 8.47578 0.752056 8.46833 0.749312 8.46094C0.638232 8.16166 0.638269 7.83249 0.749312 7.5332L0.757776 7.51107C1.34923 6.07697 2.35338 4.85049 3.64254 3.98763C4.93177 3.12477 6.44863 2.66406 7.99996 2.66406ZM7.99996 3.9974C6.71269 3.9974 5.45386 4.37971 4.38408 5.0957C3.32112 5.80719 2.49192 6.81642 1.99996 7.99675C2.49191 9.17727 3.32096 10.1869 4.38408 10.8984C5.45386 11.6144 6.71269 11.9967 7.99996 11.9967L8.24085 11.9922C9.44361 11.9475 10.6123 11.5696 11.6152 10.8984C12.6783 10.1869 13.5067 9.17718 13.9987 7.99675C13.5067 6.81652 12.6781 5.80714 11.6152 5.0957C10.5455 4.37977 9.28713 3.99746 7.99996 3.9974ZM9.3333 7.99675C9.33317 7.26058 8.73612 6.66358 7.99996 6.66341C7.26366 6.66341 6.66676 7.26048 6.66663 7.99675C6.66663 8.73312 7.26358 9.33008 7.99996 9.33008C8.7362 9.32991 9.3333 8.73302 9.3333 7.99675ZM10.6666 7.99675C10.6666 9.4694 9.47258 10.6632 7.99996 10.6634C6.5272 10.6634 5.3333 9.4695 5.3333 7.99675C5.33343 6.5241 6.52728 5.33008 7.99996 5.33008C9.4725 5.33025 10.6665 6.5242 10.6666 7.99675Z" fill="white"/>
</svg>`;const Pp=Ee`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
<g clip-path="url(#clip0_474_13838)">
<path fill-rule="evenodd" clip-rule="evenodd" d="M0.734375 8.00104C0.734375 3.98777 3.98777 0.734375 8.00104 0.734375C12.0143 0.734375 15.2677 3.98777 15.2677 8.00104C15.2677 12.0143 12.0143 15.2677 8.00104 15.2677C3.98777 15.2677 0.734375 12.0143 0.734375 8.00104Z" fill="white"/>
<path d="M8.00098 1.23438C11.7381 1.23438 14.7675 4.26388 14.7676 8.00098C14.7676 11.7381 11.7381 14.7676 8.00098 14.7676C4.26388 14.7675 1.23438 11.7381 1.23438 8.00098C1.23441 4.2639 4.2639 1.23441 8.00098 1.23438Z" stroke="black" stroke-opacity="0.14" stroke-linecap="round" stroke-linejoin="round"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M5.57417 5.57613C5.80849 5.34181 6.18839 5.34181 6.4227 5.57613L7.99844 7.15186L9.57417 5.57613C9.80849 5.34181 10.1884 5.34181 10.4227 5.57613C10.657 5.81044 10.657 6.19034 10.4227 6.42465L8.84697 8.00039L10.4227 9.57613C10.657 9.81044 10.657 10.1903 10.4227 10.4247C10.1884 10.659 9.80849 10.659 9.57417 10.4247L7.99844 8.84892L6.4227 10.4247C6.18839 10.659 5.80849 10.659 5.57417 10.4247C5.33986 10.1903 5.33986 9.81044 5.57417 9.57613L7.14991 8.00039L5.57417 6.42465C5.33986 6.19034 5.33986 5.81044 5.57417 5.57613Z" fill="currentColor"/>
</g>
<defs>
<clipPath id="clip0_474_13838">
<rect width="16" height="16" fill="white"/>
</clipPath>
</defs>
</svg>`,$p=Ee`<svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none">
  <path d="M14.0272 3.07026C14.2875 2.80991 14.7095 2.80991 14.9699 3.07026C15.2302 3.33061 15.2302 3.75262 14.9699 4.01297L6.7199 12.263C6.45955 12.5233 6.03754 12.5233 5.77719 12.263L2.02719 8.51297L1.98161 8.46219C1.76805 8.20034 1.78311 7.81434 2.02719 7.57026C2.27126 7.32619 2.65727 7.31112 2.91911 7.52469L2.9699 7.57026L6.24854 10.8489L14.0272 3.07026Z" fill="white"/>
</svg>`,qp=Ee`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
  <path d="M8.0013 2C8.73768 2 9.33464 2.59695 9.33464 3.33333C9.33464 4.06971 8.73768 4.66667 8.0013 4.66667C7.26492 4.66667 6.66797 4.06971 6.66797 3.33333C6.66797 2.59695 7.26492 2 8.0013 2ZM8.0013 6.66667C8.73768 6.66667 9.33464 7.26362 9.33464 8C9.33463 8.73637 8.73768 9.33333 8.0013 9.33333C7.26493 9.33333 6.66798 8.73637 6.66797 8C6.66797 7.26362 7.26492 6.66667 8.0013 6.66667ZM8.0013 11.3333C8.73768 11.3333 9.33464 11.9303 9.33464 12.6667C9.33463 13.403 8.73768 14 8.0013 14C7.26493 14 6.66797 13.403 6.66797 12.6667C6.66797 11.9303 7.26492 11.3333 8.0013 11.3333Z" fill="currentColor"/>
</svg>`;function it(t){return`element-edit-panel-view-${t}`}class eZ extends Bl{constructor(e,n){super(e),this.se=n,this.opacity=0,this.handleCloseWhenEscape=l=>{l.key==="Escape"&&this.destroy()},this.handleClickOutside=l=>{const i=l.composedPath();i[0]!==this.triggerEl&&(!this.panelEl||!i.includes(this.panelEl))&&this.destroy()},this.isMounted=!1}get template(){return O`<style>
				.${it("root")} {
					border-radius: 12px;
					border: 0.5px solid var(--border-dark);
					background: var(--background-menu-white);
					box-shadow: 0px 4px 11px 0px var(--shadow-M);
					backdrop-filter: blur(40px);
					display: flex;
					gap: 2px;
					align-items: center;
					width: 158px;
					padding: 4px;
				}
				.${it("button")} {
					flex: 1;
					min-width: 0;
					display: flex;
					padding: 6px 8px;
					justify-content: center;
					align-items: center;
					gap: 4px;
					border-radius: 8px;
					background: transparent;
					cursor: pointer;
					font-size: 13px;
					font-weight: 500;
					line-height: 18px;
					border: none;
				}
				.${it("button")}:hover {
					background: var(--fill-tsp-gray-main);
				}

				.${it("button-default")} {
					color: var(--text-primary);
				}
				.${it("button-danger")} {
					color: var(--function-error);
				}
				.${it("divider")} {
					width: 1px;
					height: 14.5px;
					background: var(--border-main);
					display: flex;
				}
			</style>
			<lit-popup ${Qt(this.handleSetRootRef.bind(this))}>
				<div
					class=${it("root")}
					style=${zp({opacity:this.opacity})}
				>
					<button
						class=${tt({[it("button")]:!0,[it("button-default")]:!0})}
						@click=${this.handleQuickActionClick.bind(this,we.COPY)}
					>
						${O`${Hp} Copy`}
					</button>
					<span class=${it("divider")}></span>
					<button
						class=${tt({[it("button")]:!0,[it("button-danger")]:!0})}
						@click=${this.handleQuickActionClick.bind(this,we.DELETE)}
					>
						${O`${Dp} Delete`}
					</button>
				</div>
			</lit-popup> `}show(e,n){this.triggerEl=e,this.isMounted=!0,this.render(),setTimeout(()=>{this.opacity=1,this.render()},0),this.panelEl&&(this.panelEl.setAnchor(this.triggerEl),this.panelEl.open(n)),this.se.hasDirectTextContent(this.triggerEl)?this.triggerEl.classList.add(Q.onlyTextNode):this.triggerEl.classList.add(Q.spaceEditorHighlight),this.domEditor=new ve(e,this.se),document.addEventListener("keydown",this.handleCloseWhenEscape),document.addEventListener("mousedown",this.handleClickOutside)}destroy(){this.isMounted&&(document.removeEventListener("keydown",this.handleCloseWhenEscape),document.removeEventListener("mousedown",this.handleClickOutside),this.triggerEl.classList.remove(Q.spaceEditorHighlight),this.triggerEl.classList.remove(Q.onlyTextNode),this.opacity=0,this.render(),super.destroy(),this.isMounted=!1)}handleQuickActionClick(e){const n=e===we.COPY;if(n){if(!this.domEditor.copyElement(this.triggerEl))return}else this.domEditor.handleQuickActionClick(e);const l=this.se.createPatch(this.triggerEl,n?"copy":void 0);l&&this.se.debouncedAddPatched(l),this.destroy()}handleSetRootRef(e){e instanceof zi&&(this.panelEl=e)}}const At=(()=>{/*!
* Copyright (c) 2021-2024 Momo Bassit.
* Licensed under the MIT License (MIT)
* https://github.com/mdbassit/Coloris
* Version: 0.24.0
* NPM: https://github.com/melloware/coloris-npm
*/return((t,e,n,l)=>{const i=e.createElement("canvas").getContext("2d"),r={r:0,g:0,b:0,h:0,s:0,v:0,a:1};let o,a,c,d,s,u,h,g,b,m,f,p,A,X,y,I,S={};const G={el:"[data-coloris]",parent:"body",theme:"default",themeMode:"light",rtl:!1,wrap:!0,margin:2,format:"hex",formatToggle:!1,swatches:[],swatchesOnly:!1,alpha:!0,forceAlpha:!1,focusInput:!0,selectInput:!1,inline:!1,defaultColor:"#000000",clearButton:!1,clearLabel:"Clear",closeButton:!1,closeLabel:"Close",onChange:()=>l,a11y:{open:"Open color picker",close:"Close color picker",clear:"Clear the selected color",marker:"Saturation: {s}. Brightness: {v}.",hueSlider:"Hue slider",alphaSlider:"Opacity slider",input:"Color value field",format:"Color format",swatch:"Color swatch",instruction:"Saturation and brightness selector. Use up, down, left and right arrow keys to select."}},B={};let v="",J={},w=!1;function L(V){if(typeof V=="object")for(const R in V)switch(R){case"el":We(V.el),V.wrap!==!1&&Be(V.el);break;case"parent":o=V.parent instanceof HTMLElement?V.parent:e.querySelector(V.parent),o&&(o.appendChild(a),G.parent=V.parent,o===e.body&&(o=l));break;case"themeMode":G.themeMode=V.themeMode,V.themeMode==="auto"&&t.matchMedia&&t.matchMedia("(prefers-color-scheme: dark)").matches&&(G.themeMode="dark");case"theme":V.theme&&(G.theme=V.theme),a.className=`clr-picker clr-${G.theme} clr-${G.themeMode}`,G.inline&&ye();break;case"rtl":G.rtl=!!V.rtl,Array.from(Kl().getElementsByClassName("clr-field")).forEach(Y=>Y.classList.toggle("clr-rtl",G.rtl));break;case"margin":V.margin*=1,G.margin=isNaN(V.margin)?G.margin:V.margin;break;case"wrap":V.el&&V.wrap&&Be(V.el);break;case"formatToggle":G.formatToggle=!!V.formatToggle,Ke("clr-format").style.display=G.formatToggle?"block":"none",G.formatToggle&&(G.format="auto");break;case"swatches":if(Array.isArray(V.swatches)){const Y=Ke("clr-swatches"),j=e.createElement("div");Y.textContent="",V.swatches.forEach((re,Ze)=>{const ne=e.createElement("button");ne.setAttribute("type","button"),ne.setAttribute("id",`clr-swatch-${Ze}`),ne.setAttribute("aria-labelledby",`clr-swatch-label clr-swatch-${Ze}`),ne.style.color=re,ne.textContent=re,j.appendChild(ne)}),V.swatches.length&&Y.appendChild(j),G.swatches=V.swatches.slice()}break;case"swatchesOnly":G.swatchesOnly=!!V.swatchesOnly,a.setAttribute("data-minimal",G.swatchesOnly);break;case"alpha":G.alpha=!!V.alpha,a.setAttribute("data-alpha",G.alpha);break;case"inline":if(G.inline=!!V.inline,a.setAttribute("data-inline",G.inline),G.inline){const Y=V.defaultColor||G.defaultColor;X=$e(Y),ye(),De(Y)}break;case"clearButton":typeof V.clearButton=="object"&&(V.clearButton.label&&(G.clearLabel=V.clearButton.label,h.innerHTML=G.clearLabel),V.clearButton=V.clearButton.show),G.clearButton=!!V.clearButton,h.style.display=G.clearButton?"block":"none";break;case"clearLabel":G.clearLabel=V.clearLabel,h.innerHTML=G.clearLabel;break;case"closeButton":G.closeButton=!!V.closeButton,G.closeButton?a.insertBefore(g,s):s.appendChild(g);break;case"closeLabel":G.closeLabel=V.closeLabel,g.innerHTML=G.closeLabel;break;case"a11y":const E=V.a11y;let F=!1;if(typeof E=="object")for(const Y in E)E[Y]&&G.a11y[Y]&&(G.a11y[Y]=E[Y],F=!0);if(F){const Y=Ke("clr-open-label"),j=Ke("clr-swatch-label");Y.innerHTML=G.a11y.open,j.innerHTML=G.a11y.swatch,g.setAttribute("aria-label",G.a11y.close),h.setAttribute("aria-label",G.a11y.clear),b.setAttribute("aria-label",G.a11y.hueSlider),f.setAttribute("aria-label",G.a11y.alphaSlider),u.setAttribute("aria-label",G.a11y.input),c.setAttribute("aria-label",G.a11y.instruction)}break;default:G[R]=V[R]}}function $(V,R){typeof V=="string"&&typeof R=="object"&&(B[V]=R,w=!0)}function q(V){delete B[V],Object.keys(B).length===0&&(w=!1,V===v&&pe())}function Ae(V){if(w){const R=["el","wrap","rtl","inline","defaultColor","a11y"];for(let E in B){const F=B[E];if(V.matches(E)){v=E,J={},R.forEach(Y=>delete F[Y]);for(let Y in F)J[Y]=Array.isArray(G[Y])?G[Y].slice():G[Y];L(F);break}}}}function pe(){Object.keys(J).length>0&&(L(J),v="",J={})}function We(V){V instanceof HTMLElement&&(V=[V]),Array.isArray(V)?V.forEach(R=>{ie(R,"click",Ue),ie(R,"input",Ve)}):(ie(e,"click",V,Ue),ie(e,"input",V,Ve))}function Ue(V){G.inline||(Ae(V.target),A=V.target,y=A.value,X=$e(y),a.classList.add("clr-open"),ye(),De(y),(G.focusInput||G.selectInput)&&(u.focus({preventScroll:!0}),u.setSelectionRange(A.selectionStart,A.selectionEnd)),G.selectInput&&u.select(),(I||G.swatchesOnly)&&Fr().shift().focus(),A.dispatchEvent(new Event("open",{bubbles:!0})))}function ye(){if(!a||!A&&!G.inline)return;const V=o,R=t.scrollY,E=a.offsetWidth,F=a.offsetHeight,Y={left:!1,top:!1};let j,re,Ze,ne={x:0,y:0};if(V&&(j=t.getComputedStyle(V),re=parseFloat(j.marginTop),Ze=parseFloat(j.borderTopWidth),ne=V.getBoundingClientRect(),ne.y+=Ze+R),!G.inline){const _e=A.getBoundingClientRect();let Xt=_e.x,Bt=R+_e.y+_e.height+G.margin;V?(Xt-=ne.x,Bt-=ne.y,Xt+E>V.clientWidth&&(Xt+=_e.width-E,Y.left=!0),Bt+F>V.clientHeight-re&&F+G.margin<=_e.top-(ne.y-R)&&(Bt-=_e.height+F+G.margin*2,Y.top=!0),Bt+=V.scrollTop):(Xt+E>e.documentElement.clientWidth&&(Xt+=_e.width-E,Y.left=!0),Bt+F-R>e.documentElement.clientHeight&&F+G.margin<=_e.top&&(Bt=R+_e.y-F-G.margin,Y.top=!0)),a.classList.toggle("clr-left",Y.left),a.classList.toggle("clr-top",Y.top),a.style.left=`${Xt}px`,a.style.top=`${Bt}px`,ne.x+=a.offsetLeft,ne.y+=a.offsetTop}S={width:c.offsetWidth,height:c.offsetHeight,x:c.offsetLeft+ne.x,y:c.offsetTop+ne.y}}function Be(V){V instanceof HTMLElement?x(V):Array.isArray(V)?V.forEach(x):e.querySelectorAll(V).forEach(x)}function x(V){const R=V.parentNode;if(!R.classList.contains("clr-field")){const E=e.createElement("div");let F="clr-field";(G.rtl||V.classList.contains("clr-rtl"))&&(F+=" clr-rtl"),E.innerHTML='<button type="button" aria-labelledby="clr-open-label"></button>',R.insertBefore(E,V),E.className=F,E.style.color=V.value,E.appendChild(V)}}function Ve(V){const R=V.target.parentNode;R.classList.contains("clr-field")&&(R.style.color=V.target.value)}function ee(V){if(A&&!G.inline){const R=A;V&&(A=l,y!==R.value&&(R.value=y,R.dispatchEvent(new Event("input",{bubbles:!0})))),setTimeout(()=>{y!==R.value&&R.dispatchEvent(new Event("change",{bubbles:!0}))}),a.classList.remove("clr-open"),w&&pe(),R.dispatchEvent(new Event("close",{bubbles:!0})),G.focusInput&&R.focus({preventScroll:!0}),A=l}}function De(V){const R=qs(V),E=$s(R);Le(E.s,E.v),Tn(R,E),b.value=E.h,a.style.color=`hsl(${E.h}, 100%, 50%)`,m.style.left=`${E.h/360*100}%`,d.style.left=`${S.width*E.s/100}px`,d.style.top=`${S.height-S.height*E.v/100}px`,f.value=E.a*100,p.style.left=`${E.a*100}%`}function $e(V){const R=V.substring(0,3).toLowerCase();return R==="rgb"||R==="hsl"?R:"hex"}function me(V){V=V!==l?V:u.value,A&&(A.value=V,A.dispatchEvent(new Event("input",{bubbles:!0}))),G.onChange&&G.onChange.call(t,V,A),e.dispatchEvent(new CustomEvent("coloris:pick",{detail:{color:V,currentEl:A}}))}function le(V,R){const E={h:b.value*1,s:V/S.width*100,v:100-R/S.height*100,a:f.value/100},F=Os(E);Le(E.s,E.v),Tn(F,E),me()}function Le(V,R){let E=G.a11y.marker;V=V.toFixed(1)*1,R=R.toFixed(1)*1,E=E.replace("{s}",V),E=E.replace("{v}",R),d.setAttribute("aria-label",E)}function ot(V){return{pageX:V.changedTouches?V.changedTouches[0].pageX:V.pageX,pageY:V.changedTouches?V.changedTouches[0].pageY:V.pageY}}function je(V){const R=ot(V);let E=R.pageX-S.x,F=R.pageY-S.y;o&&(F+=o.scrollTop),ut(E,F),V.preventDefault(),V.stopPropagation()}function cn(V,R){let E=d.style.left.replace("px","")*1+V,F=d.style.top.replace("px","")*1+R;ut(E,F)}function ut(V,R){V=V<0?0:V>S.width?S.width:V,R=R<0?0:R>S.height?S.height:R,d.style.left=`${V}px`,d.style.top=`${R}px`,le(V,R),d.focus()}function Tn(V,R){V===void 0&&(V={}),R===void 0&&(R={});let E=G.format;for(const Ze in V)r[Ze]=V[Ze];for(const Ze in R)r[Ze]=R[Ze];const F=eu(r),Y=F.substring(0,7);switch(d.style.color=Y,p.parentNode.style.color=Y,p.style.color=F,s.style.color=F,c.style.display="none",c.offsetHeight,c.style.display="",p.nextElementSibling.style.display="none",p.nextElementSibling.offsetHeight,p.nextElementSibling.style.display="",E==="mixed"?E=r.a===1?"hex":"rgb":E==="auto"&&(E=X),E){case"hex":u.value=F;break;case"rgb":u.value=tu(r);break;case"hsl":u.value=nu(Ps(r));break}var j=typeof G.parent=="object"?G.parent:e;const re=j.querySelector(`.clr-format [value="${E}"]`);re&&(re.checked=!0)}function js(){const V=b.value*1,R=d.style.left.replace("px","")*1,E=d.style.top.replace("px","")*1;a.style.color=`hsl(${V}, 100%, 50%)`,m.style.left=`${V/360*100}%`,le(R,E)}function _s(){const V=f.value/100;p.style.left=`${V*100}%`,Tn({a:V}),me()}function Os(V){const R=V.s/100,E=V.v/100;let F=R*E,Y=V.h/60,j=F*(1-n.abs(Y%2-1)),re=E-F;F=F+re,j=j+re;const Ze=n.floor(Y)%6,ne=[F,j,re,re,j,F][Ze],_e=[j,F,F,j,re,re][Ze],Xt=[re,re,j,F,F,j][Ze];return{r:n.round(ne*255),g:n.round(_e*255),b:n.round(Xt*255),a:V.a}}function Ps(V){const R=V.v/100,E=R*(1-V.s/100/2);let F;return E>0&&E<1&&(F=n.round((R-E)/n.min(E,1-E)*100)),{h:V.h,s:F||0,l:n.round(E*100),a:V.a}}function $s(V){const R=V.r/255,E=V.g/255,F=V.b/255,Y=n.max(R,E,F),j=n.min(R,E,F),re=Y-j,Ze=Y;let ne=0,_e=0;return re&&(Y===R&&(ne=(E-F)/re),Y===E&&(ne=2+(F-R)/re),Y===F&&(ne=4+(R-E)/re),Y&&(_e=re/Y)),ne=n.floor(ne*60),{h:ne<0?ne+360:ne,s:n.round(_e*100),v:n.round(Ze*100),a:V.a}}function qs(V){const R=/^((rgba)|rgb)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i;let E,F;return i.fillStyle="#000",i.fillStyle=V,E=R.exec(i.fillStyle),E?F={r:E[3]*1,g:E[4]*1,b:E[5]*1,a:E[6]*1}:(E=i.fillStyle.replace("#","").match(/.{2}/g).map(Y=>parseInt(Y,16)),F={r:E[0],g:E[1],b:E[2],a:1}),F}function eu(V){let R=V.r.toString(16),E=V.g.toString(16),F=V.b.toString(16),Y="";if(V.r<16&&(R="0"+R),V.g<16&&(E="0"+E),V.b<16&&(F="0"+F),G.alpha&&(V.a<1||G.forceAlpha)){const j=V.a*255|0;Y=j.toString(16),j<16&&(Y="0"+Y)}return"#"+R+E+F+Y}function tu(V){return!G.alpha||V.a===1&&!G.forceAlpha?`rgb(${V.r}, ${V.g}, ${V.b})`:`rgba(${V.r}, ${V.g}, ${V.b}, ${V.a})`}function nu(V){return!G.alpha||V.a===1&&!G.forceAlpha?`hsl(${V.h}, ${V.s}%, ${V.l}%)`:`hsla(${V.h}, ${V.s}%, ${V.l}%, ${V.a})`}function lu(){Kl().querySelector("#clr-picker")||(o=l,a=e.createElement("div"),a.setAttribute("id","clr-picker"),a.className="clr-picker",a.innerHTML=`<input id="clr-color-value" name="clr-color-value" class="clr-color" type="text" value="" spellcheck="false" aria-label="${G.a11y.input}"><div id="clr-color-area" class="clr-gradient" role="application" aria-label="${G.a11y.instruction}"><div id="clr-color-marker" class="clr-marker" tabindex="0"></div></div><div class="clr-hue"><input id="clr-hue-slider" name="clr-hue-slider" type="range" min="0" max="360" step="1" aria-label="${G.a11y.hueSlider}"><div id="clr-hue-marker"></div></div><div class="clr-alpha"><input id="clr-alpha-slider" name="clr-alpha-slider" type="range" min="0" max="100" step="1" aria-label="${G.a11y.alphaSlider}"><div id="clr-alpha-marker"></div><span></span></div><div id="clr-format" class="clr-format"><fieldset class="clr-segmented"><legend>${G.a11y.format}</legend><input id="clr-f1" type="radio" name="clr-format" value="hex"><label for="clr-f1">Hex</label><input id="clr-f2" type="radio" name="clr-format" value="rgb"><label for="clr-f2">RGB</label><input id="clr-f3" type="radio" name="clr-format" value="hsl"><label for="clr-f3">HSL</label><span></span></fieldset></div><div id="clr-swatches" class="clr-swatches"></div><button type="button" id="clr-clear" class="clr-clear" aria-label="${G.a11y.clear}">${G.clearLabel}</button><div id="clr-color-preview" class="clr-preview"><button type="button" id="clr-close" class="clr-close" aria-label="${G.a11y.close}">${G.closeLabel}</button></div><span id="clr-open-label" hidden>${G.a11y.open}</span><span id="clr-swatch-label" hidden>${G.a11y.swatch}</span>`,e.body.appendChild(a),c=Ke("clr-color-area"),d=Ke("clr-color-marker"),h=Ke("clr-clear"),g=Ke("clr-close"),s=Ke("clr-color-preview"),u=Ke("clr-color-value"),b=Ke("clr-hue-slider"),m=Ke("clr-hue-marker"),f=Ke("clr-alpha-slider"),p=Ke("clr-alpha-marker"),We(G.el),Be(G.el),ie(a,"mousedown",V=>{a.classList.remove("clr-keyboard-nav"),V.stopPropagation()}),ie(c,"mousedown",V=>{ie(e,"mousemove",je)}),ie(c,"contextmenu",V=>{V.preventDefault()}),ie(c,"touchstart",V=>{e.addEventListener("touchmove",je,{passive:!1})}),ie(d,"mousedown",V=>{ie(e,"mousemove",je)}),ie(d,"touchstart",V=>{e.addEventListener("touchmove",je,{passive:!1})}),ie(u,"change",V=>{const R=u.value;if(A||G.inline){const E=R===""?R:De(R);me(E)}}),ie(h,"click",V=>{me(""),ee()}),ie(g,"click",V=>{me(),ee()}),ie(Ke("clr-format"),"click",".clr-format input",V=>{X=V.target.value,Tn(),me()}),ie(a,"click",".clr-swatches button",V=>{De(V.target.textContent),me(),G.swatchesOnly&&ee()}),ie(e,"mouseup",V=>{e.removeEventListener("mousemove",je)}),ie(e,"touchend",V=>{e.removeEventListener("touchmove",je)}),ie(e,"mousedown",V=>{I=!1,a.classList.remove("clr-keyboard-nav"),ee()}),ie(e,"keydown",V=>{const R=V.key,E=V.target,F=V.shiftKey;if(R==="Escape"?ee(!0):["Tab","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(R)&&(I=!0,a.classList.add("clr-keyboard-nav")),R==="Tab"&&E.matches(".clr-picker *")){const j=Fr(),re=j.shift(),Ze=j.pop();F&&E===re?(Ze.focus(),V.preventDefault()):!F&&E===Ze&&(re.focus(),V.preventDefault())}}),ie(e,"click",".clr-field button",V=>{w&&pe(),V.target.nextElementSibling.dispatchEvent(new Event("click",{bubbles:!0}))}),ie(d,"keydown",V=>{const R={ArrowUp:[0,-1],ArrowDown:[0,1],ArrowLeft:[-1,0],ArrowRight:[1,0]};Object.keys(R).includes(V.key)&&(cn(...R[V.key]),V.preventDefault())}),ie(c,"click",je),ie(b,"input",js),ie(f,"input",_s))}function Fr(){return Array.from(a.querySelectorAll("input, button")).filter(E=>!!E.offsetWidth)}function Ke(V){var R=Kl();return R.querySelector("#"+V)}function Kl(){return typeof G.parent=="object"?G.parent:e}function ie(V,R,E,F){const Y=Element.prototype.matches||Element.prototype.msMatchesSelector;typeof E=="string"?V.addEventListener(R,j=>{Y.call(j.target,E)&&F.call(j.target,j)}):(F=E,V.addEventListener(R,F))}function Mn(V,R){R=R!==l?R:[],e.readyState!=="loading"?V(...R):e.addEventListener("DOMContentLoaded",()=>{V(...R)})}NodeList!==l&&NodeList.prototype&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);function iu(V,R){A=R,y=A.value,Ae(R),X=$e(V),ye(),De(V),me(),y!==V&&A.dispatchEvent(new Event("change",{bubbles:!0}))}const Tl=(()=>{const V={init:lu,set:L,wrap:Be,close:ee,setInstance:$,setColor:iu,removeInstance:q,updatePosition:ye,ready:Mn};function R(E){Mn(()=>{E&&(typeof E=="string"?We(E):L(E))})}for(const E in V)R[E]=function(){for(var F=arguments.length,Y=new Array(F),j=0;j<F;j++)Y[j]=arguments[j];Mn(V[E],Y)};return Mn(()=>{t.addEventListener("resize",E=>{R.updatePosition()}),t.addEventListener("scroll",E=>{R.updatePosition()})}),R})();return Tl.coloris=Tl,Tl})(window,document,Math)})();At.coloris;At.init;At.set;At.wrap;At.close;At.setInstance;At.removeInstance;At.updatePosition;function Ge(t){return`text-edit-panel-view-${t}`}class tZ extends Bl{constructor(e,n){super(e),this.se=n,this.textContent="",this.currentTextColor="",this.handleCloseWhenEscape=l=>{l.key==="Escape"&&this.destroy()},this.handleClickOutside=l=>{const i=l.composedPath();(!this.panelEl||!i.includes(this.panelEl))&&this.destroy()},this.handleColorChange=l=>{const i=l.detail.color;this.domEditor.handleQuickActionClick(we.COLOR,i);const r=this.se.createPatch(this.triggerEl);this.se.debouncedAddPatched(r),this.currentTextColor=i,this.render()}}get template(){return O`
			<style>
				${Hs} .${Ge("root")} {
					border-radius: 12px;
					border: 0.5px solid var(--border-dark);
					background: var(--background-menu-white);
					box-shadow: 0px 4px 11px 0px var(--shadow-M);
					backdrop-filter: blur(40px);
					display: flex;
					flex-direction: column;
					width: 382px;
				}

				.${Ge("toolbar")} {
					display: flex;
					align-items: center;
					gap: 8px;
					padding: 12px 12px 0px 8px;
				}

				.${Ge("tool-item")} {
					background: transparent;
					border: none;
					cursor: pointer;
					width: 28px;
					height: 28px;
					display: flex;
					align-items: center;
					justify-content: center;
					border-radius: 6px;
				}

				.${Ge("tool-item-color")} {
					position: relative;
				}

				.${Ge("tool-item-color")} .clr-field {
					position: absolute;
					inset: 0;
					opacity: 0;
				}

				.${Ge("tool-item-color")} .clr-field * {
					cursor: pointer;
				}

				.${Ge("tool-item-color")} .clr-field input {
					width: 100%;
					height: 100%;
				}

				.${Ge("tool-item-active")} {
					color: var(--icon-brand);
				}

				.${Ge("tool-item")}:hover {
					background: var(--fill-tsp-gray-main);
				}

				.${Ge("textarea-box")} {
					padding: 10px 12px 12px;
					overflow: hidden;
				}

				.${Ge("textarea")} {
					display: flex;
					width: 100%;
					min-height: 100px;
					max-height: 530px;
					overflow-y: auto;
					resize: none;
					padding: 12px 12px 12px 16px;
					border-radius: 10px;
					border: 1.5px solid transparent;
					background: var(--fill-tsp-white-main);
					color: var(--text-primary);
					font-size: 14px;
					line-height: 22px;
					letter-spacing: -0.154px;
				}

				.${Ge("textarea")}:focus-within {
					border-color: var(--border-dark);
				}
			</style>
			<lit-popup ${Qt(this.handleSetRootRef.bind(this))}>
				<div class=${Ge("root")}>
					<div class=${Ge("toolbar")}>
						${Qp.filter(e=>e.type!==we.DELETE&&e.type!==we.COPY).map(({type:e,label:n})=>{const l=()=>{if(e===we.BOLD)return O`${Lp}`;if(e===we.ITALIC)return O`${Tp}`;if(e===we.UNDERLINE)return O`${Kp}`;if(e===we.COLOR)return O`${Mp(this.currentTextColor)}`},i=()=>{if(!this.triggerEl)return!1;const r=this.triggerEl.cloneNode(!0);[Q.spaceEditorHighlight,Q.onlyTextNode,Q.textNodeActive].forEach(c=>{r.classList.remove(c)}),r.classList.add(Q.hidden),document.body.appendChild(r);const a=getComputedStyle(r);return setTimeout(()=>{document.body.removeChild(r)},0),e===we.BOLD?ve.isTextBolded(a.fontWeight):e===we.ITALIC?ve.isTextItalic(a.fontStyle):e===we.UNDERLINE?ve.isTextUnderlined(a.textDecorationLine):!1};return e===we.COLOR?O`<label
										class=${tt({[Ge("tool-item")]:!0,[Ge("tool-item-color")]:!0})}
										style="position:relative;"
									>
										${l()}
										<input id="coloris" ${Qt(this.handleInitColorPicker.bind(this))} .value=${this.currentTextColor} />
									</label>`:O`<button
									class=${tt({[Ge("tool-item")]:!0,[Ge("tool-item-active")]:i(),"tooltip-trigger-css":!0})}
									@click=${this.handleQuickActionClick.bind(this,e)}
									data-tooltip=${n}
								>
									${l()}
								</button>`})}
					</div>
					<div class=${Ge("textarea-box")}>
						<lit-textarea
							auto-resize
							autofocus
							class=${Ge("textarea")}
							value=${this.textContent}
							@input=${this.handleInput.bind(this)}
						></lit-textarea>
					</div>
				</div>
			</lit-popup>
		`}show(e,n){this.triggerEl=e,this.textContent=e.textContent??"",this.currentTextColor=getComputedStyle(e).color,this.render(),this.panelEl&&(this.panelEl.setAnchor(this.triggerEl),this.panelEl.open(n)),this.triggerEl.classList.add(Q.textNodeActive),this.domEditor=new ve(e,this.se),document.addEventListener("keydown",this.handleCloseWhenEscape),document.addEventListener("mousedown",this.handleClickOutside),document.addEventListener("coloris:pick",this.handleColorChange)}destroy(){var e;document.removeEventListener("keydown",this.handleCloseWhenEscape),document.removeEventListener("mousedown",this.handleClickOutside),document.removeEventListener("coloris:pick",this.handleColorChange),(e=this.triggerEl)==null||e.classList.remove(Q.textNodeActive),super.destroy()}handleQuickActionClick(e){this.domEditor.handleQuickActionClick(e);const n=this.se.createPatch(this.triggerEl);this.se.debouncedAddPatched(n),e===we.DELETE&&this.destroy(),this.render()}handleInput(e){const n=e.target;if(n instanceof HTMLTextAreaElement){this.textContent=n.value,this.render(),this.domEditor.updateTextContent(this.textContent);const l=this.se.createPatch(this.triggerEl);this.se.debouncedAddPatched(l)}}handleSetRootRef(e){e instanceof zi&&(this.panelEl=e)}handleInitColorPicker(e){e instanceof HTMLInputElement&&(At.init(),At.coloris({el:e,alpha:!0,swatches:["#FFF","#000000","#FF0001","#FF5100","#FFC700","#00B336","#00CBFF","#65BAFF","#B400D8","#86A3AB","#4F5559"]}))}}function T(t){return`footer-toolbar-${t}`}class nZ extends Bl{constructor(e){super(e,!1),this.container=e,this.hasPrivilege=!1,this.isRestoring=!1,this.isShowHistoryBtn=!1,this.isPopoverVisible=!1,this.init()}get template(){if(!this.hasPrivilege)return O`<footer-watermark></footer-watermark>`;const e=()=>{if(qe.viewType==="history"){const n=O`<lit-dialog ${Qt(l=>this.handleSetDialogRef(l))} title="Restore to this version?">
					<p>This will overwrite existing content and affect the current task.</p>
					<div slot="footer" class=${T("dialog-footer")}>
						<button class=${T("dialog-button")} @click=${()=>{var l;return(l=this.dialogRef)==null?void 0:l.close()}}>Cancel</button>
						<button
							class=${tt({[T("dialog-button")]:!0,[T("dialog-button-danger")]:!0})}
							?disabled=${this.isRestoring}
							@click=${this.handleRestoreConfirm.bind(this)}
						>
							${this.isRestoring?yu():""} Restore
						</button>
					</div>
				</lit-dialog>`;return O`<style>
						.${T("restore-container")} {
							display: flex;
							align-items: center;
							gap: 6px;
						}

						.${T("restore-cancel-btn")} {
							display: flex;
							height: 32px;
							min-width: 64px;
							min-height: 32px;
							padding: 0 8px;
							justify-content: center;
							align-items: center;
							gap: 4px;
							border-radius: 100px;
							border: 1px solid var(--border-dark);
							color: var(--text-primary);
							font-size: 13px;
							font-weight: 500;
							line-height: 18px;
							letter-spacing: -0.091px;
						}

						.${T("restore-confirm-btn")} {
							display: flex;
							min-width: 64px;
							min-height: 32px;
							padding: 6px 8px;
							justify-content: center;
							align-items: center;
							align-content: center;
							gap: 4px 4px;
							flex-wrap: wrap;
							border-radius: 100px;
							background: var(--Button-primary-brand);
							color: var(--text-white);
							font-size: 13px;
							font-weight: 500;
							line-height: 18px;
							letter-spacing: -0.091px;
							border-radius: 999px;
							background: var(--Button-primary-brand);
							color: var(--text-white);
							font-size: 13px;
							font-weight: 500;
							line-height: 18px;
							letter-spacing: -0.091px;
						}

						.${T("restore-cancel-btn")}:hover {
							opacity: 0.85;
						}

						.${T("restore-confirm-btn")}:hover {
							opacity: 0.85;
						}
					</style>
					<div class=${T("restore-container")}>
						<button class=${T("restore-cancel-btn")} @click=${this.handleExitOriginVersion.bind(this)}>Cancel</button>
						<button class=${T("restore-confirm-btn")} @click=${()=>{var l;return(l=this.dialogRef)==null?void 0:l.show()}}>confirm</button>
					</div>
					${n}`}return O`<style>
					.${T("btn-container")} {
						position: relative;
						display: flex;
						border-radius: 99px;
						box-shadow: 0 4px 11px 0 var(--shadow-S);
						backdrop-filter: blur(40px);
						border: 0.5px solid var(--border-main);
					}

					.${T("btn")} {
						display: inline-flex;
						height: 32px;
						padding: 0 10px 0 12px;
						justify-content: center;
						align-items: center;
						gap: 4px;
						flex-shrink: 0;
						cursor: pointer;
						background: var(--background-menu-white);
						border-radius: 99px 0 0 99px;
						backdrop-filter: blur(40px);
						color: var(--text-primary);
						font-size: 13px;
						font-weight: 500;
						line-height: 18px;
						letter-spacing: -0.091px;
					}

					.${T("btn")}:hover {
						background: var(--fill-tsp-white-light);
					}

					.${T("btn-blue")} {
						background: var(--Button-primary-brand);
						color: var(--text-white);
					}

					.${T("btn-blue")}:hover {
						background: var(--Button-primary-brand);
						opacity: 0.85;
					}

					.${T("no-history-btn")} {
						border-radius: 99px;
					}

					.${T("btn-container-right")} {
						padding: 0 8px 0 6px;
						border-left: 1px solid var(--border-main);
						display: flex;
						align-items: center;
						justify-content: center;
						cursor: pointer;
						color: var(--text-primary);
						background: var(--background-menu-white);
						border-radius: 0 99px 99px 0;
					}

					.${T("btn-container-right")}:hover {
						background: var(--fill-tsp-white-light);
					}

					.${T("btn-container-right-blue")} {
						color: var(--text-white);
						background: var(--Button-primary-brand);
						border-radius: 0 99px 99px 0;
						border-left-color: var(--border-white);
					}

					.${T("btn-container-right-blue")}:hover {
						background: var(--Button-primary-brand);
						opacity: 0.85;
					}

					.${T("popover")} {
						position: absolute;
						bottom: calc(100% + 3px);
						right: 0;
						z-index: 1000;
						border-radius: 12px;
						border: 0.5px solid var(--border-dark);
						background: var(--background-menu-white);
						box-shadow: 0 4px 11px 0 var(--shadow-S);
						backdrop-filter: blur(40px);
						width: max-content;
						padding: 8px;
						display: flex;
						height: 36px;
						min-width: 94px;
						min-height: 36px;
						align-items: center;
						gap: 8px;
						cursor: pointer;
						color: var(--text-secondary);
						font-size: 14px;
						line-height: 22px;
						letter-spacing: -0.154px;
						border-radius: 12px;
						user-select: none;
					}

					.${T("popover")}:hover {
						background: var(--fill-tsp-white-main);
					}
				</style>
				<div class=${T("btn-container")}>
					<button
						class=${tt({[T("btn")]:!0,[T("btn-blue")]:qe.viewType==="edit",[T("no-history-btn")]:!this.isShowHistoryBtn})}
						@click="${this.handleToggleEditMode.bind(this)}"
					>
						${qe.viewType==="default"?O`${jp} Tweak`:O`${$p} Finish`}
					</button>
					${this.isShowHistoryBtn?O`<div
								class=${tt({[T("btn-container-right")]:!0,[T("btn-container-right-blue")]:qe.viewType==="edit"})}
								@click=${this.handleTogglePopover.bind(this)}
						  >
								${qp}
						  </div>`:""}
				</div>
				${this.isPopoverVisible?O`
							<div class=${T("popover")} @click=${this.handleViewOriginVersion.bind(this)}>
								${_p} Restore original version
							</div>
					  `:""} `};return O`<style>
				.${T("container")} {
					position: fixed;
					z-index: 999999;
					right: 16px;
					bottom: 16px;
				}

				.${T("dialog-footer")} {
					display: flex;
					justify-content: flex-end;
					gap: 12px;
				}

				.${T("dialog-button")} {
					display: flex;
					height: 36px;
					min-width: 64px;
					min-height: 36px;
					padding: 8px 12px;
					justify-content: center;
					align-items: center;
					gap: 6px;
					cursor: pointer;
					color: var(--text-primary);
					font-size: 14px;
					font-weight: 500;
					line-height: 20px;
					letter-spacing: -0.154px;
					border-radius: 10px;
					border: 1px solid var(--border-btn-main);
					background: transparent;
				}

				.${T("dialog-button")}:disabled {
					opacity: 0.5;
					cursor: not-allowed;
				}

				.${T("dialog-button")}:hover {
					opacity: 0.85;
				}

				.${T("dialog-button-danger")} {
					background: var(--function-error);
					color: var(--text-white);
					border: none;
				}
			</style>
			<div
				class=${tt({[T("container")]:!0,[Q.footerToolbarView]:!0,[T("container-no-privilege")]:!this.hasPrivilege})}
			>
				${e()}
			</div>`}handleRestore(){var e;(e=this.dialogRef)==null||e.show()}async handleRestoreConfirm(){var e,n,l;if(!this.isRestoring)try{this.isRestoring=!0,this.render(),await yl.SpaceService.restoreOriginalSite({spaceUid:Se.spaceId}),(e=this.se)==null||e.restoreToOriginal(),(n=this.dialogRef)==null||n.close(),qe.setViewType(qe.prevViewType),qe.viewType!=="edit"&&((l=this.se)==null||l.toggleToPreviewMode())}catch{}finally{this.isRestoring=!1,this.render()}}async init(){const e=new wp;this.se=e;const n=new URL(window.location.href);let l="default";n.searchParams.get("edit")==="1"?l="edit":n.searchParams.get("history")==="1"&&(l="history"),this.updateIsShowHistoryBtn();const i=async()=>new Promise(o=>{l==="history"?(e.initWithoutApplyPatches(),bi(["history"]),this.isShowHistoryBtn&&qe.setViewType("history"),o(!0)):Nu()&&Se.patchList.length>0?(document.body.style.opacity="0",Fu().then(()=>{e.init(),document.body.style.opacity="1",o(!0)})):(e.init(),o(!0))});let r=!1;Se.patchList.length>0&&(await i(),r=!0);try{l==="edit"&&(this.hasPrivilege=!0,e.toggleEditMode(),qe.setViewType("edit"),this.render()),bi(["edit"])}catch{}if(await Ht.waitReady(),this.hasPrivilege=await Bp,this.render(),this.hasPrivilege){r||await i(),l==="edit"?il.showToast({title:"You're now editing - all changes auto-save",variant:"success"}):l==="history"&&il.showToast({title:"Switched to original version",variant:"success"}),Rn.listenBy(this,"onViewTypeChange",()=>{this.render()}),Rn.listenBy(this,"patchListChange",()=>{this.updateIsShowHistoryBtn(),this.render()});const o=document.createElement("div");o.classList.add(Q.textEditorPanelView);const a=document.createElement("div");a.classList.add(Q.elementEditorPanelView),this.container.appendChild(a),this.container.appendChild(o);const c=new tZ(o,e),d=new eZ(a,e);e.registerViews({textEditPanelView:c,elementEditPanelView:d})}else e.toggleToPreviewMode(),qe.setViewType("default")}destroy(){var e;this.removeClickOutsideListener(),(e=this.se)==null||e.destroy(),super.destroy()}handleViewOriginVersion(){const e=new URL(window.location.href);e.searchParams.append("history","1"),window.location.href=e.toString()}handleExitOriginVersion(){const e=new URL(window.location.href);e.searchParams.delete("history"),window.location.href=e.toString()}handleToggleEditMode(){this.se&&(qe.viewType==="default"?(qe.setViewType("edit"),this.se.toggleEditMode(),il.showToast({title:"You're now editing - all changes auto-save",variant:"success"}),wt({eventName:"edit_click",extData:{type:"space"}})):(qe.setViewType("default"),this.se.toggleToPreviewMode()))}handleSetDialogRef(e){e instanceof Wl&&(this.dialogRef=e)}updateIsShowHistoryBtn(){this.isShowHistoryBtn=(Se.patchList.length??0)>0}handleTogglePopover(){this.isPopoverVisible=!this.isPopoverVisible,this.isPopoverVisible?this.addClickOutsideListener():this.removeClickOutsideListener(),this.render()}addClickOutsideListener(){this.removeClickOutsideListener(),this.clickOutsideHandler=e=>{e.composedPath()[0].closest(`.${T("container")}`)||(this.isPopoverVisible=!1,this.removeClickOutsideListener(),this.render())},document.addEventListener("click",this.clickOutsideHandler)}removeClickOutsideListener(){this.clickOutsideHandler&&(document.removeEventListener("click",this.clickOutsideHandler),this.clickOutsideHandler=void 0)}}const Sl="content-root",lZ=`#${Sl} {
  /* Text Colors */
  --text-primary: #34322d;
  --text-secondary: #535350;
  --text-tertiary: #858481;
  --text-disable: #b9b9b7;
  --text-brand: #0081f2;
  --text-onblack: #ffffff;
  --text-white: #ffffff;
  --text-white-tsp: #ffffff99;
  --theme-text-primary: #262626;
  --logo-color: #34322d;

  /* Background Colors */
  --background-gray-main: #f8f8f7;
  --background-white-main: #ffffff;
  --background-menu-white: #ffffff;
  --background-tsp-menu-white: #ffffff14;
  --background-tsp-card-gray: #37352f0a;
  --background-nav: #ebebeb;
  --background-card: #fafafa;
  --background-mask: #000000a6;
  --background-card-gray: #fafafa;
  --background-preview-mask: #000000d9;

  /* Border Colors */
  --border-main: #0000000f;
  --border-white: #ffffff33;
  --border-btn-main: #0000001f;
  --border-input-active: #0081f280;
  --border-light: #0000000a;
  --border-dark: #0000001f;
  --border-primary: #4f59661f;

  /* Icon Colors */
  --icon-primary: #34322d;
  --icon-secondary: #535350;
  --icon-tertiary: #858481;
  --icon-disable: #b9b9b7;
  --icon-brand: #0081f2;
  --icon-onblack: #ffffff;
  --icon-white: #ffffff;
  --icon-white-tsp: #ffffff99;

  /* Function Colors */
  --function-error: #f25a5a;
  --function-success: #25ba3b;
  --function-warning: #efa201;
  --function-error-tsp: #f25a5a14;
  --function-warning-tsp: #efa2011f;

  /* Fill Colors */
  --fill-blue: #0081f214;
  --fill-tsp-white-main: #37352f0f;
  --fill-tsp-white-dark: #37352f14;
  --fill-tsp-white-light: #37352f0a;
  --fill-tsp-gray-dark: #37352f14;
  --fill-tsp-gray-main: #37352f0a;
  --fill-input-chat: #ffffff;
  --fill-white: #ffffff;
  --fill-black: #28282973;
  --fill-gray: #f8f8f7;

  /* Button Colors */
  --Button-primary-black: #1a1a19;
  --Button-primary-white: #ffffff;
  --Button-primary-brand: #0081f2;
  --Button-primary-brand-disabled: #7cbdf5;
  --Button-secondary-brand: #0081f21a;
  --Button-secondary-error-border: #f25a5a80;
  --Button-secondary-error-fill: #ffffff;
  --Button-secondary-main: #ffffff;
  --Button-secondary-gray: #37352f0f;

  /* Tab Colors */
  --tab-fill: rgba(0, 0, 0, 0.04);
  --tab-active-black: #1a1a19;

  /* Shadow Colors */
  --shadow-L: #0000003d;
  --shadow-M: #0000001f;
  --shadow-S: #00000014;
  --shadow-XS: #0000000f;
  --shadows-inner-0: #ffffff00;
  --shadows-inner-1: #16191d14;
  --shadows-inner-2: #16191d1f;
  --shadows-drop-1: #16191d08;
  --shadows-drop-2: #16191d0a;
  --shadows-drop-3: #16191d14;
  --shadows-drop-4: #16191d1f;
  --shadows-highlight-1: #cce5ff;
  --shadows-highlight-2: #1487fa;
  --shadows-danger-1: #fed7d7;
  --shadows-danger-2: #ee3a3a;
  --shadows-card-border: #16191d1f;
  --shadows-card-border-2: #16191d1f;

  /* Tooltips */
  --Tooltips-main: #000000e6;

  /* Gradual Colors */
  --gradual-white-0: #ffffff00;
  --gradual-gray-100: #ffffff00;
  --gradual-gray-0: #ffffff00;
  --gradual-dark-20: #00000033;

  /** input */
  --fill-input-chat: #ffffff;

  /** gradient */
  --gradient-bg-mask-gray-0: #eaeaeb00;
}

#${Sl}.dark {
  /* Text Colors */
  --text-primary: #dadada;
  --text-secondary: #acacac;
  --text-tertiary: #7f7f7f;
  --text-disable: #5f5f5f;
  --text-brand: #1a93fe;
  --text-onblack: #000000e6;
  --text-white: #ffffff;
  --text-white-tsp: #ffffff99;
  --theme-text-primary: #dbdbdb;
  --logo-color: #dadada;
  /* Background Colors */
  --background-gray-main: #272728;
  --background-white-main: #161618;
  --background-menu-white: #383739;
  --background-tsp-menu-white: #ffffff0f;
  --background-tsp-card-gray: #ffffff0f;
  --background-nav: #212122;
  --background-card: #383739;
  --background-mask: #000000a6;
  --background-card-gray: #383739;
  --background-preview-mask: #000000d9;

  /* Border Colors */
  --border-main: #ffffff14;
  --border-white: #00000014;
  --border-btn-main: #ffffff1a;
  --border-input-active: #1a93fe80;
  --border-light: #ffffff0f;
  --border-dark: #ffffff29;
  --border-primary: #56565f52;

  /* Icon Colors */
  --icon-primary: #dadada;
  --icon-secondary: #acacac;
  --icon-tertiary: #7f7f7f;
  --icon-disable: #5f5f5f;
  --icon-brand: #1a93fe;
  --icon-onblack: #000000d9;
  --icon-white: #ffffff;
  --icon-white-tsp: #ffffff99;

  /* Function Colors */
  --function-error: #eb4d4d;
  --function-success: #5eb92d;
  --function-warning: #ffbf36;
  --function-error-tsp: #eb4d4d14;
  --function-warning-tsp: #ffbf361f;

  /* Fill Colors */
  --fill-blue: #1a93fe1f;
  --fill-tsp-white-main: #ffffff0f;
  --fill-tsp-white-dark: #ffffff1f;
  --fill-tsp-white-light: #ffffff0a;
  --fill-tsp-gray-dark: #00000047;
  --fill-tsp-gray-main: #00000033;
  --fill-input-chat: #363537;
  --fill-white: #3e3d3e;
  --fill-black: #28282973;
  --fill-gray: #444345;

  /* Button Colors */
  --Button-primary-black: #ffffff;
  --Button-primary-white: #ffffff14;
  --Button-primary-brand: #1a93fe;
  --Button-primary-brand-disabled: #215d93;
  --Button-secondary-brand: #1a93fe1f;
  --Button-secondary-error-border: #eb4d4d29;
  --Button-secondary-error-fill: #eb4d4d1f;
  --Button-secondary-main: #ffffff1f;
  --Button-secondary-gray: #ffffff0f;

  /* Tab Colors */
  --tab-fill: rgba(255, 255, 255, 0.06);
  --tab-active-black: #ffffff;

  /* Shadow Colors */
  --shadow-L: #00000066;
  --shadow-M: #0000003d;
  --shadow-S: #00000029;
  --shadow-XS: #0000001f;
  --shadows-inner-0: #ffffff1f;
  --shadows-inner-1: #ffffff14;
  --shadows-inner-2: #ffffff1f;
  --shadows-drop-1: #0000001f;
  --shadows-drop-2: #00000033;
  --shadows-drop-3: #00000047;
  --shadows-drop-4: #0000005c;
  --shadows-highlight-1: #1b61a6;
  --shadows-highlight-2: #1487fa;
  --shadows-danger-1: #8f1919;
  --shadows-danger-2: #ee3a3a;
  --shadows-card-border: #ffffff1f;
  --shadows-card-border-2: #ffffff00;

  /* Tooltips */
  --Tooltips-main: #000000e6;

  /* Gradual Colors */
  --gradual-white-0: #27272800;
  --gradual-gray-100: #444345;
  --gradual-gray-0: #44434500;
  --gradual-dark-20: #ffffff33;

  /** input */
  --fill-input-chat: #363537;

  /** gradient */
  --gradient-bg-mask-gray-0: #1E1E1E00;
}
`,iZ=`/* CSS Reset */
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed,
figure, figcaption, footer, header, hgroup,
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
  font-size: 100%;
  font: inherit;
  vertical-align: baseline;
}

article, aside, details, figcaption, figure,
footer, header, hgroup, menu, nav, section {
  display: block;
}

ol, ul {
  list-style: none;
}

blockquote, q {
  quotes: none;
}

blockquote:before, blockquote:after,
q:before, q:after {
  content: '';
  content: none;
}

table {
  border-collapse: collapse;
  border-spacing: 0;
}

img, picture, video, canvas, svg {
  display: block;
  max-width: 100%;
}

input, button, textarea, select {
  font: inherit;
}

p, h1, h2, h3, h4, h5, h6 {
  overflow-wrap: break-word;
}

a {
  text-decoration: none;
  color: inherit;
}

button {
  background: none;
  border: none;
  cursor: pointer;
}
`,rZ=`
.tooltip-trigger-css {
            position: relative;
        }

        .tooltip-trigger-css::after {
            content: attr(data-tooltip);

            display: flex;
            justify-content: center;
            align-items: center;
            max-width: 280px;
            min-width: 40px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.90);
            border-radius: 12px;

            color: var(--text-white);
            font-size: 12px;
            line-height: 16px;
            word-wrap: break-word;
            white-space: pre-wrap;
            text-align: left;
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(-8px);
            z-index: 10;
            width:max-content;

            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out, visibility 0s linear 0.2s;
        }

        .tooltip-trigger-css.tooltip-trigger-right-css::after {
            left: unset;
            right: 0;
            transform: translateX(0) translateY(-8px);
        }

        .tooltip-trigger-css.tooltip-trigger-right-css:hover::after {
            left: unset;
            right: 0;
            transform: translateX(0) translateY(-8px);
        }

        /* 当触发元素被 hover 或 focus 时显示 tooltip */
        .tooltip-trigger-css:hover::after,
        .tooltip-trigger-css:focus::after {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(-10px); /* 轻微向上移动的动画 */
            transition-delay: 0s, 0s, 0s; /* 确保立即显示，覆盖 visibility 的延迟 */
        }

        /* 确保非交互元素可聚焦，以便 tooltip 可以通过键盘触发 */
        .tooltip-trigger-css:not(button):not(input):not(a[href]) {
            outline: none; /* 移除默认轮廓，如果需要自定义焦点样式 */
        }
        .tooltip-trigger-css:focus {
            /* 自定义焦点样式 (可选) */
            box-shadow: 0 0 0 2px skyblue;
        }`,oZ=`
${lZ}

${iZ}

${rZ}

* {
  box-sizing: border-box;
}

p {
margin-block-start:0;
margin-block-end:0;
}

#${Sl} {
font-family: 'SF Pro', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif
}
`;let ll;class aZ extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const e=this.shadowRoot,n=document.createElement("div");n.id=Sl,e.appendChild(n);const l=document.createElement("style");l.textContent=`${oZ} 
`,n.appendChild(l),ll=new nZ(n),il.initRoot(n),wt({eventName:"session_file_view",extData:{type:"space"}}),wt({eventName:"manus_space_show"})}disconnectedCallback(){ll==null||ll.destroy()}}function _(t){return`footer-watermark-${t}`}class cZ extends HTMLElement{constructor(){super(),this.isClosed=!1,this.attachShadow({mode:"open"}),this.render()}get template(){return this.isClosed=localStorage.getItem("embedClosed")==="true",this.isClosed?O``:Xc()?O` <style>
					.${_("root")} {
						z-index: 999999;
						display: flex;
						padding: 4px 4px 4px 12px;
						align-items: center;
						position: fixed;
						right: 16px;
						bottom: 16px;
						border-radius: 999px;
						background: var(--Button-primary-black);
						display: flex;
						height: 28px;
						padding: 6px 8px;
						justify-content: center;
						align-items: center;
						gap: 2px;
						color: var(--text-white);
						font-size: 12px;
						line-height: 16px;
						cursor: pointer;
						user-select: none;
						box-sizing: border-box;
					}

					.${_("dialog-footer")} {
						width: 100%;
						display: flex;
						align-items: flex-start;
						gap: 12px;
						align-self: stretch;
					}

					.${_("dialog-button")} {
						display: flex;
						width: 119px;
						min-width: 114px;
						min-height: 48px;
						padding: 6px;
						justify-content: center;
						align-items: center;
						gap: 6px;
						border-radius: 12px;
						background: rgba(55, 53, 47, 0.06);
						color: #34322d;
						font-size: 15px;
						font-style: normal;
						font-weight: 600;
						border: none;
					}
					.${_("dialog-button-primary")} {
						background: #1a1a19;
						color: #fff;
						flex: 1;
					}

					.${_("dialog-content")} {
						color: #535350;
						font-size: 16px;
						font-style: normal;
						font-weight: 400;
						line-height: 24px;
						margin: 0;
					}

					.${_("dialog-content")} + p {
						margin-top: 12px;
					}

					.${_("dialog-content")} a {
						color: #1a1a19;
						text-decoration: underline;
					}
				</style>

				<lit-dialog ${Qt(e=>this.handleSetDialogRef(e))} title="Made with Manus" width="358px">
					<p class=${_("dialog-content")}>
						AI-generated (possibly user-edited) content - please verify carefully and submit no personal information.
					</p>
					<p class=${_("dialog-content")}>
						If you believe this content violates your rights or applicable laws,
						<a target="_blank" href="${Se.host}/report?resourceType=3&shareUrl=${encodeURIComponent(window.location.href)}"
							>you may submit a report for review.</a
						>
					</p>
					<div slot="footer" class=${_("dialog-footer")}>
						<button class=${_("dialog-button")} @click=${()=>{var e;return(e=this.dialogRef)==null?void 0:e.close()}}>Cancel</button>
						<button
							class=${tt({[_("dialog-button")]:!0,[_("dialog-button-primary")]:!0})}
							@click=${()=>this.handleClick()}
						>
							Create my website
						</button>
					</div>
				</lit-dialog>

				<div
					class=${tt({[_("root")]:!0})}
					@click=${()=>{var e;(e=this.dialogRef)==null||e.show(),wt({eventName:"manus_watermark_click"})}}
				>
					${vl} Made with Manus
				</div>`:O`<style>
				.${_("root")} {
					z-index: 10000;
					display: flex;
					padding: 4px 4px 4px 12px;
					align-items: center;
					position: fixed;
					right: 16px;
					bottom: 16px;
					border-radius: 999px;
					background: var(--Button-primary-black);
					display: flex;
					height: 28px;
					padding: 6px 8px;
					justify-content: center;
					align-items: center;
					gap: 2px;
					color: var(--text-white);
					font-size: 12px;
					line-height: 16px;
					cursor: pointer;
					user-select: none;
					box-sizing: border-box;
				}

				.${_("hover-text")} {
					display: none;
				}

				.${_("root")}:hover span {
					display: none;
				}

				.${_("root")}:hover .${_("hover-text")} {
					display: block;
				}

				.${_("hover-icon")} {
					display: none;
					cursor: pointer;
					user-select: none;
					position: absolute;
					right: -4px;
					top: -4px;
					color: var(--icon-tertiary);
				}

				.${_("root")}:hover {
					// opacity: 0.8;
				}

				.${_("root")}:hover .${_("hover-icon")} {
					display: block;
				}

				.${_("tooltip")} {
					position: absolute;
					bottom: calc(100% + 6px);
					right: 0;
					width: 280px;
					background: #ffffff;
					border-radius: 12px;
					box-shadow: 0px 8px 32px 0px rgba(0, 0, 0, 0.06);
					padding: 10px;
					opacity: 0;
					visibility: hidden;
					transition: opacity 0.2s ease, visibility 0.2s ease;
					z-index: 10001;
					border: 0.5px solid var(--border-primary);
					cursor: default;
				}

				.${_("root")}:hover .${_("tooltip")} {
					opacity: 1;
					visibility: visible;
				}

				.${_("tooltip-text")} {
					font-size: 12px;
					line-height: 16px;
					color: #5e5e5b;
					margin: 0;
					font-weight: 400;
				}

				.${_("tooltip-link")} {
					color: #34322d;
					text-decoration: underline;
					text-decoration-skip-ink: none;
					text-decoration-style: solid;
					text-underline-position: from-font;
				}

				.${_("tooltip-button")} {
					width: 100%;
					margin-top: 8px;
					padding: 8px 16px;
					background: #1a1a19;
					color: #ffffff;
					border: none;
					border-radius: 8px;
					font-size: 12px;
					font-weight: 500;
					cursor: pointer;
					transition: background 0.2s ease;
				}

				.${_("tooltip-button")}:hover {
					background: #2a2a29;
				}
			</style>
			<div
				class=${tt({[_("root")]:!0})}
				@click=${()=>this.handleClick()}
			>
				${vl}
				<span>Made with Manus</span>
				<span class=${_("hover-text")}>Create my website</span>
				<span class=${_("hover-icon")} @click=${e=>this.handleClose(e)}>${Pp}</span>

				<div class=${_("tooltip")} @click=${e=>e.stopPropagation()}>
					<p class=${_("tooltip-text")}>
						AI-generated (possibly user-edited) content - please verify carefully and submit no personal information. If you believe this
						content violates your rights or applicable laws,
						<a
							class=${_("tooltip-link")}
							target="_blank"
							href="${Se.host}/report?resourceType=3&shareUrl=${encodeURIComponent(window.location.href)}"
							>you may submit a report for review</a
						>.
					</p>
				</div>
			</div>`}connectedCallback(){wt({eventName:"manus_watermark_show"})}handleClick(){wt({eventName:"manus_watermark_click"}),window.open(`${Se.host}/app?utm_source=manusspace`,"_blank")}handleClose(e){e.stopPropagation(),localStorage.setItem("embedClosed","true"),this.isClosed=!0,this.render(),wt({eventName:"manus_watermark_close"})}handleSetDialogRef(e){e instanceof Wl&&(this.dialogRef=e)}render(){vt(this.template,this.shadowRoot)}}function be(t){return`made-with-${t}`}class dZ extends HTMLElement{constructor(){super(),this.isMobile=!1,this.isMobile=Xc(),vt(this.template,this)}get template(){const e=()=>this.isMobile?O`<button class=${be("btn")} @click=${()=>{var n;return(n=this.dialogRef)==null?void 0:n.show()}}>${vl} Made with Manus</button>
					<lit-dialog ${Qt(n=>this.handleSetDialogRef(n))} title="Made with Manus">
						<p>AI-generated (possibly user-edited) content - please verify carefully and submit no personal information.</p>
						<p>
							If you believe this content violates your rights or applicable laws,
							<a target="_blank" href="${Se.host}/report?resourceType=3&shareUrl=${encodeURIComponent(window.location.href)}"
								>you may submit a report for review.</a
							>
						</p>
						<div slot="footer" class=${be("dialog-footer")}>
							<button class=${be("dialog-button")} @click=${()=>{var n;return(n=this.dialogRef)==null?void 0:n.close()}}>Cancel</button>
							<a href="${Se.host}/app?utm_source=manusspace" target="_blank" @click=${()=>{var n;return(n=this.dialogRef)==null?void 0:n.close()}}>
								<button
									class=${tt({[be("dialog-button")]:!0,[be("dialog-button-primary")]:!0})}
								>
									Create my website
								</button>
							</a>
						</div>
					</lit-dialog>`:O`<a href="${Se.host}/app?utm_source=manusspace" target="_blank" class=${be("btn-link")}>
				<button class=${be("btn")}>
					${vl}
					<span class=${be("btn-text")}>Made with Manus</span>
					<span class=${be("btn-text-hover")}>Create my website</span>
					<span
						class="tooltip-trigger-css tooltip-trigger-right-css"
						data-tooltip="This user-generated doc was created with AI. Use with caution.
Not an official Manus doc nor endorsed by Manus. Content may contain inaccuracies; double-check before use. Do not submit passwords, credit cards, or personal information."
						>${Op}</span
					>
				</button>
			</a>`;return O`<style>
				.${be("btn-link")} {
					text-decoration: none;
				}

				.${be("btn-link")}:hover {
					opacity: 0.85;
				}

				.${be("btn")} {
					border-radius: 8px;
					border: 1px solid var(--border-main);
					background: var(--Button-primary-black);
					box-shadow: 0px 8px 32px 0px var(--shadow-XS);
					cursor: pointer;
					padding: 5px 10px;
					min-height: 32px;
					display: flex;
					align-items: center;
					justify-content: center;
					color: var(--text-onblack);
					font-size: 13px;
					font-weight: 500;
					line-height: 18px;
					letter-spacing: -0.091px;
					gap: 2px;
				}

				.${be("btn")}:hover .${be("btn-text")} {
					display: none;
				}
				.${be("btn")}:hover .${be("btn-text-hover")} {
					display: flex;
				}
				.${be("btn-text")} {
					display: flex;
				}
				.${be("btn-text-hover")} {
					display: none;
				}

				.${be("dialog-footer")} {
					display: flex;
					justify-content: flex-end;
					gap: 12px;
				}

				.${be("dialog-button")} {
					display: flex;
					height: 36px;
					min-width: 64px;
					min-height: 36px;
					padding: 8px 12px;
					justify-content: center;
					align-items: center;
					gap: 6px;
					cursor: pointer;
					color: var(--text-primary);
					font-size: 14px;
					font-weight: 500;
					line-height: 20px;
					letter-spacing: -0.154px;
					border-radius: 10px;
					border: 1px solid var(--border-btn-main);
					background: transparent;
					text-decoration: none;
				}

				.${be("dialog-button")}:hover {
					opacity: 0.85;
				}

				.${be("dialog-button-primary")} {
					background: var(--Button-primary-black);
					color: var(--text-onblack);
					border: none;
				}

				.tooltip-trigger-right-css {
					display: flex;
					margin-left: 2px;
				}

				.tooltip-trigger-right-css svg {
					opacity: 0.6;
				}

				.tooltip-trigger-right-css::after {
					right: -11px !important;
					bottom: 20px;
				}
			</style>
			${e()}`}handleSetDialogRef(e){e instanceof Wl&&(this.dialogRef=e)}}customElements.define("lit-textarea",Xu);customElements.define("lit-popup",zi);customElements.define("lit-dialog",Wl);customElements.define("manus-content-root",aZ);customElements.define("make-with-manus",dZ);customElements.define("footer-watermark",cZ);Np();Bu(()=>{new MutationObserver(()=>{document.querySelector("manus-content-root")||document.body.appendChild(document.createElement("manus-content-root"))}).observe(document.body,{childList:!0,subtree:!0})});

			};

			</script><script
			defer
			data-domain="manus.space"
			src="https://plausible.io/js/script.file-downloads.hash.outbound-links.pageview-props.revenue.tagged-events.js"
		></script>
		<script>
			window.plausible =
				window.plausible ||
				function () {
					(window.plausible.q = window.plausible.q || []).push(arguments);
				};
			plausible('custom-pageview', {
			  props: {
    			domain: window.location.host
  			}
			})
		

        // Negotiation Dashboard JavaScript
        // Deal Value Trend Chart
Highcharts.chart('deal-value-chart', {
    credits: { enabled: false },
    chart: {
        type: 'line',
        height: 320
    },
    title: {
        text: ''
    },
    xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov']
    },
    yAxis: {
        title: {
            text: 'Deal Value (£M)'
        }
    },
    series: [{
        name: 'Deal Value',
        data: [1.2, 1.8, 2.1, 1.9, 2.4, 2.8, 3.1, 2.7, 3.4, 3.8, 4.2],
        color: '#2563eb'
    }]
});

// Stage Distribution Chart
Highcharts.chart('stage-distribution-chart', {
    credits: { enabled: false },
    chart: {
        type: 'pie',
        height: 320
    },
    title: {
        text: ''
    },
    series: [{
        name: 'Deals',
        data: [
            { name: 'Lead', y: 8, color: '#3b82f6' },
            { name: 'Viewing', y: 6, color: '#6366f1' },
            { name: 'Proposal', y: 4, color: '#8b5cf6' },
            { name: 'HoTs', y: 3, color: '#ec4899' },
            { name: 'Contract', y: 2, color: '#ef4444' },
            { name: 'Onboarding', y: 1, color: '#f97316' },
            { name: 'Live', y: 12, color: '#10b981' }
        ]
    }]
});

// Performance Chart
Highcharts.chart('performance-chart', {
    credits: { enabled: false },
    chart: {
        type: 'column',
        height: 320
    },
    title: {
        text: ''
    },
    xAxis: {
        categories: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6', 'Week 7', 'Week 8']
    },
    yAxis: [{
        title: {
            text: 'Deal Value (£M)'
        }
    }, {
        title: {
            text: 'Deal Count'
        },
        opposite: true
    }],
    series: [{
        name: 'Deal Value',
        type: 'column',
        data: [2.1, 1.8, 2.4, 2.9, 3.2, 2.7, 3.5, 4.1],
        color: '#2563eb'
    }, {
        name: 'Deal Count',
        type: 'line',
        yAxis: 1,
        data: [3, 2, 4, 3, 5, 4, 6, 7],
        color: '#10b981'
    }]
});
        </script>
<script>
// ============================================================================
// UNION Core MVP - Phase 1 Orphan Functionality Implementation
// Quick Wins: View Toggles, Filters, Navigation, Export, Pagination
// ============================================================================

// Global utility functions
const UnionCore = {
  // Toast notification system
  showToast: function(message, type = 'info') {
    const toast = document.createElement('div');
    toast.className = `fixed bottom-4 right-4 px-6 py-3 rounded-lg shadow-lg text-white z-50 animate-slide-up`;
    
    const bgColors = {
      success: 'bg-green-500',
      error: 'bg-red-500',
      warning: 'bg-orange-500',
      info: 'bg-blue-500'
    };
    
    toast.classList.add(bgColors[type] || bgColors.info);
    toast.textContent = message;
    document.body.appendChild(toast);
    
    setTimeout(() => {
      toast.style.opacity = '0';
      toast.style.transform = 'translateY(20px)';
      setTimeout(() => toast.remove(), 300);
    }, 3000);
  },

  // Modal system
  showModal: function(title, content, actions = []) {
    const modal = document.createElement('div');
    modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
    modal.id = 'union-modal';
    
    const actionsHTML = actions.map(action => 
      `<button class="px-4 py-2 rounded ${action.primary ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700'}" 
              onclick="${action.onclick}">${action.label}</button>`
    ).join('');
    
    modal.innerHTML = `
      <div class="bg-white rounded-lg shadow-xl max-w-md w-full p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-semibold">${title}</h3>
          <button onclick="UnionCore.closeModal()" class="text-gray-400 hover:text-gray-600">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>
        <div class="mb-6">${content}</div>
        <div class="flex gap-2 justify-end">${actionsHTML}</div>
      </div>
    `;
    
    document.body.appendChild(modal);
    
    // Close on ESC
    document.addEventListener('keydown', function escHandler(e) {
      if (e.key === 'Escape') {
        UnionCore.closeModal();
        document.removeEventListener('keydown', escHandler);
      }
    });
  },

  closeModal: function() {
    const modal = document.getElementById('union-modal');
    if (modal) modal.remove();
  }
};

// ============================================================================
// 1. VIEW TOGGLES (List / Grid / Timeline)
// ============================================================================

function initViewToggles() {
  // Find all view toggle groups
  const viewToggles = document.querySelectorAll('[data-view-toggle-group]');
  
  viewToggles.forEach(group => {
    const targetId = group.getAttribute('data-view-toggle-group');
    const buttons = group.querySelectorAll('[data-view]');
    
    buttons.forEach(button => {
      button.addEventListener('click', function() {
        const view = this.getAttribute('data-view');
        
        // Update active state
        buttons.forEach(btn => btn.classList.remove('bg-blue-600', 'text-white'));
        this.classList.add('bg-blue-600', 'text-white');
        
        // Switch view
        switchView(targetId, view);
        UnionCore.showToast(`Switched to ${view} view`, 'success');
      });
    });
  });
}

function switchView(targetId, view) {
  const container = document.getElementById(targetId);
  if (!container) return;
  
  // Remove all view classes
  container.classList.remove('view-list', 'view-grid', 'view-timeline');
  
  // Add new view class
  container.classList.add(`view-${view}`);
  
  // Apply view-specific styles
  if (view === 'grid') {
    container.style.display = 'grid';
    container.style.gridTemplateColumns = 'repeat(auto-fill, minmax(300px, 1fr))';
    container.style.gap = '1rem';
  } else if (view === 'list') {
    container.style.display = 'block';
  } else if (view === 'timeline') {
    container.style.display = 'flex';
    container.style.flexDirection = 'column';
  }
}

// ============================================================================
// 2. FILTER PANELS (Show / Hide)
// ============================================================================

function initFilterPanels() {
  // Find all filter toggle buttons
  const filterButtons = document.querySelectorAll('[data-filter-toggle]');
  
  filterButtons.forEach(button => {
    button.addEventListener('click', function() {
      const targetId = this.getAttribute('data-filter-toggle');
      toggleFilterPanel(targetId);
    });
  });
  
  // Apply Filters buttons
  const applyButtons = document.querySelectorAll('[data-apply-filters]');
  applyButtons.forEach(button => {
    button.addEventListener('click', function() {
      applyFilters(this.closest('[data-filter-panel]'));
    });
  });
  
  // Clear Filters buttons
  const clearButtons = document.querySelectorAll('[data-clear-filters]');
  clearButtons.forEach(button => {
    button.addEventListener('click', function() {
      clearFilters(this.closest('[data-filter-panel]'));
    });
  });
}

function toggleFilterPanel(panelId) {
  const panel = document.getElementById(panelId);
  if (!panel) return;
  
  const isHidden = panel.classList.contains('hidden');
  
  if (isHidden) {
    panel.classList.remove('hidden');
    panel.style.maxHeight = panel.scrollHeight + 'px';
  } else {
    panel.style.maxHeight = '0';
    setTimeout(() => panel.classList.add('hidden'), 300);
  }
}

function applyFilters(panel) {
  if (!panel) return;
  
  const filters = {};
  const inputs = panel.querySelectorAll('select, input');
  
  inputs.forEach(input => {
    if (input.value) {
      filters[input.name] = input.value;
    }
  });
  
  console.log('Applying filters:', filters);
  UnionCore.showToast('Filters applied', 'success');
  
  // TODO: Implement actual filtering logic
}

function clearFilters(panel) {
  if (!panel) return;
  
  const inputs = panel.querySelectorAll('select, input');
  inputs.forEach(input => {
    if (input.type === 'checkbox') {
      input.checked = false;
    } else {
      input.value = '';
    }
  });
  
  UnionCore.showToast('Filters cleared', 'info');
}

// ============================================================================
// 3. "VIEW ALL" NAVIGATION LINKS
// ============================================================================

function initViewAllLinks() {
  const viewAllLinks = document.querySelectorAll('[data-view-all]');
  
  viewAllLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const target = this.getAttribute('data-view-all');
      
      // Navigate to target page
      if (target.startsWith('#/')) {
        window.location.hash = target;
      } else {
        window.location.hash = '#/' + target;
      }
      
      UnionCore.showToast('Loading all items...', 'info');
    });
  });
}

// ============================================================================
// 4. EXPORT MODALS (Format Selection)
// ============================================================================

function initExportButtons() {
  const exportButtons = document.querySelectorAll('[data-export]');
  
  exportButtons.forEach(button => {
    button.addEventListener('click', function() {
      const dataType = this.getAttribute('data-export') || 'data';
      showExportModal(dataType);
    });
  });
}

function showExportModal(dataType) {
  const content = `
    <div class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Export Format</label>
        <select id="export-format" class="w-full border border-gray-300 rounded px-3 py-2">
          <option value="csv">CSV (Comma Separated)</option>
          <option value="xlsx">Excel (XLSX)</option>
          <option value="pdf">PDF Document</option>
          <option value="json">JSON Data</option>
        </select>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Date Range</label>
        <select id="export-range" class="w-full border border-gray-300 rounded px-3 py-2">
          <option value="all">All Time</option>
          <option value="7">Last 7 Days</option>
          <option value="30">Last 30 Days</option>
          <option value="90">Last 90 Days</option>
          <option value="custom">Custom Range</option>
        </select>
      </div>
      
      <div>
        <label class="flex items-center">
          <input type="checkbox" id="export-email" class="mr-2">
          <span class="text-sm text-gray-700">Email export to me</span>
        </label>
      </div>
    </div>
  `;
  
  UnionCore.showModal('Export ' + dataType, content, [
    { label: 'Cancel', onclick: 'UnionCore.closeModal()' },
    { label: 'Export', primary: true, onclick: 'performExport()' }
  ]);
}

function performExport() {
  const format = document.getElementById('export-format').value;
  const range = document.getElementById('export-range').value;
  const email = document.getElementById('export-email').checked;
  
  UnionCore.closeModal();
  
  // Simulate export
  UnionCore.showToast('Generating export...', 'info');
  
  setTimeout(() => {
    const filename = `union-export-${Date.now()}.${format}`;
    UnionCore.showToast(`Export complete: ${filename}`, 'success');
    
    if (email) {
      setTimeout(() => {
        UnionCore.showToast('Export emailed to you', 'success');
      }, 1000);
    }
  }, 2000);
}

// ============================================================================
// 5. PAGINATION CONTROLS
// ============================================================================

function initPagination() {
  const paginationContainers = document.querySelectorAll('[data-pagination]');
  
  paginationContainers.forEach(container => {
    const currentPage = parseInt(container.getAttribute('data-current-page') || '1');
    const totalPages = parseInt(container.getAttribute('data-total-pages') || '10');
    
    renderPagination(container, currentPage, totalPages);
  });
}

function renderPagination(container, currentPage, totalPages) {
  const maxVisible = 5;
  let startPage = Math.max(1, currentPage - Math.floor(maxVisible / 2));
  let endPage = Math.min(totalPages, startPage + maxVisible - 1);
  
  if (endPage - startPage < maxVisible - 1) {
    startPage = Math.max(1, endPage - maxVisible + 1);
  }
  
  let html = '';
  
  // Previous button
  html += `<button class="px-3 py-1 border rounded ${currentPage === 1 ? 'opacity-50 cursor-not-allowed' : 'hover:bg-gray-100'}" 
                   ${currentPage === 1 ? 'disabled' : ''} 
                   onclick="goToPage(${currentPage - 1})">Previous</button>`;
  
  // First page
  if (startPage > 1) {
    html += `<button class="px-3 py-1 border rounded hover:bg-gray-100" onclick="goToPage(1)">1</button>`;
    if (startPage > 2) {
      html += `<span class="px-2">...</span>`;
    }
  }
  
  // Page numbers
  for (let i = startPage; i <= endPage; i++) {
    html += `<button class="px-3 py-1 border rounded ${i === currentPage ? 'bg-blue-600 text-white' : 'hover:bg-gray-100'}" 
                     onclick="goToPage(${i})">${i}</button>`;
  }
  
  // Last page
  if (endPage < totalPages) {
    if (endPage < totalPages - 1) {
      html += `<span class="px-2">...</span>`;
    }
    html += `<button class="px-3 py-1 border rounded hover:bg-gray-100" onclick="goToPage(${totalPages})">${totalPages}</button>`;
  }
  
  // Next button
  html += `<button class="px-3 py-1 border rounded ${currentPage === totalPages ? 'opacity-50 cursor-not-allowed' : 'hover:bg-gray-100'}" 
                   ${currentPage === totalPages ? 'disabled' : ''} 
                   onclick="goToPage(${currentPage + 1})">Next</button>`;
  
  container.innerHTML = html;
}

function goToPage(page) {
  console.log('Navigating to page:', page);
  UnionCore.showToast(`Loading page ${page}...`, 'info');
  
  // Update pagination UI
  const paginationContainers = document.querySelectorAll('[data-pagination]');
  paginationContainers.forEach(container => {
    container.setAttribute('data-current-page', page);
    const totalPages = parseInt(container.getAttribute('data-total-pages') || '10');
    renderPagination(container, page, totalPages);
  });
  
  // Scroll to top
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

// ============================================================================
// INITIALIZATION
// ============================================================================

function initPhase1Functionality() {
  console.log('Initializing Phase 1 orphan functionality...');
  
  initViewToggles();
  initFilterPanels();
  initViewAllLinks();
  initExportButtons();
  initPagination();
  
  console.log('Phase 1 functionality initialized ✅');
}


// ============================================================================
// UNION Core MVP - Phase 2 Standard Actions Implementation
// Confirmation Modals, Mark Complete, Comments, Search, Quick Actions
// ============================================================================

// ============================================================================
// 1. CONFIRMATION MODALS (Delete, Archive, Reject)
// ============================================================================

function initConfirmationActions() {
  // Delete actions
  const deleteButtons = document.querySelectorAll('[data-action="delete"]');
  deleteButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      const itemType = this.getAttribute('data-item-type') || 'item';
      const itemName = this.getAttribute('data-item-name') || 'this item';
      showConfirmationModal('delete', itemType, itemName, this);
    });
  });

  // Archive actions
  const archiveButtons = document.querySelectorAll('[data-action="archive"]');
  archiveButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      const itemType = this.getAttribute('data-item-type') || 'item';
      const itemName = this.getAttribute('data-item-name') || 'this item';
      showConfirmationModal('archive', itemType, itemName, this);
    });
  });

  // Reject actions
  const rejectButtons = document.querySelectorAll('[data-action="reject"]');
  rejectButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      const itemType = this.getAttribute('data-item-type') || 'item';
      const itemName = this.getAttribute('data-item-name') || 'this item';
      showConfirmationModal('reject', itemType, itemName, this);
    });
  });
}

function showConfirmationModal(action, itemType, itemName, sourceButton) {
  const actionConfig = {
    delete: {
      title: 'Confirm Delete',
      message: `Are you sure you want to delete <strong>${itemName}</strong>? This action cannot be undone.`,
      confirmLabel: 'Delete',
      confirmClass: 'bg-red-600 hover:bg-red-700 text-white',
      icon: '🗑️'
    },
    archive: {
      title: 'Confirm Archive',
      message: `Are you sure you want to archive <strong>${itemName}</strong>? You can restore it later from the archive.`,
      confirmLabel: 'Archive',
      confirmClass: 'bg-orange-600 hover:bg-orange-700 text-white',
      icon: '📦'
    },
    reject: {
      title: 'Confirm Rejection',
      message: `Are you sure you want to reject <strong>${itemName}</strong>? Please provide a reason below.`,
      confirmLabel: 'Reject',
      confirmClass: 'bg-red-600 hover:bg-red-700 text-white',
      icon: '❌',
      requiresReason: true
    }
  };

  const config = actionConfig[action];
  
  const reasonField = config.requiresReason ? `
    <div class="mt-4">
      <label class="block text-sm font-medium text-gray-700 mb-2">Reason for rejection *</label>
      <textarea id="rejection-reason" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[80px]" 
                placeholder="Please explain why this is being rejected..."></textarea>
    </div>
  ` : '';

  const content = `
    <div class="text-center mb-4">
      <div class="text-4xl mb-2">${config.icon}</div>
      <p class="text-gray-700">${config.message}</p>
    </div>
    ${reasonField}
  `;

  UnionCore.showModal(config.title, content, [
    { label: 'Cancel', onclick: 'UnionCore.closeModal()' },
    { 
      label: config.confirmLabel, 
      primary: true, 
      onclick: `performConfirmationAction('${action}', '${itemType}', '${itemName}', ${config.requiresReason})` 
    }
  ]);
}

function performConfirmationAction(action, itemType, itemName, requiresReason) {
  if (requiresReason) {
    const reason = document.getElementById('rejection-reason')?.value;
    if (!reason || reason.trim().length < 10) {
      UnionCore.showToast('Please provide a detailed reason (at least 10 characters)', 'error');
      return;
    }
  }

  UnionCore.closeModal();
  
  // Simulate action
  UnionCore.showToast(`Processing ${action}...`, 'info');
  
  setTimeout(() => {
    const messages = {
      delete: `${itemName} has been deleted successfully`,
      archive: `${itemName} has been archived successfully`,
      reject: `${itemName} has been rejected`
    };
    
    UnionCore.showToast(messages[action], 'success');
    
    // TODO: Implement actual backend call
    console.log(`${action} action performed on ${itemType}: ${itemName}`);
  }, 1000);
}

// ============================================================================
// 2. MARK COMPLETE (Tasks, Approvals, Milestones)
// ============================================================================

function initMarkCompleteActions() {
  const completeButtons = document.querySelectorAll('[data-action="mark-complete"]');
  
  completeButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      const itemId = this.getAttribute('data-item-id');
      const itemType = this.getAttribute('data-item-type') || 'task';
      const itemName = this.getAttribute('data-item-name') || 'item';
      
      markAsComplete(itemId, itemType, itemName, this);
    });
  });
}

function markAsComplete(itemId, itemType, itemName, button) {
  // Show loading state
  const originalText = button.innerHTML;
  button.innerHTML = '<i class="fa-solid fa-spinner fa-spin mr-2"></i>Completing...';
  button.disabled = true;

  // Simulate API call
  setTimeout(() => {
    // Update button state
    button.innerHTML = '<i class="fa-solid fa-check mr-2"></i>Completed';
    button.classList.remove('bg-blue-600', 'hover:bg-blue-700');
    button.classList.add('bg-green-600', 'cursor-not-allowed');
    
    // Add visual indicator to parent container
    const container = button.closest('[data-item-container]');
    if (container) {
      container.classList.add('opacity-60', 'bg-green-50');
      
      // Add completed badge
      const badge = document.createElement('span');
      badge.className = 'inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-green-100 text-green-800 ml-2';
      badge.innerHTML = '<i class="fa-solid fa-check mr-1"></i>Completed';
      
      const titleElement = container.querySelector('h3, h4, .font-medium');
      if (titleElement && !titleElement.querySelector('.bg-green-100')) {
        titleElement.appendChild(badge);
      }
    }
    
    UnionCore.showToast(`${itemName} marked as complete`, 'success');
    
    // TODO: Implement actual backend call
    console.log(`Marked complete: ${itemType} ${itemId}`);
  }, 800);
}

// ============================================================================
// 3. INLINE COMMENTS (Add comments to deals, documents, tasks)
// ============================================================================

function initCommentActions() {
  const commentButtons = document.querySelectorAll('[data-action="add-comment"]');
  
  commentButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      const itemId = this.getAttribute('data-item-id');
      const itemType = this.getAttribute('data-item-type') || 'item';
      const itemName = this.getAttribute('data-item-name') || 'this item';
      
      showCommentModal(itemId, itemType, itemName);
    });
  });
}

function showCommentModal(itemId, itemType, itemName) {
  const content = `
    <div class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Add comment to ${itemName}</label>
        <textarea id="comment-text" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[120px]" 
                  placeholder="Enter your comment..."></textarea>
      </div>
      
      <div class="flex items-center space-x-4">
        <label class="flex items-center">
          <input type="checkbox" id="comment-notify" class="mr-2">
          <span class="text-sm text-gray-700">Notify team members</span>
        </label>
        
        <label class="flex items-center">
          <input type="checkbox" id="comment-internal" class="mr-2">
          <span class="text-sm text-gray-700">Internal only</span>
        </label>
      </div>
      
      <div id="comment-preview" class="hidden p-3 bg-gray-50 rounded border border-gray-200">
        <div class="text-xs text-gray-500 mb-1">Preview:</div>
        <div id="comment-preview-text" class="text-sm text-gray-800"></div>
      </div>
    </div>
  `;

  UnionCore.showModal('Add Comment', content, [
    { label: 'Cancel', onclick: 'UnionCore.closeModal()' },
    { 
      label: 'Post Comment', 
      primary: true, 
      onclick: `postComment('${itemId}', '${itemType}', '${itemName}')` 
    }
  ]);

  // Add live preview
  setTimeout(() => {
    const textarea = document.getElementById('comment-text');
    const preview = document.getElementById('comment-preview');
    const previewText = document.getElementById('comment-preview-text');
    
    if (textarea && preview && previewText) {
      textarea.addEventListener('input', function() {
        if (this.value.trim()) {
          preview.classList.remove('hidden');
          previewText.textContent = this.value;
        } else {
          preview.classList.add('hidden');
        }
      });
    }
  }, 100);
}

function postComment(itemId, itemType, itemName) {
  const commentText = document.getElementById('comment-text')?.value;
  const notify = document.getElementById('comment-notify')?.checked;
  const internal = document.getElementById('comment-internal')?.checked;

  if (!commentText || commentText.trim().length < 3) {
    UnionCore.showToast('Please enter a comment (at least 3 characters)', 'error');
    return;
  }

  UnionCore.closeModal();
  UnionCore.showToast('Posting comment...', 'info');

  setTimeout(() => {
    UnionCore.showToast('Comment posted successfully', 'success');
    
    if (notify) {
      setTimeout(() => {
        UnionCore.showToast('Team members notified', 'info');
      }, 500);
    }
    
    // TODO: Implement actual backend call
    console.log(`Comment posted on ${itemType} ${itemId}:`, {
      text: commentText,
      notify,
      internal
    });
  }, 800);
}

// ============================================================================
// 4. SEARCH FILTERING (Real-time search across lists)
// ============================================================================

function initSearchFiltering() {
  const searchInputs = document.querySelectorAll('[data-search-target]');
  
  searchInputs.forEach(input => {
    const targetSelector = input.getAttribute('data-search-target');
    const searchFields = input.getAttribute('data-search-fields')?.split(',') || ['text'];
    
    input.addEventListener('input', function() {
      performSearch(this.value, targetSelector, searchFields);
    });
    
    // Add clear button
    if (!input.nextElementSibling?.classList.contains('search-clear-btn')) {
      const clearBtn = document.createElement('button');
      clearBtn.className = 'search-clear-btn absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 hidden';
      clearBtn.innerHTML = '<i class="fa-solid fa-times"></i>';
      clearBtn.onclick = function() {
        input.value = '';
        input.dispatchEvent(new Event('input'));
        this.classList.add('hidden');
      };
      
      input.parentElement.style.position = 'relative';
      input.parentElement.appendChild(clearBtn);
      
      input.addEventListener('input', function() {
        clearBtn.classList.toggle('hidden', !this.value);
      });
    }
  });
}

function performSearch(query, targetSelector, searchFields) {
  const items = document.querySelectorAll(targetSelector);
  const normalizedQuery = query.toLowerCase().trim();
  
  let visibleCount = 0;
  let hiddenCount = 0;

  items.forEach(item => {
    if (!normalizedQuery) {
      item.style.display = '';
      item.classList.remove('search-hidden');
      visibleCount++;
      return;
    }

    let matchFound = false;
    
    searchFields.forEach(field => {
      if (field === 'text') {
        if (item.textContent.toLowerCase().includes(normalizedQuery)) {
          matchFound = true;
        }
      } else {
        const fieldValue = item.getAttribute(`data-${field}`)?.toLowerCase();
        if (fieldValue && fieldValue.includes(normalizedQuery)) {
          matchFound = true;
        }
      }
    });

    if (matchFound) {
      item.style.display = '';
      item.classList.remove('search-hidden');
      visibleCount++;
    } else {
      item.style.display = 'none';
      item.classList.add('search-hidden');
      hiddenCount++;
    }
  });

  // Update search results indicator
  updateSearchResultsIndicator(targetSelector, visibleCount, hiddenCount, normalizedQuery);
}

function updateSearchResultsIndicator(targetSelector, visibleCount, hiddenCount, query) {
  const container = document.querySelector(targetSelector)?.parentElement;
  if (!container) return;

  let indicator = container.querySelector('.search-results-indicator');
  
  if (!indicator) {
    indicator = document.createElement('div');
    indicator.className = 'search-results-indicator text-sm text-gray-600 py-2 px-4 bg-blue-50 border border-blue-200 rounded mb-4';
    container.insertBefore(indicator, container.firstChild);
  }

  if (query) {
    indicator.style.display = 'block';
    indicator.innerHTML = `
      <i class="fa-solid fa-search mr-2"></i>
      Found <strong>${visibleCount}</strong> result${visibleCount !== 1 ? 's' : ''} for "${query}"
      ${hiddenCount > 0 ? `<span class="text-gray-500 ml-2">(${hiddenCount} hidden)</span>` : ''}
    `;
  } else {
    indicator.style.display = 'none';
  }
}

// ============================================================================
// 5. QUICK ACTIONS (Edit, Duplicate, Assign)
// ============================================================================

function initQuickActions() {
  // Edit actions
  const editButtons = document.querySelectorAll('[data-action="edit"]');
  editButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      const itemId = this.getAttribute('data-item-id');
      const itemType = this.getAttribute('data-item-type');
      handleEditAction(itemId, itemType);
    });
  });

  // Duplicate actions
  const duplicateButtons = document.querySelectorAll('[data-action="duplicate"]');
  duplicateButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      const itemId = this.getAttribute('data-item-id');
      const itemType = this.getAttribute('data-item-type');
      const itemName = this.getAttribute('data-item-name');
      handleDuplicateAction(itemId, itemType, itemName);
    });
  });

  // Assign actions
  const assignButtons = document.querySelectorAll('[data-action="assign"]');
  assignButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      const itemId = this.getAttribute('data-item-id');
      const itemType = this.getAttribute('data-item-type');
      const itemName = this.getAttribute('data-item-name');
      showAssignModal(itemId, itemType, itemName);
    });
  });
}

function handleEditAction(itemId, itemType) {
  UnionCore.showToast(`Opening ${itemType} editor...`, 'info');
  
  // TODO: Navigate to edit page or open edit modal
  console.log(`Edit ${itemType}:`, itemId);
  
  setTimeout(() => {
    UnionCore.showToast('Edit mode activated', 'success');
  }, 500);
}

function handleDuplicateAction(itemId, itemType, itemName) {
  UnionCore.showToast(`Duplicating ${itemName}...`, 'info');
  
  setTimeout(() => {
    UnionCore.showToast(`${itemName} duplicated successfully`, 'success');
    
    // TODO: Implement actual duplication logic
    console.log(`Duplicated ${itemType}:`, itemId);
  }, 1000);
}

function showAssignModal(itemId, itemType, itemName) {
  const content = `
    <div class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Assign ${itemName} to</label>
        <select id="assign-user" class="w-full border border-gray-300 rounded px-3 py-2">
          <option value="">Select a team member...</option>
          <option value="max">Max Chen (Deal Manager)</option>
          <option value="dani">Dani Rodriguez (Operations)</option>
          <option value="tom">Tom Williams (Sales)</option>
          <option value="sarah">Sarah Johnson (Legal)</option>
          <option value="executive">Executive (Portfolio Navigator)</option>
        </select>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Priority</label>
        <select id="assign-priority" class="w-full border border-gray-300 rounded px-3 py-2">
          <option value="normal">Normal</option>
          <option value="high">High</option>
          <option value="urgent">Urgent</option>
        </select>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Due Date (optional)</label>
        <input type="date" id="assign-due-date" class="w-full border border-gray-300 rounded px-3 py-2">
      </div>
      
      <div>
        <label class="flex items-center">
          <input type="checkbox" id="assign-notify" checked class="mr-2">
          <span class="text-sm text-gray-700">Send notification to assignee</span>
        </label>
      </div>
    </div>
  `;

  UnionCore.showModal('Assign Task', content, [
    { label: 'Cancel', onclick: 'UnionCore.closeModal()' },
    { 
      label: 'Assign', 
      primary: true, 
      onclick: `performAssignment('${itemId}', '${itemType}', '${itemName}')` 
    }
  ]);
}

function performAssignment(itemId, itemType, itemName) {
  const userId = document.getElementById('assign-user')?.value;
  const priority = document.getElementById('assign-priority')?.value;
  const dueDate = document.getElementById('assign-due-date')?.value;
  const notify = document.getElementById('assign-notify')?.checked;

  if (!userId) {
    UnionCore.showToast('Please select a team member', 'error');
    return;
  }

  UnionCore.closeModal();
  UnionCore.showToast('Assigning...', 'info');

  setTimeout(() => {
    const userNames = {
      max: 'Max Chen',
      dani: 'Dani Rodriguez',
      tom: 'Tom Williams',
      sarah: 'Sarah Johnson',
      executive: 'Executive'
    };

    UnionCore.showToast(`${itemName} assigned to ${userNames[userId]}`, 'success');
    
    if (notify) {
      setTimeout(() => {
        UnionCore.showToast('Notification sent', 'info');
      }, 500);
    }
    
    // TODO: Implement actual backend call
    console.log(`Assigned ${itemType} ${itemId} to ${userId}`, {
      priority,
      dueDate,
      notify
    });
  }, 800);
}

// ============================================================================
// INITIALIZATION
// ============================================================================

function initPhase2Functionality() {
  console.log('Initializing Phase 2 standard actions...');
  
  initConfirmationActions();
  initMarkCompleteActions();
  initCommentActions();
  initSearchFiltering();
  initQuickActions();
  
  console.log('Phase 2 functionality initialized ✅');
}

// Auto-initialize when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initPhase2Functionality);
} else {
  initPhase2Functionality();
}

// Re-initialize when hash changes (for SPA navigation)
window.addEventListener('hashchange', function() {
  setTimeout(initPhase2Functionality, 100);
});

// Export for global access
window.initPhase2Functionality = initPhase2Functionality;


// ============================================================================
// UNION Core MVP - Phase 2 Additional Action Handlers
// Handlers for expanded Phase 2 button coverage
// ============================================================================

// ============================================================================
// ADDITIONAL ACTION HANDLERS
// ============================================================================

function initAdditionalPhase2Actions() {
  // Approve actions
  const approveButtons = document.querySelectorAll('[data-action="approve"]');
  approveButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      const itemType = this.getAttribute('data-item-type') || 'item';
      const itemName = this.getAttribute('data-item-name') || 'this item';
      handleApprove(itemType, itemName, this);
    });
  });

  // Intervene actions
  const interveneButtons = document.querySelectorAll('[data-action="intervene"]');
  interveneButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      const itemName = this.getAttribute('data-item-name') || 'this deal';
      showCommentModal(this.getAttribute('data-item-id'), 'deal', itemName);
    });
  });

  // Escalate actions
  const escalateButtons = document.querySelectorAll('[data-action="escalate"]');
  escalateButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      const itemName = this.getAttribute('data-item-name') || 'this deal';
      handleEscalate(itemName);
    });
  });

  // View Document actions
  const viewDocButtons = document.querySelectorAll('[data-action="view-document"]');
  viewDocButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      const itemName = this.getAttribute('data-item-name') || 'document';
      UnionCore.showToast(`Opening ${itemName}...`, 'info');
      setTimeout(() => {
        UnionCore.showToast('Document opened', 'success');
      }, 500);
    });
  });

  // Request Extension actions
  const extensionButtons = document.querySelectorAll('[data-action="request-extension"]');
  extensionButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      const itemName = this.getAttribute('data-item-name') || 'task';
      showExtensionModal(itemName);
    });
  });

  // Send for Signature actions
  const signatureButtons = document.querySelectorAll('[data-action="send-signature"]');
  signatureButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      const itemName = this.getAttribute('data-item-name') || 'document';
      showSignatureModal(itemName);
    });
  });

  // Track Status actions
  const trackButtons = document.querySelectorAll('[data-action="track-status"]');
  trackButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      const itemName = this.getAttribute('data-item-name') || 'document';
      UnionCore.showToast(`Tracking ${itemName}...`, 'info');
      setTimeout(() => {
        UnionCore.showToast('Status tracking enabled', 'success');
      }, 500);
    });
  });

  // Mitigate Risk actions
  const mitigateButtons = document.querySelectorAll('[data-action="mitigate-risk"]');
  mitigateButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      const itemName = this.getAttribute('data-item-name') || 'risk';
      showMitigationModal(itemName);
    });
  });

  // Quick Action buttons
  const quickActionButtons = document.querySelectorAll('[data-action="quick-action"]');
  quickActionButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      const itemName = this.getAttribute('data-item-name') || 'item';
      showQuickActionMenu(this, itemName);
    });
  });
}

function handleApprove(itemType, itemName, button) {
  const originalText = button.innerHTML;
  button.innerHTML = '<i class="fa-solid fa-spinner fa-spin mr-2"></i>Approving...';
  button.disabled = true;

  setTimeout(() => {
    button.innerHTML = '<i class="fa-solid fa-check mr-2"></i>Approved';
    button.classList.remove('bg-green-600', 'hover:bg-green-700');
    button.classList.add('bg-green-700', 'cursor-not-allowed');
    
    UnionCore.showToast(`${itemName} approved successfully`, 'success');
  }, 800);
}

function handleEscalate(itemName) {
  const content = `
    <div class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Escalate to</label>
        <select id="escalate-to" class="w-full border border-gray-300 rounded px-3 py-2">
          <option value="">Select recipient...</option>
          <option value="executive">Executive (Portfolio Navigator)</option>
          <option value="senior-management">Senior Management</option>
          <option value="legal">Legal Team</option>
          <option value="compliance">Compliance Team</option>
        </select>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Priority</label>
        <select id="escalate-priority" class="w-full border border-gray-300 rounded px-3 py-2">
          <option value="high">High</option>
          <option value="urgent" selected>Urgent</option>
          <option value="critical">Critical</option>
        </select>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Reason for escalation *</label>
        <textarea id="escalate-reason" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[100px]" 
                  placeholder="Explain why this needs to be escalated..."></textarea>
      </div>
    </div>
  `;

  UnionCore.showModal('Escalate Issue', content, [
    { label: 'Cancel', onclick: 'UnionCore.closeModal()' },
    { label: 'Escalate', primary: true, onclick: `performEscalation('${itemName}')` }
  ]);
}

function performEscalation(itemName) {
  const recipient = document.getElementById('escalate-to')?.value;
  const reason = document.getElementById('escalate-reason')?.value;

  if (!recipient) {
    UnionCore.showToast('Please select a recipient', 'error');
    return;
  }

  if (!reason || reason.trim().length < 10) {
    UnionCore.showToast('Please provide a detailed reason (at least 10 characters)', 'error');
    return;
  }

  UnionCore.closeModal();
  UnionCore.showToast('Escalating...', 'info');

  setTimeout(() => {
    UnionCore.showToast(`${itemName} escalated successfully`, 'success');
    setTimeout(() => {
      UnionCore.showToast('Notification sent to recipient', 'info');
    }, 500);
  }, 800);
}

function showExtensionModal(itemName) {
  const content = `
    <div class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">New due date *</label>
        <input type="date" id="extension-date" class="w-full border border-gray-300 rounded px-3 py-2">
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Reason for extension *</label>
        <textarea id="extension-reason" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[80px]" 
                  placeholder="Explain why you need more time..."></textarea>
      </div>
      
      <div>
        <label class="flex items-center">
          <input type="checkbox" id="extension-notify" checked class="mr-2">
          <span class="text-sm text-gray-700">Notify supervisor</span>
        </label>
      </div>
    </div>
  `;

  UnionCore.showModal('Request Extension', content, [
    { label: 'Cancel', onclick: 'UnionCore.closeModal()' },
    { label: 'Request', primary: true, onclick: `submitExtensionRequest('${itemName}')` }
  ]);
}

function submitExtensionRequest(itemName) {
  const date = document.getElementById('extension-date')?.value;
  const reason = document.getElementById('extension-reason')?.value;

  if (!date) {
    UnionCore.showToast('Please select a new due date', 'error');
    return;
  }

  if (!reason || reason.trim().length < 10) {
    UnionCore.showToast('Please provide a detailed reason (at least 10 characters)', 'error');
    return;
  }

  UnionCore.closeModal();
  UnionCore.showToast('Submitting extension request...', 'info');

  setTimeout(() => {
    UnionCore.showToast('Extension request submitted', 'success');
  }, 800);
}

function showSignatureModal(itemName) {
  const content = `
    <div class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Signers *</label>
        <div class="space-y-2">
          <label class="flex items-center">
            <input type="checkbox" class="mr-2" value="max">
            <span class="text-sm">Max Chen (Deal Manager)</span>
          </label>
          <label class="flex items-center">
            <input type="checkbox" class="mr-2" value="sarah">
            <span class="text-sm">Sarah Johnson (Legal)</span>
          </label>
          <label class="flex items-center">
            <input type="checkbox" class="mr-2" value="executive">
            <span class="text-sm">Executive (Portfolio Navigator)</span>
          </label>
        </div>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Signature order</label>
        <select id="signature-order" class="w-full border border-gray-300 rounded px-3 py-2">
          <option value="parallel">All sign in parallel</option>
          <option value="sequential">Sequential (in order listed)</option>
        </select>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Message to signers (optional)</label>
        <textarea id="signature-message" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[60px]" 
                  placeholder="Add a message for the signers..."></textarea>
      </div>
    </div>
  `;

  UnionCore.showModal('Send for Signature', content, [
    { label: 'Cancel', onclick: 'UnionCore.closeModal()' },
    { label: 'Send', primary: true, onclick: `sendForSignature('${itemName}')` }
  ]);
}

function sendForSignature(itemName) {
  const checkboxes = document.querySelectorAll('#union-modal input[type="checkbox"]:checked');
  
  if (checkboxes.length === 0) {
    UnionCore.showToast('Please select at least one signer', 'error');
    return;
  }

  UnionCore.closeModal();
  UnionCore.showToast('Sending document for signature...', 'info');

  setTimeout(() => {
    UnionCore.showToast(`${itemName} sent for signature to ${checkboxes.length} signer(s)`, 'success');
  }, 800);
}

function showMitigationModal(itemName) {
  const content = `
    <div class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Mitigation strategy *</label>
        <select id="mitigation-strategy" class="w-full border border-gray-300 rounded px-3 py-2">
          <option value="">Select strategy...</option>
          <option value="avoid">Avoid - Eliminate the risk</option>
          <option value="reduce">Reduce - Minimize impact or likelihood</option>
          <option value="transfer">Transfer - Share or transfer to third party</option>
          <option value="accept">Accept - Acknowledge and monitor</option>
        </select>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Action plan *</label>
        <textarea id="mitigation-plan" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[100px]" 
                  placeholder="Describe the specific actions to mitigate this risk..."></textarea>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Assign to</label>
        <select id="mitigation-assignee" class="w-full border border-gray-300 rounded px-3 py-2">
          <option value="">Select team member...</option>
          <option value="max">Max Chen (Deal Manager)</option>
          <option value="sarah">Sarah Johnson (Legal)</option>
          <option value="tom">Tom Williams (Sales)</option>
        </select>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Target completion date</label>
        <input type="date" id="mitigation-date" class="w-full border border-gray-300 rounded px-3 py-2">
      </div>
    </div>
  `;

  UnionCore.showModal('Mitigate Risk', content, [
    { label: 'Cancel', onclick: 'UnionCore.closeModal()' },
    { label: 'Create Plan', primary: true, onclick: `submitMitigationPlan('${itemName}')` }
  ]);
}

function submitMitigationPlan(itemName) {
  const strategy = document.getElementById('mitigation-strategy')?.value;
  const plan = document.getElementById('mitigation-plan')?.value;

  if (!strategy) {
    UnionCore.showToast('Please select a mitigation strategy', 'error');
    return;
  }

  if (!plan || plan.trim().length < 20) {
    UnionCore.showToast('Please provide a detailed action plan (at least 20 characters)', 'error');
    return;
  }

  UnionCore.closeModal();
  UnionCore.showToast('Creating mitigation plan...', 'info');

  setTimeout(() => {
    UnionCore.showToast('Mitigation plan created successfully', 'success');
  }, 800);
}

function showQuickActionMenu(button, itemName) {
  // Create a dropdown menu near the button
  const menu = document.createElement('div');
  menu.className = 'absolute z-50 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1';
  menu.innerHTML = `
    <button class="w-full text-left px-4 py-2 hover:bg-gray-100 text-sm" onclick="UnionCore.showToast('Viewing details...', 'info')">
      <i class="fa-solid fa-eye mr-2"></i>View Details
    </button>
    <button class="w-full text-left px-4 py-2 hover:bg-gray-100 text-sm" onclick="UnionCore.showToast('Opening editor...', 'info')">
      <i class="fa-solid fa-edit mr-2"></i>Edit
    </button>
    <button class="w-full text-left px-4 py-2 hover:bg-gray-100 text-sm" onclick="showCommentModal('', 'deal', '${itemName}')">
      <i class="fa-solid fa-comment mr-2"></i>Add Comment
    </button>
    <hr class="my-1">
    <button class="w-full text-left px-4 py-2 hover:bg-gray-100 text-sm text-red-600" onclick="showConfirmationModal('archive', 'deal', '${itemName}')">
      <i class="fa-solid fa-archive mr-2"></i>Archive
    </button>
  `;

  // Position menu
  const rect = button.getBoundingClientRect();
  menu.style.position = 'fixed';
  menu.style.top = `${rect.bottom + 5}px`;
  menu.style.left = `${rect.left}px`;

  document.body.appendChild(menu);

  // Close menu on click outside
  setTimeout(() => {
    const closeMenu = (e) => {
      if (!menu.contains(e.target)) {
        menu.remove();
        document.removeEventListener('click', closeMenu);
      }
    };
    document.addEventListener('click', closeMenu);
  }, 100);
}

// Initialize additional handlers
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initAdditionalPhase2Actions);
} else {
  initAdditionalPhase2Actions();
}

window.addEventListener('hashchange', function() {
  setTimeout(initAdditionalPhase2Actions, 100);
});

window.initAdditionalPhase2Actions = initAdditionalPhase2Actions;
window.performEscalation = performEscalation;
window.submitExtensionRequest = submitExtensionRequest;
window.sendForSignature = sendForSignature;
window.submitMitigationPlan = submitMitigationPlan;

// ============================================================================
// UNION Core MVP - Phase 3 Complex Forms Implementation
// Multi-step forms: Add Property, Create Proposal, Import HoT, Create Template, Manage Team
// ============================================================================

// ============================================================================
// MULTI-STEP FORM FRAMEWORK
// ============================================================================

class MultiStepForm {
  constructor(formId, steps, onComplete) {
    this.formId = formId;
    this.steps = steps;
    this.currentStep = 0;
    this.formData = {};
    this.onComplete = onComplete;
  }

  render() {
    const step = this.steps[this.currentStep];
    const progress = ((this.currentStep + 1) / this.steps.length) * 100;

    const content = `
      <div class="multi-step-form">
        <!-- Progress Bar -->
        <div class="mb-6">
          <div class="flex justify-between items-center mb-2">
            <span class="text-sm font-medium text-gray-700">Step ${this.currentStep + 1} of ${this.steps.length}</span>
            <span class="text-sm text-gray-500">${Math.round(progress)}% complete</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2">
            <div class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: ${progress}%"></div>
          </div>
        </div>

        <!-- Step Indicator -->
        <div class="flex justify-between mb-6">
          ${this.steps.map((s, i) => `
            <div class="flex flex-col items-center flex-1">
              <div class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium
                          ${i < this.currentStep ? 'bg-green-500 text-white' : 
                            i === this.currentStep ? 'bg-blue-600 text-white' : 
                            'bg-gray-200 text-gray-500'}">
                ${i < this.currentStep ? '<i class="fa-solid fa-check"></i>' : i + 1}
              </div>
              <span class="text-xs mt-1 text-gray-600 text-center">${s.title}</span>
            </div>
            ${i < this.steps.length - 1 ? '<div class="flex-1 h-0.5 bg-gray-200 self-center mx-2 mt-4"></div>' : ''}
          `).join('')}
        </div>

        <!-- Step Content -->
        <div class="step-content">
          <h3 class="text-lg font-semibold mb-4">${step.title}</h3>
          ${step.description ? `<p class="text-sm text-gray-600 mb-4">${step.description}</p>` : ''}
          ${step.content}
        </div>
      </div>
    `;

    const buttons = [];
    
    if (this.currentStep > 0) {
      buttons.push({ 
        label: 'Previous', 
        onclick: `window.currentForm.previousStep()` 
      });
    }

    if (this.currentStep < this.steps.length - 1) {
      buttons.push({ 
        label: 'Next', 
        primary: true, 
        onclick: `window.currentForm.nextStep()` 
      });
    } else {
      buttons.push({ 
        label: 'Complete', 
        primary: true, 
        onclick: `window.currentForm.complete()` 
      });
    }

    UnionCore.showModal(this.formId, content, buttons);
  }

  nextStep() {
    // Validate current step
    if (!this.validateStep()) {
      return;
    }

    // Save current step data
    this.saveStepData();

    // Move to next step
    if (this.currentStep < this.steps.length - 1) {
      this.currentStep++;
      this.render();
    }
  }

  previousStep() {
    if (this.currentStep > 0) {
      this.currentStep--;
      this.render();
    }
  }

  validateStep() {
    const step = this.steps[this.currentStep];
    if (step.validate) {
      return step.validate();
    }
    return true;
  }

  saveStepData() {
    const step = this.steps[this.currentStep];
    if (step.getData) {
      const data = step.getData();
      this.formData = { ...this.formData, ...data };
    }
  }

  complete() {
    if (!this.validateStep()) {
      return;
    }

    this.saveStepData();
    
    if (this.onComplete) {
      this.onComplete(this.formData);
    }

    UnionCore.closeModal();
  }
}

// ============================================================================
// 1. ADD PROPERTY FORM
// ============================================================================

function initAddPropertyForm() {
  const addPropertyButtons = document.querySelectorAll('[data-action="add-property"]');
  
  addPropertyButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      showAddPropertyForm();
    });
  });
}

function showAddPropertyForm() {
  const steps = [
    {
      title: 'Property Details',
      description: 'Enter basic information about the property',
      content: `
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Property Name *</label>
            <input type="text" id="property-name" class="w-full border border-gray-300 rounded px-3 py-2" 
                   placeholder="e.g., Canary Wharf Office">
          </div>
          
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Property Type *</label>
              <select id="property-type" class="w-full border border-gray-300 rounded px-3 py-2">
                <option value="">Select type...</option>
                <option value="office">Office</option>
                <option value="retail">Retail</option>
                <option value="industrial">Industrial</option>
                <option value="residential">Residential</option>
                <option value="mixed">Mixed Use</option>
              </select>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Status *</label>
              <select id="property-status" class="w-full border border-gray-300 rounded px-3 py-2">
                <option value="available">Available</option>
                <option value="under-offer">Under Offer</option>
                <option value="sold">Sold</option>
              </select>
            </div>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Address *</label>
            <input type="text" id="property-address" class="w-full border border-gray-300 rounded px-3 py-2 mb-2" 
                   placeholder="Street address">
            <div class="grid grid-cols-3 gap-2">
              <input type="text" id="property-city" class="border border-gray-300 rounded px-3 py-2" 
                     placeholder="City">
              <input type="text" id="property-postcode" class="border border-gray-300 rounded px-3 py-2" 
                     placeholder="Postcode">
              <input type="text" id="property-country" class="border border-gray-300 rounded px-3 py-2" 
                     placeholder="Country" value="UK">
            </div>
          </div>
        </div>
      `,
      validate: () => {
        const name = document.getElementById('property-name')?.value;
        const type = document.getElementById('property-type')?.value;
        const address = document.getElementById('property-address')?.value;

        if (!name || name.trim().length < 3) {
          UnionCore.showToast('Please enter a property name (at least 3 characters)', 'error');
          return false;
        }

        if (!type) {
          UnionCore.showToast('Please select a property type', 'error');
          return false;
        }

        if (!address || address.trim().length < 5) {
          UnionCore.showToast('Please enter a valid address', 'error');
          return false;
        }

        return true;
      },
      getData: () => ({
        name: document.getElementById('property-name')?.value,
        type: document.getElementById('property-type')?.value,
        status: document.getElementById('property-status')?.value,
        address: document.getElementById('property-address')?.value,
        city: document.getElementById('property-city')?.value,
        postcode: document.getElementById('property-postcode')?.value,
        country: document.getElementById('property-country')?.value
      })
    },
    {
      title: 'Financial Details',
      description: 'Enter pricing and financial information',
      content: `
        <div class="space-y-4">
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Purchase Price *</label>
              <div class="flex">
                <span class="inline-flex items-center px-3 bg-gray-100 border border-r-0 border-gray-300 rounded-l text-gray-600">£</span>
                <input type="number" id="property-price" class="flex-1 border border-gray-300 rounded-r px-3 py-2" 
                       placeholder="0.00" step="0.01">
              </div>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Annual Rent (if applicable)</label>
              <div class="flex">
                <span class="inline-flex items-center px-3 bg-gray-100 border border-r-0 border-gray-300 rounded-l text-gray-600">£</span>
                <input type="number" id="property-rent" class="flex-1 border border-gray-300 rounded-r px-3 py-2" 
                       placeholder="0.00" step="0.01">
              </div>
            </div>
          </div>
          
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Size (sq ft) *</label>
              <input type="number" id="property-size" class="w-full border border-gray-300 rounded px-3 py-2" 
                     placeholder="0">
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Yield (%)</label>
              <input type="number" id="property-yield" class="w-full border border-gray-300 rounded px-3 py-2" 
                     placeholder="0.00" step="0.01">
            </div>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Valuation Date</label>
            <input type="date" id="property-valuation-date" class="w-full border border-gray-300 rounded px-3 py-2">
          </div>
        </div>
      `,
      validate: () => {
        const price = document.getElementById('property-price')?.value;
        const size = document.getElementById('property-size')?.value;

        if (!price || parseFloat(price) <= 0) {
          UnionCore.showToast('Please enter a valid purchase price', 'error');
          return false;
        }

        if (!size || parseFloat(size) <= 0) {
          UnionCore.showToast('Please enter a valid property size', 'error');
          return false;
        }

        return true;
      },
      getData: () => ({
        price: document.getElementById('property-price')?.value,
        rent: document.getElementById('property-rent')?.value,
        size: document.getElementById('property-size')?.value,
        yield: document.getElementById('property-yield')?.value,
        valuationDate: document.getElementById('property-valuation-date')?.value
      })
    },
    {
      title: 'Additional Information',
      description: 'Add notes and assign ownership',
      content: `
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Assign to Deal Manager</label>
            <select id="property-manager" class="w-full border border-gray-300 rounded px-3 py-2">
              <option value="">Select manager...</option>
              <option value="max">Max Chen</option>
              <option value="tom">Tom Williams</option>
              <option value="dani">Dani Rodriguez</option>
            </select>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Tags</label>
            <input type="text" id="property-tags" class="w-full border border-gray-300 rounded px-3 py-2" 
                   placeholder="Enter tags separated by commas">
            <p class="text-xs text-gray-500 mt-1">e.g., prime location, high yield, refurbished</p>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Notes</label>
            <textarea id="property-notes" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[100px]" 
                      placeholder="Add any additional notes about this property..."></textarea>
          </div>
          
          <div>
            <label class="flex items-center">
              <input type="checkbox" id="property-notify" class="mr-2">
              <span class="text-sm text-gray-700">Notify assigned manager</span>
            </label>
          </div>
        </div>
      `,
      validate: () => true,
      getData: () => ({
        manager: document.getElementById('property-manager')?.value,
        tags: document.getElementById('property-tags')?.value,
        notes: document.getElementById('property-notes')?.value,
        notify: document.getElementById('property-notify')?.checked
      })
    }
  ];

  const form = new MultiStepForm('Add Property', steps, (data) => {
    UnionCore.showToast('Creating property...', 'info');
    
    setTimeout(() => {
      UnionCore.showToast(`Property "${data.name}" created successfully`, 'success');
      
      if (data.notify && data.manager) {
        setTimeout(() => {
          UnionCore.showToast('Manager notified', 'info');
        }, 500);
      }
      
      console.log('Property created:', data);
    }, 1000);
  });

  window.currentForm = form;
  form.render();
}

// ============================================================================
// 2. CREATE PROPOSAL FORM
// ============================================================================

function initCreateProposalForm() {
  const createProposalButtons = document.querySelectorAll('[data-action="create-proposal"]');
  
  createProposalButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      showCreateProposalForm();
    });
  });
}

function showCreateProposalForm() {
  const steps = [
    {
      title: 'Proposal Basics',
      description: 'Select template and enter basic information',
      content: `
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Select Template</label>
            <div class="grid grid-cols-2 gap-3">
              <label class="flex items-center p-3 border-2 border-gray-200 rounded cursor-pointer hover:border-blue-500 transition">
                <input type="radio" name="proposal-template" value="standard" checked class="mr-3">
                <div>
                  <div class="font-medium">Standard Proposal</div>
                  <div class="text-xs text-gray-500">Basic deal proposal</div>
                </div>
              </label>
              
              <label class="flex items-center p-3 border-2 border-gray-200 rounded cursor-pointer hover:border-blue-500 transition">
                <input type="radio" name="proposal-template" value="detailed" class="mr-3">
                <div>
                  <div class="font-medium">Detailed Proposal</div>
                  <div class="text-xs text-gray-500">Comprehensive analysis</div>
                </div>
              </label>
            </div>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Proposal Title *</label>
            <input type="text" id="proposal-title" class="w-full border border-gray-300 rounded px-3 py-2" 
                   placeholder="e.g., Shoreditch Retail Space Acquisition">
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Deal Type *</label>
            <select id="proposal-deal-type" class="w-full border border-gray-300 rounded px-3 py-2">
              <option value="">Select type...</option>
              <option value="acquisition">Acquisition</option>
              <option value="disposal">Disposal</option>
              <option value="lease">Lease</option>
              <option value="development">Development</option>
            </select>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Target Completion Date</label>
            <input type="date" id="proposal-completion-date" class="w-full border border-gray-300 rounded px-3 py-2">
          </div>
        </div>
      `,
      validate: () => {
        const title = document.getElementById('proposal-title')?.value;
        const dealType = document.getElementById('proposal-deal-type')?.value;

        if (!title || title.trim().length < 5) {
          UnionCore.showToast('Please enter a proposal title (at least 5 characters)', 'error');
          return false;
        }

        if (!dealType) {
          UnionCore.showToast('Please select a deal type', 'error');
          return false;
        }

        return true;
      },
      getData: () => ({
        template: document.querySelector('input[name="proposal-template"]:checked')?.value,
        title: document.getElementById('proposal-title')?.value,
        dealType: document.getElementById('proposal-deal-type')?.value,
        completionDate: document.getElementById('proposal-completion-date')?.value
      })
    },
    {
      title: 'Financial Terms',
      description: 'Enter financial details and terms',
      content: `
        <div class="space-y-4">
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Proposed Value *</label>
              <div class="flex">
                <span class="inline-flex items-center px-3 bg-gray-100 border border-r-0 border-gray-300 rounded-l text-gray-600">£</span>
                <input type="number" id="proposal-value" class="flex-1 border border-gray-300 rounded-r px-3 py-2" 
                       placeholder="0.00" step="0.01">
              </div>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Deposit Amount</label>
              <div class="flex">
                <span class="inline-flex items-center px-3 bg-gray-100 border border-r-0 border-gray-300 rounded-l text-gray-600">£</span>
                <input type="number" id="proposal-deposit" class="flex-1 border border-gray-300 rounded-r px-3 py-2" 
                       placeholder="0.00" step="0.01">
              </div>
            </div>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Payment Terms</label>
            <select id="proposal-payment-terms" class="w-full border border-gray-300 rounded px-3 py-2">
              <option value="cash">Cash Payment</option>
              <option value="installments">Installments</option>
              <option value="deferred">Deferred Payment</option>
              <option value="mixed">Mixed Terms</option>
            </select>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Key Terms & Conditions</label>
            <textarea id="proposal-terms" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[100px]" 
                      placeholder="Enter key terms and conditions..."></textarea>
          </div>
        </div>
      `,
      validate: () => {
        const value = document.getElementById('proposal-value')?.value;

        if (!value || parseFloat(value) <= 0) {
          UnionCore.showToast('Please enter a valid proposed value', 'error');
          return false;
        }

        return true;
      },
      getData: () => ({
        value: document.getElementById('proposal-value')?.value,
        deposit: document.getElementById('proposal-deposit')?.value,
        paymentTerms: document.getElementById('proposal-payment-terms')?.value,
        terms: document.getElementById('proposal-terms')?.value
      })
    },
    {
      title: 'Review & Submit',
      description: 'Review proposal and assign reviewers',
      content: `
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Assign Reviewers</label>
            <div class="space-y-2">
              <label class="flex items-center">
                <input type="checkbox" class="mr-2" value="sarah">
                <span class="text-sm">Sarah Johnson (Legal)</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" class="mr-2" value="executive">
                <span class="text-sm">Executive (Portfolio Navigator)</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" class="mr-2" value="finance">
                <span class="text-sm">Finance Team</span>
              </label>
            </div>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Priority</label>
            <select id="proposal-priority" class="w-full border border-gray-300 rounded px-3 py-2">
              <option value="normal">Normal</option>
              <option value="high">High</option>
              <option value="urgent">Urgent</option>
            </select>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Additional Notes</label>
            <textarea id="proposal-notes" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[80px]" 
                      placeholder="Add any additional notes for reviewers..."></textarea>
          </div>
          
          <div class="bg-blue-50 border border-blue-200 rounded p-3">
            <p class="text-sm text-blue-800">
              <i class="fa-solid fa-info-circle mr-2"></i>
              Proposal will be sent to selected reviewers for approval.
            </p>
          </div>
        </div>
      `,
      validate: () => true,
      getData: () => {
        const reviewers = Array.from(document.querySelectorAll('#union-modal input[type="checkbox"]:checked'))
          .map(cb => cb.value);
        
        return {
          reviewers,
          priority: document.getElementById('proposal-priority')?.value,
          notes: document.getElementById('proposal-notes')?.value
        };
      }
    }
  ];

  const form = new MultiStepForm('Create Proposal', steps, (data) => {
    UnionCore.showToast('Creating proposal...', 'info');
    
    setTimeout(() => {
      UnionCore.showToast(`Proposal "${data.title}" created successfully`, 'success');
      
      if (data.reviewers && data.reviewers.length > 0) {
        setTimeout(() => {
          UnionCore.showToast(`Sent to ${data.reviewers.length} reviewer(s)`, 'info');
        }, 500);
      }
      
      console.log('Proposal created:', data);
    }, 1000);
  });

  window.currentForm = form;
  form.render();
}

// ============================================================================
// INITIALIZATION
// ============================================================================

function initPhase3Functionality() {
  console.log('Initializing Phase 3 complex forms...');
  
  initAddPropertyForm();
  initCreateProposalForm();
  
  console.log('Phase 3 functionality initialized ✅');
}

// Auto-initialize when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initPhase3Functionality);
} else {
  initPhase3Functionality();
}

// Re-initialize when hash changes (for SPA navigation)
window.addEventListener('hashchange', function() {
  setTimeout(initPhase3Functionality, 100);
});

// Export for global access
window.initPhase3Functionality = initPhase3Functionality;
window.MultiStepForm = MultiStepForm;
window.showAddPropertyForm = showAddPropertyForm;
window.showCreateProposalForm = showCreateProposalForm;



// ============================================================================
// 3. IMPORT HOT FORM
// ============================================================================

function initImportHoTForm() {
  const importButtons = document.querySelectorAll('[data-action="import-hot"]');
  
  importButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      showImportHoTForm();
    });
  });
}

function showImportHoTForm() {
  const steps = [
    {
      title: 'Upload Document',
      description: 'Select the HoT document to import',
      content: `
        <div class="space-y-4">
          <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center">
            <input type="file" id="hot-file" accept=".pdf,.docx,.doc" class="hidden">
            <label for="hot-file" class="cursor-pointer">
              <i class="fa-solid fa-cloud-upload text-4xl text-gray-400 mb-3"></i>
              <p class="text-sm font-medium text-gray-700">Click to upload or drag and drop</p>
              <p class="text-xs text-gray-500 mt-1">PDF, DOCX up to 10MB</p>
            </label>
            <div id="file-info" class="mt-4 hidden">
              <div class="inline-flex items-center px-4 py-2 bg-blue-50 border border-blue-200 rounded">
                <i class="fa-solid fa-file-pdf text-blue-600 mr-2"></i>
                <span id="file-name" class="text-sm text-blue-800"></span>
                <button onclick="document.getElementById('hot-file').value=''; document.getElementById('file-info').classList.add('hidden')" 
                        class="ml-3 text-blue-600 hover:text-blue-800">
                  <i class="fa-solid fa-times"></i>
                </button>
              </div>
            </div>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Document Type</label>
            <select id="hot-doc-type" class="w-full border border-gray-300 rounded px-3 py-2">
              <option value="hot">Heads of Terms</option>
              <option value="contract">Contract</option>
              <option value="agreement">Agreement</option>
              <option value="other">Other</option>
            </select>
          </div>
        </div>
      `,
      validate: () => {
        const fileInput = document.getElementById('hot-file');
        if (!fileInput?.files || fileInput.files.length === 0) {
          UnionCore.showToast('Please select a file to upload', 'error');
          return false;
        }
        return true;
      },
      getData: () => {
        const fileInput = document.getElementById('hot-file');
        return {
          fileName: fileInput?.files[0]?.name,
          fileSize: fileInput?.files[0]?.size,
          docType: document.getElementById('hot-doc-type')?.value
        };
      }
    },
    {
      title: 'Extract Information',
      description: 'Review and edit extracted information',
      content: `
        <div class="space-y-4">
          <div class="bg-green-50 border border-green-200 rounded p-3 mb-4">
            <p class="text-sm text-green-800">
              <i class="fa-solid fa-check-circle mr-2"></i>
              Document parsed successfully. Review the extracted information below.
            </p>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Deal Title *</label>
            <input type="text" id="hot-deal-title" class="w-full border border-gray-300 rounded px-3 py-2" 
                   value="Shoreditch Retail Space">
          </div>
          
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Deal Value</label>
              <div class="flex">
                <span class="inline-flex items-center px-3 bg-gray-100 border border-r-0 border-gray-300 rounded-l text-gray-600">£</span>
                <input type="number" id="hot-deal-value" class="flex-1 border border-gray-300 rounded-r px-3 py-2" 
                       value="850000" step="0.01">
              </div>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Deal Stage</label>
              <select id="hot-deal-stage" class="w-full border border-gray-300 rounded px-3 py-2">
                <option value="initial">Initial Discussion</option>
                <option value="negotiation" selected>Negotiation</option>
                <option value="due-diligence">Due Diligence</option>
                <option value="final">Final Review</option>
              </select>
            </div>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Key Parties</label>
            <textarea id="hot-parties" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[60px]">Buyer: UNION Properties Ltd
Seller: Retail Ventures PLC</textarea>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Key Terms</label>
            <textarea id="hot-key-terms" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[80px]">- Completion within 90 days
- Subject to planning permission
- Vacant possession on completion</textarea>
          </div>
        </div>
      `,
      validate: () => {
        const title = document.getElementById('hot-deal-title')?.value;
        if (!title || title.trim().length < 3) {
          UnionCore.showToast('Please enter a deal title', 'error');
          return false;
        }
        return true;
      },
      getData: () => ({
        dealTitle: document.getElementById('hot-deal-title')?.value,
        dealValue: document.getElementById('hot-deal-value')?.value,
        dealStage: document.getElementById('hot-deal-stage')?.value,
        parties: document.getElementById('hot-parties')?.value,
        keyTerms: document.getElementById('hot-key-terms')?.value
      })
    },
    {
      title: 'Assign & Complete',
      description: 'Assign deal manager and finalize import',
      content: `
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Assign to Deal Manager</label>
            <select id="hot-manager" class="w-full border border-gray-300 rounded px-3 py-2">
              <option value="">Select manager...</option>
              <option value="max">Max Chen</option>
              <option value="tom">Tom Williams</option>
              <option value="dani">Dani Rodriguez</option>
            </select>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Add to Pipeline</label>
            <select id="hot-pipeline" class="w-full border border-gray-300 rounded px-3 py-2">
              <option value="active">Active Deals</option>
              <option value="pending">Pending Review</option>
              <option value="archived">Archived</option>
            </select>
          </div>
          
          <div>
            <label class="flex items-center">
              <input type="checkbox" id="hot-create-tasks" checked class="mr-2">
              <span class="text-sm text-gray-700">Create follow-up tasks automatically</span>
            </label>
          </div>
          
          <div>
            <label class="flex items-center">
              <input type="checkbox" id="hot-notify-team" checked class="mr-2">
              <span class="text-sm text-gray-700">Notify team members</span>
            </label>
          </div>
          
          <div class="bg-blue-50 border border-blue-200 rounded p-3">
            <p class="text-sm text-blue-800">
              <i class="fa-solid fa-info-circle mr-2"></i>
              The original document will be stored in Document Management.
            </p>
          </div>
        </div>
      `,
      validate: () => true,
      getData: () => ({
        manager: document.getElementById('hot-manager')?.value,
        pipeline: document.getElementById('hot-pipeline')?.value,
        createTasks: document.getElementById('hot-create-tasks')?.checked,
        notifyTeam: document.getElementById('hot-notify-team')?.checked
      })
    }
  ];

  const form = new MultiStepForm('Import Heads of Terms', steps, (data) => {
    UnionCore.showToast('Importing document...', 'info');
    
    setTimeout(() => {
      UnionCore.showToast(`HoT "${data.dealTitle}" imported successfully`, 'success');
      
      if (data.createTasks) {
        setTimeout(() => {
          UnionCore.showToast('Follow-up tasks created', 'info');
        }, 500);
      }
      
      if (data.notifyTeam) {
        setTimeout(() => {
          UnionCore.showToast('Team notified', 'info');
        }, 1000);
      }
      
      console.log('HoT imported:', data);
    }, 1500);
  });

  window.currentForm = form;
  form.render();
  
  // Add file input handler
  setTimeout(() => {
    const fileInput = document.getElementById('hot-file');
    if (fileInput) {
      fileInput.addEventListener('change', function() {
        if (this.files && this.files[0]) {
          document.getElementById('file-name').textContent = this.files[0].name;
          document.getElementById('file-info').classList.remove('hidden');
        }
      });
    }
  }, 100);
}

// ============================================================================
// 4. CREATE TEMPLATE FORM
// ============================================================================

function initCreateTemplateForm() {
  const createTemplateButtons = document.querySelectorAll('[data-action="create-template"]');
  
  createTemplateButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      showCreateTemplateForm();
    });
  });
}

function showCreateTemplateForm() {
  const content = `
    <div class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Template Name *</label>
        <input type="text" id="template-name" class="w-full border border-gray-300 rounded px-3 py-2" 
               placeholder="e.g., Standard Office Lease HoT">
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Template Type *</label>
        <select id="template-type" class="w-full border border-gray-300 rounded px-3 py-2">
          <option value="">Select type...</option>
          <option value="hot">Heads of Terms</option>
          <option value="proposal">Proposal</option>
          <option value="contract">Contract</option>
          <option value="letter">Letter</option>
        </select>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Category</label>
        <select id="template-category" class="w-full border border-gray-300 rounded px-3 py-2">
          <option value="acquisition">Acquisition</option>
          <option value="disposal">Disposal</option>
          <option value="lease">Lease</option>
          <option value="development">Development</option>
          <option value="general">General</option>
        </select>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
        <textarea id="template-description" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[80px]" 
                  placeholder="Describe when to use this template..."></textarea>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Template Content *</label>
        <textarea id="template-content" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[200px] font-mono text-sm" 
                  placeholder="Enter template content here...

Use {{placeholders}} for dynamic fields, e.g.:
- {{deal_name}}
- {{buyer_name}}
- {{purchase_price}}
- {{completion_date}}"></textarea>
        <p class="text-xs text-gray-500 mt-1">Use {{field_name}} syntax for dynamic fields</p>
      </div>
      
      <div>
        <label class="flex items-center">
          <input type="checkbox" id="template-shared" class="mr-2">
          <span class="text-sm text-gray-700">Share with all team members</span>
        </label>
      </div>
    </div>
  `;

  UnionCore.showModal('Create Template', content, [
    { label: 'Cancel', onclick: 'UnionCore.closeModal()' },
    { label: 'Create Template', primary: true, onclick: 'submitTemplateCreation()' }
  ]);
}

function submitTemplateCreation() {
  const name = document.getElementById('template-name')?.value;
  const type = document.getElementById('template-type')?.value;
  const content = document.getElementById('template-content')?.value;

  if (!name || name.trim().length < 3) {
    UnionCore.showToast('Please enter a template name (at least 3 characters)', 'error');
    return;
  }

  if (!type) {
    UnionCore.showToast('Please select a template type', 'error');
    return;
  }

  if (!content || content.trim().length < 20) {
    UnionCore.showToast('Please enter template content (at least 20 characters)', 'error');
    return;
  }

  UnionCore.closeModal();
  UnionCore.showToast('Creating template...', 'info');

  setTimeout(() => {
    UnionCore.showToast(`Template "${name}" created successfully`, 'success');
    
    const shared = document.getElementById('template-shared')?.checked;
    if (shared) {
      setTimeout(() => {
        UnionCore.showToast('Template shared with team', 'info');
      }, 500);
    }
    
    console.log('Template created:', {
      name,
      type,
      category: document.getElementById('template-category')?.value,
      description: document.getElementById('template-description')?.value,
      content,
      shared
    });
  }, 1000);
}

// ============================================================================
// 5. MANAGE TEAM FORM
// ============================================================================

function initManageTeamForm() {
  const manageTeamButtons = document.querySelectorAll('[data-action="manage-team"]');
  
  manageTeamButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      showManageTeamForm();
    });
  });
}

function showManageTeamForm() {
  const content = `
    <div class="space-y-4">
      <div class="flex justify-between items-center mb-4">
        <h4 class="font-medium text-gray-900">Team Members</h4>
        <button onclick="showAddTeamMemberForm()" class="px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700">
          <i class="fa-solid fa-plus mr-1"></i>Add Member
        </button>
      </div>
      
      <div class="space-y-3">
        <!-- Executive -->
        <div class="flex items-center justify-between p-3 border border-gray-200 rounded">
          <div class="flex items-center">
            <div class="w-10 h-10 rounded-full bg-blue-600 text-white flex items-center justify-center font-medium mr-3">
              E
            </div>
            <div>
              <div class="font-medium">Executive</div>
              <div class="text-sm text-gray-500">Portfolio Navigator</div>
            </div>
          </div>
          <div class="flex items-center space-x-2">
            <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded">Admin</span>
            <button class="text-gray-400 hover:text-gray-600">
              <i class="fa-solid fa-ellipsis-v"></i>
            </button>
          </div>
        </div>
        
        <!-- Max Chen -->
        <div class="flex items-center justify-between p-3 border border-gray-200 rounded">
          <div class="flex items-center">
            <div class="w-10 h-10 rounded-full bg-green-600 text-white flex items-center justify-center font-medium mr-3">
              MC
            </div>
            <div>
              <div class="font-medium">Max Chen</div>
              <div class="text-sm text-gray-500">Deal Manager</div>
            </div>
          </div>
          <div class="flex items-center space-x-2">
            <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">Manager</span>
            <button onclick="editTeamMember('max')" class="text-blue-600 hover:text-blue-800 text-sm">
              Edit
            </button>
          </div>
        </div>
        
        <!-- Dani Rodriguez -->
        <div class="flex items-center justify-between p-3 border border-gray-200 rounded">
          <div class="flex items-center">
            <div class="w-10 h-10 rounded-full bg-orange-600 text-white flex items-center justify-center font-medium mr-3">
              DR
            </div>
            <div>
              <div class="font-medium">Dani Rodriguez</div>
              <div class="text-sm text-gray-500">Operations</div>
            </div>
          </div>
          <div class="flex items-center space-x-2">
            <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Member</span>
            <button onclick="editTeamMember('dani')" class="text-blue-600 hover:text-blue-800 text-sm">
              Edit
            </button>
          </div>
        </div>
        
        <!-- Tom Williams -->
        <div class="flex items-center justify-between p-3 border border-gray-200 rounded">
          <div class="flex items-center">
            <div class="w-10 h-10 rounded-full bg-red-600 text-white flex items-center justify-center font-medium mr-3">
              TW
            </div>
            <div>
              <div class="font-medium">Tom Williams</div>
              <div class="text-sm text-gray-500">Sales</div>
            </div>
          </div>
          <div class="flex items-center space-x-2">
            <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Member</span>
            <button onclick="editTeamMember('tom')" class="text-blue-600 hover:text-blue-800 text-sm">
              Edit
            </button>
          </div>
        </div>
        
        <!-- Sarah Johnson -->
        <div class="flex items-center justify-between p-3 border border-gray-200 rounded">
          <div class="flex items-center">
            <div class="w-10 h-10 rounded-full bg-purple-600 text-white flex items-center justify-center font-medium mr-3">
              SJ
            </div>
            <div>
              <div class="font-medium">Sarah Johnson</div>
              <div class="text-sm text-gray-500">Legal</div>
            </div>
          </div>
          <div class="flex items-center space-x-2">
            <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Member</span>
            <button onclick="editTeamMember('sarah')" class="text-blue-600 hover:text-blue-800 text-sm">
              Edit
            </button>
          </div>
        </div>
      </div>
      
      <div class="pt-4 border-t border-gray-200">
        <div class="text-sm text-gray-600">
          <i class="fa-solid fa-users mr-2"></i>
          Total: 5 team members
        </div>
      </div>
    </div>
  `;

  UnionCore.showModal('Manage Team', content, [
    { label: 'Close', onclick: 'UnionCore.closeModal()' }
  ]);
}

function showAddTeamMemberForm() {
  const content = `
    <div class="space-y-4">
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">First Name *</label>
          <input type="text" id="member-first-name" class="w-full border border-gray-300 rounded px-3 py-2" 
                 placeholder="John">
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Last Name *</label>
          <input type="text" id="member-last-name" class="w-full border border-gray-300 rounded px-3 py-2" 
                 placeholder="Doe">
        </div>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Email *</label>
        <input type="email" id="member-email" class="w-full border border-gray-300 rounded px-3 py-2" 
               placeholder="john.doe@example.com">
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Role *</label>
        <select id="member-role" class="w-full border border-gray-300 rounded px-3 py-2">
          <option value="">Select role...</option>
          <option value="manager">Deal Manager</option>
          <option value="operations">Operations</option>
          <option value="sales">Sales</option>
          <option value="legal">Legal</option>
          <option value="finance">Finance</option>
        </select>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Permission Level *</label>
        <select id="member-permission" class="w-full border border-gray-300 rounded px-3 py-2">
          <option value="member">Member - View and edit assigned items</option>
          <option value="manager">Manager - Full access to deals and documents</option>
          <option value="admin">Admin - Full system access</option>
        </select>
      </div>
      
      <div>
        <label class="flex items-center">
          <input type="checkbox" id="member-send-invite" checked class="mr-2">
          <span class="text-sm text-gray-700">Send invitation email</span>
        </label>
      </div>
    </div>
  `;

  UnionCore.showModal('Add Team Member', content, [
    { label: 'Cancel', onclick: 'showManageTeamForm()' },
    { label: 'Add Member', primary: true, onclick: 'submitAddTeamMember()' }
  ]);
}

function submitAddTeamMember() {
  const firstName = document.getElementById('member-first-name')?.value;
  const lastName = document.getElementById('member-last-name')?.value;
  const email = document.getElementById('member-email')?.value;
  const role = document.getElementById('member-role')?.value;

  if (!firstName || !lastName) {
    UnionCore.showToast('Please enter first and last name', 'error');
    return;
  }

  if (!email || !email.includes('@')) {
    UnionCore.showToast('Please enter a valid email address', 'error');
    return;
  }

  if (!role) {
    UnionCore.showToast('Please select a role', 'error');
    return;
  }

  UnionCore.closeModal();
  UnionCore.showToast('Adding team member...', 'info');

  setTimeout(() => {
    UnionCore.showToast(`${firstName} ${lastName} added to team`, 'success');
    
    const sendInvite = document.getElementById('member-send-invite')?.checked;
    if (sendInvite) {
      setTimeout(() => {
        UnionCore.showToast('Invitation email sent', 'info');
      }, 500);
    }
    
    console.log('Team member added:', {
      firstName,
      lastName,
      email,
      role,
      permission: document.getElementById('member-permission')?.value,
      sendInvite
    });
  }, 1000);
}

function editTeamMember(memberId) {
  UnionCore.showToast('Edit functionality coming soon', 'info');
  console.log('Edit team member:', memberId);
}

// Update initialization
function initPhase3Functionality() {
  console.log('Initializing Phase 3 complex forms...');
  
  initAddPropertyForm();
  initCreateProposalForm();
  initImportHoTForm();
  initCreateTemplateForm();
  initManageTeamForm();
  
  console.log('Phase 3 functionality initialized ✅');
}

// Export additional functions
window.showImportHoTForm = showImportHoTForm;
window.showCreateTemplateForm = showCreateTemplateForm;
window.submitTemplateCreation = submitTemplateCreation;
window.showManageTeamForm = showManageTeamForm;
window.showAddTeamMemberForm = showAddTeamMemberForm;
window.submitAddTeamMember = submitAddTeamMember;
window.editTeamMember = editTeamMember;

  document.addEventListener('DOMContentLoaded', initAdditionalPhase2Actions);
} else {
  initAdditionalPhase2Actions();
}

window.addEventListener('hashchange', function() {
  setTimeout(initAdditionalPhase2Actions, 100);
});

window.initAdditionalPhase2Actions = initAdditionalPhase2Actions;
window.performEscalation = performEscalation;
window.submitExtensionRequest = submitExtensionRequest;
window.sendForSignature = sendForSignature;
// ============================================================================
// UNION Core MVP - Phase 4A: Critical Orphans Implementation
// View Details, Approve, Upload, Edit (40 elements)
// ============================================================================

// ============================================================================
// 1. VIEW DETAILS MODAL (22 instances across 10 pages)
// ============================================================================

function initViewDetailsButtons() {
  const viewDetailsButtons = document.querySelectorAll('[data-action="view-details"]');
  
  viewDetailsButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      
      const itemType = this.getAttribute('data-item-type') || 'item';
      const itemId = this.getAttribute('data-item-id') || 'unknown';
      const itemName = this.getAttribute('data-item-name') || 'Item';
      
      showViewDetailsModal(itemType, itemId, itemName);
    });
  });
}

function showViewDetailsModal(itemType, itemId, itemName) {
  // Generate content based on item type
  let content = '';
  
  switch(itemType) {
    case 'approval':
      content = generateApprovalDetails(itemId, itemName);
      break;
    case 'risk':
      content = generateRiskDetails(itemId, itemName);
      break;
    case 'task':
      content = generateTaskDetails(itemId, itemName);
      break;
    case 'document':
      content = generateDocumentDetails(itemId, itemName);
      break;
    case 'deal':
      content = generateDealDetails(itemId, itemName);
      break;
    case 'hot':
      content = generateHoTDetails(itemId, itemName);
      break;
    case 'notification':
      content = generateNotificationDetails(itemId, itemName);
      break;
    default:
      content = generateGenericDetails(itemId, itemName);
  }
  
  UnionCore.showModal(`${itemName} - Details`, content, [
    { label: 'Close', onclick: 'UnionCore.closeModal()' }
  ]);
}

function generateApprovalDetails(id, name) {
  return `
    <div class="space-y-4">
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="text-sm font-medium text-gray-700">Request ID</label>
          <p class="text-gray-900">${id}</p>
        </div>
        <div>
          <label class="text-sm font-medium text-gray-700">Status</label>
          <p><span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded">Pending</span></p>
        </div>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Requested By</label>
        <p class="text-gray-900">Max Chen</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Request Date</label>
        <p class="text-gray-900">October 15, 2025</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Description</label>
        <p class="text-gray-900">Approval required for ${name}</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Amount</label>
        <p class="text-gray-900 text-lg font-semibold">£850,000</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Supporting Documents</label>
        <div class="mt-2 space-y-2">
          <div class="flex items-center text-sm text-blue-600 hover:text-blue-800 cursor-pointer">
            <i class="fa-solid fa-file-pdf mr-2"></i>
            <span>Proposal_Document.pdf</span>
          </div>
          <div class="flex items-center text-sm text-blue-600 hover:text-blue-800 cursor-pointer">
            <i class="fa-solid fa-file-excel mr-2"></i>
            <span>Financial_Analysis.xlsx</span>
          </div>
        </div>
      </div>
      
      <div class="pt-4 border-t border-gray-200">
        <div class="flex gap-3">
          <button onclick="handleQuickApprove('${id}')" class="flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded font-medium">
            <i class="fa-solid fa-check mr-2"></i>Approve
          </button>
          <button onclick="handleQuickReject('${id}')" class="flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded font-medium">
            <i class="fa-solid fa-times mr-2"></i>Reject
          </button>
        </div>
      </div>
    </div>
  `;
}

function generateRiskDetails(id, name) {
  return `
    <div class="space-y-4">
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="text-sm font-medium text-gray-700">Risk ID</label>
          <p class="text-gray-900">${id}</p>
        </div>
        <div>
          <label class="text-sm font-medium text-gray-700">Severity</label>
          <p><span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded font-medium">High</span></p>
        </div>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Risk Category</label>
        <p class="text-gray-900">Financial</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Description</label>
        <p class="text-gray-900">${name}</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Impact</label>
        <p class="text-gray-900">Potential revenue loss of £500K if not mitigated</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Probability</label>
        <p class="text-gray-900">65%</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Mitigation Strategy</label>
        <p class="text-gray-900">Implement additional due diligence checks and secure backup financing</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Owner</label>
        <p class="text-gray-900">Tom Williams</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Last Updated</label>
        <p class="text-gray-900">October 20, 2025</p>
      </div>
    </div>
  `;
}

function generateTaskDetails(id, name) {
  return `
    <div class="space-y-4">
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="text-sm font-medium text-gray-700">Task ID</label>
          <p class="text-gray-900">${id}</p>
        </div>
        <div>
          <label class="text-sm font-medium text-gray-700">Priority</label>
          <p><span class="px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded font-medium">High</span></p>
        </div>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Task Name</label>
        <p class="text-gray-900 font-medium">${name}</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Assigned To</label>
        <p class="text-gray-900">Dani Rodriguez</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Due Date</label>
        <p class="text-gray-900">October 25, 2025</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Progress</label>
        <div class="mt-2">
          <div class="w-full bg-gray-200 rounded-full h-2">
            <div class="bg-blue-600 h-2 rounded-full" style="width: 60%"></div>
          </div>
          <p class="text-sm text-gray-600 mt-1">60% complete</p>
        </div>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Description</label>
        <p class="text-gray-900">Complete financial analysis and prepare recommendation report</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Comments</label>
        <div class="mt-2 space-y-2 max-h-40 overflow-y-auto">
          <div class="bg-gray-50 p-3 rounded">
            <p class="text-sm text-gray-900">Working on final calculations - Max Chen</p>
            <p class="text-xs text-gray-500 mt-1">2 hours ago</p>
          </div>
        </div>
      </div>
    </div>
  `;
}

function generateDocumentDetails(id, name) {
  return `
    <div class="space-y-4">
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="text-sm font-medium text-gray-700">Document ID</label>
          <p class="text-gray-900">${id}</p>
        </div>
        <div>
          <label class="text-sm font-medium text-gray-700">Type</label>
          <p class="text-gray-900">PDF</p>
        </div>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">File Name</label>
        <p class="text-gray-900 font-medium">${name}</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Size</label>
        <p class="text-gray-900">2.4 MB</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Uploaded By</label>
        <p class="text-gray-900">Sarah Johnson</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Upload Date</label>
        <p class="text-gray-900">October 18, 2025</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Category</label>
        <p class="text-gray-900">Legal Documents</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Status</label>
        <p><span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Approved</span></p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Version</label>
        <p class="text-gray-900">v2.1</p>
      </div>
      
      <div class="pt-4 border-t border-gray-200">
        <button class="w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded font-medium">
          <i class="fa-solid fa-download mr-2"></i>Download Document
        </button>
      </div>
    </div>
  `;
}

function generateDealDetails(id, name) {
  return `
    <div class="space-y-4">
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="text-sm font-medium text-gray-700">Deal ID</label>
          <p class="text-gray-900">${id}</p>
        </div>
        <div>
          <label class="text-sm font-medium text-gray-700">Stage</label>
          <p><span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">Negotiation</span></p>
        </div>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Deal Name</label>
        <p class="text-gray-900 font-medium">${name}</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Value</label>
        <p class="text-gray-900 text-lg font-semibold">£1,250,000</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Deal Manager</label>
        <p class="text-gray-900">Max Chen</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Expected Close Date</label>
        <p class="text-gray-900">November 30, 2025</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Property Type</label>
        <p class="text-gray-900">Office</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Location</label>
        <p class="text-gray-900">Canary Wharf, London</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Key Milestones</label>
        <div class="mt-2 space-y-2">
          <div class="flex items-center text-sm">
            <i class="fa-solid fa-check-circle text-green-600 mr-2"></i>
            <span>Initial Proposal Submitted</span>
          </div>
          <div class="flex items-center text-sm">
            <i class="fa-solid fa-check-circle text-green-600 mr-2"></i>
            <span>Due Diligence Completed</span>
          </div>
          <div class="flex items-center text-sm">
            <i class="fa-solid fa-circle text-gray-300 mr-2"></i>
            <span>Final Approval Pending</span>
          </div>
        </div>
      </div>
    </div>
  `;
}

function generateHoTDetails(id, name) {
  return `
    <div class="space-y-4">
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="text-sm font-medium text-gray-700">HoT ID</label>
          <p class="text-gray-900">${id}</p>
        </div>
        <div>
          <label class="text-sm font-medium text-gray-700">Status</label>
          <p><span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded">Under Review</span></p>
        </div>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">HoT Name</label>
        <p class="text-gray-900 font-medium">${name}</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Deal Value</label>
        <p class="text-gray-900 text-lg font-semibold">£850,000</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Parties</label>
        <p class="text-gray-900">Buyer: UNION Properties Ltd<br>Seller: Retail Ventures PLC</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Key Terms</label>
        <ul class="list-disc list-inside text-sm text-gray-900 space-y-1">
          <li>Completion within 90 days</li>
          <li>Subject to planning permission</li>
          <li>Vacant possession on completion</li>
        </ul>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Created By</label>
        <p class="text-gray-900">Tom Williams</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Created Date</label>
        <p class="text-gray-900">October 10, 2025</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Last Modified</label>
        <p class="text-gray-900">October 19, 2025</p>
      </div>
    </div>
  `;
}

function generateNotificationDetails(id, name) {
  return `
    <div class="space-y-4">
      <div class="grid grid-cols-2 gap-4">
        <div>
          <label class="text-sm font-medium text-gray-700">Notification ID</label>
          <p class="text-gray-900">${id}</p>
        </div>
        <div>
          <label class="text-sm font-medium text-gray-700">Type</label>
          <p><span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">Action Required</span></p>
        </div>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Subject</label>
        <p class="text-gray-900 font-medium">${name}</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Message</label>
        <p class="text-gray-900">Your approval is required for the Shoreditch Retail Space deal. Please review the proposal and provide your decision.</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">From</label>
        <p class="text-gray-900">Max Chen</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Received</label>
        <p class="text-gray-900">October 21, 2025 at 9:30 AM</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Priority</label>
        <p><span class="px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded font-medium">High</span></p>
      </div>
      
      <div class="pt-4 border-t border-gray-200">
        <button class="w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded font-medium">
          <i class="fa-solid fa-arrow-right mr-2"></i>Go to Item
        </button>
      </div>
    </div>
  `;
}

function generateGenericDetails(id, name) {
  return `
    <div class="space-y-4">
      <div>
        <label class="text-sm font-medium text-gray-700">ID</label>
        <p class="text-gray-900">${id}</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Name</label>
        <p class="text-gray-900 font-medium">${name}</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Status</label>
        <p><span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">Active</span></p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Created</label>
        <p class="text-gray-900">October 15, 2025</p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Last Updated</label>
        <p class="text-gray-900">October 20, 2025</p>
      </div>
      
      <div class="bg-blue-50 border border-blue-200 rounded p-3">
        <p class="text-sm text-blue-800">
          <i class="fa-solid fa-info-circle mr-2"></i>
          Additional details for this item are being loaded...
        </p>
      </div>
    </div>
  `;
}

function handleQuickApprove(id) {
  UnionCore.closeModal();
  UnionCore.showToast(`Approval ${id} approved successfully`, 'success');
}

function handleQuickReject(id) {
  UnionCore.closeModal();
  UnionCore.showToast(`Approval ${id} rejected`, 'error');
}

// ============================================================================
// 2. APPROVE WORKFLOW (6 instances - Approval Requests, Notifications)
// ============================================================================

function initApproveButtons() {
  const approveButtons = document.querySelectorAll('[data-action="approve"]:not([data-action="approve"][data-item-type])');
  
  approveButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      
      const itemId = this.getAttribute('data-item-id') || 'unknown';
      const itemName = this.getAttribute('data-item-name') || 'Item';
      
      showApproveConfirmation(itemId, itemName);
    });
  });
}

function showApproveConfirmation(itemId, itemName) {
  const content = `
    <div class="space-y-4">
      <div class="flex items-center justify-center mb-4">
        <div class="w-16 h-16 rounded-full bg-green-100 flex items-center justify-center">
          <i class="fa-solid fa-check text-3xl text-green-600"></i>
        </div>
      </div>
      
      <p class="text-center text-gray-900">
        Are you sure you want to approve <strong>${itemName}</strong>?
      </p>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Approval Comments (Optional)</label>
        <textarea id="approve-comments" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[80px]" 
                  placeholder="Add any comments or conditions..."></textarea>
      </div>
      
      <div>
        <label class="flex items-center">
          <input type="checkbox" id="notify-requester" checked class="mr-2">
          <span class="text-sm text-gray-700">Notify requester of approval</span>
        </label>
      </div>
    </div>
  `;
  
  UnionCore.showModal('Confirm Approval', content, [
    { label: 'Cancel', onclick: 'UnionCore.closeModal()' },
    { label: 'Approve', primary: true, onclick: `submitApproval('${itemId}', '${itemName}')` }
  ]);
}

function submitApproval(itemId, itemName) {
  const comments = document.getElementById('approve-comments')?.value;
  const notify = document.getElementById('notify-requester')?.checked;
  
  UnionCore.closeModal();
  UnionCore.showToast('Processing approval...', 'info');
  
  setTimeout(() => {
    UnionCore.showToast(`${itemName} approved successfully`, 'success');
    
    if (notify) {
      setTimeout(() => {
        UnionCore.showToast('Requester notified', 'info');
      }, 500);
    }
    
    console.log('Approval submitted:', { itemId, itemName, comments, notify });
  }, 1000);
}

// ============================================================================
// 3. FILE UPLOAD (1 instance - Document Management)
// ============================================================================

function initUploadButtons() {
  const uploadButtons = document.querySelectorAll('[data-action="upload"]');
  
  uploadButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      showUploadModal();
    });
  });
}

function showUploadModal() {
  const content = `
    <div class="space-y-4">
      <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center" id="upload-dropzone">
        <input type="file" id="file-upload" multiple accept=".pdf,.doc,.docx,.xls,.xlsx,.png,.jpg,.jpeg" class="hidden">
        <label for="file-upload" class="cursor-pointer">
          <i class="fa-solid fa-cloud-upload text-5xl text-gray-400 mb-3"></i>
          <p class="text-sm font-medium text-gray-700">Click to upload or drag and drop</p>
          <p class="text-xs text-gray-500 mt-1">PDF, DOC, XLS, Images up to 10MB each</p>
        </label>
        
        <div id="file-list" class="mt-4 space-y-2 hidden"></div>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Category</label>
        <select id="upload-category" class="w-full border border-gray-300 rounded px-3 py-2">
          <option value="legal">Legal Documents</option>
          <option value="financial">Financial Documents</option>
          <option value="contracts">Contracts</option>
          <option value="proposals">Proposals</option>
          <option value="other">Other</option>
        </select>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Tags (Optional)</label>
        <input type="text" id="upload-tags" class="w-full border border-gray-300 rounded px-3 py-2" 
               placeholder="Enter tags separated by commas">
      </div>
      
      <div>
        <label class="flex items-center">
          <input type="checkbox" id="notify-team" class="mr-2">
          <span class="text-sm text-gray-700">Notify team members of new upload</span>
        </label>
      </div>
    </div>
  `;
  
  UnionCore.showModal('Upload Documents', content, [
    { label: 'Cancel', onclick: 'UnionCore.closeModal()' },
    { label: 'Upload', primary: true, onclick: 'submitFileUpload()' }
  ]);
  
  // Add file input handler
  setTimeout(() => {
    const fileInput = document.getElementById('file-upload');
    const fileList = document.getElementById('file-list');
    
    if (fileInput) {
      fileInput.addEventListener('change', function() {
        if (this.files && this.files.length > 0) {
          fileList.classList.remove('hidden');
          fileList.innerHTML = '';
          
          Array.from(this.files).forEach((file, index) => {
            const fileItem = document.createElement('div');
            fileItem.className = 'flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded';
            fileItem.innerHTML = `
              <div class="flex items-center">
                <i class="fa-solid fa-file text-blue-600 mr-2"></i>
                <span class="text-sm text-blue-800">${file.name}</span>
                <span class="text-xs text-blue-600 ml-2">(${(file.size / 1024 / 1024).toFixed(2)} MB)</span>
              </div>
              <button onclick="removeFile(${index})" class="text-blue-600 hover:text-blue-800">
                <i class="fa-solid fa-times"></i>
              </button>
            `;
            fileList.appendChild(fileItem);
          });
        }
      });
    }
  }, 100);
}

function submitFileUpload() {
  const fileInput = document.getElementById('file-upload');
  const category = document.getElementById('upload-category')?.value;
  const tags = document.getElementById('upload-tags')?.value;
  const notify = document.getElementById('notify-team')?.checked;
  
  if (!fileInput?.files || fileInput.files.length === 0) {
    UnionCore.showToast('Please select at least one file to upload', 'error');
    return;
  }
  
  UnionCore.closeModal();
  UnionCore.showToast('Uploading files...', 'info');
  
  setTimeout(() => {
    UnionCore.showToast(`${fileInput.files.length} file(s) uploaded successfully`, 'success');
    
    if (notify) {
      setTimeout(() => {
        UnionCore.showToast('Team notified', 'info');
      }, 500);
    }
    
    console.log('Files uploaded:', {
      fileCount: fileInput.files.length,
      category,
      tags,
      notify
    });
  }, 2000);
}

function removeFile(index) {
  // File removal would be handled here
  UnionCore.showToast('File removed', 'info');
}

// ============================================================================
// 4. INLINE EDIT (7 instances - Risk Assessment)
// ============================================================================

function initEditButtons() {
  const editButtons = document.querySelectorAll('[data-action="edit"]');
  
  editButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      
      const itemType = this.getAttribute('data-item-type') || 'item';
      const itemId = this.getAttribute('data-item-id') || 'unknown';
      const itemName = this.getAttribute('data-item-name') || 'Item';
      
      showEditModal(itemType, itemId, itemName);
    });
  });
}

function showEditModal(itemType, itemId, itemName) {
  let content = '';
  
  if (itemType === 'risk') {
    content = `
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Risk Name *</label>
          <input type="text" id="edit-risk-name" class="w-full border border-gray-300 rounded px-3 py-2" 
                 value="${itemName}">
        </div>
        
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Severity *</label>
            <select id="edit-severity" class="w-full border border-gray-300 rounded px-3 py-2">
              <option value="low">Low</option>
              <option value="medium">Medium</option>
              <option value="high" selected>High</option>
              <option value="critical">Critical</option>
            </select>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Probability *</label>
            <input type="number" id="edit-probability" class="w-full border border-gray-300 rounded px-3 py-2" 
                   value="65" min="0" max="100" step="5">
            <p class="text-xs text-gray-500 mt-1">0-100%</p>
          </div>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Category *</label>
          <select id="edit-category" class="w-full border border-gray-300 rounded px-3 py-2">
            <option value="financial" selected>Financial</option>
            <option value="operational">Operational</option>
            <option value="legal">Legal</option>
            <option value="reputational">Reputational</option>
            <option value="strategic">Strategic</option>
          </select>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Description *</label>
          <textarea id="edit-description" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[80px]" 
                    placeholder="Describe the risk...">Potential revenue loss due to market volatility</textarea>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Impact</label>
          <textarea id="edit-impact" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[60px]" 
                    placeholder="Describe the potential impact...">Potential revenue loss of £500K if not mitigated</textarea>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Mitigation Strategy</label>
          <textarea id="edit-mitigation" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[60px]" 
                    placeholder="Describe mitigation approach...">Implement additional due diligence checks and secure backup financing</textarea>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Owner</label>
          <select id="edit-owner" class="w-full border border-gray-300 rounded px-3 py-2">
            <option value="">Select owner...</option>
            <option value="max">Max Chen</option>
            <option value="tom" selected>Tom Williams</option>
            <option value="dani">Dani Rodriguez</option>
            <option value="sarah">Sarah Johnson</option>
          </select>
        </div>
      </div>
    `;
  } else {
    content = `
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Name *</label>
          <input type="text" id="edit-name" class="w-full border border-gray-300 rounded px-3 py-2" 
                 value="${itemName}">
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
          <textarea id="edit-description" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[100px]" 
                    placeholder="Enter description..."></textarea>
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
          <select id="edit-status" class="w-full border border-gray-300 rounded px-3 py-2">
            <option value="active">Active</option>
            <option value="pending">Pending</option>
            <option value="completed">Completed</option>
            <option value="archived">Archived</option>
          </select>
        </div>
      </div>
    `;
  }
  
  UnionCore.showModal(`Edit ${itemType === 'risk' ? 'Risk' : 'Item'}`, content, [
    { label: 'Cancel', onclick: 'UnionCore.closeModal()' },
    { label: 'Save Changes', primary: true, onclick: `submitEdit('${itemType}', '${itemId}')` }
  ]);
}

function submitEdit(itemType, itemId) {
  if (itemType === 'risk') {
    const name = document.getElementById('edit-risk-name')?.value;
    const severity = document.getElementById('edit-severity')?.value;
    const probability = document.getElementById('edit-probability')?.value;
    const category = document.getElementById('edit-category')?.value;
    const description = document.getElementById('edit-description')?.value;
    
    if (!name || name.trim().length < 3) {
      UnionCore.showToast('Please enter a risk name (at least 3 characters)', 'error');
      return;
    }
    
    if (!description || description.trim().length < 10) {
      UnionCore.showToast('Please enter a description (at least 10 characters)', 'error');
      return;
    }
    
    UnionCore.closeModal();
    UnionCore.showToast('Saving changes...', 'info');
    
    setTimeout(() => {
      UnionCore.showToast('Risk updated successfully', 'success');
      console.log('Risk updated:', { itemId, name, severity, probability, category, description });
    }, 1000);
  } else {
    const name = document.getElementById('edit-name')?.value;
    
    if (!name || name.trim().length < 3) {
      UnionCore.showToast('Please enter a name (at least 3 characters)', 'error');
      return;
    }
    
    UnionCore.closeModal();
    UnionCore.showToast('Saving changes...', 'info');
    
    setTimeout(() => {
      UnionCore.showToast('Item updated successfully', 'success');
      console.log('Item updated:', { itemId, name });
    }, 1000);
  }
}

// ============================================================================
// INITIALIZATION
// ============================================================================

function initPhase4AFunctionality() {
  console.log('Initializing Phase 4A critical orphans...');
  
  initViewDetailsButtons();
  initApproveButtons();
  initUploadButtons();
  initEditButtons();
  
  console.log('Phase 4A functionality initialized ✅');
}

// Auto-initialize when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initPhase4AFunctionality);
} else {
  initPhase4AFunctionality();
}

// Re-initialize when hash changes (for SPA navigation)
window.addEventListener('hashchange', function() {
  setTimeout(initPhase4AFunctionality, 100);
});

// Export for global access
window.initPhase4AFunctionality = initPhase4AFunctionality;
window.showViewDetailsModal = showViewDetailsModal;
window.showApproveConfirmation = showApproveConfirmation;
window.submitApproval = submitApproval;
window.showUploadModal = showUploadModal;
window.submitFileUpload = submitFileUpload;
window.removeFile = removeFile;
window.showEditModal = showEditModal;
window.submitEdit = submitEdit;
window.handleQuickApprove = handleQuickApprove;
window.handleQuickReject = handleQuickReject;


// ============================================================================
// UNION Core MVP - Phase 4B: Medium Priority Orphans Implementation
// Filter/Clear, Review, Use Template, Manage Categories (25 elements)
// ============================================================================

// ============================================================================
// 1. FILTER/CLEAR BUTTONS (14 instances across 7 pages)
// ============================================================================

function initFilterClearButtons() {
  // Initialize all filter buttons
  const filterButtons = document.querySelectorAll('[data-action="filter"]');
  filterButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      const targetPanel = this.getAttribute('data-target-panel') || 'filter-panel';
      toggleFilterPanel(targetPanel);
    });
  });
  
  // Initialize all clear filter buttons
  const clearButtons = document.querySelectorAll('[data-action="clear-filters"]');
  clearButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      const targetPanel = this.getAttribute('data-target-panel') || 'filter-panel';
      clearAllFilters(targetPanel);
    });
  });
  
  // Initialize apply filter buttons
  const applyButtons = document.querySelectorAll('[data-action="apply-filters"]');
  applyButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      const targetPanel = this.getAttribute('data-target-panel') || 'filter-panel';
      applyFilters(targetPanel);
    });
  });
}

function toggleFilterPanel(panelId) {
  // Find the filter panel
  const panel = document.getElementById(panelId) || document.querySelector(`[data-filter-panel="${panelId}"]`);
  
  if (panel) {
    const isHidden = panel.classList.contains('hidden');
    
    if (isHidden) {
      panel.classList.remove('hidden');
      UnionCore.showToast('Filters shown', 'info');
    } else {
      panel.classList.add('hidden');
      UnionCore.showToast('Filters hidden', 'info');
    }
  } else {
    // If no panel found, show filter modal
    showFilterModal();
  }
}

function showFilterModal() {
  const content = `
    <div class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
        <div class="space-y-2">
          <label class="flex items-center">
            <input type="checkbox" class="filter-checkbox" data-filter="status" value="active" checked>
            <span class="ml-2 text-sm">Active</span>
          </label>
          <label class="flex items-center">
            <input type="checkbox" class="filter-checkbox" data-filter="status" value="pending" checked>
            <span class="ml-2 text-sm">Pending</span>
          </label>
          <label class="flex items-center">
            <input type="checkbox" class="filter-checkbox" data-filter="status" value="completed">
            <span class="ml-2 text-sm">Completed</span>
          </label>
          <label class="flex items-center">
            <input type="checkbox" class="filter-checkbox" data-filter="status" value="archived">
            <span class="ml-2 text-sm">Archived</span>
          </label>
        </div>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Priority</label>
        <div class="space-y-2">
          <label class="flex items-center">
            <input type="checkbox" class="filter-checkbox" data-filter="priority" value="high" checked>
            <span class="ml-2 text-sm">High</span>
          </label>
          <label class="flex items-center">
            <input type="checkbox" class="filter-checkbox" data-filter="priority" value="medium" checked>
            <span class="ml-2 text-sm">Medium</span>
          </label>
          <label class="flex items-center">
            <input type="checkbox" class="filter-checkbox" data-filter="priority" value="low">
            <span class="ml-2 text-sm">Low</span>
          </label>
        </div>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Date Range</label>
        <div class="grid grid-cols-2 gap-3">
          <input type="date" id="filter-date-from" class="border border-gray-300 rounded px-3 py-2 text-sm">
          <input type="date" id="filter-date-to" class="border border-gray-300 rounded px-3 py-2 text-sm">
        </div>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Assigned To</label>
        <select id="filter-assignee" class="w-full border border-gray-300 rounded px-3 py-2">
          <option value="">All Users</option>
          <option value="max">Max Chen</option>
          <option value="tom">Tom Williams</option>
          <option value="dani">Dani Rodriguez</option>
          <option value="sarah">Sarah Johnson</option>
        </select>
      </div>
    </div>
  `;
  
  UnionCore.showModal('Filter Options', content, [
    { label: 'Clear All', onclick: 'clearModalFilters()' },
    { label: 'Apply Filters', primary: true, onclick: 'applyModalFilters()' }
  ]);
}

function clearAllFilters(panelId) {
  // Clear all filter inputs in the panel
  const panel = document.getElementById(panelId) || document.querySelector(`[data-filter-panel="${panelId}"]`);
  
  if (panel) {
    const checkboxes = panel.querySelectorAll('input[type="checkbox"]');
    checkboxes.forEach(cb => cb.checked = false);
    
    const selects = panel.querySelectorAll('select');
    selects.forEach(select => select.selectedIndex = 0);
    
    const inputs = panel.querySelectorAll('input[type="text"], input[type="date"]');
    inputs.forEach(input => input.value = '');
  }
  
  UnionCore.showToast('All filters cleared', 'info');
}

function clearModalFilters() {
  const checkboxes = document.querySelectorAll('#union-modal .filter-checkbox');
  checkboxes.forEach(cb => cb.checked = false);
  
  document.getElementById('filter-date-from').value = '';
  document.getElementById('filter-date-to').value = '';
  document.getElementById('filter-assignee').selectedIndex = 0;
  
  UnionCore.showToast('Filters cleared', 'info');
}

function applyFilters(panelId) {
  UnionCore.showToast('Applying filters...', 'info');
  
  setTimeout(() => {
    UnionCore.showToast('Filters applied - 12 results found', 'success');
  }, 500);
}

function applyModalFilters() {
  const statuses = Array.from(document.querySelectorAll('.filter-checkbox[data-filter="status"]:checked'))
    .map(cb => cb.value);
  const priorities = Array.from(document.querySelectorAll('.filter-checkbox[data-filter="priority"]:checked'))
    .map(cb => cb.value);
  const dateFrom = document.getElementById('filter-date-from')?.value;
  const dateTo = document.getElementById('filter-date-to')?.value;
  const assignee = document.getElementById('filter-assignee')?.value;
  
  UnionCore.closeModal();
  UnionCore.showToast('Applying filters...', 'info');
  
  setTimeout(() => {
    const filterCount = statuses.length + priorities.length + (dateFrom ? 1 : 0) + (dateTo ? 1 : 0) + (assignee ? 1 : 0);
    UnionCore.showToast(`Filters applied (${filterCount} active) - 12 results found`, 'success');
    
    console.log('Filters applied:', { statuses, priorities, dateFrom, dateTo, assignee });
  }, 500);
}

// ============================================================================
// 2. REVIEW WORKFLOW (6 instances across 4 pages)
// ============================================================================

function initReviewButtons() {
  const reviewButtons = document.querySelectorAll('[data-action="review"]');
  
  reviewButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      
      const itemType = this.getAttribute('data-item-type') || 'item';
      const itemId = this.getAttribute('data-item-id') || 'unknown';
      const itemName = this.getAttribute('data-item-name') || 'Item';
      
      showReviewModal(itemType, itemId, itemName);
    });
  });
}

function showReviewModal(itemType, itemId, itemName) {
  const content = `
    <div class="space-y-4">
      <div class="bg-blue-50 border border-blue-200 rounded p-3">
        <p class="text-sm text-blue-800">
          <i class="fa-solid fa-info-circle mr-2"></i>
          Reviewing: <strong>${itemName}</strong>
        </p>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Review Status *</label>
        <select id="review-status" class="w-full border border-gray-300 rounded px-3 py-2">
          <option value="">Select status...</option>
          <option value="approved">Approved</option>
          <option value="approved-with-changes">Approved with Changes</option>
          <option value="needs-revision">Needs Revision</option>
          <option value="rejected">Rejected</option>
        </select>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Review Comments *</label>
        <textarea id="review-comments" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[120px]" 
                  placeholder="Provide detailed feedback and recommendations..."></textarea>
        <p class="text-xs text-gray-500 mt-1">Minimum 20 characters required</p>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Rating</label>
        <div class="flex gap-2">
          ${[1, 2, 3, 4, 5].map(star => `
            <button type="button" onclick="setReviewRating(${star})" 
                    class="review-star text-2xl text-gray-300 hover:text-yellow-400" data-rating="${star}">
              <i class="fa-solid fa-star"></i>
            </button>
          `).join('')}
        </div>
        <input type="hidden" id="review-rating" value="0">
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Action Items (Optional)</label>
        <textarea id="review-actions" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[80px]" 
                  placeholder="List any action items or next steps..."></textarea>
      </div>
      
      <div>
        <label class="flex items-center">
          <input type="checkbox" id="review-notify" checked class="mr-2">
          <span class="text-sm text-gray-700">Notify item owner of review</span>
        </label>
      </div>
      
      <div>
        <label class="flex items-center">
          <input type="checkbox" id="review-final" class="mr-2">
          <span class="text-sm text-gray-700">Mark as final review</span>
        </label>
      </div>
    </div>
  `;
  
  UnionCore.showModal('Review Item', content, [
    { label: 'Cancel', onclick: 'UnionCore.closeModal()' },
    { label: 'Submit Review', primary: true, onclick: `submitReview('${itemType}', '${itemId}', '${itemName}')` }
  ]);
}

function setReviewRating(rating) {
  document.getElementById('review-rating').value = rating;
  
  const stars = document.querySelectorAll('.review-star');
  stars.forEach((star, index) => {
    if (index < rating) {
      star.classList.remove('text-gray-300');
      star.classList.add('text-yellow-400');
    } else {
      star.classList.remove('text-yellow-400');
      star.classList.add('text-gray-300');
    }
  });
}

function submitReview(itemType, itemId, itemName) {
  const status = document.getElementById('review-status')?.value;
  const comments = document.getElementById('review-comments')?.value;
  const rating = document.getElementById('review-rating')?.value;
  const actions = document.getElementById('review-actions')?.value;
  const notify = document.getElementById('review-notify')?.checked;
  const final = document.getElementById('review-final')?.checked;
  
  if (!status) {
    UnionCore.showToast('Please select a review status', 'error');
    return;
  }
  
  if (!comments || comments.trim().length < 20) {
    UnionCore.showToast('Please provide review comments (at least 20 characters)', 'error');
    return;
  }
  
  UnionCore.closeModal();
  UnionCore.showToast('Submitting review...', 'info');
  
  setTimeout(() => {
    UnionCore.showToast(`Review submitted for ${itemName}`, 'success');
    
    if (notify) {
      setTimeout(() => {
        UnionCore.showToast('Owner notified', 'info');
      }, 500);
    }
    
    console.log('Review submitted:', {
      itemType,
      itemId,
      itemName,
      status,
      comments,
      rating,
      actions,
      notify,
      final
    });
  }, 1000);
}

// ============================================================================
// 3. USE TEMPLATE (4 instances - Heads of Terms)
// ============================================================================

function initUseTemplateButtons() {
  const useTemplateButtons = document.querySelectorAll('[data-action="use-template"]');
  
  useTemplateButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      
      const templateType = this.getAttribute('data-template-type') || 'hot';
      showTemplateSelectionModal(templateType);
    });
  });
}

function showTemplateSelectionModal(templateType) {
  const content = `
    <div class="space-y-4">
      <p class="text-sm text-gray-600">Select a template to use as a starting point</p>
      
      <div class="space-y-3">
        <!-- Standard Office Lease Template -->
        <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-500 cursor-pointer transition" 
             onclick="selectTemplate('standard-office-lease')">
          <div class="flex items-start justify-between">
            <div class="flex-1">
              <h4 class="font-medium text-gray-900">Standard Office Lease HoT</h4>
              <p class="text-sm text-gray-600 mt-1">Standard template for office lease agreements</p>
              <div class="flex gap-2 mt-2">
                <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">Office</span>
                <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Lease</span>
              </div>
            </div>
            <div class="text-sm text-gray-500">
              <i class="fa-solid fa-file-alt text-2xl"></i>
            </div>
          </div>
        </div>
        
        <!-- Retail Acquisition Template -->
        <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-500 cursor-pointer transition" 
             onclick="selectTemplate('retail-acquisition')">
          <div class="flex items-start justify-between">
            <div class="flex-1">
              <h4 class="font-medium text-gray-900">Retail Space Acquisition HoT</h4>
              <p class="text-sm text-gray-600 mt-1">Template for retail property acquisitions</p>
              <div class="flex gap-2 mt-2">
                <span class="px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded">Retail</span>
                <span class="px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded">Acquisition</span>
              </div>
            </div>
            <div class="text-sm text-gray-500">
              <i class="fa-solid fa-file-alt text-2xl"></i>
            </div>
          </div>
        </div>
        
        <!-- Mixed Use Development Template -->
        <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-500 cursor-pointer transition" 
             onclick="selectTemplate('mixed-use-development')">
          <div class="flex items-start justify-between">
            <div class="flex-1">
              <h4 class="font-medium text-gray-900">Mixed Use Development HoT</h4>
              <p class="text-sm text-gray-600 mt-1">Comprehensive template for mixed-use projects</p>
              <div class="flex gap-2 mt-2">
                <span class="px-2 py-1 bg-indigo-100 text-indigo-800 text-xs rounded">Mixed Use</span>
                <span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded">Development</span>
              </div>
            </div>
            <div class="text-sm text-gray-500">
              <i class="fa-solid fa-file-alt text-2xl"></i>
            </div>
          </div>
        </div>
        
        <!-- Generic Template -->
        <div class="border border-gray-200 rounded-lg p-4 hover:border-blue-500 cursor-pointer transition" 
             onclick="selectTemplate('generic')">
          <div class="flex items-start justify-between">
            <div class="flex-1">
              <h4 class="font-medium text-gray-900">Generic HoT Template</h4>
              <p class="text-sm text-gray-600 mt-1">Basic template for general use</p>
              <div class="flex gap-2 mt-2">
                <span class="px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded">General</span>
              </div>
            </div>
            <div class="text-sm text-gray-500">
              <i class="fa-solid fa-file-alt text-2xl"></i>
            </div>
          </div>
        </div>
      </div>
      
      <div class="pt-4 border-t border-gray-200">
        <button onclick="window.showCreateTemplateForm()" class="w-full text-blue-600 hover:text-blue-700 text-sm font-medium">
          <i class="fa-solid fa-plus mr-2"></i>Create New Template
        </button>
      </div>
    </div>
  `;
  
  UnionCore.showModal('Select Template', content, [
    { label: 'Cancel', onclick: 'UnionCore.closeModal()' }
  ]);
}

function selectTemplate(templateId) {
  UnionCore.closeModal();
  UnionCore.showToast('Loading template...', 'info');
  
  setTimeout(() => {
    UnionCore.showToast('Template applied successfully', 'success');
    
    setTimeout(() => {
      UnionCore.showToast('You can now customize the template fields', 'info');
    }, 500);
    
    console.log('Template selected:', templateId);
  }, 1000);
}

// ============================================================================
// 4. MANAGE CATEGORIES (1 instance - Document Management)
// ============================================================================

function initManageCategoriesButtons() {
  const manageCategoriesButtons = document.querySelectorAll('[data-action="manage-categories"]');
  
  manageCategoriesButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      showManageCategoriesModal();
    });
  });
}

function showManageCategoriesModal() {
  const content = `
    <div class="space-y-4">
      <div class="flex justify-between items-center">
        <h4 class="font-medium text-gray-900">Document Categories</h4>
        <button onclick="showAddCategoryForm()" class="px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700">
          <i class="fa-solid fa-plus mr-1"></i>Add Category
        </button>
      </div>
      
      <div class="space-y-2">
        <!-- Legal Documents -->
        <div class="flex items-center justify-between p-3 border border-gray-200 rounded hover:bg-gray-50">
          <div class="flex items-center">
            <i class="fa-solid fa-folder text-blue-600 mr-3"></i>
            <div>
              <div class="font-medium text-gray-900">Legal Documents</div>
              <div class="text-xs text-gray-500">45 documents</div>
            </div>
          </div>
          <div class="flex gap-2">
            <button onclick="editCategory('legal')" class="text-blue-600 hover:text-blue-800 text-sm">
              <i class="fa-solid fa-edit"></i>
            </button>
            <button onclick="deleteCategory('legal')" class="text-red-600 hover:text-red-800 text-sm">
              <i class="fa-solid fa-trash"></i>
            </button>
          </div>
        </div>
        
        <!-- Financial Documents -->
        <div class="flex items-center justify-between p-3 border border-gray-200 rounded hover:bg-gray-50">
          <div class="flex items-center">
            <i class="fa-solid fa-folder text-green-600 mr-3"></i>
            <div>
              <div class="font-medium text-gray-900">Financial Documents</div>
              <div class="text-xs text-gray-500">32 documents</div>
            </div>
          </div>
          <div class="flex gap-2">
            <button onclick="editCategory('financial')" class="text-blue-600 hover:text-blue-800 text-sm">
              <i class="fa-solid fa-edit"></i>
            </button>
            <button onclick="deleteCategory('financial')" class="text-red-600 hover:text-red-800 text-sm">
              <i class="fa-solid fa-trash"></i>
            </button>
          </div>
        </div>
        
        <!-- Contracts -->
        <div class="flex items-center justify-between p-3 border border-gray-200 rounded hover:bg-gray-50">
          <div class="flex items-center">
            <i class="fa-solid fa-folder text-purple-600 mr-3"></i>
            <div>
              <div class="font-medium text-gray-900">Contracts</div>
              <div class="text-xs text-gray-500">28 documents</div>
            </div>
          </div>
          <div class="flex gap-2">
            <button onclick="editCategory('contracts')" class="text-blue-600 hover:text-blue-800 text-sm">
              <i class="fa-solid fa-edit"></i>
            </button>
            <button onclick="deleteCategory('contracts')" class="text-red-600 hover:text-red-800 text-sm">
              <i class="fa-solid fa-trash"></i>
            </button>
          </div>
        </div>
        
        <!-- Proposals -->
        <div class="flex items-center justify-between p-3 border border-gray-200 rounded hover:bg-gray-50">
          <div class="flex items-center">
            <i class="fa-solid fa-folder text-orange-600 mr-3"></i>
            <div>
              <div class="font-medium text-gray-900">Proposals</div>
              <div class="text-xs text-gray-500">19 documents</div>
            </div>
          </div>
          <div class="flex gap-2">
            <button onclick="editCategory('proposals')" class="text-blue-600 hover:text-blue-800 text-sm">
              <i class="fa-solid fa-edit"></i>
            </button>
            <button onclick="deleteCategory('proposals')" class="text-red-600 hover:text-red-800 text-sm">
              <i class="fa-solid fa-trash"></i>
            </button>
          </div>
        </div>
        
        <!-- Other -->
        <div class="flex items-center justify-between p-3 border border-gray-200 rounded hover:bg-gray-50">
          <div class="flex items-center">
            <i class="fa-solid fa-folder text-gray-600 mr-3"></i>
            <div>
              <div class="font-medium text-gray-900">Other</div>
              <div class="text-xs text-gray-500">12 documents</div>
            </div>
          </div>
          <div class="flex gap-2">
            <button onclick="editCategory('other')" class="text-blue-600 hover:text-blue-800 text-sm">
              <i class="fa-solid fa-edit"></i>
            </button>
            <button onclick="deleteCategory('other')" class="text-red-600 hover:text-red-800 text-sm">
              <i class="fa-solid fa-trash"></i>
            </button>
          </div>
        </div>
      </div>
      
      <div class="pt-4 border-t border-gray-200">
        <div class="text-sm text-gray-600">
          <i class="fa-solid fa-info-circle mr-2"></i>
          Total: 5 categories, 136 documents
        </div>
      </div>
    </div>
  `;
  
  UnionCore.showModal('Manage Categories', content, [
    { label: 'Close', onclick: 'UnionCore.closeModal()' }
  ]);
}

function showAddCategoryForm() {
  const content = `
    <div class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Category Name *</label>
        <input type="text" id="category-name" class="w-full border border-gray-300 rounded px-3 py-2" 
               placeholder="e.g., Marketing Materials">
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Color</label>
        <div class="grid grid-cols-6 gap-2">
          ${['blue', 'green', 'purple', 'orange', 'red', 'indigo'].map(color => `
            <button type="button" onclick="selectCategoryColor('${color}')" 
                    class="category-color w-10 h-10 rounded border-2 border-gray-300 bg-${color}-600 hover:border-${color}-800">
            </button>
          `).join('')}
        </div>
        <input type="hidden" id="category-color" value="blue">
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
        <textarea id="category-description" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[60px]" 
                  placeholder="Optional description..."></textarea>
      </div>
    </div>
  `;
  
  UnionCore.showModal('Add Category', content, [
    { label: 'Cancel', onclick: 'showManageCategoriesModal()' },
    { label: 'Add Category', primary: true, onclick: 'submitAddCategory()' }
  ]);
}

function selectCategoryColor(color) {
  document.getElementById('category-color').value = color;
  
  const colorButtons = document.querySelectorAll('.category-color');
  colorButtons.forEach(btn => {
    btn.classList.remove('ring-4', 'ring-offset-2');
  });
  
  event.target.classList.add('ring-4', 'ring-offset-2');
}

function submitAddCategory() {
  const name = document.getElementById('category-name')?.value;
  const color = document.getElementById('category-color')?.value;
  const description = document.getElementById('category-description')?.value;
  
  if (!name || name.trim().length < 2) {
    UnionCore.showToast('Please enter a category name (at least 2 characters)', 'error');
    return;
  }
  
  UnionCore.closeModal();
  UnionCore.showToast('Adding category...', 'info');
  
  setTimeout(() => {
    UnionCore.showToast(`Category "${name}" added successfully`, 'success');
    console.log('Category added:', { name, color, description });
  }, 1000);
}

function editCategory(categoryId) {
  UnionCore.showToast('Edit functionality coming soon', 'info');
  console.log('Edit category:', categoryId);
}

function deleteCategory(categoryId) {
  UnionCore.showToast('Delete functionality coming soon', 'info');
  console.log('Delete category:', categoryId);
}

// ============================================================================
// INITIALIZATION
// ============================================================================

function initPhase4BFunctionality() {
  console.log('Initializing Phase 4B medium priority orphans...');
  
  initFilterClearButtons();
  initReviewButtons();
  initUseTemplateButtons();
  initManageCategoriesButtons();
  
  console.log('Phase 4B functionality initialized ✅');
}

// Auto-initialize when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initPhase4BFunctionality);
} else {
  initPhase4BFunctionality();
}

// Re-initialize when hash changes (for SPA navigation)
window.addEventListener('hashchange', function() {
  setTimeout(initPhase4BFunctionality, 100);
});

// Export for global access
window.initPhase4BFunctionality = initPhase4BFunctionality;
window.toggleFilterPanel = toggleFilterPanel;
window.showFilterModal = showFilterModal;
window.clearAllFilters = clearAllFilters;
window.clearModalFilters = clearModalFilters;
window.applyFilters = applyFilters;
window.applyModalFilters = applyModalFilters;
window.showReviewModal = showReviewModal;
window.setReviewRating = setReviewRating;
window.submitReview = submitReview;
window.showTemplateSelectionModal = showTemplateSelectionModal;
window.selectTemplate = selectTemplate;
window.showManageCategoriesModal = showManageCategoriesModal;
window.showAddCategoryForm = showAddCategoryForm;
window.selectCategoryColor = selectCategoryColor;
window.submitAddCategory = submitAddCategory;
window.editCategory = editCategory;
window.deleteCategory = deleteCategory;


// ============================================================================
// UNION Core MVP - Phase 4C: Low Priority Orphans Implementation
// Load More, View All, Settings, Misc Actions (12 elements)
// ============================================================================

// ============================================================================
// 1. LOAD MORE (4 instances - Activity Log, Document Management, Risk Assessment)
// ============================================================================

function initLoadMoreButtons() {
  const loadMoreButtons = document.querySelectorAll('[data-action="load-more"]');
  
  loadMoreButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      
      const targetList = this.getAttribute('data-target-list') || 'list';
      const currentCount = parseInt(this.getAttribute('data-current-count')) || 10;
      const increment = parseInt(this.getAttribute('data-increment')) || 10;
      
      loadMoreItems(this, targetList, currentCount, increment);
    });
  });
}

function loadMoreItems(button, targetList, currentCount, increment) {
  // Disable button and show loading state
  button.disabled = true;
  const originalText = button.innerHTML;
  button.innerHTML = '<i class="fa-solid fa-spinner fa-spin mr-2"></i>Loading...';
  
  // Simulate loading
  setTimeout(() => {
    const newCount = currentCount + increment;
    button.setAttribute('data-current-count', newCount);
    
    // Re-enable button
    button.disabled = false;
    button.innerHTML = originalText;
    
    UnionCore.showToast(`Loaded ${increment} more items (${newCount} total)`, 'success');
    
    // Hide button if we've loaded all items (simulate max 50 items)
    if (newCount >= 50) {
      button.style.display = 'none';
      UnionCore.showToast('All items loaded', 'info');
    }
    
    console.log('Loaded more items:', { targetList, currentCount, newCount });
  }, 1000);
}

// ============================================================================
// 2. VIEW ALL (5 instances - various pages)
// ============================================================================

function initViewAllButtons() {
  const viewAllButtons = document.querySelectorAll('[data-action="view-all-items"]');
  
  viewAllButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      
      const targetPage = this.getAttribute('data-target-page') || 'unknown';
      const itemType = this.getAttribute('data-item-type') || 'items';
      
      navigateToViewAll(targetPage, itemType);
    });
  });
}

function navigateToViewAll(targetPage, itemType) {
  UnionCore.showToast(`Navigating to ${itemType}...`, 'info');
  
  setTimeout(() => {
    // In a real app, this would navigate to the target page
    // For now, we'll just show a success message
    UnionCore.showToast(`Viewing all ${itemType}`, 'success');
    
    console.log('Navigate to:', { targetPage, itemType });
  }, 500);
}

// ============================================================================
// 3. SETTINGS (1 instance - Notifications)
// ============================================================================

function initSettingsButtons() {
  const settingsButtons = document.querySelectorAll('[data-action="settings"]');
  
  settingsButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      
      const settingsType = this.getAttribute('data-settings-type') || 'general';
      showSettingsModal(settingsType);
    });
  });
}

function showSettingsModal(settingsType) {
  let content = '';
  
  if (settingsType === 'notifications') {
    content = `
      <div class="space-y-4">
        <div>
          <h4 class="font-medium text-gray-900 mb-3">Email Notifications</h4>
          <div class="space-y-2">
            <label class="flex items-center justify-between">
              <span class="text-sm text-gray-700">New approval requests</span>
              <input type="checkbox" checked class="toggle-switch">
            </label>
            <label class="flex items-center justify-between">
              <span class="text-sm text-gray-700">Task assignments</span>
              <input type="checkbox" checked class="toggle-switch">
            </label>
            <label class="flex items-center justify-between">
              <span class="text-sm text-gray-700">Deal updates</span>
              <input type="checkbox" checked class="toggle-switch">
            </label>
            <label class="flex items-center justify-between">
              <span class="text-sm text-gray-700">Document uploads</span>
              <input type="checkbox" class="toggle-switch">
            </label>
            <label class="flex items-center justify-between">
              <span class="text-sm text-gray-700">Comments and mentions</span>
              <input type="checkbox" checked class="toggle-switch">
            </label>
          </div>
        </div>
        
        <div class="pt-4 border-t border-gray-200">
          <h4 class="font-medium text-gray-900 mb-3">In-App Notifications</h4>
          <div class="space-y-2">
            <label class="flex items-center justify-between">
              <span class="text-sm text-gray-700">Desktop notifications</span>
              <input type="checkbox" checked class="toggle-switch">
            </label>
            <label class="flex items-center justify-between">
              <span class="text-sm text-gray-700">Sound alerts</span>
              <input type="checkbox" class="toggle-switch">
            </label>
          </div>
        </div>
        
        <div class="pt-4 border-t border-gray-200">
          <h4 class="font-medium text-gray-900 mb-3">Notification Frequency</h4>
          <select id="notification-frequency" class="w-full border border-gray-300 rounded px-3 py-2">
            <option value="realtime">Real-time</option>
            <option value="hourly">Hourly digest</option>
            <option value="daily" selected>Daily digest</option>
            <option value="weekly">Weekly digest</option>
          </select>
        </div>
        
        <div class="pt-4 border-t border-gray-200">
          <h4 class="font-medium text-gray-900 mb-3">Quiet Hours</h4>
          <div class="grid grid-cols-2 gap-3">
            <div>
              <label class="block text-sm text-gray-700 mb-1">From</label>
              <input type="time" id="quiet-hours-from" value="22:00" class="w-full border border-gray-300 rounded px-3 py-2">
            </div>
            <div>
              <label class="block text-sm text-gray-700 mb-1">To</label>
              <input type="time" id="quiet-hours-to" value="08:00" class="w-full border border-gray-300 rounded px-3 py-2">
            </div>
          </div>
          <p class="text-xs text-gray-500 mt-2">No notifications during these hours</p>
        </div>
      </div>
    `;
  } else {
    content = `
      <div class="space-y-4">
        <div>
          <h4 class="font-medium text-gray-900 mb-3">General Settings</h4>
          <div class="space-y-3">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Language</label>
              <select class="w-full border border-gray-300 rounded px-3 py-2">
                <option value="en" selected>English</option>
                <option value="es">Spanish</option>
                <option value="fr">French</option>
                <option value="de">German</option>
              </select>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Timezone</label>
              <select class="w-full border border-gray-300 rounded px-3 py-2">
                <option value="UTC" selected>UTC</option>
                <option value="GMT">GMT</option>
                <option value="EST">EST</option>
                <option value="PST">PST</option>
              </select>
            </div>
            
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Date Format</label>
              <select class="w-full border border-gray-300 rounded px-3 py-2">
                <option value="DD/MM/YYYY" selected>DD/MM/YYYY</option>
                <option value="MM/DD/YYYY">MM/DD/YYYY</option>
                <option value="YYYY-MM-DD">YYYY-MM-DD</option>
              </select>
            </div>
          </div>
        </div>
      </div>
    `;
  }
  
  UnionCore.showModal('Settings', content, [
    { label: 'Cancel', onclick: 'UnionCore.closeModal()' },
    { label: 'Save Settings', primary: true, onclick: 'saveSettings()' }
  ]);
}

function saveSettings() {
  UnionCore.closeModal();
  UnionCore.showToast('Saving settings...', 'info');
  
  setTimeout(() => {
    UnionCore.showToast('Settings saved successfully', 'success');
  }, 1000);
}

// ============================================================================
// 4. REVIEW TIMELINE (1 instance - Heads of Terms)
// ============================================================================

function initReviewTimelineButtons() {
  const reviewTimelineButtons = document.querySelectorAll('[data-action="review-timeline"]');
  
  reviewTimelineButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      
      const itemId = this.getAttribute('data-item-id') || 'unknown';
      const itemName = this.getAttribute('data-item-name') || 'Item';
      
      showReviewTimelineModal(itemId, itemName);
    });
  });
}

function showReviewTimelineModal(itemId, itemName) {
  const content = `
    <div class="space-y-4">
      <div class="bg-blue-50 border border-blue-200 rounded p-3 mb-4">
        <p class="text-sm text-blue-800">
          <i class="fa-solid fa-clock mr-2"></i>
          Review history for: <strong>${itemName}</strong>
        </p>
      </div>
      
      <div class="relative">
        <!-- Timeline line -->
        <div class="absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"></div>
        
        <!-- Timeline items -->
        <div class="space-y-6">
          <!-- Review 1 -->
          <div class="relative pl-10">
            <div class="absolute left-0 w-8 h-8 rounded-full bg-green-500 flex items-center justify-center text-white">
              <i class="fa-solid fa-check text-sm"></i>
            </div>
            <div class="bg-white border border-gray-200 rounded p-3">
              <div class="flex justify-between items-start mb-2">
                <div class="font-medium text-gray-900">Approved</div>
                <div class="text-xs text-gray-500">Oct 20, 2025 14:30</div>
              </div>
              <div class="text-sm text-gray-600 mb-2">Reviewed by: Sarah Johnson (Legal)</div>
              <div class="text-sm text-gray-700">All legal terms are acceptable. Approved for final signature.</div>
              <div class="mt-2">
                <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">Rating: 5/5</span>
              </div>
            </div>
          </div>
          
          <!-- Review 2 -->
          <div class="relative pl-10">
            <div class="absolute left-0 w-8 h-8 rounded-full bg-yellow-500 flex items-center justify-center text-white">
              <i class="fa-solid fa-edit text-sm"></i>
            </div>
            <div class="bg-white border border-gray-200 rounded p-3">
              <div class="flex justify-between items-start mb-2">
                <div class="font-medium text-gray-900">Approved with Changes</div>
                <div class="text-xs text-gray-500">Oct 18, 2025 11:15</div>
              </div>
              <div class="text-sm text-gray-600 mb-2">Reviewed by: Executive (Portfolio Navigator)</div>
              <div class="text-sm text-gray-700">Financial terms look good. Please clarify completion timeline in section 3.</div>
              <div class="mt-2">
                <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded">Rating: 4/5</span>
              </div>
            </div>
          </div>
          
          <!-- Review 3 -->
          <div class="relative pl-10">
            <div class="absolute left-0 w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white">
              <i class="fa-solid fa-eye text-sm"></i>
            </div>
            <div class="bg-white border border-gray-200 rounded p-3">
              <div class="flex justify-between items-start mb-2">
                <div class="font-medium text-gray-900">Initial Review</div>
                <div class="text-xs text-gray-500">Oct 15, 2025 09:00</div>
              </div>
              <div class="text-sm text-gray-600 mb-2">Reviewed by: Max Chen (Deal Manager)</div>
              <div class="text-sm text-gray-700">Initial draft looks promising. Sending to executive and legal for review.</div>
              <div class="mt-2">
                <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">Rating: 3/5</span>
              </div>
            </div>
          </div>
          
          <!-- Created -->
          <div class="relative pl-10">
            <div class="absolute left-0 w-8 h-8 rounded-full bg-gray-400 flex items-center justify-center text-white">
              <i class="fa-solid fa-plus text-sm"></i>
            </div>
            <div class="bg-white border border-gray-200 rounded p-3">
              <div class="flex justify-between items-start mb-2">
                <div class="font-medium text-gray-900">Created</div>
                <div class="text-xs text-gray-500">Oct 10, 2025 16:45</div>
              </div>
              <div class="text-sm text-gray-600">Created by: Tom Williams</div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="pt-4 border-t border-gray-200">
        <div class="text-sm text-gray-600">
          <i class="fa-solid fa-info-circle mr-2"></i>
          Total reviews: 3 | Average rating: 4/5
        </div>
      </div>
    </div>
  `;
  
  UnionCore.showModal('Review Timeline', content, [
    { label: 'Close', onclick: 'UnionCore.closeModal()' }
  ]);
}

// ============================================================================
// 5. CREATE INTERVENTION (1 instance - Negotiation Dashboard)
// ============================================================================

function initCreateInterventionButtons() {
  const createInterventionButtons = document.querySelectorAll('[data-action="create-intervention"]');
  
  createInterventionButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      
      const dealId = this.getAttribute('data-deal-id') || 'unknown';
      const dealName = this.getAttribute('data-deal-name') || 'Deal';
      
      showCreateInterventionModal(dealId, dealName);
    });
  });
}

function showCreateInterventionModal(dealId, dealName) {
  const content = `
    <div class="space-y-4">
      <div class="bg-orange-50 border border-orange-200 rounded p-3">
        <p class="text-sm text-orange-800">
          <i class="fa-solid fa-exclamation-triangle mr-2"></i>
          Creating intervention for: <strong>${dealName}</strong>
        </p>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Intervention Type *</label>
        <select id="intervention-type" class="w-full border border-gray-300 rounded px-3 py-2">
          <option value="">Select type...</option>
          <option value="negotiation">Negotiation Support</option>
          <option value="risk">Risk Mitigation</option>
          <option value="legal">Legal Review</option>
          <option value="financial">Financial Analysis</option>
          <option value="other">Other</option>
        </select>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Priority *</label>
        <select id="intervention-priority" class="w-full border border-gray-300 rounded px-3 py-2">
          <option value="low">Low</option>
          <option value="medium" selected>Medium</option>
          <option value="high">High</option>
          <option value="urgent">Urgent</option>
        </select>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Description *</label>
        <textarea id="intervention-description" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[100px]" 
                  placeholder="Describe the issue and required intervention..."></textarea>
        <p class="text-xs text-gray-500 mt-1">Minimum 20 characters required</p>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Assign To</label>
        <select id="intervention-assignee" class="w-full border border-gray-300 rounded px-3 py-2">
          <option value="">Select person...</option>
          <option value="executive">Executive (Portfolio Navigator)</option>
          <option value="max">Max Chen</option>
          <option value="tom">Tom Williams</option>
          <option value="sarah">Sarah Johnson</option>
        </select>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Required By</label>
        <input type="date" id="intervention-deadline" class="w-full border border-gray-300 rounded px-3 py-2">
      </div>
      
      <div>
        <label class="flex items-center">
          <input type="checkbox" id="intervention-notify" checked class="mr-2">
          <span class="text-sm text-gray-700">Notify assigned person immediately</span>
        </label>
      </div>
    </div>
  `;
  
  UnionCore.showModal('Create Intervention', content, [
    { label: 'Cancel', onclick: 'UnionCore.closeModal()' },
    { label: 'Create Intervention', primary: true, onclick: `submitCreateIntervention('${dealId}', '${dealName}')` }
  ]);
}

function submitCreateIntervention(dealId, dealName) {
  const type = document.getElementById('intervention-type')?.value;
  const priority = document.getElementById('intervention-priority')?.value;
  const description = document.getElementById('intervention-description')?.value;
  const assignee = document.getElementById('intervention-assignee')?.value;
  const deadline = document.getElementById('intervention-deadline')?.value;
  const notify = document.getElementById('intervention-notify')?.checked;
  
  if (!type) {
    UnionCore.showToast('Please select an intervention type', 'error');
    return;
  }
  
  if (!description || description.trim().length < 20) {
    UnionCore.showToast('Please provide a description (at least 20 characters)', 'error');
    return;
  }
  
  UnionCore.closeModal();
  UnionCore.showToast('Creating intervention...', 'info');
  
  setTimeout(() => {
    UnionCore.showToast('Intervention created successfully', 'success');
    
    if (notify && assignee) {
      setTimeout(() => {
        UnionCore.showToast('Assignee notified', 'info');
      }, 500);
    }
    
    console.log('Intervention created:', {
      dealId,
      dealName,
      type,
      priority,
      description,
      assignee,
      deadline,
      notify
    });
  }, 1000);
}

// ============================================================================
// 6. DELETE ACTION (1 instance - Negotiation Dashboard)
// ============================================================================

function initDeleteButtons() {
  const deleteButtons = document.querySelectorAll('[data-action="delete-item"]');
  
  deleteButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      
      const itemType = this.getAttribute('data-item-type') || 'item';
      const itemId = this.getAttribute('data-item-id') || 'unknown';
      const itemName = this.getAttribute('data-item-name') || 'Item';
      
      showDeleteConfirmation(itemType, itemId, itemName);
    });
  });
}

function showDeleteConfirmation(itemType, itemId, itemName) {
  const content = `
    <div class="space-y-4">
      <div class="flex items-center justify-center mb-4">
        <div class="w-16 h-16 rounded-full bg-red-100 flex items-center justify-center">
          <i class="fa-solid fa-trash text-3xl text-red-600"></i>
        </div>
      </div>
      
      <p class="text-center text-gray-900">
        Are you sure you want to delete <strong>${itemName}</strong>?
      </p>
      
      <div class="bg-red-50 border border-red-200 rounded p-3">
        <p class="text-sm text-red-800">
          <i class="fa-solid fa-exclamation-triangle mr-2"></i>
          This action cannot be undone. All associated data will be permanently removed.
        </p>
      </div>
      
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Reason for Deletion (Optional)</label>
        <textarea id="delete-reason" class="w-full border border-gray-300 rounded px-3 py-2 min-h-[60px]" 
                  placeholder="Optional: Explain why this item is being deleted..."></textarea>
      </div>
    </div>
  `;
  
  UnionCore.showModal('Confirm Deletion', content, [
    { label: 'Cancel', onclick: 'UnionCore.closeModal()' },
    { label: 'Delete', primary: true, onclick: `confirmDelete('${itemType}', '${itemId}', '${itemName}')` }
  ]);
}

function confirmDelete(itemType, itemId, itemName) {
  const reason = document.getElementById('delete-reason')?.value;
  
  UnionCore.closeModal();
  UnionCore.showToast('Deleting...', 'info');
  
  setTimeout(() => {
    UnionCore.showToast(`${itemName} deleted successfully`, 'success');
    
    console.log('Item deleted:', { itemType, itemId, itemName, reason });
  }, 1000);
}

// ============================================================================
// 7. VIEW APPROVAL / VIEW CHANGES (2 instances)
// ============================================================================

function initViewApprovalButtons() {
  const viewApprovalButtons = document.querySelectorAll('[data-action="view-approval"]');
  
  viewApprovalButtons.forEach(button => {
    button.addEventListener('click', function(e) {
      e.preventDefault();
      
      const itemId = this.getAttribute('data-item-id') || 'unknown';
      const itemName = this.getAttribute('data-item-name') || 'Item';
      
      showApprovalStatusModal(itemId, itemName);
    });
  });
}

function showApprovalStatusModal(itemId, itemName) {
  const content = `
    <div class="space-y-4">
      <div class="bg-green-50 border border-green-200 rounded p-3">
        <p class="text-sm text-green-800">
          <i class="fa-solid fa-check-circle mr-2"></i>
          Approval status for: <strong>${itemName}</strong>
        </p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Overall Status</label>
        <p class="mt-1">
          <span class="px-3 py-1 bg-green-100 text-green-800 rounded font-medium">Approved</span>
        </p>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Approval Chain</label>
        <div class="mt-2 space-y-2">
          <div class="flex items-center justify-between p-2 bg-gray-50 rounded">
            <div class="flex items-center">
              <i class="fa-solid fa-check-circle text-green-600 mr-2"></i>
              <span class="text-sm">Max Chen (Deal Manager)</span>
            </div>
            <span class="text-xs text-gray-500">Oct 15, 2025</span>
          </div>
          <div class="flex items-center justify-between p-2 bg-gray-50 rounded">
            <i class="fa-solid fa-check-circle text-green-600 mr-2"></i>
            <span class="text-sm">Executive (Portfolio Navigator)</span>
            <span class="text-xs text-gray-500">Oct 18, 2025</span>
          </div>
          <div class="flex items-center justify-between p-2 bg-gray-50 rounded">
            <i class="fa-solid fa-check-circle text-green-600 mr-2"></i>
            <span class="text-sm">Sarah Johnson (Legal)</span>
            <span class="text-xs text-gray-500">Oct 20, 2025</span>
          </div>
        </div>
      </div>
      
      <div>
        <label class="text-sm font-medium text-gray-700">Final Approval Date</label>
        <p class="text-gray-900 mt-1">October 20, 2025 at 14:30</p>
      </div>
    </div>
  `;
  
  UnionCore.showModal('Approval Status', content, [
    { label: 'Close', onclick: 'UnionCore.closeModal()' }
  ]);
}

// ============================================================================
// INITIALIZATION
// ============================================================================

function initPhase4CFunctionality() {
  console.log('Initializing Phase 4C low priority orphans...');
  
  initLoadMoreButtons();
  initViewAllButtons();
  initSettingsButtons();
  initReviewTimelineButtons();
  initCreateInterventionButtons();
  initDeleteButtons();
  initViewApprovalButtons();
  
  console.log('Phase 4C functionality initialized ✅');
}

// Auto-initialize when DOM is ready
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initPhase4CFunctionality);
} else {
  initPhase4CFunctionality();
}

// Re-initialize when hash changes (for SPA navigation)
window.addEventListener('hashchange', function() {
  setTimeout(initPhase4CFunctionality, 100);
});

// Export for global access
window.initPhase4CFunctionality = initPhase4CFunctionality;
window.loadMoreItems = loadMoreItems;
window.navigateToViewAll = navigateToViewAll;
window.showSettingsModal = showSettingsModal;
window.saveSettings = saveSettings;
window.showReviewTimelineModal = showReviewTimelineModal;
window.showCreateInterventionModal = showCreateInterventionModal;
window.submitCreateIntervention = submitCreateIntervention;
window.showDeleteConfirmation = showDeleteConfirmation;
window.confirmDelete = confirmDelete;
window.showApprovalStatusModal = showApprovalStatusModal;


// ============================================================================
// NOTIFICATIONS OVERLAY SYSTEM
// Cross-cutting notification center accessible from multiple pages
// ============================================================================

// Sample notification data (will be replaced with API calls in production)
const sampleNotifications = [
    {
        id: 'notif-001',
        type: 'document',
        category: 'Document Management',
        title: 'New document uploaded',
        message: 'Lease Agreement v3.pdf has been uploaded by Sarah Chen',
        timestamp: new Date(Date.now() - 1000 * 60 * 15), // 15 minutes ago
        read: false,
        priority: 'normal',
        actionUrl: '#/document-management',
        icon: 'fa-file-pdf',
        color: 'blue'
    },
    {
        id: 'notif-002',
        type: 'approval',
        category: 'Approvals',
        title: 'Approval request pending',
        message: 'Deal #1247 requires your approval (£2.5M)',
        timestamp: new Date(Date.now() - 1000 * 60 * 60 * 2), // 2 hours ago
        read: false,
        priority: 'high',
        actionUrl: '#/approval-requests',
        icon: 'fa-check-circle',
        color: 'green'
    },
    {
        id: 'notif-003',
        type: 'risk',
        category: 'Risk Assessment',
        title: 'High risk alert',
        message: 'Environmental risk escalated to HIGH for Property XYZ',
        timestamp: new Date(Date.now() - 1000 * 60 * 60 * 5), // 5 hours ago
        read: false,
        priority: 'urgent',
        actionUrl: '#/risk-assessment',
        icon: 'fa-exclamation-triangle',
        color: 'red'
    },
    {
        id: 'notif-004',
        type: 'intervention',
        category: 'Interventions',
        title: 'Intervention required',
        message: 'Deal negotiation stalled - requires executive intervention',
        timestamp: new Date(Date.now() - 1000 * 60 * 60 * 8), // 8 hours ago
        read: false,
        priority: 'urgent',
        actionUrl: '#/interventions',
        icon: 'fa-exclamation-circle',
        color: 'orange'
    },
    {
        id: 'notif-005',
        type: 'document',
        category: 'Document Management',
        title: 'Document requires signature',
        message: 'HoT Agreement awaiting your signature',
        timestamp: new Date(Date.now() - 1000 * 60 * 60 * 24), // 1 day ago
        read: true,
        priority: 'normal',
        actionUrl: '#/document-management',
        icon: 'fa-signature',
        color: 'blue'
    },
    {
        id: 'notif-006',
        type: 'approval',
        category: 'Approvals',
        title: 'Approval granted',
        message: 'Your approval for Deal #1245 has been processed',
        timestamp: new Date(Date.now() - 1000 * 60 * 60 * 24 * 2), // 2 days ago
        read: true,
        priority: 'normal',
        actionUrl: '#/approval-requests',
        icon: 'fa-check',
        color: 'green'
    },
    {
        id: 'notif-007',
        type: 'task',
        category: 'Task Management',
        title: 'Task deadline approaching',
        message: 'Due diligence review due in 2 days',
        timestamp: new Date(Date.now() - 1000 * 60 * 60 * 24 * 3), // 3 days ago
        read: true,
        priority: 'normal',
        actionUrl: '#/task-management',
        icon: 'fa-tasks',
        color: 'purple'
    },
    {
        id: 'notif-008',
        type: 'analytics',
        category: 'Portfolio Analytics',
        title: 'Portfolio performance update',
        message: 'Q4 portfolio performance report is now available',
        timestamp: new Date(Date.now() - 1000 * 60 * 60 * 24 * 5), // 5 days ago
        read: true,
        priority: 'low',
        actionUrl: '#/portfolio',
        icon: 'fa-chart-line',
        color: 'indigo'
    }
];

// Notification state
let notificationsState = {
    notifications: [...sampleNotifications],
    unreadCount: 0,
    currentFilter: 'all',
    currentPage: null
};

// Initialize notifications system
function initNotificationsSystem() {
    console.log('🔔 Initializing Notifications System...');
    
    // Calculate initial unread count
    updateUnreadCount();
    
    // Create notification overlay HTML if not exists
    if (!document.getElementById('notifications-overlay')) {
        createNotificationsOverlay();
    }
    
    // Add notification bell icons to specified pages
    addNotificationBells();
    
    // Setup event listeners
    setupNotificationEventListeners();
    
    // Update badge counts
    updateAllBadges();
    
    console.log('✅ Notifications System initialized');
}

// Create the notifications overlay HTML structure
function createNotificationsOverlay() {
    const overlayHTML = `
        <!-- Notifications Overlay -->
        <div id="notifications-overlay" class="hidden fixed inset-0 z-50">
            <!-- Backdrop -->
            <div class="overlay-backdrop fixed inset-0 bg-slate bg-opacity-50 transition-opacity" 
                 onclick="closeNotificationsOverlay()"></div>
            
            <!-- Slide-out Panel -->
            <div class="overlay-panel fixed right-0 top-0 h-full w-full sm:w-96 bg-white shadow-2xl transform transition-transform duration-300 ease-in-out translate-x-full flex flex-col">
                <!-- Header -->
                <div class="overlay-header flex items-center justify-between p-6 border-b border-stone">
                    <div class="flex items-center space-x-3">
                        <i class="fa-solid fa-bell text-info text-xl"></i>
                        <h3 class="text-lg font-semibold text-slate">Notifications</h3>
                        <span class="unread-count-badge bg-danger text-white text-xs px-2 py-1 rounded-full">0</span>
                    </div>
                    <button class="close-overlay text-concrete hover:text-slate transition-colors" 
                            onclick="closeNotificationsOverlay()" 
                            title="Close">
                        <i class="fa-solid fa-times text-xl"></i>
                    </button>
                </div>
                
                <!-- Filters -->
                <div class="overlay-filters p-4 border-b border-stone bg-stone bg-opacity-30">
                    <div class="flex flex-wrap gap-2">
                        <button class="filter-btn active" data-filter="all">
                            All <span class="filter-count">0</span>
                        </button>
                        <button class="filter-btn" data-filter="unread">
                            Unread <span class="filter-count">0</span>
                        </button>
                        <button class="filter-btn" data-filter="document">
                            <i class="fa-solid fa-file mr-1"></i> Documents
                        </button>
                        <button class="filter-btn" data-filter="approval">
                            <i class="fa-solid fa-check-circle mr-1"></i> Approvals
                        </button>
                        <button class="filter-btn" data-filter="risk">
                            <i class="fa-solid fa-shield-alt mr-1"></i> Risks
                        </button>
                        <button class="filter-btn" data-filter="intervention">
                            <i class="fa-solid fa-exclamation-triangle mr-1"></i> Interventions
                        </button>
                    </div>
                </div>
                
                <!-- Content -->
                <div class="overlay-content flex-1 overflow-y-auto p-4">
                    <div id="notifications-list">
                        <!-- Notifications will be dynamically inserted here -->
                    </div>
                    
                    <!-- Empty state -->
                    <div id="notifications-empty" class="hidden text-center py-12">
                        <i class="fa-regular fa-bell-slash text-6xl text-concrete mb-4"></i>
                        <p class="text-concrete text-lg">No notifications</p>
                        <p class="text-concrete text-sm mt-2">You're all caught up!</p>
                    </div>
                </div>
                
                <!-- Footer -->
                <div class="overlay-footer p-4 border-t border-stone bg-stone bg-opacity-30">
                    <div class="flex items-center justify-between">
                        <button class="text-sm text-info hover:underline" onclick="markAllAsRead()">
                            <i class="fa-solid fa-check-double mr-1"></i> Mark all as read
                        </button>
                        <a href="#/notifications" class="text-sm text-info hover:underline" onclick="closeNotificationsOverlay()">
                            View all notifications →
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <style>
            /* Notification Overlay Styles */
            #notifications-overlay.active .overlay-panel {
                transform: translateX(0);
            }
            
            .filter-btn {
                padding: 6px 12px;
                border-radius: 6px;
                font-size: 13px;
                background: white;
                border: 1px solid #e5e7eb;
                color: #6b7280;
                transition: all 0.2s;
                cursor: pointer;
            }
            
            .filter-btn:hover {
                background: #f9fafb;
                border-color: #3b82f6;
                color: #3b82f6;
            }
            
            .filter-btn.active {
                background: #3b82f6;
                border-color: #3b82f6;
                color: white;
            }
            
            .filter-count {
                display: inline-block;
                margin-left: 4px;
                font-weight: 600;
            }
            
            .notification-item {
                padding: 16px;
                border-radius: 8px;
                margin-bottom: 12px;
                background: white;
                border: 1px solid #e5e7eb;
                cursor: pointer;
                transition: all 0.2s;
            }
            
            .notification-item:hover {
                border-color: #3b82f6;
                box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);
            }
            
            .notification-item.unread {
                background: #eff6ff;
                border-left: 3px solid #3b82f6;
            }
            
            .notification-item.priority-urgent {
                border-left-color: #ef4444;
            }
            
            .notification-item.priority-high {
                border-left-color: #f59e0b;
            }
            
            .notification-badge {
                display: inline-flex;
                align-items: center;
                justify-content: center;
                min-width: 20px;
                height: 20px;
                padding: 0 6px;
                border-radius: 10px;
                font-size: 11px;
                font-weight: 600;
                background: #ef4444;
                color: white;
            }
            
            .notification-bell-container {
                position: relative;
                display: inline-block;
            }
            
            .notification-bell {
                position: relative;
                padding: 8px 12px;
                background: white;
                border: 1px solid #e5e7eb;
                border-radius: 8px;
                color: #6b7280;
                cursor: pointer;
                transition: all 0.2s;
            }
            
            .notification-bell:hover {
                background: #f9fafb;
                border-color: #3b82f6;
                color: #3b82f6;
            }
            
            .notification-bell .notification-badge {
                position: absolute;
                top: -8px;
                right: -8px;
            }
        </style>
    `;
    
    // Append to body
    document.body.insertAdjacentHTML('beforeend', overlayHTML);
}

// Add notification bell icons to specified pages
function addNotificationBells() {
    const pages = [
        { id: 'document-management-page', category: 'document', name: 'Document Management' },
        { id: 'approval-requests-page', category: 'approval', name: 'Approvals' },
        { id: 'interventions-page', category: 'intervention', name: 'Interventions' },
        { id: 'risk-assessment-page', category: 'risk', name: 'Risk Assessment' },
        { id: 'portfolio-page', category: 'analytics', name: 'Portfolio Analytics' }
    ];
    
    pages.forEach(page => {
        const pageElement = document.getElementById(page.id);
        if (pageElement) {
            // Find the page header actions area
            let actionsArea = pageElement.querySelector('.flex.items-center.space-x-4');
            
            // If no actions area exists, create one
            if (!actionsArea) {
                const header = pageElement.querySelector('section');
                if (header) {
                    const headerContent = header.querySelector('.flex.items-center.justify-between');
                    if (headerContent) {
                        actionsArea = document.createElement('div');
                        actionsArea.className = 'flex items-center space-x-4';
                        headerContent.appendChild(actionsArea);
                    }
                }
            }
            
            // Add notification bell
            if (actionsArea) {
                const bellHTML = `
                    <div class="notification-bell-container">
                        <button class="notification-bell" 
                                data-page="${page.id}" 
                                data-category="${page.category}"
                                onclick="openNotificationsOverlay('${page.category}')"
                                title="View ${page.name} notifications">
                            <i class="fa-regular fa-bell"></i>
                            <span class="notification-badge" data-badge-category="${page.category}">0</span>
                        </button>
                    </div>
                `;
                actionsArea.insertAdjacentHTML('beforeend', bellHTML);
            }
        }
    });
}

// Setup event listeners
function setupNotificationEventListeners() {
    // Filter buttons
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const filter = this.getAttribute('data-filter');
            setNotificationFilter(filter);
        });
    });
    
    // Close on escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeNotificationsOverlay();
        }
    });
}

// Open notifications overlay
function openNotificationsOverlay(category = 'all') {
    console.log(`🔔 Opening notifications overlay (filter: ${category})`);
    
    const overlay = document.getElementById('notifications-overlay');
    if (overlay) {
        // Store current page context
        notificationsState.currentPage = category;
        
        // Show overlay
        overlay.classList.remove('hidden');
        
        // Trigger animation
        setTimeout(() => {
            overlay.classList.add('active');
        }, 10);
        
        // Set filter
        setNotificationFilter(category);
        
        // Render notifications
        renderNotifications();
        
        // Prevent body scroll
        document.body.style.overflow = 'hidden';
    }
}

// Close notifications overlay
function closeNotificationsOverlay() {
    console.log('🔔 Closing notifications overlay');
    
    const overlay = document.getElementById('notifications-overlay');
    if (overlay) {
        // Remove active class for animation
        overlay.classList.remove('active');
        
        // Hide after animation
        setTimeout(() => {
            overlay.classList.add('hidden');
            document.body.style.overflow = '';
        }, 300);
    }
}

// Set notification filter
function setNotificationFilter(filter) {
    notificationsState.currentFilter = filter;
    
    // Update active filter button
    document.querySelectorAll('.filter-btn').forEach(btn => {
        if (btn.getAttribute('data-filter') === filter) {
            btn.classList.add('active');
        } else {
            btn.classList.remove('active');
        }
    });
    
    // Render filtered notifications
    renderNotifications();
}

// Render notifications list
function renderNotifications() {
    const listContainer = document.getElementById('notifications-list');
    const emptyState = document.getElementById('notifications-empty');
    
    if (!listContainer) return;
    
    // Filter notifications
    let filtered = notificationsState.notifications;
    
    if (notificationsState.currentFilter === 'unread') {
        filtered = filtered.filter(n => !n.read);
    } else if (notificationsState.currentFilter !== 'all') {
        filtered = filtered.filter(n => n.type === notificationsState.currentFilter);
    }
    
    // Sort by timestamp (newest first)
    filtered.sort((a, b) => b.timestamp - a.timestamp);
    
    // Show/hide empty state
    if (filtered.length === 0) {
        listContainer.innerHTML = '';
        emptyState.classList.remove('hidden');
        return;
    } else {
        emptyState.classList.add('hidden');
    }
    
    // Render notifications
    const html = filtered.map(notification => {
        const timeAgo = getTimeAgo(notification.timestamp);
        const priorityClass = notification.priority === 'urgent' || notification.priority === 'high' 
            ? `priority-${notification.priority}` 
            : '';
        const unreadClass = !notification.read ? 'unread' : '';
        
        return `
            <div class="notification-item ${unreadClass} ${priorityClass}" 
                 data-notification-id="${notification.id}"
                 onclick="handleNotificationClick('${notification.id}')">
                <div class="flex items-start space-x-3">
                    <div class="notification-icon flex-shrink-0 w-10 h-10 rounded-full bg-${notification.color}-100 flex items-center justify-center">
                        <i class="fa-solid ${notification.icon} text-${notification.color}-600"></i>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="flex items-center justify-between mb-1">
                            <p class="text-sm font-semibold text-slate">${notification.title}</p>
                            ${!notification.read ? '<span class="w-2 h-2 bg-info rounded-full"></span>' : ''}
                        </div>
                        <p class="text-sm text-concrete mb-2">${notification.message}</p>
                        <div class="flex items-center justify-between">
                            <span class="text-xs text-concrete">${timeAgo}</span>
                            <span class="text-xs text-concrete">${notification.category}</span>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }).join('');
    
    listContainer.innerHTML = html;
    
    // Update filter counts
    updateFilterCounts();
}

// Handle notification click
function handleNotificationClick(notificationId) {
    const notification = notificationsState.notifications.find(n => n.id === notificationId);
    
    if (notification) {
        // Mark as read
        notification.read = true;
        
        // Update UI
        updateUnreadCount();
        updateAllBadges();
        
        // Navigate to action URL
        if (notification.actionUrl) {
            window.location.hash = notification.actionUrl;
        }
        
        // Close overlay
        closeNotificationsOverlay();
        
        // Show toast
        UnionCore.showToast('Notification opened', 'info');
    }
}

// Mark all notifications as read
function markAllAsRead() {
    notificationsState.notifications.forEach(n => n.read = true);
    
    // Update UI
    updateUnreadCount();
    updateAllBadges();
    renderNotifications();
    
    // Show toast
    UnionCore.showToast('All notifications marked as read', 'success');
}

// Update unread count
function updateUnreadCount() {
    notificationsState.unreadCount = notificationsState.notifications.filter(n => !n.read).length;
    
    // Update badge in overlay header
    const badge = document.querySelector('.unread-count-badge');
    if (badge) {
        badge.textContent = notificationsState.unreadCount;
        badge.style.display = notificationsState.unreadCount > 0 ? 'inline-block' : 'none';
    }
}

// Update all notification badges
function updateAllBadges() {
    // Update category-specific badges
    const categories = ['document', 'approval', 'risk', 'intervention', 'analytics'];
    
    categories.forEach(category => {
        const count = notificationsState.notifications.filter(n => 
            n.type === category && !n.read
        ).length;
        
        const badges = document.querySelectorAll(`[data-badge-category="${category}"]`);
        badges.forEach(badge => {
            badge.textContent = count;
            badge.style.display = count > 0 ? 'inline-flex' : 'none';
        });
    });
    
    // Update sidebar notification badge
    const sidebarBadge = document.querySelector('#nav-notifications .ml-auto');
    if (sidebarBadge && notificationsState.unreadCount > 0) {
        sidebarBadge.classList.remove('w-2', 'h-2');
        sidebarBadge.classList.add('px-2', 'py-1', 'text-xs');
        sidebarBadge.textContent = notificationsState.unreadCount;
    }
}

// Update filter counts
function updateFilterCounts() {
    const allCount = notificationsState.notifications.length;
    const unreadCount = notificationsState.notifications.filter(n => !n.read).length;
    
    // Update "All" count
    const allBtn = document.querySelector('.filter-btn[data-filter="all"] .filter-count');
    if (allBtn) allBtn.textContent = allCount;
    
    // Update "Unread" count
    const unreadBtn = document.querySelector('.filter-btn[data-filter="unread"] .filter-count');
    if (unreadBtn) unreadBtn.textContent = unreadCount;
}

// Get time ago string
function getTimeAgo(timestamp) {
    const seconds = Math.floor((new Date() - timestamp) / 1000);
    
    if (seconds < 60) return 'Just now';
    if (seconds < 3600) return `${Math.floor(seconds / 60)}m ago`;
    if (seconds < 86400) return `${Math.floor(seconds / 3600)}h ago`;
    if (seconds < 604800) return `${Math.floor(seconds / 86400)}d ago`;
    return `${Math.floor(seconds / 604800)}w ago`;
}

// Simulate real-time notification
function simulateNewNotification() {
    const newNotification = {
        id: `notif-${Date.now()}`,
        type: 'approval',
        category: 'Approvals',
        title: 'New approval request',
        message: 'Deal #1250 requires your immediate approval (£3.2M)',
        timestamp: new Date(),
        read: false,
        priority: 'urgent',
        actionUrl: '#/approval-requests',
        icon: 'fa-exclamation-circle',
        color: 'orange'
    };
    
    notificationsState.notifications.unshift(newNotification);
    updateUnreadCount();
    updateAllBadges();
    
    // If overlay is open, re-render
    if (!document.getElementById('notifications-overlay').classList.contains('hidden')) {
        renderNotifications();
    }
    
    // Show toast
    UnionCore.showToast('New notification received', 'info');
}

// Initialize on DOM ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initNotificationsSystem);
} else {
    initNotificationsSystem();
}

// Expose functions globally
window.openNotificationsOverlay = openNotificationsOverlay;
window.closeNotificationsOverlay = closeNotificationsOverlay;
window.handleNotificationClick = handleNotificationClick;
window.markAllAsRead = markAllAsRead;
window.simulateNewNotification = simulateNewNotification;

console.log('✅ Notifications Overlay System loaded');


// ============================================================================
// INTERVENTIONS SYSTEM
// Accessible from Dashboard, Deal Room, and Interventions page
// ============================================================================

// Sample interventions data (will be replaced with API calls in production)
const sampleInterventions = [
    {
        id: 'int-001',
        dealId: 'deal-1247',
        dealName: 'Oxford Street Retail - Deal #1247',
        type: 'negotiation',
        priority: 'urgent',
        status: 'open',
        title: 'Negotiation stalled - price dispute',
        description: 'Landlord refusing to budge on £2.5M asking price. Tenant max budget is £2.2M. Requires executive intervention to bridge gap or walk away.',
        createdBy: 'Sarah Chen',
        createdAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 2), // 2 days ago
        assignedTo: 'Max (Executive)',
        dueDate: new Date(Date.now() + 1000 * 60 * 60 * 24 * 3), // 3 days from now
        comments: 2,
        updates: 5
    },
    {
        id: 'int-002',
        dealId: 'deal-1245',
        dealName: 'Manchester Office Park - Deal #1245',
        type: 'approval',
        priority: 'high',
        status: 'open',
        title: 'Approval delayed - missing documentation',
        description: 'Environmental survey incomplete. Approval on hold for 5 days. Need to expedite or risk losing deal.',
        createdBy: 'John Smith',
        createdAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 5), // 5 days ago
        assignedTo: 'Max (Executive)',
        dueDate: new Date(Date.now() + 1000 * 60 * 60 * 24), // 1 day from now
        comments: 8,
        updates: 12
    },
    {
        id: 'int-003',
        dealId: 'deal-1250',
        dealName: 'Birmingham Warehouse - Deal #1250',
        type: 'risk',
        priority: 'urgent',
        status: 'open',
        title: 'High environmental risk identified',
        description: 'Soil contamination discovered during due diligence. Remediation costs estimated at £500K. Decision needed on proceeding.',
        createdBy: 'Emma Wilson',
        createdAt: new Date(Date.now() - 1000 * 60 * 60 * 24), // 1 day ago
        assignedTo: 'Max (Executive)',
        dueDate: new Date(Date.now() + 1000 * 60 * 60 * 48), // 2 days from now
        comments: 3,
        updates: 7
    },
    {
        id: 'int-004',
        dealId: 'deal-1248',
        dealName: 'Leeds Shopping Center - Deal #1248',
        type: 'legal',
        priority: 'medium',
        status: 'in-progress',
        title: 'Legal review taking longer than expected',
        description: 'Complex lease terms requiring additional legal review. Timeline extended by 2 weeks.',
        createdBy: 'David Brown',
        createdAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 7), // 7 days ago
        assignedTo: 'Legal Team',
        dueDate: new Date(Date.now() + 1000 * 60 * 60 * 24 * 14), // 14 days from now
        comments: 15,
        updates: 20
    },
    {
        id: 'int-005',
        dealId: 'deal-1242',
        dealName: 'Liverpool Industrial - Deal #1242',
        type: 'financial',
        priority: 'low',
        status: 'resolved',
        title: 'Budget variance resolved',
        description: 'Initial budget exceeded by 8%. Reallocation approved and deal proceeding.',
        createdBy: 'Sarah Chen',
        createdAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 14), // 14 days ago
        assignedTo: 'Finance Team',
        dueDate: new Date(Date.now() - 1000 * 60 * 60 * 24 * 7), // 7 days ago (resolved)
        resolvedAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 7),
        comments: 22,
        updates: 30
    }
];

// Interventions state
let interventionsState = {
    interventions: [...sampleInterventions],
    currentFilter: 'open',
    currentDeal: null
};

// Initialize interventions system
function initInterventionsSystem() {
    console.log('🚨 Initializing Interventions System...');
    
    // Add interventions widget to Dashboard
    addInterventionsWidgetToDashboard();
    
    // Add interventions section to Deal Room (if exists)
    addInterventionsToDealRoom();
    
    // Enhance Interventions page (if exists)
    enhanceInterventionsPage();
    
    console.log('✅ Interventions System initialized');
}

// Add interventions widget to Dashboard
function addInterventionsWidgetToDashboard() {
    const dashboard = document.getElementById('dashboard-page');
    if (!dashboard) return;
    
    // Find a good place to insert the widget (after KPI tiles)
    const kpiSection = dashboard.querySelector('#kpi-tiles');
    if (!kpiSection) return;
    
    // Get urgent/high priority interventions assigned to Max
    const myInterventions = interventionsState.interventions.filter(i => 
        (i.priority === 'urgent' || i.priority === 'high') && 
        i.status === 'open' &&
        i.assignedTo.includes('Max')
    );
    
    const urgentCount = myInterventions.filter(i => i.priority === 'urgent').length;
    const highCount = myInterventions.filter(i => i.priority === 'high').length;
    
    // Create widget HTML
    const widgetHTML = `
        <!-- My Interventions Widget -->
        <section id="my-interventions-widget" class="mb-8">
            <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                <div class="flex items-center justify-between mb-6">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 rounded-full bg-danger bg-opacity-10 flex items-center justify-center">
                            <i class="fa-solid fa-exclamation-triangle text-danger text-lg"></i>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-slate">My Interventions</h3>
                            <p class="text-sm text-concrete">Requires your immediate attention</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-2">
                        ${urgentCount > 0 ? `<span class="px-3 py-1 bg-danger bg-opacity-10 text-danger text-sm font-semibold rounded-full">${urgentCount} Urgent</span>` : ''}
                        ${highCount > 0 ? `<span class="px-3 py-1 bg-warning bg-opacity-10 text-warning text-sm font-semibold rounded-full">${highCount} High</span>` : ''}
                    </div>
                </div>
                
                <div class="space-y-3" id="interventions-list">
                    ${myInterventions.length === 0 ? `
                        <div class="text-center py-8">
                            <i class="fa-regular fa-check-circle text-6xl text-success mb-4"></i>
                            <p class="text-concrete text-lg">No urgent interventions</p>
                            <p class="text-concrete text-sm mt-2">All deals are progressing smoothly</p>
                        </div>
                    ` : myInterventions.map(intervention => `
                        <div class="intervention-item p-4 border border-stone rounded-lg hover:border-info transition-colors cursor-pointer"
                             onclick="viewInterventionDetails('${intervention.id}')">
                            <div class="flex items-start justify-between">
                                <div class="flex items-start space-x-3 flex-1">
                                    <div class="intervention-icon w-8 h-8 rounded-full ${intervention.priority === 'urgent' ? 'bg-danger' : 'bg-warning'} bg-opacity-10 flex items-center justify-center flex-shrink-0">
                                        <i class="fa-solid ${getInterventionIcon(intervention.type)} ${intervention.priority === 'urgent' ? 'text-danger' : 'text-warning'}"></i>
                                    </div>
                                    <div class="flex-1 min-w-0">
                                        <div class="flex items-center space-x-2 mb-1">
                                            <h4 class="text-sm font-semibold text-slate">${intervention.title}</h4>
                                            <span class="px-2 py-0.5 bg-${intervention.priority === 'urgent' ? 'danger' : 'warning'} bg-opacity-10 text-${intervention.priority === 'urgent' ? 'danger' : 'warning'} text-xs font-semibold rounded uppercase">${intervention.priority}</span>
                                        </div>
                                        <p class="text-sm text-concrete mb-2">${intervention.dealName}</p>
                                        <p class="text-sm text-concrete line-clamp-2">${intervention.description}</p>
                                        <div class="flex items-center space-x-4 mt-2 text-xs text-concrete">
                                            <span><i class="fa-regular fa-clock mr-1"></i> Due ${getTimeUntil(intervention.dueDate)}</span>
                                            <span><i class="fa-regular fa-comment mr-1"></i> ${intervention.comments} comments</span>
                                            <span><i class="fa-solid fa-history mr-1"></i> ${intervention.updates} updates</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex flex-col space-y-2 ml-4">
                                    <button class="btn-sm bg-info text-white px-3 py-1 rounded hover:bg-info-dark transition-colors"
                                            onclick="event.stopPropagation(); viewInterventionDetails('${intervention.id}')">
                                        View
                                    </button>
                                    <button class="btn-sm bg-success text-white px-3 py-1 rounded hover:bg-success-dark transition-colors"
                                            onclick="event.stopPropagation(); resolveIntervention('${intervention.id}')">
                                        Resolve
                                    </button>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <div class="mt-6 pt-6 border-t border-stone flex items-center justify-between">
                    <button class="text-sm text-info hover:underline" onclick="window.location.hash = '#/interventions'">
                        View all interventions →
                    </button>
                    <button class="btn bg-info text-white px-4 py-2 rounded hover:bg-info-dark transition-colors"
                            onclick="createNewIntervention()">
                        <i class="fa-solid fa-plus mr-2"></i> Create Intervention
                    </button>
                </div>
            </div>
        </section>
    `;
    
    // Insert after KPI section
    kpiSection.insertAdjacentHTML('afterend', widgetHTML);
}

// Add interventions section to Deal Room
function addInterventionsToDealRoom() {
    const dealRoom = document.getElementById('deal-room-page');
    if (!dealRoom) return;
    
    // This will be implemented when Deal Room page structure is available
    console.log('📋 Deal Room interventions integration ready (pending Deal Room page structure)');
}

// Enhance Interventions page
function enhanceInterventionsPage() {
    const interventionsPage = document.getElementById('interventions-page');
    if (!interventionsPage) return;
    
    // Add filtering, search, and bulk actions to existing page
    console.log('📋 Interventions page enhancements ready');
}

// View intervention details
function viewInterventionDetails(interventionId) {
    const intervention = interventionsState.interventions.find(i => i.id === interventionId);
    
    if (!intervention) return;
    
    // Create detail modal
    const modalHTML = `
        <div class="modal-backdrop fixed inset-0 bg-slate bg-opacity-50 z-50 flex items-center justify-center" onclick="closeInterventionModal()">
            <div class="modal-content bg-white rounded-lg shadow-2xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto" onclick="event.stopPropagation()">
                <div class="modal-header p-6 border-b border-stone">
                    <div class="flex items-start justify-between">
                        <div class="flex items-start space-x-4">
                            <div class="w-12 h-12 rounded-full bg-${intervention.priority === 'urgent' ? 'danger' : 'warning'} bg-opacity-10 flex items-center justify-center">
                                <i class="fa-solid ${getInterventionIcon(intervention.type)} text-${intervention.priority === 'urgent' ? 'danger' : 'warning'} text-xl"></i>
                            </div>
                            <div>
                                <h2 class="text-2xl font-semibold text-slate mb-2">${intervention.title}</h2>
                                <p class="text-concrete">${intervention.dealName}</p>
                            </div>
                        </div>
                        <button class="text-concrete hover:text-slate transition-colors" onclick="closeInterventionModal()">
                            <i class="fa-solid fa-times text-2xl"></i>
                        </button>
                    </div>
                </div>
                
                <div class="modal-body p-6">
                    <!-- Status and Priority -->
                    <div class="grid grid-cols-4 gap-4 mb-6">
                        <div>
                            <label class="text-xs text-concrete uppercase tracking-wide mb-1 block">Status</label>
                            <span class="px-3 py-1 bg-${intervention.status === 'open' ? 'warning' : intervention.status === 'in-progress' ? 'info' : 'success'} bg-opacity-10 text-${intervention.status === 'open' ? 'warning' : intervention.status === 'in-progress' ? 'info' : 'success'} text-sm font-semibold rounded inline-block">${intervention.status.replace('-', ' ').toUpperCase()}</span>
                        </div>
                        <div>
                            <label class="text-xs text-concrete uppercase tracking-wide mb-1 block">Priority</label>
                            <span class="px-3 py-1 bg-${intervention.priority === 'urgent' ? 'danger' : intervention.priority === 'high' ? 'warning' : 'info'} bg-opacity-10 text-${intervention.priority === 'urgent' ? 'danger' : intervention.priority === 'high' ? 'warning' : 'info'} text-sm font-semibold rounded inline-block">${intervention.priority.toUpperCase()}</span>
                        </div>
                        <div>
                            <label class="text-xs text-concrete uppercase tracking-wide mb-1 block">Type</label>
                            <span class="text-sm text-slate font-medium">${intervention.type.charAt(0).toUpperCase() + intervention.type.slice(1)}</span>
                        </div>
                        <div>
                            <label class="text-xs text-concrete uppercase tracking-wide mb-1 block">Due Date</label>
                            <span class="text-sm text-slate font-medium">${getTimeUntil(intervention.dueDate)}</span>
                        </div>
                    </div>
                    
                    <!-- Description -->
                    <div class="mb-6">
                        <label class="text-xs text-concrete uppercase tracking-wide mb-2 block">Description</label>
                        <p class="text-slate leading-relaxed">${intervention.description}</p>
                    </div>
                    
                    <!-- Assignment and Timeline -->
                    <div class="grid grid-cols-2 gap-6 mb-6">
                        <div>
                            <label class="text-xs text-concrete uppercase tracking-wide mb-2 block">Assigned To</label>
                            <div class="flex items-center space-x-2">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-1.jpg" alt="Assignee" class="w-8 h-8 rounded-full">
                                <span class="text-sm text-slate font-medium">${intervention.assignedTo}</span>
                            </div>
                        </div>
                        <div>
                            <label class="text-xs text-concrete uppercase tracking-wide mb-2 block">Created By</label>
                            <div class="flex items-center space-x-2">
                                <img src="https://storage.googleapis.com/uxpilot-auth.appspot.com/avatars/avatar-2.jpg" alt="Creator" class="w-8 h-8 rounded-full">
                                <span class="text-sm text-slate font-medium">${intervention.createdBy}</span>
                                <span class="text-xs text-concrete">${getTimeAgo(intervention.createdAt)}</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Activity Stats -->
                    <div class="grid grid-cols-3 gap-4 mb-6 p-4 bg-stone bg-opacity-30 rounded-lg">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-slate">${intervention.comments}</div>
                            <div class="text-xs text-concrete uppercase tracking-wide">Comments</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-slate">${intervention.updates}</div>
                            <div class="text-xs text-concrete uppercase tracking-wide">Updates</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-slate">${Math.floor((new Date() - intervention.createdAt) / (1000 * 60 * 60 * 24))}</div>
                            <div class="text-xs text-concrete uppercase tracking-wide">Days Open</div>
                        </div>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="flex items-center space-x-3">
                        <button class="flex-1 btn bg-success text-white px-4 py-3 rounded hover:bg-success-dark transition-colors"
                                onclick="resolveIntervention('${intervention.id}')">
                            <i class="fa-solid fa-check mr-2"></i> Mark as Resolved
                        </button>
                        <button class="flex-1 btn bg-info text-white px-4 py-3 rounded hover:bg-info-dark transition-colors"
                                onclick="updateInterventionStatus('${intervention.id}', 'in-progress')">
                            <i class="fa-solid fa-play mr-2"></i> Start Working
                        </button>
                        <button class="flex-1 btn bg-warning text-white px-4 py-3 rounded hover:bg-warning-dark transition-colors"
                                onclick="escalateIntervention('${intervention.id}')">
                            <i class="fa-solid fa-arrow-up mr-2"></i> Escalate
                        </button>
                        <button class="btn bg-stone text-slate px-4 py-3 rounded hover:bg-concrete transition-colors"
                                onclick="window.location.hash = '#/deal-room?deal=${intervention.dealId}'">
                            <i class="fa-solid fa-external-link-alt mr-2"></i> View Deal
                        </button>
                    </div>
                </div>
            </div>
        </div>
    `;
    
    // Add modal to body
    document.body.insertAdjacentHTML('beforeend', modalHTML);
}

// Close intervention modal
function closeInterventionModal() {
    const modal = document.querySelector('.modal-backdrop');
    if (modal) {
        modal.remove();
    }
}

// Resolve intervention
function resolveIntervention(interventionId) {
    const intervention = interventionsState.interventions.find(i => i.id === interventionId);
    
    if (!intervention) return;
    
    // Update status
    intervention.status = 'resolved';
    intervention.resolvedAt = new Date();
    
    // Close modal if open
    closeInterventionModal();
    
    // Refresh Dashboard widget
    const widget = document.getElementById('my-interventions-widget');
    if (widget) {
        widget.remove();
        addInterventionsWidgetToDashboard();
    }
    
    // Show success toast
    UnionCore.showToast(`Intervention "${intervention.title}" marked as resolved`, 'success');
}

// Update intervention status
function updateInterventionStatus(interventionId, newStatus) {
    const intervention = interventionsState.interventions.find(i => i.id === interventionId);
    
    if (!intervention) return;
    
    intervention.status = newStatus;
    
    // Close modal
    closeInterventionModal();
    
    // Show success toast
    UnionCore.showToast(`Intervention status updated to "${newStatus}"`, 'success');
}

// Escalate intervention
function escalateIntervention(interventionId) {
    const intervention = interventionsState.interventions.find(i => i.id === interventionId);
    
    if (!intervention) return;
    
    // Increase priority
    if (intervention.priority === 'low') intervention.priority = 'medium';
    else if (intervention.priority === 'medium') intervention.priority = 'high';
    else if (intervention.priority === 'high') intervention.priority = 'urgent';
    
    // Close modal
    closeInterventionModal();
    
    // Show success toast
    UnionCore.showToast(`Intervention escalated to ${intervention.priority.toUpperCase()} priority`, 'warning');
}

// Create new intervention
function createNewIntervention() {
    // This will open the existing "Create Intervention" modal from Phase 4C
    if (typeof window.createInterventionModal === 'function') {
        window.createInterventionModal();
    } else {
        UnionCore.showToast('Create intervention functionality coming soon', 'info');
    }
}

// Helper: Get intervention icon based on type
function getInterventionIcon(type) {
    const icons = {
        'negotiation': 'fa-handshake',
        'approval': 'fa-check-circle',
        'risk': 'fa-shield-alt',
        'legal': 'fa-gavel',
        'financial': 'fa-pound-sign',
        'other': 'fa-exclamation-circle'
    };
    return icons[type] || icons['other'];
}

// Helper: Get time until date
function getTimeUntil(date) {
    const now = new Date();
    const diff = date - now;
    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    
    if (diff < 0) return 'Overdue';
    if (days === 0) return `${hours}h remaining`;
    if (days === 1) return 'Tomorrow';
    return `${days} days`;
}

// Helper: Get time ago
function getTimeAgo(date) {
    const seconds = Math.floor((new Date() - date) / 1000);
    
    if (seconds < 60) return 'Just now';
    if (seconds < 3600) return `${Math.floor(seconds / 60)}m ago`;
    if (seconds < 86400) return `${Math.floor(seconds / 3600)}h ago`;
    if (seconds < 604800) return `${Math.floor(seconds / 86400)}d ago`;
    return `${Math.floor(seconds / 604800)}w ago`;
}

// Initialize on DOM ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initInterventionsSystem);
} else {
    initInterventionsSystem();
}

// Expose functions globally
window.viewInterventionDetails = viewInterventionDetails;
window.closeInterventionModal = closeInterventionModal;
window.resolveIntervention = resolveIntervention;
window.updateInterventionStatus = updateInterventionStatus;
window.escalateIntervention = escalateIntervention;
window.createNewIntervention = createNewIntervention;

console.log('✅ Interventions System loaded');


// ============================================================================
// LINEAR FLOW NAVIGATION SYSTEM
// Visual flow indicators with numbered badges and breadcrumbs
// ============================================================================

// Define the linear flow order for Negotiation section
const negotiationFlow = [
    { step: 1, id: 'dashboard', navId: 'nav-dashboard', name: 'Dashboard', section: 'Start' },
    { step: 2, id: 'deals-overview', navId: 'nav-deals-overview', name: 'Deals Overview', section: 'Negotiation' },
    { step: 3, id: 'deal-room', navId: null, name: 'Deal Room', section: 'Negotiation', note: 'Per-deal' },
    { step: 4, id: 'heads-of-terms', navId: 'nav-heads-of-terms', name: 'Heads of Terms', section: 'Negotiation' },
    { step: 5, id: 'document-management', navId: 'nav-document-management', name: 'Document Management', section: 'Negotiation' },
    { step: 6, id: 'approval-requests', navId: 'nav-approval-requests', name: 'Approvals', section: 'Negotiation' },
    { step: 7, id: 'interventions', navId: 'nav-interventions', name: 'Negotiation Dashboard', section: 'Admin' },
    { step: 8, id: 'risk-assessment', navId: 'nav-risk-assessment', name: 'Risk Assessment', section: 'Negotiation' },
    { step: 9, id: 'portfolio', navId: 'nav-portfolio', name: 'Portfolio Analytics', section: 'Analytics' },
    { step: 10, id: 'activity-log', navId: 'nav-activity-log', name: 'Activity Log', section: 'Admin' }
];

// Flow navigation state
let flowState = {
    currentStep: 1,
    currentPage: 'dashboard',
    completedSteps: [],
    flowEnabled: true
};

// Initialize linear flow navigation
function initLinearFlowNavigation() {
    console.log('🔢 Initializing Linear Flow Navigation...');
    
    // Add flow badges to navigation items
    addFlowBadgesToNavigation();
    
    // Add breadcrumb navigation to pages
    addBreadcrumbNavigation();
    
    // Add flow diagram to Dashboard
    addFlowDiagramToDashboard();
    
    // Setup page change detection
    setupPageChangeDetection();
    
    // Update initial flow state
    updateFlowState();
    
    console.log('✅ Linear Flow Navigation initialized');
}

// Add flow badges to navigation items
function addFlowBadgesToNavigation() {
    negotiationFlow.forEach(flowItem => {
        if (!flowItem.navId) return; // Skip items without navigation (like Deal Room)
        
        const navElement = document.getElementById(flowItem.navId);
        if (navElement) {
            // Create flow badge
            const badge = document.createElement('span');
            badge.className = 'flow-badge';
            badge.setAttribute('data-step', flowItem.step);
            badge.textContent = flowItem.step;
            badge.title = `Step ${flowItem.step} of ${negotiationFlow.length}: ${flowItem.name}`;
            
            // Insert badge before the icon
            const icon = navElement.querySelector('i');
            if (icon) {
                navElement.insertBefore(badge, icon);
            } else {
                navElement.insertBefore(badge, navElement.firstChild);
            }
            
            // Add flow-step class to nav element
            navElement.classList.add('flow-step');
            navElement.setAttribute('data-flow-step', flowItem.step);
            navElement.setAttribute('data-flow-id', flowItem.id);
        }
    });
    
    // Add CSS for flow badges
    addFlowBadgeStyles();
}

// Add CSS styles for flow badges
function addFlowBadgeStyles() {
    const styleId = 'flow-badge-styles';
    if (document.getElementById(styleId)) return;
    
    const styles = `
        <style id="${styleId}">
            .flow-badge {
                display: inline-flex;
                align-items: center;
                justify-content: center;
                width: 22px;
                height: 22px;
                border-radius: 50%;
                font-size: 11px;
                font-weight: 700;
                margin-right: 10px;
                flex-shrink: 0;
                transition: all 0.2s;
            }
            
            /* Default state - upcoming */
            .flow-step .flow-badge {
                background: #e5e7eb;
                color: #6b7280;
                border: 2px solid transparent;
            }
            
            /* Completed state */
            .flow-step.flow-completed .flow-badge {
                background: #10b981;
                color: white;
                border: 2px solid #059669;
            }
            
            /* Current state */
            .flow-step.flow-current .flow-badge {
                background: #3b82f6;
                color: white;
                border: 2px solid #2563eb;
                box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
                animation: pulse-flow 2s infinite;
            }
            
            /* Hover effect */
            .flow-step:hover .flow-badge {
                transform: scale(1.1);
            }
            
            /* Pulse animation for current step */
            @keyframes pulse-flow {
                0%, 100% {
                    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
                }
                50% {
                    box-shadow: 0 0 0 6px rgba(59, 130, 246, 0.1);
                }
            }
            
            /* Breadcrumb styles */
            .breadcrumb-nav {
                display: flex;
                align-items: center;
                padding: 12px 0;
                margin-bottom: 20px;
                font-size: 14px;
            }
            
            .breadcrumb-nav a {
                color: #6b7280;
                text-decoration: none;
                transition: color 0.2s;
            }
            
            .breadcrumb-nav a:hover {
                color: #3b82f6;
                text-decoration: underline;
            }
            
            .breadcrumb-separator {
                margin: 0 8px;
                color: #d1d5db;
            }
            
            .breadcrumb-current {
                color: #1e293b;
                font-weight: 600;
            }
            
            .breadcrumb-step {
                margin-left: 12px;
                padding: 2px 8px;
                background: #eff6ff;
                color: #3b82f6;
                border-radius: 12px;
                font-size: 12px;
                font-weight: 600;
            }
            
            /* Flow diagram styles */
            .flow-diagram {
                display: grid;
                grid-template-columns: repeat(5, 1fr);
                gap: 16px;
                padding: 24px;
                background: white;
                border-radius: 12px;
                border: 1px solid #e5e7eb;
            }
            
            .flow-step-card {
                padding: 16px;
                border-radius: 8px;
                border: 2px solid #e5e7eb;
                background: white;
                cursor: pointer;
                transition: all 0.2s;
                position: relative;
            }
            
            .flow-step-card:hover {
                border-color: #3b82f6;
                box-shadow: 0 4px 12px rgba(59, 130, 246, 0.1);
                transform: translateY(-2px);
            }
            
            .flow-step-card.completed {
                border-color: #10b981;
                background: #f0fdf4;
            }
            
            .flow-step-card.current {
                border-color: #3b82f6;
                background: #eff6ff;
                box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
            }
            
            .flow-step-number {
                display: inline-flex;
                align-items: center;
                justify-content: center;
                width: 32px;
                height: 32px;
                border-radius: 50%;
                font-size: 14px;
                font-weight: 700;
                margin-bottom: 8px;
            }
            
            .flow-step-card .flow-step-number {
                background: #e5e7eb;
                color: #6b7280;
            }
            
            .flow-step-card.completed .flow-step-number {
                background: #10b981;
                color: white;
            }
            
            .flow-step-card.current .flow-step-number {
                background: #3b82f6;
                color: white;
            }
            
            .flow-step-name {
                font-size: 13px;
                font-weight: 600;
                color: #1e293b;
                margin-bottom: 4px;
            }
            
            .flow-step-section {
                font-size: 11px;
                color: #6b7280;
                text-transform: uppercase;
                letter-spacing: 0.5px;
            }
            
            .flow-connector {
                position: absolute;
                top: 50%;
                right: -16px;
                width: 16px;
                height: 2px;
                background: #e5e7eb;
                transform: translateY(-50%);
            }
            
            .flow-step-card.completed .flow-connector {
                background: #10b981;
            }
        </style>
    `;
    
    document.head.insertAdjacentHTML('beforeend', styles);
}

// Add breadcrumb navigation to pages
function addBreadcrumbNavigation() {
    negotiationFlow.forEach(flowItem => {
        const pageId = `${flowItem.id}-page`;
        const pageElement = document.getElementById(pageId);
        
        if (pageElement) {
            // Find the page header
            const header = pageElement.querySelector('section');
            if (header) {
                // Create breadcrumb
                const breadcrumb = createBreadcrumb(flowItem);
                
                // Insert at the top of the page
                header.insertAdjacentHTML('afterbegin', breadcrumb);
            }
        }
    });
}

// Create breadcrumb HTML
function createBreadcrumb(flowItem) {
    const homeLink = flowItem.step === 1 ? 
        '<span class="breadcrumb-current">Home</span>' : 
        '<a href="#/dashboard">Home</a>';
    
    const sectionLink = flowItem.section === 'Start' ? '' :
        `<span class="breadcrumb-separator">›</span>
         <a href="#/deals-overview">${flowItem.section}</a>`;
    
    const currentPage = flowItem.step === 1 ? '' :
        `<span class="breadcrumb-separator">›</span>
         <span class="breadcrumb-current">${flowItem.name}</span>`;
    
    const stepIndicator = `<span class="breadcrumb-step">Step ${flowItem.step} of ${negotiationFlow.length}</span>`;
    
    return `
        <nav class="breadcrumb-nav">
            ${homeLink}
            ${sectionLink}
            ${currentPage}
            ${stepIndicator}
        </nav>
    `;
}

// Add flow diagram to Dashboard
function addFlowDiagramToDashboard() {
    const dashboard = document.getElementById('dashboard-page');
    if (!dashboard) return;
    
    // Find interventions widget (added in Phase 2)
    const interventionsWidget = dashboard.querySelector('#my-interventions-widget');
    if (!interventionsWidget) return;
    
    // Create flow diagram HTML
    const diagramHTML = `
        <!-- Negotiation Flow Diagram -->
        <section id="flow-diagram-section" class="mb-8">
            <div class="bg-white rounded-lg p-6 shadow-sm border border-stone">
                <div class="flex items-center justify-between mb-6">
                    <div>
                        <h3 class="text-lg font-semibold text-slate mb-2">Negotiation Flow</h3>
                        <p class="text-sm text-concrete">Track your progress through the deal negotiation process</p>
                    </div>
                    <button class="text-sm text-info hover:underline" onclick="toggleFlowDiagram()">
                        <i class="fa-solid fa-compress mr-1"></i> Collapse
                    </button>
                </div>
                
                <div class="flow-diagram" id="flow-diagram-grid">
                    ${negotiationFlow.map((item, index) => `
                        <div class="flow-step-card ${getFlowStepClass(item.step)}" 
                             onclick="navigateToFlowStep('${item.id}')"
                             data-step="${item.step}">
                            <div class="flow-step-number">${item.step}</div>
                            <div class="flow-step-name">${item.name}</div>
                            <div class="flow-step-section">${item.section}</div>
                            ${index < negotiationFlow.length - 1 ? '<div class="flow-connector"></div>' : ''}
                        </div>
                    `).join('')}
                </div>
                
                <div class="mt-6 pt-6 border-t border-stone flex items-center justify-between">
                    <div class="flex items-center space-x-6 text-sm">
                        <div class="flex items-center space-x-2">
                            <span class="w-4 h-4 rounded-full bg-success"></span>
                            <span class="text-concrete">Completed</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="w-4 h-4 rounded-full bg-info"></span>
                            <span class="text-concrete">Current</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="w-4 h-4 rounded-full bg-stone"></span>
                            <span class="text-concrete">Upcoming</span>
                        </div>
                    </div>
                    <div class="text-sm text-concrete">
                        <span class="font-semibold text-slate">${flowState.completedSteps.length}</span> of ${negotiationFlow.length} steps completed
                    </div>
                </div>
            </div>
        </section>
    `;
    
    // Insert after interventions widget
    interventionsWidget.insertAdjacentHTML('afterend', diagramHTML);
}

// Get flow step class based on state
function getFlowStepClass(step) {
    if (flowState.completedSteps.includes(step)) {
        return 'completed';
    } else if (step === flowState.currentStep) {
        return 'current';
    }
    return '';
}

// Navigate to flow step
function navigateToFlowStep(pageId) {
    const flowItem = negotiationFlow.find(item => item.id === pageId);
    
    if (flowItem && flowItem.id !== 'deal-room') {
        window.location.hash = `#/${pageId}`;
    } else if (flowItem && flowItem.id === 'deal-room') {
        UnionCore.showToast('Deal Room is accessed per-deal from Deals Overview', 'info');
    }
}

// Toggle flow diagram visibility
function toggleFlowDiagram() {
    const diagram = document.getElementById('flow-diagram-grid');
    const button = document.querySelector('#flow-diagram-section button');
    
    if (diagram && button) {
        if (diagram.style.display === 'none') {
            diagram.style.display = 'grid';
            button.innerHTML = '<i class="fa-solid fa-compress mr-1"></i> Collapse';
        } else {
            diagram.style.display = 'none';
            button.innerHTML = '<i class="fa-solid fa-expand mr-1"></i> Expand';
        }
    }
}

// Setup page change detection
function setupPageChangeDetection() {
    // Listen for hash changes
    window.addEventListener('hashchange', updateFlowState);
    
    // Listen for page visibility changes
    document.addEventListener('visibilitychange', updateFlowState);
}

// Update flow state based on current page
function updateFlowState() {
    // Get current page from hash
    const hash = window.location.hash.replace('#/', '');
    const currentPage = hash || 'dashboard';
    
    // Find current step
    const flowItem = negotiationFlow.find(item => item.id === currentPage);
    
    if (flowItem) {
        flowState.currentPage = currentPage;
        flowState.currentStep = flowItem.step;
        
        // Mark previous steps as completed
        flowState.completedSteps = negotiationFlow
            .filter(item => item.step < flowState.currentStep)
            .map(item => item.step);
        
        // Update navigation badges
        updateNavigationBadges();
        
        // Update flow diagram if visible
        updateFlowDiagram();
    }
}

// Update navigation badges
function updateNavigationBadges() {
    negotiationFlow.forEach(flowItem => {
        if (!flowItem.navId) return;
        
        const navElement = document.getElementById(flowItem.navId);
        if (navElement) {
            // Remove all flow classes
            navElement.classList.remove('flow-completed', 'flow-current');
            
            // Add appropriate class
            if (flowState.completedSteps.includes(flowItem.step)) {
                navElement.classList.add('flow-completed');
            } else if (flowItem.step === flowState.currentStep) {
                navElement.classList.add('flow-current');
            }
        }
    });
}

// Update flow diagram
function updateFlowDiagram() {
    const diagramCards = document.querySelectorAll('.flow-step-card');
    
    diagramCards.forEach(card => {
        const step = parseInt(card.getAttribute('data-step'));
        
        // Remove all classes
        card.classList.remove('completed', 'current');
        
        // Add appropriate class
        if (flowState.completedSteps.includes(step)) {
            card.classList.add('completed');
        } else if (step === flowState.currentStep) {
            card.classList.add('current');
        }
    });
    
    // Update progress text
    const progressText = document.querySelector('#flow-diagram-section .text-sm.text-concrete .font-semibold');
    if (progressText) {
        progressText.textContent = flowState.completedSteps.length;
    }
}

// Get next step in flow
function getNextStep() {
    const nextStep = flowState.currentStep + 1;
    if (nextStep <= negotiationFlow.length) {
        return negotiationFlow.find(item => item.step === nextStep);
    }
    return null;
}

// Get previous step in flow
function getPreviousStep() {
    const prevStep = flowState.currentStep - 1;
    if (prevStep >= 1) {
        return negotiationFlow.find(item => item.step === prevStep);
    }
    return null;
}

// Initialize on DOM ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initLinearFlowNavigation);
} else {
    initLinearFlowNavigation();
}

// Expose functions globally
window.navigateToFlowStep = navigateToFlowStep;
window.toggleFlowDiagram = toggleFlowDiagram;
window.getNextStep = getNextStep;
window.getPreviousStep = getPreviousStep;

console.log('✅ Linear Flow Navigation loaded');


// ============================================================================
// PAGE NAVIGATION SYSTEM
// Standardize page names and add Previous/Next navigation
// ============================================================================

// Initialize page navigation system
function initPageNavigationSystem() {
    console.log('🧭 Initializing Page Navigation System...');
    
    // Standardize page names in navigation
    standardizePageNames();
    
    // Add Previous/Next navigation to all pages
    addPreviousNextNavigation();
    
    console.log('✅ Page Navigation System initialized');
}

// Standardize page names in navigation
function standardizePageNames() {
    // Update "Pending Approvals" to "Approvals"
    const approvalsNav = document.getElementById('nav-approval-requests');
    if (approvalsNav) {
        const span = approvalsNav.querySelector('span:not(.ml-auto):not(.text-xs)');
        if (span && span.textContent.includes('Pending Approvals')) {
            span.textContent = 'Approvals';
        }
    }
    
    // Update "Audit & Activity Log" to "Activity Log"
    const activityNav = document.getElementById('nav-activity-log');
    if (activityNav) {
        const span = activityNav.querySelector('span:not(.ml-auto):not(.text-xs)');
        if (span && span.textContent.includes('Audit & Activity Log')) {
            span.textContent = 'Activity Log';
        }
    }
    
    // Update page headers to match
    updatePageHeader('approval-requests-page', 'Approvals', 'Review and process pending approval requests');
    updatePageHeader('activity-log-page', 'Activity Log', 'Track all system activities and changes');
}

// Update page header
function updatePageHeader(pageId, newTitle, newDescription) {
    const page = document.getElementById(pageId);
    if (!page) return;
    
    const header = page.querySelector('h1');
    if (header) {
        header.textContent = newTitle;
    }
    
    const description = page.querySelector('p.text-concrete');
    if (description && newDescription) {
        description.textContent = newDescription;
    }
}

// Add Previous/Next navigation to all pages
function addPreviousNextNavigation() {
    // Get flow from linear-flow-navigation.js
    const flow = [
        { step: 1, id: 'dashboard', name: 'Dashboard' },
        { step: 2, id: 'deals-overview', name: 'Deals Overview' },
        { step: 3, id: 'deal-room', name: 'Deal Room', skip: true }, // Skip - per-deal
        { step: 4, id: 'heads-of-terms', name: 'Heads of Terms' },
        { step: 5, id: 'document-management', name: 'Document Management' },
        { step: 6, id: 'approval-requests', name: 'Approvals' },
        { step: 7, id: 'interventions', name: 'Negotiation Dashboard' },
        { step: 8, id: 'risk-assessment', name: 'Risk Assessment' },
        { step: 9, id: 'portfolio', name: 'Portfolio Analytics' },
        { step: 10, id: 'activity-log', name: 'Activity Log' }
    ];
    
    flow.forEach((item, index) => {
        if (item.skip) return; // Skip Deal Room
        
        const pageId = `${item.id}-page`;
        const page = document.getElementById(pageId);
        
        if (page) {
            // Find previous and next items (skipping Deal Room)
            let prevItem = null;
            let nextItem = null;
            
            // Find previous (skip Deal Room)
            for (let i = index - 1; i >= 0; i--) {
                if (!flow[i].skip) {
                    prevItem = flow[i];
                    break;
                }
            }
            
            // Find next (skip Deal Room)
            for (let i = index + 1; i < flow.length; i++) {
                if (!flow[i].skip) {
                    nextItem = flow[i];
                    break;
                }
            }
            
            // Add navigation buttons
            addNavigationButtons(page, prevItem, nextItem);
        }
    });
}

// Add navigation buttons to page
function addNavigationButtons(page, prevItem, nextItem) {
    // Check if navigation already exists
    if (page.querySelector('.page-navigation')) return;
    
    // Create navigation HTML
    const navHTML = `
        <div class="page-navigation mt-8 pt-6 border-t border-stone flex items-center justify-between">
            ${prevItem ? `
                <button class="btn-nav btn-prev flex items-center space-x-2 px-4 py-3 rounded-lg border border-stone hover:border-info hover:bg-info hover:bg-opacity-5 transition-all"
                        onclick="navigateToPreviousStep()">
                    <i class="fa-solid fa-chevron-left text-info"></i>
                    <div class="text-left">
                        <div class="text-xs text-concrete uppercase tracking-wide">Previous</div>
                        <div class="text-sm font-semibold text-slate">${prevItem.name}</div>
                    </div>
                </button>
            ` : '<div></div>'}
            
            ${nextItem ? `
                <button class="btn-nav btn-next flex items-center space-x-2 px-4 py-3 rounded-lg border border-stone hover:border-info hover:bg-info hover:bg-opacity-5 transition-all"
                        onclick="navigateToNextStep()">
                    <div class="text-right">
                        <div class="text-xs text-concrete uppercase tracking-wide">Next</div>
                        <div class="text-sm font-semibold text-slate">${nextItem.name}</div>
                    </div>
                    <i class="fa-solid fa-chevron-right text-info"></i>
                </button>
            ` : '<div></div>'}
        </div>
        
        <style>
            .page-navigation {
                margin-top: 32px;
                padding-top: 24px;
                border-top: 1px solid #e5e7eb;
            }
            
            .btn-nav {
                cursor: pointer;
                transition: all 0.2s;
            }
            
            .btn-nav:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(59, 130, 246, 0.1);
            }
            
            .btn-prev:hover {
                padding-left: 12px;
            }
            
            .btn-next:hover {
                padding-right: 12px;
            }
        </style>
    `;
    
    // Append to page
    page.insertAdjacentHTML('beforeend', navHTML);
}

// Navigate to previous step
function navigateToPreviousStep() {
    if (typeof getPreviousStep === 'function') {
        const prevStep = getPreviousStep();
        if (prevStep && prevStep.id !== 'deal-room') {
            window.location.hash = `#/${prevStep.id}`;
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    }
}

// Navigate to next step
function navigateToNextStep() {
    if (typeof getNextStep === 'function') {
        const nextStep = getNextStep();
        if (nextStep && nextStep.id !== 'deal-room') {
            window.location.hash = `#/${nextStep.id}`;
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        } else if (nextStep && nextStep.id === 'deal-room') {
            // Skip Deal Room and go to next
            const afterDealRoom = {
                step: 4,
                id: 'heads-of-terms',
                name: 'Heads of Terms'
            };
            window.location.hash = `#/${afterDealRoom.id}`;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    }
}

// Add keyboard shortcuts for navigation
function setupKeyboardShortcuts() {
    document.addEventListener('keydown', function(e) {
        // Alt + Left Arrow = Previous
        if (e.altKey && e.key === 'ArrowLeft') {
            e.preventDefault();
            navigateToPreviousStep();
        }
        
        // Alt + Right Arrow = Next
        if (e.altKey && e.key === 'ArrowRight') {
            e.preventDefault();
            navigateToNextStep();
        }
    });
}

// Initialize on DOM ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', function() {
        initPageNavigationSystem();
        setupKeyboardShortcuts();
    });
} else {
    initPageNavigationSystem();
    setupKeyboardShortcuts();
}

// Expose functions globally
window.navigateToPreviousStep = navigateToPreviousStep;
window.navigateToNextStep = navigateToNextStep;

console.log('✅ Page Navigation System loaded');
console.log('💡 Tip: Use Alt + Arrow keys to navigate between pages');

</script></body></html>

<script>
// Force initialization after page load
setTimeout(function() {
    console.log('🔄 Force initializing flow alignment systems...');
    
    // Initialize all systems
    if (typeof initNotificationsSystem === 'function') {
        initNotificationsSystem();
        console.log('✅ Notifications system re-initialized');
    }
    
    if (typeof initInterventionsSystem === 'function') {
        initInterventionsSystem();
        console.log('✅ Interventions system re-initialized');
    }
    
    if (typeof initLinearFlowNavigation === 'function') {
        initLinearFlowNavigation();
        console.log('✅ Flow navigation re-initialized');
    }
    
    if (typeof initPageNavigationSystem === 'function') {
        initPageNavigationSystem();
        console.log('✅ Page navigation re-initialized');
    }
    
    console.log('✅ All flow alignment systems initialized');
}, 2000);
</script>

<!-- DEALS OVERVIEW PAGE ENHANCEMENTS - NOW USING EXTERNAL FILE -->
<!-- See client/deals-overview-fixes.js for implementation -->

<!-- CRITICAL FIXES FOR DEALS OVERVIEW -->
<script src="/deals-overview-fixes.js"></script>

<!-- APPROVAL REQUESTS PAGE DATA -->
<script src="/approval-requests-data.js"></script>

<!-- APPROVAL ANALYTICS CHARTS -->
<script src="/approval-analytics.js"></script>

</body></html>
